<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CLAUDE.md Pattern | Claude Code Patterns</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <div class="container">
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="index.html">Patterns</a>
      <span>/</span>
      <strong>CLAUDE.md</strong>
    </nav>

    <main>
      <!-- 1. Header + Metadata -->
      <header class="pattern-header">
        <h1>CLAUDE.md Pattern</h1>
        <div class="pattern-meta">
          <span class="meta-item">Type: Configuration</span>
          <span class="meta-item">Problem: Project-specific knowledge</span>
          <span class="meta-item">Complexity: Level 1</span>
          <span class="meta-item">Source: Official Claude Code feature</span>
        </div>
      </header>

      <!-- 2. Why This Matters -->
      <section class="why-matters">
        <h2>Why This Matters</h2>
        <p>Every Claude Code session starts fresh. The agent has no memory of your project's quirks, conventions, or gotchas. <strong>CLAUDE.md solves this by giving Claude immediate project context</strong> - it's the first thing read when a session starts.</p>
        <p>Without CLAUDE.md, you repeat yourself every session. With it, Claude knows your tech stack, commands, and conventions before you type a word.</p>
      </section>

      <!-- 3. Architecture -->
      <section id="architecture">
        <h2>Architecture</h2>
        <pre class="ascii-diagram">
Loading Hierarchy (most specific wins):

~/.claude/CLAUDE.md          (global - all projects)
         |
         v
./CLAUDE.md                  (project root)
         |
         v
./subdir/CLAUDE.md           (subdirectory override)
         |
         v
[Claude's working context]
        </pre>
        <p><strong>Precedence:</strong> All levels are loaded and combined. More specific files (subdirectory) can override or extend instructions from higher levels. Global settings apply everywhere; project settings scope to that repo.</p>
      </section>

      <!-- 4. How It Works -->
      <section id="how-it-works">
        <h2>How It Works</h2>
        <ol class="how-steps">
          <li>Claude Code automatically detects CLAUDE.md files on startup</li>
          <li>Files are loaded in hierarchy order (global, project, subdirectory)</li>
          <li>Content becomes part of Claude's system context</li>
          <li>Instructions persist for the entire session</li>
        </ol>

        <h3>What to Include</h3>
        <ul>
          <li><strong>Tech stack</strong> - Languages, frameworks, versions</li>
          <li><strong>Commands</strong> - Build, test, deploy commands</li>
          <li><strong>Conventions</strong> - Where files go, naming patterns</li>
          <li><strong>Gotchas</strong> - Known issues, workarounds, edge cases</li>
          <li><strong>File locations</strong> - Where to find key config, docs</li>
        </ul>

        <h3>What NOT to Include</h3>
        <ul>
          <li>Lengthy documentation (link to it instead)</li>
          <li>Secrets or credentials (use environment variables)</li>
          <li>Entire API references (too many tokens)</li>
        </ul>
      </section>

      <!-- 5. Key Decisions -->
      <section id="key-decisions">
        <h2>Key Decisions</h2>
        <table class="decision-table">
          <thead>
            <tr><th>Decision</th><th>Recommendation</th></tr>
          </thead>
          <tbody>
            <tr>
              <td>Global vs Project?</td>
              <td>Global for personal preferences (tone, style). Project for repo-specific knowledge.</td>
            </tr>
            <tr>
              <td>Length?</td>
              <td>Under 500 tokens. Every token costs context space.</td>
            </tr>
            <tr>
              <td>Commit it?</td>
              <td>Yes - project CLAUDE.md belongs in git. Team shares context.</td>
            </tr>
            <tr>
              <td>Update frequency?</td>
              <td>When conventions change or you repeat yourself to Claude.</td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- 6. Entry Points -->
      <section id="entry-points">
        <h2>Entry Points</h2>
        <ol class="entry-files">
          <li><code>~/.claude/CLAUDE.md</code> - Your global preferences (create if missing)</li>
          <li><code>./CLAUDE.md</code> - Project root instructions (most common)</li>
          <li><code>./subdir/CLAUDE.md</code> - Subdirectory overrides (rare, for monorepos)</li>
        </ol>
      </section>

      <!-- 7. Copy-Paste Templates -->
      <section id="copy-paste">
        <h2>Copy-Paste Templates</h2>

        <h3>Minimal Project CLAUDE.md</h3>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Project: MyApp

## Tech Stack
- Next.js 14, TypeScript, Prisma, PostgreSQL

## Commands
- `npm run dev` - Dev server (port 3000)
- `npm test` - Run Jest tests
- `npm run typecheck` - TypeScript check

## Conventions
- All API routes in src/api/
- Use Zod for validation
- Repository pattern for data access

## Known Gotchas
- Migrations need DEFAULT for existing data
- Use .optional() for nullable Zod fields</code></pre>
        </div>

        <h3>Global CLAUDE.md</h3>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Global Preferences

## Communication Style
- Be direct, skip preamble
- Show code before explanation
- Use bullet points over paragraphs

## Code Style
- TypeScript strict mode always
- Prefer functional patterns
- Test-first when adding features</code></pre>
        </div>
      </section>

      <!-- 8. What's Unusual -->
      <section id="whats-unusual">
        <h2>What's Unusual</h2>
        <p><strong>Markdown as configuration.</strong> Most tools use YAML, JSON, or TOML for config. Claude Code uses plain Markdown because:</p>
        <ul>
          <li>Natural language instructions work better for LLMs than structured data</li>
          <li>No syntax errors - Markdown is forgiving</li>
          <li>Human-readable without tooling</li>
          <li>Encourages writing for understanding, not parsing</li>
        </ul>
        <p>Think of CLAUDE.md as a README for your AI pair programmer, not a config file.</p>
      </section>

      <!-- 9. See Also -->
      <section id="see-also">
        <h2>See Also</h2>
        <ul>
          <li><a href="fresh-context.html">Fresh Context Pattern</a> - Why sessions should start clean</li>
          <li><a href="file-state.html">File-Based State Pattern</a> - Using files for agent memory</li>
          <li><a href="../index.html">All Patterns</a> - Pattern index</li>
        </ul>
      </section>
    </main>

    <nav class="footer-nav">
      <a href="index.html">Back to Patterns</a>
    </nav>
  </div>

  <script src="../js/copy-code.js"></script>
  <script src="../js/navigation.js"></script>
</body>
</html>
