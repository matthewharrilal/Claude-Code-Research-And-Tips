<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ralph Pattern - The Infinite Loop | Claude Code Documentation</title>
  <meta name="description" content="Complete guide to the Ralph Wiggum pattern - autonomous AI coding loops with fresh context and external memory.">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=VT323&family=Space+Grotesk:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- GSAP Full Suite -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>

  <!-- Tailwind Config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'matrix-black': '#0a0a0a',
            'matrix-dark': '#0d1117',
            'matrix-green': '#00ff41',
            'matrix-green-dim': '#00cc33',
            'matrix-green-muted': '#00aa2a',
            'matrix-green-ghost': '#008833',
            'matrix-amber': '#ffb000',
            'matrix-cyan': '#00ffff',
            'scanline': 'rgba(0, 0, 0, 0.05)',
          },
          fontFamily: {
            'terminal': ['VT323', 'Fira Code', 'SF Mono', 'monospace'],
            'display': ['Space Grotesk', 'system-ui', 'sans-serif'],
            'mono': ['Fira Code', 'SF Mono', 'Monaco', 'monospace'],
          },
          boxShadow: {
            'glow': '0 0 5px rgba(0, 255, 65, 0.4), 0 0 10px rgba(0, 255, 65, 0.2)',
            'glow-strong': '0 0 10px rgba(0, 255, 65, 0.5), 0 0 20px rgba(0, 255, 65, 0.3), 0 0 30px rgba(0, 255, 65, 0.1)',
            'glow-amber': '0 0 5px rgba(255, 176, 0, 0.4), 0 0 10px rgba(255, 176, 0, 0.2)',
          },
          animation: {
            'blink': 'blink 1s infinite',
            'flicker': 'flicker 4s infinite',
            'glow-pulse': 'glowPulse 2s ease-in-out infinite',
          },
        },
      },
    }
  </script>

  <style>
    /* ========================================
       CSS Variables - CRT Matrix Theme
       ======================================== */
    :root {
      --matrix-black: #0a0a0a;
      --matrix-dark: #0d1117;
      --matrix-green: #00ff41;
      --matrix-green-dim: #00cc33;
      --matrix-green-muted: #00aa2a;
      --matrix-green-ghost: #008833;
      --matrix-green-glow: rgba(0, 255, 65, 0.4);
      --matrix-amber: #ffb000;
      --matrix-cyan: #00ffff;
      --header-height: 60px;
    }

    /* ========================================
       Keyframe Animations
       ======================================== */
    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    @keyframes flicker {
      0%, 100% { opacity: 1; }
      92% { opacity: 1; }
      93% { opacity: 0.85; }
      94% { opacity: 1; }
    }

    @keyframes glowPulse {
      0%, 100% { box-shadow: 0 0 5px rgba(0, 255, 65, 0.4); }
      50% { box-shadow: 0 0 15px rgba(0, 255, 65, 0.6), 0 0 25px rgba(0, 255, 65, 0.3); }
    }

    @keyframes scanlineMove {
      0% { background-position: 0 0; }
      100% { background-position: 0 4px; }
    }

    /* ========================================
       Scanlines Overlay (Header/Footer only)
       ======================================== */
    .scanlines::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.03) 2px,
        rgba(0, 0, 0, 0.03) 4px
      );
      pointer-events: none;
      z-index: 10;
    }

    /* ========================================
       Phosphor Glow Effects
       ======================================== */
    .glow-text-hero {
      text-shadow:
        0 0 5px var(--matrix-green-glow),
        0 0 10px var(--matrix-green-glow),
        0 0 20px var(--matrix-green-glow);
    }

    .glow-text {
      text-shadow: 0 0 10px var(--matrix-green-glow);
    }

    .glow-border {
      box-shadow: 0 0 5px var(--matrix-green-glow), inset 0 0 5px rgba(0, 255, 65, 0.1);
    }

    /* ========================================
       Terminal Cursor
       ======================================== */
    .terminal-cursor::after {
      content: '\2588';
      animation: blink 1s infinite;
      color: var(--matrix-green);
      margin-left: 2px;
    }

    /* ========================================
       CRT Flicker (Subtle)
       ======================================== */
    .crt-flicker {
      animation: flicker 4s infinite;
    }

    /* ========================================
       Scrollbar Styling
       ======================================== */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--matrix-black);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--matrix-green-ghost);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--matrix-green-dim);
    }

    /* ========================================
       Three-Panel Layout
       ======================================== */
    .three-panel-container {
      display: grid;
      grid-template-columns: 280px 1fr 200px;
      min-height: calc(100vh - var(--header-height));
      max-width: 1400px;
      margin: 0 auto;
    }

    .nav-sidebar, .toc-sidebar {
      position: sticky;
      top: var(--header-height);
      max-height: calc(100vh - var(--header-height));
      overflow-y: auto;
    }

    /* ========================================
       Copy Button Animation States
       ======================================== */
    .copy-button .copy-icon,
    .copy-button .check-icon {
      transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .copy-button .check-icon {
      position: absolute;
      opacity: 0;
      transform: scale(0.5) rotate(-90deg);
    }

    .copy-button.copied .copy-icon {
      opacity: 0;
      transform: scale(0.5) rotate(90deg);
    }

    .copy-button.copied .check-icon {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }

    /* ========================================
       Navigation Active State
       ======================================== */
    .nav-item {
      transition: all 0.2s ease;
      position: relative;
    }

    .nav-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: transparent;
      transition: background 0.2s ease;
    }

    .nav-item:hover::before,
    .nav-item.active::before {
      background: var(--matrix-green);
    }

    .nav-item.active {
      color: var(--matrix-green);
      background: rgba(0, 255, 65, 0.05);
    }

    /* ========================================
       TOC Active Section
       ======================================== */
    .toc-link {
      transition: all 0.2s ease;
      border-left: 2px solid transparent;
    }

    .toc-link:hover {
      color: var(--matrix-green);
    }

    .toc-link.active {
      color: var(--matrix-green);
      border-left-color: var(--matrix-green);
      background: rgba(0, 255, 65, 0.05);
    }

    /* ========================================
       Code Block Styling
       ======================================== */
    .code-block {
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid var(--matrix-green-ghost);
      border-radius: 8px;
      position: relative;
    }

    .code-block:hover {
      border-color: var(--matrix-green-dim);
      box-shadow: 0 0 10px rgba(0, 255, 65, 0.1);
    }

    /* ========================================
       Collapsible Sections
       ======================================== */
    .collapsible-trigger {
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .collapsible-trigger:hover {
      background: rgba(0, 255, 65, 0.05);
    }

    .collapsible-icon {
      transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .collapsible-trigger[aria-expanded="true"] .collapsible-icon {
      transform: rotate(90deg);
    }

    .collapsible-content {
      overflow: hidden;
      max-height: 0;
      transition: max-height 0.3s ease-out;
    }

    .collapsible-content.open {
      max-height: 2000px;
    }

    /* ========================================
       Checkpoint Box
       ======================================== */
    .checkpoint-box {
      background: linear-gradient(135deg, rgba(0, 255, 65, 0.05) 0%, rgba(0, 0, 0, 0.3) 100%);
      border-left: 4px solid var(--matrix-green);
      border-radius: 0 8px 8px 0;
    }

    /* ========================================
       Troubleshooting Accordion
       ======================================== */
    .troubleshoot-accordion {
      border: 1px solid rgba(255, 176, 0, 0.3);
      border-radius: 8px;
    }

    .troubleshoot-accordion summary {
      background: rgba(255, 176, 0, 0.05);
      cursor: pointer;
      list-style: none;
    }

    .troubleshoot-accordion summary::-webkit-details-marker {
      display: none;
    }

    .troubleshoot-accordion[open] summary {
      border-bottom: 1px solid rgba(255, 176, 0, 0.2);
    }

    /* ========================================
       You Are Here Box
       ======================================== */
    .you-are-here {
      background: linear-gradient(135deg, rgba(0, 255, 255, 0.05) 0%, rgba(0, 0, 0, 0.3) 100%);
      border-left: 4px solid var(--matrix-cyan);
      border-radius: 0 8px 8px 0;
    }

    /* ========================================
       Mobile Styles
       ======================================== */
    @media (max-width: 1024px) {
      .three-panel-container {
        grid-template-columns: 1fr;
      }

      .nav-sidebar {
        display: none;
      }

      .toc-sidebar {
        display: none;
      }

      .mobile-nav-toggle,
      .mobile-toc-toggle {
        display: flex;
      }
    }

    @media (max-width: 768px) {
      .hero-code {
        font-size: 0.875rem;
      }
    }

    @media (min-width: 1025px) {
      .mobile-nav-toggle,
      .mobile-toc-toggle {
        display: none;
      }
    }

    /* ========================================
       Mobile Slide-in Nav
       ======================================== */
    .mobile-nav-drawer {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 280px;
      background: var(--matrix-dark);
      z-index: 100;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      overflow-y: auto;
    }

    .mobile-nav-drawer.open {
      transform: translateX(0);
    }

    .mobile-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 99;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .mobile-overlay.open {
      opacity: 1;
      pointer-events: auto;
    }

    /* ========================================
       Reduced Motion Preferences
       ======================================== */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }

      .scanlines::before {
        display: none;
      }

      .crt-flicker {
        animation: none;
      }

      .terminal-cursor::after {
        animation: none;
        opacity: 1;
      }

      .magnetic-item {
        transform: none !important;
      }
    }

    /* ========================================
       Focus Indicators
       ======================================== */
    :focus-visible {
      outline: 2px solid var(--matrix-green);
      outline-offset: 2px;
    }

    /* ========================================
       Skip Link
       ======================================== */
    .skip-link {
      position: absolute;
      top: -100px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--matrix-green);
      color: var(--matrix-black);
      padding: 0.5rem 1rem;
      z-index: 1000;
      border-radius: 4px;
      transition: top 0.2s ease;
    }

    .skip-link:focus {
      top: 10px;
    }

    /* ========================================
       Initial Animation States
       ======================================== */
    .animate-on-load {
      opacity: 0;
    }
  </style>
</head>

<body class="bg-matrix-black text-matrix-green-muted font-display antialiased">

  <!-- Skip to Content Link -->
  <a href="#main-content" class="skip-link font-mono text-sm font-bold">Skip to main content</a>

  <!-- Mobile Overlay -->
  <div class="mobile-overlay" id="mobile-overlay" onclick="closeMobileNav()"></div>

  <!-- Mobile Navigation Drawer -->
  <div class="mobile-nav-drawer" id="mobile-nav-drawer">
    <div class="p-4 border-b border-matrix-green-ghost flex items-center justify-between">
      <span class="font-terminal text-xl text-matrix-green">RALPH DOCS</span>
      <button onclick="closeMobileNav()" class="p-2 hover:bg-matrix-green/10 rounded" aria-label="Close navigation">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>
    <nav class="p-4" id="mobile-nav-content">
      <!-- Populated by JS -->
    </nav>
  </div>

  <!-- Header -->
  <header class="sticky top-0 z-50 bg-matrix-dark/95 backdrop-blur-sm border-b border-matrix-green-ghost scanlines" style="height: var(--header-height);">
    <div class="max-w-[1400px] mx-auto px-4 h-full flex items-center justify-between">
      <!-- Left: Logo + Mobile Nav Toggle -->
      <div class="flex items-center gap-4">
        <button class="mobile-nav-toggle p-2 hover:bg-matrix-green/10 rounded lg:hidden" onclick="openMobileNav()" aria-label="Open navigation">
          <i data-lucide="menu" class="w-5 h-5 text-matrix-green"></i>
        </button>
        <a href="#" class="flex items-center gap-2 font-terminal text-xl text-matrix-green glow-text hover:glow-text-hero transition-all">
          <i data-lucide="terminal" class="w-5 h-5"></i>
          <span>RALPH DOCS</span>
        </a>
      </div>

      <!-- Center: Search Placeholder -->
      <div class="hidden md:flex items-center gap-2 px-4 py-2 bg-matrix-black/50 border border-matrix-green-ghost rounded-lg text-matrix-green-ghost text-sm cursor-pointer hover:border-matrix-green-dim transition-colors" onclick="showSearchPlaceholder()">
        <i data-lucide="search" class="w-4 h-4"></i>
        <span>Search...</span>
        <kbd class="ml-4 px-2 py-0.5 bg-matrix-dark rounded text-xs">&#8984;K</kbd>
      </div>

      <!-- Right: Theme Toggle + Mobile TOC -->
      <div class="flex items-center gap-2">
        <button class="mobile-toc-toggle p-2 hover:bg-matrix-green/10 rounded lg:hidden" onclick="toggleMobileToc()" aria-label="Table of contents">
          <i data-lucide="list" class="w-5 h-5 text-matrix-green"></i>
        </button>
        <button class="p-2 hover:bg-matrix-green/10 rounded" aria-label="Toggle theme (currently dark)">
          <i data-lucide="moon" class="w-5 h-5 text-matrix-green"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- Main Three-Panel Layout -->
  <div class="three-panel-container">

    <!-- Left Navigation Sidebar -->
    <aside class="nav-sidebar bg-matrix-dark border-r border-matrix-green-ghost p-4" id="nav-sidebar">
      <nav aria-label="Documentation navigation">
        <!-- Overview Section -->
        <div class="mb-6">
          <h3 class="text-xs font-bold uppercase tracking-wider text-matrix-green mb-3 px-3">Overview</h3>
          <ul class="space-y-1">
            <li>
              <a href="#overview" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green active">
                The One-Liner
              </a>
            </li>
          </ul>
        </div>

        <!-- Philosophy Section -->
        <div class="mb-6">
          <h3 class="text-xs font-bold uppercase tracking-wider text-matrix-green mb-3 px-3">Philosophy</h3>
          <ul class="space-y-1">
            <li>
              <a href="#philosophy" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green">
                Core Principles
              </a>
            </li>
            <li>
              <a href="#fresh-context" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green">
                Fresh Context
              </a>
            </li>
            <li>
              <a href="#external-memory" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green">
                External Memory
              </a>
            </li>
          </ul>
        </div>

        <!-- Getting Started Section (Collapsible) -->
        <div class="mb-6">
          <button class="collapsible-trigger w-full flex items-center justify-between px-3 py-2 text-xs font-bold uppercase tracking-wider text-matrix-green rounded" aria-expanded="true" aria-controls="getting-started-content">
            <span>Getting Started</span>
            <i data-lucide="chevron-right" class="collapsible-icon w-4 h-4"></i>
          </button>
          <div id="getting-started-content" class="collapsible-content open">
            <ul class="space-y-1 mt-2">
              <li>
                <a href="#file-structure" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">
                  File Structure
                </a>
              </li>
              <li>
                <a href="#basic-implementation" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">
                  Basic Implementation
                </a>
              </li>
              <li>
                <a href="#first-loop" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">
                  Your First Loop
                </a>
              </li>
            </ul>
          </div>
        </div>

        <!-- Variants Section (Collapsible) -->
        <div class="mb-6">
          <button class="collapsible-trigger w-full flex items-center justify-between px-3 py-2 text-xs font-bold uppercase tracking-wider text-matrix-green rounded" aria-expanded="false" aria-controls="variants-content">
            <span>Variants (10)</span>
            <i data-lucide="chevron-right" class="collapsible-icon w-4 h-4"></i>
          </button>
          <div id="variants-content" class="collapsible-content">
            <ul class="space-y-1 mt-2">
              <li><a href="#variant-basic" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">Basic Ralph</a></li>
              <li><a href="#variant-prd" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">PRD-Driven</a></li>
              <li><a href="#variant-dr-ralph" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">Dr. Ralph (Confidence)</a></li>
              <li><a href="#variant-afk" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">AFK / Overnight</a></li>
              <li><a href="#variant-hotl" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">HOTL (Human Loop)</a></li>
              <li><a href="#variant-parallel" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">Parallel Ralph</a></li>
              <li><a href="#variant-marathon" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">Marathon</a></li>
              <li><a href="#variant-compounding" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">Compounding</a></li>
              <li><a href="#variant-marketer" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">Ralph Marketer</a></li>
              <li><a href="#variant-rate-limited" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green pl-6">Rate-Limited</a></li>
            </ul>
          </div>
        </div>

        <!-- Advanced Section -->
        <div class="mb-6">
          <h3 class="text-xs font-bold uppercase tracking-wider text-matrix-green mb-3 px-3">Advanced</h3>
          <ul class="space-y-1">
            <li>
              <a href="#success-factors" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green">
                8 Success Factors
              </a>
            </li>
            <li>
              <a href="#combinations" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-green">
                Pattern Combinations
              </a>
            </li>
          </ul>
        </div>

        <!-- Troubleshooting Section -->
        <div class="mb-6">
          <h3 class="text-xs font-bold uppercase tracking-wider text-matrix-amber mb-3 px-3">Troubleshooting</h3>
          <ul class="space-y-1">
            <li>
              <a href="#common-failures" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-amber">
                Common Failures
              </a>
            </li>
            <li>
              <a href="#when-not-to-use" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-amber">
                When NOT to Use
              </a>
            </li>
          </ul>
        </div>

        <!-- Reference Section -->
        <div class="mb-6">
          <h3 class="text-xs font-bold uppercase tracking-wider text-matrix-cyan mb-3 px-3">Reference</h3>
          <ul class="space-y-1">
            <li>
              <a href="#cost-estimates" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-cyan">
                Cost Estimates
              </a>
            </li>
            <li>
              <a href="#case-studies" class="nav-item block px-3 py-2 text-sm rounded hover:text-matrix-cyan">
                Case Studies
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="p-6 lg:p-8 min-w-0" id="main-content">

      <!-- You Are Here Box -->
      <div class="you-are-here p-4 mb-8 content-section" id="you-are-here">
        <div class="flex items-start gap-3">
          <i data-lucide="map-pin" class="w-5 h-5 text-matrix-cyan flex-shrink-0 mt-0.5"></i>
          <div>
            <h4 class="font-bold text-matrix-cyan mb-1">You Are Here</h4>
            <p class="text-sm text-matrix-green-muted">
              This is the <strong class="text-matrix-green">Ralph pattern overview</strong> - the flagship autonomous coding loop.
              Ralph lives at <strong>Level 3-4</strong> on the complexity ladder (see <a href="#" class="text-matrix-cyan underline hover:text-matrix-green">JUDGMENT-GUIDE</a>).
              <br><br>
              <strong class="text-matrix-green">Prerequisites:</strong> Comfortable with CLAUDE.md, basic CLI usage, and git workflows.
              <br>
              <strong class="text-matrix-green">Time to implement:</strong> 30-60 minutes for basic setup.
            </p>
          </div>
        </div>
      </div>

      <!-- Hero Section -->
      <section class="mb-12 content-section" id="overview">
        <div class="text-center mb-8">
          <h1 class="font-terminal text-4xl md:text-5xl text-matrix-green glow-text-hero mb-4">The Ralph Pattern</h1>
          <p class="text-lg text-matrix-green-dim mb-6">The Infinite Loop of Fresh Context</p>
        </div>

        <!-- The One-Liner with Typewriter -->
        <div class="relative bg-matrix-dark border border-matrix-green-ghost rounded-xl p-6 mb-8 glow-border">
          <div class="flex flex-col md:flex-row items-center justify-between gap-4">
            <code class="hero-code font-terminal text-xl md:text-2xl text-matrix-green" id="hero-code">
              while :; do cat PROMPT.md | claude ; done
            </code>
            <button
              class="copy-button relative flex items-center gap-2 px-4 py-2 bg-matrix-black border border-matrix-green-ghost rounded-lg hover:border-matrix-green hover:shadow-glow transition-all"
              onclick="copyHeroCode(this)"
              aria-label="Copy command"
            >
              <i data-lucide="copy" class="copy-icon w-4 h-4"></i>
              <i data-lucide="check" class="check-icon w-4 h-4 text-matrix-green"></i>
              <span class="text-sm">Copy</span>
            </button>
          </div>
          <p class="text-center text-matrix-green-ghost text-sm mt-4 italic">The one-liner. Everything else is scaffolding.</p>
        </div>

        <!-- Core Insight Callout -->
        <div class="bg-matrix-dark/50 border border-matrix-green-dim rounded-xl p-6 mb-8">
          <div class="flex items-start gap-4">
            <i data-lucide="brain" class="w-8 h-8 text-matrix-green flex-shrink-0"></i>
            <div>
              <h3 class="font-bold text-matrix-green text-lg mb-2">The Core Insight</h3>
              <p class="text-matrix-green-muted mb-3">
                <span class="text-matrix-green font-bold">"Memory lives outside the model."</span>
              </p>
              <p class="text-sm text-matrix-green-ghost">
                Each iteration spawns a NEW Claude instance with NO memory. Continuity comes from external artifacts:
                <code class="px-1.5 py-0.5 bg-matrix-black rounded text-matrix-green-dim">prd.json</code>,
                <code class="px-1.5 py-0.5 bg-matrix-black rounded text-matrix-green-dim">progress.txt</code>,
                and <code class="px-1.5 py-0.5 bg-matrix-black rounded text-matrix-green-dim">git history</code>.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- Philosophy Section -->
      <section class="mb-12 content-section" id="philosophy">
        <h2 class="font-terminal text-2xl text-matrix-green glow-text mb-6 flex items-center gap-3">
          <i data-lucide="lightbulb" class="w-6 h-6"></i>
          Philosophy: Three Principles
        </h2>

        <div class="grid gap-4 md:grid-cols-3">
          <!-- Principle 1 -->
          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-5 hover:border-matrix-green-dim transition-colors" id="fresh-context">
            <div class="flex items-center gap-2 mb-3">
              <span class="w-8 h-8 flex items-center justify-center bg-matrix-green/10 rounded-full text-matrix-green font-bold">1</span>
              <h3 class="font-bold text-matrix-green">Fresh Context Beats Accumulated</h3>
            </div>
            <p class="text-sm text-matrix-green-muted">
              Each iteration spawns a new Claude instance. Avoids "context rot" where quality degrades with token accumulation.
            </p>
          </div>

          <!-- Principle 2 -->
          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-5 hover:border-matrix-green-dim transition-colors" id="external-memory">
            <div class="flex items-center gap-2 mb-3">
              <span class="w-8 h-8 flex items-center justify-center bg-matrix-green/10 rounded-full text-matrix-green font-bold">2</span>
              <h3 class="font-bold text-matrix-green">Failure Is Data, Not Defeat</h3>
            </div>
            <p class="text-sm text-matrix-green-muted">
              "Deterministically bad" failures are predictable and informative. Each failure refines the next attempt.
            </p>
          </div>

          <!-- Principle 3 -->
          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-5 hover:border-matrix-green-dim transition-colors">
            <div class="flex items-center gap-2 mb-3">
              <span class="w-8 h-8 flex items-center justify-center bg-matrix-green/10 rounded-full text-matrix-green font-bold">3</span>
              <h3 class="font-bold text-matrix-green">Small + Verifiable = Reliable</h3>
            </div>
            <p class="text-sm text-matrix-green-muted">
              Tasks must fit in one context window. Every task has explicit, testable acceptance criteria.
            </p>
          </div>
        </div>
      </section>

      <!-- File Structure Section -->
      <section class="mb-12 content-section" id="file-structure">
        <h2 class="font-terminal text-2xl text-matrix-green glow-text mb-6 flex items-center gap-3">
          <i data-lucide="folder-tree" class="w-6 h-6"></i>
          File Structure
        </h2>

        <div class="code-block p-4 mb-4">
          <div class="flex items-center justify-between mb-3 pb-2 border-b border-matrix-green-ghost">
            <span class="text-xs text-matrix-green-ghost font-mono">Terminal</span>
            <button class="copy-button relative p-1.5 hover:bg-matrix-green/10 rounded" onclick="copyCodeBlock(this, 'file-structure-code')" aria-label="Copy">
              <i data-lucide="copy" class="copy-icon w-4 h-4"></i>
              <i data-lucide="check" class="check-icon w-4 h-4 text-matrix-green"></i>
            </button>
          </div>
          <pre class="font-mono text-sm overflow-x-auto" id="file-structure-code"><span class="text-matrix-green">project/</span>
├── <span class="text-matrix-green">scripts/ralph/</span>           <span class="text-matrix-green-ghost"># Or plans/ - naming varies</span>
│   ├── <span class="text-matrix-green-dim">ralph.sh</span>             <span class="text-matrix-green-ghost"># The loop script</span>
│   ├── <span class="text-matrix-green-dim">prompt.md</span>            <span class="text-matrix-green-ghost"># Instructions for each iteration</span>
│   ├── <span class="text-matrix-green-dim">prd.json</span>             <span class="text-matrix-green-ghost"># Task list with user stories</span>
│   └── <span class="text-matrix-green-dim">progress.txt</span>         <span class="text-matrix-green-ghost"># Append-only learnings</span>
└── <span class="text-matrix-green-dim">CLAUDE.md</span>                <span class="text-matrix-green-ghost"># Optional: Project context</span></pre>
        </div>
      </section>

      <!-- Basic Implementation Section -->
      <section class="mb-12 content-section" id="basic-implementation">
        <h2 class="font-terminal text-2xl text-matrix-green glow-text mb-6 flex items-center gap-3">
          <i data-lucide="code" class="w-6 h-6"></i>
          Basic Implementation
        </h2>

        <h3 class="font-bold text-matrix-green-dim text-lg mb-4">ralph.sh - The Core Loop</h3>

        <div class="code-block p-4 mb-6">
          <div class="flex items-center justify-between mb-3 pb-2 border-b border-matrix-green-ghost">
            <span class="text-xs text-matrix-green-ghost font-mono">bash</span>
            <button class="copy-button relative p-1.5 hover:bg-matrix-green/10 rounded" onclick="copyCodeBlock(this, 'ralph-sh-code')" aria-label="Copy">
              <i data-lucide="copy" class="copy-icon w-4 h-4"></i>
              <i data-lucide="check" class="check-icon w-4 h-4 text-matrix-green"></i>
            </button>
          </div>
          <pre class="font-mono text-sm overflow-x-auto" id="ralph-sh-code"><span class="text-matrix-green-ghost">#!/bin/bash</span>
<span class="text-matrix-amber">set -e</span>

<span class="text-matrix-green-dim">MAX_ITERATIONS</span>=<span class="text-matrix-cyan">${1:-10}</span>
<span class="text-matrix-green-dim">SCRIPT_DIR</span>="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo <span class="text-matrix-green">"Starting Ralph"</span>

<span class="text-matrix-amber">for</span> i <span class="text-matrix-amber">in</span> $(seq 1 $MAX_ITERATIONS); <span class="text-matrix-amber">do</span>
  echo <span class="text-matrix-green">"=== Iteration $i ==="</span>

  <span class="text-matrix-green-dim">OUTPUT</span>=$(cat "$SCRIPT_DIR/prompt.md" \
    | claude --dangerously-skip-permissions 2>&1 \
    | tee /dev/stderr) || true

  <span class="text-matrix-amber">if</span> echo "$OUTPUT" | grep -q "<span class="text-matrix-cyan">&lt;promise&gt;COMPLETE&lt;/promise&gt;</span>"; <span class="text-matrix-amber">then</span>
    echo <span class="text-matrix-green">"Done!"</span>
    exit 0
  <span class="text-matrix-amber">fi</span>

  sleep 2
<span class="text-matrix-amber">done</span>

echo <span class="text-matrix-amber">"Max iterations reached"</span>
exit 1</pre>
        </div>

        <div class="flex flex-wrap gap-3 mb-6">
          <code class="px-3 py-1.5 bg-matrix-dark border border-matrix-green-ghost rounded text-sm font-mono">
            chmod +x scripts/ralph/ralph.sh
          </code>
          <code class="px-3 py-1.5 bg-matrix-dark border border-matrix-green-ghost rounded text-sm font-mono">
            ./scripts/ralph/ralph.sh 25
          </code>
        </div>
      </section>

      <!-- Checkpoint Box -->
      <section class="mb-12 content-section" id="first-loop">
        <div class="checkpoint-box p-5">
          <div class="flex items-start gap-3">
            <i data-lucide="check-circle-2" class="w-6 h-6 text-matrix-green flex-shrink-0 mt-0.5"></i>
            <div>
              <h4 class="font-bold text-matrix-green mb-2">Checkpoint: Complete Ralph Setup</h4>
              <p class="text-sm text-matrix-green-muted mb-4">
                <strong>Where you are:</strong> All 4 files exist. You're ready to run Ralph for the first time.
              </p>

              <h5 class="font-bold text-matrix-green-dim text-sm mb-2">Verify your state:</h5>
              <div class="code-block p-3 mb-4">
                <pre class="font-mono text-xs overflow-x-auto"><span class="text-matrix-green-ghost"># Check all files exist</span>
ls -la scripts/ralph/

<span class="text-matrix-green-ghost"># Verify ralph.sh is executable</span>
test -x scripts/ralph/ralph.sh && echo <span class="text-matrix-green">"ralph.sh is executable"</span>

<span class="text-matrix-green-ghost"># Verify prd.json has incomplete tasks</span>
cat scripts/ralph/prd.json | jq '.userStories[] | select(.passes == false) | .id' | head -3</pre>
              </div>

              <h5 class="font-bold text-matrix-green-dim text-sm mb-2">Pre-flight checklist:</h5>
              <ul class="space-y-1 text-sm text-matrix-green-muted">
                <li class="flex items-center gap-2">
                  <input type="checkbox" class="w-4 h-4 accent-matrix-green">
                  <span><code class="text-matrix-green-dim">ralph.sh</code> has shebang and is executable</span>
                </li>
                <li class="flex items-center gap-2">
                  <input type="checkbox" class="w-4 h-4 accent-matrix-green">
                  <span><code class="text-matrix-green-dim">prompt.md</code> includes the <code>&lt;promise&gt;COMPLETE&lt;/promise&gt;</code> stop condition</span>
                </li>
                <li class="flex items-center gap-2">
                  <input type="checkbox" class="w-4 h-4 accent-matrix-green">
                  <span><code class="text-matrix-green-dim">prd.json</code> is valid JSON with all <code>passes: false</code></span>
                </li>
                <li class="flex items-center gap-2">
                  <input type="checkbox" class="w-4 h-4 accent-matrix-green">
                  <span>Git branch created for this feature</span>
                </li>
                <li class="flex items-center gap-2">
                  <input type="checkbox" class="w-4 h-4 accent-matrix-green">
                  <span>Tests can run (<code>npm test</code> or equivalent)</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Success Factors Section -->
      <section class="mb-12 content-section" id="success-factors">
        <h2 class="font-terminal text-2xl text-matrix-green glow-text mb-6 flex items-center gap-3">
          <i data-lucide="star" class="w-6 h-6"></i>
          8 Critical Success Factors
        </h2>

        <div class="grid gap-4 md:grid-cols-2">
          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-4">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-matrix-green font-bold">1.</span>
              <h4 class="font-bold text-matrix-green-dim">Task Sizing</h4>
            </div>
            <p class="text-sm text-matrix-green-muted">Each task must fit in ONE context window. Use the 2-3 sentence rule.</p>
          </div>

          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-4">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-matrix-green font-bold">2.</span>
              <h4 class="font-bold text-matrix-green-dim">Story Ordering</h4>
            </div>
            <p class="text-sm text-matrix-green-muted">Dependencies first: Schema &rarr; Backend &rarr; UI &rarr; Dashboard.</p>
          </div>

          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-4">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-matrix-green font-bold">3.</span>
              <h4 class="font-bold text-matrix-green-dim">Verifiable Criteria</h4>
            </div>
            <p class="text-sm text-matrix-green-muted">Always include <code class="text-matrix-green-dim">"npm run typecheck passes"</code> in every story.</p>
          </div>

          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-4">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-matrix-green font-bold">4.</span>
              <h4 class="font-bold text-matrix-green-dim">Feedback Loops</h4>
            </div>
            <p class="text-sm text-matrix-green-muted">Without verification, Ralph produces garbage. Tests are non-negotiable.</p>
          </div>

          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-4">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-matrix-green font-bold">5.</span>
              <h4 class="font-bold text-matrix-green-dim">Fresh Context</h4>
            </div>
            <p class="text-sm text-matrix-green-muted">Each iteration = new Claude instance. Memory lives in external files.</p>
          </div>

          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-4">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-matrix-green font-bold">6.</span>
              <h4 class="font-bold text-matrix-green-dim">Explicit Signals</h4>
            </div>
            <p class="text-sm text-matrix-green-muted">Use <code class="text-matrix-green-dim">&lt;promise&gt;COMPLETE&lt;/promise&gt;</code> for loop detection.</p>
          </div>

          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-4">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-matrix-green font-bold">7.</span>
              <h4 class="font-bold text-matrix-green-dim">Max Iterations</h4>
            </div>
            <p class="text-sm text-matrix-green-muted">Always set a limit. Prevents runaway costs and infinite loops.</p>
          </div>

          <div class="bg-matrix-dark border border-matrix-green-ghost rounded-lg p-4">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-matrix-green font-bold">8.</span>
              <h4 class="font-bold text-matrix-green-dim">Learnings Compound</h4>
            </div>
            <p class="text-sm text-matrix-green-muted">progress.txt for session memory, AGENTS.md for permanent docs.</p>
          </div>
        </div>
      </section>

      <!-- Common Failures Section -->
      <section class="mb-12 content-section" id="common-failures">
        <h2 class="font-terminal text-2xl text-matrix-amber mb-6 flex items-center gap-3">
          <i data-lucide="alert-triangle" class="w-6 h-6"></i>
          Common Failures
        </h2>

        <div class="space-y-4">
          <!-- Failure 1 -->
          <details class="troubleshoot-accordion">
            <summary class="p-4 flex items-center gap-3 text-matrix-amber">
              <i data-lucide="chevron-right" class="w-4 h-4 transition-transform"></i>
              <span class="font-bold">Stories Too Large</span>
            </summary>
            <div class="p-4 text-sm text-matrix-green-muted">
              <p class="mb-2"><strong class="text-matrix-amber">Symptom:</strong> Context overflow, broken code, agent loses track.</p>
              <p class="mb-2"><strong class="text-matrix-green-dim">Diagnosis:</strong> Task takes more than one context window to complete.</p>
              <p><strong class="text-matrix-green">Fix:</strong> Split into smaller stories (2-3 sentence rule). "Build entire auth system" becomes 4+ stories.</p>
            </div>
          </details>

          <!-- Failure 2 -->
          <details class="troubleshoot-accordion">
            <summary class="p-4 flex items-center gap-3 text-matrix-amber">
              <i data-lucide="chevron-right" class="w-4 h-4 transition-transform"></i>
              <span class="font-bold">Weak Tests / No Verification</span>
            </summary>
            <div class="p-4 text-sm text-matrix-green-muted">
              <p class="mb-2"><strong class="text-matrix-amber">Symptom:</strong> Errors compound across iterations; future runs inherit bad code.</p>
              <p><strong class="text-matrix-green">Fix:</strong> Require typecheck + tests in EVERY acceptance criteria.</p>
            </div>
          </details>

          <!-- Failure 3 -->
          <details class="troubleshoot-accordion">
            <summary class="p-4 flex items-center gap-3 text-matrix-amber">
              <i data-lucide="chevron-right" class="w-4 h-4 transition-transform"></i>
              <span class="font-bold">Progress Overwriting (Not Appending)</span>
            </summary>
            <div class="p-4 text-sm text-matrix-green-muted">
              <p class="mb-2"><strong class="text-matrix-amber">Symptom:</strong> Learnings lost between iterations.</p>
              <p><strong class="text-matrix-green">Fix:</strong> Use the word "APPEND" explicitly in prompt: <code class="text-matrix-green-dim">"APPEND to progress.txt (never update or overwrite)"</code></p>
            </div>
          </details>

          <!-- Failure 4 -->
          <details class="troubleshoot-accordion">
            <summary class="p-4 flex items-center gap-3 text-matrix-amber">
              <i data-lucide="chevron-right" class="w-4 h-4 transition-transform"></i>
              <span class="font-bold">Ralph Stuck Repeating Same Task</span>
            </summary>
            <div class="p-4 text-sm text-matrix-green-muted">
              <p class="mb-2"><strong class="text-matrix-amber">Symptom:</strong> Same task attempted repeatedly, no progress.</p>
              <p class="mb-2"><strong class="text-matrix-green-dim">Diagnosis:</strong> Task failing verification, impossible criteria, or loop detection failure.</p>
              <p><strong class="text-matrix-green">Fix:</strong> Add stuck detection script (check if git commit unchanged for 3+ iterations).</p>
            </div>
          </details>
        </div>
      </section>

      <!-- When NOT to Use Section -->
      <section class="mb-12 content-section" id="when-not-to-use">
        <h2 class="font-terminal text-2xl text-matrix-amber mb-6 flex items-center gap-3">
          <i data-lucide="x-circle" class="w-6 h-6"></i>
          When NOT to Use Ralph
        </h2>

        <div class="grid gap-3 md:grid-cols-2">
          <div class="flex items-start gap-3 p-3 bg-matrix-dark/50 rounded-lg border border-matrix-amber/20">
            <i data-lucide="x" class="w-4 h-4 text-matrix-amber mt-0.5 flex-shrink-0"></i>
            <div>
              <span class="text-matrix-green-dim font-bold">Subjective tasks</span>
              <p class="text-xs text-matrix-green-ghost">"Make this pretty" has no verifiable completion</p>
            </div>
          </div>

          <div class="flex items-start gap-3 p-3 bg-matrix-dark/50 rounded-lg border border-matrix-amber/20">
            <i data-lucide="x" class="w-4 h-4 text-matrix-amber mt-0.5 flex-shrink-0"></i>
            <div>
              <span class="text-matrix-green-dim font-bold">Security-critical code</span>
              <p class="text-xs text-matrix-green-ghost">Needs human review - use HOTL Ralph</p>
            </div>
          </div>

          <div class="flex items-start gap-3 p-3 bg-matrix-dark/50 rounded-lg border border-matrix-amber/20">
            <i data-lucide="x" class="w-4 h-4 text-matrix-amber mt-0.5 flex-shrink-0"></i>
            <div>
              <span class="text-matrix-green-dim font-bold">Exploratory work</span>
              <p class="text-xs text-matrix-green-ghost">No defined end state</p>
            </div>
          </div>

          <div class="flex items-start gap-3 p-3 bg-matrix-dark/50 rounded-lg border border-matrix-amber/20">
            <i data-lucide="x" class="w-4 h-4 text-matrix-amber mt-0.5 flex-shrink-0"></i>
            <div>
              <span class="text-matrix-green-dim font-bold">Legacy code without tests</span>
              <p class="text-xs text-matrix-green-ghost">No verification = no Ralph</p>
            </div>
          </div>

          <div class="flex items-start gap-3 p-3 bg-matrix-dark/50 rounded-lg border border-matrix-amber/20">
            <i data-lucide="x" class="w-4 h-4 text-matrix-amber mt-0.5 flex-shrink-0"></i>
            <div>
              <span class="text-matrix-green-dim font-bold">Design decisions</span>
              <p class="text-xs text-matrix-green-ghost">Ralph implements, humans decide</p>
            </div>
          </div>

          <div class="flex items-start gap-3 p-3 bg-matrix-dark/50 rounded-lg border border-matrix-amber/20">
            <i data-lucide="x" class="w-4 h-4 text-matrix-amber mt-0.5 flex-shrink-0"></i>
            <div>
              <span class="text-matrix-green-dim font-bold">Production deployments</span>
              <p class="text-xs text-matrix-green-ghost">Always review before shipping</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Cost Estimates Section -->
      <section class="mb-12 content-section" id="cost-estimates">
        <h2 class="font-terminal text-2xl text-matrix-cyan mb-6 flex items-center gap-3">
          <i data-lucide="dollar-sign" class="w-6 h-6"></i>
          Cost Estimates
        </h2>

        <div class="overflow-x-auto">
          <table class="w-full text-sm border border-matrix-green-ghost rounded-lg overflow-hidden">
            <thead class="bg-matrix-dark">
              <tr>
                <th class="px-4 py-3 text-left text-matrix-cyan font-bold">Iterations</th>
                <th class="px-4 py-3 text-left text-matrix-cyan font-bold">Tokens (est.)</th>
                <th class="px-4 py-3 text-left text-matrix-cyan font-bold">Cost @ $15/M</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-matrix-green-ghost">
              <tr>
                <td class="px-4 py-3 text-matrix-green-dim">10</td>
                <td class="px-4 py-3 text-matrix-green-muted">30K-150K</td>
                <td class="px-4 py-3 text-matrix-green">$0.45-$2.25</td>
              </tr>
              <tr>
                <td class="px-4 py-3 text-matrix-green-dim">25</td>
                <td class="px-4 py-3 text-matrix-green-muted">75K-375K</td>
                <td class="px-4 py-3 text-matrix-green">$1.13-$5.63</td>
              </tr>
              <tr>
                <td class="px-4 py-3 text-matrix-green-dim">50</td>
                <td class="px-4 py-3 text-matrix-green-muted">150K-750K</td>
                <td class="px-4 py-3 text-matrix-green">$2.25-$11.25</td>
              </tr>
              <tr>
                <td class="px-4 py-3 text-matrix-green-dim">100</td>
                <td class="px-4 py-3 text-matrix-green-muted">300K-1.5M</td>
                <td class="px-4 py-3 text-matrix-green">$4.50-$22.50</td>
              </tr>
            </tbody>
          </table>
        </div>

        <p class="text-sm text-matrix-green-ghost mt-4">
          <strong class="text-matrix-green-dim">Real examples:</strong> 14-iteration feature ~$10-15. Overnight app build (50 iterations) ~$50-100.
        </p>
      </section>

      <!-- Case Studies Section -->
      <section class="mb-12 content-section" id="case-studies">
        <h2 class="font-terminal text-2xl text-matrix-cyan mb-6 flex items-center gap-3">
          <i data-lucide="bar-chart-3" class="w-6 h-6"></i>
          Case Studies
        </h2>

        <div class="grid gap-4 md:grid-cols-2">
          <!-- Case Study 1 -->
          <div class="bg-matrix-dark border border-matrix-cyan/30 rounded-lg p-5">
            <div class="flex items-center gap-2 mb-3">
              <i data-lucide="user" class="w-4 h-4 text-matrix-cyan"></i>
              <span class="font-bold text-matrix-cyan">Ryan Carson's 14-Iteration Feature</span>
            </div>
            <ul class="text-sm text-matrix-green-muted space-y-1">
              <li><strong class="text-matrix-green-dim">Project:</strong> Untangle Legal Agent</li>
              <li><strong class="text-matrix-green-dim">Feature:</strong> Income Upsert Tool</li>
              <li><strong class="text-matrix-green-dim">Iterations:</strong> 14</li>
              <li><strong class="text-matrix-green-dim">Time:</strong> ~2 hours autonomous</li>
              <li><strong class="text-matrix-green-dim">Cost:</strong> ~$10-15</li>
            </ul>
            <p class="text-xs text-matrix-green-ghost mt-3 italic">"Learnings compound. By story 10, Ralph knew our patterns."</p>
          </div>

          <!-- Case Study 2 -->
          <div class="bg-matrix-dark border border-matrix-cyan/30 rounded-lg p-5">
            <div class="flex items-center gap-2 mb-3">
              <i data-lucide="user" class="w-4 h-4 text-matrix-cyan"></i>
              <span class="font-bold text-matrix-cyan">Matt Pocock's Video Editor</span>
            </div>
            <ul class="text-sm text-matrix-green-muted space-y-1">
              <li><strong class="text-matrix-green-dim">Project:</strong> AI Hero Video Editor</li>
              <li><strong class="text-matrix-green-dim">Feature:</strong> Beats display system</li>
              <li><strong class="text-matrix-green-dim">Outcome:</strong> Visual feature completed with Playwright verification</li>
            </ul>
            <p class="text-xs text-matrix-green-ghost mt-3 italic">"Claude used Playwright to verify the UI actually rendered correctly."</p>
          </div>
        </div>
      </section>

      <!-- Pattern Combinations Section -->
      <section class="mb-12 content-section" id="combinations">
        <h2 class="font-terminal text-2xl text-matrix-green glow-text mb-6 flex items-center gap-3">
          <i data-lucide="combine" class="w-6 h-6"></i>
          Pattern Combinations
        </h2>

        <div class="flex flex-wrap gap-3">
          <a href="#" class="inline-flex items-center px-4 py-2 bg-matrix-dark border border-matrix-green-ghost rounded-lg text-sm text-matrix-green-muted hover:border-matrix-green hover:text-matrix-green hover:shadow-glow transition-all">
            <i data-lucide="link" class="w-4 h-4 mr-2"></i>
            Ralph + Playwright
          </a>
          <a href="#" class="inline-flex items-center px-4 py-2 bg-matrix-dark border border-matrix-green-ghost rounded-lg text-sm text-matrix-green-muted hover:border-matrix-green hover:text-matrix-green hover:shadow-glow transition-all">
            <i data-lucide="link" class="w-4 h-4 mr-2"></i>
            Ralph + Git Worktrees
          </a>
          <a href="#" class="inline-flex items-center px-4 py-2 bg-matrix-dark border border-matrix-green-ghost rounded-lg text-sm text-matrix-green-muted hover:border-matrix-green hover:text-matrix-green hover:shadow-glow transition-all">
            <i data-lucide="link" class="w-4 h-4 mr-2"></i>
            Ralph + CC Mirror
          </a>
          <a href="#" class="inline-flex items-center px-4 py-2 bg-matrix-dark border border-matrix-green-ghost rounded-lg text-sm text-matrix-green-muted hover:border-matrix-green hover:text-matrix-green hover:shadow-glow transition-all">
            <i data-lucide="link" class="w-4 h-4 mr-2"></i>
            Ralph + Hooks
          </a>
        </div>
      </section>

      <!-- The Bottom Line -->
      <section class="mb-12 content-section">
        <div class="bg-gradient-to-r from-matrix-green/10 to-matrix-dark border border-matrix-green rounded-xl p-6 glow-border">
          <h3 class="font-terminal text-xl text-matrix-green mb-4">The Bottom Line</h3>
          <p class="text-matrix-green-muted mb-4">
            Ralph Wiggum is not about making the agent smarter. It's about:
          </p>
          <ul class="space-y-2 text-sm text-matrix-green-muted">
            <li class="flex items-center gap-2">
              <i data-lucide="check" class="w-4 h-4 text-matrix-green"></i>
              <span><strong class="text-matrix-green">Working around context limitations</strong> through fresh starts</span>
            </li>
            <li class="flex items-center gap-2">
              <i data-lucide="check" class="w-4 h-4 text-matrix-green"></i>
              <span><strong class="text-matrix-green">Leveraging persistence</strong> through external memory</span>
            </li>
            <li class="flex items-center gap-2">
              <i data-lucide="check" class="w-4 h-4 text-matrix-green"></i>
              <span><strong class="text-matrix-green">Building feedback loops</strong> that catch errors</span>
            </li>
            <li class="flex items-center gap-2">
              <i data-lucide="check" class="w-4 h-4 text-matrix-green"></i>
              <span><strong class="text-matrix-green">Compounding progress</strong> across iterations</span>
            </li>
          </ul>
          <p class="text-matrix-green mt-4 font-bold italic">
            "Given excellent upfront specification, we can already achieve meaningful unattended software production in 2026."
          </p>
        </div>
      </section>

      <!-- Footer Navigation -->
      <footer class="flex items-center justify-between pt-8 border-t border-matrix-green-ghost">
        <a href="#" class="flex items-center gap-2 px-4 py-2 bg-matrix-dark border border-matrix-green-ghost rounded-lg text-sm text-matrix-green-muted hover:border-matrix-green hover:text-matrix-green transition-all">
          <i data-lucide="arrow-left" class="w-4 h-4"></i>
          <span>Previous: Philosophy</span>
        </a>
        <a href="#" class="flex items-center gap-2 px-4 py-2 bg-matrix-dark border border-matrix-green-ghost rounded-lg text-sm text-matrix-green-muted hover:border-matrix-green hover:text-matrix-green transition-all">
          <span>Next: Getting Started</span>
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
        </a>
      </footer>

    </main>

    <!-- Right TOC Sidebar -->
    <aside class="toc-sidebar bg-matrix-dark/50 border-l border-matrix-green-ghost p-4" id="toc-sidebar">
      <h3 class="text-xs font-bold uppercase tracking-wider text-matrix-green mb-4 px-2">On This Page</h3>
      <nav aria-label="Table of contents">
        <ul class="space-y-1 text-sm" id="toc-list">
          <li><a href="#overview" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">Overview</a></li>
          <li><a href="#philosophy" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">Philosophy</a></li>
          <li><a href="#file-structure" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">File Structure</a></li>
          <li><a href="#basic-implementation" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">Implementation</a></li>
          <li><a href="#first-loop" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">First Loop</a></li>
          <li><a href="#success-factors" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">Success Factors</a></li>
          <li><a href="#common-failures" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">Common Failures</a></li>
          <li><a href="#when-not-to-use" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">When NOT to Use</a></li>
          <li><a href="#cost-estimates" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">Cost Estimates</a></li>
          <li><a href="#case-studies" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">Case Studies</a></li>
          <li><a href="#combinations" class="toc-link block px-2 py-1.5 text-matrix-green-muted rounded hover:text-matrix-green">Combinations</a></li>
        </ul>
      </nav>

      <div class="mt-6 pt-4 border-t border-matrix-green-ghost space-y-2">
        <button class="w-full flex items-center gap-2 px-2 py-1.5 text-xs text-matrix-green-ghost hover:text-matrix-green transition-colors" onclick="copyPageUrl()">
          <i data-lucide="link" class="w-3 h-3"></i>
          <span>Copy link</span>
        </button>
        <a href="#" class="flex items-center gap-2 px-2 py-1.5 text-xs text-matrix-green-ghost hover:text-matrix-green transition-colors">
          <i data-lucide="github" class="w-3 h-3"></i>
          <span>Edit on GitHub</span>
        </a>
      </div>
    </aside>

  </div>

  <!-- JavaScript -->
  <script>
    // ========================================
    // INITIALIZATION
    // ========================================
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize Lucide icons
      lucide.createIcons();

      // Register GSAP plugins
      gsap.registerPlugin(ScrollTrigger, ScrollToPlugin, TextPlugin);

      // Check for reduced motion preference
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      if (!prefersReducedMotion) {
        // Run page load animations
        runPageLoadAnimation();

        // Initialize scroll-triggered animations
        initScrollAnimations();

        // Initialize magnetic effects (hover: hover only)
        if (window.matchMedia('(hover: hover)').matches) {
          initMagneticEffects();
        }
      } else {
        // Just show content immediately
        document.querySelectorAll('.animate-on-load').forEach(el => {
          el.style.opacity = '1';
        });
      }

      // Initialize collapsible sections
      initCollapsibles();

      // Initialize TOC scroll tracking
      initTocTracking();

      // Initialize smooth scroll for TOC links
      initSmoothScroll();

      // Typewriter effect for hero (only if no reduced motion)
      if (!prefersReducedMotion) {
        typewriterHero();
      }

      // Keyboard shortcut for search
      document.addEventListener('keydown', (e) => {
        if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
          e.preventDefault();
          showSearchPlaceholder();
        }
      });
    });

    // ========================================
    // PAGE LOAD ANIMATION (<800ms total)
    // ========================================
    function runPageLoadAnimation() {
      // Remove the CSS class that hides content
      document.querySelectorAll('.animate-on-load').forEach(el => {
        el.classList.remove('animate-on-load');
      });

      // Set initial states FIRST
      gsap.set('#nav-sidebar', { opacity: 0, x: -30 });
      gsap.set('#main-content', { opacity: 0, y: 20 });
      gsap.set('#toc-sidebar', { opacity: 0, x: 30 });

      // Then animate to final states
      gsap.timeline()
        .to('#nav-sidebar', {
          opacity: 1,
          x: 0,
          duration: 0.4,
          ease: 'power2.out'
        }, 0)
        .to('#main-content', {
          opacity: 1,
          y: 0,
          duration: 0.4,
          ease: 'power2.out'
        }, 0.1)
        .to('#toc-sidebar', {
          opacity: 1,
          x: 0,
          duration: 0.4,
          ease: 'power2.out'
        }, 0.15);
    }

    // ========================================
    // SCROLL-TRIGGERED ANIMATIONS
    // ========================================
    function initScrollAnimations() {
      gsap.utils.toArray('.content-section').forEach(section => {
        gsap.from(section, {
          scrollTrigger: {
            trigger: section,
            start: 'top 85%',
            toggleActions: 'play none none none'
          },
          y: 30,
          opacity: 0,
          duration: 0.5,
          ease: 'power2.out'
        });
      });
    }

    // ========================================
    // TYPEWRITER EFFECT (Hero Only)
    // ========================================
    function typewriterHero() {
      const heroCode = document.getElementById('hero-code');
      if (!heroCode) return;

      const text = heroCode.textContent;
      heroCode.textContent = '';
      heroCode.classList.add('terminal-cursor');

      gsap.to(heroCode, {
        duration: text.length * 0.03,
        text: { value: text, delimiter: '' },
        ease: 'none',
        onComplete: () => {
          heroCode.classList.remove('terminal-cursor');
        }
      });
    }

    // ========================================
    // MAGNETIC EFFECTS (Reduced intensity)
    // ========================================
    function initMagneticEffects() {
      const magneticItems = document.querySelectorAll('.nav-item');

      magneticItems.forEach(item => {
        item.addEventListener('mousemove', (e) => {
          const rect = item.getBoundingClientRect();
          const x = e.clientX - rect.left - rect.width / 2;
          const y = e.clientY - rect.top - rect.height / 2;

          gsap.to(item, {
            x: x * 0.1,  // Reduced from 0.2
            y: y * 0.1,
            duration: 0.3,
            ease: 'power2.out'
          });
        });

        item.addEventListener('mouseleave', () => {
          gsap.to(item, {
            x: 0,
            y: 0,
            duration: 0.5,
            ease: 'elastic.out(1, 0.5)'
          });
        });
      });
    }

    // ========================================
    // COLLAPSIBLE SECTIONS
    // ========================================
    function initCollapsibles() {
      document.querySelectorAll('.collapsible-trigger').forEach(trigger => {
        trigger.addEventListener('click', () => {
          const expanded = trigger.getAttribute('aria-expanded') === 'true';
          const contentId = trigger.getAttribute('aria-controls');
          const content = document.getElementById(contentId);

          trigger.setAttribute('aria-expanded', !expanded);
          if (content) {
            content.classList.toggle('open');
          }
        });
      });
    }

    // ========================================
    // TOC SCROLL TRACKING
    // ========================================
    function initTocTracking() {
      const sections = document.querySelectorAll('.content-section[id]');
      const tocLinks = document.querySelectorAll('.toc-link');

      sections.forEach(section => {
        ScrollTrigger.create({
          trigger: section,
          start: 'top 30%',
          end: 'bottom 30%',
          onEnter: () => highlightTocItem(section.id),
          onEnterBack: () => highlightTocItem(section.id)
        });
      });
    }

    function highlightTocItem(sectionId) {
      const tocLinks = document.querySelectorAll('.toc-link');
      tocLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + sectionId) {
          link.classList.add('active');
          // Auto-scroll TOC to keep active item visible
          link.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
        }
      });
    }

    // ========================================
    // SMOOTH SCROLL
    // ========================================
    function initSmoothScroll() {
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', (e) => {
          e.preventDefault();
          const targetId = anchor.getAttribute('href');
          const target = document.querySelector(targetId);

          if (target) {
            gsap.to(window, {
              scrollTo: { y: target, offsetY: 80 },
              duration: 0.6,
              ease: 'power2.inOut'
            });
          }
        });
      });
    }

    // ========================================
    // COPY FUNCTIONS
    // ========================================
    function copyHeroCode(btn) {
      const text = 'while :; do cat PROMPT.md | claude ; done';
      copyWithEffect(btn, text);
    }

    function copyCodeBlock(btn, codeId) {
      const codeEl = document.getElementById(codeId);
      if (codeEl) {
        const text = codeEl.textContent;
        copyWithEffect(btn, text);
      }
    }

    function copyWithEffect(btn, text) {
      navigator.clipboard.writeText(text);

      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      if (prefersReducedMotion) {
        btn.classList.add('copied');
        setTimeout(() => btn.classList.remove('copied'), 2000);
        return;
      }

      // GSAP glitch effect
      const copyIcon = btn.querySelector('.copy-icon');
      const checkIcon = btn.querySelector('.check-icon');

      gsap.timeline()
        .to(btn, {
          textShadow: '2px 0 #ff0000, -2px 0 #00ffff',
          duration: 0.05
        })
        .to(btn, {
          textShadow: '0 0 10px rgba(0, 255, 65, 0.4)',
          duration: 0.1
        })
        .to(copyIcon, {
          scale: 0.3,
          rotation: 90,
          opacity: 0,
          duration: 0.15,
          ease: 'power2.in'
        }, 0)
        .fromTo(checkIcon,
          { scale: 0.3, rotation: -180, opacity: 0 },
          {
            scale: 1,
            rotation: 0,
            opacity: 1,
            duration: 0.4,
            ease: 'elastic.out(1, 0.5)'
          },
          0.1
        );

      btn.classList.add('copied');

      // Reset after delay
      setTimeout(() => {
        gsap.to(checkIcon, {
          scale: 0.3,
          rotation: 90,
          opacity: 0,
          duration: 0.15,
          ease: 'power2.in'
        });
        gsap.to(copyIcon, {
          scale: 1,
          rotation: 0,
          opacity: 1,
          duration: 0.3,
          delay: 0.1,
          ease: 'back.out(1.7)'
        });
        btn.classList.remove('copied');
      }, 2000);
    }

    function copyPageUrl() {
      navigator.clipboard.writeText(window.location.href);
      // Could add a toast notification here
    }

    // ========================================
    // MOBILE NAVIGATION
    // ========================================
    function openMobileNav() {
      document.getElementById('mobile-nav-drawer').classList.add('open');
      document.getElementById('mobile-overlay').classList.add('open');
      document.body.style.overflow = 'hidden';

      // Clone nav content
      const navContent = document.getElementById('nav-sidebar').querySelector('nav').cloneNode(true);
      document.getElementById('mobile-nav-content').innerHTML = navContent.innerHTML;
      lucide.createIcons();
    }

    function closeMobileNav() {
      document.getElementById('mobile-nav-drawer').classList.remove('open');
      document.getElementById('mobile-overlay').classList.remove('open');
      document.body.style.overflow = '';
    }

    function toggleMobileToc() {
      // Could implement a bottom sheet or modal for mobile TOC
      alert('Table of Contents: Scroll to see sections, or use the navigation menu.');
    }

    // ========================================
    // SEARCH PLACEHOLDER
    // ========================================
    function showSearchPlaceholder() {
      alert('Search functionality coming soon. This page uses the existing Pagefind search when integrated with the full site.');
    }

    // ========================================
    // TROUBLESHOOTING ACCORDION ANIMATION
    // ========================================
    document.querySelectorAll('.troubleshoot-accordion').forEach(accordion => {
      accordion.addEventListener('toggle', () => {
        const icon = accordion.querySelector('summary i');
        if (icon) {
          if (accordion.open) {
            gsap.to(icon, { rotation: 90, duration: 0.2 });
          } else {
            gsap.to(icon, { rotation: 0, duration: 0.2 });
          }
        }
      });
    });
  </script>

</body>
</html>
