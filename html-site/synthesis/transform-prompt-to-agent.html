<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prompt Engineering to Agent Engineering | Claude Code Documentation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- GSAP for scroll-sync -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Tailwind Config with Design Tokens -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-base': '#ffffff',
            'bg-subtle': '#fafafa',
            'bg-muted': '#f4f4f5',
            'text-primary': '#18181b',
            'text-secondary': '#3f3f46',
            'text-muted': '#71717a',
            'accent': '#0D9373',
            'accent-light': '#10b981',
            'accent-bg': '#ecfdf5',
            'border': '#e4e4e7',
            // Activity Zone content type colors (Original 6)
            'az-invariant': '#3b82f6',    // Blue
            'az-effect': '#f59e0b',       // Amber
            'az-composition': '#8b5cf6',  // Purple
            'az-frontier': '#ef4444',     // Red
            'az-warstory': '#10b981',     // Green
            'az-alternative': '#6b7280',  // Gray
            // Activity Zone generative content types (New 10)
            'az-inversion': '#4f46e5',    // Indigo
            'az-constraint': '#8b5cf6',   // Violet
            'az-gradient': '#f43f5e',     // Rose
            'az-horizon': '#06b6d4',      // Cyan
            'az-violation': '#f97316',    // Orange
            'az-tradeoff': '#f59e0b',     // Amber
            'az-analogy': '#d946ef',      // Fuchsia
            'az-expertise': '#10b981',    // Emerald
            'az-minimal': '#84cc16',      // Lime
            'az-inflection': '#eab308',   // Yellow
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Fira Code', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    /* Base Styles */
    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    [id] {
      scroll-margin-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: #ffffff;
      color: #18181b;
      line-height: 1.7;
    }

    /* Three Panel Layout */
    .three-panel-layout {
      min-height: 100vh;
      position: relative;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: #ffffff;
      border-bottom: 1px solid #e4e4e7;
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 24px;
    }

    /* Left Navigation - 240px fixed */
    .left-nav {
      position: fixed;
      top: 56px;
      left: 0;
      width: 240px;
      height: calc(100vh - 56px);
      border-right: 1px solid #e4e4e7;
      background: #ffffff;
      overflow-y: auto;
      padding: 16px 0;
      z-index: 40;
    }

    .nav-section {
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 500;
      color: #3f3f46;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.15s;
    }

    .nav-section-header:hover {
      background: #f4f4f5;
    }

    .nav-section-header.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-item {
      display: block;
      padding: 6px 12px 6px 44px;
      font-size: 14px;
      color: #71717a;
      text-decoration: none;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-item:hover {
      color: #3f3f46;
      background: #f4f4f5;
    }

    .nav-item.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-children {
      display: none;
      overflow: hidden;
    }

    .nav-children.expanded {
      display: block;
    }

    .nav-chevron {
      transition: transform 0.2s;
    }

    .nav-section.expanded .nav-chevron {
      transform: rotate(90deg);
    }

    /* Main Content - Flexible, margins for fixed sidebars */
    .main-content {
      margin-left: 240px;
      margin-right: 480px;
      margin-top: 56px;
      padding: 48px 48px;
      min-width: 400px;
    }

    /* Activity Zone - 480px fixed (proportional to main, less than main) */
    .activity-zone {
      position: fixed;
      top: 56px;
      right: 0;
      width: 480px;
      height: calc(100vh - 56px);
      border-left: 1px dashed #e4e4e7;
      background: #fafafa;
      overflow-y: auto;
      padding: 24px 20px;
      z-index: 40;
    }

    /* Responsive: Hide Activity Zone below 1400px */
    @media (max-width: 1400px) {
      .activity-zone {
        display: none;
      }
      .main-content {
        margin-right: 0;
        padding: 40px 32px;
      }
    }

    /* Responsive: Hide Left Nav below 768px */
    @media (max-width: 768px) {
      .left-nav {
        display: none;
      }
      .left-nav.open {
        display: block;
        position: fixed;
        top: 56px;
        left: 0;
        right: 0;
        bottom: 0;
        background: #ffffff;
        z-index: 50;
        overflow-y: auto;
      }
      .main-content {
        margin-left: 0;
        padding: 24px 16px;
        min-width: auto;
      }
    }

    /* Resizer - Draggable divider between Main Panel and Activity Zone */
    .resizer {
      position: fixed;
      top: 56px;
      right: 480px;
      width: 6px;
      height: calc(100vh - 56px);
      cursor: col-resize;
      background: transparent;
      z-index: 50;
      transition: background 0.15s ease;
    }

    .resizer:hover {
      background: rgba(13, 147, 115, 0.15);
    }

    .resizer.active {
      background: rgba(13, 147, 115, 0.25);
    }

    /* Prevent text selection during resize */
    body.resizing {
      user-select: none;
      cursor: col-resize !important;
    }

    body.resizing * {
      cursor: col-resize !important;
    }

    /* Hide resizer when Activity Zone is hidden (responsive) */
    @media (max-width: 1400px) {
      .resizer {
        display: none;
      }
    }

    /* Activity Zone Items */
    .activity-item {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      background: #ffffff;
      border: 1px solid #e4e4e7;
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .activity-item.active {
      opacity: 1;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .activity-item:hover {
      opacity: 1;
    }

    .activity-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Activity Zone content type borders (Original 6) */
    .activity-item.invariant { border-left: 4px solid #3b82f6; }
    .activity-item.effect { border-left: 4px solid #f59e0b; }
    .activity-item.composition { border-left: 4px solid #8b5cf6; }
    .activity-item.frontier { border-left: 4px solid #ef4444; }
    .activity-item.warstory { border-left: 4px solid #10b981; }
    .activity-item.alternative { border-left: 4px solid #6b7280; }

    /* Activity Zone generative content types (New 10) */
    .activity-item.inversion { border-left: 4px solid #4f46e5; }
    .activity-item.constraint { border-left: 4px solid #8b5cf6; }
    .activity-item.gradient { border-left: 4px solid #f43f5e; }
    .activity-item.horizon { border-left: 4px solid #06b6d4; }
    .activity-item.violation { border-left: 4px solid #f97316; }
    .activity-item.tradeoff { border-left: 4px solid #f59e0b; }
    .activity-item.analogy { border-left: 4px solid #d946ef; }
    .activity-item.expertise { border-left: 4px solid #10b981; }
    .activity-item.minimal { border-left: 4px solid #84cc16; }
    .activity-item.inflection { border-left: 4px solid #eab308; }

    /* Main Content Components */

    /* Section titles with number */
    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: #0D9373;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      border-radius: 50%;
      margin-right: 12px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: #18181b;
      margin-bottom: 20px;
      margin-top: 56px;
      display: flex;
      align-items: center;
    }

    .section-title:first-child {
      margin-top: 0;
    }

    /* Essence Box (15 words) */
    .essence-box {
      background: linear-gradient(135deg, #18181b 0%, #27272a 100%);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 40px;
    }

    .essence-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #10b981;
      margin-bottom: 12px;
    }

    .essence-text {
      font-size: 22px;
      font-weight: 500;
      color: #ffffff;
      line-height: 1.4;
    }

    /* Core Abstraction Box */
    .core-abstraction {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .core-philosophy {
      font-size: 16px;
      color: #3f3f46;
      margin-bottom: 16px;
      font-style: italic;
    }

    .core-code {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 16px;
      overflow-x: auto;
    }

    .core-code code {
      font-family: 'Fira Code', monospace;
      font-size: 15px;
      color: #10b981;
      white-space: nowrap;
    }

    .core-anchor {
      font-size: 14px;
      color: #71717a;
      text-align: center;
    }

    /* Design Decision Box */
    .decision-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .decision-why {
      font-size: 16px;
      font-weight: 600;
      color: #0D9373;
      margin-bottom: 12px;
    }

    .decision-reasoning {
      font-size: 14px;
      color: #3f3f46;
      margin-bottom: 16px;
    }

    .decision-implication {
      background: #f4f4f5;
      border-radius: 8px;
      padding: 16px;
    }

    .decision-implication-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: #71717a;
      margin-bottom: 8px;
    }

    /* Code Blocks */
    .code-block {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 24px;
      position: relative;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
      color: #e4e4e7;
      line-height: 1.6;
    }

    .code-block .comment { color: #6b7280; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #10b981; }
    .code-block .variable { color: #60a5fa; }

    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #3f3f46;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: background 0.15s;
    }

    .copy-btn:hover {
      background: #52525b;
    }

    /* Path Steps */
    .path-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .path-step {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .path-step:last-child {
      margin-bottom: 0;
    }

    .path-number {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: #0D9373;
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .path-content {
      flex: 1;
      font-size: 14px;
      color: #3f3f46;
    }

    .path-content code {
      background: #e4e4e7;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }

    /* Gotcha Box */
    .gotcha-box {
      background: #fffbeb;
      border: 1px solid #fcd34d;
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .gotcha-title {
      font-weight: 600;
      color: #92400e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .gotcha-detail {
      font-size: 14px;
      color: #78350f;
      margin-bottom: 8px;
    }

    .gotcha-detail strong {
      color: #92400e;
    }

    /* What's Hard Box */
    .hard-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .hard-title {
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hard-detail {
      font-size: 14px;
      color: #7f1d1d;
      margin-bottom: 8px;
    }

    /* When To Use Grid */
    .when-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    @media (max-width: 900px) {
      .when-grid {
        grid-template-columns: 1fr;
      }
    }

    .when-use {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 24px;
    }

    .when-not {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 24px;
    }

    .when-title {
      font-weight: 600;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .when-use .when-title { color: #166534; }
    .when-not .when-title { color: #991b1b; }

    .when-item {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .when-use .when-item { color: #166534; }
    .when-not .when-item { color: #991b1b; }

    /* Comparison Table */
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 32px;
      font-size: 14px;
    }

    .comparison-table th {
      background: #f4f4f5;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      color: #3f3f46;
      border-bottom: 2px solid #e4e4e7;
    }

    .comparison-table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e4e4e7;
      color: #3f3f46;
    }

    .comparison-table tr:hover {
      background: #fafafa;
    }

    /* Transition Arrow */
    .transition-arrow {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 0;
      font-size: 14px;
      color: #71717a;
    }

    .transition-arrow .arrow {
      width: 40px;
      height: 2px;
      background: #0D9373;
      margin: 0 16px;
      position: relative;
    }

    .transition-arrow .arrow::after {
      content: '';
      position: absolute;
      right: 0;
      top: -4px;
      border: 5px solid transparent;
      border-left-color: #0D9373;
    }

    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: none;
      padding: 8px;
      background: none;
      border: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #fafafa;
    }

    ::-webkit-scrollbar-thumb {
      background: #d4d4d8;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1aa;
    }

    /* Keyboard shortcut hint */
    .kbd {
      display: inline-flex;
      align-items: center;
      padding: 2px 6px;
      background: #f4f4f5;
      border: 1px solid #e4e4e7;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      color: #71717a;
    }

    /* Era comparison boxes */
    .era-box {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .era-box.old {
      border-left: 4px solid #71717a;
    }

    .era-box.new {
      border-left: 4px solid #0D9373;
    }

    .era-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 12px;
    }

    .era-box.old .era-label { color: #71717a; }
    .era-box.new .era-label { color: #0D9373; }

    .era-mindset {
      font-size: 18px;
      font-style: italic;
      color: #3f3f46;
      margin-bottom: 16px;
    }

    .era-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .era-list li {
      padding: 8px 0;
      font-size: 14px;
      color: #3f3f46;
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }

    /* Checkpoint Box */
    .checkpoint-box {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-left: 4px solid #10b981;
      border-radius: 8px;
      padding: 20px;
      margin: 32px 0;
    }

    .checkpoint-title {
      font-weight: 600;
      color: #166534;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .checkpoint-content {
      font-size: 14px;
      color: #166534;
    }

    .checkpoint-content code {
      background: rgba(16, 185, 129, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
      <i data-lucide="menu" class="w-5 h-5 text-text-secondary"></i>
    </button>
    <div class="flex items-center gap-3">
      <i data-lucide="terminal" class="w-5 h-5 text-accent"></i>
      <span class="font-semibold text-text-primary">Claude Code</span>
    </div>
    <div class="flex-1 flex justify-center">
      <button class="flex items-center gap-2 px-4 py-2 bg-bg-muted rounded-lg text-text-muted text-sm hover:bg-border transition-colors">
        <i data-lucide="search" class="w-4 h-4"></i>
        <span>Search documentation...</span>
        <span class="kbd">Cmd+K</span>
      </button>
    </div>
    <div class="flex items-center gap-4">
      <a href="#" class="text-sm text-text-muted hover:text-text-primary transition-colors">Support</a>
      <button class="p-2 hover:bg-bg-muted rounded-lg transition-colors" aria-label="Toggle theme">
        <i data-lucide="sun" class="w-4 h-4 text-text-muted"></i>
      </button>
    </div>
  </header>

  <div class="three-panel-layout">
    <!-- Left Navigation -->
    <nav class="left-nav" id="leftNav">
      <div class="px-4 mb-4">
        <span class="text-xs font-semibold text-text-muted uppercase tracking-wider">Transformation</span>
      </div>

      <!-- Essence -->
      <div class="nav-section expanded" data-section="essence">
        <div class="nav-section-header active" onclick="toggleSection(this)">
          <i data-lucide="zap" class="w-4 h-4"></i>
          <span>Essence</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#essence" class="nav-item active">The Paradigm Shift</a>
        </div>
      </div>

      <!-- Core Abstraction -->
      <div class="nav-section expanded" data-section="core">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="box" class="w-4 h-4"></i>
          <span>Core Abstraction</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#core-abstraction" class="nav-item">Old vs New Mental Model</a>
        </div>
      </div>

      <!-- Design Decisions -->
      <div class="nav-section expanded" data-section="decisions">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="lightbulb" class="w-4 h-4"></i>
          <span>Design Decisions</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#why-systems" class="nav-item">Why Systems Over Prompts?</a>
          <a href="#why-decomposition" class="nav-item">Why Decomposition?</a>
          <a href="#why-verification" class="nav-item">Why Verification?</a>
        </div>
      </div>

      <!-- The New Skills -->
      <div class="nav-section" data-section="skills">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="wrench" class="w-4 h-4"></i>
          <span>The New Skills</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#skills" class="nav-item">Skill Translation Table</a>
        </div>
      </div>

      <!-- The Path -->
      <div class="nav-section" data-section="path">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="git-branch" class="w-4 h-4"></i>
          <span>Making the Transition</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#path" class="nav-item">5-Step Transition</a>
        </div>
      </div>

      <!-- Gotchas -->
      <div class="nav-section" data-section="gotchas">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="alert-triangle" class="w-4 h-4"></i>
          <span>Gotchas</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#gotchas" class="nav-item">Common Pitfalls</a>
        </div>
      </div>

      <!-- What's Hard -->
      <div class="nav-section" data-section="hard">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="flame" class="w-4 h-4"></i>
          <span>What's Hard</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#hard" class="nav-item">Real Challenges</a>
        </div>
      </div>

      <!-- When to Transform -->
      <div class="nav-section" data-section="when">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="check-circle" class="w-4 h-4"></i>
          <span>When to Transform</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#when" class="nav-item">Decision Criteria</a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">Stop crafting prompts. Start designing systems. The question is now "What should I build?"</div>
        </div>

        <p class="text-text-secondary mb-6">
          This document captures the fundamental mindset shift from crafting individual prompts to designing autonomous systems. If you're still obsessing over the perfect wording or few-shot examples, this transformation shows you the path to system-level thinking.
        </p>

        <p class="text-text-secondary mb-6">
          This connects to the evolution from Level 1-2 (prompt-focused) to Level 3-5 (architecture-focused) on the complexity ladder.
        </p>
      </section>

      <!-- Section 2: CORE ABSTRACTION + IMPLEMENTATION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Core Abstraction
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"The question is no longer 'What should I say?' The question is now 'What should I build?'"</div>

          <div class="transition-arrow">
            <span>Human-in-the-Loop</span>
            <div class="arrow"></div>
            <span>Human-on-the-Loop</span>
          </div>

          <div class="core-anchor">This is the shift from prompt engineering to agent engineering.</div>
        </div>

        <div class="era-box old">
          <div class="era-label">Before: Prompt Engineering Era (2023-2024)</div>
          <div class="era-mindset">"How do I phrase this to get the best output?"</div>
          <ul class="era-list">
            <li><i data-lucide="minus" class="w-4 h-4 text-text-muted"></i> Focus: Crafting the perfect prompt</li>
            <li><i data-lucide="minus" class="w-4 h-4 text-text-muted"></i> Model: Request followed by Response</li>
            <li><i data-lucide="minus" class="w-4 h-4 text-text-muted"></i> Skill: Prompt writing, few-shot examples</li>
            <li><i data-lucide="minus" class="w-4 h-4 text-text-muted"></i> Time horizon: Single interaction</li>
          </ul>
        </div>

        <div class="era-box new">
          <div class="era-label">After: Agent Engineering Era (2025-2026)</div>
          <div class="era-mindset">"How do I design a system that accomplishes this autonomously?"</div>
          <ul class="era-list">
            <li><i data-lucide="check" class="w-4 h-4 text-accent"></i> Focus: Designing systems of agents</li>
            <li><i data-lucide="check" class="w-4 h-4 text-accent"></i> Model: Orchestration followed by Execution followed by Iteration</li>
            <li><i data-lucide="check" class="w-4 h-4 text-accent"></i> Skill: System architecture, feedback loops</li>
            <li><i data-lucide="check" class="w-4 h-4 text-accent"></i> Time horizon: Hours to days</li>
          </ul>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">Mental Model Comparison</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># OLD: Human-in-the-Loop</span>
Human crafts prompt
    |
    v
AI generates response
    |
    v
Human reviews output
    |
    v
Human refines prompt
    |
    v
[Repeat until satisfied]

<span class="comment"># NEW: Human-on-the-Loop</span>
Human designs system architecture
    |
    v
Human launches orchestrator agent
    |
    v
Orchestrator spawns worker agents
    |
    v
Workers execute, verify, iterate
    |
    v
Human sleeps / does other work
    |
    v
Human reviews completed results</pre>
        </div>
      </section>

      <!-- Section 3: DESIGN DECISIONS -->
      <section id="why-systems" data-activity="decisions">
        <h2 class="section-title">
          <span class="section-number">3</span>
          Design Decisions
        </h2>

        <div class="decision-box">
          <div class="decision-why">WHY SYSTEMS OVER PROMPTS?</div>
          <div class="decision-reasoning">
            The perfect prompt doesn't exist. And even if it did, it wouldn't scale. Every comma mattered in prompt engineering. Tiny changes cascaded unpredictably. That energy is wasted now. System design produces reliable, repeatable results.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              If you're spending more than 10 minutes tweaking prompt wording, stop. That time goes into system design instead. Think about the whole flow: input, intermediate steps, state persistence, communication, verification, output.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-decomposition">
          <div class="decision-why">WHY TASK DECOMPOSITION?</div>
          <div class="decision-reasoning">
            Single agents hit limits. Context windows are finite. Complex tasks exceed what one agent can hold in context. Decomposition lets you distribute work across multiple focused agents, each with fresh context for their specific subtask.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Every task should be decomposable into atomic units. If you can't describe a task in 2-3 sentences, split it. "Build auth system" becomes "Add users table", "Add auth middleware", "Add login form", "Add session handling".
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-verification">
          <div class="decision-why">WHY VERIFICATION LOOPS?</div>
          <div class="decision-reasoning">
            Agents without verification go off the rails. Prompts alone can't guarantee quality. Verification through tests, typecheck, and output validation catches errors before they compound. This is what makes autonomous execution safe.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Every system needs: output validation, error detection, quality checks, self-correction triggers. The question is no longer "How do I avoid hallucinations in this prompt?" but "What verification step catches hallucinations before they matter?"
            </div>
          </div>
        </div>

        <div class="checkpoint-box">
          <div class="checkpoint-title">
            <i data-lucide="check-circle" class="w-4 h-4"></i>
            Checkpoint: After System Design
          </div>
          <div class="checkpoint-content">
            <strong>Verify your mindset shift:</strong><br><br>
            Old: "How do I phrase this?" → New: "How do I decompose this?"<br>
            Old: "What few-shot examples?" → New: "What verification steps?"<br>
            Old: "Which temperature?" → New: "Which orchestration pattern?"<br>
            Old: "How do I avoid hallucination?" → New: "How do I detect and recover from errors?"
          </div>
        </div>
      </section>

      <!-- Section 4: THE NEW SKILLS -->
      <section id="skills" data-activity="skills">
        <h2 class="section-title">
          <span class="section-number">4</span>
          The New Skills
        </h2>

        <p class="text-text-secondary mb-6">
          The skills you developed for prompt engineering don't disappear - they transform. Here's the mapping:
        </p>

        <table class="comparison-table">
          <thead>
            <tr>
              <th>Old Skill</th>
              <th>New Skill</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Prompt crafting</td>
              <td>System architecture</td>
            </tr>
            <tr>
              <td>Few-shot examples</td>
              <td>Task decomposition</td>
            </tr>
            <tr>
              <td>Role prompting</td>
              <td>Worker specialization</td>
            </tr>
            <tr>
              <td>Output parsing</td>
              <td>State management</td>
            </tr>
            <tr>
              <td>Prompt chaining</td>
              <td>Orchestration patterns</td>
            </tr>
            <tr>
              <td>Temperature tuning</td>
              <td>Feedback loop design</td>
            </tr>
            <tr>
              <td>Token optimization</td>
              <td>Checkpoint strategy</td>
            </tr>
            <tr>
              <td>Single-model mastery</td>
              <td>Multi-agent coordination</td>
            </tr>
          </tbody>
        </table>

        <h3 class="font-semibold text-lg mb-4 mt-8">Key Questions Changed</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Old Questions (Prompt Engineering)</span>
- "What prompt gets the best answer?"
- "How do I avoid hallucinations in this prompt?"
- "What temperature should I use?"
- "How many few-shot examples are enough?"
- "Should I use JSON or markdown output?"

<span class="comment"># New Questions (Agent Engineering)</span>
- "What architecture ships code overnight?"
- "How do I design feedback loops that catch errors?"
- "Where should state live between agent sessions?"
- "How do I decompose this into parallelizable tasks?"
- "What verification steps ensure quality?"
- "How does the orchestrator coordinate workers?"
- "What happens when a worker fails mid-task?"</pre>
        </div>
      </section>

      <!-- Section 5: THE PATH OF TRANSITION -->
      <section id="path" data-activity="path">
        <h2 class="section-title">
          <span class="section-number">5</span>
          Making the Transition
        </h2>

        <p class="text-text-secondary mb-6">
          Follow this path to transform from prompt engineering to agent engineering:
        </p>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content">
              <strong>Stop Optimizing Prompts</strong><br>
              The perfect prompt doesn't exist. If you're on iteration 3+ of prompt tweaks, STOP and design a system instead.
            </div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content">
              <strong>Start Designing Systems</strong><br>
              Think about the whole flow: What's the input? What are intermediate steps? Where does state persist? How do agents communicate? What's the verification strategy? What's the output?
            </div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content">
              <strong>Think in Orchestration</strong><br>
              Single agents hit limits. Learn orchestration patterns: Ralph Architecture, CC Mirror Pattern, Domain Isolation, Swarm Patterns.
            </div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content">
              <strong>Embrace Autonomy</strong><br>
              Design systems that: run without supervision, self-correct errors, checkpoint progress, resume from failures, report results when done.
            </div>
          </div>
          <div class="path-step">
            <div class="path-number">5</div>
            <div class="path-content">
              <strong>Build Feedback Loops</strong><br>
              Every system needs: output validation, error detection, quality checks, self-correction triggers, human review gates (used sparingly).
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">The Capability Ladder</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre>Level 1: Single prompt
         "Write a function that..."

Level 2: Prompt chain
         "First analyze, then design, then implement"

Level 3: Single agent with tools
         Agent reads code, edits, runs tests

Level 4: Multi-agent orchestration
         Orchestrator coordinates specialist workers

Level 5: Autonomous systems
         Self-managing agent swarms with learning</pre>
        </div>

        <p class="text-text-secondary mt-4">
          Most practitioners jumped from Level 1 to Level 3 without mastering Level 2. That's fine. Level 2 was a bridge. But going from Level 3 to Level 4 requires genuinely new thinking.
        </p>

        <div class="checkpoint-box">
          <div class="checkpoint-title">
            <i data-lucide="check-circle" class="w-4 h-4"></i>
            Checkpoint: Identify Your Current Level
          </div>
          <div class="checkpoint-content">
            <strong>Self-assessment:</strong><br><br>
            Level 1: You copy-paste prompts, tweak wording<br>
            Level 2: You manually sequence multiple prompts<br>
            Level 3: You use Claude Code with file/bash access<br>
            Level 4: You spawn workers, manage task dependencies<br>
            Level 5: Agents run overnight, self-correct, compound<br><br>
            <strong>Your next step based on level:</strong><br>
            Level 1-2: Start using Claude Code CLI<br>
            Level 3: Try Ralph pattern (overnight loop)<br>
            Level 4: Implement CC Mirror or Gas Town<br>
            Level 5: You're building your own orchestrator
          </div>
        </div>
      </section>

      <!-- Section 6: GOTCHAS -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Gotchas
        </h2>

        <p class="text-text-secondary mb-6">
          Common pitfalls when transitioning from prompt engineering to agent engineering:
        </p>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Falling Back to Prompt Tweaking
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> You spend 30+ minutes rewording a prompt trying to get better output</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Old habits die hard. Prompt engineering instincts are strong.</div>
          <div class="gotcha-detail"><strong>Fix:</strong> STOP and ask: "Am I tweaking words or designing systems?" "Would a verification step catch this error?" "Could I decompose this into smaller tasks?"</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Over-Engineering Agent Systems
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> You designed an 8-agent orchestration system for a 30-minute task</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Agent thinking doesn't mean agent everything</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Task &lt;30 min? Single agent. Task &lt;2 hours? Ralph. Multi-domain, multi-day? Swarm patterns. Match complexity to workload.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Skipping Feedback Loops
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Autonomous system produces garbage because there's no verification</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Autonomy without verification = chaos</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Minimum viable feedback loop: <code>npm run typecheck</code> (catches 80%), <code>npm run test</code> (catches logic errors), output validation (catches hallucinations)</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Can't Decompose Tasks
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Task seems monolithic. "It's all connected, I can't break it apart."</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Thinking at wrong level of abstraction, or task needs planning first</div>
          <div class="gotcha-detail"><strong>Fix:</strong> List all OUTPUTS the task produces. Each output is a candidate task. Identify dependencies. Group by domain. Each group is a worker's scope.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Orchestrator Starts Doing Work
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Your orchestrator agent is reading files, writing code, running commands</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Prompt didn't enforce boundaries, or task seemed "small enough" to do directly</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Add IRON LAW to orchestrator prompt: "You do NOT write code, run commands, read files, edit files, run tests. You ONLY spawn workers, coordinate dependencies, synthesize results."</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Pattern Selection Paralysis
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> You understand concepts but freeze when choosing between Ralph, CC Mirror, Gas Town</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Too many options, unclear criteria</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Quick selector: No clear "done" criteria? Single session exploration first. Can finish in one context window? Single session. Multi-domain? CC Mirror. Need parallelism? Git Worktrees.</div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          These are fundamental tensions in the transition, not bugs to fix:
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Clear Instructions Still Matter
          </div>
          <div class="hard-detail"><strong>The tension:</strong> You stopped obsessing over prompt wording, but agents still need clear instructions. The difference: now it's at system level, not sentence level.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Workers misunderstand tasks. Orchestrator doesn't coordinate properly.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Write CLAUDE.md files. Define acceptance criteria. Specify verification commands. Instructions live in files, not ephemeral prompts.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Humans Still Define Goals
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Agent engineering reduces human involvement but doesn't eliminate it. You still define what "done" means. You still set quality standards.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Agents complete tasks that don't match your intent. "It did what I said, not what I meant."</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Invest more time in PRD/specification. Write better acceptance criteria. Review completed work before next iteration.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Task Decomposition Is a Skill
          </div>
          <div class="hard-detail"><strong>The tension:</strong> There's no formula for how small tasks should be. Too big = context overflow. Too small = overhead dominates. Wrong order = broken dependencies.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Tasks fail mid-execution. Progress is slower than single agent. You're debugging decomposition, not code.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Start conservative (smaller tasks). Learn your codebase's grain. Review iteration logs to see what worked. Accept that you'll improve over time.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Context Still Needs Management
          </div>
          <div class="hard-detail"><strong>The tension:</strong> You escaped prompt-level context management, but now you have system-level context management. Where does state live? How do agents share knowledge?</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Agents repeat solved problems. Knowledge doesn't transfer between workers. Context grows unbounded.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Use external state (files, git, databases). Keep progress.txt under 20KB. Archive permanent learnings to CLAUDE.md.</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO TRANSFORM -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Transform / When Not
        </h2>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              MAKE THE SHIFT WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Tasks exceed what you can complete in 30 minutes of focused prompting</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>You find yourself babysitting AI output constantly</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Work stops when you walk away from the keyboard</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>You want "ship while you sleep" capability</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Tasks have verifiable acceptance criteria (tests, typecheck)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>You're iterating on the same prompt more than 3 times</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              STAY WITH PROMPTS WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Quick one-off questions or explanations</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Exploratory work with no defined end state</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Tasks requiring real-time human judgment</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Creative brainstorming where "wrong" doesn't exist</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Setup overhead exceeds task duration</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>No verification possible (subjective quality)</span>
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4">What Stays the Same</h3>

        <p class="text-text-secondary mb-6">
          Not everything changed:
        </p>

        <ul class="list-disc pl-6 text-text-secondary space-y-2 mb-8">
          <li><strong>Clear instructions still matter</strong> - they just live at system level now</li>
          <li><strong>Context still needs management</strong> - external state instead of context window</li>
          <li><strong>Quality still needs verification</strong> - automated verification instead of human review</li>
          <li><strong>Humans still define goals</strong> - we're orchestrators, not obsolete</li>
        </ul>

        <div class="core-abstraction">
          <div class="text-center text-lg font-semibold text-text-primary mb-4">The Bottom Line</div>
          <div class="text-center text-text-secondary">
            <strong>Prompt Engineering:</strong> Human art of talking to AI<br><br>
            <strong>Agent Engineering:</strong> Human art of designing AI systems<br><br>
            The question is no longer "What should I say?"<br>
            The question is now <span class="text-accent font-semibold">"What should I build?"</span>
          </div>
        </div>
      </section>

    </main>

    <!-- Resizer between Main Panel and Activity Zone -->
    <div class="resizer" data-resizer="activity-zone" aria-label="Resize activity panel"></div>

    <!-- Activity Zone -->
    <aside class="activity-zone" id="activityZone">
      <div class="text-xs font-semibold text-text-muted uppercase tracking-wider mb-4">Operational Intelligence</div>

      <!-- ESSENCE SECTION (5 items) -->
      <div class="activity-item inversion" data-section="essence">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if the perfect prompt DID exist?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd design:</strong> A library of perfect prompts for every situation.<br>
          <strong>Why this fails:</strong> Context varies. Tasks compound. One prompt can't handle multi-step verification, state persistence, or error recovery.<br>
          <strong>Hidden constraint revealed:</strong> Prompts are atomic. Systems are molecular.
        </div>
      </div>

      <div class="activity-item minimal" data-section="essence">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">The irreducible transformation</div>
        <div class="text-text-secondary text-sm">
          <strong>From:</strong> "What should I say?"<br>
          <strong>To:</strong> "What should I build?"<br><br>
          <strong>Essential:</strong> This question change.<br>
          <strong>Everything else:</strong> Implementation details.
        </div>
      </div>

      <div class="activity-item warstory" data-section="essence">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Boris Cherny: "Vanilla workflow"</div>
        <div class="text-text-secondary text-sm">
          Claude Code creator's insight: "I don't use fancy prompts. I use systems." His workflow is CLAUDE.md + Task tool + verification loops. The system compensates for prompt imperfection.
        </div>
      </div>

      <div class="activity-item analogy" data-section="essence">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Prompt to Agent = Assembly to C</div>
        <div class="text-text-secondary text-sm">
          Prompt engineering → Assembly (precise, low-level, manual)<br>
          Agent engineering → C (abstracted, systematic, composable)<br>
          You don't write better assembly. You switch languages.
        </div>
      </div>

      <div class="activity-item invariant" data-section="essence">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">INV-6: Human as Orchestrator</div>
        <div class="text-text-secondary text-sm">
          The transformation embodies this invariant: Humans define WHAT, agents execute HOW. This applies whether you're at Level 1 or Level 5. The scale changes, the principle doesn't.
        </div>
      </div>

      <!-- CORE SECTION (4 items) -->
      <div class="activity-item gradient" data-section="core">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How prompt-thinking fails at scale</div>
        <div class="text-text-secondary text-sm">
          <strong>1-3 prompts:</strong> Fine, prompt tweaking works<br>
          <strong>4-10 prompts:</strong> Chains get fragile, state lost between<br>
          <strong>10-50:</strong> Impossible to maintain, context everywhere<br>
          <strong>50+:</strong> You've built a system anyway, just badly<br><br>
          <em>The transition is mandatory at scale. Choose when to make it.</em>
        </div>
      </div>

      <div class="activity-item constraint" data-section="core">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">Why the mental model MUST change</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> Context finite + Tasks complex<br>
          → Can't fit everything in one prompt<br>
          → Must decompose into steps<br>
          → Steps need coordination<br>
          → Coordination needs state<br>
          → State needs persistence<br>
          → You've built a system
        </div>
      </div>

      <div class="activity-item effect" data-section="core">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="bar-chart-2" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">At day 3, human-on-the-loop outperforms</div>
        <div class="text-text-secondary text-sm">
          <strong>Day 1:</strong> Human-in-the-loop is faster (no setup cost)<br>
          <strong>Day 2:</strong> Roughly equal (system paying off, prompts degrading)<br>
          <strong>Day 3+:</strong> Human-on-the-loop wins (compounding, overnight execution)<br><br>
          <em>The crossover is at ~8 hours of total work.</em>
        </div>
      </div>

      <div class="activity-item horizon" data-section="core">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">How judgment evolves</div>
        <div class="text-text-secondary text-sm">
          <strong>Hour 1:</strong> "System setup feels like overhead"<br>
          <strong>Hour 4:</strong> "Wait, I can walk away now"<br>
          <strong>Hour 8:</strong> "Work happened while I slept"<br>
          <strong>Day 3:</strong> "Why did I ever babysit prompts?"<br><br>
          <em>Don't judge agent engineering by hour 1.</em>
        </div>
      </div>

      <!-- DECISIONS SECTION (5 items) -->
      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip verification design</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> Skip "What verification steps ensure quality?"<br>
          <strong>THEN:</strong> Agents produce unchecked output<br>
          <strong>THEN:</strong> Errors compound across iterations<br>
          <strong>THEN:</strong> Final output is garbage on good foundation<br>
          <strong>FINALLY:</strong> You lose trust in autonomous systems<br><br>
          <em>Verification isn't overhead. It's what makes autonomy possible.</em>
        </div>
      </div>

      <div class="activity-item tradeoff" data-section="decisions">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">System Complexity vs. Task Complexity</div>
        <div class="text-text-secondary text-sm">
          <strong>Simple task + complex system:</strong> Overhead dominates<br>
          <strong>Complex task + simple system:</strong> Task fails, no reliability<br>
          <strong>Match complexity to match:</strong> Judgment required<br><br>
          <em>Heuristic: If system setup takes longer than task would, stay simple.</em>
        </div>
      </div>

      <div class="activity-item inversion" data-section="decisions">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if decomposition wasn't needed?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd have:</strong> Infinite context windows, perfect attention at all scales.<br>
          <strong>Why this fails:</strong> Transformer attention is O(n^2). Context limits are physics.<br>
          <strong>Hidden constraint revealed:</strong> Decomposition IS the workaround for finite context.
        </div>
      </div>

      <div class="activity-item expertise" data-section="decisions">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">Design Decision Understanding</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "Why not just use better prompts?"<br>
          → Because prompts don't persist state<br>
          <strong>Intermediate:</strong> "How do I know when to decompose?"<br>
          → When task exceeds one context window<br>
          <strong>Advanced:</strong> "What's the minimum viable system?"<br>
          → Loop + external state + verification<br>
          <strong>Staff:</strong> "When does system overhead exceed benefit?"<br>
          → When setup time > 2x task time
        </div>
      </div>

      <div class="activity-item composition" data-section="decisions">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">Verification + Autonomy</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> Automated verification enables unattended execution.<br>
          <strong>Danger:</strong> Verification must be comprehensive. One missed edge case can cascade.<br>
          <strong>Key:</strong> typecheck + tests + output validation = minimum bar.
        </div>
      </div>

      <!-- SKILLS SECTION (4 items) -->
      <div class="activity-item analogy" data-section="skills">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Skill translation = language translation</div>
        <div class="text-text-secondary text-sm">
          <strong>Prompt crafting</strong> → System architecture (same goal: clear communication)<br>
          <strong>Few-shot examples</strong> → Task decomposition (same goal: guide behavior)<br>
          <strong>Role prompting</strong> → Worker specialization (same goal: context setting)<br><br>
          <em>Your skills transfer. The syntax changes, the semantics don't.</em>
        </div>
      </div>

      <div class="activity-item expertise" data-section="skills">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">New Questions Mastery</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "What architecture ships code?"<br>
          → Ralph loop for overnight execution<br>
          <strong>Intermediate:</strong> "Where should state live?"<br>
          → Files (prd.json, progress.txt, git)<br>
          <strong>Advanced:</strong> "How decompose into parallel tasks?"<br>
          → By domain, by output, by dependency<br>
          <strong>Staff:</strong> "What happens when worker fails?"<br>
          → Retry logic, escalation path, state recovery
        </div>
      </div>

      <div class="activity-item inflection" data-section="skills">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When old skills become liabilities</div>
        <div class="text-text-secondary text-sm">
          <strong>0-3 prompt tweaks:</strong> Good instinct (refinement)<br>
          <strong>4-6 prompt tweaks:</strong> Diminishing returns<br>
          <strong>7+ prompt tweaks:</strong> Net negative (wrong approach)<br><br>
          <strong>THE INFLECTION:</strong> ~3 iterations<br>
          <em>Detection: Third prompt tweak = time to think systems.</em>
        </div>
      </div>

      <div class="activity-item warstory" data-section="skills">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Matt Pocock: From prompts to Ralph</div>
        <div class="text-text-secondary text-sm">
          Started as prompt expert. Now runs Ralph loops for features. "I spent 6 months on prompt engineering. Then realized the skill is architecture." His TypeScript content now gets built by agent systems he designs.
        </div>
      </div>

      <!-- PATH SECTION (4 items) -->
      <div class="activity-item violation" data-section="path">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip the ladder levels</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> Jump from Level 1 to Level 4 (skip 2, 3)<br>
          <strong>THEN:</strong> No intuition for task sizing<br>
          <strong>THEN:</strong> Workers fail unpredictably<br>
          <strong>THEN:</strong> Debugging is guesswork<br>
          <strong>FINALLY:</strong> Conclude "agent systems don't work"<br><br>
          <em>The ladder exists because each level builds intuition for the next.</em>
        </div>
      </div>

      <div class="activity-item horizon" data-section="path">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">Level perception over time</div>
        <div class="text-text-secondary text-sm">
          <strong>Week 1:</strong> "Level 3 is amazing, why go further?"<br>
          <strong>Week 2:</strong> "I keep hitting context limits..."<br>
          <strong>Week 4:</strong> "Level 4 unlocks overnight work"<br>
          <strong>Month 2:</strong> "Level 5 is just Level 4 with better hygiene"<br><br>
          <em>Each level feels complete until you hit its limits.</em>
        </div>
      </div>

      <div class="activity-item constraint" data-section="path">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">Why the 5-step order matters</div>
        <div class="text-text-secondary text-sm">
          <strong>1. Stop optimizing prompts</strong> → Frees mental bandwidth<br>
          <strong>2. Start designing systems</strong> → Uses that bandwidth<br>
          <strong>3. Think in orchestration</strong> → Scales the designs<br>
          <strong>4. Embrace autonomy</strong> → Unlocks human time<br>
          <strong>5. Build feedback loops</strong> → Makes autonomy safe<br><br>
          <em>Each step enables the next. Order isn't arbitrary.</em>
        </div>
      </div>

      <div class="activity-item alternative" data-section="path">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">Different entry points by background</div>
        <div class="text-text-secondary text-sm">
          <strong>From DevOps:</strong> Start at orchestration (familiar territory)<br>
          <strong>From Data Science:</strong> Start at decomposition (pipeline thinking)<br>
          <strong>From Frontend:</strong> Start at feedback loops (test-driven)<br>
          <strong>From Backend:</strong> Start at state management (database thinking)
        </div>
      </div>

      <!-- GOTCHAS SECTION (4 items) -->
      <div class="activity-item inversion" data-section="gotchas">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">Why prompt-tweaking habit is so strong</div>
        <div class="text-text-secondary text-sm">
          <strong>The habit:</strong> Prompt tweaking feels productive. Each change is a micro-experiment.<br>
          <strong>The trap:</strong> Local optimization. You're improving the wrong thing.<br>
          <strong>Hidden constraint revealed:</strong> Human brains prefer immediate feedback to delayed payoff.
        </div>
      </div>

      <div class="activity-item effect" data-section="gotchas">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="bar-chart-2" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Orchestrator drift compounds</div>
        <div class="text-text-secondary text-sm">
          If orchestrator starts doing worker tasks, it becomes a bottleneck. At 3 workers, 10% drift costs 30% capacity. At 10 workers, same drift costs 100%. Iron Law exists because violations don't scale linearly.
        </div>
      </div>

      <div class="activity-item tradeoff" data-section="gotchas">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Pattern Selection Complexity</div>
        <div class="text-text-secondary text-sm">
          <strong>Option A:</strong> Learn one pattern deeply, apply everywhere (brittle)<br>
          <strong>Option B:</strong> Learn all patterns, decide case-by-case (decision fatigue)<br>
          <strong>Option C:</strong> Learn decision tree, navigate to pattern (recommended)<br><br>
          <em>Heuristic: The quick selector in Section 6 is your decision tree.</em>
        </div>
      </div>

      <div class="activity-item frontier" data-section="gotchas">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Automatic task sizing</div>
        <div class="text-text-secondary text-sm">
          No tool exists that automatically decomposes "Build auth system" into properly-sized agent tasks. Optimal varies by codebase, team, and model version. Currently requires human judgment.
        </div>
      </div>

      <!-- HARD SECTION (4 items) -->
      <div class="activity-item tradeoff" data-section="hard">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Human Involvement Level</div>
        <div class="text-text-secondary text-sm">
          <strong>High involvement:</strong> Quality assured, but no leverage<br>
          <strong>Medium involvement:</strong> Review gates, balanced<br>
          <strong>Low involvement:</strong> Maximum leverage, quality varies<br><br>
          <em>There is no "right" level. Match to task risk and reversibility.</em>
        </div>
      </div>

      <div class="activity-item gradient" data-section="hard">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How decomposition skill degrades</div>
        <div class="text-text-secondary text-sm">
          <strong>Clear domain:</strong> 90% success (you know the grain)<br>
          <strong>Adjacent domain:</strong> 70% (some transfer)<br>
          <strong>New domain:</strong> 50% (learning curve)<br>
          <strong>Unknown domain:</strong> 30% (exploration needed first)<br><br>
          <em>Your decomposition skill is domain-specific. Expect re-learning.</em>
        </div>
      </div>

      <div class="activity-item expertise" data-section="hard">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">Context Management Understanding</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "Where does state go?"<br>
          → Files (prd.json, progress.txt)<br>
          <strong>Intermediate:</strong> "How do agents share knowledge?"<br>
          → Common file reading at iteration start<br>
          <strong>Advanced:</strong> "When does context become a liability?"<br>
          → progress.txt > 20KB, unbounded growth<br>
          <strong>Staff:</strong> "System-level context architecture?"<br>
          → Tiered: session (volatile) → project (stable) → org (permanent)
        </div>
      </div>

      <div class="activity-item warstory" data-section="hard">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Steve Yegge: Gas Town evolution</div>
        <div class="text-text-secondary text-sm">
          "We redesigned Gas Town three times. First version: prompts everywhere. Second: basic orchestration. Third: true agent factory." Each redesign came from hitting the limits of the previous architecture.
        </div>
      </div>

      <!-- WHEN SECTION (4 items) -->
      <div class="activity-item inversion" data-section="when">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if you NEVER made the shift?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd:</strong> Max out at Level 3 capability forever. Babysit every AI interaction. Never achieve overnight execution.<br>
          <strong>Why this fails:</strong> Others who shift will outpace you 10x.<br>
          <strong>Hidden constraint revealed:</strong> The shift is mandatory for scale. Only timing is optional.
        </div>
      </div>

      <div class="activity-item inflection" data-section="when">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When prompting flips to overhead</div>
        <div class="text-text-secondary text-sm">
          <strong>1-2 prompts:</strong> Prompting is faster (no setup)<br>
          <strong>3-5 prompts:</strong> Break-even zone<br>
          <strong>6-10 prompts:</strong> System wins clearly<br>
          <strong>10+:</strong> Prompting is unsustainable<br><br>
          <strong>THE INFLECTION:</strong> ~5 prompts for same task<br>
          <em>Detection: Third time you prompt the same type of task = build a system.</em>
        </div>
      </div>

      <div class="activity-item analogy" data-section="when">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Task verification = unit testing</div>
        <div class="text-text-secondary text-sm">
          <strong>No tests:</strong> Quick to write, scary to run<br>
          <strong>Some tests:</strong> Slower to write, safer to run<br>
          <strong>Full coverage:</strong> Slowest to write, safest to run<br><br>
          <em>If you believe in tests for code, you should believe in verification for agents.</em>
        </div>
      </div>

      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">If transformation isn't right yet</div>
        <div class="text-text-secondary text-sm">
          <strong>Quick questions?</strong> → Stay with prompts<br>
          <strong>Exploratory work?</strong> → Single Claude session<br>
          <strong>Creative brainstorm?</strong> → Conversational mode<br>
          <strong>One-off task?</strong> → YOLO mode, don't over-engineer
        </div>
      </div>

    </aside>
  </div>

  <script>
    /**
     * PanelResizer - Handles draggable panel dividers
     */
    class PanelResizer {
      constructor(resizerEl, config = {}) {
        this.resizer = resizerEl;
        this.config = {
          storageKey: 'panel-activity-zone-width',
          minWidth: 280,
          maxWidth: 900,
          defaultWidth: 480,
          ...config
        };

        this.isResizing = false;
        this.startX = 0;
        this.startWidth = 0;

        this.activityZone = document.querySelector('.activity-zone');
        this.mainContent = document.querySelector('.main-content');

        this.onMouseDown = this.onMouseDown.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
        this.onMouseUp = this.onMouseUp.bind(this);

        this.init();
      }

      init() {
        this.restoreWidth();
        this.resizer.addEventListener('mousedown', this.onMouseDown);
      }

      onMouseDown(e) {
        if (e.button !== 0) return;

        this.isResizing = true;
        this.startX = e.clientX;
        this.startWidth = this.activityZone.offsetWidth;

        this.resizer.classList.add('active');
        document.body.classList.add('resizing');

        document.addEventListener('mousemove', this.onMouseMove);
        document.addEventListener('mouseup', this.onMouseUp);

        e.preventDefault();
      }

      onMouseMove(e) {
        if (!this.isResizing) return;

        const delta = this.startX - e.clientX;
        const newWidth = this.startWidth + delta;

        const constrainedWidth = Math.max(
          this.config.minWidth,
          Math.min(this.config.maxWidth, newWidth)
        );

        this.activityZone.style.width = constrainedWidth + 'px';
        this.mainContent.style.marginRight = constrainedWidth + 'px';
        this.resizer.style.right = constrainedWidth + 'px';
      }

      onMouseUp(e) {
        if (!this.isResizing) return;

        this.isResizing = false;

        this.resizer.classList.remove('active');
        document.body.classList.remove('resizing');

        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);

        this.saveWidth();
      }

      saveWidth() {
        const width = this.activityZone.offsetWidth;
        localStorage.setItem(this.config.storageKey, JSON.stringify({
          width,
          timestamp: Date.now()
        }));
      }

      restoreWidth() {
        try {
          const stored = localStorage.getItem(this.config.storageKey);
          if (stored) {
            const { width } = JSON.parse(stored);
            if (width >= this.config.minWidth && width <= this.config.maxWidth) {
              this.activityZone.style.width = width + 'px';
              this.mainContent.style.marginRight = width + 'px';
              this.resizer.style.right = width + 'px';
            }
          }
        } catch (e) {
          console.warn('Failed to restore panel width:', e);
        }
      }

      destroy() {
        this.resizer.removeEventListener('mousedown', this.onMouseDown);
        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);
      }
    }

    // Auto-initialize resizers on DOM ready
    document.addEventListener('DOMContentLoaded', () => {
      const resizers = document.querySelectorAll('[data-resizer]');
      resizers.forEach(resizer => new PanelResizer(resizer));
    });

    // Initialize Lucide icons
    lucide.createIcons();

    // Navigation toggle
    function toggleSection(header) {
      const section = header.closest('.nav-section');
      section.classList.toggle('expanded');
      const children = section.querySelector('.nav-children');
      children.classList.toggle('expanded');
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const nav = document.getElementById('leftNav');
      nav.classList.toggle('open');
    }

    // Copy functionality
    function copyCode(btn, text) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check" class="w-3 h-3"></i> Copied!';
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = originalText;
          lucide.createIcons();
        }, 2000);
      });
    }

    function copyCodeBlock(btn) {
      const codeBlock = btn.closest('.code-block');
      const pre = codeBlock.querySelector('pre');
      const text = pre.textContent;
      copyCode(btn, text);
    }

    // Scroll-sync with GSAP ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    const sections = document.querySelectorAll('[data-activity]');
    const activityItems = document.querySelectorAll('.activity-item');

    sections.forEach(section => {
      ScrollTrigger.create({
        trigger: section,
        start: 'top 40%',
        end: 'bottom 40%',
        onEnter: () => activateSection(section.dataset.activity),
        onEnterBack: () => activateSection(section.dataset.activity),
      });
    });

    function activateSection(sectionName) {
      activityItems.forEach(item => {
        if (item.dataset.section === sectionName) {
          item.classList.add('active');
          gsap.to(item, {
            opacity: 1,
            y: -2,
            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
            duration: 0.3,
            ease: 'power2.out'
          });
        } else {
          item.classList.remove('active');
          gsap.to(item, {
            opacity: 0.5,
            y: 0,
            boxShadow: 'none',
            duration: 0.3,
            ease: 'power2.out'
          });
        }
      });

      document.querySelectorAll('.nav-section-header').forEach(header => {
        header.classList.remove('active');
      });
      const activeNav = document.querySelector(`[data-section="${sectionName}"] .nav-section-header`);
      if (activeNav) {
        activeNav.classList.add('active');
      }
    }

    // Initialize first section as active
    activateSection('essence');

    // Smooth scroll for nav links
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.nav-item').forEach(l => l.classList.remove('active'));
          link.classList.add('active');
        }
      });
    });

    // Brushing interaction - hover activity item highlights related content
    activityItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = 'rgba(13, 147, 115, 0.05)';
          relatedSection.style.transition = 'background-color 0.3s ease';
        }
      });

      item.addEventListener('mouseleave', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = '';
        }
      });
    });
  </script>
</body>
</html>
