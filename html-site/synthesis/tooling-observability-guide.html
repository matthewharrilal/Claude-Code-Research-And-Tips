<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Observability Guide | Claude Code Documentation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- GSAP for scroll-sync -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Tailwind Config with Design Tokens -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-base': '#ffffff',
            'bg-subtle': '#fafafa',
            'bg-muted': '#f4f4f5',
            'text-primary': '#18181b',
            'text-secondary': '#3f3f46',
            'text-muted': '#71717a',
            'accent': '#0D9373',
            'accent-light': '#10b981',
            'accent-bg': '#ecfdf5',
            'border': '#e4e4e7',
            // Activity Zone content type colors (Original 6)
            'az-invariant': '#3b82f6',    // Blue
            'az-effect': '#f59e0b',       // Amber
            'az-composition': '#8b5cf6',  // Purple
            'az-frontier': '#ef4444',     // Red
            'az-warstory': '#10b981',     // Green
            'az-alternative': '#6b7280',  // Gray
            // Activity Zone generative content types (New 10)
            'az-inversion': '#4f46e5',    // Indigo
            'az-constraint': '#8b5cf6',   // Violet
            'az-gradient': '#f43f5e',     // Rose
            'az-horizon': '#06b6d4',      // Cyan
            'az-violation': '#f97316',    // Orange
            'az-tradeoff': '#f59e0b',     // Amber
            'az-analogy': '#d946ef',      // Fuchsia
            'az-expertise': '#10b981',    // Emerald
            'az-minimal': '#84cc16',      // Lime
            'az-inflection': '#eab308',   // Yellow
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Fira Code', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    /* Base Styles */
    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    [id] {
      scroll-margin-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: #ffffff;
      color: #18181b;
      line-height: 1.7;
    }

    /* Three Panel Layout */
    .three-panel-layout {
      min-height: 100vh;
      position: relative;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: #ffffff;
      border-bottom: 1px solid #e4e4e7;
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 24px;
    }

    /* Left Navigation - 240px fixed */
    .left-nav {
      position: fixed;
      top: 56px;
      left: 0;
      width: 240px;
      height: calc(100vh - 56px);
      border-right: 1px solid #e4e4e7;
      background: #ffffff;
      overflow-y: auto;
      padding: 16px 0;
      z-index: 40;
    }

    .nav-section {
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 500;
      color: #3f3f46;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.15s;
    }

    .nav-section-header:hover {
      background: #f4f4f5;
    }

    .nav-section-header.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-item {
      display: block;
      padding: 6px 12px 6px 44px;
      font-size: 14px;
      color: #71717a;
      text-decoration: none;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-item:hover {
      color: #3f3f46;
      background: #f4f4f5;
    }

    .nav-item.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-children {
      display: none;
      overflow: hidden;
    }

    .nav-children.expanded {
      display: block;
    }

    .nav-chevron {
      transition: transform 0.2s;
    }

    .nav-section.expanded .nav-chevron {
      transform: rotate(90deg);
    }

    /* Main Content - Flexible, margins for fixed sidebars */
    .main-content {
      margin-left: 240px;
      margin-right: 480px;
      margin-top: 56px;
      padding: 48px 48px;
      min-width: 400px;
    }

    /* Activity Zone - 480px fixed */
    .activity-zone {
      position: fixed;
      top: 56px;
      right: 0;
      width: 480px;
      height: calc(100vh - 56px);
      border-left: 1px dashed #e4e4e7;
      background: #fafafa;
      overflow-y: auto;
      padding: 24px 20px;
      z-index: 40;
    }

    /* Responsive: Hide Activity Zone below 1400px */
    @media (max-width: 1400px) {
      .activity-zone {
        display: none;
      }
      .main-content {
        margin-right: 0;
        padding: 40px 32px;
      }
    }

    /* Responsive: Hide Left Nav below 768px */
    @media (max-width: 768px) {
      .left-nav {
        display: none;
      }
      .left-nav.open {
        display: block;
        position: fixed;
        top: 56px;
        left: 0;
        right: 0;
        bottom: 0;
        background: #ffffff;
        z-index: 50;
        overflow-y: auto;
      }
      .main-content {
        margin-left: 0;
        padding: 24px 16px;
        min-width: auto;
      }
    }

    /* Resizer */
    .resizer {
      position: fixed;
      top: 56px;
      right: 480px;
      width: 6px;
      height: calc(100vh - 56px);
      cursor: col-resize;
      background: transparent;
      z-index: 50;
      transition: background 0.15s ease;
    }

    .resizer:hover {
      background: rgba(13, 147, 115, 0.15);
    }

    .resizer.active {
      background: rgba(13, 147, 115, 0.25);
    }

    body.resizing {
      user-select: none;
      cursor: col-resize !important;
    }

    body.resizing * {
      cursor: col-resize !important;
    }

    @media (max-width: 1400px) {
      .resizer {
        display: none;
      }
    }

    /* Activity Zone Items */
    .activity-item {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      background: #ffffff;
      border: 1px solid #e4e4e7;
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .activity-item.active {
      opacity: 1;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .activity-item:hover {
      opacity: 1;
    }

    .activity-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Activity Zone content type borders (Original 6) */
    .activity-item.invariant { border-left: 4px solid #3b82f6; }
    .activity-item.effect { border-left: 4px solid #f59e0b; }
    .activity-item.composition { border-left: 4px solid #8b5cf6; }
    .activity-item.frontier { border-left: 4px solid #ef4444; }
    .activity-item.warstory { border-left: 4px solid #10b981; }
    .activity-item.alternative { border-left: 4px solid #6b7280; }

    /* Activity Zone generative content types (New 10) */
    .activity-item.inversion { border-left: 4px solid #4f46e5; }
    .activity-item.constraint { border-left: 4px solid #8b5cf6; }
    .activity-item.gradient { border-left: 4px solid #f43f5e; }
    .activity-item.horizon { border-left: 4px solid #06b6d4; }
    .activity-item.violation { border-left: 4px solid #f97316; }
    .activity-item.tradeoff { border-left: 4px solid #f59e0b; }
    .activity-item.analogy { border-left: 4px solid #d946ef; }
    .activity-item.expertise { border-left: 4px solid #10b981; }
    .activity-item.minimal { border-left: 4px solid #84cc16; }
    .activity-item.inflection { border-left: 4px solid #eab308; }

    /* Main Content Components */

    /* Section titles with number */
    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: #0D9373;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      border-radius: 50%;
      margin-right: 12px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: #18181b;
      margin-bottom: 20px;
      margin-top: 56px;
      display: flex;
      align-items: center;
    }

    .section-title:first-child {
      margin-top: 0;
    }

    /* Essence Box (15 words) */
    .essence-box {
      background: linear-gradient(135deg, #18181b 0%, #27272a 100%);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 40px;
    }

    .essence-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #10b981;
      margin-bottom: 12px;
    }

    .essence-text {
      font-size: 22px;
      font-weight: 500;
      color: #ffffff;
      line-height: 1.4;
    }

    /* Core Abstraction Box */
    .core-abstraction {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .core-philosophy {
      font-size: 16px;
      color: #3f3f46;
      margin-bottom: 16px;
      font-style: italic;
    }

    .core-code {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 16px;
      overflow-x: auto;
    }

    .core-code code {
      font-family: 'Fira Code', monospace;
      font-size: 15px;
      color: #10b981;
      white-space: nowrap;
    }

    .core-anchor {
      font-size: 14px;
      color: #71717a;
      text-align: center;
    }

    /* Design Decision Box */
    .decision-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .decision-why {
      font-size: 16px;
      font-weight: 600;
      color: #0D9373;
      margin-bottom: 12px;
    }

    .decision-reasoning {
      font-size: 14px;
      color: #3f3f46;
      margin-bottom: 16px;
    }

    .decision-implication {
      background: #f4f4f5;
      border-radius: 8px;
      padding: 16px;
    }

    .decision-implication-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: #71717a;
      margin-bottom: 8px;
    }

    /* Code Blocks */
    .code-block {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 24px;
      position: relative;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
      color: #e4e4e7;
      line-height: 1.6;
    }

    .code-block .comment { color: #6b7280; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #10b981; }
    .code-block .variable { color: #60a5fa; }

    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #3f3f46;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: background 0.15s;
    }

    .copy-btn:hover {
      background: #52525b;
    }

    /* Path Steps */
    .path-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .path-step {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .path-step:last-child {
      margin-bottom: 0;
    }

    .path-number {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: #0D9373;
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .path-content {
      flex: 1;
      font-size: 14px;
      color: #3f3f46;
    }

    .path-content code {
      background: #e4e4e7;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }

    /* Gotcha Box */
    .gotcha-box {
      background: #fffbeb;
      border: 1px solid #fcd34d;
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .gotcha-title {
      font-weight: 600;
      color: #92400e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .gotcha-detail {
      font-size: 14px;
      color: #78350f;
      margin-bottom: 8px;
    }

    .gotcha-detail strong {
      color: #92400e;
    }

    /* What's Hard Box */
    .hard-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .hard-title {
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hard-detail {
      font-size: 14px;
      color: #7f1d1d;
      margin-bottom: 8px;
    }

    /* When To Use Grid */
    .when-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    @media (max-width: 900px) {
      .when-grid {
        grid-template-columns: 1fr;
      }
    }

    .when-use {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 24px;
    }

    .when-not {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 24px;
    }

    .when-title {
      font-weight: 600;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .when-use .when-title { color: #166534; }
    .when-not .when-title { color: #991b1b; }

    .when-item {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .when-use .when-item { color: #166534; }
    .when-not .when-item { color: #991b1b; }

    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: none;
      padding: 8px;
      background: none;
      border: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #fafafa;
    }

    ::-webkit-scrollbar-thumb {
      background: #d4d4d8;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1aa;
    }

    /* Keyboard shortcut hint */
    .kbd {
      display: inline-flex;
      align-items: center;
      padding: 2px 6px;
      background: #f4f4f5;
      border: 1px solid #e4e4e7;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      color: #71717a;
    }

    /* Tool comparison table */
    .tool-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 24px;
      font-size: 14px;
    }

    .tool-table th {
      background: #f4f4f5;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      border-bottom: 2px solid #e4e4e7;
    }

    .tool-table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e4e4e7;
    }

    .tool-table tr:hover {
      background: #fafafa;
    }

    /* Color indicator */
    .color-indicator {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 13px;
      font-weight: 500;
    }

    .color-indicator.green {
      background: #dcfce7;
      color: #166534;
    }

    .color-indicator.yellow {
      background: #fef9c3;
      color: #854d0e;
    }

    .color-indicator.red {
      background: #fee2e2;
      color: #991b1b;
    }

    .color-indicator.blue {
      background: #dbeafe;
      color: #1e40af;
    }

    /* Diagram container */
    .diagram-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      line-height: 1.4;
      overflow-x: auto;
      white-space: pre;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
      <i data-lucide="menu" class="w-5 h-5 text-text-secondary"></i>
    </button>
    <div class="flex items-center gap-3">
      <i data-lucide="activity" class="w-5 h-5 text-accent"></i>
      <span class="font-semibold text-text-primary">Claude Code</span>
    </div>
    <div class="flex-1 flex justify-center">
      <button class="flex items-center gap-2 px-4 py-2 bg-bg-muted rounded-lg text-text-muted text-sm hover:bg-border transition-colors">
        <i data-lucide="search" class="w-4 h-4"></i>
        <span>Search documentation...</span>
        <span class="kbd">Cmd+K</span>
      </button>
    </div>
    <div class="flex items-center gap-4">
      <a href="#" class="text-sm text-text-muted hover:text-text-primary transition-colors">Support</a>
      <button class="p-2 hover:bg-bg-muted rounded-lg transition-colors" aria-label="Toggle theme">
        <i data-lucide="sun" class="w-4 h-4 text-text-muted"></i>
      </button>
    </div>
  </header>

  <div class="three-panel-layout">
    <!-- Left Navigation -->
    <nav class="left-nav" id="leftNav">
      <div class="px-4 mb-4">
        <span class="text-xs font-semibold text-text-muted uppercase tracking-wider">Observability</span>
      </div>

      <!-- Essence -->
      <div class="nav-section expanded" data-section="essence">
        <div class="nav-section-header active" onclick="toggleSection(this)">
          <i data-lucide="zap" class="w-4 h-4"></i>
          <span>Essence</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#essence" class="nav-item active">The 15-Word Summary</a>
        </div>
      </div>

      <!-- Core Abstraction -->
      <div class="nav-section expanded" data-section="core">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="eye" class="w-4 h-4"></i>
          <span>Core Abstraction</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#core-abstraction" class="nav-item">Control Room Mental Model</a>
        </div>
      </div>

      <!-- Design Decisions -->
      <div class="nav-section expanded" data-section="decisions">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="lightbulb" class="w-4 h-4"></i>
          <span>Design Decisions</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#why-real-time" class="nav-item">Why Real-Time?</a>
          <a href="#why-color-coding" class="nav-item">Why Color Coding?</a>
          <a href="#why-layered" class="nav-item">Why Layered Tools?</a>
        </div>
      </div>

      <!-- Tool Structure -->
      <div class="nav-section" data-section="tools">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="wrench" class="w-4 h-4"></i>
          <span>Tool Structure</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#tool-structure" class="nav-item">The 3 Tools</a>
          <a href="#claude-hud" class="nav-item">Claude HUD</a>
          <a href="#gas-town-gui" class="nav-item">Gas Town GUI</a>
          <a href="#git-monitoring" class="nav-item">Git Monitoring</a>
        </div>
      </div>

      <!-- Path of a Metric -->
      <div class="nav-section" data-section="path">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="git-branch" class="w-4 h-4"></i>
          <span>Path of a Metric</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#path" class="nav-item">Data Flow</a>
        </div>
      </div>

      <!-- Gotchas -->
      <div class="nav-section" data-section="gotchas">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="alert-triangle" class="w-4 h-4"></i>
          <span>Gotchas</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#gotchas" class="nav-item">Practical Problems</a>
        </div>
      </div>

      <!-- What's Hard -->
      <div class="nav-section" data-section="hard">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="flame" class="w-4 h-4"></i>
          <span>What's Hard</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#hard" class="nav-item">Fundamental Tensions</a>
        </div>
      </div>

      <!-- When to Use -->
      <div class="nav-section" data-section="when">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="check-circle" class="w-4 h-4"></i>
          <span>When to Use</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#when" class="nav-item">Decision Matrix</a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">Observability transforms the invisible agent control plane into actionable, color-coded displays enabling real-time intervention.</div>
        </div>
      </section>

      <!-- Section 2: CORE ABSTRACTION + IMPLEMENTATION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Core Abstraction
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"Agents are black boxes by default. Observability is the glass wall that makes their work visible."</div>

          <div class="core-code">
            <button class="copy-btn" onclick="copyCode(this, 'VISIBILITY = f(context%, tools, agents, progress, git)')">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <code>VISIBILITY = f(context%, tools, agents, progress, git)</code>
          </div>

          <div class="core-anchor">That's the fundamental equation. Everything else is rendering.</div>
        </div>

        <p class="text-text-secondary mb-6">
          Agent systems operate as opaque processes that consume tokens, make decisions, and produce outputs with minimal visibility into their internal reasoning. Unlike traditional software where you can set breakpoints and step through code, AI agents require external instrumentation.
        </p>

        <div class="diagram-container">
                    POWER PLANT CONTROL ROOM
    +---------------------------------------------------+
    |                                                     |
    |  o o o    Reactor Core         [===========]       |
    |  * * o    Temperature: 342C    [NOMINAL   ]       |
    |  o * o    Pressure: 15.2 MPa   [WARNING   ]       |
    |           Coolant Flow: 98%    [NOMINAL   ]       |
    |                                                     |
    +---------------------------------------------------+
                            |
                    CLAUDE CODE OBSERVABILITY
    +---------------------------------------------------+
    |                                                     |
    |  G G Y   Agent Health         ||||||||..        |
    |  Context: 72%                    [CAUTION  ]       |
    |  Tools Running: 2                [NORMAL   ]       |
    |  Task Progress: 4/7              [ON TRACK ]       |
    |                                                     |
    +---------------------------------------------------+
        </div>

        <p class="text-text-secondary mb-6">
          The Control Room mental model: you don't watch every gauge constantly. Color coding draws attention to problems. Trends matter more than absolute values. Alarms exist so you can look away.
        </p>
      </section>

      <!-- Section 3: DESIGN DECISIONS -->
      <section id="why-real-time" data-activity="decisions">
        <h2 class="section-title">
          <span class="section-number">3</span>
          Design Decisions
        </h2>

        <div class="decision-box">
          <div class="decision-why">WHY REAL-TIME MONITORING?</div>
          <div class="decision-reasoning">
            Context degrades invisibly. Quality drops without warning. By the time you notice problems in output, the damage is compounded across multiple iterations. Real-time visibility enables intervention before compound failure.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Glance at context percentage every few minutes. Yellow (70%+) means monitor closely. Red (85%+) means act now. The cost of checking is seconds; the cost of not checking is hours of wasted work.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-color-coding">
          <div class="decision-why">WHY COLOR CODING?</div>
          <div class="decision-reasoning">
            Humans process colors pre-attentively (before conscious thought). A red dot in a sea of green pops out instantly. Numbers require parsing. When monitoring 10+ agents, color is the only way to scan for problems in sub-second time.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Trust the colors. Green means continue. Yellow means prepare to act. Red means act now. Train yourself to respond to colors, not to read every number. This scales; reading numbers doesn't.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-layered">
          <div class="decision-why">WHY LAYERED TOOLS?</div>
          <div class="decision-reasoning">
            Different agent counts require different visibility strategies. A single session needs Claude HUD (terminal statusline). Five parallel agents need tmux splits. Ten+ agents need Gas Town GUI (RTS-style spatial view). One tool cannot serve all scales.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Match tool to agent count. 1-3 agents: HUD + tmux. 5-10 agents: Add rpai. 10+ agents: Use Gas Town GUI. Over-tooling wastes setup time; under-tooling causes cognitive overload.
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: TOOL STRUCTURE -->
      <section id="tool-structure" data-activity="tools">
        <h2 class="section-title">
          <span class="section-number">4</span>
          The Tool Structure
        </h2>

        <div class="diagram-container">
                    Claude Code Observability Stack

    +-------------------------------------------------------------+
    |                   VISIBILITY LAYER                           |
    |                                                              |
    |   Terminal-Based              Browser-Based                  |
    |   +------------+              +------------+                |
    |   | Claude HUD |              | Gas Town   |                |
    |   |            |              |   GUI      |                |
    |   | * Context% |              | * RTS Map  |                |
    |   | * Tools    |              | * Units    |                |
    |   | * Agents   |              | * Commands |                |
    |   | * Todos    |              | * Minimap  |                |
    |   +-----+------+              +-----+------+                |
    |         |                           |                        |
    |         v                           v                        |
    |   +-----------------------------------------------------+   |
    |   |                ORCHESTRATION LAYER                   |   |
    |   |                                                      |   |
    |   |    Ralph Loops    CC-Mirror    Gas Town Backend      |   |
    |   |                                                      |   |
    |   +-----------------------------------------------------+   |
    |                              |                               |
    |                              v                               |
    |   +-----------------------------------------------------+   |
    |   |                  EXECUTION LAYER                     |   |
    |   |                                                      |   |
    |   |      Claude Code Sessions (1 to N parallel)          |   |
    |   |                                                      |   |
    |   +-----------------------------------------------------+   |
    +-------------------------------------------------------------+
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="claude-hud">Claude HUD - Terminal Session Visibility</h3>

        <p class="text-text-secondary mb-4">
          A plugin that renders real-time session data in your terminal statusline. The most direct solution for Claude Code visibility.
        </p>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Installation</span>
/plugin marketplace add jarrodwatts/claude-hud
/plugin install claude-hud
/claude-hud:setup</pre>
        </div>

        <p class="text-text-secondary mb-4">Sample output:</p>

        <div class="code-block">
          <pre>[Opus 4.5] <span class="string">||||||||..</span> 35% | 1 MCPs | <span class="variable">5m</span>
<span class="string">V</span> Read x2 | <span class="string">V</span> Edit x1 | <span class="variable">o</span> Bash: npm run build
<span class="comment">* Implementing auth middleware | 1/4 complete</span></pre>
        </div>

        <table class="tool-table">
          <thead>
            <tr>
              <th>Context Level</th>
              <th>Color</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>0-69%</td>
              <td><span class="color-indicator green">Green</span></td>
              <td>Safe operating zone, continue working</td>
            </tr>
            <tr>
              <td>70-84%</td>
              <td><span class="color-indicator yellow">Yellow</span></td>
              <td>Monitor closely, consider compacting soon</td>
            </tr>
            <tr>
              <td>85-100%</td>
              <td><span class="color-indicator red">Red</span></td>
              <td>Quality degrading, compact or wrap up now</td>
            </tr>
          </tbody>
        </table>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="gas-town-gui">Gas Town GUI - RTS Factory Interface</h3>

        <p class="text-text-secondary mb-4">
          A browser-based graphical interface that transforms Gas Town's multi-agent orchestration into an interactive Real-Time Strategy game experience. Built with Phaser 3, it renders your agent factory as an isometric map.
        </p>

        <div class="diagram-container">
+----------------------------------------------------------------------------+
| D 45,234 | [] 12 | [_] 3 | MY GAS TOWN                          [-][o][x] |
+----------------------------------------------------------------------------+
|                                                                            |
|                    oooo                                                     |
|                   o####o         <- Town Hall                                |
|                    oooo                                                     |
|                                                                            |
|        [G]           [G]           [R]          <- Units (polecats)        |
|      [Alice]       [Bob]       [Carol]                                      |
|                                                                            |
|   ooo                              ooo                                    |
|  o===o  <- Refinery                o...o  <- Oil Rig                        |
|   ooo                              ooo                                    |
|                                                                            |
|                 [G]            [B]                                         |
|               [Dave]        [Eve]                                           |
|                           (idle)                                           |
|                                                                            |
+----------------------------------------------------------------------------+
| Selected: Carol (Polecat)                         +--------------------+ |
| Status: ERROR - TypeScript check failed           | . .   .    [Assign]| |
| Task: US-007 Implement checkout flow              |   . o .    [Logs  ]| |
| Time: 23m 45s                                     | .     . .  [Stop  ]| |
|                                                   |   +-+      [Mail  ]| |
|                                                   |   +-+              | |
|                                                   +--------------------+ |
+----------------------------------------------------------------------------+
        </div>

        <table class="tool-table">
          <thead>
            <tr>
              <th>Color</th>
              <th>Status</th>
              <th>Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="color-indicator blue">Blue</span></td>
              <td>Idle</td>
              <td>Waiting for assignment, ready for work</td>
            </tr>
            <tr>
              <td><span class="color-indicator green">Green</span></td>
              <td>Working</td>
              <td>Processing a task, monitor progress</td>
            </tr>
            <tr>
              <td><span class="color-indicator red">Red</span></td>
              <td>Error</td>
              <td>Stuck or failed, needs investigation</td>
            </tr>
          </tbody>
        </table>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="git-monitoring">Git-Based Monitoring - Durable State</h3>

        <p class="text-text-secondary mb-4">
          Git history provides the most durable form of agent observability. Changes persist across sessions and agent resets.
        </p>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Commit frequency (agent velocity)</span>
git log --oneline --since="1 hour ago" | wc -l

<span class="comment"># What changed in last iteration</span>
git diff HEAD~1

<span class="comment"># Recent activity</span>
git log --oneline -10

<span class="comment"># Uncommitted changes</span>
git status --short</pre>
        </div>
      </section>

      <!-- Section 5: PATH OF A METRIC -->
      <section id="path" data-activity="path">
        <h2 class="section-title">
          <span class="section-number">5</span>
          The Path of a Metric
        </h2>

        <p class="text-text-secondary mb-6">
          Follow a context percentage reading through the observability stack:
        </p>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content">Claude Code runtime tracks token usage in session state</div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content">Runtime emits JSON payload via stdin every ~300ms</div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content">Claude HUD plugin receives and parses the payload</div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content">Render engine calculates percentage: <code>(input + cache) / max_context</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">5</div>
            <div class="path-content">Color thresholds applied: 0-69% green, 70-84% yellow, 85%+ red</div>
          </div>
          <div class="path-step">
            <div class="path-number">6</div>
            <div class="path-content">Statusline updates with bar: <code>||||||||.. 35%</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">7</div>
            <div class="path-content">At 85%+, token breakdown appears: <code>Input: 145,234 / 200,000</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">8</div>
            <div class="path-content">You glance at color, not number. Red triggers intervention.</div>
          </div>
          <div class="path-step">
            <div class="path-number">9</div>
            <div class="path-content">Intervention: <code>/compact</code> or fresh session or let Ralph iterate</div>
          </div>
          <div class="path-step">
            <div class="path-number">10</div>
            <div class="path-content">Next poll (300ms later) shows updated state</div>
          </div>
        </div>
      </section>

      <!-- Section 6: GOTCHAS -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Gotchas
        </h2>

        <p class="text-text-secondary mb-6">
          Real problems you'll hit with observability tools, with concrete thresholds and fixes:
        </p>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            HUD not appearing in terminal
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Installed Claude HUD but statusline is empty or shows errors</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Plugin not properly activated, or terminal doesn't support ANSI colors</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Run <code>/claude-hud:setup</code> again. Check terminal: <code>echo -e "\e[32mGreen\e[0m"</code></div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Colors showing wrong thresholds
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Context bar shows yellow at 40% when it should be green</div>
          <div class="gotcha-detail"><strong>Cause:</strong> HUD calculates against full context window, you may have CLAUDE.md consuming tokens</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Check config counts in HUD. Large CLAUDE.md files reduce effective context.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Gas Town GUI units not updating
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Colors stay stale, new agents don't appear on map</div>
          <div class="gotcha-detail"><strong>Polling interval:</strong> 3 seconds. Wait one full cycle before diagnosing.</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Check browser console for API errors. Verify Gas Town backend: <code>curl http://localhost:8080/api/status</code></div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Information overload at scale
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Too much data, can't focus on what matters with 10+ agents</div>
          <div class="gotcha-detail"><strong>Cause:</strong> All features enabled, not tuned for workflow</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Use Gas Town GUI minimap for overview. Click only on red dots. Trust color abstraction.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Missed critical alert overnight
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Agent was stuck for hours, no notification received</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Alert webhook not configured or not working</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Test alerts BEFORE every overnight run: <code>curl -X POST $WEBHOOK_URL -d '{"text":"test"}'</code></div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          Fundamental tensions in agent observability with no perfect solutions:
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Cognitive Load vs. Visibility Depth
          </div>
          <div class="hard-detail"><strong>The tension:</strong> More metrics mean more information, but also more cognitive load. At some point, observability becomes the work instead of enabling the work.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> You spend more time watching dashboards than reviewing agent output. You feel anxious when not monitoring.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Use color coding as primary signal. Only drill into numbers when colors indicate problems. Trust the abstraction layer.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Polling Latency vs. Real-Time
          </div>
          <div class="hard-detail"><strong>The tension:</strong> HUD polls every 300ms. GUI polls every 3 seconds. This is near-real-time, not actual real-time. Rapid tool sequences may appear batched.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> You see a completed state but missed the in-progress phase. Debugging fast failures is difficult.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Focus on trends over snapshots. For detailed debugging, use terminal logs. Accept that some granularity is lost.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Tool Overhead vs. Agent Simplicity
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Every monitoring tool adds setup time, maintenance burden, and potential failure points. The simplest system has no observability. The most observable system is complex.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> You spend 30 minutes setting up monitoring for a 10-minute task. Monitoring tools break and require debugging.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Scale tools to task duration. 10-minute task: just watch terminal. 2-hour task: add HUD. Overnight: full stack with alerts.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Silent Failure Detection
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Agents can appear green (working) while making no actual progress. Analysis paralysis, waiting for dependencies, or infinite planning loops produce no visible failures.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Agent has been "working" for 30 minutes with no commits. Output looks active but nothing is shipping.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Track commits, not just agent status. No commits in 10+ minutes = investigate. Add "stuck detection" to Ralph loops.</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO USE -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Use Which Tool
        </h2>

        <table class="tool-table mb-8">
          <thead>
            <tr>
              <th>Scenario</th>
              <th>Terminal Logs</th>
              <th>Claude HUD</th>
              <th>Gas Town GUI</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Single session, focused work</td>
              <td><span class="color-indicator green">Best</span></td>
              <td><span class="color-indicator green">Good</span></td>
              <td>Overkill</td>
            </tr>
            <tr>
              <td>Single session, need context awareness</td>
              <td>OK</td>
              <td><span class="color-indicator green">Best</span></td>
              <td>Overkill</td>
            </tr>
            <tr>
              <td>2-3 parallel agents</td>
              <td>OK</td>
              <td><span class="color-indicator green">Best</span></td>
              <td>OK</td>
            </tr>
            <tr>
              <td>5-10 parallel agents</td>
              <td>Difficult</td>
              <td>Limited</td>
              <td><span class="color-indicator green">Best</span></td>
            </tr>
            <tr>
              <td>10+ agents (factory)</td>
              <td>Impossible</td>
              <td>Limited</td>
              <td><span class="color-indicator green">Best</span></td>
            </tr>
            <tr>
              <td>Overnight unattended</td>
              <td>Need logging</td>
              <td>Need logging</td>
              <td><span class="color-indicator green">Best + alerts</span></td>
            </tr>
            <tr>
              <td>Debugging specific failure</td>
              <td><span class="color-indicator green">Best</span></td>
              <td>Helpful</td>
              <td>Context only</td>
            </tr>
          </tbody>
        </table>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              USE OBSERVABILITY WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Tasks run longer than 30 minutes (context rot becomes likely)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Running multiple agents in parallel (coordination failures invisible)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Overnight or unattended runs (can't manually watch output)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Cost-sensitive work (token consumption must stay in budget)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Complex multi-step tasks (failure in step 3 affects step 7)</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              SKIP OBSERVABILITY WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Quick 5-minute tasks (setup time exceeds task time)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Interactive pair programming (you're watching anyway)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Exploratory debugging (need raw terminal output)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Learning new patterns (complexity hinders understanding)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>One-off tasks with no repeatability needs</span>
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4">Quick Reference: Installation Commands</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Claude HUD (terminal statusline)</span>
/plugin marketplace add jarrodwatts/claude-hud
/plugin install claude-hud
/claude-hud:setup

<span class="comment"># rpai (tmux multi-agent manager)</span>
cargo install rpai
rpai  <span class="comment"># run in any tmux session</span>

<span class="comment"># Gas Town GUI (browser RTS interface)</span>
cd gtgui && npm install
npm run dev  <span class="comment"># development with hot reload</span></pre>
        </div>
      </section>

    </main>

    <!-- Resizer between Main Panel and Activity Zone -->
    <div class="resizer" data-resizer="activity-zone" aria-label="Resize activity panel"></div>

    <!-- Activity Zone -->
    <aside class="activity-zone" id="activityZone">
      <div class="text-xs font-semibold text-text-muted uppercase tracking-wider mb-4">Operational Intelligence</div>

      <!-- ESSENCE SECTION -->
      <div class="activity-item inversion" data-section="essence">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if agents were transparent by default?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd design:</strong> Direct neural inspection, stream-of-consciousness logging, no abstraction.<br>
          <strong>Why this fails:</strong> Token processing is not linear thought. Internal state is matrix operations, not readable narrative.<br>
          <strong>Hidden constraint revealed:</strong> Observability is translation from machine math to human intuition.
        </div>
      </div>

      <div class="activity-item minimal" data-section="essence">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">The irreducible observability signal</div>
        <div class="text-text-secondary text-sm">
          <code style="background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;">context% + color</code><br>
          <strong>Essential:</strong> One number. One color.<br>
          <strong>Everything else:</strong> Refinement for specific failure modes.
        </div>
      </div>

      <div class="activity-item warstory" data-section="essence">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">@jarrodwatts: 10+ hours/day on Claude Code</div>
        <div class="text-text-secondary text-sm">
          Built Claude HUD to solve his own visibility problem. "Finally a HUD to tell if Claude's actually working... or just staring into the void."
        </div>
      </div>

      <!-- CORE SECTION -->
      <div class="activity-item analogy" data-section="core">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Observability = Distributed System Monitoring</div>
        <div class="text-text-secondary text-sm">
          Agents are nodes (each has health metrics)<br>
          Context is memory (finite resource, degrades under pressure)<br>
          Git is the event log (durable record of actions)<br>
          HUD is the metrics collector (real-time visibility)<br><br>
          <em>If you've operated distributed systems, you already understand agent observability.</em>
        </div>
      </div>

      <div class="activity-item invariant" data-section="core">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">INV-005: Color beats numbers for human attention</div>
        <div class="text-text-secondary text-sm">
          All observability tools share this: Claude HUD uses green/yellow/red. Gas Town GUI uses color-coded units. This isn't aesthetic--it's perceptual optimization.
        </div>
      </div>

      <div class="activity-item constraint" data-section="core">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">One constraint: Human attention is finite</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> Humans can monitor ~5 things at once<br>
          -> Color coding for pre-attentive processing<br>
          -> Hierarchy (overview first, details on demand)<br>
          -> Alerts for exceptions (don't require constant watching)<br>
          -> Spatial layouts for pattern recognition<br>
          -> Tool layering by agent count
        </div>
      </div>

      <!-- DECISIONS SECTION -->
      <div class="activity-item gradient" data-section="decisions">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How context degradation appears</div>
        <div class="text-text-secondary text-sm">
          <strong>100% -> 90%</strong> (0-40K): Invisible, full quality<br>
          <strong>90% -> 80%</strong> (40-70K): Subtle drift, responses slightly shorter<br>
          <strong>80% -> 70%</strong> (70-85K): Instructions occasionally ignored<br>
          <strong>70% -> CLIFF</strong> (85K+): Hallucinations, amnesia, garbage<br><br>
          <em>Yellow (70%) is your intervention window.</em>
        </div>
      </div>

      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you ignore yellow context warnings</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> Context hits yellow (70%) and you continue<br>
          <strong>THEN:</strong> Quality degrades invisibly<br>
          <strong>THEN:</strong> Agent produces subtly wrong code<br>
          <strong>THEN:</strong> You commit and build on broken foundation<br>
          <strong>FINALLY:</strong> Hours of debugging for a 2-minute /compact<br><br>
          <em>Yellow is not a suggestion. It's a countdown.</em>
        </div>
      </div>

      <div class="activity-item tradeoff" data-section="decisions">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">The Visibility vs. Overhead Dilemma</div>
        <div class="text-text-secondary text-sm">
          * <strong>No observability:</strong> Fast setup, but blind to problems<br>
          * <strong>Light (HUD only):</strong> Minimal overhead, but single-session only<br>
          * <strong>Full stack:</strong> Maximum visibility, but 30+ min setup<br><br>
          <em>Heuristic: Match observability investment to task duration. 10-min task = 0 setup. Overnight = full stack.</em>
        </div>
      </div>

      <!-- TOOLS SECTION -->
      <div class="activity-item expertise" data-section="tools">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How deep is your understanding?</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "What tools exist?" -> HUD, rpai, Gas Town GUI<br>
          <strong>Intermediate:</strong> "When use which?" -> Scale to agent count<br>
          <strong>Advanced:</strong> "How do they work?" -> Polling, JSON, state sync<br>
          <strong>Staff:</strong> "What's missing?" -> Semantic quality metrics<br>
          <strong>Expert:</strong> "Cross-pattern?" -> Same tools work for Ralph, CC-Mirror, Gas Town
        </div>
      </div>

      <div class="activity-item composition" data-section="tools">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">HUD + Ralph Loop Integration</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> HUD shows per-iteration context usage.<br>
          <strong>Insight:</strong> If HUD shows red before task complete, task is too large.<br>
          <strong>Pattern:</strong> Yellow at completion = ideal task size.
        </div>
      </div>

      <div class="activity-item composition" data-section="tools">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">Gas Town GUI + Alerts</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> GUI for active monitoring, alerts for overnight.<br>
          <strong>Danger:</strong> Don't rely on GUI alone for unattended runs. Browser may crash, tab may close.<br>
          <strong>Pattern:</strong> Always add webhook alerts for overnight + Gas Town.
        </div>
      </div>

      <div class="activity-item warstory" data-section="tools">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Tim Sehn: "Too much going on to comprehend"</div>
        <div class="text-text-secondary text-sm">
          "Gas Town feels like Claude Code in 'limitless mode' but there's really too much going on for you to reasonably comprehend." The GUI solved this by applying RTS game UX patterns to agent orchestration.
        </div>
      </div>

      <!-- PATH SECTION -->
      <div class="activity-item horizon" data-section="path">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">How metrics perception evolves</div>
        <div class="text-text-secondary text-sm">
          <strong>Minute 5:</strong> "These numbers are distracting"<br>
          <strong>Hour 1:</strong> "Why didn't I notice context was at 80%?"<br>
          <strong>Day 1:</strong> "HUD saved me from 3 context explosions"<br>
          <strong>Week 1:</strong> "I don't even read the numbers, just the colors"<br><br>
          <em>The learning curve is trusting the abstraction.</em>
        </div>
      </div>

      <div class="activity-item effect" data-section="path">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="trending-up" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Polling creates batched visibility</div>
        <div class="text-text-secondary text-sm">
          HUD polls every 300ms. If a tool starts and completes in 100ms, you may only see "completed" state, never "running". Fast failures appear as instant transitions. <br><br>
          <strong>Threshold:</strong> Operations under 300ms may appear batched.
        </div>
      </div>

      <div class="activity-item inversion" data-section="path">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if polling were instant?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd see:</strong> Every tool call flashing on/off. Constant motion. Overwhelming noise.<br>
          <strong>Why batching helps:</strong> 300ms smooths the display. You see trends, not noise.<br>
          <strong>Hidden benefit:</strong> Polling interval is a feature, not a limitation.
        </div>
      </div>

      <!-- GOTCHAS SECTION -->
      <div class="activity-item inflection" data-section="gotchas">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When monitoring becomes the work</div>
        <div class="text-text-secondary text-sm">
          <strong>1-5 agents:</strong> Monitoring helps without overhead<br>
          <strong>5-15 agents:</strong> Peak efficiency, tools earn their cost<br>
          <strong>15-30 agents:</strong> May spend more time monitoring than coding<br>
          <strong>30+ agents:</strong> Need automation, not just visibility<br><br>
          <strong>THE INFLECTION:</strong> ~15 agents. Beyond this, add automation (alerts) not just more screens.
        </div>
      </div>

      <div class="activity-item violation" data-section="gotchas">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip testing alerts before overnight</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> Skip testing webhook alert<br>
          <strong>THEN:</strong> Agent gets stuck at 2 AM<br>
          <strong>THEN:</strong> No notification sent (webhook was wrong)<br>
          <strong>THEN:</strong> Wake up to 6 hours of wasted API calls<br>
          <strong>FINALLY:</strong> $50+ burned on a stuck loop<br><br>
          <em>One curl command prevents overnight disasters.</em>
        </div>
      </div>

      <div class="activity-item frontier" data-section="gotchas">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Semantic quality metrics</div>
        <div class="text-text-secondary text-sm">
          Current tools track operational metrics (context %, tool calls, time). But agent output QUALITY is not measured. An agent can be "working" while producing garbage. No automated quality detection exists yet.
        </div>
      </div>

      <!-- HARD SECTION -->
      <div class="activity-item tradeoff" data-section="hard">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">The Attention Paradox</div>
        <div class="text-text-secondary text-sm">
          <strong>THE DILEMMA:</strong><br>
          * Watch closely: Catch problems early, but anxious and distracted<br>
          * Trust and verify: Relaxed, but may miss early warning signs<br>
          * Automate alerts: Hands-off, but alert fatigue if thresholds wrong<br><br>
          <strong>WHY NO PERFECT ANSWER:</strong> Optimal attention varies by task, risk level, and your current mental state.
        </div>
      </div>

      <div class="activity-item gradient" data-section="hard">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How silent failures manifest</div>
        <div class="text-text-secondary text-sm">
          <strong>Visible status:</strong> Green (working)<br>
          <strong>Hidden reality:</strong> Agent in infinite planning loop<br>
          <strong>5 min:</strong> Seems fine, agent is "thinking"<br>
          <strong>15 min:</strong> Still no commit... getting suspicious<br>
          <strong>30 min:</strong> Definitely stuck, no visible error<br><br>
          <em>Detection: Track commits, not just status colors.</em>
        </div>
      </div>

      <div class="activity-item expertise" data-section="hard">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">Diagnosing coordination failures</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "Why are agents conflicting?" -> Check task boundaries<br>
          <strong>Intermediate:</strong> "How to isolate?" -> Git worktrees per agent<br>
          <strong>Advanced:</strong> "How to prevent?" -> File ownership rules in prompts<br>
          <strong>Staff:</strong> "Systemic fix?" -> Inbox/outbox patterns (Gas Town)<br>
          <strong>Expert:</strong> "Optimization?" -> Domain decomposition by component
        </div>
      </div>

      <div class="activity-item warstory" data-section="hard">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Steve Yegge: 30+ agent orchestration</div>
        <div class="text-text-secondary text-sm">
          "Claude Code is the world's biggest fuckin' ant." Gas Town GUI was built because terminal output for 30 parallel agents is incomprehensible. The RTS metaphor solved decades-old UX problems.
        </div>
      </div>

      <!-- WHEN SECTION -->
      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">If observability tools aren't right</div>
        <div class="text-text-secondary text-sm">
          <strong>Quick task?</strong> -> Just watch terminal output<br>
          <strong>Learning Claude Code?</strong> -> Raw output teaches more than dashboards<br>
          <strong>Debugging specific issue?</strong> -> Terminal logs beat abstractions<br>
          <strong>One-off task?</strong> -> Setup time exceeds benefit
        </div>
      </div>

      <div class="activity-item analogy" data-section="when">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Tool Layer = Automation Level</div>
        <div class="text-text-secondary text-sm">
          <strong>Terminal logs</strong> = Print debugging (hands-on, full detail)<br>
          <strong>Claude HUD</strong> = Debugger watch window (live state, focused)<br>
          <strong>Gas Town GUI</strong> = APM dashboard (overview, patterns)<br>
          <strong>Alerts</strong> = PagerDuty (exception-based attention)<br><br>
          <em>Match observability layer to intervention style.</em>
        </div>
      </div>

      <div class="activity-item horizon" data-section="when">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">When each tool becomes valuable</div>
        <div class="text-text-secondary text-sm">
          <strong>5 minutes:</strong> Don't bother with any tools<br>
          <strong>30 minutes:</strong> HUD starts to pay off<br>
          <strong>2 hours:</strong> HUD essential, consider tmux splits<br>
          <strong>Overnight:</strong> Full stack with alerts mandatory<br><br>
          <em>Observability investment scales with task duration.</em>
        </div>
      </div>

      <div class="activity-item invariant" data-section="when">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">INV-007: Git as durable event log</div>
        <div class="text-text-secondary text-sm">
          Regardless of which observability tool you use, git provides the ground truth. Commits don't lie. "No commits in 10 minutes" is more reliable than any color indicator. All tools complement git, none replace it.
        </div>
      </div>

      <div class="activity-item effect" data-section="when">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="trending-up" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Observability enables overnight work</div>
        <div class="text-text-secondary text-sm">
          Without observability, overnight runs are gambling. With it, you can set alerts, review morning dashboards, and debug from history. The 30-minute setup cost enables 8+ hours of unattended productive work.<br><br>
          <strong>ROI threshold:</strong> If task > 2 hours, full observability pays for itself.
        </div>
      </div>

    </aside>
  </div>

  <script>
    /**
     * PanelResizer - Handles draggable panel dividers
     */
    class PanelResizer {
      constructor(resizerEl, config = {}) {
        this.resizer = resizerEl;
        this.config = {
          storageKey: 'panel-activity-zone-width',
          minWidth: 280,
          maxWidth: 900,
          defaultWidth: 480,
          ...config
        };

        this.isResizing = false;
        this.startX = 0;
        this.startWidth = 0;

        this.activityZone = document.querySelector('.activity-zone');
        this.mainContent = document.querySelector('.main-content');

        this.onMouseDown = this.onMouseDown.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
        this.onMouseUp = this.onMouseUp.bind(this);

        this.init();
      }

      init() {
        this.restoreWidth();
        this.resizer.addEventListener('mousedown', this.onMouseDown);
      }

      onMouseDown(e) {
        if (e.button !== 0) return;

        this.isResizing = true;
        this.startX = e.clientX;
        this.startWidth = this.activityZone.offsetWidth;

        this.resizer.classList.add('active');
        document.body.classList.add('resizing');

        document.addEventListener('mousemove', this.onMouseMove);
        document.addEventListener('mouseup', this.onMouseUp);

        e.preventDefault();
      }

      onMouseMove(e) {
        if (!this.isResizing) return;

        const delta = this.startX - e.clientX;
        const newWidth = this.startWidth + delta;

        const constrainedWidth = Math.max(
          this.config.minWidth,
          Math.min(this.config.maxWidth, newWidth)
        );

        this.activityZone.style.width = constrainedWidth + 'px';
        this.mainContent.style.marginRight = constrainedWidth + 'px';
        this.resizer.style.right = constrainedWidth + 'px';
      }

      onMouseUp(e) {
        if (!this.isResizing) return;

        this.isResizing = false;

        this.resizer.classList.remove('active');
        document.body.classList.remove('resizing');

        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);

        this.saveWidth();
      }

      saveWidth() {
        const width = this.activityZone.offsetWidth;
        localStorage.setItem(this.config.storageKey, JSON.stringify({
          width,
          timestamp: Date.now()
        }));
      }

      restoreWidth() {
        try {
          const stored = localStorage.getItem(this.config.storageKey);
          if (stored) {
            const { width } = JSON.parse(stored);
            if (width >= this.config.minWidth && width <= this.config.maxWidth) {
              this.activityZone.style.width = width + 'px';
              this.mainContent.style.marginRight = width + 'px';
              this.resizer.style.right = width + 'px';
            }
          }
        } catch (e) {
          console.warn('Failed to restore panel width:', e);
        }
      }

      destroy() {
        this.resizer.removeEventListener('mousedown', this.onMouseDown);
        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);
      }
    }

    // Auto-initialize resizers on DOM ready
    document.addEventListener('DOMContentLoaded', () => {
      const resizers = document.querySelectorAll('[data-resizer]');
      resizers.forEach(resizer => new PanelResizer(resizer));
    });

    // Initialize Lucide icons
    lucide.createIcons();

    // Navigation toggle
    function toggleSection(header) {
      const section = header.closest('.nav-section');
      section.classList.toggle('expanded');
      const children = section.querySelector('.nav-children');
      children.classList.toggle('expanded');
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const nav = document.getElementById('leftNav');
      nav.classList.toggle('open');
    }

    // Copy functionality
    function copyCode(btn, text) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check" class="w-3 h-3"></i> Copied!';
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = originalText;
          lucide.createIcons();
        }, 2000);
      });
    }

    function copyCodeBlock(btn) {
      const codeBlock = btn.closest('.code-block');
      const pre = codeBlock.querySelector('pre');
      const text = pre.textContent;
      copyCode(btn, text);
    }

    // Scroll-sync with GSAP ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    // Track which sections are in view
    const sections = document.querySelectorAll('[data-activity]');
    const activityItems = document.querySelectorAll('.activity-item');

    sections.forEach(section => {
      ScrollTrigger.create({
        trigger: section,
        start: 'top 40%',
        end: 'bottom 40%',
        onEnter: () => activateSection(section.dataset.activity),
        onEnterBack: () => activateSection(section.dataset.activity),
      });
    });

    function activateSection(sectionName) {
      activityItems.forEach(item => {
        if (item.dataset.section === sectionName) {
          item.classList.add('active');
          gsap.to(item, {
            opacity: 1,
            y: -2,
            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
            duration: 0.3,
            ease: 'power2.out'
          });
        } else {
          item.classList.remove('active');
          gsap.to(item, {
            opacity: 0.5,
            y: 0,
            boxShadow: 'none',
            duration: 0.3,
            ease: 'power2.out'
          });
        }
      });

      // Update nav active state
      document.querySelectorAll('.nav-section-header').forEach(header => {
        header.classList.remove('active');
      });
      const activeNav = document.querySelector(`[data-section="${sectionName}"] .nav-section-header`);
      if (activeNav) {
        activeNav.classList.add('active');
      }
    }

    // Initialize first section as active
    activateSection('essence');

    // Smooth scroll for nav links
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.nav-item').forEach(l => l.classList.remove('active'));
          link.classList.add('active');
        }
      });
    });

    // Brushing interaction - hover activity item highlights related content
    activityItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = 'rgba(13, 147, 115, 0.05)';
          relatedSection.style.transition = 'background-color 0.3s ease';
        }
      });

      item.addEventListener('mouseleave', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = '';
        }
      });
    });
  </script>
</body>
</html>
