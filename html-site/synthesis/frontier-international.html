<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Internationalization & Regional Adaptation | Claude Code Documentation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- GSAP for scroll-sync -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Tailwind Config with Design Tokens -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-base': '#ffffff',
            'bg-subtle': '#fafafa',
            'bg-muted': '#f4f4f5',
            'text-primary': '#18181b',
            'text-secondary': '#3f3f46',
            'text-muted': '#71717a',
            'accent': '#0D9373',
            'accent-light': '#10b981',
            'accent-bg': '#ecfdf5',
            'border': '#e4e4e7',
            // Activity Zone content type colors (Original 6)
            'az-invariant': '#3b82f6',    // Blue
            'az-effect': '#f59e0b',       // Amber
            'az-composition': '#8b5cf6',  // Purple
            'az-frontier': '#ef4444',     // Red
            'az-warstory': '#10b981',     // Green
            'az-alternative': '#6b7280',  // Gray
            // Activity Zone generative content types (New 10)
            'az-inversion': '#4f46e5',    // Indigo
            'az-constraint': '#8b5cf6',   // Violet
            'az-gradient': '#f43f5e',     // Rose
            'az-horizon': '#06b6d4',      // Cyan
            'az-violation': '#f97316',    // Orange
            'az-tradeoff': '#f59e0b',     // Amber
            'az-analogy': '#d946ef',      // Fuchsia
            'az-expertise': '#10b981',    // Emerald
            'az-minimal': '#84cc16',      // Lime
            'az-inflection': '#eab308',   // Yellow
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Fira Code', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    /* Base Styles */
    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    [id] {
      scroll-margin-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: #ffffff;
      color: #18181b;
      line-height: 1.7;
    }

    /* Three Panel Layout */
    .three-panel-layout {
      min-height: 100vh;
      position: relative;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: #ffffff;
      border-bottom: 1px solid #e4e4e7;
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 24px;
    }

    /* Left Navigation - 240px fixed */
    .left-nav {
      position: fixed;
      top: 56px;
      left: 0;
      width: 240px;
      height: calc(100vh - 56px);
      border-right: 1px solid #e4e4e7;
      background: #ffffff;
      overflow-y: auto;
      padding: 16px 0;
      z-index: 40;
    }

    .nav-section {
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 500;
      color: #3f3f46;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.15s;
    }

    .nav-section-header:hover {
      background: #f4f4f5;
    }

    .nav-section-header.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-item {
      display: block;
      padding: 6px 12px 6px 44px;
      font-size: 14px;
      color: #71717a;
      text-decoration: none;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-item:hover {
      color: #3f3f46;
      background: #f4f4f5;
    }

    .nav-item.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-children {
      display: none;
      overflow: hidden;
    }

    .nav-children.expanded {
      display: block;
    }

    .nav-chevron {
      transition: transform 0.2s;
    }

    .nav-section.expanded .nav-chevron {
      transform: rotate(90deg);
    }

    /* Main Content - Flexible, margins for fixed sidebars */
    .main-content {
      margin-left: 240px;
      margin-right: 480px;
      margin-top: 56px;
      padding: 48px 48px;
      min-width: 400px;
    }

    /* Activity Zone - 480px fixed */
    .activity-zone {
      position: fixed;
      top: 56px;
      right: 0;
      width: 480px;
      height: calc(100vh - 56px);
      border-left: 1px dashed #e4e4e7;
      background: #fafafa;
      overflow-y: auto;
      padding: 24px 20px;
      z-index: 40;
    }

    /* Responsive: Hide Activity Zone below 1400px */
    @media (max-width: 1400px) {
      .activity-zone {
        display: none;
      }
      .main-content {
        margin-right: 0;
        padding: 40px 32px;
      }
    }

    /* Responsive: Hide Left Nav below 768px */
    @media (max-width: 768px) {
      .left-nav {
        display: none;
      }
      .left-nav.open {
        display: block;
        position: fixed;
        top: 56px;
        left: 0;
        right: 0;
        bottom: 0;
        background: #ffffff;
        z-index: 50;
        overflow-y: auto;
      }
      .main-content {
        margin-left: 0;
        padding: 24px 16px;
        min-width: auto;
      }
    }

    /* Resizer */
    .resizer {
      position: fixed;
      top: 56px;
      right: 480px;
      width: 6px;
      height: calc(100vh - 56px);
      cursor: col-resize;
      background: transparent;
      z-index: 50;
      transition: background 0.15s ease;
    }

    .resizer:hover {
      background: rgba(13, 147, 115, 0.15);
    }

    .resizer.active {
      background: rgba(13, 147, 115, 0.25);
    }

    body.resizing {
      user-select: none;
      cursor: col-resize !important;
    }

    body.resizing * {
      cursor: col-resize !important;
    }

    @media (max-width: 1400px) {
      .resizer {
        display: none;
      }
    }

    /* Activity Zone Items */
    .activity-item {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      background: #ffffff;
      border: 1px solid #e4e4e7;
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .activity-item.active {
      opacity: 1;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .activity-item:hover {
      opacity: 1;
    }

    .activity-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Activity Zone content type borders (Original 6) */
    .activity-item.invariant { border-left: 4px solid #3b82f6; }
    .activity-item.effect { border-left: 4px solid #f59e0b; }
    .activity-item.composition { border-left: 4px solid #8b5cf6; }
    .activity-item.frontier { border-left: 4px solid #ef4444; }
    .activity-item.warstory { border-left: 4px solid #10b981; }
    .activity-item.alternative { border-left: 4px solid #6b7280; }

    /* Activity Zone generative content types (New 10) */
    .activity-item.inversion { border-left: 4px solid #4f46e5; }
    .activity-item.constraint { border-left: 4px solid #8b5cf6; }
    .activity-item.gradient { border-left: 4px solid #f43f5e; }
    .activity-item.horizon { border-left: 4px solid #06b6d4; }
    .activity-item.violation { border-left: 4px solid #f97316; }
    .activity-item.tradeoff { border-left: 4px solid #f59e0b; }
    .activity-item.analogy { border-left: 4px solid #d946ef; }
    .activity-item.expertise { border-left: 4px solid #10b981; }
    .activity-item.minimal { border-left: 4px solid #84cc16; }
    .activity-item.inflection { border-left: 4px solid #eab308; }

    /* Main Content Components */

    /* Section titles with number */
    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: #0D9373;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      border-radius: 50%;
      margin-right: 12px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: #18181b;
      margin-bottom: 20px;
      margin-top: 56px;
      display: flex;
      align-items: center;
    }

    .section-title:first-child {
      margin-top: 0;
    }

    /* Essence Box (15 words) */
    .essence-box {
      background: linear-gradient(135deg, #18181b 0%, #27272a 100%);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 40px;
    }

    .essence-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #10b981;
      margin-bottom: 12px;
    }

    .essence-text {
      font-size: 22px;
      font-weight: 500;
      color: #ffffff;
      line-height: 1.4;
    }

    /* Core Abstraction Box */
    .core-abstraction {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .core-philosophy {
      font-size: 16px;
      color: #3f3f46;
      margin-bottom: 16px;
      font-style: italic;
    }

    .core-code {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 16px;
      overflow-x: auto;
    }

    .core-code code {
      font-family: 'Fira Code', monospace;
      font-size: 15px;
      color: #10b981;
      white-space: nowrap;
    }

    .core-anchor {
      font-size: 14px;
      color: #71717a;
      text-align: center;
    }

    /* Design Decision Box */
    .decision-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .decision-why {
      font-size: 16px;
      font-weight: 600;
      color: #0D9373;
      margin-bottom: 12px;
    }

    .decision-reasoning {
      font-size: 14px;
      color: #3f3f46;
      margin-bottom: 16px;
    }

    .decision-implication {
      background: #f4f4f5;
      border-radius: 8px;
      padding: 16px;
    }

    .decision-implication-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: #71717a;
      margin-bottom: 8px;
    }

    /* Code Blocks */
    .code-block {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 24px;
      position: relative;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
      color: #e4e4e7;
      line-height: 1.6;
    }

    .code-block .comment { color: #6b7280; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #10b981; }
    .code-block .variable { color: #60a5fa; }

    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #3f3f46;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: background 0.15s;
    }

    .copy-btn:hover {
      background: #52525b;
    }

    /* Path Steps */
    .path-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .path-step {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .path-step:last-child {
      margin-bottom: 0;
    }

    .path-number {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: #0D9373;
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .path-content {
      flex: 1;
      font-size: 14px;
      color: #3f3f46;
    }

    .path-content code {
      background: #e4e4e7;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }

    /* Gotcha Box */
    .gotcha-box {
      background: #fffbeb;
      border: 1px solid #fcd34d;
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .gotcha-title {
      font-weight: 600;
      color: #92400e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .gotcha-detail {
      font-size: 14px;
      color: #78350f;
      margin-bottom: 8px;
    }

    .gotcha-detail strong {
      color: #92400e;
    }

    /* What's Hard Box */
    .hard-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .hard-title {
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hard-detail {
      font-size: 14px;
      color: #7f1d1d;
      margin-bottom: 8px;
    }

    /* When To Use Grid */
    .when-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    @media (max-width: 900px) {
      .when-grid {
        grid-template-columns: 1fr;
      }
    }

    .when-use {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 24px;
    }

    .when-not {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 24px;
    }

    .when-title {
      font-weight: 600;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .when-use .when-title { color: #166534; }
    .when-not .when-title { color: #991b1b; }

    .when-item {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .when-use .when-item { color: #166534; }
    .when-not .when-item { color: #991b1b; }

    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: none;
      padding: 8px;
      background: none;
      border: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #fafafa;
    }

    ::-webkit-scrollbar-thumb {
      background: #d4d4d8;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1aa;
    }

    /* Keyboard shortcut hint */
    .kbd {
      display: inline-flex;
      align-items: center;
      padding: 2px 6px;
      background: #f4f4f5;
      border: 1px solid #e4e4e7;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      color: #71717a;
    }

    /* Language Tier Table */
    .tier-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 24px;
    }

    .tier-table th,
    .tier-table td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid #e4e4e7;
    }

    .tier-table th {
      background: #f4f4f5;
      font-weight: 600;
      font-size: 14px;
    }

    .tier-table td {
      font-size: 14px;
    }

    .tier-table tr:hover {
      background: #fafafa;
    }

    /* Info Box */
    .info-box {
      background: #ecfdf5;
      border: 1px solid #a7f3d0;
      border-left: 4px solid #10b981;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 24px;
    }

    .info-box-title {
      font-weight: 600;
      color: #047857;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .info-box-content {
      font-size: 14px;
      color: #065f46;
    }

    /* Quote Box */
    .quote-box {
      background: #fafafa;
      border-left: 4px solid #0D9373;
      border-radius: 0 8px 8px 0;
      padding: 16px 20px;
      margin-bottom: 24px;
    }

    .quote-text {
      font-style: italic;
      color: #3f3f46;
      margin-bottom: 8px;
    }

    .quote-attribution {
      font-size: 13px;
      color: #71717a;
    }

    /* Region Table */
    .region-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 24px;
      font-size: 14px;
    }

    .region-table th,
    .region-table td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid #e4e4e7;
    }

    .region-table th {
      background: #f4f4f5;
      font-weight: 600;
    }

    .region-table tr:hover {
      background: #fafafa;
    }

    /* Subsection Header */
    .subsection-header {
      font-size: 18px;
      font-weight: 600;
      color: #18181b;
      margin-top: 32px;
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid #e4e4e7;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
      <i data-lucide="menu" class="w-5 h-5 text-text-secondary"></i>
    </button>
    <div class="flex items-center gap-3">
      <i data-lucide="globe" class="w-5 h-5 text-accent"></i>
      <span class="font-semibold text-text-primary">Claude Code</span>
    </div>
    <div class="flex-1 flex justify-center">
      <button class="flex items-center gap-2 px-4 py-2 bg-bg-muted rounded-lg text-text-muted text-sm hover:bg-border transition-colors">
        <i data-lucide="search" class="w-4 h-4"></i>
        <span>Search documentation...</span>
        <span class="kbd">Cmd+K</span>
      </button>
    </div>
    <div class="flex items-center gap-4">
      <a href="#" class="text-sm text-text-muted hover:text-text-primary transition-colors">Support</a>
      <button class="p-2 hover:bg-bg-muted rounded-lg transition-colors" aria-label="Toggle theme">
        <i data-lucide="sun" class="w-4 h-4 text-text-muted"></i>
      </button>
    </div>
  </header>

  <div class="three-panel-layout">
    <!-- Left Navigation -->
    <nav class="left-nav" id="leftNav">
      <div class="px-4 mb-4">
        <span class="text-xs font-semibold text-text-muted uppercase tracking-wider">Internationalization</span>
      </div>

      <!-- Essence -->
      <div class="nav-section expanded" data-section="essence">
        <div class="nav-section-header active" onclick="toggleSection(this)">
          <i data-lucide="zap" class="w-4 h-4"></i>
          <span>Essence</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#essence" class="nav-item active">The 15-Word Summary</a>
        </div>
      </div>

      <!-- Core Abstraction -->
      <div class="nav-section expanded" data-section="core">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="box" class="w-4 h-4"></i>
          <span>Core Abstraction</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#core-abstraction" class="nav-item">Philosophy + Code</a>
        </div>
      </div>

      <!-- Design Decisions -->
      <div class="nav-section expanded" data-section="decisions">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="lightbulb" class="w-4 h-4"></i>
          <span>Design Decisions</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#why-multilingual" class="nav-item">Why Multilingual?</a>
          <a href="#why-english-code" class="nav-item">Why English Code?</a>
          <a href="#why-regional-vms" class="nav-item">Why Regional VMs?</a>
        </div>
      </div>

      <!-- File Structure -->
      <div class="nav-section" data-section="files">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="folder" class="w-4 h-4"></i>
          <span>Configuration</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#file-structure" class="nav-item">Configuration Files</a>
          <a href="#language-config" class="nav-item">Language Config</a>
          <a href="#claude-md-i18n" class="nav-item">CLAUDE.md Localization</a>
        </div>
      </div>

      <!-- Path of a Request -->
      <div class="nav-section" data-section="path">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="git-branch" class="w-4 h-4"></i>
          <span>Path of a Request</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#path" class="nav-item">The Flow</a>
        </div>
      </div>

      <!-- Gotchas -->
      <div class="nav-section" data-section="gotchas">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="alert-triangle" class="w-4 h-4"></i>
          <span>Gotchas</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#gotchas" class="nav-item">Practical Problems</a>
        </div>
      </div>

      <!-- What's Hard -->
      <div class="nav-section" data-section="hard">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="flame" class="w-4 h-4"></i>
          <span>What's Hard</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#hard" class="nav-item">Real Complexity</a>
        </div>
      </div>

      <!-- When to Use -->
      <div class="nav-section" data-section="when">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="check-circle" class="w-4 h-4"></i>
          <span>When to Use</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#when" class="nav-item">Decision Criteria</a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">Claude Code adapts to your language, region, and time zone while code stays English.</div>
        </div>
      </section>

      <!-- Section 2: CORE ABSTRACTION + IMPLEMENTATION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Core Abstraction
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"Claude is multilingual. The interface is English. The code is English. The conversation is yours."</div>

          <div class="core-code">
            <button class="copy-btn" onclick="copyCode(this, '{ &quot;model&quot;: { &quot;responseLanguage&quot;: &quot;ja&quot; } }')">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <code>{ "model": { "responseLanguage": "ja" } }</code>
          </div>

          <div class="core-anchor">One setting. Claude responds in your language. Code remains universal.</div>
        </div>

        <p class="text-text-secondary mb-6">
          This is the internationalization philosophy: Claude adapts to YOUR context (language, culture, timezone) while maintaining universality where it matters (code syntax, variable names, error messages for logs). You get the best of both worlds.
        </p>

        <div class="quote-box">
          <div class="quote-text">"Claude Code 2.1.0 now supports multilingual response - configure the model to respond in your language. Japanese, Spanish, etc. Great for non-English developers."</div>
          <div class="quote-attribution">-- @bcherny, Claude Code Creator</div>
        </div>

        <h3 class="subsection-header">Language Quality Hierarchy</h3>

        <table class="tier-table">
          <thead>
            <tr>
              <th>Tier</th>
              <th>Languages</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Tier 1</strong></td>
              <td>English, Japanese, Spanish, French, German, Portuguese, Chinese</td>
              <td>Native-level fluency</td>
            </tr>
            <tr>
              <td><strong>Tier 2</strong></td>
              <td>Korean, Italian, Dutch, Russian, Arabic</td>
              <td>Strong fluency</td>
            </tr>
            <tr>
              <td><strong>Tier 3</strong></td>
              <td>Hindi, Turkish, Polish, Vietnamese, Thai</td>
              <td>Good fluency</td>
            </tr>
            <tr>
              <td><strong>Tier 4</strong></td>
              <td>Other languages</td>
              <td>Functional, may have limitations</td>
            </tr>
          </tbody>
        </table>

        <p class="text-text-secondary mb-6">
          When you prompt Claude in Japanese, Spanish, or German, it understands natively. It executes tools with English syntax (because the underlying filesystem and commands are English), but responds in your language. This asymmetry is intentional: Claude adapts where adaptation helps, stays universal where universality helps.
        </p>
      </section>

      <!-- Section 3: DESIGN DECISIONS -->
      <section id="why-multilingual" data-activity="decisions">
        <h2 class="section-title">
          <span class="section-number">3</span>
          Design Decisions
        </h2>

        <div class="decision-box">
          <div class="decision-why">WHY MULTILINGUAL RESPONSES?</div>
          <div class="decision-reasoning">
            Developers think faster in their native language. Explaining complex architecture in Japanese to a Japanese developer is more effective than forcing English. The cognitive overhead of translation is real and slows development.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Configure <code>responseLanguage</code> in settings.json. Prompt in your language naturally. Claude will respond in that language while keeping code universal. You think faster, Claude adapts.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-english-code">
          <div class="decision-why">WHY ENGLISH CODE?</div>
          <div class="decision-reasoning">
            Code is a universal language with English syntax. Variable names like <code>validateUserInput</code> work everywhere. Mixed-language code like <code>function 検証(入力)</code> breaks tooling, confuses collaborators, and creates maintenance nightmares. English code is the industry standard for a reason.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Comments can be localized (bilingual is best for teams). But variable names, function names, and file names stay English. Add this to your CLAUDE.md: "Variable names: English, camelCase. Comments: [Your language] with English translation."
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-regional-vms">
          <div class="decision-why">WHY REGIONAL VM SELECTION?</div>
          <div class="decision-reasoning">
            Anthropic's API servers are US-based. A developer in Tokyo experiences 300-500ms latency versus 50-100ms for someone in Virginia. This latency compounds across hundreds of tool calls per session. Regional VMs for mobile workflows put your terminal closer to YOU, even if API calls still go to the US.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              For mobile workflows, choose VM regions based on YOUR location, not Anthropic's. EU developers: Hetzner. Asia-Pacific: Vultr Tokyo. The VM-to-you latency matters more than VM-to-API latency for interactive work. For overnight Ralph loops, latency doesn't matter anyway.
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: FILE STRUCTURE / CONFIGURATION -->
      <section id="file-structure" data-activity="files">
        <h2 class="section-title">
          <span class="section-number">4</span>
          Configuration Files
        </h2>

        <div class="code-block" id="language-config">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment">// ~/.claude/settings.json - Language Configuration</span>
{
  <span class="string">"model"</span>: {
    <span class="string">"responseLanguage"</span>: <span class="string">"ja"</span>,           <span class="comment">// Japanese responses</span>
    <span class="string">"maintainCodeInEnglish"</span>: <span class="keyword">true</span>,    <span class="comment">// Code stays universal</span>
    <span class="string">"codeCommentLanguage"</span>: <span class="string">"bilingual"</span> <span class="comment">// ja + en comments</span>
  }
}</pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">High-Latency Region Configuration</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment">// ~/.claude/settings.json - Latency Mitigation</span>
{
  <span class="string">"behavior"</span>: {
    <span class="string">"streamResponses"</span>: <span class="keyword">true</span>,    <span class="comment">// Perceived latency lower</span>
    <span class="string">"apiTimeout"</span>: 180000,          <span class="comment">// 3 minutes for slow regions</span>
    <span class="string">"cacheResponses"</span>: <span class="keyword">true</span>       <span class="comment">// Reduce redundant calls</span>
  },
  <span class="string">"performance"</span>: {
    <span class="string">"mcpTimeout"</span>: 60000,           <span class="comment">// MCP server patience</span>
    <span class="string">"retries"</span>: 5,                   <span class="comment">// Network resilience</span>
    <span class="string">"retryDelay"</span>: <span class="string">"exponential"</span>   <span class="comment">// Backoff strategy</span>
  }
}</pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="claude-md-i18n">CLAUDE.md Localization Approaches</h3>

        <p class="text-text-secondary mb-4">Three approaches, from fully localized to hybrid:</p>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Approach 1: Full Native Language (Solo Developer)</span>

# プロジェクト: ユーザー管理システム

## 技術スタック
- Next.js 14, TypeScript, Prisma, PostgreSQL

## コマンド
- `npm run dev` - 開発サーバー起動
- `npm test` - テスト実行

## 規約
- すべてのAPIは src/api/ に配置
- 検証にはZodを使用</pre>
        </div>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Approach 2: Hybrid (Recommended for Teams)</span>

# Project: User Management System
# プロジェクト: ユーザー管理システム

## Tech Stack / 技術スタック
- Next.js 14, TypeScript, Prisma, PostgreSQL

## Commands / コマンド
- `npm run dev` - Dev server / 開発サーバー
- `npm test` - Run tests / テスト実行

## Conventions / 規約
- All APIs in src/api/ / すべてのAPIは src/api/
- Use Zod for validation / 検証にはZodを使用</pre>
        </div>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Approach 3: English Instructions, Native Context (Compliance)</span>

# Project: User Management System

## For Claude
- Respond in Japanese (日本語で応答)
- Write comments in Japanese and English
- Error messages in English for logging

## Domain Context (日本語)
このシステムは日本の銀行向けで、以下の規制に準拠:
- 個人情報保護法
- 電子帳簿保存法</pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">Regional VM Recommendations</h3>

        <table class="region-table">
          <thead>
            <tr>
              <th>Your Location</th>
              <th>Recommended Provider</th>
              <th>Region</th>
              <th>Cost/Month</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>US East</td>
              <td>Vultr, AWS</td>
              <td>NYC, Virginia</td>
              <td>$7+</td>
            </tr>
            <tr>
              <td>US West</td>
              <td>Vultr, AWS</td>
              <td>LAX, Oregon</td>
              <td>$7+</td>
            </tr>
            <tr>
              <td>Western Europe</td>
              <td>Hetzner</td>
              <td>Falkenstein, Nuremberg</td>
              <td>$13</td>
            </tr>
            <tr>
              <td>Northern Europe</td>
              <td>Hetzner</td>
              <td>Helsinki</td>
              <td>$13</td>
            </tr>
            <tr>
              <td>Asia Pacific</td>
              <td>Vultr, AWS</td>
              <td>Tokyo, Singapore</td>
              <td>$7+</td>
            </tr>
            <tr>
              <td>South America</td>
              <td>Vultr</td>
              <td>Sao Paulo</td>
              <td>$7+</td>
            </tr>
            <tr>
              <td>Oceania</td>
              <td>Vultr</td>
              <td>Sydney</td>
              <td>$7+</td>
            </tr>
          </tbody>
        </table>

        <div class="info-box">
          <div class="info-box-title">
            <i data-lucide="info" class="w-4 h-4"></i>
            Hetzner Advantage for EU
          </div>
          <div class="info-box-content">
            Hetzner CX31 (4 vCPU, 8GB) for ~$13/month offers the best price/performance in EU. Combined with GDPR-compliant data residency, it's the default choice for European developers.
          </div>
        </div>
      </section>

      <!-- Section 5: PATH OF A REQUEST -->
      <section id="path" data-activity="path">
        <h2 class="section-title">
          <span class="section-number">5</span>
          Path of a Multilingual Request
        </h2>

        <p class="text-text-secondary mb-6">
          Follow a non-English prompt through the system:
        </p>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content">You type: <code>このファイルのエラーを修正してください</code> (Please fix the errors in this file)</div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content">Claude understands the Japanese request natively (no translation step)</div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content">Claude executes <code>Read</code> tool with English file path</div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content">Claude analyzes code (English syntax, universal patterns)</div>
          </div>
          <div class="path-step">
            <div class="path-number">5</div>
            <div class="path-content">Claude executes <code>Edit</code> tool with English code changes</div>
          </div>
          <div class="path-step">
            <div class="path-number">6</div>
            <div class="path-content">Claude responds in Japanese: <code>エラーを修正しました。型エラーが15行目にありました...</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">7</div>
            <div class="path-content">If configured, adds bilingual comments to code</div>
          </div>
          <div class="path-step">
            <div class="path-number">8</div>
            <div class="path-content">Git commit message in configured language (or English for log parsing)</div>
          </div>
        </div>

        <h3 class="subsection-header">Time Zone Patterns: "Follow the Sun" Development</h3>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content"><strong>Tokyo (UTC+9)</strong>: 9 AM start work, 6 PM kick off overnight Ralph agents</div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content"><strong>Berlin (UTC+1)</strong>: 10 AM review Tokyo work, continue, 6 PM kick off agents</div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content"><strong>SF (UTC-8)</strong>: 8 AM review Berlin work, continue, 5 PM kick off agents</div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content">Tokyo wakes up to 8 hours of autonomous progress</div>
          </div>
        </div>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># plans/handoff.md - Updated by each developer before signing off</span>

## 2026-01-09 Handoff Notes

### Tokyo (Yuki) - 18:00 JST
<span class="keyword">Completed:</span>
- US-001: Database schema
- US-002: Login endpoint

<span class="keyword">In Progress:</span>
- US-003: Started, tests failing (see progress.txt)

<span class="keyword">For Next Developer:</span>
- Check error in auth/session.ts line 45
- May need to adjust Zod schema

<span class="keyword">Agents Status:</span>
- 3 agents running in tmux (feature-auth, feature-ui, tests)
- Expected to complete by 22:00 JST</pre>
        </div>
      </section>

      <!-- Section 6: GOTCHAS -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Gotchas
        </h2>

        <p class="text-text-secondary mb-6">
          Real problems international developers hit:
        </p>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            WebSearch is US-only
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> WebSearch tool returns error or is unavailable outside US</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Geographic restriction in Claude Code tool availability</div>
          <div class="gotcha-detail"><strong>Workarounds:</strong> Use WebFetch with specific URLs. Use Playwright MCP for browser automation. Use API-based alternatives for data retrieval.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Claude responds in English despite language config
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> You configured responseLanguage but Claude answers in English</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Config not being read, or explicit English prompt overriding setting</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Verify ~/.claude/settings.json syntax. Add explicit instruction to CLAUDE.md: "Respond in Japanese (日本語で応答してください)"</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            High latency in Asia-Pacific region
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Responses take 5-10 seconds, feels sluggish</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Distance to Anthropic's US-based API servers (300-500ms round trip)</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Enable streaming, increase timeouts, use Ralph loops for overnight work (latency doesn't matter while sleeping), batch operations to reduce round-trips</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Character encoding issues in terminal
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Japanese/Chinese/Korean characters display as boxes or garbage</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Terminal not configured for UTF-8</div>
          <div class="gotcha-detail"><strong>Fix:</strong> <code>export LANG=en_US.UTF-8</code> in ~/.zshrc. On macOS Terminal: Preferences > Profiles > Text > Character encoding = Unicode (UTF-8)</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Bilingual code comments get inconsistent
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Some files have bilingual comments, others don't</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Model doesn't maintain consistent behavior without explicit instruction</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Add to CLAUDE.md: "Write code comments in both English and Japanese. English first, Japanese translation on next line."</div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          Fundamental tensions in internationalization:
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Latency vs. Interactivity
          </div>
          <div class="hard-detail"><strong>The tension:</strong> API servers are US-based. Interactive workflows need low latency. Non-US developers can't have both without infrastructure changes Anthropic hasn't made.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Asia-Pacific developers report Claude "feels slow." Streaming helps perception but not reality.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Embrace async workflows (Ralph loops). Latency matters for interactive debugging, not for overnight builds. Restructure work to minimize interactive sessions.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Localization vs. Universality
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Localized comments help local developers but hurt international teams. English-only code is universal but creates cognitive overhead for non-native speakers.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Team debates about comment language. Inconsistent practices across the codebase.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Bilingual comments (English + local language) are verbose but serve both audiences. Make the tradeoff explicit in your CLAUDE.md.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Data Residency vs. Functionality
          </div>
          <div class="hard-detail"><strong>The tension:</strong> GDPR requires EU data residency. Some MCP servers and tools don't have EU endpoints. You can't use US-only features and claim compliance.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Compliance officers blocking tools. WebSearch unavailable. Enterprise features require on-premise deployment.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Accept reduced functionality for compliance. Document what you CAN'T use. Lobby Anthropic for regional endpoints.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Cultural Adaptation vs. Consistency
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Japanese teams prefer consensus and explanation before action. US teams prefer "ship fast, iterate." Same tool, different cultural fit.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Frustration with Claude's communication style. "Too terse" for some cultures, "too verbose" for others.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Customize CLAUDE.md per team culture. Japanese: "Explain reasoning before actions, use polite language." US: "Be direct, skip unnecessary explanation."</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO USE -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Use / When Not
        </h2>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              USE INTERNATIONALIZATION CONFIG WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Your primary language is not English (cognitive overhead reduction)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Working with global teams across time zones (follow-the-sun development)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Building products with localized domain knowledge (regulations, cultural context)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Documentation needs to be in local language for compliance</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>High latency region but using async patterns (Ralph loops)</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              DON'T INVEST HEAVILY WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>All team members comfortable with English (adds no value)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Need US-only features like WebSearch (won't work anyway)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Code will be open-sourced to global audience (English comments preferred)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Strictly real-time interactive debugging in high-latency region (frustrating)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Tier 4 language with quality concerns (test extensively first)</span>
            </div>
          </div>
        </div>

        <h3 class="subsection-header">Regional Decision Matrix</h3>

        <table class="region-table">
          <thead>
            <tr>
              <th>If You're In...</th>
              <th>Key Configuration</th>
              <th>Watch Out For</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Japan</strong></td>
              <td>responseLanguage: "ja", Vultr Tokyo VM</td>
              <td>300-500ms latency, use Ralph loops</td>
            </tr>
            <tr>
              <td><strong>Germany</strong></td>
              <td>responseLanguage: "de", Hetzner VM, GDPR config</td>
              <td>Data residency requirements, WebSearch unavailable</td>
            </tr>
            <tr>
              <td><strong>Brazil</strong></td>
              <td>responseLanguage: "pt", Vultr Sao Paulo</td>
              <td>LGPD compliance, variable latency</td>
            </tr>
            <tr>
              <td><strong>China</strong></td>
              <td>Enterprise on-premise deployment</td>
              <td>Local processing required, connectivity issues</td>
            </tr>
            <tr>
              <td><strong>Australia</strong></td>
              <td>Vultr Sydney VM</td>
              <td>Latency to US, use async patterns</td>
            </tr>
          </tbody>
        </table>
      </section>

    </main>

    <!-- Resizer between Main Panel and Activity Zone -->
    <div class="resizer" data-resizer="activity-zone" aria-label="Resize activity panel"></div>

    <!-- Activity Zone -->
    <aside class="activity-zone" id="activityZone">
      <div class="text-xs font-semibold text-text-muted uppercase tracking-wider mb-4">Operational Intelligence</div>

      <!-- ESSENCE SECTION -->
      <div class="activity-item inversion" data-section="essence">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if Claude only spoke English?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd design:</strong> All developers forced to prompt in English, think in English.<br>
          <strong>Why this fails:</strong> Non-native speakers experience 20-30% cognitive overhead. Complex architectural discussions suffer.<br>
          <strong>Hidden constraint revealed:</strong> Language isn't just interface - it's thought speed.
        </div>
      </div>

      <div class="activity-item minimal" data-section="essence">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">The irreducible core</div>
        <div class="text-text-secondary text-sm">
          <code style="background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;">{ "model": { "responseLanguage": "ja" } }</code><br><br>
          <strong>Essential:</strong> One setting. Native language responses.<br>
          <strong>Everything else:</strong> Refinement for teams, compliance, latency.
        </div>
      </div>

      <div class="activity-item warstory" data-section="essence">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Japanese Banking System</div>
        <div class="text-text-secondary text-sm">
          Financial system built for Japanese bank. CLAUDE.md had domain context in Japanese (regulations, compliance). Claude understood nuances English docs wouldn't capture. Result: fewer compliance review cycles.
        </div>
      </div>

      <!-- CORE SECTION -->
      <div class="activity-item gradient" data-section="core">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How language quality degrades by tier</div>
        <div class="text-text-secondary text-sm">
          <strong>Tier 1 (100%):</strong> Native-level, indistinguishable from human<br>
          <strong>Tier 2 (90%):</strong> Strong, occasional awkward phrasing<br>
          <strong>Tier 3 (75%):</strong> Good but noticeable non-native markers<br>
          <strong>Tier 4 (50-70%):</strong> Functional, may miss nuance<br><br>
          <em>Critical: Test your language before committing to production use.</em>
        </div>
      </div>

      <div class="activity-item analogy" data-section="core">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">i18n Config = Browser Locale</div>
        <div class="text-text-secondary text-sm">
          Browser locale setting → responseLanguage<br>
          Content language → Claude responses<br>
          UI language → Tool output (stays English)<br>
          Date/currency formats → Domain context in CLAUDE.md<br><br>
          <em>If you've built localized web apps, you understand this split.</em>
        </div>
      </div>

      <div class="activity-item invariant" data-section="core">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">INV-007: Context is configuration</div>
        <div class="text-text-secondary text-sm">
          Internationalization follows the same principle as CLAUDE.md, settings.json, and MCP: external configuration shapes behavior without changing code. Your language preference is just another context layer.
        </div>
      </div>

      <!-- DECISIONS SECTION -->
      <div class="activity-item constraint" data-section="decisions">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">One constraint: Code is universal</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> Code syntax is English-based<br>
          → Variable names stay English<br>
          → Function names stay English<br>
          → File names stay English<br>
          → Error messages stay English (for log parsing)<br>
          → Only comments/responses localize<br><br>
          One constraint, FIVE downstream decisions.
        </div>
      </div>

      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you localize variable names</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> You use <code>function 検証(入力)</code><br>
          <strong>THEN:</strong> Non-Japanese devs can't read it<br>
          <strong>THEN:</strong> Tooling/linters may break<br>
          <strong>THEN:</strong> Stack Overflow can't help you<br>
          <strong>FINALLY:</strong> Technical debt compounds<br><br>
          <em>The fix: English code, localized comments.</em>
        </div>
      </div>

      <div class="activity-item tradeoff" data-section="decisions">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">The Comment Language Dilemma</div>
        <div class="text-text-secondary text-sm">
          <strong>English only:</strong> Universal, but cognitive load for non-natives<br>
          <strong>Local only:</strong> Fast to write, but excludes global team<br>
          <strong>Bilingual:</strong> Verbose, but serves everyone<br><br>
          <em>Heuristic: Solo project = local. Team = bilingual. Open source = English.</em>
        </div>
      </div>

      <!-- FILES SECTION -->
      <div class="activity-item expertise" data-section="files">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How deep is your understanding?</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "How do I change language?" → responseLanguage setting<br>
          <strong>Intermediate:</strong> "Why does code stay English?" → Universality constraint<br>
          <strong>Advanced:</strong> "How do I handle bilingual teams?" → Hybrid CLAUDE.md<br>
          <strong>Staff:</strong> "GDPR implications?" → Data residency config<br>
          <strong>Expert:</strong> "Cultural adaptation patterns?" → Per-team CLAUDE.md
        </div>
      </div>

      <div class="activity-item composition" data-section="files">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">i18n + Ralph Loop</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> Ralph loops run overnight, timezone-aware scheduling.<br>
          <strong>Benefit:</strong> Tokyo developer sleeps, SF developer wakes to progress.<br>
          <strong>Danger:</strong> handoff.md must be readable by all regions. Use hybrid format.
        </div>
      </div>

      <div class="activity-item composition" data-section="files">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">i18n + Mobile Workflows</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> Regional VM + mobile SSH client + localized prompts.<br>
          <strong>Key insight:</strong> VM region matters for YOUR latency (terminal to VM), not API latency.<br>
          <strong>Recommendation:</strong> Pick VM closest to you, not to Anthropic.
        </div>
      </div>

      <div class="activity-item horizon" data-section="files">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">How judgment evolves on localization</div>
        <div class="text-text-secondary text-sm">
          <strong>Week 1:</strong> "English is fine, why bother?"<br>
          <strong>Week 4:</strong> "Complex architecture discussions feel slow"<br>
          <strong>Month 2:</strong> "Japanese prompts let me think faster"<br>
          <strong>Month 6:</strong> "Bilingual comments are worth the verbosity"<br><br>
          <em>Don't judge i18n by day 1 convenience.</em>
        </div>
      </div>

      <!-- PATH SECTION -->
      <div class="activity-item inversion" data-section="path">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if all teams worked the same timezone?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd design:</strong> Synchronous collaboration, real-time pairing.<br>
          <strong>Why this fails:</strong> 24-hour cycle means 16 hours of idle time.<br>
          <strong>Hidden constraint revealed:</strong> Follow-the-sun isn't overhead - it's 3x throughput.
        </div>
      </div>

      <div class="activity-item warstory" data-section="path">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Startup with Tokyo/Berlin/SF</div>
        <div class="text-text-secondary text-sm">
          3-region team using handoff.md pattern. Each developer: 8 hours active + kicks off Ralph for 8 hours. Result: 24-hour continuous development. Feature that would take "3 developer-weeks" shipped in 9 calendar days.
        </div>
      </div>

      <div class="activity-item effect" data-section="path">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="bar-chart-2" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Handoff documentation becomes institutional memory</div>
        <div class="text-text-secondary text-sm">
          At scale, handoff.md files become a project history. "Why did we make this decision?" - check handoff from 2 months ago. Unintended benefit: async communication creates better documentation than sync ever would.
        </div>
      </div>

      <div class="activity-item violation" data-section="path">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip handoff documentation</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> Tokyo dev doesn't update handoff.md<br>
          <strong>THEN:</strong> Berlin dev can't find in-progress work<br>
          <strong>THEN:</strong> Berlin wastes 2 hours duplicating effort<br>
          <strong>THEN:</strong> Git conflicts when Tokyo wakes up<br>
          <strong>FINALLY:</strong> Follow-the-sun becomes follow-the-chaos<br><br>
          <em>The fix: Handoff.md update is mandatory sign-off step.</em>
        </div>
      </div>

      <!-- GOTCHAS SECTION -->
      <div class="activity-item inflection" data-section="gotchas">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When latency flips from "fine" to "blocking"</div>
        <div class="text-text-secondary text-sm">
          <strong>&lt;2s:</strong> Feels interactive, full productivity<br>
          <strong>2-5s:</strong> Noticeable pause, slight friction<br>
          <strong>5-10s:</strong> Flow state breaks, frustration rises<br>
          <strong>&gt;10s:</strong> Interactive work becomes painful<br><br>
          <strong>THE INFLECTION:</strong> ~5s<br>
          <em>Detection: If you're checking phone while waiting, you've crossed it.</em>
        </div>
      </div>

      <div class="activity-item frontier" data-section="gotchas">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Regional API endpoints</div>
        <div class="text-text-secondary text-sm">
          Anthropic has no EU or APAC API endpoints. Enterprise customers can negotiate, but general users can't. This means GDPR compliance requires on-premise deployment, not just configuration. No timeline for regional endpoints.
        </div>
      </div>

      <div class="activity-item inversion" data-section="gotchas">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if UTF-8 wasn't default?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd design:</strong> Explicit encoding in every file, terminal, and tool.<br>
          <strong>Why UTF-8 works:</strong> Universal standard means Japanese, Arabic, and emoji all work.<br>
          <strong>Hidden assumption:</strong> When encoding breaks, check LANG env var first.
        </div>
      </div>

      <div class="activity-item tradeoff" data-section="gotchas">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">The WebSearch Dilemma</div>
        <div class="text-text-secondary text-sm">
          <strong>US users:</strong> WebSearch available, full functionality<br>
          <strong>Non-US users:</strong> WebSearch blocked, must use workarounds<br>
          <strong>Workarounds:</strong> WebFetch (specific URLs), Playwright MCP, API alternatives<br><br>
          <em>No perfect answer. Accept reduced capability or route through US proxy.</em>
        </div>
      </div>

      <!-- HARD SECTION -->
      <div class="activity-item constraint" data-section="hard">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">One constraint: US-based API servers</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> Anthropic API is US-hosted<br>
          → Non-US developers have higher latency<br>
          → Interactive workflows feel sluggish<br>
          → Async patterns (Ralph) become necessary<br>
          → Regional VMs help terminal latency only<br>
          → Full solution requires enterprise deployment<br><br>
          One infrastructure decision, FIVE downstream adaptations.
        </div>
      </div>

      <div class="activity-item gradient" data-section="hard">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How GDPR compliance fails gradually</div>
        <div class="text-text-secondary text-sm">
          <strong>Low risk:</strong> Using Claude for code (no PII)<br>
          <strong>Medium risk:</strong> Prompts include customer data<br>
          <strong>High risk:</strong> Logs retained without consent<br>
          <strong>Breach:</strong> Audit reveals cross-border data transfer<br><br>
          <em>Critical: Compliance isn't binary. Risk escalates with PII exposure.</em>
        </div>
      </div>

      <div class="activity-item analogy" data-section="hard">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Cultural Adaptation = Agile Localization</div>
        <div class="text-text-secondary text-sm">
          Japanese waterfall → Japanese CLAUDE.md (explain before acting)<br>
          US agile → US CLAUDE.md (ship fast, iterate)<br>
          German precision → German CLAUDE.md (comprehensive docs)<br><br>
          <em>If you've localized process for global teams, you understand cultural CLAUDE.md.</em>
        </div>
      </div>

      <div class="activity-item expertise" data-section="hard">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">Cultural Adaptation Understanding</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "Same tool everywhere, right?" → Wrong<br>
          <strong>Intermediate:</strong> "Why adapt CLAUDE.md?" → Communication styles differ<br>
          <strong>Advanced:</strong> "How to adapt?" → Observe team frustrations, adjust<br>
          <strong>Staff:</strong> "Multi-region teams?" → Hybrid CLAUDE.md per team<br>
          <strong>Expert:</strong> "Meta-patterns?" → Cultural adaptation IS localization
        </div>
      </div>

      <!-- WHEN SECTION -->
      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">If i18n config isn't enough</div>
        <div class="text-text-secondary text-sm">
          <strong>Need EU data residency?</strong><br>
          → Enterprise on-premise deployment<br><br>
          <strong>Need lower latency?</strong><br>
          → Restructure to async (Ralph loops)<br><br>
          <strong>Need full tool availability?</strong><br>
          → US-based development or proxy routing<br><br>
          <strong>Need team consistency?</strong><br>
          → Shared CLAUDE.md, not personal configs
        </div>
      </div>

      <div class="activity-item horizon" data-section="when">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">How i18n investment pays off</div>
        <div class="text-text-secondary text-sm">
          <strong>Day 1:</strong> "Configuration overhead, is this worth it?"<br>
          <strong>Week 2:</strong> "Prompting in Japanese feels natural"<br>
          <strong>Month 1:</strong> "Complex discussions are 30% faster"<br>
          <strong>Quarter 2:</strong> "New hires onboard faster in native language"<br><br>
          <em>i18n ROI is measured in months, not days.</em>
        </div>
      </div>

      <div class="activity-item warstory" data-section="when">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">GDPR-Compliant Startup</div>
        <div class="text-text-secondary text-sm">
          Berlin startup needed EU compliance. Deployed on-premise with Hetzner, configured all MCP servers for EU endpoints where available, accepted WebSearch limitation. Audit passed. Cost: 2 weeks setup, ongoing infrastructure overhead. Benefit: Operating legally.
        </div>
      </div>

      <div class="activity-item inversion" data-section="when">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if you ignored regionalization entirely?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd get:</strong> English-only, US-optimized experience<br>
          <strong>Problems:</strong> 30% slower for non-native speakers, no GDPR compliance, team friction<br>
          <strong>Hidden cost:</strong> Developer burnout from constant translation overhead<br><br>
          <em>Regionalization isn't optional - it's developer experience investment.</em>
        </div>
      </div>

      <div class="activity-item effect" data-section="when">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="bar-chart-2" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Regional teams develop distinct patterns</div>
        <div class="text-text-secondary text-sm">
          At scale, Tokyo team discovers patterns Berlin team never would. Japanese CLAUDE.md evolves differently. Cross-pollination becomes valuable: "Tokyo's approach to X works better, let's adapt." Diversity becomes advantage.
        </div>
      </div>

    </aside>
  </div>

  <script>
    /**
     * PanelResizer - Handles draggable panel dividers
     */
    class PanelResizer {
      constructor(resizerEl, config = {}) {
        this.resizer = resizerEl;
        this.config = {
          storageKey: 'panel-activity-zone-width',
          minWidth: 280,
          maxWidth: 900,
          defaultWidth: 480,
          ...config
        };

        this.isResizing = false;
        this.startX = 0;
        this.startWidth = 0;

        this.activityZone = document.querySelector('.activity-zone');
        this.mainContent = document.querySelector('.main-content');

        this.onMouseDown = this.onMouseDown.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
        this.onMouseUp = this.onMouseUp.bind(this);

        this.init();
      }

      init() {
        this.restoreWidth();
        this.resizer.addEventListener('mousedown', this.onMouseDown);
      }

      onMouseDown(e) {
        if (e.button !== 0) return;

        this.isResizing = true;
        this.startX = e.clientX;
        this.startWidth = this.activityZone.offsetWidth;

        this.resizer.classList.add('active');
        document.body.classList.add('resizing');

        document.addEventListener('mousemove', this.onMouseMove);
        document.addEventListener('mouseup', this.onMouseUp);

        e.preventDefault();
      }

      onMouseMove(e) {
        if (!this.isResizing) return;

        const delta = this.startX - e.clientX;
        const newWidth = this.startWidth + delta;

        const constrainedWidth = Math.max(
          this.config.minWidth,
          Math.min(this.config.maxWidth, newWidth)
        );

        this.activityZone.style.width = constrainedWidth + 'px';
        this.mainContent.style.marginRight = constrainedWidth + 'px';
        this.resizer.style.right = constrainedWidth + 'px';
      }

      onMouseUp(e) {
        if (!this.isResizing) return;

        this.isResizing = false;

        this.resizer.classList.remove('active');
        document.body.classList.remove('resizing');

        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);

        this.saveWidth();
      }

      saveWidth() {
        const width = this.activityZone.offsetWidth;
        localStorage.setItem(this.config.storageKey, JSON.stringify({
          width,
          timestamp: Date.now()
        }));
      }

      restoreWidth() {
        try {
          const stored = localStorage.getItem(this.config.storageKey);
          if (stored) {
            const { width } = JSON.parse(stored);
            if (width >= this.config.minWidth && width <= this.config.maxWidth) {
              this.activityZone.style.width = width + 'px';
              this.mainContent.style.marginRight = width + 'px';
              this.resizer.style.right = width + 'px';
            }
          }
        } catch (e) {
          console.warn('Failed to restore panel width:', e);
        }
      }

      destroy() {
        this.resizer.removeEventListener('mousedown', this.onMouseDown);
        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);
      }
    }

    // Auto-initialize resizers
    document.addEventListener('DOMContentLoaded', () => {
      const resizers = document.querySelectorAll('[data-resizer]');
      resizers.forEach(resizer => new PanelResizer(resizer));
    });

    // Initialize Lucide icons
    lucide.createIcons();

    // Navigation toggle
    function toggleSection(header) {
      const section = header.closest('.nav-section');
      section.classList.toggle('expanded');
      const children = section.querySelector('.nav-children');
      children.classList.toggle('expanded');
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const nav = document.getElementById('leftNav');
      nav.classList.toggle('open');
    }

    // Copy functionality
    function copyCode(btn, text) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check" class="w-3 h-3"></i> Copied!';
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = originalText;
          lucide.createIcons();
        }, 2000);
      });
    }

    function copyCodeBlock(btn) {
      const codeBlock = btn.closest('.code-block');
      const pre = codeBlock.querySelector('pre');
      const text = pre.textContent;
      copyCode(btn, text);
    }

    // Scroll-sync with GSAP ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    const sections = document.querySelectorAll('[data-activity]');
    const activityItems = document.querySelectorAll('.activity-item');

    sections.forEach(section => {
      ScrollTrigger.create({
        trigger: section,
        start: 'top 40%',
        end: 'bottom 40%',
        onEnter: () => activateSection(section.dataset.activity),
        onEnterBack: () => activateSection(section.dataset.activity),
      });
    });

    function activateSection(sectionName) {
      activityItems.forEach(item => {
        if (item.dataset.section === sectionName) {
          item.classList.add('active');
          gsap.to(item, {
            opacity: 1,
            y: -2,
            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
            duration: 0.3,
            ease: 'power2.out'
          });
        } else {
          item.classList.remove('active');
          gsap.to(item, {
            opacity: 0.5,
            y: 0,
            boxShadow: 'none',
            duration: 0.3,
            ease: 'power2.out'
          });
        }
      });

      document.querySelectorAll('.nav-section-header').forEach(header => {
        header.classList.remove('active');
      });
      const activeNav = document.querySelector(`[data-section="${sectionName}"] .nav-section-header`);
      if (activeNav) {
        activeNav.classList.add('active');
      }
    }

    // Initialize first section as active
    activateSection('essence');

    // Smooth scroll for nav links
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.nav-item').forEach(l => l.classList.remove('active'));
          link.classList.add('active');
        }
      });
    });

    // Brushing interaction
    activityItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = 'rgba(13, 147, 115, 0.05)';
          relatedSection.style.transition = 'background-color 0.3s ease';
        }
      });

      item.addEventListener('mouseleave', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = '';
        }
      });
    });
  </script>
</body>
</html>
