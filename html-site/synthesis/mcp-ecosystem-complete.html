<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MCP Ecosystem | Claude Code Documentation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- GSAP for scroll-sync -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Tailwind Config with Design Tokens -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-base': '#ffffff',
            'bg-subtle': '#fafafa',
            'bg-muted': '#f4f4f5',
            'text-primary': '#18181b',
            'text-secondary': '#3f3f46',
            'text-muted': '#71717a',
            'accent': '#0D9373',
            'accent-light': '#10b981',
            'accent-bg': '#ecfdf5',
            'border': '#e4e4e7',
            // Activity Zone content type colors (Original 6)
            'az-invariant': '#3b82f6',    // Blue
            'az-effect': '#f59e0b',       // Amber
            'az-composition': '#8b5cf6',  // Purple
            'az-frontier': '#ef4444',     // Red
            'az-warstory': '#10b981',     // Green
            'az-alternative': '#6b7280',  // Gray
            // Activity Zone generative content types (New 10)
            'az-inversion': '#4f46e5',    // Indigo
            'az-constraint': '#8b5cf6',   // Violet
            'az-gradient': '#f43f5e',     // Rose
            'az-horizon': '#06b6d4',      // Cyan
            'az-violation': '#f97316',    // Orange
            'az-tradeoff': '#f59e0b',     // Amber
            'az-analogy': '#d946ef',      // Fuchsia
            'az-expertise': '#10b981',    // Emerald
            'az-minimal': '#84cc16',      // Lime
            'az-inflection': '#eab308',   // Yellow
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Fira Code', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    /* Base Styles */
    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    [id] {
      scroll-margin-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: #ffffff;
      color: #18181b;
      line-height: 1.7;
    }

    /* Three Panel Layout */
    .three-panel-layout {
      min-height: 100vh;
      position: relative;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: #ffffff;
      border-bottom: 1px solid #e4e4e7;
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 24px;
    }

    /* Left Navigation - 240px fixed */
    .left-nav {
      position: fixed;
      top: 56px;
      left: 0;
      width: 240px;
      height: calc(100vh - 56px);
      border-right: 1px solid #e4e4e7;
      background: #ffffff;
      overflow-y: auto;
      padding: 16px 0;
      z-index: 40;
    }

    .nav-section {
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 500;
      color: #3f3f46;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.15s;
    }

    .nav-section-header:hover {
      background: #f4f4f5;
    }

    .nav-section-header.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-item {
      display: block;
      padding: 6px 12px 6px 44px;
      font-size: 14px;
      color: #71717a;
      text-decoration: none;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-item:hover {
      color: #3f3f46;
      background: #f4f4f5;
    }

    .nav-item.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-children {
      display: none;
      overflow: hidden;
    }

    .nav-children.expanded {
      display: block;
    }

    .nav-chevron {
      transition: transform 0.2s;
    }

    .nav-section.expanded .nav-chevron {
      transform: rotate(90deg);
    }

    /* Main Content - Flexible, margins for fixed sidebars */
    .main-content {
      margin-left: 240px;
      margin-right: 480px;
      margin-top: 56px;
      padding: 48px 48px;
      min-width: 400px;
    }

    /* Activity Zone - 480px fixed */
    .activity-zone {
      position: fixed;
      top: 56px;
      right: 0;
      width: 480px;
      height: calc(100vh - 56px);
      border-left: 1px dashed #e4e4e7;
      background: #fafafa;
      overflow-y: auto;
      padding: 24px 20px;
      z-index: 40;
    }

    /* Responsive: Hide Activity Zone below 1400px */
    @media (max-width: 1400px) {
      .activity-zone {
        display: none;
      }
      .main-content {
        margin-right: 0;
        padding: 40px 32px;
      }
    }

    /* Responsive: Hide Left Nav below 768px */
    @media (max-width: 768px) {
      .left-nav {
        display: none;
      }
      .left-nav.open {
        display: block;
        position: fixed;
        top: 56px;
        left: 0;
        right: 0;
        bottom: 0;
        background: #ffffff;
        z-index: 50;
        overflow-y: auto;
      }
      .main-content {
        margin-left: 0;
        padding: 24px 16px;
        min-width: auto;
      }
    }

    /* Resizer */
    .resizer {
      position: fixed;
      top: 56px;
      right: 480px;
      width: 6px;
      height: calc(100vh - 56px);
      cursor: col-resize;
      background: transparent;
      z-index: 50;
      transition: background 0.15s ease;
    }

    .resizer:hover {
      background: rgba(13, 147, 115, 0.15);
    }

    .resizer.active {
      background: rgba(13, 147, 115, 0.25);
    }

    body.resizing {
      user-select: none;
      cursor: col-resize !important;
    }

    body.resizing * {
      cursor: col-resize !important;
    }

    @media (max-width: 1400px) {
      .resizer {
        display: none;
      }
    }

    /* Activity Zone Items */
    .activity-item {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      background: #ffffff;
      border: 1px solid #e4e4e7;
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .activity-item.active {
      opacity: 1;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .activity-item:hover {
      opacity: 1;
    }

    .activity-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Activity Zone content type borders */
    .activity-item.invariant { border-left: 4px solid #3b82f6; }
    .activity-item.effect { border-left: 4px solid #f59e0b; }
    .activity-item.composition { border-left: 4px solid #8b5cf6; }
    .activity-item.frontier { border-left: 4px solid #ef4444; }
    .activity-item.warstory { border-left: 4px solid #10b981; }
    .activity-item.alternative { border-left: 4px solid #6b7280; }
    .activity-item.inversion { border-left: 4px solid #4f46e5; }
    .activity-item.constraint { border-left: 4px solid #8b5cf6; }
    .activity-item.gradient { border-left: 4px solid #f43f5e; }
    .activity-item.horizon { border-left: 4px solid #06b6d4; }
    .activity-item.violation { border-left: 4px solid #f97316; }
    .activity-item.tradeoff { border-left: 4px solid #f59e0b; }
    .activity-item.analogy { border-left: 4px solid #d946ef; }
    .activity-item.expertise { border-left: 4px solid #10b981; }
    .activity-item.minimal { border-left: 4px solid #84cc16; }
    .activity-item.inflection { border-left: 4px solid #eab308; }

    /* Main Content Components */
    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: #0D9373;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      border-radius: 50%;
      margin-right: 12px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: #18181b;
      margin-bottom: 20px;
      margin-top: 56px;
      display: flex;
      align-items: center;
    }

    .section-title:first-child {
      margin-top: 0;
    }

    /* Essence Box */
    .essence-box {
      background: linear-gradient(135deg, #18181b 0%, #27272a 100%);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 40px;
    }

    .essence-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #10b981;
      margin-bottom: 12px;
    }

    .essence-text {
      font-size: 22px;
      font-weight: 500;
      color: #ffffff;
      line-height: 1.4;
    }

    /* Core Abstraction Box */
    .core-abstraction {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .core-philosophy {
      font-size: 16px;
      color: #3f3f46;
      margin-bottom: 16px;
      font-style: italic;
    }

    .core-code {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 16px;
      overflow-x: auto;
    }

    .core-code code {
      font-family: 'Fira Code', monospace;
      font-size: 15px;
      color: #10b981;
      white-space: nowrap;
    }

    .core-anchor {
      font-size: 14px;
      color: #71717a;
      text-align: center;
    }

    /* Decision Box */
    .decision-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .decision-why {
      font-size: 16px;
      font-weight: 600;
      color: #0D9373;
      margin-bottom: 12px;
    }

    .decision-reasoning {
      font-size: 14px;
      color: #3f3f46;
      margin-bottom: 16px;
    }

    .decision-implication {
      background: #f4f4f5;
      border-radius: 8px;
      padding: 16px;
    }

    .decision-implication-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: #71717a;
      margin-bottom: 8px;
    }

    /* Code Blocks */
    .code-block {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 24px;
      position: relative;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
      color: #e4e4e7;
      line-height: 1.6;
    }

    .code-block .comment { color: #6b7280; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #10b981; }
    .code-block .variable { color: #60a5fa; }
    .code-block .decorator { color: #fbbf24; }

    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #3f3f46;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: background 0.15s;
    }

    .copy-btn:hover {
      background: #52525b;
    }

    /* Path Steps */
    .path-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .path-step {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .path-step:last-child {
      margin-bottom: 0;
    }

    .path-number {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: #0D9373;
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .path-content {
      flex: 1;
      font-size: 14px;
      color: #3f3f46;
    }

    .path-content code {
      background: #e4e4e7;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }

    /* Gotcha Box */
    .gotcha-box {
      background: #fffbeb;
      border: 1px solid #fcd34d;
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .gotcha-title {
      font-weight: 600;
      color: #92400e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .gotcha-detail {
      font-size: 14px;
      color: #78350f;
      margin-bottom: 8px;
    }

    .gotcha-detail strong {
      color: #92400e;
    }

    /* Hard Box */
    .hard-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .hard-title {
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hard-detail {
      font-size: 14px;
      color: #7f1d1d;
      margin-bottom: 8px;
    }

    /* When To Use Grid */
    .when-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    @media (max-width: 900px) {
      .when-grid {
        grid-template-columns: 1fr;
      }
    }

    .when-use {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 24px;
    }

    .when-not {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 24px;
    }

    .when-title {
      font-weight: 600;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .when-use .when-title { color: #166534; }
    .when-not .when-title { color: #991b1b; }

    .when-item {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .when-use .when-item { color: #166534; }
    .when-not .when-item { color: #991b1b; }

    /* Component Box */
    .component-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .component-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .component-icon {
      width: 40px;
      height: 40px;
      background: #ecfdf5;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0D9373;
    }

    .component-title {
      font-size: 18px;
      font-weight: 600;
      color: #18181b;
    }

    .component-subtitle {
      font-size: 13px;
      color: #71717a;
    }

    /* Comparison Table */
    .compare-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 24px;
      font-size: 14px;
    }

    .compare-table th {
      background: #f4f4f5;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      color: #3f3f46;
      border-bottom: 2px solid #e4e4e7;
    }

    .compare-table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e4e4e7;
      color: #3f3f46;
    }

    .compare-table tr:hover {
      background: #fafafa;
    }

    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: none;
      padding: 8px;
      background: none;
      border: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #fafafa;
    }

    ::-webkit-scrollbar-thumb {
      background: #d4d4d8;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1aa;
    }

    /* Keyboard shortcut hint */
    .kbd {
      display: inline-flex;
      align-items: center;
      padding: 2px 6px;
      background: #f4f4f5;
      border: 1px solid #e4e4e7;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      color: #71717a;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
      <i data-lucide="menu" class="w-5 h-5 text-text-secondary"></i>
    </button>
    <div class="flex items-center gap-3">
      <i data-lucide="terminal" class="w-5 h-5 text-accent"></i>
      <span class="font-semibold text-text-primary">Claude Code</span>
    </div>
    <div class="flex-1 flex justify-center">
      <button class="flex items-center gap-2 px-4 py-2 bg-bg-muted rounded-lg text-text-muted text-sm hover:bg-border transition-colors">
        <i data-lucide="search" class="w-4 h-4"></i>
        <span>Search documentation...</span>
        <span class="kbd">Cmd+K</span>
      </button>
    </div>
    <div class="flex items-center gap-4">
      <a href="#" class="text-sm text-text-muted hover:text-text-primary transition-colors">Support</a>
      <button class="p-2 hover:bg-bg-muted rounded-lg transition-colors" aria-label="Toggle theme">
        <i data-lucide="sun" class="w-4 h-4 text-text-muted"></i>
      </button>
    </div>
  </header>

  <div class="three-panel-layout">
    <!-- Left Navigation -->
    <nav class="left-nav" id="leftNav">
      <div class="px-4 mb-4">
        <span class="text-xs font-semibold text-text-muted uppercase tracking-wider">MCP Ecosystem</span>
      </div>

      <!-- Essence -->
      <div class="nav-section expanded" data-section="essence">
        <div class="nav-section-header active" onclick="toggleSection(this)">
          <i data-lucide="zap" class="w-4 h-4"></i>
          <span>Essence</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#essence" class="nav-item active">The 15-Word Summary</a>
        </div>
      </div>

      <!-- Core Abstraction -->
      <div class="nav-section expanded" data-section="core">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="box" class="w-4 h-4"></i>
          <span>Protocol Foundation</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#core-abstraction" class="nav-item">The USB-C Analogy</a>
          <a href="#three-primitives" class="nav-item">Three Primitives</a>
        </div>
      </div>

      <!-- SDK Comparison -->
      <div class="nav-section expanded" data-section="sdks">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="code-2" class="w-4 h-4"></i>
          <span>SDK Implementations</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#python-sdk" class="nav-item">Python SDK (FastMCP)</a>
          <a href="#typescript-sdk" class="nav-item">TypeScript SDK</a>
          <a href="#sdk-comparison" class="nav-item">Comparison Matrix</a>
        </div>
      </div>

      <!-- Agent Mail -->
      <div class="nav-section" data-section="agentmail">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="mail" class="w-4 h-4"></i>
          <span>Agent Mail</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#agent-mail" class="nav-item">Coordination Layer</a>
          <a href="#file-reservations" class="nav-item">File Reservations</a>
        </div>
      </div>

      <!-- Integration Path -->
      <div class="nav-section" data-section="path">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="git-branch" class="w-4 h-4"></i>
          <span>Integration Path</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#path" class="nav-item">The Flow</a>
        </div>
      </div>

      <!-- Gotchas -->
      <div class="nav-section" data-section="gotchas">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="alert-triangle" class="w-4 h-4"></i>
          <span>Gotchas</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#gotchas" class="nav-item">Practical Problems</a>
        </div>
      </div>

      <!-- What's Hard -->
      <div class="nav-section" data-section="hard">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="flame" class="w-4 h-4"></i>
          <span>What's Hard</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#hard" class="nav-item">Real Complexity</a>
        </div>
      </div>

      <!-- When to Use -->
      <div class="nav-section" data-section="when">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="check-circle" class="w-4 h-4"></i>
          <span>When to Use</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#when" class="nav-item">Decision Criteria</a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">MCP standardizes AI-to-external-system integration: one protocol, any tool, every platform.</div>
        </div>
      </section>

      <!-- Section 2: CORE ABSTRACTION + IMPLEMENTATION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Protocol Foundation
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"Think of MCP like a USB-C port for AI applications. Just as USB-C provides a standardized way to connect electronic devices, MCP provides a standardized way to connect AI applications to external systems."</div>

          <div class="core-code">
            <button class="copy-btn" onclick="copyCode(this, 'MCP = JSON-RPC 2.0 + Tools + Resources + Prompts')">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <code>MCP = JSON-RPC 2.0 + Tools + Resources + Prompts</code>
          </div>

          <div class="core-anchor">That's the whole protocol. Everything else is transport and implementation.</div>
        </div>

        <p class="text-text-secondary mb-6">
          Before MCP, every AI integration required custom code. Database connector? Custom code. API wrapper? Custom code. File system access? More custom code. Each application built its own integrations, incompatible with every other application.
        </p>

        <p class="text-text-secondary mb-6">
          MCP changes this. Build an MCP server once, and it works with Claude Code, Claude Desktop, VS Code, and any other MCP-compatible application. The server exposes capabilities; the client discovers and uses them.
        </p>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="three-primitives">The Three Primitives</h3>

        <div class="component-box">
          <div class="component-header">
            <div class="component-icon">
              <i data-lucide="wrench" class="w-5 h-5"></i>
            </div>
            <div>
              <div class="component-title">Tools</div>
              <div class="component-subtitle">Model-controlled functions (think: POST endpoints)</div>
            </div>
          </div>
          <p class="text-text-secondary text-sm mb-4">
            Tools are executable functions the AI decides when to call. They can have side effects: query databases, send emails, create files, call APIs.
          </p>
          <div class="code-block">
            <pre><span class="decorator">@mcp.tool()</span>
<span class="keyword">def</span> <span class="variable">search_flights</span>(origin: str, destination: str, date: str) -> str:
    <span class="string">"""Search for available flights."""</span>
    <span class="keyword">return</span> flight_api.search(origin, destination, date)</pre>
          </div>
        </div>

        <div class="component-box">
          <div class="component-header">
            <div class="component-icon">
              <i data-lucide="database" class="w-5 h-5"></i>
            </div>
            <div>
              <div class="component-title">Resources</div>
              <div class="component-subtitle">Application-controlled data (think: GET endpoints)</div>
            </div>
          </div>
          <p class="text-text-secondary text-sm mb-4">
            Resources expose read-only data via URI patterns. The application controls when they're read, not the AI. Think config files, documentation, database schemas.
          </p>
          <div class="code-block">
            <pre><span class="decorator">@mcp.resource("config://settings")</span>
<span class="keyword">def</span> <span class="variable">get_settings</span>() -> str:
    <span class="string">"""Return application configuration."""</span>
    <span class="keyword">return</span> json.dumps(app_settings)</pre>
          </div>
        </div>

        <div class="component-box">
          <div class="component-header">
            <div class="component-icon">
              <i data-lucide="message-square" class="w-5 h-5"></i>
            </div>
            <div>
              <div class="component-title">Prompts</div>
              <div class="component-subtitle">User-controlled templates (think: slash commands)</div>
            </div>
          </div>
          <p class="text-text-secondary text-sm mb-4">
            Prompts are reusable interaction patterns initiated by users. They structure complex workflows into parameterized templates.
          </p>
          <div class="code-block">
            <pre><span class="decorator">@mcp.prompt()</span>
<span class="keyword">def</span> <span class="variable">code_review</span>(code: str, language: str = <span class="string">"python"</span>) -> str:
    <span class="string">"""Template for code review requests."""</span>
    <span class="keyword">return</span> <span class="string">f"Please review this {language} code:\n\n{code}"</span></pre>
          </div>
        </div>
      </section>

      <!-- Section 3: SDK IMPLEMENTATIONS -->
      <section id="python-sdk" data-activity="sdks">
        <h2 class="section-title">
          <span class="section-number">3</span>
          SDK Implementations
        </h2>

        <p class="text-text-secondary mb-6">
          MCP provides official SDKs for multiple languages, with Python and TypeScript as the primary implementations. Each has distinct strengths.
        </p>

        <h3 class="font-semibold text-lg mb-4">Python SDK (FastMCP)</h3>

        <p class="text-text-secondary mb-4">
          The Python SDK uses decorator-based syntax for rapid development. It's the fastest path from idea to working server.
        </p>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="keyword">from</span> mcp.server.fastmcp <span class="keyword">import</span> FastMCP
<span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel

mcp = FastMCP(<span class="string">"WeatherServer"</span>)

<span class="keyword">class</span> <span class="variable">WeatherData</span>(BaseModel):
    temperature: float
    conditions: str
    humidity: int

<span class="decorator">@mcp.tool()</span>
<span class="keyword">async def</span> <span class="variable">get_weather</span>(city: str) -> WeatherData:
    <span class="string">"""Get current weather for a city."""</span>
    data = <span class="keyword">await</span> weather_api.fetch(city)
    <span class="keyword">return</span> WeatherData(**data)

<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    mcp.run()  <span class="comment"># Default: stdio transport</span></pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="typescript-sdk">TypeScript SDK</h3>

        <p class="text-text-secondary mb-4">
          The TypeScript SDK provides compile-time type safety with Zod schema validation. It's the reference implementation used by Claude Desktop.
        </p>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="keyword">import</span> { McpServer } <span class="keyword">from</span> <span class="string">"@modelcontextprotocol/server/mcp.js"</span>;
<span class="keyword">import</span> { z } <span class="keyword">from</span> <span class="string">"zod"</span>;

<span class="keyword">const</span> server = <span class="keyword">new</span> McpServer({
  name: <span class="string">"weather-server"</span>,
  version: <span class="string">"1.0.0"</span>
});

server.registerTool(
  <span class="string">"get_weather"</span>,
  {
    description: <span class="string">"Get current weather for a city"</span>,
    inputSchema: {
      city: z.string().describe(<span class="string">"City name"</span>),
      units: z.enum([<span class="string">"metric"</span>, <span class="string">"imperial"</span>]).optional()
    }
  },
  <span class="keyword">async</span> ({ city, units }) => ({
    content: [{ type: <span class="string">"text"</span>, text: <span class="string">`Weather in ${city}...`</span> }]
  })
);</pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="sdk-comparison">SDK Comparison Matrix</h3>

        <table class="compare-table">
          <thead>
            <tr>
              <th>Aspect</th>
              <th>Python SDK</th>
              <th>TypeScript SDK</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Type Safety</strong></td>
              <td>Runtime via Pydantic</td>
              <td>Compile-time via TypeScript + Zod</td>
            </tr>
            <tr>
              <td><strong>Async Model</strong></td>
              <td>asyncio</td>
              <td>Native async/await</td>
            </tr>
            <tr>
              <td><strong>Primary Use</strong></td>
              <td>Scripts, notebooks, backend</td>
              <td>Claude Desktop, VS Code, web</td>
            </tr>
            <tr>
              <td><strong>Learning Curve</strong></td>
              <td>Lower (decorator-based)</td>
              <td>Higher (TS + Zod)</td>
            </tr>
            <tr>
              <td><strong>Ecosystem</strong></td>
              <td>pip, ML libraries</td>
              <td>npm, browser compat</td>
            </tr>
            <tr>
              <td><strong>Stars</strong></td>
              <td>21.2k+</td>
              <td>11.4k+</td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- Section 4: AGENT MAIL -->
      <section id="agent-mail" data-activity="agentmail">
        <h2 class="section-title">
          <span class="section-number">4</span>
          Agent Mail: Coordination Layer
        </h2>

        <p class="text-text-secondary mb-6">
          When multiple agents work on the same codebase, they need coordination. Agent Mail provides the infrastructure: identity, messaging, and file reservations.
        </p>

        <div class="decision-box">
          <div class="decision-why">WHY AGENT MAIL EXISTS</div>
          <div class="decision-reasoning">
            Multiple agents editing the same file simultaneously leads to lost work. Agent A edits <code>api/routes.py</code>, Agent B edits the same file unaware of A, B's commit overwrites A's work. Human spends hours reconciling.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              At Level 5+ (multi-instance coordination), you need external coordination infrastructure. Agent Mail is that infrastructure. It's the "post office" for your agent village.
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="file-reservations">File Reservations (Critical)</h3>

        <p class="text-text-secondary mb-4">
          File reservations are <strong>advisory locks</strong>, not enforced locks. They signal "I'm working here" rather than blocking access.
        </p>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Step 1: Reserve files before editing</span>
file_reservation_paths(
    project_key=<span class="string">"/my/project"</span>,
    agent_name=<span class="string">"GreenCastle"</span>,
    paths=[<span class="string">"src/api/**/*.py"</span>, <span class="string">"tests/api/**/*.py"</span>],
    ttl_seconds=<span class="variable">3600</span>,           <span class="comment"># 1 hour lease</span>
    exclusive=<span class="keyword">True</span>,             <span class="comment"># No shared access</span>
    reason=<span class="string">"feature-123"</span>        <span class="comment"># Link to task/issue</span>
)

<span class="comment"># Step 2: Do work...</span>

<span class="comment"># Step 3: Release when done</span>
release_file_reservations(
    project_key=<span class="string">"/my/project"</span>,
    agent_name=<span class="string">"GreenCastle"</span>
)</pre>
        </div>

        <div class="component-box">
          <div class="component-header">
            <div class="component-icon">
              <i data-lucide="users" class="w-5 h-5"></i>
            </div>
            <div>
              <div class="component-title">Agent Identity</div>
              <div class="component-subtitle">Memorable adjective+noun names</div>
            </div>
          </div>
          <p class="text-text-secondary text-sm">
            Agents register with memorable names like GreenCastle, RedCat, BlueLake. This makes logs readable and conversations natural. Names like "steve" or "claude" are rejected.
          </p>
        </div>

        <div class="component-box">
          <div class="component-header">
            <div class="component-icon">
              <i data-lucide="inbox" class="w-5 h-5"></i>
            </div>
            <div>
              <div class="component-title">Threaded Messaging</div>
              <div class="component-subtitle">Asynchronous polling-based mail</div>
            </div>
          </div>
          <p class="text-text-secondary text-sm">
            Messages are grouped by thread_id, enabling feature-focused conversations. Agents check mail between work steps, not real-time interruptions. Full-text search across all conversations.
          </p>
        </div>
      </section>

      <!-- Section 5: PATH OF INTEGRATION -->
      <section id="path" data-activity="path">
        <h2 class="section-title">
          <span class="section-number">5</span>
          The Integration Path
        </h2>

        <p class="text-text-secondary mb-6">
          How MCP components connect to orchestration patterns (Ralph, Gas Town, CC Mirror):
        </p>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content">You identify a capability Claude Code lacks (database access, API, verification)</div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content">Choose SDK: Python for rapid prototyping, TypeScript for type safety</div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content">Implement tools with <code>@mcp.tool()</code> decorators (Python) or <code>registerTool()</code> (TS)</div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content">Test with MCP Inspector: <code>npx @modelcontextprotocol/inspector</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">5</div>
            <div class="path-content">Register in Claude Code: <code>claude mcp add --transport stdio my-server -- uv run server.py</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">6</div>
            <div class="path-content">Tools now available in Claude Code, Ralph loops, Gas Town agents</div>
          </div>
          <div class="path-step">
            <div class="path-number">7</div>
            <div class="path-content">For multi-agent: Add Agent Mail for coordination</div>
          </div>
          <div class="path-step">
            <div class="path-number">8</div>
            <div class="path-content">Agents reserve files, send messages, coordinate asynchronously</div>
          </div>
        </div>
      </section>

      <!-- Section 6: GOTCHAS -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Gotchas
        </h2>

        <p class="text-text-secondary mb-6">
          Real problems you'll hit, with concrete numbers and fixes:
        </p>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Stdout pollution breaks stdio transport
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Server crashes with "Error: write EPIPE" or garbled output</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Using <code>print()</code> or <code>console.log()</code> writes to stdout, corrupting JSON-RPC</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Use <code>print(..., file=sys.stderr)</code> in Python, <code>console.error()</code> in TypeScript. NEVER log to stdout in stdio servers.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Tool returns empty content
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Tool executes but Claude sees nothing</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Return structure incorrect - returning string instead of content array</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Always return <code>{"content": [{"type": "text", "text": "..."}]}</code></div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Server not appearing in Claude Code
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Tools not visible after configuration</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Relative paths in config, or JSON syntax errors</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Use absolute paths. Validate JSON with <code>cat ~/.claude.json | jq .</code>. Restart Claude Code completely (Cmd+Q).</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            FILE_RESERVATION_CONFLICT (Agent Mail)
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Cannot reserve files, another agent holds exclusive lock</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Overlapping paths with exclusive reservation</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Wait for TTL expiry, use non-exclusive mode, or coordinate via messaging. Check who holds reservation at <code>/mail/reservations</code>.</div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          These are fundamental tensions, not bugs to fix:
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Context Cost of Tool Schemas
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Every MCP tool adds its schema to Claude's context. 10 tools might add 2-3K tokens. 50 tools start degrading performance.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Quality drops with many tools enabled, even if most aren't used.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Use tool profiles (Agent Mail's <code>--profile messaging</code> cuts 70%). Only enable tools you'll actually use. Build specialized servers, not monolithic ones.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Advisory vs. Enforced Coordination
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Agent Mail reservations are advisory signals, not hard locks. A misbehaving agent can ignore them.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Occasional conflicts when agents don't check reservations before editing.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Install pre-commit guards (<code>mcp-agent-mail guard install</code>). Train agents to ALWAYS check reservations first. Accept that perfect coordination requires trust in the agent behavior.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Transport Complexity
          </div>
          <div class="hard-detail"><strong>The tension:</strong> STDIO is simplest but single-client only. HTTP enables remote/multi-client but adds auth, sessions, CORS complexity.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Works locally, breaks in production. Session timeouts, authentication failures.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Start with STDIO. Only move to HTTP when you need remote access or multiple clients. Test thoroughly before deploying remote servers.</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO USE -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Use / When Not
        </h2>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              USE MCP WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Claude Code needs database access (SQL queries, schema inspection)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Custom verification tools for Ralph loops (run_tests, typecheck)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>API integrations (GitHub, Jira, Slack, custom services)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Multi-agent coordination (Level 5+)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Capabilities that should work across Claude Code, Desktop, VS Code</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              DON'T USE MCP WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Built-in tools suffice (Bash, Read, Write, Grep already exist)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>One-time task (writing MCP server takes longer than manual work)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Simple automation (hooks might be enough)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Security-critical operations without proper audit trail</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Context budget is already tight (tools add schema tokens)</span>
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4">Component Decision Matrix</h3>

        <table class="compare-table">
          <thead>
            <tr>
              <th>Need</th>
              <th>Component</th>
              <th>Complexity Ladder</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Custom database tool</td>
              <td>Python SDK</td>
              <td>Level 3+</td>
            </tr>
            <tr>
              <td>Type-safe API tools</td>
              <td>TypeScript SDK</td>
              <td>Level 3+</td>
            </tr>
            <tr>
              <td>2-5 agent coordination</td>
              <td>Agent Mail</td>
              <td>Level 5</td>
            </tr>
            <tr>
              <td>10+ agent factory</td>
              <td>Agent Mail + Gas Town</td>
              <td>Level 7</td>
            </tr>
            <tr>
              <td>Ralph verification tools</td>
              <td>Python SDK + Ralph</td>
              <td>Level 4+</td>
            </tr>
          </tbody>
        </table>
      </section>

    </main>

    <!-- Resizer -->
    <div class="resizer" data-resizer="activity-zone" aria-label="Resize activity panel"></div>

    <!-- Activity Zone -->
    <aside class="activity-zone" id="activityZone">
      <div class="text-xs font-semibold text-text-muted uppercase tracking-wider mb-4">Operational Intelligence</div>

      <!-- ESSENCE SECTION (3 items) -->
      <div class="activity-item inversion" data-section="essence">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if every AI app built custom integrations?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd have:</strong> N apps x M integrations = N*M custom codebases.<br>
          <strong>Why this fails:</strong> Updates break everywhere. No portability. Massive duplication.<br>
          <strong>Hidden constraint revealed:</strong> MCP's value IS the standardization. One implementation works everywhere.
        </div>
      </div>

      <div class="activity-item minimal" data-section="essence">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">The irreducible MCP server</div>
        <div class="text-text-secondary text-sm">
          <code style="background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;">mcp = FastMCP("Name"); @mcp.tool() def f(): pass; mcp.run()</code><br>
          <strong>Essential:</strong> Server instance, one tool, transport.<br>
          <strong>Everything else:</strong> Schema validation, resources, prompts, auth - all optional refinement.
        </div>
      </div>

      <div class="activity-item analogy" data-section="essence">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">MCP = USB-C for AI</div>
        <div class="text-text-secondary text-sm">
          Device = AI Application<br>
          Port = MCP Protocol<br>
          Cable = Transport (stdio/HTTP)<br>
          Peripheral = External System<br><br>
          <em>Before USB-C: proprietary connectors everywhere. After: one port rules all.</em>
        </div>
      </div>

      <!-- CORE SECTION (4 items) -->
      <div class="activity-item constraint" data-section="core">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">Why three primitives, not two or four?</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> AI needs to (1) act, (2) read, (3) be guided<br>
          <strong>Tools:</strong> Model decides when (actions)<br>
          <strong>Resources:</strong> App decides when (data)<br>
          <strong>Prompts:</strong> User decides when (workflows)<br><br>
          <em>Three control patterns = three primitives. Complete coverage, minimal overlap.</em>
        </div>
      </div>

      <div class="activity-item invariant" data-section="core">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="anchor" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">JSON-RPC 2.0: The protocol DNA</div>
        <div class="text-text-secondary text-sm">
          MCP builds on JSON-RPC 2.0, not REST or GraphQL.<br>
          <strong>Why:</strong> JSON-RPC is RPC-native (procedure calls), not resource-native.<br>
          <strong>Implication:</strong> Tools ARE procedures. This alignment is why MCP feels natural for function calls.
        </div>
      </div>

      <div class="activity-item expertise" data-section="core">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How deep is your MCP understanding?</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "What are tools?" (primitives)<br>
          <strong>Intermediate:</strong> "Why resources vs tools?" (control patterns)<br>
          <strong>Advanced:</strong> "When stdio vs HTTP?" (transport selection)<br>
          <strong>Staff:</strong> "How does sampling work?" (server-initiated LLM calls)<br>
          <strong>Expert:</strong> "What's the task API?" (experimental features)
        </div>
      </div>

      <div class="activity-item horizon" data-section="core">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">MCP adoption trajectory</div>
        <div class="text-text-secondary text-sm">
          <strong>2024:</strong> "What is MCP?" (awareness)<br>
          <strong>2025:</strong> "How do I build servers?" (adoption)<br>
          <strong>2026:</strong> "Which servers should I use?" (ecosystem maturity)<br>
          <strong>2027+:</strong> "MCP is assumed" (infrastructure)<br><br>
          <em>We're in the adoption phase. Build now, be ahead.</em>
        </div>
      </div>

      <!-- SDK SECTION (5 items) -->
      <div class="activity-item tradeoff" data-section="sdks">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Python vs TypeScript SDK</div>
        <div class="text-text-secondary text-sm">
          <strong>Python (FastMCP):</strong> Fastest prototyping, ML ecosystem access, decorator syntax<br>
          <strong>TypeScript:</strong> Type safety at compile time, browser compat, reference implementation<br><br>
          <strong>Heuristic:</strong> Data science / backend? Python. Claude Desktop / VS Code? TypeScript.
        </div>
      </div>

      <div class="activity-item gradient" data-section="sdks">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How SDK errors manifest</div>
        <div class="text-text-secondary text-sm">
          <strong>100% (works):</strong> Tool executes, returns content<br>
          <strong>90% (degraded):</strong> Tool works but logs to stdout (corrupts stream intermittently)<br>
          <strong>70% (flaky):</strong> Schema mismatch - sometimes validates, sometimes fails<br>
          <strong>50% (broken):</strong> Wrong return structure - empty results<br>
          <strong>0% (crash):</strong> Server doesn't start<br><br>
          <em>The 90-70% range is most dangerous - appears to work.</em>
        </div>
      </div>

      <div class="activity-item warstory" data-section="sdks">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">FastMCP: 21.2K stars, decorator magic</div>
        <div class="text-text-secondary text-sm">
          The Python SDK's decorator pattern (<code>@mcp.tool()</code>) emerged from Flask/FastAPI influence. Type hints become schemas automatically. Pydantic handles validation. Result: 10x less boilerplate than raw JSON-RPC.
        </div>
      </div>

      <div class="activity-item composition" data-section="sdks">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">MCP + Ralph = Verification Tools</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> Ralph loops gain custom verification (run_tests, verify_database_state)<br>
          <strong>Pattern:</strong> Build MCP server with verification tools, reference in prompt.md<br>
          <strong>Danger:</strong> Too many tools bloat context. Keep Ralph servers focused.
        </div>
      </div>

      <div class="activity-item frontier" data-section="sdks">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">Task-Based Execution (Experimental)</div>
        <div class="text-text-secondary text-sm">
          v2 SDK introduces "call-now, fetch-later" pattern for long-running operations. Tool returns task ID, client polls for completion. Not yet stable but solves timeout issues.
        </div>
      </div>

      <!-- AGENT MAIL SECTION (5 items) -->
      <div class="activity-item inversion" data-section="agentmail">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if agents used real-time chat instead?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd need:</strong> Always-on connections, instant responses, interruption handling<br>
          <strong>Why this fails:</strong> Agents work in chunks. Interruptions break flow. Missed messages = lost coordination.<br>
          <strong>Hidden insight:</strong> Email metaphor works BECAUSE it's async. Agents check mail when convenient.
        </div>
      </div>

      <div class="activity-item violation" data-section="agentmail">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip file reservations</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> Agent A and B both edit api/routes.py<br>
          <strong>THEN:</strong> B commits, unaware of A's changes<br>
          <strong>THEN:</strong> A's work is overwritten<br>
          <strong>THEN:</strong> A panics on unexpected diffs<br>
          <strong>FINALLY:</strong> Human spends hours reconciling<br><br>
          <em>One reservation check prevents hours of manual work.</em>
        </div>
      </div>

      <div class="activity-item analogy" data-section="agentmail">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Agent Mail = Village Post Office</div>
        <div class="text-text-secondary text-sm">
          <strong>Craftsperson</strong> = Agent (GreenCastle, RedCat)<br>
          <strong>Mailbox</strong> = Inbox/Outbox<br>
          <strong>Post Office</strong> = Server routing messages<br>
          <strong>Land Registry</strong> = File reservations<br><br>
          <em>Agents don't need to know WHERE others are. Just send to names.</em>
        </div>
      </div>

      <div class="activity-item warstory" data-section="agentmail">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Jeffrey Emanuel's Agentic Tooling Flywheel</div>
        <div class="text-text-secondary text-sm">
          Agent Mail is part of a larger ecosystem: NTM (tmux manager), Beads (task planning), CASS (memory search), DCG (command gating). Thread IDs align with Beads issue IDs for full audit trail.
        </div>
      </div>

      <div class="activity-item inflection" data-section="agentmail">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When coordination becomes essential</div>
        <div class="text-text-secondary text-sm">
          <strong>1 agent:</strong> No coordination needed<br>
          <strong>2 agents:</strong> Occasional conflict, manual resolution OK<br>
          <strong>4 agents:</strong> Regular conflicts, coordination helps<br>
          <strong>8+ agents:</strong> Chaos without infrastructure<br><br>
          <strong>THE INFLECTION:</strong> ~4 concurrent agents<br>
          <em>At Level 5+, Agent Mail isn't optional.</em>
        </div>
      </div>

      <!-- PATH SECTION (4 items) -->
      <div class="activity-item constraint" data-section="path">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">Why this integration order?</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> You need working tools before coordination<br>
          Step 1-3: Build the capability (SDK)<br>
          Step 4-5: Verify it works (Inspector, registration)<br>
          Step 6: Use in orchestration<br>
          Step 7-8: Add coordination when multi-agent<br><br>
          <em>Each step depends on the previous. Can't coordinate tools that don't exist.</em>
        </div>
      </div>

      <div class="activity-item expertise" data-section="path">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">Integration skill levels</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> Use existing MCP servers (filesystem, git)<br>
          <strong>Intermediate:</strong> Build custom tool server<br>
          <strong>Advanced:</strong> Integrate with Ralph/Gas Town<br>
          <strong>Staff:</strong> Multi-agent coordination with Agent Mail<br>
          <strong>Expert:</strong> Factory-scale orchestration (Level 7)
        </div>
      </div>

      <div class="activity-item composition" data-section="path">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">MCP + Gas Town = Specialized Role Tools</div>
        <div class="text-text-secondary text-sm">
          <strong>Deacon:</strong> Architecture analysis tools<br>
          <strong>Dogs:</strong> Linting and test coverage tools<br>
          <strong>Refinery:</strong> Deploy and merge queue tools<br>
          <strong>Polecats:</strong> Domain-specific implementation tools<br><br>
          <em>Each Gas Town role gets tailored MCP capabilities.</em>
        </div>
      </div>

      <div class="activity-item alternative" data-section="path">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">What if you don't need MCP?</div>
        <div class="text-text-secondary text-sm">
          <strong>Built-in tools suffice?</strong> Use Bash, Read, Write<br>
          <strong>One-time task?</strong> Manual work faster than building server<br>
          <strong>Simple automation?</strong> Hooks might be enough<br>
          <strong>Single agent forever?</strong> Skip Agent Mail
        </div>
      </div>

      <!-- GOTCHAS SECTION (4 items) -->
      <div class="activity-item violation" data-section="gotchas">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you log to stdout in stdio server</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> <code>print("debug")</code> in Python<br>
          <strong>THEN:</strong> "debug" goes to stdout, mixed with JSON-RPC<br>
          <strong>THEN:</strong> Client receives malformed JSON<br>
          <strong>THEN:</strong> Parse error, server appears crashed<br>
          <strong>FINALLY:</strong> Intermittent failures that are hard to reproduce<br><br>
          <em>This is the #1 stdio debugging issue. Use stderr.</em>
        </div>
      </div>

      <div class="activity-item gradient" data-section="gotchas">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">Return structure errors (subtle to severe)</div>
        <div class="text-text-secondary text-sm">
          <strong>100% (correct):</strong> <code>{content: [{type: "text", text: "..."}]}</code><br>
          <strong>70% (partial):</strong> <code>{content: "string"}</code> - sometimes works<br>
          <strong>50% (wrong):</strong> <code>"just a string"</code> - empty results<br>
          <strong>0% (crash):</strong> Exception thrown - server dies<br><br>
          <em>The 70% case is worst - appears to work until it doesn't.</em>
        </div>
      </div>

      <div class="activity-item inversion" data-section="gotchas">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if config paths were relative?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd have:</strong> "Works on my machine" syndrome<br>
          <strong>Why it fails:</strong> Claude Code's working directory isn't your project directory<br>
          <strong>Hidden insight:</strong> Absolute paths are annoying but deterministic. Relative paths seem simpler but break across contexts.
        </div>
      </div>

      <div class="activity-item minimal" data-section="gotchas">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Debug Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">The fastest path to "is my server working?"</div>
        <div class="text-text-secondary text-sm">
          <code style="background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 11px;">echo '{"jsonrpc":"2.0","id":1,"method":"tools/list"}' | uv run server.py</code><br><br>
          If you get JSON back with your tools listed, the server works. If not, fix that before touching Claude Code config.
        </div>
      </div>

      <!-- HARD SECTION (4 items) -->
      <div class="activity-item tradeoff" data-section="hard">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Context cost vs. capability</div>
        <div class="text-text-secondary text-sm">
          <strong>THE DILEMMA:</strong><br>
          More tools = more capabilities<br>
          More tools = larger schema in context<br>
          Larger context = degraded quality<br><br>
          <strong>NO PERFECT ANSWER:</strong> Tool profiles help (70% reduction). But you must choose: breadth or depth.
        </div>
      </div>

      <div class="activity-item horizon" data-section="hard">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">How transport choice ages</div>
        <div class="text-text-secondary text-sm">
          <strong>Day 1:</strong> "stdio is simpler"<br>
          <strong>Week 2:</strong> "I need remote access..."<br>
          <strong>Month 1:</strong> "HTTP auth is complex"<br>
          <strong>Month 3:</strong> "Glad I invested in HTTP setup"<br><br>
          <em>Short-term: stdio wins. Long-term: HTTP investment pays off.</em>
        </div>
      </div>

      <div class="activity-item frontier" data-section="hard">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Optimal tool count per context</div>
        <div class="text-text-secondary text-sm">
          How many tools before quality degrades? Depends on tool schema complexity, task type, model. No formula exists. Heuristic: start with 5-10 tools, add as needed, monitor quality.
        </div>
      </div>

      <div class="activity-item warstory" data-section="hard">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Advisory locks in distributed systems</div>
        <div class="text-text-secondary text-sm">
          Agent Mail's advisory reservations mirror database advisory locks. They work when participants respect them. The alternative (enforced locks) causes deadlocks. Trust + TTL expiry = practical coordination.
        </div>
      </div>

      <!-- WHEN SECTION (4 items) -->
      <div class="activity-item inversion" data-section="when">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if you built MCP for a one-time task?</div>
        <div class="text-text-secondary text-sm">
          <strong>Time to build server:</strong> 30-60 minutes<br>
          <strong>Time to do task manually:</strong> 10 minutes<br>
          <strong>Result:</strong> 6x overhead for no future benefit<br><br>
          <strong>When it flips:</strong> 3+ uses of the same capability = MCP investment worthwhile
        </div>
      </div>

      <div class="activity-item expertise" data-section="when">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">Decision-making at different skill levels</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "Should I use MCP?" (capability question)<br>
          <strong>Intermediate:</strong> "Which SDK?" (implementation question)<br>
          <strong>Advanced:</strong> "How many tools?" (context question)<br>
          <strong>Staff:</strong> "When Agent Mail?" (coordination question)<br>
          <strong>Expert:</strong> "Build or buy server?" (ecosystem question)
        </div>
      </div>

      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">If MCP isn't right for your use case</div>
        <div class="text-text-secondary text-sm">
          <strong>Need quick automation?</strong> Hooks (pre/post commit)<br>
          <strong>Need knowledge injection?</strong> Skills / CLAUDE.md<br>
          <strong>Need one-time data access?</strong> Copy-paste works<br>
          <strong>Need tight control?</strong> Custom script, not AI
        </div>
      </div>

      <div class="activity-item inflection" data-section="when">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When to add Agent Mail to MCP setup</div>
        <div class="text-text-secondary text-sm">
          <strong>1 Claude instance:</strong> Never<br>
          <strong>2 instances, different files:</strong> Probably not<br>
          <strong>2 instances, same files:</strong> Yes<br>
          <strong>3+ instances:</strong> Definitely<br><br>
          <strong>THE SIGNAL:</strong> First time you manually resolve a file conflict, add Agent Mail.
        </div>
      </div>

    </aside>
  </div>

  <script>
    /**
     * PanelResizer - Handles draggable panel dividers
     */
    class PanelResizer {
      constructor(resizerEl, config = {}) {
        this.resizer = resizerEl;
        this.config = {
          storageKey: 'panel-activity-zone-width',
          minWidth: 280,
          maxWidth: 900,
          defaultWidth: 480,
          ...config
        };

        this.isResizing = false;
        this.startX = 0;
        this.startWidth = 0;

        this.activityZone = document.querySelector('.activity-zone');
        this.mainContent = document.querySelector('.main-content');

        this.onMouseDown = this.onMouseDown.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
        this.onMouseUp = this.onMouseUp.bind(this);

        this.init();
      }

      init() {
        this.restoreWidth();
        this.resizer.addEventListener('mousedown', this.onMouseDown);
      }

      onMouseDown(e) {
        if (e.button !== 0) return;

        this.isResizing = true;
        this.startX = e.clientX;
        this.startWidth = this.activityZone.offsetWidth;

        this.resizer.classList.add('active');
        document.body.classList.add('resizing');

        document.addEventListener('mousemove', this.onMouseMove);
        document.addEventListener('mouseup', this.onMouseUp);

        e.preventDefault();
      }

      onMouseMove(e) {
        if (!this.isResizing) return;

        const delta = this.startX - e.clientX;
        const newWidth = this.startWidth + delta;

        const constrainedWidth = Math.max(
          this.config.minWidth,
          Math.min(this.config.maxWidth, newWidth)
        );

        this.activityZone.style.width = constrainedWidth + 'px';
        this.mainContent.style.marginRight = constrainedWidth + 'px';
        this.resizer.style.right = constrainedWidth + 'px';
      }

      onMouseUp(e) {
        if (!this.isResizing) return;

        this.isResizing = false;

        this.resizer.classList.remove('active');
        document.body.classList.remove('resizing');

        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);

        this.saveWidth();
      }

      saveWidth() {
        const width = this.activityZone.offsetWidth;
        localStorage.setItem(this.config.storageKey, JSON.stringify({
          width,
          timestamp: Date.now()
        }));
      }

      restoreWidth() {
        try {
          const stored = localStorage.getItem(this.config.storageKey);
          if (stored) {
            const { width } = JSON.parse(stored);
            if (width >= this.config.minWidth && width <= this.config.maxWidth) {
              this.activityZone.style.width = width + 'px';
              this.mainContent.style.marginRight = width + 'px';
              this.resizer.style.right = width + 'px';
            }
          }
        } catch (e) {
          console.warn('Failed to restore panel width:', e);
        }
      }

      destroy() {
        this.resizer.removeEventListener('mousedown', this.onMouseDown);
        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);
      }
    }

    // Auto-initialize resizers on DOM ready
    document.addEventListener('DOMContentLoaded', () => {
      const resizers = document.querySelectorAll('[data-resizer]');
      resizers.forEach(resizer => new PanelResizer(resizer));
    });

    // Initialize Lucide icons
    lucide.createIcons();

    // Navigation toggle
    function toggleSection(header) {
      const section = header.closest('.nav-section');
      section.classList.toggle('expanded');
      const children = section.querySelector('.nav-children');
      children.classList.toggle('expanded');
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const nav = document.getElementById('leftNav');
      nav.classList.toggle('open');
    }

    // Copy functionality
    function copyCode(btn, text) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check" class="w-3 h-3"></i> Copied!';
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = originalText;
          lucide.createIcons();
        }, 2000);
      });
    }

    function copyCodeBlock(btn) {
      const codeBlock = btn.closest('.code-block');
      const pre = codeBlock.querySelector('pre');
      const text = pre.textContent;
      copyCode(btn, text);
    }

    // Scroll-sync with GSAP ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    const sections = document.querySelectorAll('[data-activity]');
    const activityItems = document.querySelectorAll('.activity-item');

    sections.forEach(section => {
      ScrollTrigger.create({
        trigger: section,
        start: 'top 40%',
        end: 'bottom 40%',
        onEnter: () => activateSection(section.dataset.activity),
        onEnterBack: () => activateSection(section.dataset.activity),
      });
    });

    function activateSection(sectionName) {
      activityItems.forEach(item => {
        if (item.dataset.section === sectionName) {
          item.classList.add('active');
          gsap.to(item, {
            opacity: 1,
            y: -2,
            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
            duration: 0.3,
            ease: 'power2.out'
          });
        } else {
          item.classList.remove('active');
          gsap.to(item, {
            opacity: 0.5,
            y: 0,
            boxShadow: 'none',
            duration: 0.3,
            ease: 'power2.out'
          });
        }
      });

      document.querySelectorAll('.nav-section-header').forEach(header => {
        header.classList.remove('active');
      });
      const activeNav = document.querySelector(`[data-section="${sectionName}"] .nav-section-header`);
      if (activeNav) {
        activeNav.classList.add('active');
      }
    }

    // Initialize first section as active
    activateSection('essence');

    // Smooth scroll for nav links
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.nav-item').forEach(l => l.classList.remove('active'));
          link.classList.add('active');
        }
      });
    });

    // Brushing interaction
    activityItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = 'rgba(13, 147, 115, 0.05)';
          relatedSection.style.transition = 'background-color 0.3s ease';
        }
      });

      item.addEventListener('mouseleave', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = '';
        }
      });
    });
  </script>
</body>
</html>
