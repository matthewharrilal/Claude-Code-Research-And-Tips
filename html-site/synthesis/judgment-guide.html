<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Judgment Guide | Claude Code Documentation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- GSAP for scroll-sync -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Tailwind Config with Design Tokens -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-base': '#ffffff',
            'bg-subtle': '#fafafa',
            'bg-muted': '#f4f4f5',
            'text-primary': '#18181b',
            'text-secondary': '#3f3f46',
            'text-muted': '#71717a',
            'accent': '#0D9373',
            'accent-light': '#10b981',
            'accent-bg': '#ecfdf5',
            'border': '#e4e4e7',
            // Activity Zone content type colors (Original 6)
            'az-invariant': '#3b82f6',    // Blue
            'az-effect': '#f59e0b',       // Amber
            'az-composition': '#8b5cf6',  // Purple
            'az-frontier': '#ef4444',     // Red
            'az-warstory': '#10b981',     // Green
            'az-alternative': '#6b7280',  // Gray
            // Activity Zone generative content types (New 10)
            'az-inversion': '#4f46e5',    // Indigo
            'az-constraint': '#8b5cf6',   // Violet
            'az-gradient': '#f43f5e',     // Rose
            'az-horizon': '#06b6d4',      // Cyan
            'az-violation': '#f97316',    // Orange
            'az-tradeoff': '#f59e0b',     // Amber
            'az-analogy': '#d946ef',      // Fuchsia
            'az-expertise': '#10b981',    // Emerald
            'az-minimal': '#84cc16',      // Lime
            'az-inflection': '#eab308',   // Yellow
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Fira Code', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    /* Base Styles */
    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    [id] {
      scroll-margin-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: #ffffff;
      color: #18181b;
      line-height: 1.7;
    }

    /* Three Panel Layout */
    .three-panel-layout {
      min-height: 100vh;
      position: relative;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: #ffffff;
      border-bottom: 1px solid #e4e4e7;
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 24px;
    }

    /* Left Navigation - 240px fixed */
    .left-nav {
      position: fixed;
      top: 56px;
      left: 0;
      width: 240px;
      height: calc(100vh - 56px);
      border-right: 1px solid #e4e4e7;
      background: #ffffff;
      overflow-y: auto;
      padding: 16px 0;
      z-index: 40;
    }

    .nav-section {
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 500;
      color: #3f3f46;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.15s;
    }

    .nav-section-header:hover {
      background: #f4f4f5;
    }

    .nav-section-header.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-item {
      display: block;
      padding: 6px 12px 6px 44px;
      font-size: 14px;
      color: #71717a;
      text-decoration: none;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-item:hover {
      color: #3f3f46;
      background: #f4f4f5;
    }

    .nav-item.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-children {
      display: none;
      overflow: hidden;
    }

    .nav-children.expanded {
      display: block;
    }

    .nav-chevron {
      transition: transform 0.2s;
    }

    .nav-section.expanded .nav-chevron {
      transform: rotate(90deg);
    }

    /* Main Content - Flexible, margins for fixed sidebars */
    .main-content {
      margin-left: 240px;
      margin-right: 480px;
      margin-top: 56px;
      padding: 48px 48px;
      min-width: 400px;
    }

    /* Activity Zone - 480px fixed */
    .activity-zone {
      position: fixed;
      top: 56px;
      right: 0;
      width: 480px;
      height: calc(100vh - 56px);
      border-left: 1px dashed #e4e4e7;
      background: #fafafa;
      overflow-y: auto;
      padding: 24px 20px;
      z-index: 40;
    }

    /* Responsive: Hide Activity Zone below 1400px */
    @media (max-width: 1400px) {
      .activity-zone {
        display: none;
      }
      .main-content {
        margin-right: 0;
        padding: 40px 32px;
      }
    }

    /* Responsive: Hide Left Nav below 768px */
    @media (max-width: 768px) {
      .left-nav {
        display: none;
      }
      .left-nav.open {
        display: block;
        position: fixed;
        top: 56px;
        left: 0;
        right: 0;
        bottom: 0;
        background: #ffffff;
        z-index: 50;
        overflow-y: auto;
      }
      .main-content {
        margin-left: 0;
        padding: 24px 16px;
        min-width: auto;
      }
    }

    /* Resizer - Draggable divider */
    .resizer {
      position: fixed;
      top: 56px;
      right: 480px;
      width: 6px;
      height: calc(100vh - 56px);
      cursor: col-resize;
      background: transparent;
      z-index: 50;
      transition: background 0.15s ease;
    }

    .resizer:hover {
      background: rgba(13, 147, 115, 0.15);
    }

    .resizer.active {
      background: rgba(13, 147, 115, 0.25);
    }

    body.resizing {
      user-select: none;
      cursor: col-resize !important;
    }

    body.resizing * {
      cursor: col-resize !important;
    }

    @media (max-width: 1400px) {
      .resizer {
        display: none;
      }
    }

    /* Activity Zone Items */
    .activity-item {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      background: #ffffff;
      border: 1px solid #e4e4e7;
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .activity-item.active {
      opacity: 1;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .activity-item:hover {
      opacity: 1;
    }

    .activity-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Activity Zone content type borders (Original 6) */
    .activity-item.invariant { border-left: 4px solid #3b82f6; }
    .activity-item.effect { border-left: 4px solid #f59e0b; }
    .activity-item.composition { border-left: 4px solid #8b5cf6; }
    .activity-item.frontier { border-left: 4px solid #ef4444; }
    .activity-item.warstory { border-left: 4px solid #10b981; }
    .activity-item.alternative { border-left: 4px solid #6b7280; }

    /* Activity Zone generative content types (New 10) */
    .activity-item.inversion { border-left: 4px solid #4f46e5; }
    .activity-item.constraint { border-left: 4px solid #8b5cf6; }
    .activity-item.gradient { border-left: 4px solid #f43f5e; }
    .activity-item.horizon { border-left: 4px solid #06b6d4; }
    .activity-item.violation { border-left: 4px solid #f97316; }
    .activity-item.tradeoff { border-left: 4px solid #f59e0b; }
    .activity-item.analogy { border-left: 4px solid #d946ef; }
    .activity-item.expertise { border-left: 4px solid #10b981; }
    .activity-item.minimal { border-left: 4px solid #84cc16; }
    .activity-item.inflection { border-left: 4px solid #eab308; }

    /* Main Content Components */

    /* Section titles with number */
    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: #0D9373;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      border-radius: 50%;
      margin-right: 12px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: #18181b;
      margin-bottom: 20px;
      margin-top: 56px;
      display: flex;
      align-items: center;
    }

    .section-title:first-child {
      margin-top: 0;
    }

    /* Essence Box (15 words) */
    .essence-box {
      background: linear-gradient(135deg, #18181b 0%, #27272a 100%);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 40px;
    }

    .essence-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #10b981;
      margin-bottom: 12px;
    }

    .essence-text {
      font-size: 22px;
      font-weight: 500;
      color: #ffffff;
      line-height: 1.4;
    }

    /* Core Abstraction Box */
    .core-abstraction {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .core-philosophy {
      font-size: 16px;
      color: #3f3f46;
      margin-bottom: 16px;
      font-style: italic;
    }

    .core-code {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 16px;
      overflow-x: auto;
    }

    .core-code code {
      font-family: 'Fira Code', monospace;
      font-size: 15px;
      color: #10b981;
      white-space: nowrap;
    }

    .core-anchor {
      font-size: 14px;
      color: #71717a;
      text-align: center;
    }

    /* Design Decision Box */
    .decision-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .decision-why {
      font-size: 16px;
      font-weight: 600;
      color: #0D9373;
      margin-bottom: 12px;
    }

    .decision-reasoning {
      font-size: 14px;
      color: #3f3f46;
      margin-bottom: 16px;
    }

    .decision-implication {
      background: #f4f4f5;
      border-radius: 8px;
      padding: 16px;
    }

    .decision-implication-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: #71717a;
      margin-bottom: 8px;
    }

    /* Code Blocks */
    .code-block {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 24px;
      position: relative;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
      color: #e4e4e7;
      line-height: 1.6;
    }

    .code-block .comment { color: #6b7280; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #10b981; }
    .code-block .variable { color: #60a5fa; }

    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #3f3f46;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: background 0.15s;
    }

    .copy-btn:hover {
      background: #52525b;
    }

    /* Path Steps */
    .path-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .path-step {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .path-step:last-child {
      margin-bottom: 0;
    }

    .path-number {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: #0D9373;
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .path-content {
      flex: 1;
      font-size: 14px;
      color: #3f3f46;
    }

    .path-content code {
      background: #e4e4e7;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }

    /* Gotcha Box */
    .gotcha-box {
      background: #fffbeb;
      border: 1px solid #fcd34d;
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .gotcha-title {
      font-weight: 600;
      color: #92400e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .gotcha-detail {
      font-size: 14px;
      color: #78350f;
      margin-bottom: 8px;
    }

    .gotcha-detail strong {
      color: #92400e;
    }

    /* What's Hard Box */
    .hard-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .hard-title {
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hard-detail {
      font-size: 14px;
      color: #7f1d1d;
      margin-bottom: 8px;
    }

    /* When To Use Grid */
    .when-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    @media (max-width: 900px) {
      .when-grid {
        grid-template-columns: 1fr;
      }
    }

    .when-use {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 24px;
    }

    .when-not {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 24px;
    }

    .when-title {
      font-weight: 600;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .when-use .when-title { color: #166534; }
    .when-not .when-title { color: #991b1b; }

    .when-item {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .when-use .when-item { color: #166534; }
    .when-not .when-item { color: #991b1b; }

    /* Decision Tree Box */
    .decision-tree {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .decision-tree-title {
      font-weight: 600;
      color: #18181b;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Scenario Card */
    .scenario-card {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .scenario-title {
      font-weight: 600;
      color: #18181b;
      font-size: 16px;
      margin-bottom: 16px;
    }

    .scenario-table {
      width: 100%;
      font-size: 14px;
    }

    .scenario-table td {
      padding: 8px 0;
      border-bottom: 1px solid #f4f4f5;
    }

    .scenario-table td:first-child {
      font-weight: 500;
      color: #71717a;
      width: 140px;
    }

    /* Mistake Box */
    .mistake-box {
      background: #fff7ed;
      border: 1px solid #fed7aa;
      border-left: 4px solid #f97316;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .mistake-title {
      font-weight: 600;
      color: #9a3412;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .mistake-detail {
      font-size: 14px;
      color: #7c2d12;
      margin-bottom: 8px;
    }

    /* Complexity Ladder */
    .ladder-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .ladder-step {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 12px 0;
      border-bottom: 1px solid #e4e4e7;
    }

    .ladder-step:last-child {
      border-bottom: none;
    }

    .ladder-level {
      width: 80px;
      font-weight: 600;
      color: #0D9373;
    }

    .ladder-name {
      flex: 1;
      color: #3f3f46;
    }

    .ladder-cost {
      font-family: 'Fira Code', monospace;
      font-size: 13px;
      color: #71717a;
    }

    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: none;
      padding: 8px;
      background: none;
      border: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #fafafa;
    }

    ::-webkit-scrollbar-thumb {
      background: #d4d4d8;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1aa;
    }

    /* Keyboard shortcut hint */
    .kbd {
      display: inline-flex;
      align-items: center;
      padding: 2px 6px;
      background: #f4f4f5;
      border: 1px solid #e4e4e7;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      color: #71717a;
    }

    /* Checklist */
    .checklist {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .checklist-title {
      font-weight: 600;
      color: #166534;
      margin-bottom: 16px;
    }

    .checklist-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 12px;
      font-size: 14px;
      color: #166534;
    }

    .checklist-item input {
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
      <i data-lucide="menu" class="w-5 h-5 text-text-secondary"></i>
    </button>
    <div class="flex items-center gap-3">
      <i data-lucide="scale" class="w-5 h-5 text-accent"></i>
      <span class="font-semibold text-text-primary">Claude Code</span>
    </div>
    <div class="flex-1 flex justify-center">
      <button class="flex items-center gap-2 px-4 py-2 bg-bg-muted rounded-lg text-text-muted text-sm hover:bg-border transition-colors">
        <i data-lucide="search" class="w-4 h-4"></i>
        <span>Search documentation...</span>
        <span class="kbd">Cmd+K</span>
      </button>
    </div>
    <div class="flex items-center gap-4">
      <a href="#" class="text-sm text-text-muted hover:text-text-primary transition-colors">Support</a>
      <button class="p-2 hover:bg-bg-muted rounded-lg transition-colors" aria-label="Toggle theme">
        <i data-lucide="sun" class="w-4 h-4 text-text-muted"></i>
      </button>
    </div>
  </header>

  <div class="three-panel-layout">
    <!-- Left Navigation -->
    <nav class="left-nav" id="leftNav">
      <div class="px-4 mb-4">
        <span class="text-xs font-semibold text-text-muted uppercase tracking-wider">Judgment Guide</span>
      </div>

      <!-- Essence -->
      <div class="nav-section expanded" data-section="essence">
        <div class="nav-section-header active" onclick="toggleSection(this)">
          <i data-lucide="zap" class="w-4 h-4"></i>
          <span>Essence</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#essence" class="nav-item active">The 15-Word Summary</a>
        </div>
      </div>

      <!-- Core Abstraction -->
      <div class="nav-section expanded" data-section="core">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="box" class="w-4 h-4"></i>
          <span>Core Abstraction</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#core-abstraction" class="nav-item">Philosophy + Framework</a>
        </div>
      </div>

      <!-- Design Decisions -->
      <div class="nav-section expanded" data-section="decisions">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="lightbulb" class="w-4 h-4"></i>
          <span>Design Decisions</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children expanded">
          <a href="#why-simplicity" class="nav-item">Why Start Simple?</a>
          <a href="#why-verifiable" class="nav-item">Why Verifiable Criteria?</a>
          <a href="#why-progression" class="nav-item">Why Level Progression?</a>
        </div>
      </div>

      <!-- Decision Trees -->
      <div class="nav-section" data-section="trees">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="git-branch" class="w-4 h-4"></i>
          <span>Decision Trees</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#trees" class="nav-item">Orchestration Selection</a>
          <a href="#memory-tree" class="nav-item">Memory Pattern</a>
          <a href="#autonomous-tree" class="nav-item">Autonomous Readiness</a>
        </div>
      </div>

      <!-- Path of a Decision -->
      <div class="nav-section" data-section="path">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="route" class="w-4 h-4"></i>
          <span>Path of a Decision</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#path" class="nav-item">The 5-Step Framework</a>
        </div>
      </div>

      <!-- Gotchas -->
      <div class="nav-section" data-section="gotchas">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="alert-triangle" class="w-4 h-4"></i>
          <span>Common Mistakes</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#gotchas" class="nav-item">Practical Problems</a>
        </div>
      </div>

      <!-- What's Hard -->
      <div class="nav-section" data-section="hard">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="flame" class="w-4 h-4"></i>
          <span>What's Hard</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#hard" class="nav-item">Real Complexity</a>
        </div>
      </div>

      <!-- When to Use -->
      <div class="nav-section" data-section="when">
        <div class="nav-section-header" onclick="toggleSection(this)">
          <i data-lucide="check-circle" class="w-4 h-4"></i>
          <span>When to Use</span>
          <i data-lucide="chevron-right" class="w-4 h-4 nav-chevron ml-auto"></i>
        </div>
        <div class="nav-children">
          <a href="#when" class="nav-item">Decision Criteria</a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">Start simple, add complexity only when simpler approaches demonstrably fail, verify before autonomy.</div>
        </div>
      </section>

      <!-- Section 2: CORE ABSTRACTION + IMPLEMENTATION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Core Abstraction
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"The best pattern is the simplest one that meets your needs."</div>

          <div class="core-code">
            <button class="copy-btn" onclick="copyCode(this, 'Complexity = Setup time + Debugging difficulty + Cognitive overhead + Actual dollars')">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <code>Complexity = Setup time + Debugging difficulty + Cognitive overhead + Actual dollars</code>
          </div>

          <div class="core-anchor">Every complexity level has costs. Choose the minimum that achieves your goal.</div>
        </div>

        <p class="text-text-secondary mb-6">
          The Judgment Guide provides decision support for selecting patterns, tools, and approaches. It's your companion when you know WHAT you want to do but not WHICH approach to use. The guide offers decision trees, scenario-based recommendations, and common mistake patterns.
        </p>

        <p class="text-text-secondary mb-6">
          This is not prescription. It's calibration. The guide helps you match your constraints (budget, time, expertise, risk tolerance) to the appropriate complexity level. A junior developer shipping a feature overnight needs different guidance than a staff engineer orchestrating 10 agents.
        </p>

        <h3 class="font-semibold text-lg mb-4 mt-8">The Complexity Ladder</h3>

        <div class="ladder-container">
          <div class="ladder-step">
            <div class="ladder-level">Level 7</div>
            <div class="ladder-name">Gas Town Factory</div>
            <div class="ladder-cost">$800+/mo</div>
          </div>
          <div class="ladder-step">
            <div class="ladder-level">Level 6</div>
            <div class="ladder-name">Parallel Swarms</div>
            <div class="ladder-cost">$400-800/mo</div>
          </div>
          <div class="ladder-step">
            <div class="ladder-level">Level 5</div>
            <div class="ladder-name">CC Mirror</div>
            <div class="ladder-cost">$200-400/mo</div>
          </div>
          <div class="ladder-step">
            <div class="ladder-level">Level 4</div>
            <div class="ladder-name">PRD-driven Ralph</div>
            <div class="ladder-cost">$100-200/mo</div>
          </div>
          <div class="ladder-step">
            <div class="ladder-level">Level 3</div>
            <div class="ladder-name">Simple Ralph loops</div>
            <div class="ladder-cost">$50-100/mo</div>
          </div>
          <div class="ladder-step">
            <div class="ladder-level">Level 2</div>
            <div class="ladder-name">Subagents + hooks</div>
            <div class="ladder-cost">$50-100/mo</div>
          </div>
          <div class="ladder-step">
            <div class="ladder-level">Level 1</div>
            <div class="ladder-name">CLAUDE.md + commands</div>
            <div class="ladder-cost">$20-50/mo</div>
          </div>
          <div class="ladder-step">
            <div class="ladder-level">Level 0</div>
            <div class="ladder-name">Single session</div>
            <div class="ladder-cost">$20-50/mo</div>
          </div>
        </div>

        <p class="text-text-secondary mb-6">
          <strong>Mastery time per level:</strong> 1-4 weeks.<br>
          <strong>Rule:</strong> Don't skip levels. Master each before advancing.
        </p>
      </section>

      <!-- Section 3: DESIGN DECISIONS -->
      <section id="why-simplicity" data-activity="decisions">
        <h2 class="section-title">
          <span class="section-number">3</span>
          Design Decisions
        </h2>

        <div class="decision-box">
          <div class="decision-why">WHY START SIMPLE?</div>
          <div class="decision-reasoning">
            Complex patterns have hidden costs: setup time, debugging difficulty, cognitive overhead, and actual dollars. A single interactive session costs $5-20/day. Gas Town costs $50-200/day. The extra capability only matters if you need it.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Always ask: "Would a simpler approach work?" If you're reaching for CC Mirror but haven't shipped 5+ features with Ralph, you're probably over-engineering. Complexity is a choice you make <em>after</em> simpler approaches fail.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-verifiable">
          <div class="decision-why">WHY VERIFIABLE CRITERIA?</div>
          <div class="decision-reasoning">
            Autonomous patterns only work when completion is detectable. "Works correctly" is not verifiable. "npm run typecheck passes" is verifiable. Without verifiable criteria, Claude marks tasks complete prematurely and errors compound.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Before going autonomous, convert every subjective goal to an objective test. "Good UX" becomes "Lighthouse accessibility score > 90". If you can't convert it, the task isn't ready for autonomous execution.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-progression">
          <div class="decision-why">WHY LEVEL PROGRESSION?</div>
          <div class="decision-reasoning">
            Each level builds skills needed for the next. Level 0 teaches prompt clarity. Level 1 teaches external state. Level 2 teaches task decomposition. Skip levels and you'll hit walls that were solved at lower levels.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              If you're struggling at Level 5, the fix is often to go back to Level 3 and solidify foundations. "I tried Ralph and it didn't work" usually means Level 2 skills (task decomposition) aren't solid yet.
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: DECISION TREES (File Structure equivalent) -->
      <section id="trees" data-activity="trees">
        <h2 class="section-title">
          <span class="section-number">4</span>
          Decision Trees
        </h2>

        <p class="text-text-secondary mb-6">
          These decision trees encode accumulated wisdom from 100+ hours of pattern usage. Follow them when facing ambiguous choices.
        </p>

        <div class="decision-tree">
          <div class="decision-tree-title">
            <i data-lucide="git-branch" class="w-5 h-5 text-accent"></i>
            Which Orchestration Pattern Should I Use?
          </div>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCodeBlock(this)">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <pre>Is this a simple, single task?
|
+-- <span class="keyword">Yes</span> --> Single interactive session
|
+-- <span class="keyword">No</span> --> Do you need to walk away (AFK)?
    |
    +-- <span class="keyword">No</span> --> Multiple distinct domains?
    |   |
    |   +-- <span class="keyword">Yes</span> --> CC Mirror (hub-and-spoke)
    |   |
    |   +-- <span class="keyword">No</span> --> Single session with subagents
    |
    +-- <span class="keyword">Yes</span> --> Can you write clear acceptance criteria?
        |
        +-- <span class="keyword">No</span> --> Not ready for autonomous (refine requirements)
        |
        +-- <span class="keyword">Yes</span> --> Need parallelism across features?
            |
            +-- <span class="keyword">Yes</span> --> Need deep specialization (10+ agents)?
            |   |
            |   +-- <span class="keyword">Yes</span> --> Gas Town (agent factory)
            |   |
            |   +-- <span class="keyword">No</span> --> Parallel Ralph + Git Worktrees
            |
            +-- <span class="keyword">No</span> --> PRD-driven Ralph loop</pre>
          </div>
        </div>

        <div class="decision-tree" id="memory-tree">
          <div class="decision-tree-title">
            <i data-lucide="database" class="w-5 h-5 text-accent"></i>
            Which Memory Pattern Should I Use?
          </div>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCodeBlock(this)">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <pre>How long does this need to persist?
|
+-- Just this session --> No special setup needed
|
+-- Across sessions in one project --> CLAUDE.md
|   |
|   +-- Team knowledge? --> Git-tracked CLAUDE.md
|   +-- Personal/secrets? --> CLAUDE.local.md (gitignored)
|
+-- Within an autonomous loop --> progress.txt + prd.json + git
|
+-- Across many projects --> Claude-Mem (semantic memory)
|
+-- Across multiple life domains --> Panopticon (isolated directories)</pre>
          </div>
        </div>

        <div class="decision-tree" id="autonomous-tree">
          <div class="decision-tree-title">
            <i data-lucide="bot" class="w-5 h-5 text-accent"></i>
            When Should I Go Autonomous?
          </div>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCodeBlock(this)">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <pre>Can you define "done" in verifiable terms?
|
+-- <span class="keyword">No</span> --> Stay interactive (refine requirements)
|
+-- <span class="keyword">Yes</span> --> Do you have test coverage?
    |
    +-- <span class="keyword">No</span> --> Add tests first, then go autonomous
    |
    +-- <span class="keyword">Yes</span> --> Can tasks fit in one context window each?
        |
        +-- <span class="keyword">No</span> --> Split tasks smaller
        |
        +-- <span class="keyword">Yes</span> --> Is this security-critical code?
            |
            +-- <span class="keyword">Yes</span> --> Use HOTL Ralph (human on the loop)
            |
            +-- <span class="keyword">No</span> --> <span class="string">READY FOR RALPH</span>
                |
                +-- Setup: prd.json + ralph.sh + progress.txt
                +-- Run: ./ralph.sh 25
                +-- Go: Sleep / Do something else</pre>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">Scenario-Based Selection Matrix</h3>

        <div class="scenario-card">
          <div class="scenario-title">Scenario: "Ship a feature overnight"</div>
          <table class="scenario-table">
            <tr><td>Pattern</td><td>PRD-driven Ralph</td></tr>
            <tr><td>Why</td><td>Fresh context each iteration, quality gates, autonomous</td></tr>
            <tr><td>Setup time</td><td>30-60 minutes</td></tr>
            <tr><td>Success rate</td><td>High (with good PRD)</td></tr>
            <tr><td>Prerequisites</td><td>Clear acceptance criteria, test coverage</td></tr>
            <tr><td>Cost</td><td>$10-30 depending on complexity</td></tr>
          </table>
        </div>

        <div class="scenario-card">
          <div class="scenario-title">Scenario: "Build a complex multi-domain feature"</div>
          <table class="scenario-table">
            <tr><td>Pattern</td><td>CC Mirror (hub-and-spoke)</td></tr>
            <tr><td>Why</td><td>Parallelism, specialization, cost optimization</td></tr>
            <tr><td>Setup time</td><td>1-2 hours</td></tr>
            <tr><td>Success rate</td><td>Medium (coordination overhead)</td></tr>
            <tr><td>Prerequisites</td><td>Comfort with multi-agent mental model</td></tr>
            <tr><td>Cost</td><td>$30-80/day</td></tr>
          </table>
        </div>

        <div class="scenario-card">
          <div class="scenario-title">Scenario: "Parallel features on separate branches"</div>
          <table class="scenario-table">
            <tr><td>Pattern</td><td>Ralph + Git Worktrees</td></tr>
            <tr><td>Why</td><td>True file isolation, shared git history</td></tr>
            <tr><td>Setup time</td><td>30 minutes</td></tr>
            <tr><td>Success rate</td><td>High (no conflicts during work)</td></tr>
            <tr><td>Prerequisites</td><td>Git worktree familiarity</td></tr>
            <tr><td>Cost</td><td>2-3x single Ralph cost</td></tr>
          </table>
        </div>

        <div class="scenario-card">
          <div class="scenario-title">Scenario: "10+ agents, team-scale output solo"</div>
          <table class="scenario-table">
            <tr><td>Pattern</td><td>Gas Town (agent factory)</td></tr>
            <tr><td>Why</td><td>Self-improving, persistent workers, factory production</td></tr>
            <tr><td>Setup time</td><td>8+ hours</td></tr>
            <tr><td>Success rate</td><td>Variable (requires Stage 7+ experience)</td></tr>
            <tr><td>Prerequisites</td><td>Go runtime, tmux, $50-200/day budget</td></tr>
            <tr><td>Cost</td><td>$50-200/day</td></tr>
          </table>
        </div>
      </section>

      <!-- Section 5: PATH OF A DECISION -->
      <section id="path" data-activity="path">
        <h2 class="section-title">
          <span class="section-number">5</span>
          Path of a Decision
        </h2>

        <p class="text-text-secondary mb-6">
          Follow this framework when selecting a pattern. Each step builds on the previous.
        </p>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content"><strong>Assess Complexity</strong> - Is this simple (&lt;30 min), medium (defined end state), high (multi-domain), or very high (10+ agents)?</div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content"><strong>Check Constraints</strong> - Budget limited? Must walk away? Security-critical? No test coverage? Exploratory work?</div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content"><strong>Select Pattern</strong> - Use decision trees above, or the quick matrix. When in doubt, choose simpler.</div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content"><strong>Configure Appropriately</strong> - Set max iterations, task sizes, model selection per role, memory strategy.</div>
          </div>
          <div class="path-step">
            <div class="path-number">5</div>
            <div class="path-content"><strong>Monitor and Adapt</strong> - Watch for stuck loops, context warnings, quality degradation, cost spikes. Adapt when patterns emerge.</div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">Constraint Impact Matrix</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment">| Constraint              | Impact on Pattern Selection              |</span>
<span class="comment">|-------------------------|------------------------------------------|</span>
| Budget limited          | Stick to Haiku/Sonnet, avoid Gas Town    |
| Must walk away          | Need Ralph (autonomous) pattern          |
| Security-critical       | Use HOTL (human on the loop)             |
| No test coverage        | Cannot go autonomous safely              |
| Exploratory work        | Stay interactive, no loops               |</pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">Model Selection by Task Type</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment">What type of work is this?</span>
|
+-- Simple lookup, file search, formatting
|   --> <span class="string">Haiku</span> ($0.25/$1.25 per 1M tokens)
|
+-- Implementation, test generation, standard coding
|   --> <span class="string">Sonnet</span> ($3/$15 per 1M tokens)
|
+-- Architecture, complex reasoning, ambiguous decisions
|   --> <span class="string">Opus</span> ($15/$75 per 1M tokens)
|
+-- Security review, critical system design
    --> <span class="string">Opus</span> (worth the cost)</pre>
        </div>
      </section>

      <!-- Section 6: GOTCHAS (Common Mistakes) -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Common Mistakes and Fixes
        </h2>

        <p class="text-text-secondary mb-6">
          These are the mistakes that trip up even experienced practitioners. Learn to recognize and avoid them.
        </p>

        <div class="mistake-box">
          <div class="mistake-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Tasks too large
          </div>
          <div class="mistake-detail"><strong>Symptom:</strong> Context overflows, quality degrades, agent loses track</div>
          <div class="mistake-detail"><strong>Diagnosis:</strong> Task takes more than one context window</div>
          <div class="mistake-detail"><strong>Fix:</strong> Apply the 2-3 sentence rule. "Build the entire authentication system" becomes "Add login form component with email/password fields"</div>
          <div class="mistake-detail"><strong>Sweet spot:</strong> 100-500 lines of code change, 1-3 files modified, 15-60 minutes equivalent human time</div>
        </div>

        <div class="mistake-box">
          <div class="mistake-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Skipping verification
          </div>
          <div class="mistake-detail"><strong>Symptom:</strong> Errors compound, broken code accumulates, future iterations inherit bugs</div>
          <div class="mistake-detail"><strong>Quote:</strong> "If you don't do this, you're hamstringing future agent runs with bad code"</div>
          <div class="mistake-detail"><strong>Fix:</strong> Quality gates on EVERY commit. Always include <code>npm run typecheck passes</code> and <code>npm run test passes</code> in acceptance criteria.</div>
        </div>

        <div class="mistake-box">
          <div class="mistake-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Vague acceptance criteria
          </div>
          <div class="mistake-detail"><strong>Symptom:</strong> Agent marks tasks complete prematurely, Claude claims done without proof</div>
          <div class="mistake-detail"><strong>Bad:</strong> "Works correctly", "Good UX", "Handles edge cases"</div>
          <div class="mistake-detail"><strong>Good:</strong> "Login form renders at /login", "Email validation rejects 'notanemail'", "Submit button disabled when form invalid"</div>
        </div>

        <div class="mistake-box">
          <div class="mistake-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Jumping to complexity too fast
          </div>
          <div class="mistake-detail"><strong>Symptom:</strong> Setup overhead exceeds value, debugging difficulty, frustration</div>
          <div class="mistake-detail"><strong>Rule:</strong> Master each level before advancing. Level 0 -> 1 -> 2 -> 3 -> 4 -> 5 -> 6 -> 7</div>
          <div class="mistake-detail"><strong>Warning signs:</strong> Fewer than 100 hours with multi-agent setups, uncomfortable with emergence and chaos, need predictable outcomes</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Context rot in long sessions
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Quality drops after 60-70% context, Claude forgets earlier decisions</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Use fresh context pattern (Ralph). Each iteration = new Claude instance. Memory lives in external files.</div>
          <div class="gotcha-detail"><strong>Alternative:</strong> Amp auto-handoff at 90% context</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Workers spawning sub-agents
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Recursion chaos, runaway costs, coordination breakdown</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Clear role separation. Orchestrator can spawn workers via Task tool. Workers CANNOT spawn sub-agents - they use tools directly.</div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          These are fundamental tensions in pattern selection. They're not bugs to fix - they're tradeoffs to navigate.
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            The Simplicity-Capability Tradeoff
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Simple patterns (single session) are easy but limited. Complex patterns (Gas Town) are powerful but fragile. You want capability without complexity.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Over-engineering simple tasks. Under-tooling complex tasks. Spending more time on setup than on work.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Start at the lowest complexity that might work. Only escalate when you hit a wall. "Add complexity only when simpler approaches demonstrably fail."</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            The Automation-Control Tradeoff
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Autonomous patterns let you walk away, but you lose control. Interactive patterns give control, but you can't step away. Perfect for different contexts.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Running AFK Ralph on security-critical code. Staying interactive for 100 repetitive tasks.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Match automation level to risk level. HOTL for critical, AFK for routine. Never automate what you don't understand.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            The Experience Gap
          </div>
          <div class="hard-detail"><strong>The tension:</strong> You can't learn Level 5 skills without attempting Level 5. But attempting Level 5 without Level 3 foundations leads to failure. Chicken and egg.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> "I tried Ralph and it didn't work" (usually means Level 2 skills aren't solid). Frustration at complex patterns. Retreating to single sessions.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Accept that you'll fail at each new level. Spend time at each level (1-4 weeks). Build foundations before advancing. Retreating one level isn't failure - it's calibration.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            The Decision Fatigue Problem
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Every decision consumes cognitive resources. But pattern selection requires many decisions: Which pattern? Which model? What task size? What verification?</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Analysis paralysis. Starting over repeatedly. Decision avoidance (always using single session).</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Use decision trees (removes deliberation). Default to single session when unsure. Make decisions once and stick with them for a project.</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO USE -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Use the Judgment Guide
        </h2>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              USE THIS GUIDE WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Facing an ambiguous pattern selection decision</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Choosing between complexity levels</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Diagnosing why a pattern isn't working</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Calibrating your current skill level</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Deciding whether to go autonomous</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              DON'T USE THIS GUIDE WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>You need pattern implementation details -> Use specific pattern docs</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>You're debugging code -> Use D-FINAL implementation guide</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>You know exactly which pattern to use -> Skip to that pattern</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Exploring without clear goals -> Just use single session</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>You need prescription, not calibration -> Wrong mindset for this tool</span>
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">When to Break the Rules</h3>

        <div class="decision-box">
          <div class="decision-why">EXPLORATION MODE</div>
          <div class="decision-reasoning">
            <strong>Rules to break:</strong> Structured PRD, defined completion, verification gates<br>
            <strong>Why:</strong> Discovery needs freedom. You don't know what "done" looks like yet.<br>
            <strong>Instead:</strong> Interactive session, let Claude explore, document findings as you go.
          </div>
        </div>

        <div class="decision-box">
          <div class="decision-why">PROTOTYPING</div>
          <div class="decision-reasoning">
            <strong>Rules to break:</strong> Test coverage, quality gates, careful task sizing<br>
            <strong>Why:</strong> Speed over correctness. You'll throw it away anyway.<br>
            <strong>Instead:</strong> Single session, rapid iteration, accept technical debt.
          </div>
        </div>

        <div class="decision-box">
          <div class="decision-why">LEARNING</div>
          <div class="decision-reasoning">
            <strong>Rules to break:</strong> Autonomous execution, efficiency optimization<br>
            <strong>Why:</strong> The goal is understanding, not output.<br>
            <strong>Instead:</strong> HOTL (human on the loop), review every step, ask "why" frequently.
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">Before Going Autonomous - Checklist</h3>

        <div class="checklist">
          <div class="checklist-title">Pre-Autonomous Checklist</div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>Tasks are atomic (2-3 sentence rule)</span>
          </div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>Dependencies ordered by priority</span>
          </div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>Acceptance criteria are verifiable (not subjective)</span>
          </div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>Tests exist or will be created</span>
          </div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>Typecheck included in every story</span>
          </div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>Git branch created</span>
          </div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>progress.txt initialized</span>
          </div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>Max iterations set</span>
          </div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>Verification commands work (npm test, etc.)</span>
          </div>
          <div class="checklist-item">
            <input type="checkbox">
            <span>Budget for expected iterations calculated</span>
          </div>
        </div>

        <p class="text-text-secondary mb-6">
          <strong>If any item is missing:</strong> Stay interactive until ready.
        </p>

      </section>

    </main>

    <!-- Resizer -->
    <div class="resizer" data-resizer="activity-zone" aria-label="Resize activity panel"></div>

    <!-- Activity Zone -->
    <aside class="activity-zone" id="activityZone">
      <div class="text-xs font-semibold text-text-muted uppercase tracking-wider mb-4">Operational Intelligence</div>

      <!-- ESSENCE SECTION -->
      <div class="activity-item inversion" data-section="essence">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if complexity had no cost?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd design:</strong> Always use Gas Town. Maximum capability for everything.<br>
          <strong>Why this fails:</strong> Setup time, debugging difficulty, cognitive overhead, actual dollars.<br>
          <strong>Hidden constraint revealed:</strong> Complexity IS cost. The Judgment Guide is cost accounting.
        </div>
      </div>

      <div class="activity-item minimal" data-section="essence">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">The irreducible judgment heuristic</div>
        <div class="text-text-secondary text-sm">
          <code style="background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;">Start simple. Add complexity only when simpler approaches demonstrably fail.</code><br><br>
          <strong>Essential:</strong> The word "demonstrably".<br>
          <strong>Everything else:</strong> Calibration details.
        </div>
      </div>

      <div class="activity-item invariant" data-section="essence">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">INV-007: Human Judgment Irreplaceable</div>
        <div class="text-text-secondary text-sm">
          The entire Judgment Guide is a manifestation of INV-007. Patterns can be automated. Judgment about WHICH pattern to use cannot. The guide is human judgment, externalized into decision trees.
        </div>
      </div>

      <!-- CORE SECTION -->
      <div class="activity-item constraint" data-section="core">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">One principle -> FIVE downstream decisions</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> "Best pattern is simplest that meets needs"<br>
          -> Default to single session<br>
          -> Only escalate on demonstrated failure<br>
          -> Master levels sequentially<br>
          -> Retreat when struggling<br>
          -> Complexity is an investment, not a goal
        </div>
      </div>

      <div class="activity-item analogy" data-section="core">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Judgment Guide = Engineering Manager</div>
        <div class="text-text-secondary text-sm">
          Level assessment -> Performance review<br>
          Decision trees -> Resource allocation<br>
          Constraint checking -> Risk assessment<br>
          Pattern selection -> Project staffing<br><br>
          <em>If you've been an EM, you already understand pattern selection.</em>
        </div>
      </div>

      <div class="activity-item expertise" data-section="core">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How deep is your judgment?</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "Which pattern should I use?" -> Follow the decision tree<br>
          <strong>Intermediate:</strong> "Why this pattern?" -> Understand the tradeoffs<br>
          <strong>Advanced:</strong> "When to break rules?" -> Know exception contexts<br>
          <strong>Staff:</strong> "How do patterns compose?" -> Design custom hybrids<br>
          <strong>Expert:</strong> "What's unsolved?" -> Contribute new patterns
        </div>
      </div>

      <!-- DECISIONS SECTION -->
      <div class="activity-item tradeoff" data-section="decisions">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">The Capability-Simplicity Dilemma</div>
        <div class="text-text-secondary text-sm">
          <strong>Simple:</strong> Fast to set up, easy to debug, but limited capability<br>
          <strong>Medium:</strong> Balanced, but requires skill to configure<br>
          <strong>Complex:</strong> Powerful, but expensive and fragile<br><br>
          <strong>WHY NO PERFECT ANSWER:</strong> Optimal varies by project, timeline, and expertise.<br>
          <em>Heuristic: If you're spending more time on setup than on work, simplify.</em>
        </div>
      </div>

      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip verification gates</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> You remove "npm run typecheck passes" from criteria<br>
          <strong>THEN:</strong> Claude marks tasks done without checking<br>
          <strong>THEN:</strong> Type errors accumulate silently<br>
          <strong>THEN:</strong> Future iterations build on broken foundation<br>
          <strong>FINALLY:</strong> Entire feature branch is unusable<br><br>
          <em>The fix: Verification is NOT optional. Ever.</em>
        </div>
      </div>

      <div class="activity-item warstory" data-section="decisions">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Jumped to Level 5, regretted it</div>
        <div class="text-text-secondary text-sm">
          "Started with CC Mirror before mastering Ralph. Spent 3 days debugging coordination issues that wouldn't have existed with simple sequential execution. Retreated to Level 3, shipped in 4 hours." - Community report
        </div>
      </div>

      <!-- TREES SECTION -->
      <div class="activity-item gradient" data-section="trees">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How decisions degrade without trees</div>
        <div class="text-text-secondary text-sm">
          <strong>100% -> 90%</strong> (first decisions): "This feels right"<br>
          <strong>90% -> 70%</strong> (5+ decisions): Starting to second-guess<br>
          <strong>70% -> 50%</strong> (10+ decisions): Decision fatigue sets in<br>
          <strong>50% -> CLIFF</strong> (20+ decisions): Analysis paralysis or random choices<br><br>
          <em>Critical: Decision trees eliminate fatigue by removing deliberation.</em>
        </div>
      </div>

      <div class="activity-item horizon" data-section="trees">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">How judgment of decision trees evolves</div>
        <div class="text-text-secondary text-sm">
          <strong>Day 1:</strong> "These trees are too rigid"<br>
          <strong>Week 2:</strong> "The trees saved me from a bad decision"<br>
          <strong>Month 1:</strong> "I know the trees by heart now"<br>
          <strong>Month 3:</strong> "I only consult trees for edge cases"<br><br>
          <em>Don't judge decision trees by day 1 frustration.</em>
        </div>
      </div>

      <div class="activity-item composition" data-section="trees">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">Decision Trees + Level Self-Assessment</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> Trees assume you're at the right level. Self-assessment confirms it.<br>
          <strong>Danger:</strong> Trees can recommend Level 5 to someone at Level 2.<br>
          <strong>Recommendation:</strong> Always assess your level BEFORE following trees. Trees answer "which pattern", not "am I ready for it".
        </div>
      </div>

      <div class="activity-item inversion" data-section="trees">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if every task needed unique judgment?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd face:</strong> Constant deliberation, decision fatigue, inconsistent outcomes.<br>
          <strong>Why this fails:</strong> Most tasks fit common patterns. 80% of decisions are routine.<br>
          <strong>Hidden constraint revealed:</strong> Decision trees exist because most judgment is reusable.
        </div>
      </div>

      <!-- PATH SECTION -->
      <div class="activity-item constraint" data-section="path">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">The 5-step framework's hidden logic</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> You can't configure without selecting<br>
          -> You can't select without knowing constraints<br>
          -> You can't know constraints without assessing complexity<br>
          -> Assessment must come first<br>
          -> Monitoring must come last (needs something to monitor)
        </div>
      </div>

      <div class="activity-item violation" data-section="path">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip constraint checking (Step 2)</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> You select pattern without checking budget<br>
          <strong>THEN:</strong> You choose Gas Town for a $30/mo project<br>
          <strong>THEN:</strong> Costs exceed value in week 1<br>
          <strong>THEN:</strong> Project fails economically<br>
          <strong>FINALLY:</strong> "AI coding is too expensive" (wrong conclusion)<br><br>
          <em>The fix: Always check constraints before selecting patterns.</em>
        </div>
      </div>

      <div class="activity-item analogy" data-section="path">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">The 5 Steps = Project Planning</div>
        <div class="text-text-secondary text-sm">
          Assess Complexity -> Scope estimation<br>
          Check Constraints -> Resource planning<br>
          Select Pattern -> Architecture decision<br>
          Configure -> Sprint planning<br>
          Monitor and Adapt -> Retrospectives<br><br>
          <em>If you've run projects, you already understand the 5-step framework.</em>
        </div>
      </div>

      <!-- GOTCHAS SECTION -->
      <div class="activity-item inflection" data-section="gotchas">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When task size flips from safe to dangerous</div>
        <div class="text-text-secondary text-sm">
          <strong>Small tasks:</strong> Safe but slow (spawn overhead dominates)<br>
          <strong>Medium tasks:</strong> Balanced (sweet spot)<br>
          <strong>Large tasks:</strong> Efficient but risky (context collapse)<br><br>
          <strong>THE INFLECTION:</strong> ~500 lines of code change<br>
          <strong>BEFORE:</strong> "More tasks is safer"<br>
          <strong>AFTER:</strong> "Fewer tasks is more efficient"<br><br>
          <em>Detection: If task description is longer than code change, you've crossed it going backward.</em>
        </div>
      </div>

      <div class="activity-item effect" data-section="gotchas">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="bar-chart-2" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Vague criteria compound across iterations</div>
        <div class="text-text-secondary text-sm">
          At iteration 1: Vague criteria wastes 10 minutes<br>
          At iteration 5: Vague criteria has caused 3 false completions<br>
          At iteration 15: Half the "completed" work needs redoing<br><br>
          <strong>THRESHOLD:</strong> After 5 iterations, vague criteria cost exceeds clear criteria investment by 3x
        </div>
      </div>

      <div class="activity-item warstory" data-section="gotchas">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">The "Works correctly" disaster</div>
        <div class="text-text-secondary text-sm">
          "Acceptance criteria: 'Works correctly'. Claude marked 12 tasks complete. Morning revealed: 8 had subtle bugs, 3 had broken edge cases, 1 passed but broke a different feature. Rewrote all criteria to be verifiable, ran again. Shipped by lunch." - Community report
        </div>
      </div>

      <div class="activity-item frontier" data-section="gotchas">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Optimal task granularity formula</div>
        <div class="text-text-secondary text-sm">
          <strong>THE QUESTION:</strong> Is there a formula for optimal task size? Lines of code? Token count? Complexity score?<br>
          <strong>WHY IT'S HARD:</strong> Optimal varies by codebase familiarity, task type, and model capability.<br>
          <strong>CURRENT BEST PRACTICE:</strong> 2-3 sentence rule + iteration. No automation yet.
        </div>
      </div>

      <!-- HARD SECTION -->
      <div class="activity-item tradeoff" data-section="hard">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">The Automation-Control Paradox</div>
        <div class="text-text-secondary text-sm">
          <strong>THE DILEMMA:</strong><br>
          - Full automation: Maximum leverage, but errors compound silently<br>
          - Full control: Catch every error, but no leverage gained<br>
          - HOTL: Balance, but requires attention you wanted to save<br><br>
          <strong>WHY NO PERFECT ANSWER:</strong> "Walk away" and "catch errors" are mutually exclusive.<br>
          <em>Accept that verification is the compromise. More verification = more safety = less leverage.</em>
        </div>
      </div>

      <div class="activity-item expertise" data-section="hard">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">Understanding the experience gap</div>
        <div class="text-text-secondary text-sm">
          <strong>Beginner:</strong> "Why am I failing at Level 3?" -> Your Level 1-2 foundations are shaky<br>
          <strong>Intermediate:</strong> "How do I know I'm ready?" -> You've shipped 5+ features at current level<br>
          <strong>Advanced:</strong> "When to retreat?" -> When setup time > 2x expected work time<br>
          <strong>Staff:</strong> "Is there a shortcut?" -> No. Experience is the path.<br>
          <strong>Expert:</strong> "Teaching others?" -> They must walk the same path
        </div>
      </div>

      <div class="activity-item inversion" data-section="hard">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if decision fatigue didn't exist?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd design:</strong> Full deliberation for every decision. Custom patterns per task.<br>
          <strong>Why this fails:</strong> Humans have finite cognitive resources. 20 decisions = exhaustion.<br>
          <strong>Hidden constraint revealed:</strong> Decision trees exist because human cognition is limited, not because patterns are simple.
        </div>
      </div>

      <div class="activity-item horizon" data-section="hard">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">How experience gap feels over time</div>
        <div class="text-text-secondary text-sm">
          <strong>Week 1:</strong> "Level 5 looks simple enough"<br>
          <strong>Week 3:</strong> "Why is nothing working?"<br>
          <strong>Month 1:</strong> "I see why I wasn't ready"<br>
          <strong>Month 3:</strong> "Level 3 is actually powerful"<br>
          <strong>Month 6:</strong> "Now Level 5 makes sense"<br><br>
          <em>The gap isn't knowledge. It's internalized pattern recognition.</em>
        </div>
      </div>

      <!-- WHEN SECTION -->
      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">If the Judgment Guide isn't right</div>
        <div class="text-text-secondary text-sm">
          <strong>Need implementation details?</strong><br>
          -> Specific pattern docs (Ralph, CC Mirror, etc.)<br><br>
          <strong>Need debugging help?</strong><br>
          -> D-FINAL implementation guide<br><br>
          <strong>Need to learn patterns?</strong><br>
          -> MASTER-PLAYBOOK.md<br><br>
          <strong>Already know the pattern?</strong><br>
          -> Skip judgment, go to pattern docs
        </div>
      </div>

      <div class="activity-item composition" data-section="when">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">Judgment Guide + Pre-Autonomous Checklist</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> Judgment Guide selects pattern, checklist validates readiness.<br>
          <strong>Danger:</strong> Checklist can pass while pattern selection is wrong.<br>
          <strong>Recommendation:</strong> Always do pattern selection BEFORE checklist. Checklist assumes correct pattern.
        </div>
      </div>

      <div class="activity-item warstory" data-section="when">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Breaking rules correctly: Prototyping mode</div>
        <div class="text-text-secondary text-sm">
          "Needed to explore 3 different API designs. Judgment Guide said 'Interactive session'. But I knew I'd throw away results. Skipped tests, skipped verification, ran 3 parallel sloppy explorations. Found the right approach in 2 hours. THEN applied proper patterns for implementation." - Community report
        </div>
      </div>

      <div class="activity-item invariant" data-section="when">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">INV-006: Simplicity Compensates for Non-Determinism</div>
        <div class="text-text-secondary text-sm">
          The "start simple" principle isn't just pragmatic - it's a fundamental invariant. LLMs are non-deterministic. Simple patterns have fewer failure modes. The Judgment Guide embeds INV-006: "Simplicity compensates for AI unpredictability."
        </div>
      </div>

      <div class="activity-item gradient" data-section="when">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How rule-breaking degrades</div>
        <div class="text-text-secondary text-sm">
          <strong>Correct context (exploration):</strong> Rules broken = speed gained<br>
          <strong>Ambiguous context:</strong> Rules broken = unpredictable outcomes<br>
          <strong>Wrong context (production):</strong> Rules broken = compounding errors<br>
          <strong>Habitual:</strong> Rules broken everywhere = no reliable patterns<br><br>
          <em>Critical: Rules exist for production. Break them only in explicitly non-production contexts.</em>
        </div>
      </div>

      <div class="activity-item minimal" data-section="when">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">The minimal decision framework</div>
        <div class="text-text-secondary text-sm">
          <strong>When in doubt:</strong> Single interactive session.<br><br>
          That's it. One rule that always works. Everything else in this guide is refinement for efficiency. But if you're paralyzed by choice, single session is never wrong.
        </div>
      </div>

    </aside>
  </div>

  <script>
    /**
     * PanelResizer - Handles draggable panel dividers
     */
    class PanelResizer {
      constructor(resizerEl, config = {}) {
        this.resizer = resizerEl;
        this.config = {
          storageKey: 'panel-activity-zone-width',
          minWidth: 280,
          maxWidth: 900,
          defaultWidth: 480,
          ...config
        };

        this.isResizing = false;
        this.startX = 0;
        this.startWidth = 0;

        this.activityZone = document.querySelector('.activity-zone');
        this.mainContent = document.querySelector('.main-content');

        this.onMouseDown = this.onMouseDown.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
        this.onMouseUp = this.onMouseUp.bind(this);

        this.init();
      }

      init() {
        this.restoreWidth();
        this.resizer.addEventListener('mousedown', this.onMouseDown);
      }

      onMouseDown(e) {
        if (e.button !== 0) return;

        this.isResizing = true;
        this.startX = e.clientX;
        this.startWidth = this.activityZone.offsetWidth;

        this.resizer.classList.add('active');
        document.body.classList.add('resizing');

        document.addEventListener('mousemove', this.onMouseMove);
        document.addEventListener('mouseup', this.onMouseUp);

        e.preventDefault();
      }

      onMouseMove(e) {
        if (!this.isResizing) return;

        const delta = this.startX - e.clientX;
        const newWidth = this.startWidth + delta;

        const constrainedWidth = Math.max(
          this.config.minWidth,
          Math.min(this.config.maxWidth, newWidth)
        );

        this.activityZone.style.width = constrainedWidth + 'px';
        this.mainContent.style.marginRight = constrainedWidth + 'px';
        this.resizer.style.right = constrainedWidth + 'px';
      }

      onMouseUp(e) {
        if (!this.isResizing) return;

        this.isResizing = false;

        this.resizer.classList.remove('active');
        document.body.classList.remove('resizing');

        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);

        this.saveWidth();
      }

      saveWidth() {
        const width = this.activityZone.offsetWidth;
        localStorage.setItem(this.config.storageKey, JSON.stringify({
          width,
          timestamp: Date.now()
        }));
      }

      restoreWidth() {
        try {
          const stored = localStorage.getItem(this.config.storageKey);
          if (stored) {
            const { width } = JSON.parse(stored);
            if (width >= this.config.minWidth && width <= this.config.maxWidth) {
              this.activityZone.style.width = width + 'px';
              this.mainContent.style.marginRight = width + 'px';
              this.resizer.style.right = width + 'px';
            }
          }
        } catch (e) {
          console.warn('Failed to restore panel width:', e);
        }
      }

      destroy() {
        this.resizer.removeEventListener('mousedown', this.onMouseDown);
        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);
      }
    }

    // Auto-initialize resizers on DOM ready
    document.addEventListener('DOMContentLoaded', () => {
      const resizers = document.querySelectorAll('[data-resizer]');
      resizers.forEach(resizer => new PanelResizer(resizer));
    });

    // Initialize Lucide icons
    lucide.createIcons();

    // Navigation toggle
    function toggleSection(header) {
      const section = header.closest('.nav-section');
      section.classList.toggle('expanded');
      const children = section.querySelector('.nav-children');
      children.classList.toggle('expanded');
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const nav = document.getElementById('leftNav');
      nav.classList.toggle('open');
    }

    // Copy functionality
    function copyCode(btn, text) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check" class="w-3 h-3"></i> Copied!';
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = originalText;
          lucide.createIcons();
        }, 2000);
      });
    }

    function copyCodeBlock(btn) {
      const codeBlock = btn.closest('.code-block');
      const pre = codeBlock.querySelector('pre');
      const text = pre.textContent;
      copyCode(btn, text);
    }

    // Scroll-sync with GSAP ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    // Track which sections are in view
    const sections = document.querySelectorAll('[data-activity]');
    const activityItems = document.querySelectorAll('.activity-item');

    sections.forEach(section => {
      ScrollTrigger.create({
        trigger: section,
        start: 'top 40%',
        end: 'bottom 40%',
        onEnter: () => activateSection(section.dataset.activity),
        onEnterBack: () => activateSection(section.dataset.activity),
      });
    });

    function activateSection(sectionName) {
      activityItems.forEach(item => {
        if (item.dataset.section === sectionName) {
          item.classList.add('active');
          gsap.to(item, {
            opacity: 1,
            y: -2,
            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
            duration: 0.3,
            ease: 'power2.out'
          });
        } else {
          item.classList.remove('active');
          gsap.to(item, {
            opacity: 0.5,
            y: 0,
            boxShadow: 'none',
            duration: 0.3,
            ease: 'power2.out'
          });
        }
      });

      // Update nav active state
      document.querySelectorAll('.nav-section-header').forEach(header => {
        header.classList.remove('active');
      });
      const activeNav = document.querySelector(`[data-section="${sectionName}"] .nav-section-header`);
      if (activeNav) {
        activeNav.classList.add('active');
      }
    }

    // Initialize first section as active
    activateSection('essence');

    // Smooth scroll for nav links
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.nav-item').forEach(l => l.classList.remove('active'));
          link.classList.add('active');
        }
      });
    });

    // Brushing interaction - hover activity item highlights related content
    activityItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = 'rgba(13, 147, 115, 0.05)';
          relatedSection.style.transition = 'background-color 0.3s ease';
        }
      });

      item.addEventListener('mouseleave', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = '';
        }
      });
    });
  </script>
</body>
</html>
