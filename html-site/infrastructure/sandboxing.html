<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Agent SDK in Cloudflare Sandboxes - Infrastructure</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <nav class="breadcrumb">
        <a href="../index.html">Home</a> &raquo; <a href="index.html">Infrastructure</a> &raquo; Cloudflare Sandboxes
    </nav>

    <header>
        <h1><span class="bionic">Cla</span>ude Agent SDK in <span class="bionic">Clo</span>udflare <span class="bionic">San</span>dboxes</h1>
        <p class="subtitle"><span class="bionic">Pro</span>duction agent <span class="bionic">arc</span>hitecture with <span class="bionic">ski</span>lls, SDK, and <span class="bionic">iso</span>lated execution</p>
    </header>

    <main>
        <div class="you-are-here">
            <h2>You Are Here</h2>
            <p><strong><span class="bionic">Con</span>text:</strong> This covers <span class="bionic">dep</span>loying Claude Code <span class="bionic">ski</span>lls to production <span class="bionic">env</span>ironments using <span class="bionic">Clo</span>udflare sandboxes. The <span class="bionic">pat</span>tern: prototype <span class="bionic">loc</span>ally, deploy <span class="bionic">unc</span>hanged to cloud.</p>
            <p><strong><span class="bionic">Whe</span>re this fits:</strong> When you need to take <span class="bionic">ski</span>lls from local <span class="bionic">dev</span>elopment to <span class="bionic">pro</span>duction-grade deployment. <span class="bionic">Ess</span>ential for agents that <span class="bionic">wri</span>te/execute code <span class="bionic">dyn</span>amically.</p>
        </div>

        <hr class="divider-context">

        <section id="source">
            <h2><span class="bionic">Sou</span>rce</h2>
            <div class="tool-meta">
                <span class="tag">@johnturner</span>
                <span class="tag">397 likes</span>
                <span class="tag">746 bookmarks</span>
                <span class="tag tag-yellow">Medium Lift</span>
            </div>

            <blockquote>"Finally got the Claude Agent SDK running in Cloudflare sandboxes. This unlocks something special."</blockquote>

            <blockquote>"If you include skills in the Claude SDK loop and give it a sandbox, everything clicks. Skills are like mini apps the agent can use. It becomes one of the most powerful agents I've worked with."</blockquote>
        </section>

        <hr class="divider-procedure">

        <section id="journey">
            <h2>The <span class="bionic">Jou</span>rney</h2>

            <div class="comparison-grid">
                <div class="comparison-before">
                    <h3>Before: DIY Tool <span class="bionic">Loo</span>p Pain</h3>
                    <ul>
                        <li>Used Direct API to build own tool loop harness</li>
                        <li>Worked, but wasn't consistent</li>
                        <li>Kept hitting edge cases and reliability issues</li>
                    </ul>
                </div>

                <div class="comparison-after">
                    <h3>After: SDK + Skills + <span class="bionic">San</span>dbox</h3>
                    <ul>
                        <li>Everything clicks when you combine:</li>
                        <li>Claude Agent SDK (official harness)</li>
                        <li>Skills (mini apps)</li>
                        <li>Sandbox (Cloudflare)</li>
                    </ul>
                </div>
            </div>
        </section>

        <hr class="divider-procedure">

        <section id="architecture">
            <h2><span class="bionic">Arc</span>hitecture</h2>

            <div class="code-block">
                <pre><code>Local Development (Claude Code)
         |
    Skills (mini apps)
         |
  Claude Agent SDK
         |
  Cloudflare Sandbox
         |
  Production Deployment</code></pre>
            </div>

            <h3>The <span class="bionic">Sta</span>ck</h3>
            <div class="code-block">
                <pre><code>Claude Agent SDK = reliable tool loop
         +
Skills = composable mini-applications
         +
Sandbox = safe code execution
         =
Production-capable agent</code></pre>
            </div>
        </section>

        <hr class="divider-procedure">

        <section id="technical">
            <h2>Key <span class="bionic">Tec</span>hnical <span class="bionic">Det</span>ails</h2>

            <div class="detail-card">
                <h3><span class="bionic">Ses</span>sion <span class="bionic">Per</span>sistence</h3>
                <p>Save transcript & session in <strong>Durable Object</strong> after each method. This allows resume if sandbox dies - critical for production reliability.</p>
            </div>

            <div class="detail-card">
                <h3><span class="bionic">Web</span>sockets</h3>
                <p>Used for real-time interaction in email/chatbot style usage patterns.</p>
            </div>

            <div class="detail-card">
                <h3><span class="bionic">San</span>dbox Tier <span class="bionic">Req</span>uirements</h3>
                <p>Needs at least <strong>"standard-2"</strong> tier. Required for responses &gt;10 seconds. Lower tiers too slow for agent workloads.</p>
            </div>
        </section>

        <hr class="divider-procedure">

        <section id="use-case">
            <h2>Use Case: Data <span class="bionic">Ana</span>lysis <span class="bionic">Age</span>nts</h2>

            <p>Agents that:</p>
            <ol>
                <li>Pull data from sources</li>
                <li>Dynamically write code in sandbox</li>
                <li>Execute code safely</li>
                <li>Return analyzed results</li>
            </ol>

            <div class="insight-box">
                <strong>Why sandbox matters:</strong> More reliable than pure LLM math (prevents hallucinations in calculations).
            </div>
        </section>

        <hr class="divider-procedure">

        <section id="workflow">
            <h2><span class="bionic">Dev</span>elopment <span class="bionic">Wor</span>kflow</h2>

            <blockquote>"The best part is you can develop skills locally with Claude Code on desktop, test them fast, then deploy to your Cloudflare sandbox running the SDK. Rapid iteration without the deployment friction."</blockquote>

            <h3>The <span class="bionic">Flo</span>w</h3>
            <ol>
                <li><strong>Prototype</strong> skills locally in Claude Code</li>
                <li><strong>Test</strong> fast on desktop</li>
                <li><strong>Deploy</strong> unchanged to Cloudflare sandbox</li>
                <li><strong>Run</strong> via Agent SDK in production</li>
            </ol>

            <div class="checkpoint">
                <h4 class="checkpoint-header">Checkpoint: Development Flow Working</h4>
                <ul>
                    <li>Skills run identically on desktop and in cloud</li>
                    <li>No code changes required for deployment</li>
                    <li>Rapid iteration cycle maintained</li>
                </ul>
            </div>
        </section>

        <hr class="divider-procedure">

        <section id="resources">
            <h2><span class="bionic">Res</span>ources & <span class="bionic">Lin</span>ks</h2>

            <table>
                <tr><th>Resource</th><th>URL</th></tr>
                <tr><td>Starter Template</td><td><code>github.com/craigsdennis/claude-in-the-box</code></td></tr>
                <tr><td>Setup Video</td><td><code>youtube.com/watch?v=jEuIgwYx8dQ</code></td></tr>
                <tr><td>Sessions Docs</td><td><code>platform.claude.com/docs/en/agent-sdk/sessions</code></td></tr>
            </table>

            <h3><span class="bionic">Com</span>munity <span class="bionic">Alt</span>ernatives</h3>
            <ul>
                <li><code>github.com/Mng-dev-ai/claudex</code></li>
                <li><code>github.com/kernl-sdk/kernl</code></li>
                <li>Daytona.io Claude integration</li>
            </ul>
        </section>

        <hr class="divider-procedure">

        <section id="when-to-use">
            <h2>When to Use <span class="bionic">Thi</span>s vs <span class="bionic">Pla</span>in Claude Code</h2>

            <table>
                <tr><th>Use Case</th><th>Recommendation</th></tr>
                <tr><td>Personal, single-user skills</td><td>Plain Claude Code on desktop</td></tr>
                <tr><td>Distributable/production agents</td><td>SDK + Cloudflare Sandbox</td></tr>
                <tr><td>Chatbots, email agents</td><td>SDK + Cloudflare Sandbox</td></tr>
                <tr><td>Dynamic code execution</td><td>SDK + Sandbox (essential)</td></tr>
            </table>
        </section>

        <hr class="divider-procedure">

        <section id="caveats">
            <h2><span class="bionic">Cav</span>eats & <span class="bionic">Got</span>chas</h2>

            <details class="troubleshoot">
                <summary>DIY harness pain</summary>
                <p>Direct API + custom harness leads to frequent edge cases. The official SDK handles these.</p>
            </details>

            <details class="troubleshoot">
                <summary>Sandbox latency</summary>
                <p>May need higher tier (standard-2+) for reasonable performance on agent workloads.</p>
            </details>

            <details class="troubleshoot">
                <summary>Session persistence required</summary>
                <p>If sandbox dies, you need Durable Objects + save after each step. Plan for this from the start.</p>
            </details>

            <details class="troubleshoot">
                <summary>Not for simple personal use</summary>
                <p>Plain Claude Code on desktop may suffice for individual workflows.</p>
            </details>

            <details class="troubleshoot">
                <summary>Still early/experimental</summary>
                <p>Author only recently got it working - expect some rough edges.</p>
            </details>
        </section>

        <hr class="divider-checkpoint">

        <section id="principles">
            <h2>Key <span class="bionic">Pri</span>nciples</h2>

            <ol>
                <li><strong>Stop fighting brittle DIY tool loops</strong> - Use Anthropic's official harness</li>
                <li><strong>Skills = composable, reusable mini-apps</strong> - The agent can call them reliably</li>
                <li><strong>Sandbox is essential</strong> - For any agent that writes/executes code dynamically</li>
                <li><strong>Local -> Cloud symmetry</strong> - Prototype fast on desktop, ship unchanged to production</li>
                <li><strong>Reliability over raw speed</strong> - Sandbox + SDK handles edge cases far better</li>
            </ol>
        </section>

        <hr class="divider-checkpoint">

        <section id="pattern">
            <h2>The <span class="bionic">Pat</span>tern</h2>

            <p>This represents the emerging <span class="bionic">"Cla</span>ude Code local -> <span class="bionic">pro</span>duction agent" <span class="bionic">wor</span>kflow:</p>

            <ol>
                <li><strong>Prototype</strong> in Claude desktop</li>
                <li><strong>Package</strong> as skills</li>
                <li><strong>Run</strong> in isolated sandbox via official SDK</li>
                <li><strong>Deploy</strong> serverlessly</li>
            </ol>

            <div class="insight-box">
                <strong>Key Insight:</strong> "The combination of Anthropic harness + Cloudflare isolation appears to be one of the most reliable paths for agentic apps right now."
            </div>
        </section>

        <div class="milestone">
            Cloudflare Sandboxing Guide Complete!
        </div>
    </main>

    <footer>
        <p>Research compiled January 2026 | <a href="../index.html">Back to Index</a></p>
    </footer>

    <script>
    function copyCode(button) {
        const codeBlock = button.parentElement.querySelector('pre code, pre');
        navigator.clipboard.writeText(codeBlock.textContent);
        button.textContent = 'Copied!';
        setTimeout(() => button.textContent = 'Copy', 2000);
    }
    </script>
</body>
</html>
