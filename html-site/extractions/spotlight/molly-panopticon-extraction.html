<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personal Panopticon | Claude Code Documentation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- GSAP for scroll-sync -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Tailwind Config with Design Tokens -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-base': '#ffffff',
            'bg-subtle': '#fafafa',
            'bg-muted': '#f4f4f5',
            'text-primary': '#18181b',
            'text-secondary': '#3f3f46',
            'text-muted': '#71717a',
            'accent': '#0D9373',
            'accent-light': '#10b981',
            'accent-bg': '#ecfdf5',
            'border': '#e4e4e7',
            // Activity Zone content type colors (Original 6)
            'az-invariant': '#3b82f6',    // Blue
            'az-effect': '#f59e0b',       // Amber
            'az-composition': '#8b5cf6',  // Purple
            'az-frontier': '#ef4444',     // Red
            'az-warstory': '#10b981',     // Green
            'az-alternative': '#6b7280',  // Gray
            // Activity Zone generative content types (New 10)
            'az-inversion': '#4f46e5',    // Indigo
            'az-constraint': '#8b5cf6',   // Violet
            'az-gradient': '#f43f5e',     // Rose
            'az-horizon': '#06b6d4',      // Cyan
            'az-violation': '#f97316',    // Orange
            'az-tradeoff': '#f59e0b',     // Amber
            'az-analogy': '#d946ef',      // Fuchsia
            'az-expertise': '#10b981',    // Emerald
            'az-minimal': '#84cc16',      // Lime
            'az-inflection': '#eab308',   // Yellow
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Fira Code', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    /* Base Styles */
    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    [id] {
      scroll-margin-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: #ffffff;
      color: #18181b;
      line-height: 1.7;
    }

    /* Three Panel Layout */
    .three-panel-layout {
      min-height: 100vh;
      position: relative;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: #ffffff;
      border-bottom: 1px solid #e4e4e7;
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 24px;
    }

    /* Left Navigation - 240px fixed */
    .left-nav {
      position: fixed;
      top: 56px;
      left: 0;
      width: 240px;
      height: calc(100vh - 56px);
      border-right: 1px solid #e4e4e7;
      background: #ffffff;
      overflow-y: auto;
      padding: 16px 0;
      z-index: 40;
    }

    .nav-section {
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 500;
      color: #3f3f46;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.15s;
    }

    .nav-section-header:hover {
      background: #f4f4f5;
    }

    .nav-section-header.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-item {
      display: block;
      padding: 6px 12px 6px 44px;
      font-size: 14px;
      color: #71717a;
      text-decoration: none;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-item:hover {
      color: #3f3f46;
      background: #f4f4f5;
    }

    .nav-item.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-children {
      display: none;
      overflow: hidden;
    }

    .nav-children.expanded {
      display: block;
    }

    .nav-chevron {
      transition: transform 0.2s;
    }

    .nav-section.expanded .nav-chevron {
      transform: rotate(90deg);
    }

    /* Main Content - Flexible, margins for fixed sidebars */
    .main-content {
      margin-left: 240px;
      margin-right: 480px;
      margin-top: 56px;
      padding: 48px 48px;
      min-width: 400px;
    }

    /* Activity Zone - 480px fixed */
    .activity-zone {
      position: fixed;
      top: 56px;
      right: 0;
      width: 480px;
      height: calc(100vh - 56px);
      border-left: 1px dashed #e4e4e7;
      background: #fafafa;
      overflow-y: auto;
      padding: 24px 20px;
      z-index: 40;
    }

    /* Responsive: Hide Activity Zone below 1400px */
    @media (max-width: 1400px) {
      .activity-zone {
        display: none;
      }
      .main-content {
        margin-right: 0;
        padding: 40px 32px;
      }
    }

    /* Responsive: Hide Left Nav below 768px */
    @media (max-width: 768px) {
      .left-nav {
        display: none;
      }
      .left-nav.open {
        display: block;
        position: fixed;
        top: 56px;
        left: 0;
        right: 0;
        bottom: 0;
        background: #ffffff;
        z-index: 50;
        overflow-y: auto;
      }
      .main-content {
        margin-left: 0;
        padding: 24px 16px;
        min-width: auto;
      }
    }

    /* Resizer */
    .resizer {
      position: fixed;
      top: 56px;
      right: 480px;
      width: 6px;
      height: calc(100vh - 56px);
      cursor: col-resize;
      background: transparent;
      z-index: 50;
      transition: background 0.15s ease;
    }

    .resizer:hover {
      background: rgba(13, 147, 115, 0.15);
    }

    .resizer.active {
      background: rgba(13, 147, 115, 0.25);
    }

    body.resizing {
      user-select: none;
      cursor: col-resize !important;
    }

    body.resizing * {
      cursor: col-resize !important;
    }

    @media (max-width: 1400px) {
      .resizer {
        display: none;
      }
    }

    /* Activity Zone Items */
    .activity-item {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      background: #ffffff;
      border: 1px solid #e4e4e7;
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .activity-item.active {
      opacity: 1;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .activity-item:hover {
      opacity: 1;
    }

    .activity-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Activity Zone content type borders (Original 6) */
    .activity-item.invariant { border-left: 4px solid #3b82f6; }
    .activity-item.effect { border-left: 4px solid #f59e0b; }
    .activity-item.composition { border-left: 4px solid #8b5cf6; }
    .activity-item.frontier { border-left: 4px solid #ef4444; }
    .activity-item.warstory { border-left: 4px solid #10b981; }
    .activity-item.alternative { border-left: 4px solid #6b7280; }

    /* Activity Zone generative content types (New 10) */
    .activity-item.inversion { border-left: 4px solid #4f46e5; }
    .activity-item.constraint { border-left: 4px solid #8b5cf6; }
    .activity-item.gradient { border-left: 4px solid #f43f5e; }
    .activity-item.horizon { border-left: 4px solid #06b6d4; }
    .activity-item.violation { border-left: 4px solid #f97316; }
    .activity-item.tradeoff { border-left: 4px solid #f59e0b; }
    .activity-item.analogy { border-left: 4px solid #d946ef; }
    .activity-item.expertise { border-left: 4px solid #10b981; }
    .activity-item.minimal { border-left: 4px solid #84cc16; }
    .activity-item.inflection { border-left: 4px solid #eab308; }

    /* Main Content Components */
    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: #0D9373;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      border-radius: 50%;
      margin-right: 12px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: #18181b;
      margin-bottom: 20px;
      margin-top: 56px;
      display: flex;
      align-items: center;
    }

    .section-title:first-child {
      margin-top: 0;
    }

    /* Essence Box */
    .essence-box {
      background: linear-gradient(135deg, #18181b 0%, #27272a 100%);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 40px;
    }

    .essence-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #10b981;
      margin-bottom: 12px;
    }

    .essence-text {
      font-size: 22px;
      font-weight: 500;
      color: #ffffff;
      line-height: 1.4;
    }

    /* Core Abstraction Box */
    .core-abstraction {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .core-philosophy {
      font-size: 16px;
      color: #3f3f46;
      margin-bottom: 16px;
      font-style: italic;
    }

    .core-code {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 16px;
      overflow-x: auto;
    }

    .core-code code {
      font-family: 'Fira Code', monospace;
      font-size: 15px;
      color: #10b981;
      white-space: nowrap;
    }

    .core-anchor {
      font-size: 14px;
      color: #71717a;
      text-align: center;
    }

    /* Decision Box */
    .decision-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .decision-why {
      font-size: 16px;
      font-weight: 600;
      color: #0D9373;
      margin-bottom: 12px;
    }

    .decision-reasoning {
      font-size: 14px;
      color: #3f3f46;
      margin-bottom: 16px;
    }

    .decision-implication {
      background: #f4f4f5;
      border-radius: 8px;
      padding: 16px;
    }

    .decision-implication-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: #71717a;
      margin-bottom: 8px;
    }

    /* Code Blocks */
    .code-block {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 24px;
      position: relative;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
      color: #e4e4e7;
      line-height: 1.6;
    }

    .code-block .comment { color: #6b7280; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #10b981; }
    .code-block .variable { color: #60a5fa; }

    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #3f3f46;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: background 0.15s;
    }

    .copy-btn:hover {
      background: #52525b;
    }

    /* Path Steps */
    .path-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .path-step {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .path-step:last-child {
      margin-bottom: 0;
    }

    .path-number {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: #0D9373;
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .path-content {
      flex: 1;
      font-size: 14px;
      color: #3f3f46;
    }

    .path-content code {
      background: #e4e4e7;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }

    /* Gotcha Box */
    .gotcha-box {
      background: #fffbeb;
      border: 1px solid #fcd34d;
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .gotcha-title {
      font-weight: 600;
      color: #92400e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .gotcha-detail {
      font-size: 14px;
      color: #78350f;
      margin-bottom: 8px;
    }

    .gotcha-detail strong {
      color: #92400e;
    }

    /* What's Hard Box */
    .hard-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .hard-title {
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hard-detail {
      font-size: 14px;
      color: #7f1d1d;
      margin-bottom: 8px;
    }

    /* When To Use Grid */
    .when-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    @media (max-width: 900px) {
      .when-grid {
        grid-template-columns: 1fr;
      }
    }

    .when-use {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 24px;
    }

    .when-not {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 24px;
    }

    .when-title {
      font-weight: 600;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .when-use .when-title { color: #166534; }
    .when-not .when-title { color: #991b1b; }

    .when-item {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .when-use .when-item { color: #166534; }
    .when-not .when-item { color: #991b1b; }

    /* Quote Box */
    .quote-box {
      background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
      border-left: 4px solid #0D9373;
      border-radius: 8px;
      padding: 20px;
      margin: 24px 0;
      font-style: italic;
      color: #3f3f46;
    }

    .quote-attribution {
      margin-top: 12px;
      font-style: normal;
      font-size: 13px;
      color: #71717a;
    }

    /* Domain Cards */
    .domain-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }

    @media (max-width: 768px) {
      .domain-grid {
        grid-template-columns: 1fr;
      }
    }

    .domain-card {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 8px;
      padding: 16px;
    }

    .domain-name {
      font-family: 'Fira Code', monospace;
      font-size: 14px;
      color: #0D9373;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .domain-desc {
      font-size: 13px;
      color: #71717a;
    }

    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: none;
      padding: 8px;
      background: none;
      border: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #fafafa;
    }

    ::-webkit-scrollbar-thumb {
      background: #d4d4d8;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1aa;
    }

    .kbd {
      display: inline-flex;
      align-items: center;
      padding: 2px 6px;
      background: #f4f4f5;
      border: 1px solid #e4e4e7;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      color: #71717a;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
      <i data-lucide="menu" class="w-5 h-5 text-text-secondary"></i>
    </button>
    <div class="flex items-center gap-3">
      <i data-lucide="eye" class="w-5 h-5 text-accent"></i>
      <span class="font-semibold text-text-primary">Claude Code</span>
    </div>
    <div class="flex-1 flex justify-center">
      <button class="flex items-center gap-2 px-4 py-2 bg-bg-muted rounded-lg text-text-muted text-sm hover:bg-border transition-colors">
        <i data-lucide="search" class="w-4 h-4"></i>
        <span>Search documentation...</span>
        <span class="kbd">Cmd+K</span>
      </button>
    </div>
    <div class="flex items-center gap-4">
      <a href="#" class="text-sm text-text-muted hover:text-text-primary transition-colors">Support</a>
      <button class="p-2 hover:bg-bg-muted rounded-lg transition-colors" aria-label="Toggle theme">
        <i data-lucide="sun" class="w-4 h-4 text-text-muted"></i>
      </button>
    </div>
  </header>

  <div class="three-panel-layout">
    <!-- Left Navigation -->
    <nav class="left-nav" id="leftNav">
      <div class="nav-content"></div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">Reverse the panopticon: 8 AI instances surveilling yourself with thousand-clone attention span.</div>
        </div>

        <div class="quote-box">
          "The feeling is hard to name. It is the violent gap between how blind you were and how obvious everything feels now with an observer that reads all the feeds, catches what you've unconsciously dropped, notices patterns across domains you'd kept stubbornly separate, and---crucially---tells you what to do about it."
          <div class="quote-attribution">-- Molly Cantillon (@mollycantillon)</div>
        </div>
      </section>

      <!-- Section 2: CORE ABSTRACTION + IMPLEMENTATION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Core Abstraction
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"Institutions can see you. You cannot see yourself the same way. Build your own apparatus of sight."</div>

          <div class="core-code">
            <button class="copy-btn" onclick="copyCode(this, 'tmux new-session -d -s trades \"cd ~/trades && claude\"')">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <code>tmux new-session -d -s trades "cd ~/trades && claude"</code>
          </div>

          <div class="core-anchor">8 domains. 8 isolated Claude instances. Each owns a life domain.</div>
        </div>

        <p class="text-text-secondary mb-6">
          Pre-modern states were blind to their citizens. To govern, they built apparatus of sight: censuses, cadastral maps, registration systems. Corporations perfected this. Every click, purchase, and pause generates behavioral data. They see you. You cannot see yourself the same way.
        </p>

        <p class="text-text-secondary mb-6">
          <strong>Self-legibility</strong> is building your own surveillance infrastructure. Not to control yourself punitively, but to SEE yourself with the same clarity that institutions achieve. You reverse the panopticon: instead of an external observer watching you from a tower, you ARE the observer.
        </p>

        <h3 class="font-semibold text-lg mb-4 mt-8">The 8-Domain Architecture</h3>

        <div class="domain-grid">
          <div class="domain-card">
            <div class="domain-name">~/nox</div>
            <div class="domain-desc">Company/Product - Startup operations, engineering decisions</div>
          </div>
          <div class="domain-card">
            <div class="domain-name">~/metrics</div>
            <div class="domain-desc">Analytics/Data - Quantitative insights, data processing</div>
          </div>
          <div class="domain-card">
            <div class="domain-name">~/email</div>
            <div class="domain-desc">Communications - Inbox management, drafts, outbound</div>
          </div>
          <div class="domain-card">
            <div class="domain-name">~/growth</div>
            <div class="domain-desc">Marketing/Acquisition - A/B testing, audience building</div>
          </div>
          <div class="domain-card">
            <div class="domain-name">~/trades</div>
            <div class="domain-desc">Personal Finance - Market intelligence, morning briefs</div>
          </div>
          <div class="domain-card">
            <div class="domain-name">~/health</div>
            <div class="domain-desc">Fitness/Wellness - WHOOP integration, workout plans</div>
          </div>
          <div class="domain-card">
            <div class="domain-name">~/writing</div>
            <div class="domain-desc">Content Creation - Creative output, drafts</div>
          </div>
          <div class="domain-card">
            <div class="domain-name">~/personal</div>
            <div class="domain-desc">Life Admin - Subscriptions, personal projects</div>
          </div>
        </div>

        <p class="text-text-secondary mb-6">
          Each domain operates INDEPENDENTLY. There is no shared context. ~/trades does not see ~/health's recovery scores. ~/email does not see ~/nox's product decisions. This isolation serves context purity, security boundaries, and blast radius containment.
        </p>
      </section>

      <!-- Section 3: DESIGN DECISIONS -->
      <section id="why-8-domains" data-activity="decisions">
        <h2 class="section-title">
          <span class="section-number">3</span>
          Design Decisions
        </h2>

        <div class="decision-box">
          <div class="decision-why">WHY 8 DOMAINS (NOT 3 OR 20)?</div>
          <div class="decision-reasoning">
            8 covers work (4) + life (4) comprehensively without excessive coordination overhead. Fewer means cramming unrelated contexts together. More means management costs exceed insight benefits.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Start with 3-5 domains where you feel most blind. Expand only when clear need emerges. If you constantly wonder "which domain handles this?", your taxonomy is wrong.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-isolation">
          <div class="decision-why">WHY STRICT ISOLATION?</div>
          <div class="decision-reasoning">
            Each domain optimizes for something different. ~/health optimizes for physical wellbeing. ~/trades optimizes for risk-adjusted returns. These objectives can conflict. Isolation prevents one domain's optimization from corrupting another's.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              No shared state between instances. Explicit handoffs via ~/shared/ when information MUST cross domains. Each domain can fail without corrupting others.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-filesystem">
          <div class="decision-why">WHY FILESYSTEM AS MEMORY?</div>
          <div class="decision-reasoning">
            Claude sessions are ephemeral. Files are durable. An agent that writes to files has persistent state without needing special memory infrastructure. Files survive sessions, are easy to backup, and require no special tooling.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              The directory IS the memory. The agent can read what it wrote yesterday, append to logs, update status files, read data exports. No external database required.
            </div>
          </div>
        </div>

        <div class="decision-box">
          <div class="decision-why">WHY CRON AUTOMATION?</div>
          <div class="decision-reasoning">
            You want overnight data pulls, morning briefs, continuous monitoring without manual intervention. Cron provides scheduling. The system works while you sleep.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Schedule domain runs for optimal times. ~/trades pulls data at 5 AM. Morning briefs synthesize at 6 AM. You wake up to integrated insights.
            </div>
          </div>
        </div>

        <div class="decision-box">
          <div class="decision-why">WHY SUBAGENTS WITHIN DOMAINS?</div>
          <div class="decision-reasoning">
            Tasks that would bloat context are delegated to short-lived subagents. The subagent handles one thing, terminates, and results are summarized back. This prevents any single agent from growing unbounded context.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              "Parse this document" becomes a subagent. "Scrape this data" becomes a subagent. The parent domain agent stays lean.
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: FILE STRUCTURE -->
      <section id="file-structure" data-activity="files">
        <h2 class="section-title">
          <span class="section-number">4</span>
          The File Structure
        </h2>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre>~/                               <span class="comment"># Home directory</span>
<span class="comment">├── nox/                         # Domain: Company/Product</span>
│   ├── CLAUDE.md                <span class="comment"># Domain-specific rules</span>
│   ├── data/                    <span class="comment"># Amplitude exports, metrics</span>
│   └── blockers.md              <span class="comment"># Current blockers</span>
│
<span class="comment">├── trades/                      # Domain: Personal Finance</span>
│   ├── CLAUDE.md
│   ├── briefs/                  <span class="comment"># Morning briefs</span>
│   │   └── YYYY-MM-DD.md
│   ├── data/                    <span class="comment"># Market data</span>
│   └── .secrets/                <span class="comment"># Brokerage credentials (gitignored)</span>
│
<span class="comment">├── health/                      # Domain: Fitness/Wellness</span>
│   ├── CLAUDE.md
│   ├── data/
│   │   ├── whoop/               <span class="comment"># WHOOP exports</span>
│   │   └── apple-health/        <span class="comment"># Apple Health exports</span>
│   └── status/
│       └── current.json
│
<span class="comment">├── personal/                    # Domain: Life Admin</span>
│   ├── CLAUDE.md
│   └── subscriptions/           <span class="comment"># The $2000 discovery</span>
│
<span class="comment">├── shared/                      # Cross-domain handoffs</span>
│   ├── handoff-trades-to-personal.json
│   └── handoff-template.json
│
<span class="comment">├── correlation/                 # Meta-observer layer</span>
│   ├── CLAUDE.md                <span class="comment"># Read-only cross-domain rules</span>
│   ├── feeds/                   <span class="comment"># Symlinks to domain outputs</span>
│   │   ├── trades-brief -> ~/trades/briefs/latest.md
│   │   ├── health-status -> ~/health/status/current.json
│   │   └── nox-blockers -> ~/nox/blockers.md
│   └── output/
│       └── daily-synthesis.md
│
└── start-panopticon.sh          <span class="comment"># Startup script</span></pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="claude-md">~/trades/CLAUDE.md Example</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Domain: Personal Finance & Trading</span>

<span class="comment">## Data Sources</span>
- Brokerage exports in ./data/
- Congressional disclosures from House API
- Polymarket odds via MCP
- X sentiment from firehose

<span class="comment">## Morning Brief Protocol</span>
1. Pull overnight data
2. Cross-reference against positions
3. Flag material changes
4. Output to ./briefs/YYYY-MM-DD.md

<span class="comment">## Risk Rules</span>
- NEVER execute actual trades
- Flag any position >5% of portfolio
- Always note data freshness</pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="startup-script">start-panopticon.sh</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment">#!/bin/bash</span>
<span class="comment"># Launch all domain sessions in tmux</span>

DOMAINS="nox metrics email growth trades health writing personal"

<span class="keyword">for</span> domain <span class="keyword">in</span> $DOMAINS; <span class="keyword">do</span>
    <span class="keyword">cd</span> ~/$domain
    tmux new-session -d -s $domain <span class="string">"claude"</span>
<span class="keyword">done</span>

<span class="keyword">echo</span> <span class="string">"All domains launched. Use 'tmux attach -t &lt;domain&gt;' to connect."</span>
<span class="keyword">echo</span> <span class="string">"List sessions: tmux ls"</span>
<span class="keyword">echo</span> <span class="string">"Detach: Ctrl-b d"</span></pre>
        </div>
      </section>

      <!-- Section 5: PATH OF A TASK -->
      <section id="path" data-activity="path">
        <h2 class="section-title">
          <span class="section-number">5</span>
          The Path of a Task: Morning Synthesis
        </h2>

        <p class="text-text-secondary mb-6">
          Follow a morning brief through the system to see how cross-domain synthesis works:
        </p>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content"><strong>5:00 AM - Cron triggers overnight data pulls</strong><br>
            <code>cd ~/trades && claude "Pull overnight market data, congressional disclosures, Polymarket odds"</code><br>
            Output: <code>~/trades/data/overnight-2026-01-25.json</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content"><strong>5:05 AM - Health domain pulls recovery data</strong><br>
            <code>cd ~/health && claude "Import WHOOP data, analyze overnight recovery"</code><br>
            Output: <code>~/health/status/current.json</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content"><strong>6:00 AM - Domain-specific morning briefs</strong><br>
            ~/trades generates <code>~/trades/briefs/2026-01-25.md</code><br>
            Symlink updated: <code>~/correlation/feeds/trades-brief</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content"><strong>6:10 AM - Correlation agent synthesizes</strong><br>
            <code>cd ~/correlation && claude "Synthesize daily brief from all domain feeds"</code><br>
            Reads: trades-brief, health-status, nox-blockers</div>
          </div>
          <div class="path-step">
            <div class="path-number">5</div>
            <div class="path-content"><strong>Correlation agent output:</strong><br>
            "Low recovery (62%) + market volatility = avoid trading today. Focus on critical bugs in ~/nox. Lighter workload recommended."</div>
          </div>
          <div class="path-step">
            <div class="path-number">6</div>
            <div class="path-content"><strong>6:15 AM - Human wakes up, reviews brief</strong><br>
            Opens <code>~/correlation/output/daily-synthesis.md</code><br>
            Decision: "Agreed, focus on bugs, skip trading"</div>
          </div>
        </div>

        <p class="text-text-secondary mb-6">
          <strong>Key insight:</strong> The correlation agent has READ-ONLY access to domain feeds via symlinks. It cannot write to individual domains. This preserves isolation while enabling synthesis.
        </p>
      </section>

      <!-- Section 6: GOTCHAS -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Gotchas
        </h2>

        <p class="text-text-secondary mb-6">
          10 practical problems with concrete fixes:
        </p>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #1: Over-Isolation (Can't Coordinate)
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Domains become silos, duplicate work, no synthesized view</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Implement correlation layer with symlinks (1 hour setup)</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #2: Under-Isolation (Context Bleed)
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Single instance handling everything, agent confuses contexts</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Strict directory separation, separate tmux sessions per domain (30 min)</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #3: Domain Sprawl
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Too many micro-domains (15+), constant handoffs for simple tasks</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Start with 3-5, expand only when clear need. Use subagents instead of new domains.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #4: Ignoring the Meta-Level
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> WHOOP says recovered but you feel like death</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Maintain human judgment. Be ready to delete ~/health if it stops serving.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #5: Handoff Accumulation
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> ~/shared/ fills with stale handoff files</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Weekly cleanup. Add expiration dates to handoffs. (15 min/week)</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #6: Cron Failure Silent
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Domain didn't run overnight, no notification</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Add notification on cron failure (10 min setup)</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #7: Symlink Breakage
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Correlation reads stale data, symlink points to nothing</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Verify symlinks point to real files. Add health check. (5 min)</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #8: API Key Leakage
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Credentials in wrong domain context</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Use .secrets/ directories per domain, domain-specific env files (20 min audit)</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #9: Context Window Overflow
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Single domain session grows too large, quality degrades</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Use subagents for large tasks. Summarize back to parent. (per-task)</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #10: Goodhart's Trap
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Optimizing WHOOP score instead of actually feeling good</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Remember: metrics serve you, not vice versa. (philosophical, constant)</div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          These are fundamental tensions, not bugs to fix:
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Self-Surveillance vs. Self-Imprisonment
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Building a panopticon for yourself can become self-policing. The pressure to perform for your own observation system is its own form of tyranny.</div>
          <div class="hard-detail"><strong>Coping:</strong> Maintain meta-level outside the system. You're not just the observed; you're the observer AND the human who can shut it all down. Be ready to delete domains.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Metric Optimization vs. Lived Experience
          </div>
          <div class="hard-detail"><strong>The tension:</strong> When WHOOP says recovered but you feel like death, which do you trust? Goodhart's Law: optimize for a metric and you game your way to hollow victory.</div>
          <div class="hard-detail"><strong>Coping:</strong> Trust lived experience when metrics conflict. The system is a tool, not a master.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Privacy vs. Capability
          </div>
          <div class="hard-detail"><strong>The tension:</strong> "Sometimes the tower has a landlord. Anthropic sees every query you make." The value exchange is explicit: their visibility for your thousand-clone attention span.</div>
          <div class="hard-detail"><strong>Coping:</strong> Accept: "chosen beats imposed." This is a conscious trade, not manipulation. Unlike surveillance capitalism, you know what you're trading.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Isolation vs. Integration
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Domains need isolation to prevent context pollution, but they also need to inform each other for cross-domain insights.</div>
          <div class="hard-detail"><strong>Coping:</strong> Correlation layer with explicit handoffs. Read-only access preserves isolation while enabling synthesis.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Automation vs. Attention
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Automated systems can miss what human attention catches. Full automation means no judgment.</div>
          <div class="hard-detail"><strong>Coping:</strong> Don't fully automate decisions. Keep human in the loop for anything consequential.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Domain Completeness vs. Overhead
          </div>
          <div class="hard-detail"><strong>The tension:</strong> More domains = more coverage but more management. Coordination cost scales with domain count.</div>
          <div class="hard-detail"><strong>Coping:</strong> Start small. Add domains only when clear need emerges. The inflection point is around 8-10 domains.</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO USE -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Use / When Not
        </h2>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              USE PANOPTICON WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Life complexity spans multiple distinct domains (work, health, finance)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>You want overnight data pulls, morning briefs, async operation</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>You're comfortable with Anthropic seeing your queries (chosen trade)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>You can use tmux, cron, filesystem (Unix comfort)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>You're willing to prune and manage domains (not fire-and-forget)</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              DON'T USE PANOPTICON WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Single-domain focus (just coding) -- use Ralph or single session</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Team environment -- use Gas Town or CC Mirror instead</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Need real-time coordination -- Panopticon is async-first</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Budget-constrained -- 8 instances costs more than single session</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Discomfort with self-surveillance -- Panopticon IS explicitly surveillance</span>
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">Decision Tree</h3>

        <div class="code-block">
          <pre><span class="comment">Personal Panopticon appropriate?</span>
     |
     +-- Only coding? (no life domains)
     |       --> Ralph loop or single Claude session
     |
     +-- Team scale, factory output?
     |       --> Gas Town (if Stage 7+)
     |
     +-- Need hidden multi-agent (native CC)?
     |       --> CC Mirror
     |
     +-- Want life-scale automation with isolation?
             --> <span class="string">Personal Panopticon</span> (this pattern)</pre>
        </div>
      </section>

    </main>

    <!-- Resizer between Main Panel and Activity Zone -->
    <div class="resizer" data-resizer="activity-zone" aria-label="Resize activity panel"></div>

    <!-- Activity Zone -->
    <aside class="activity-zone" id="activityZone">
      <div class="text-xs font-semibold text-text-muted uppercase tracking-wider mb-4">Operational Intelligence</div>

      <!-- ESSENCE SECTION -->
      <div class="activity-item inversion" data-section="essence">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if you didn't isolate domains?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd have:</strong> One Claude session for all of life.<br>
          <strong>Why this fails:</strong> Context pollution. Health data leaks to work. Trading decisions influenced by unrelated stress. Each domain's optimization corrupts others.<br>
          <strong>Revealed:</strong> Isolation is load-bearing architecture.
        </div>
      </div>

      <div class="activity-item warstory" data-section="essence">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">The $2000 Discovery</div>
        <div class="text-text-secondary text-sm">
          Molly's Panopticon found $2000/year in forgotten subscriptions. Accumulated charges below conscious attention, each small enough to not trigger alarm. Immediate ROI, validated approach.
        </div>
      </div>

      <div class="activity-item warstory" data-section="essence">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Jmail: 18M Users Overnight</div>
        <div class="text-text-secondary text-sm">
          "Parsed Epstein files overnight, 18M users searched it." Panopticon principles at production scale. This isn't a hobby project.
        </div>
      </div>

      <div class="activity-item minimal" data-section="essence">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">2-Domain Starter</div>
        <div class="text-text-secondary text-sm">
          <code style="background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;">mkdir -p ~/work ~/personal</code><br>
          Add CLAUDE.md to each. That's it. No correlation layer needed to start. Expand when patterns emerge.
        </div>
      </div>

      <!-- CORE SECTION -->
      <div class="activity-item invariant" data-section="core">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">Shared with Gas Town: Domain Isolation</div>
        <div class="text-text-secondary text-sm">
          Panopticon's 8 domains mirror Gas Town's rigs. Both isolate to prevent context pollution. Same underlying principle: bounded contexts preserve quality.
        </div>
      </div>

      <div class="activity-item invariant" data-section="core">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">Shared with Ralph: External State</div>
        <div class="text-text-secondary text-sm">
          Panopticon uses filesystem just like Ralph uses progress.txt. Both avoid agent memory. "External state > internal memory" is universal.
        </div>
      </div>

      <div class="activity-item invariant" data-section="core">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">Microservices Pattern: Bounded Contexts</div>
        <div class="text-text-secondary text-sm">
          Panopticon's domains = DDD bounded contexts. Same isolation principle from microservices architecture. Domain isolation is a proven pattern.
        </div>
      </div>

      <div class="activity-item effect" data-section="core">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="sparkles" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Self-Legibility Transformation</div>
        <div class="text-text-secondary text-sm">
          After running Panopticon, you see patterns across your life you never noticed. "The violent gap between how blind you were and how obvious everything feels now." Self-awareness emerges from automation.
        </div>
      </div>

      <div class="activity-item effect" data-section="core">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="sparkles" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Decision Externalization</div>
        <div class="text-text-secondary text-sm">
          Decisions move from gut feeling to data-informed. Morning brief tells you what to focus on. Cross-domain synthesis changes behavior.
        </div>
      </div>

      <div class="activity-item analogy" data-section="core">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Panopticon = Corporate Departments</div>
        <div class="text-text-secondary text-sm">
          Companies have HR, Finance, Engineering - isolated but coordinated. Panopticon = departments for your life. Same isolation + coordination pattern at personal scale.
        </div>
      </div>

      <!-- DECISIONS SECTION -->
      <div class="activity-item constraint" data-section="decisions">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">Ephemerality drives architecture</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> "Claude sessions are ephemeral"<br>
          --> Need filesystem for persistence<br>
          --> Need domain directories<br>
          --> Need CLAUDE.md per domain<br>
          --> Need correlation layer for cross-domain<br>
          --> Need explicit handoffs for information flow
        </div>
      </div>

      <div class="activity-item constraint" data-section="decisions">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">Conflicting goals drive separation</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> "Domains have different optimization functions"<br>
          --> ~/health optimizes for wellbeing<br>
          --> ~/trades optimizes for returns<br>
          --> These can conflict<br>
          --> Need isolation to prevent corruption<br>
          --> Need explicit handoffs when sharing needed
        </div>
      </div>

      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip domain-specific CLAUDE.md</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> No domain-specific rules<br>
          <strong>THEN:</strong> Agents don't know domain context<br>
          <strong>THEN:</strong> Wrong assumptions applied<br>
          <strong>THEN:</strong> Work context in health, trading decisions in nox<br>
          <strong>FINALLY:</strong> Context pollution defeats the purpose
        </div>
      </div>

      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip correlation layer</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> No cross-domain synthesis<br>
          <strong>THEN:</strong> No integrated view<br>
          <strong>THEN:</strong> Miss patterns like "poor sleep --> trading losses"<br>
          <strong>FINALLY:</strong> The "seeing yourself" benefit is lost entirely
        </div>
      </div>

      <!-- FILES SECTION -->
      <div class="activity-item composition" data-section="files">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">Panopticon + Claude-Mem</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> Add persistent cross-domain memory for queries like "show me decisions I regretted across all domains."<br>
          <strong>Enables:</strong> Pattern detection, long-term tracking, semantic search across life.
        </div>
      </div>

      <div class="activity-item composition" data-section="files">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">Panopticon + Skeptic Agents</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> Each domain has a Skeptic subagent that challenges conclusions before reporting.<br>
          <strong>Enables:</strong> Calibrated confidence, avoids overconfidence traps.
        </div>
      </div>

      <div class="activity-item expertise" data-section="files">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How deep is your understanding?</div>
        <div class="text-text-secondary text-sm">
          <strong>Novice:</strong> 2-3 domains, basic CLAUDE.md (run for 1 week)<br>
          <strong>Intermediate:</strong> 5+ domains, overnight runs, morning briefs<br>
          <strong>Advanced:</strong> Full 8 domains, correlation layer, extensions<br>
          <strong>Expert:</strong> Custom extensions, sharing patterns, at the frontier
        </div>
      </div>

      <!-- PATH SECTION -->
      <div class="activity-item horizon" data-section="path">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">When is Panopticon the right choice?</div>
        <div class="text-text-secondary text-sm">
          <strong>Single day:</strong> Overkill<br>
          <strong>Single week:</strong> Maybe, starting to see patterns<br>
          <strong>Ongoing months:</strong> Yes, patterns emerge, ROI kicks in<br>
          <strong>Life-scale:</strong> Yes, designed for continuous operation<br><br>
          <em>Don't judge by day 1.</em>
        </div>
      </div>

      <div class="activity-item gradient" data-section="path">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How domain isolation fails</div>
        <div class="text-text-secondary text-sm">
          <strong>10% degraded:</strong> Occasional cross-talk (audit handoffs)<br>
          <strong>50% degraded:</strong> Regular context pollution (rebuild symlinks)<br>
          <strong>90% degraded:</strong> Domains indistinguishable (re-establish from scratch)<br>
          <strong>Total failure:</strong> Single chaotic session (start over)
        </div>
      </div>

      <div class="activity-item frontier" data-section="path">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Cross-Domain Causation</div>
        <div class="text-text-secondary text-sm">
          Correlation layer can see patterns but can't prove causation. Does poor sleep CAUSE trading losses? Or just correlate? Theoretical problem, no automation yet.
        </div>
      </div>

      <!-- GOTCHAS SECTION -->
      <div class="activity-item inflection" data-section="gotchas">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When domain count flips from help to hurt</div>
        <div class="text-text-secondary text-sm">
          <strong>3-5 domains:</strong> Pure benefit (clear isolation)<br>
          <strong>6-8 domains:</strong> Optimal (comprehensive coverage)<br>
          <strong>9-10 domains:</strong> Diminishing returns (management overhead)<br>
          <strong>10+ domains:</strong> Net negative (coordination cost exceeds benefit)<br><br>
          <strong>THE INFLECTION:</strong> ~8-10 domains
        </div>
      </div>

      <div class="activity-item inversion" data-section="gotchas">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if there was no correlation layer?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd have:</strong> Siloed insights, no cross-domain patterns, just 8 separate notebooks.<br>
          <strong>Why this fails:</strong> The value of Panopticon IS the synthesis. Individual domains are nice; cross-domain is transformative.<br>
          <strong>Revealed:</strong> Correlation is where value emerges.
        </div>
      </div>

      <div class="activity-item frontier" data-section="gotchas">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Automatic Domain Discovery</div>
        <div class="text-text-secondary text-sm">
          Currently humans decide the 8 domains. Could AI suggest optimal domain boundaries based on activity patterns? Theoretical, no implementation yet.
        </div>
      </div>

      <div class="activity-item frontier" data-section="gotchas">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Predictive Life Optimization</div>
        <div class="text-text-secondary text-sm">
          Not just reactive morning briefs but predictive warnings: "If you don't sleep tonight, tomorrow's meeting will suffer." Emerging area, no robust implementation.
        </div>
      </div>

      <!-- HARD SECTION -->
      <div class="activity-item tradeoff" data-section="hard">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Privacy vs. Capability</div>
        <div class="text-text-secondary text-sm">
          <strong>Pull A:</strong> More data = better insights, more powerful automation<br>
          <strong>Pull B:</strong> More data = more exposure to Anthropic, more risk<br>
          <strong>Resolution:</strong> Accept the trade-off. "Chosen beats imposed." Know what you're trading.
        </div>
      </div>

      <div class="activity-item tradeoff" data-section="hard">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Automation vs. Control</div>
        <div class="text-text-secondary text-sm">
          <strong>Pull A:</strong> Full automation = no effort, works while you sleep<br>
          <strong>Pull B:</strong> Full automation = no judgment, miss what humans catch<br>
          <strong>Resolution:</strong> Keep human in loop for decisions. Automate observation, not action.
        </div>
      </div>

      <div class="activity-item warstory" data-section="hard">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Autonomous Customer Support</div>
        <div class="text-text-secondary text-sm">
          Molly built "fully autonomous customer support department" using domain isolation. Validated for business, not just personal. Proof that the pattern scales.
        </div>
      </div>

      <!-- WHEN SECTION -->
      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Path
        </div>
        <div class="font-medium text-text-primary mb-2">Gas Town</div>
        <div class="text-text-secondary text-sm">
          <strong>When better:</strong> Team-scale factory output, code-focused<br>
          <strong>When worse:</strong> Not designed for life domains, personal automation
        </div>
      </div>

      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Path
        </div>
        <div class="font-medium text-text-primary mb-2">Single Claude Session</div>
        <div class="text-text-secondary text-sm">
          <strong>When better:</strong> Simple needs, one domain focus, just coding<br>
          <strong>When worse:</strong> Can't isolate contexts, can't parallelize, no cross-domain synthesis
        </div>
      </div>

      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Path
        </div>
        <div class="font-medium text-text-primary mb-2">Traditional Life Apps</div>
        <div class="text-text-secondary text-sm">
          <strong>When better:</strong> No API cost, established UX, no setup<br>
          <strong>When worse:</strong> No AI integration, no correlation layer, no custom automation
        </div>
      </div>

      <div class="activity-item analogy" data-section="when">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Panopticon Complexity = Kubernetes for Life</div>
        <div class="text-text-secondary text-sm">
          <strong>Kubernetes:</strong> Overkill for single app, essential for distributed systems<br>
          <strong>Panopticon:</strong> Overkill for single domain, essential for life-scale automation<br><br>
          <em>Match tool complexity to problem complexity.</em>
        </div>
      </div>

    </aside>
  </div>

  <script>
    /**
     * PanelResizer - Handles draggable panel dividers
     */
    class PanelResizer {
      constructor(resizerEl, config = {}) {
        this.resizer = resizerEl;
        this.config = {
          storageKey: 'panel-activity-zone-width',
          minWidth: 280,
          maxWidth: 900,
          defaultWidth: 480,
          ...config
        };

        this.isResizing = false;
        this.startX = 0;
        this.startWidth = 0;

        this.activityZone = document.querySelector('.activity-zone');
        this.mainContent = document.querySelector('.main-content');

        this.onMouseDown = this.onMouseDown.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
        this.onMouseUp = this.onMouseUp.bind(this);

        this.init();
      }

      init() {
        this.restoreWidth();
        this.resizer.addEventListener('mousedown', this.onMouseDown);
      }

      onMouseDown(e) {
        if (e.button !== 0) return;

        this.isResizing = true;
        this.startX = e.clientX;
        this.startWidth = this.activityZone.offsetWidth;

        this.resizer.classList.add('active');
        document.body.classList.add('resizing');

        document.addEventListener('mousemove', this.onMouseMove);
        document.addEventListener('mouseup', this.onMouseUp);

        e.preventDefault();
      }

      onMouseMove(e) {
        if (!this.isResizing) return;

        const delta = this.startX - e.clientX;
        const newWidth = this.startWidth + delta;

        const constrainedWidth = Math.max(
          this.config.minWidth,
          Math.min(this.config.maxWidth, newWidth)
        );

        this.activityZone.style.width = constrainedWidth + 'px';
        this.mainContent.style.marginRight = constrainedWidth + 'px';
        this.resizer.style.right = constrainedWidth + 'px';
      }

      onMouseUp(e) {
        if (!this.isResizing) return;

        this.isResizing = false;

        this.resizer.classList.remove('active');
        document.body.classList.remove('resizing');

        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);

        this.saveWidth();
      }

      saveWidth() {
        const width = this.activityZone.offsetWidth;
        localStorage.setItem(this.config.storageKey, JSON.stringify({
          width,
          timestamp: Date.now()
        }));
      }

      restoreWidth() {
        try {
          const stored = localStorage.getItem(this.config.storageKey);
          if (stored) {
            const { width } = JSON.parse(stored);
            if (width >= this.config.minWidth && width <= this.config.maxWidth) {
              this.activityZone.style.width = width + 'px';
              this.mainContent.style.marginRight = width + 'px';
              this.resizer.style.right = width + 'px';
            }
          }
        } catch (e) {
          console.warn('Failed to restore panel width:', e);
        }
      }

      destroy() {
        this.resizer.removeEventListener('mousedown', this.onMouseDown);
        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);
      }
    }

    // Auto-initialize resizers
    document.addEventListener('DOMContentLoaded', () => {
      const resizers = document.querySelectorAll('[data-resizer]');
      resizers.forEach(resizer => new PanelResizer(resizer));
    });

    // Initialize Lucide icons
    lucide.createIcons();

    // Navigation toggle
    function toggleSection(header) {
      const section = header.closest('.nav-section');
      section.classList.toggle('expanded');
      const children = section.querySelector('.nav-children');
      children.classList.toggle('expanded');
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const nav = document.getElementById('leftNav');
      nav.classList.toggle('open');
    }

    // Copy functionality
    function copyCode(btn, text) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check" class="w-3 h-3"></i> Copied!';
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = originalText;
          lucide.createIcons();
        }, 2000);
      });
    }

    function copyCodeBlock(btn) {
      const codeBlock = btn.closest('.code-block');
      const pre = codeBlock.querySelector('pre');
      const text = pre.textContent;
      copyCode(btn, text);
    }

    // Scroll-sync with GSAP ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    const sections = document.querySelectorAll('[data-activity]');
    const activityItems = document.querySelectorAll('.activity-item');

    sections.forEach(section => {
      ScrollTrigger.create({
        trigger: section,
        start: 'top 40%',
        end: 'bottom 40%',
        onEnter: () => activateSection(section.dataset.activity),
        onEnterBack: () => activateSection(section.dataset.activity),
      });
    });

    function activateSection(sectionName) {
      activityItems.forEach(item => {
        if (item.dataset.section === sectionName) {
          item.classList.add('active');
          gsap.to(item, {
            opacity: 1,
            y: -2,
            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
            duration: 0.3,
            ease: 'power2.out'
          });
        } else {
          item.classList.remove('active');
          gsap.to(item, {
            opacity: 0.5,
            y: 0,
            boxShadow: 'none',
            duration: 0.3,
            ease: 'power2.out'
          });
        }
      });

      // Update nav active state
      document.querySelectorAll('.nav-section-header').forEach(header => {
        header.classList.remove('active');
      });
      const activeNav = document.querySelector(`[data-section="${sectionName}"] .nav-section-header`);
      if (activeNav) {
        activeNav.classList.add('active');
      }
    }

    // Initialize first section as active
    activateSection('essence');

    // Smooth scroll for nav links
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.nav-item').forEach(l => l.classList.remove('active'));
          link.classList.add('active');
        }
      });
    });

    // Brushing interaction
    activityItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = 'rgba(13, 147, 115, 0.05)';
          relatedSection.style.transition = 'background-color 0.3s ease';
        }
      });

      item.addEventListener('mouseleave', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = '';
        }
      });
    });
  </script>
<script src="../../js/global-nav.js"></script>
</body>
</html>
