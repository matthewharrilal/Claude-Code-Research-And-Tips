<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ralph Wiggum Marketer | Claude Code Documentation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- GSAP for scroll-sync -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Tailwind Config with Design Tokens -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-base': '#ffffff',
            'bg-subtle': '#fafafa',
            'bg-muted': '#f4f4f5',
            'text-primary': '#18181b',
            'text-secondary': '#3f3f46',
            'text-muted': '#71717a',
            'accent': '#0D9373',
            'accent-light': '#10b981',
            'accent-bg': '#ecfdf5',
            'border': '#e4e4e7',
            // Activity Zone content type colors (Original 6)
            'az-invariant': '#3b82f6',    // Blue
            'az-effect': '#f59e0b',       // Amber
            'az-composition': '#8b5cf6',  // Purple
            'az-frontier': '#ef4444',     // Red
            'az-warstory': '#10b981',     // Green
            'az-alternative': '#6b7280',  // Gray
            // Activity Zone generative content types (New 10)
            'az-inversion': '#4f46e5',    // Indigo
            'az-constraint': '#8b5cf6',   // Violet
            'az-gradient': '#f43f5e',     // Rose
            'az-horizon': '#06b6d4',      // Cyan
            'az-violation': '#f97316',    // Orange
            'az-tradeoff': '#f59e0b',     // Amber
            'az-analogy': '#d946ef',      // Fuchsia
            'az-expertise': '#10b981',    // Emerald
            'az-minimal': '#84cc16',      // Lime
            'az-inflection': '#eab308',   // Yellow
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Fira Code', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    /* Base Styles */
    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    [id] {
      scroll-margin-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: #ffffff;
      color: #18181b;
      line-height: 1.7;
    }

    /* Three Panel Layout */
    .three-panel-layout {
      min-height: 100vh;
      position: relative;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: #ffffff;
      border-bottom: 1px solid #e4e4e7;
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 24px;
    }

    /* Left Navigation - 240px fixed */
    .left-nav {
      position: fixed;
      top: 56px;
      left: 0;
      width: 240px;
      height: calc(100vh - 56px);
      border-right: 1px solid #e4e4e7;
      background: #ffffff;
      overflow-y: auto;
      padding: 16px 0;
      z-index: 40;
    }

    .nav-section {
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 500;
      color: #3f3f46;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.15s;
    }

    .nav-section-header:hover {
      background: #f4f4f5;
    }

    .nav-section-header.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-item {
      display: block;
      padding: 6px 12px 6px 44px;
      font-size: 14px;
      color: #71717a;
      text-decoration: none;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-item:hover {
      color: #3f3f46;
      background: #f4f4f5;
    }

    .nav-item.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-children {
      display: none;
      overflow: hidden;
    }

    .nav-children.expanded {
      display: block;
    }

    .nav-chevron {
      transition: transform 0.2s;
    }

    .nav-section.expanded .nav-chevron {
      transform: rotate(90deg);
    }

    /* Main Content - Flexible, margins for fixed sidebars */
    .main-content {
      margin-left: 240px;
      margin-right: 480px;
      margin-top: 56px;
      padding: 48px 48px;
      min-width: 400px;
    }

    /* Activity Zone - 480px fixed */
    .activity-zone {
      position: fixed;
      top: 56px;
      right: 0;
      width: 480px;
      height: calc(100vh - 56px);
      border-left: 1px dashed #e4e4e7;
      background: #fafafa;
      overflow-y: auto;
      padding: 24px 20px;
      z-index: 40;
    }

    /* Responsive: Hide Activity Zone below 1400px */
    @media (max-width: 1400px) {
      .activity-zone {
        display: none;
      }
      .main-content {
        margin-right: 0;
        padding: 40px 32px;
      }
    }

    /* Responsive: Hide Left Nav below 768px */
    @media (max-width: 768px) {
      .left-nav {
        display: none;
      }
      .left-nav.open {
        display: block;
        position: fixed;
        top: 56px;
        left: 0;
        right: 0;
        bottom: 0;
        background: #ffffff;
        z-index: 50;
        overflow-y: auto;
      }
      .main-content {
        margin-left: 0;
        padding: 24px 16px;
        min-width: auto;
      }
    }

    /* Resizer */
    .resizer {
      position: fixed;
      top: 56px;
      right: 480px;
      width: 6px;
      height: calc(100vh - 56px);
      cursor: col-resize;
      background: transparent;
      z-index: 50;
      transition: background 0.15s ease;
    }

    .resizer:hover {
      background: rgba(13, 147, 115, 0.15);
    }

    .resizer.active {
      background: rgba(13, 147, 115, 0.25);
    }

    body.resizing {
      user-select: none;
      cursor: col-resize !important;
    }

    body.resizing * {
      cursor: col-resize !important;
    }

    @media (max-width: 1400px) {
      .resizer {
        display: none;
      }
    }

    /* Activity Zone Items */
    .activity-item {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      background: #ffffff;
      border: 1px solid #e4e4e7;
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .activity-item.active {
      opacity: 1;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .activity-item:hover {
      opacity: 1;
    }

    .activity-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Activity Zone content type borders */
    .activity-item.invariant { border-left: 4px solid #3b82f6; }
    .activity-item.effect { border-left: 4px solid #f59e0b; }
    .activity-item.composition { border-left: 4px solid #8b5cf6; }
    .activity-item.frontier { border-left: 4px solid #ef4444; }
    .activity-item.warstory { border-left: 4px solid #10b981; }
    .activity-item.alternative { border-left: 4px solid #6b7280; }
    .activity-item.inversion { border-left: 4px solid #4f46e5; }
    .activity-item.constraint { border-left: 4px solid #8b5cf6; }
    .activity-item.gradient { border-left: 4px solid #f43f5e; }
    .activity-item.horizon { border-left: 4px solid #06b6d4; }
    .activity-item.violation { border-left: 4px solid #f97316; }
    .activity-item.tradeoff { border-left: 4px solid #f59e0b; }
    .activity-item.analogy { border-left: 4px solid #d946ef; }
    .activity-item.expertise { border-left: 4px solid #10b981; }
    .activity-item.minimal { border-left: 4px solid #84cc16; }
    .activity-item.inflection { border-left: 4px solid #eab308; }

    /* Main Content Components */
    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: #0D9373;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      border-radius: 50%;
      margin-right: 12px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: #18181b;
      margin-bottom: 20px;
      margin-top: 56px;
      display: flex;
      align-items: center;
    }

    .section-title:first-child {
      margin-top: 0;
    }

    /* Essence Box */
    .essence-box {
      background: linear-gradient(135deg, #18181b 0%, #27272a 100%);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 40px;
    }

    .essence-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #10b981;
      margin-bottom: 12px;
    }

    .essence-text {
      font-size: 22px;
      font-weight: 500;
      color: #ffffff;
      line-height: 1.4;
    }

    /* Core Abstraction Box */
    .core-abstraction {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .core-philosophy {
      font-size: 16px;
      color: #3f3f46;
      margin-bottom: 16px;
      font-style: italic;
    }

    .core-code {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 16px;
      overflow-x: auto;
    }

    .core-code code {
      font-family: 'Fira Code', monospace;
      font-size: 15px;
      color: #10b981;
      white-space: nowrap;
    }

    .core-anchor {
      font-size: 14px;
      color: #71717a;
      text-align: center;
    }

    /* Decision Box */
    .decision-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .decision-why {
      font-size: 16px;
      font-weight: 600;
      color: #0D9373;
      margin-bottom: 12px;
    }

    .decision-reasoning {
      font-size: 14px;
      color: #3f3f46;
      margin-bottom: 16px;
    }

    .decision-implication {
      background: #f4f4f5;
      border-radius: 8px;
      padding: 16px;
    }

    .decision-implication-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: #71717a;
      margin-bottom: 8px;
    }

    /* Code Blocks */
    .code-block {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 24px;
      position: relative;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
      color: #e4e4e7;
      line-height: 1.6;
    }

    .code-block .comment { color: #6b7280; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #10b981; }
    .code-block .variable { color: #60a5fa; }

    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #3f3f46;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: background 0.15s;
    }

    .copy-btn:hover {
      background: #52525b;
    }

    /* Path Steps */
    .path-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .path-step {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .path-step:last-child {
      margin-bottom: 0;
    }

    .path-number {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: #0D9373;
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .path-content {
      flex: 1;
      font-size: 14px;
      color: #3f3f46;
    }

    .path-content code {
      background: #e4e4e7;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }

    /* Gotcha Box */
    .gotcha-box {
      background: #fffbeb;
      border: 1px solid #fcd34d;
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .gotcha-title {
      font-weight: 600;
      color: #92400e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .gotcha-detail {
      font-size: 14px;
      color: #78350f;
      margin-bottom: 8px;
    }

    .gotcha-detail strong {
      color: #92400e;
    }

    /* What's Hard Box */
    .hard-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .hard-title {
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hard-detail {
      font-size: 14px;
      color: #7f1d1d;
      margin-bottom: 8px;
    }

    /* When To Use Grid */
    .when-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    @media (max-width: 900px) {
      .when-grid {
        grid-template-columns: 1fr;
      }
    }

    .when-use {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 24px;
    }

    .when-not {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 24px;
    }

    .when-title {
      font-weight: 600;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .when-use .when-title { color: #166534; }
    .when-not .when-title { color: #991b1b; }

    .when-item {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .when-use .when-item { color: #166534; }
    .when-not .when-item { color: #991b1b; }

    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: none;
      padding: 8px;
      background: none;
      border: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #fafafa;
    }

    ::-webkit-scrollbar-thumb {
      background: #d4d4d8;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1aa;
    }

    /* Keyboard shortcut hint */
    .kbd {
      display: inline-flex;
      align-items: center;
      padding: 2px 6px;
      background: #f4f4f5;
      border: 1px solid #e4e4e7;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      color: #71717a;
    }

    /* Critique Output Box */
    .critique-box {
      background: #f0fdf4;
      border: 2px solid #10b981;
      border-radius: 12px;
      padding: 20px;
      margin: 24px 0;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }

    .critique-header {
      font-weight: 600;
      color: #166534;
      margin-bottom: 12px;
      border-bottom: 1px solid #bbf7d0;
      padding-bottom: 8px;
    }

    .critique-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      color: #166534;
    }

    .critique-pass {
      background: #dcfce7;
      padding: 2px 8px;
      border-radius: 4px;
      font-weight: 600;
    }

    .critique-fail {
      background: #fef2f2;
      padding: 2px 8px;
      border-radius: 4px;
      color: #991b1b;
      font-weight: 600;
    }

    /* Architecture Diagram */
    .architecture-box {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      line-height: 1.4;
      overflow-x: auto;
    }

    .arch-label {
      color: #64748b;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    /* Comparison Table */
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 24px 0;
      font-size: 14px;
    }

    .comparison-table th {
      background: #f4f4f5;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      border-bottom: 2px solid #e4e4e7;
    }

    .comparison-table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e4e4e7;
    }

    .comparison-table tr:hover {
      background: #fafafa;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
      <i data-lucide="menu" class="w-5 h-5 text-text-secondary"></i>
    </button>
    <div class="flex items-center gap-3">
      <i data-lucide="terminal" class="w-5 h-5 text-accent"></i>
      <span class="font-semibold text-text-primary">Claude Code</span>
    </div>
    <div class="flex-1 flex justify-center">
      <button class="flex items-center gap-2 px-4 py-2 bg-bg-muted rounded-lg text-text-muted text-sm hover:bg-border transition-colors">
        <i data-lucide="search" class="w-4 h-4"></i>
        <span>Search documentation...</span>
        <span class="kbd">Cmd+K</span>
      </button>
    </div>
    <div class="flex items-center gap-4">
      <a href="#" class="text-sm text-text-muted hover:text-text-primary transition-colors">Support</a>
      <button class="p-2 hover:bg-bg-muted rounded-lg transition-colors" aria-label="Toggle theme">
        <i data-lucide="sun" class="w-4 h-4 text-text-muted"></i>
      </button>
    </div>
  </header>

  <div class="three-panel-layout">
    <!-- Left Navigation -->
    <nav class="left-nav" id="leftNav">
      <div class="nav-content"></div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">Database-driven discovery, AI synthesis, self-critique loops until founder-quality voice match achieved.</div>
        </div>

        <p class="text-text-secondary mb-4">
          <strong>Source:</strong> <a href="https://x.com/koylanai/status/2008824728824451098" class="text-accent hover:underline">@koylanai</a> (Muratcan Koylan) - AI Agent Systems Manager, building agents since GPT-2
        </p>
        <p class="text-text-muted text-sm">
          January 7, 2026 | 1.5K likes, 84K views, 1.9K bookmarks
        </p>
      </section>

      <!-- Section 2: CORE ABSTRACTION + IMPLEMENTATION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Core Abstraction
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"Don't let AI discover things on its own - it hallucinates. Its discovery is a database-driven input system. The agent's job is synthesis."</div>

          <div class="core-code">
            <button class="copy-btn" onclick="copyCode(this, 'DISCOVER → LEARN → RESEARCH → IDEATE → WRITE → CRITIQUE → (iterate until pass) → PUBLISH')">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <code>DISCOVER → LEARN → RESEARCH → IDEATE → WRITE → CRITIQUE → ITERATE → PUBLISH</code>
          </div>

          <div class="core-anchor">Same Ralph loop, but for content instead of code.</div>
        </div>

        <p class="text-text-secondary mb-6">
          The fundamental insight: <strong>separate discovery from synthesis</strong>. Humans (or external agents) populate a SQLite database with facts, trends, and voice samples. The AI synthesizes unique angles from this grounded data - it never invents facts.
        </p>

        <p class="text-text-secondary mb-6">
          Each iteration gets fresh context, reads from the database, drafts content, then self-critiques against your voice samples and a "founder test" - would you actually publish this? The loop continues until the answer is YES.
        </p>

        <div class="architecture-box">
          <div class="arch-label">Multi-Agent Ecosystem</div>
          <pre>
+---------------------------------------------+
|  External Agents (feed the DB)              |
|    - TrendScout                             |
|    - Research Agent                         |
|    - Product/Marketing Intel                |
+---------------------------------------------+
                    |
                    v
+---------------------------------------------+
|  SQLite Database (single source of truth)   |
|    - trends                                 |
|    - research                               |
|    - communications (YOUR voice samples)    |
|    - content_plan                           |
|    - drafts                                 |
|    - published                              |
+---------------------------------------------+
                    |
                    v
+---------------------------------------------+
|  Ralph Copywriter Agent                     |
|    - Reads prd.json for tasks               |
|    - Checks progress.txt for learnings      |
|    - Writes → Critiques → Iterates          |
|    - Commits to git                         |
+---------------------------------------------+</pre>
        </div>
      </section>

      <!-- Section 3: DESIGN DECISIONS -->
      <section id="why-database" data-activity="decisions">
        <h2 class="section-title">
          <span class="section-number">3</span>
          Design Decisions
        </h2>

        <div class="decision-box">
          <div class="decision-why">WHY DATABASE-DRIVEN DISCOVERY?</div>
          <div class="decision-reasoning">
            AI hallucinates facts. It invents statistics, cites non-existent sources, makes up competitor claims. Pre-populated database ensures content is grounded in reality.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              You MUST seed the database before running. No seeds = hallucinated content. The communications table (your voice samples) is especially critical.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-self-critique">
          <div class="decision-why">WHY SELF-CRITIQUE LOOP?</div>
          <div class="decision-reasoning">
            First drafts are "deterministically bad" - this is expected. Unlike code where tests verify correctness, content quality requires subjective judgment. The self-critique loop with voice match scoring gives an objective-ish measure.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Expect 3-7 iterations for a typical blog post. Voice match score 8+ is usually publishable. The "founder test" (YES/NO) provides a clear quality gate.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-sqlite">
          <div class="decision-why">WHY SQLITE (NOT POSTGRES)?</div>
          <div class="decision-reasoning">
            Zero setup. Portable (one file). Claude reads it easily. No infrastructure to manage. Easy backup - just copy the file.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Local file at <code>.ralph/data/content.db</code>. Works offline. Can version control the schema (not the data). Scale up to Postgres later if needed.
            </div>
          </div>
        </div>

        <div class="decision-box">
          <div class="decision-why">WHY SEPARATE DISCOVERY AGENTS?</div>
          <div class="decision-reasoning">
            Modular architecture. TrendScout finds trends, Research Agent gathers data, Product Agent captures internal comms. Each feeds the DB. Copywriter synthesizes.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              You can swap discovery methods. Replace TrendScout with RSS parser. Replace Research Agent with web scraper. The Copywriter doesn't care how DB gets populated.
            </div>
          </div>
        </div>

        <div class="decision-box">
          <div class="decision-why">WHY "FOUNDER TEST" AS QUALITY GATE?</div>
          <div class="decision-reasoning">
            "Would you actually publish this?" is a binary question with no ambiguity. Voice match score (7/10, 8/10) is numeric but subjective. The founder test forces a clear YES/NO decision.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Define what "founder would publish" means in your prd.json acceptance criteria. The more specific, the better the loop calibrates.
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: FILE STRUCTURE -->
      <section id="file-structure" data-activity="files">
        <h2 class="section-title">
          <span class="section-number">4</span>
          File Structure
        </h2>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre>your-project/
<span class="comment">├── .claude-plugin/</span>
│   └── plugin.json             <span class="comment"># Plugin manifest - metadata and dependencies</span>
│
<span class="comment">├── commands/</span>
│   ├── ralph-marketer.md       <span class="comment"># Main loop prompt - drives iteration</span>
│   ├── ralph-init.md           <span class="comment"># Initialization - sets up project</span>
│   ├── ralph-status.md         <span class="comment"># Status check - shows current state</span>
│   └── ralph-cancel.md         <span class="comment"># Cancel loop - graceful shutdown</span>
│
<span class="comment">├── skills/</span>
│   └── copywriter/
│       └── SKILL.md            <span class="comment"># Copywriter skill - voice matching logic</span>
│
<span class="comment">├── hooks/</span>
│   ├── hooks.json              <span class="comment"># Hook configuration - loop continuation</span>
│   └── stop-hook.sh            <span class="comment"># Loop continuation hook</span>
│
<span class="comment">├── scripts/src/</span>
│   └── seed.js                 <span class="comment"># Database seeding script</span>
│
<span class="comment">├── templates/</span>
│   ├── prd.json                <span class="comment"># Task template - acceptance criteria</span>
│   ├── progress.txt            <span class="comment"># Progress log template - append-only</span>
│   └── prompt.md               <span class="comment"># Agent instructions - per-iteration guide</span>
│
└── .ralph/
    └── data/
        └── content.db          <span class="comment"># SQLite database - single source of truth</span></pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="db-schema">Database Schema</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment">-- Trend tracking: What's happening in the industry</span>
<span class="keyword">CREATE TABLE</span> trends (
  id <span class="variable">INTEGER PRIMARY KEY</span>,
  topic <span class="variable">TEXT NOT NULL</span>,           <span class="comment">-- Trend name/title</span>
  description <span class="variable">TEXT</span>,              <span class="comment">-- What this trend is about</span>
  source <span class="variable">TEXT</span>,                   <span class="comment">-- Where discovered (Twitter, RSS)</span>
  relevance_score <span class="variable">INTEGER</span>,       <span class="comment">-- 0-100, higher = more relevant</span>
  status <span class="variable">TEXT DEFAULT 'new'</span>,     <span class="comment">-- new, used, stale</span>
  created_at <span class="variable">TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
);

<span class="comment">-- Research findings: Data points and facts</span>
<span class="keyword">CREATE TABLE</span> research (
  id <span class="variable">INTEGER PRIMARY KEY</span>,
  title <span class="variable">TEXT NOT NULL</span>,
  summary <span class="variable">TEXT</span>,
  key_findings <span class="variable">TEXT</span>,             <span class="comment">-- Plain text summary</span>
  data_points <span class="variable">TEXT</span>,              <span class="comment">-- JSON array of statistics</span>
  category <span class="variable">TEXT</span>,                 <span class="comment">-- Product, market, competitor</span>
  status <span class="variable">TEXT DEFAULT 'unused'</span>,  <span class="comment">-- unused, cited, stale</span>
  created_at <span class="variable">TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
);

<span class="comment">-- Internal communications: YOUR VOICE SAMPLES (CRITICAL)</span>
<span class="keyword">CREATE TABLE</span> communications (
  id <span class="variable">INTEGER PRIMARY KEY</span>,
  type <span class="variable">TEXT</span>,                     <span class="comment">-- 'product_update', 'email', 'tweet', 'blog'</span>
  title <span class="variable">TEXT</span>,
  details <span class="variable">TEXT</span>,                  <span class="comment">-- Full content text</span>
  key_messages <span class="variable">TEXT</span>,             <span class="comment">-- JSON array of main points</span>
  target_audience <span class="variable">TEXT</span>,          <span class="comment">-- Who this was written for</span>
  priority <span class="variable">INTEGER</span>,              <span class="comment">-- 1-10, importance for voice matching</span>
  status <span class="variable">TEXT DEFAULT 'unused'</span>
);

<span class="comment">-- Content plan: What we're writing</span>
<span class="keyword">CREATE TABLE</span> content_plan (
  id <span class="variable">INTEGER PRIMARY KEY</span>,
  content_type <span class="variable">TEXT</span>,             <span class="comment">-- 'blog', 'tweet', 'email', 'linkedin'</span>
  title <span class="variable">TEXT</span>,
  brief <span class="variable">TEXT</span>,                    <span class="comment">-- What should be covered</span>
  target_keywords <span class="variable">TEXT</span>,          <span class="comment">-- SEO keywords if relevant</span>
  status <span class="variable">TEXT DEFAULT 'planned'</span>  <span class="comment">-- planned, drafting, complete</span>
);

<span class="comment">-- Draft versions: Iteration history</span>
<span class="keyword">CREATE TABLE</span> drafts (
  id <span class="variable">INTEGER PRIMARY KEY</span>,
  plan_id <span class="variable">INTEGER REFERENCES content_plan(id)</span>,
  version <span class="variable">INTEGER</span>,               <span class="comment">-- 1, 2, 3, etc.</span>
  content <span class="variable">TEXT</span>,                  <span class="comment">-- Full draft text</span>
  word_count <span class="variable">INTEGER</span>,
  feedback <span class="variable">TEXT</span>,                 <span class="comment">-- Critique results JSON</span>
  created_at <span class="variable">TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
);

<span class="comment">-- Published content: Final outputs</span>
<span class="keyword">CREATE TABLE</span> published (
  id <span class="variable">INTEGER PRIMARY KEY</span>,
  plan_id <span class="variable">INTEGER REFERENCES content_plan(id)</span>,
  final_content <span class="variable">TEXT</span>,
  meta_description <span class="variable">TEXT</span>,         <span class="comment">-- For SEO</span>
  published_at <span class="variable">TIMESTAMP</span>
);</pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="prd-json">prd.json - Task Definition</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre>{
  <span class="string">"id"</span>: <span class="string">"WRITE-001"</span>,
  <span class="string">"title"</span>: <span class="string">"Write launch announcement blog post"</span>,
  <span class="string">"description"</span>: <span class="string">"Create a blog post announcing the new feature launch"</span>,
  <span class="string">"acceptanceCriteria"</span>: [
    <span class="string">"At least 1000 words"</span>,
    <span class="string">"Includes 3 data points from research table"</span>,
    <span class="string">"Has compelling CTA"</span>,
    <span class="string">"Voice match score >= 8/10"</span>,
    <span class="string">"Founder test: YES"</span>
  ],
  <span class="string">"priority"</span>: 1,
  <span class="string">"passes"</span>: <span class="keyword">false</span>,
  <span class="string">"notes"</span>: <span class="string">""</span>
}</pre>
        </div>
      </section>

      <!-- Section 5: PATH OF A TASK -->
      <section id="path" data-activity="path">
        <h2 class="section-title">
          <span class="section-number">5</span>
          Path of a Content Piece
        </h2>

        <p class="text-text-secondary mb-6">
          Follow a blog post through the system to see how discovery, synthesis, and critique connect:
        </p>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content"><strong>[T+0]</strong> <code>/ralph-init</code> creates <code>.ralph/</code> directory, initializes SQLite, creates templates</div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content"><strong>[T+1min]</strong> Human seeds database: <code>node scripts/src/seed.js</code> - populates trends, research, and critically, communications (your voice samples)</div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content"><strong>[T+5min]</strong> <code>/ralph-marketer</code> starts - reads prd.json (finds WRITE-001 with passes: false), reads progress.txt for prior learnings</div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content"><strong>PHASE: DISCOVER</strong> - Queries database: trends where relevance_score > 70, communications where type = 'blog', research where status = 'unused'</div>
          </div>
          <div class="path-step">
            <div class="path-number">5</div>
            <div class="path-content"><strong>PHASE: LEARN</strong> - Analyzes communications table (your voice samples). Extracts patterns: tone, structure, vocabulary. Creates mental model of "your voice"</div>
          </div>
          <div class="path-step">
            <div class="path-number">6</div>
            <div class="path-content"><strong>PHASE: RESEARCH</strong> - Cross-references trends with product updates. Identifies 4 potential angles. Evaluates relevance to target audience</div>
          </div>
          <div class="path-step">
            <div class="path-number">7</div>
            <div class="path-content"><strong>PHASE: IDEATE</strong> - Generates 3 concept options. Selects highest relevance concept</div>
          </div>
          <div class="path-step">
            <div class="path-number">8</div>
            <div class="path-content"><strong>PHASE: WRITE (Iter 1)</strong> - Drafts complete blog post. Word count: 1,247 words. Saves to drafts table</div>
          </div>
          <div class="path-step">
            <div class="path-number">9</div>
            <div class="path-content"><strong>PHASE: CRITIQUE (Iter 1)</strong> - Self-evaluates against voice samples and acceptance criteria</div>
          </div>
        </div>

        <div class="critique-box">
          <div class="critique-header">CRITIQUE RESULTS - Iteration 1</div>
          <div class="critique-row">
            <span>Voice match score:</span>
            <span class="critique-fail">7/10</span>
          </div>
          <div class="critique-row">
            <span>Passes founder test:</span>
            <span class="critique-fail">NO</span>
          </div>
          <div class="mt-4 text-sm" style="color: #166534;">
            <strong>Weaknesses identified:</strong> Opening could be more provocative, CTA too soft, Section 3 too lengthy, Missing concrete example, Tone shifts in paragraph 4
          </div>
          <div class="mt-2 text-sm" style="color: #166534;">
            <strong>Decision:</strong> ITERATE
          </div>
        </div>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">10</div>
            <div class="path-content"><strong>PHASE: WRITE (Iter 2)</strong> - Applies feedback. Rewrites opening, adds example, strengthens CTA. Word count: 1,189 words</div>
          </div>
          <div class="path-step">
            <div class="path-number">11</div>
            <div class="path-content"><strong>PHASE: CRITIQUE (Iter 2)</strong> - Voice match: 8/10, Founder test: NO (example needs detail, conclusion rushed). ITERATE</div>
          </div>
          <div class="path-step">
            <div class="path-number">12</div>
            <div class="path-content"><strong>PHASE: WRITE (Iter 3)</strong> - Expands example, rewrites conclusion</div>
          </div>
          <div class="path-step">
            <div class="path-number">13</div>
            <div class="path-content"><strong>PHASE: CRITIQUE (Iter 3)</strong> - Voice match: 8/10, Founder test: NO (CTA still weak). ITERATE</div>
          </div>
          <div class="path-step">
            <div class="path-number">14</div>
            <div class="path-content"><strong>PHASE: WRITE (Iter 4)</strong> - Final CTA revision</div>
          </div>
        </div>

        <div class="critique-box">
          <div class="critique-header">CRITIQUE RESULTS - Iteration 4</div>
          <div class="critique-row">
            <span>Voice match score:</span>
            <span class="critique-pass">9/10</span>
          </div>
          <div class="critique-row">
            <span>Passes founder test:</span>
            <span class="critique-pass">YES</span>
          </div>
          <div class="mt-4 text-sm" style="color: #166534;">
            <strong>Strengths:</strong> Strong opening hook, Authentic voice, Clear examples, Compelling CTA
          </div>
          <div class="mt-2 text-sm" style="color: #166534;">
            <strong>Decision:</strong> PUBLISH
          </div>
        </div>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">15</div>
            <div class="path-content"><strong>[T+32min]</strong> Finalization: INSERT INTO published, UPDATE prd.json SET passes = true, APPEND learnings to progress.txt</div>
          </div>
          <div class="path-step">
            <div class="path-number">16</div>
            <div class="path-content"><strong>DONE:</strong> Iterations used: 4, Final word count: 1,156, Voice match: 9/10, Ready for human review</div>
          </div>
        </div>

        <p class="text-text-muted text-sm mt-4">
          <strong>Timing expectations:</strong> Each critique iteration 60-90 seconds. Simple blog: 3-5 iterations (5-8 min). Complex thought piece: 6-10 iterations (10-15 min).
        </p>
      </section>

      <!-- Section 6: GOTCHAS -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Gotchas
        </h2>

        <p class="text-text-secondary mb-6">
          12 real problems you'll hit, with concrete numbers and fixes:
        </p>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #1: Empty Database
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> AI hallucinates content, generic output that doesn't match your brand</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Database not seeded before running</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Seed DB with real trends, communications, research. Takes 30-60 minutes. No shortcuts.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #2: No Voice Samples
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Output doesn't match brand voice, sounds generic AI</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Communications table empty or has only 1-2 samples</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Add 5-10 communications with varied formats (tweets, emails, blog intros). 20 minutes of work.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #3: Voice Match Never Improves
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Stuck at 6-7/10 across iterations, never reaches publishable quality</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Voice samples not distinctive enough or too few patterns to learn</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Better voice samples with clearer patterns. Add more specific criteria in SKILL.md. Takes ~1 hour.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #4: Founder Test Never Passes
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Infinite loop, never publishes, burns through iterations</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Bar too high or criteria too vague</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Lower bar OR add more specific criteria in prd.json acceptance criteria. 15 minutes.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #5: Context Window Overflow
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Long content fills context, quality drops in later iterations</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Too much data loaded per iteration</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Break into sections, summarize between phases, use /compact. 10 minutes.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #6: Stale Trends
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Content feels dated, irrelevant angles, references old news</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Database not refreshed, old trends still marked 'new'</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Regular DB refresh cadence, decay old entries with status='stale'. Weekly task.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #7: Loop Won't Stop
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Keeps iterating even when content is good enough</div>
          <div class="gotcha-detail"><strong>Cause:</strong> No max iteration limit, criteria too perfectionist</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Add max iteration limit in ralph.sh (default 10). 5 minutes.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #8: SQL Injection Risk
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Malformed DB entries cause errors or weird behavior</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Unsanitized inputs in seed.js</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Use parameterized queries, sanitize inputs. 15 minutes.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #9: Wrong Content Type
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Asked for tweet, got blog post. Asked for email, got LinkedIn</div>
          <div class="gotcha-detail"><strong>Cause:</strong> content_type not specified clearly in prd.json</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Specify exact content_type in task definition. 5 minutes.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #10: Feedback Not Applied
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Same issues repeat each iteration, no improvement</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Feedback too vague, not actionable</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Make feedback more specific and actionable in SKILL.md critique template. 10 minutes.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #11: Database Not Found
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> "No such table" errors on first run</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Forgot to run /ralph-init</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Run /ralph-init first, verify .ralph/data/content.db exists. 2 minutes.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #12: Plugin Not Loading
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Commands not available, "/ralph-marketer" not recognized</div>
          <div class="gotcha-detail"><strong>Cause:</strong> plugin.json syntax error or incorrect path</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Check .claude-plugin/plugin.json syntax, restart Claude. 5 minutes.</div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          These are fundamental tensions, not bugs to fix:
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Voice Matching is Art, Not Science
          </div>
          <div class="hard-detail"><strong>The tension:</strong> "Your voice" is subjective, hard to quantify. Different readers perceive voice differently. What feels authentic to you might not to others.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Voice match score doesn't correlate with actual quality. 8/10 content gets rejected by humans. 6/10 content actually sounds great.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> More samples = better pattern detection. Iterate on scoring criteria. Accept some subjectivity is unavoidable. Use human review as final gate, not score alone.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Discovery/Synthesis Boundary
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Too much discovery = hallucination risk. Too little discovery = stale, limited content. Where exactly is the line?</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Some tasks need real-time discovery (breaking news). DB can't keep up with fast-moving topics. But letting AI discover = lies.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Regular DB refresh cadence. Clear boundary definition per content type. Accept that some domains (breaking news) aren't suitable for this pattern.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Critique Calibration
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Too harsh = never passes, infinite loops, frustration. Too lenient = low quality published, brand damage.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Oscillating between "everything fails" and "everything passes." No stable middle ground.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Tune voice match threshold (8+ typical for blog, 7+ for social). Test with real publishing decisions. Adjust based on outcomes, not feelings.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Domain Transfer
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Content patterns differ by industry, audience, format. What works for SaaS blog doesn't work for healthcare compliance.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Great results in one domain, terrible in another. Same setup, different outcomes.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Domain-specific DB templates. Separate tables per content type. Don't expect one-size-fits-all. Invest in domain customization.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Fresh Context Trade-off
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Each iteration loses prior reasoning but gains clarity. Some thinking is repeated. Context rot avoided but efficiency lost.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Iteration 5 re-discovers what iteration 3 figured out. progress.txt doesn't capture everything.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Accept some repeated thinking as cost of fresh context. Make progress.txt comprehensive. Invest in better summarization.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Human Quality Bar Definition
          </div>
          <div class="hard-detail"><strong>The tension:</strong> "Would founder publish?" is still subjective. Different founders have different standards. The bar drifts over time.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> What passed last month fails now. Inconsistent quality over time. Team disagreement on standards.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Define explicit criteria in acceptance tests. Reduce ambiguity. Review and recalibrate periodically. Accept that perfect objectivity is impossible.</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO USE -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Use / When Not
        </h2>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              USE RALPH MARKETER WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Regular content production needed (weekly+)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Established, documentable brand voice</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Have source material (trends, research, comms)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Quality bar is clear enough to express</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Content types: blog, email, social, documentation</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              DON'T USE RALPH MARKETER WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>One-off content → Manual Claude session</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>No voice samples → Build samples first</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Breaking news → Manual with sources</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Highly creative work → Human direction</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Code documentation → Standard Ralph</span>
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">Ralph Variant Comparison</h3>

        <table class="comparison-table">
          <thead>
            <tr>
              <th>Variant</th>
              <th>Focus</th>
              <th>Output</th>
              <th>Best For</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Basic Ralph</strong> (Huntley/Carson)</td>
              <td>Feature development</td>
              <td>Shipped code</td>
              <td>Software features</td>
            </tr>
            <tr>
              <td><strong>Ralph Marketer</strong> (Koylanai)</td>
              <td>Content generation</td>
              <td>Blog posts, copy</td>
              <td>Marketing teams</td>
            </tr>
            <tr>
              <td><strong>Original</strong> (Huntley)</td>
              <td>General tasks</td>
              <td>Any completion</td>
              <td>Flexible use</td>
            </tr>
            <tr>
              <td><strong>Panopticon</strong> (Cantillon)</td>
              <td>Life domains</td>
              <td>Multi-domain output</td>
              <td>Personal productivity</td>
            </tr>
          </tbody>
        </table>

        <h3 class="font-semibold text-lg mb-4 mt-8">Domain Expansion Potential</h3>

        <table class="comparison-table">
          <thead>
            <tr>
              <th>Domain</th>
              <th>Adaptation Needed</th>
              <th>Feasibility</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Legal documents</td>
              <td>Contract templates, precedent DB</td>
              <td>Medium</td>
            </tr>
            <tr>
              <td>Technical writing</td>
              <td>API docs, tutorials</td>
              <td>High</td>
            </tr>
            <tr>
              <td>Sales emails</td>
              <td>CRM integration, persona DB</td>
              <td>High</td>
            </tr>
            <tr>
              <td>Research papers</td>
              <td>Citation DB, style guides</td>
              <td>Medium</td>
            </tr>
            <tr>
              <td>Social media</td>
              <td>Platform-specific voice</td>
              <td>High</td>
            </tr>
          </tbody>
        </table>
      </section>

    </main>

    <!-- Resizer between Main Panel and Activity Zone -->
    <div class="resizer" data-resizer="activity-zone" aria-label="Resize activity panel"></div>

    <!-- Activity Zone -->
    <aside class="activity-zone" id="activityZone">
      <div class="text-xs font-semibold text-text-muted uppercase tracking-wider mb-4">Operational Intelligence</div>

      <!-- ESSENCE SECTION (4 items) -->
      <div class="activity-item invariant" data-section="essence">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">Shared with Ralph: External Memory</div>
        <div class="text-text-secondary text-sm">
          Ralph Marketer uses SQLite DB + progress.txt for external state, just like core Ralph uses prd.json + progress.txt. Both avoid agent memory. <em>External state > internal memory</em> is shared DNA.
        </div>
      </div>

      <div class="activity-item invariant" data-section="essence">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">Shared with All Loops: Fresh Context</div>
        <div class="text-text-secondary text-sm">
          Each critique iteration gets clean context window, avoiding context rot - same as core Ralph principle. <em>Fresh context > extended sessions</em> applies to content just like code.
        </div>
      </div>

      <div class="activity-item invariant" data-section="essence">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">UNIQUE: Self-Critique Feedback</div>
        <div class="text-text-secondary text-sm">
          Unlike code Ralph which uses external tests, Marketer evaluates its OWN output quality with structured critique. This is the key innovation - the verification layer is internal, not external.
        </div>
      </div>

      <div class="activity-item warstory" data-section="essence">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">84K Views, 1.9K Bookmarks</div>
        <div class="text-text-secondary text-sm">
          @koylanai's thread went viral. The discovery/synthesis separation resonated with content creators who'd experienced AI hallucination pain. "Finally, someone who gets it."
        </div>
      </div>

      <!-- CORE SECTION (4 items) -->
      <div class="activity-item inversion" data-section="core">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if AI discovered trends itself?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd see:</strong> Made-up statistics, fake competitor claims, non-existent studies cited.<br>
          <strong>Why it fails:</strong> AI hallucinates facts. It confidently invents things that sound true.<br>
          <strong>Hidden constraint:</strong> Discovery/synthesis separation is LOAD-BEARING. Remove it and the whole pattern fails.
        </div>
      </div>

      <div class="activity-item inversion" data-section="core">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if no self-critique loop?</div>
        <div class="text-text-secondary text-sm">
          First drafts are "deterministically bad." Without iteration, you'd publish content that doesn't match voice, has weak CTAs, rambles. <em>Iteration is essential, not optional.</em>
        </div>
      </div>

      <div class="activity-item analogy" data-section="core">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Traditional Publishing Model</div>
        <div class="text-text-secondary text-sm">
          <strong>Style Guide</strong> = Database (voice samples, brand rules)<br>
          <strong>Writer</strong> = AI synthesis<br>
          <strong>Editor</strong> = Self-critique loop<br>
          <strong>Founder Approval</strong> = Final quality gate<br><br>
          <em>If you understand traditional publishing, you understand Ralph Marketer.</em>
        </div>
      </div>

      <div class="activity-item effect" data-section="core">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="sparkles" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Voice Definition Improvement</div>
        <div class="text-text-secondary text-sm">
          Using the loop FORCES explicit voice documentation. Teams discover their actual voice by trying to teach it to AI. The database becomes a living style guide.
        </div>
      </div>

      <!-- DECISIONS SECTION (4 items) -->
      <div class="activity-item constraint" data-section="decisions">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">"AI hallucinates facts" → Entire Architecture</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> AI hallucinates when discovering facts<br>
          → Need pre-populated database<br>
          → Need discovery agents<br>
          → Need SQLite schema<br>
          → Need seed.js workflow<br><br>
          <em>One constraint drives the entire architecture.</em>
        </div>
      </div>

      <div class="activity-item constraint" data-section="decisions">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">"Voice matching is subjective" → Scoring System</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> Voice matching is subjective<br>
          → Need voice samples<br>
          → Need communications table<br>
          → Need scoring system<br>
          → Need founder test<br><br>
          <em>Subjectivity drives explicit voice capture.</em>
        </div>
      </div>

      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip database seeding</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> Skip database seeding<br>
          <strong>THEN:</strong> AI discovers facts on its own<br>
          <strong>THEN:</strong> Hallucinated content<br>
          <strong>THEN:</strong> Published lies<br>
          <strong>FINALLY:</strong> Brand damage, trust erosion<br><br>
          <em>The fix: 30-60 minutes seeding is non-negotiable.</em>
        </div>
      </div>

      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip voice samples</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> Skip voice samples<br>
          <strong>THEN:</strong> No matching target<br>
          <strong>THEN:</strong> Generic AI voice<br>
          <strong>THEN:</strong> Inconsistent brand<br>
          <strong>FINALLY:</strong> Reader distrust, "sounds like AI"<br><br>
          <em>The fix: 5-10 voice samples minimum.</em>
        </div>
      </div>

      <!-- FILES SECTION (4 items) -->
      <div class="activity-item expertise" data-section="files">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How deep is your understanding?</div>
        <div class="text-text-secondary text-sm">
          <strong>Novice:</strong> "Install plugin, run with mock data" → Can't customize<br>
          <strong>Intermediate:</strong> "Customize DB schema, tune voice match" → Better results<br>
          <strong>Advanced:</strong> "Build custom discovery agents, multi-platform" → Full control<br>
          <strong>Expert:</strong> "Create domain-specific forks" → You're at the frontier
        </div>
      </div>

      <div class="activity-item composition" data-section="files">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">Marketer + External Research Agent</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> TrendScout populates trends table, Research Agent fills research table, Marketer synthesizes.<br>
          <strong>Why it works:</strong> Discovery agents are modular. Swap implementations without changing Marketer.
        </div>
      </div>

      <div class="activity-item composition" data-section="files">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Anti-Composition
        </div>
        <div class="font-medium text-text-primary mb-2">Marketer + Live Discovery (FAILS)</div>
        <div class="text-text-secondary text-sm">
          <strong>Why it fails:</strong> AI hallucinates when discovering facts. Defeats the entire discovery/synthesis separation. If you need real-time discovery, this pattern isn't right.
        </div>
      </div>

      <div class="activity-item effect" data-section="files">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="sparkles" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Database Becomes Asset</div>
        <div class="text-text-secondary text-sm">
          Over time, trends/research/communications DB becomes valuable content asset beyond just AI use. It's a living record of your market, voice, and positioning.
        </div>
      </div>

      <!-- PATH SECTION (4 items) -->
      <div class="activity-item horizon" data-section="path">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">How judgment evolves with iterations</div>
        <div class="text-text-secondary text-sm">
          <strong>Iteration 1:</strong> "This is terrible, it'll never work"<br>
          <strong>Iteration 3:</strong> "Getting closer, still off"<br>
          <strong>Iteration 4:</strong> "Wait, this actually sounds like me?"<br>
          <strong>Iteration 5+:</strong> "The learning compounds"<br><br>
          <em>Don't judge by iteration 1. Trust the loop.</em>
        </div>
      </div>

      <div class="activity-item warstory" data-section="path">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">4 Iterations to Publish</div>
        <div class="text-text-secondary text-sm">
          Typical blog post: 4 critique cycles to founder approval. Each iteration 60-90 seconds. Total: 5-8 minutes for publish-ready content. Validates the iteration approach.
        </div>
      </div>

      <div class="activity-item warstory" data-section="path">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">Voice Match Plateau</div>
        <div class="text-text-secondary text-sm">
          User stuck at 7/10 until adding more diverse voice samples. Added 5 more communications with different formats. Jumped to 8/10+. <em>More samples = better matching.</em>
        </div>
      </div>

      <div class="activity-item gradient" data-section="path">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How database staleness degrades output</div>
        <div class="text-text-secondary text-sm">
          <strong>100%:</strong> Fresh trends, relevant angles<br>
          <strong>75%:</strong> Slightly dated, still usable<br>
          <strong>50%:</strong> Noticeably old references<br>
          <strong>25%:</strong> Actively wrong context<br>
          <strong>0%:</strong> Content unusable, embarrassing<br><br>
          <em>3-month-old trends = 50% degradation.</em>
        </div>
      </div>

      <!-- GOTCHAS SECTION (4 items) -->
      <div class="activity-item inflection" data-section="gotchas">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When voice samples flip from help to diminishing returns</div>
        <div class="text-text-secondary text-sm">
          <strong>0-5 samples:</strong> Not enough patterns<br>
          <strong>5-10 samples:</strong> Strong improvement<br>
          <strong>10-20 samples:</strong> Diminishing returns<br>
          <strong>20+ samples:</strong> Context overhead<br><br>
          <strong>THE INFLECTION:</strong> ~10-20 samples before diminishing returns.
        </div>
      </div>

      <div class="activity-item tradeoff" data-section="gotchas">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Quality vs Speed</div>
        <div class="text-text-secondary text-sm">
          <strong>More iterations:</strong> Better quality, slower output<br>
          <strong>Fewer iterations:</strong> Faster output, lower quality<br><br>
          <strong>Resolution:</strong> Set voice match threshold (8+). Accept when met. Don't over-iterate.
        </div>
      </div>

      <div class="activity-item tradeoff" data-section="gotchas">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Specificity vs Flexibility</div>
        <div class="text-text-secondary text-sm">
          <strong>More specific DB:</strong> Better voice matching for that type<br>
          <strong>Less specific DB:</strong> Works for more content types<br><br>
          <strong>Resolution:</strong> Separate tables per content type. Blog voice != Tweet voice.
        </div>
      </div>

      <div class="activity-item frontier" data-section="gotchas">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">Performance Feedback Loop</div>
        <div class="text-text-secondary text-sm">
          <strong>Unsolved:</strong> Published content metrics (views, engagement) should inform future content priorities. Not implemented yet. Theoretical extension.
        </div>
      </div>

      <!-- HARD SECTION (4 items) -->
      <div class="activity-item tradeoff" data-section="hard">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Fresh Context vs Reasoning Continuity</div>
        <div class="text-text-secondary text-sm">
          <strong>THE DILEMMA:</strong><br>
          Fresh context = peak quality, avoids rot<br>
          But: Loses prior reasoning, some re-discovery<br><br>
          <strong>WHY NO PERFECT ANSWER:</strong> progress.txt is lossy. Each iteration "forgets" 90% of the prior. Accept that some re-thinking is the cost of fresh context.
        </div>
      </div>

      <div class="activity-item frontier" data-section="hard">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">Multi-Platform Adaptation</div>
        <div class="text-text-secondary text-sm">
          <strong>Unsolved:</strong> Same content adapted for blog/tweet/email/LinkedIn automatically. Different voice per platform. Currently requires separate runs. Theoretical extension.
        </div>
      </div>

      <div class="activity-item frontier" data-section="hard">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">Voice Model Training</div>
        <div class="text-text-secondary text-sm">
          <strong>Unsolved:</strong> Using successful published content to improve voice matching over time. Self-improving system. Not implemented. Unknown who's working on it.
        </div>
      </div>

      <div class="activity-item minimal" data-section="hard">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">The irreducible core</div>
        <div class="text-text-secondary text-sm">
          <strong>Just need:</strong> Single table (communications), basic critique, no external agents<br>
          <code style="background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;">sqlite3 content.db "CREATE TABLE communications..."</code><br>
          Add 5 voice samples. Run simplified critique loop. <em>Everything else is enhancement.</em>
        </div>
      </div>

      <!-- WHEN SECTION (5 items) -->
      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">If Ralph Marketer isn't right</div>
        <div class="text-text-secondary text-sm">
          <strong>One-off content?</strong> → Manual Claude session<br>
          <strong>No voice samples?</strong> → Build samples first<br>
          <strong>Breaking news?</strong> → Manual with sources<br>
          <strong>Code docs?</strong> → Standard Ralph
        </div>
      </div>

      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">Human Writer + Claude Edit</div>
        <div class="text-text-secondary text-sm">
          <strong>When better:</strong> Human creativity is primary, AI assists. Original thinking required. Highly strategic content.<br>
          <strong>When worse:</strong> Volume production, consistency across pieces, routine content.
        </div>
      </div>

      <div class="activity-item inversion" data-section="when">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if you used this for "make it creative"?</div>
        <div class="text-text-secondary text-sm">
          <strong>You'd see:</strong> Generic "creativity," same patterns each time, no real innovation<br>
          <strong>Why it fails:</strong> Ralph Marketer OPTIMIZES to a target. It doesn't INNOVATE from nothing. Creativity needs human direction.<br>
          <em>Loop ≠ Creative director.</em>
        </div>
      </div>

      <div class="activity-item analogy" data-section="when">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Factory vs Studio</div>
        <div class="text-text-secondary text-sm">
          <strong>Ralph Marketer</strong> = Content factory (consistent, scaled, efficient)<br>
          <strong>Human + Claude</strong> = Creative studio (bespoke, unique, slower)<br><br>
          <em>Use factory for commodity content, studio for signature pieces.</em>
        </div>
      </div>

      <div class="activity-item horizon" data-section="when">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">At what scale is Ralph Marketer right?</div>
        <div class="text-text-secondary text-sm">
          <strong>1 piece (hours):</strong> No - manual simpler<br>
          <strong>Weekly (days):</strong> Maybe - if voice consistency matters<br>
          <strong>Regular (weeks+):</strong> Yes - setup pays off<br>
          <strong>Operation (months+):</strong> Yes - database becomes asset
        </div>
      </div>

    </aside>
  </div>

  <script>
    /**
     * PanelResizer - Handles draggable panel dividers
     */
    class PanelResizer {
      constructor(resizerEl, config = {}) {
        this.resizer = resizerEl;
        this.config = {
          storageKey: 'panel-activity-zone-width',
          minWidth: 280,
          maxWidth: 900,
          defaultWidth: 480,
          ...config
        };

        this.isResizing = false;
        this.startX = 0;
        this.startWidth = 0;

        this.activityZone = document.querySelector('.activity-zone');
        this.mainContent = document.querySelector('.main-content');

        this.onMouseDown = this.onMouseDown.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
        this.onMouseUp = this.onMouseUp.bind(this);

        this.init();
      }

      init() {
        this.restoreWidth();
        this.resizer.addEventListener('mousedown', this.onMouseDown);
      }

      onMouseDown(e) {
        if (e.button !== 0) return;

        this.isResizing = true;
        this.startX = e.clientX;
        this.startWidth = this.activityZone.offsetWidth;

        this.resizer.classList.add('active');
        document.body.classList.add('resizing');

        document.addEventListener('mousemove', this.onMouseMove);
        document.addEventListener('mouseup', this.onMouseUp);

        e.preventDefault();
      }

      onMouseMove(e) {
        if (!this.isResizing) return;

        const delta = this.startX - e.clientX;
        const newWidth = this.startWidth + delta;

        const constrainedWidth = Math.max(
          this.config.minWidth,
          Math.min(this.config.maxWidth, newWidth)
        );

        this.activityZone.style.width = constrainedWidth + 'px';
        this.mainContent.style.marginRight = constrainedWidth + 'px';
        this.resizer.style.right = constrainedWidth + 'px';
      }

      onMouseUp(e) {
        if (!this.isResizing) return;

        this.isResizing = false;

        this.resizer.classList.remove('active');
        document.body.classList.remove('resizing');

        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);

        this.saveWidth();
      }

      saveWidth() {
        const width = this.activityZone.offsetWidth;
        localStorage.setItem(this.config.storageKey, JSON.stringify({
          width,
          timestamp: Date.now()
        }));
      }

      restoreWidth() {
        try {
          const stored = localStorage.getItem(this.config.storageKey);
          if (stored) {
            const { width } = JSON.parse(stored);
            if (width >= this.config.minWidth && width <= this.config.maxWidth) {
              this.activityZone.style.width = width + 'px';
              this.mainContent.style.marginRight = width + 'px';
              this.resizer.style.right = width + 'px';
            }
          }
        } catch (e) {
          console.warn('Failed to restore panel width:', e);
        }
      }

      destroy() {
        this.resizer.removeEventListener('mousedown', this.onMouseDown);
        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);
      }
    }

    // Auto-initialize resizers on DOM ready
    document.addEventListener('DOMContentLoaded', () => {
      const resizers = document.querySelectorAll('[data-resizer]');
      resizers.forEach(resizer => new PanelResizer(resizer));
    });

    // Initialize Lucide icons
    lucide.createIcons();

    // Navigation toggle
    function toggleSection(header) {
      const section = header.closest('.nav-section');
      section.classList.toggle('expanded');
      const children = section.querySelector('.nav-children');
      children.classList.toggle('expanded');
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const nav = document.getElementById('leftNav');
      nav.classList.toggle('open');
    }

    // Copy functionality
    function copyCode(btn, text) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check" class="w-3 h-3"></i> Copied!';
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = originalText;
          lucide.createIcons();
        }, 2000);
      });
    }

    function copyCodeBlock(btn) {
      const codeBlock = btn.closest('.code-block');
      const pre = codeBlock.querySelector('pre');
      const text = pre.textContent;
      copyCode(btn, text);
    }

    // Scroll-sync with GSAP ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    const sections = document.querySelectorAll('[data-activity]');
    const activityItems = document.querySelectorAll('.activity-item');

    sections.forEach(section => {
      ScrollTrigger.create({
        trigger: section,
        start: 'top 40%',
        end: 'bottom 40%',
        onEnter: () => activateSection(section.dataset.activity),
        onEnterBack: () => activateSection(section.dataset.activity),
      });
    });

    function activateSection(sectionName) {
      activityItems.forEach(item => {
        if (item.dataset.section === sectionName) {
          item.classList.add('active');
          gsap.to(item, {
            opacity: 1,
            y: -2,
            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
            duration: 0.3,
            ease: 'power2.out'
          });
        } else {
          item.classList.remove('active');
          gsap.to(item, {
            opacity: 0.5,
            y: 0,
            boxShadow: 'none',
            duration: 0.3,
            ease: 'power2.out'
          });
        }
      });

      document.querySelectorAll('.nav-section-header').forEach(header => {
        header.classList.remove('active');
      });
      const activeNav = document.querySelector(`[data-section="${sectionName}"] .nav-section-header`);
      if (activeNav) {
        activeNav.classList.add('active');
      }
    }

    // Initialize first section as active
    activateSection('essence');

    // Smooth scroll for nav links
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.nav-item').forEach(l => l.classList.remove('active'));
          link.classList.add('active');
        }
      });
    });

    // Brushing interaction - hover activity item highlights related content
    activityItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = 'rgba(13, 147, 115, 0.05)';
          relatedSection.style.transition = 'background-color 0.3s ease';
        }
      });

      item.addEventListener('mouseleave', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = '';
        }
      });
    });
  </script>
<script src="../../js/global-nav.js"></script>
</body>
</html>
