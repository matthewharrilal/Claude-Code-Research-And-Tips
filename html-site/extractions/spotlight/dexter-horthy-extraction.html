<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dexter Horthy: 12-Factor Agents | Claude Code Documentation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- GSAP for scroll-sync -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Tailwind Config with Design Tokens -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-base': '#ffffff',
            'bg-subtle': '#fafafa',
            'bg-muted': '#f4f4f5',
            'text-primary': '#18181b',
            'text-secondary': '#3f3f46',
            'text-muted': '#71717a',
            'accent': '#0D9373',
            'accent-light': '#10b981',
            'accent-bg': '#ecfdf5',
            'border': '#e4e4e7',
            // Activity Zone content type colors (Original 6)
            'az-invariant': '#3b82f6',    // Blue
            'az-effect': '#f59e0b',       // Amber
            'az-composition': '#8b5cf6',  // Purple
            'az-frontier': '#ef4444',     // Red
            'az-warstory': '#10b981',     // Green
            'az-alternative': '#6b7280',  // Gray
            // Activity Zone generative content types (New 10)
            'az-inversion': '#4f46e5',    // Indigo
            'az-constraint': '#8b5cf6',   // Violet
            'az-gradient': '#f43f5e',     // Rose
            'az-horizon': '#06b6d4',      // Cyan
            'az-violation': '#f97316',    // Orange
            'az-tradeoff': '#f59e0b',     // Amber
            'az-analogy': '#d946ef',      // Fuchsia
            'az-expertise': '#10b981',    // Emerald
            'az-minimal': '#84cc16',      // Lime
            'az-inflection': '#eab308',   // Yellow
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Fira Code', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    /* Base Styles */
    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    [id] {
      scroll-margin-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: #ffffff;
      color: #18181b;
      line-height: 1.7;
    }

    /* Three Panel Layout */
    .three-panel-layout {
      min-height: 100vh;
      position: relative;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: #ffffff;
      border-bottom: 1px solid #e4e4e7;
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 24px;
    }

    /* Left Navigation - 240px fixed */
    .left-nav {
      position: fixed;
      top: 56px;
      left: 0;
      width: 240px;
      height: calc(100vh - 56px);
      border-right: 1px solid #e4e4e7;
      background: #ffffff;
      overflow-y: auto;
      padding: 16px 0;
      z-index: 40;
    }

    .nav-section {
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 500;
      color: #3f3f46;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.15s;
    }

    .nav-section-header:hover {
      background: #f4f4f5;
    }

    .nav-section-header.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-item {
      display: block;
      padding: 6px 12px 6px 44px;
      font-size: 14px;
      color: #71717a;
      text-decoration: none;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-item:hover {
      color: #3f3f46;
      background: #f4f4f5;
    }

    .nav-item.active {
      color: #0D9373;
      background: #ecfdf5;
    }

    .nav-children {
      display: none;
      overflow: hidden;
    }

    .nav-children.expanded {
      display: block;
    }

    .nav-chevron {
      transition: transform 0.2s;
    }

    .nav-section.expanded .nav-chevron {
      transform: rotate(90deg);
    }

    /* Main Content - Flexible, margins for fixed sidebars */
    .main-content {
      margin-left: 240px;
      margin-right: 480px;
      margin-top: 56px;
      padding: 48px 48px;
      min-width: 400px;
    }

    /* Activity Zone - 480px fixed */
    .activity-zone {
      position: fixed;
      top: 56px;
      right: 0;
      width: 480px;
      height: calc(100vh - 56px);
      border-left: 1px dashed #e4e4e7;
      background: #fafafa;
      overflow-y: auto;
      padding: 24px 20px;
      z-index: 40;
    }

    /* Responsive: Hide Activity Zone below 1400px */
    @media (max-width: 1400px) {
      .activity-zone {
        display: none;
      }
      .main-content {
        margin-right: 0;
        padding: 40px 32px;
      }
    }

    /* Responsive: Hide Left Nav below 768px */
    @media (max-width: 768px) {
      .left-nav {
        display: none;
      }
      .left-nav.open {
        display: block;
        position: fixed;
        top: 56px;
        left: 0;
        right: 0;
        bottom: 0;
        background: #ffffff;
        z-index: 50;
        overflow-y: auto;
      }
      .main-content {
        margin-left: 0;
        padding: 24px 16px;
        min-width: auto;
      }
    }

    /* Resizer - Draggable divider between Main Panel and Activity Zone */
    .resizer {
      position: fixed;
      top: 56px;
      right: 480px;
      width: 6px;
      height: calc(100vh - 56px);
      cursor: col-resize;
      background: transparent;
      z-index: 50;
      transition: background 0.15s ease;
    }

    .resizer:hover {
      background: rgba(13, 147, 115, 0.15);
    }

    .resizer.active {
      background: rgba(13, 147, 115, 0.25);
    }

    /* Prevent text selection during resize */
    body.resizing {
      user-select: none;
      cursor: col-resize !important;
    }

    body.resizing * {
      cursor: col-resize !important;
    }

    /* Hide resizer when Activity Zone is hidden (responsive) */
    @media (max-width: 1400px) {
      .resizer {
        display: none;
      }
    }

    /* Activity Zone Items */
    .activity-item {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      background: #ffffff;
      border: 1px solid #e4e4e7;
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .activity-item.active {
      opacity: 1;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .activity-item:hover {
      opacity: 1;
    }

    .activity-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Activity Zone content type borders (Original 6) */
    .activity-item.invariant { border-left: 4px solid #3b82f6; }
    .activity-item.effect { border-left: 4px solid #f59e0b; }
    .activity-item.composition { border-left: 4px solid #8b5cf6; }
    .activity-item.frontier { border-left: 4px solid #ef4444; }
    .activity-item.warstory { border-left: 4px solid #10b981; }
    .activity-item.alternative { border-left: 4px solid #6b7280; }

    /* Activity Zone generative content types (New 10) */
    .activity-item.inversion { border-left: 4px solid #4f46e5; }
    .activity-item.constraint { border-left: 4px solid #8b5cf6; }
    .activity-item.gradient { border-left: 4px solid #f43f5e; }
    .activity-item.horizon { border-left: 4px solid #06b6d4; }
    .activity-item.violation { border-left: 4px solid #f97316; }
    .activity-item.tradeoff { border-left: 4px solid #f59e0b; }
    .activity-item.analogy { border-left: 4px solid #d946ef; }
    .activity-item.expertise { border-left: 4px solid #10b981; }
    .activity-item.minimal { border-left: 4px solid #84cc16; }
    .activity-item.inflection { border-left: 4px solid #eab308; }

    /* Main Content Components */

    /* Section titles with number */
    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: #0D9373;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      border-radius: 50%;
      margin-right: 12px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      color: #18181b;
      margin-bottom: 20px;
      margin-top: 56px;
      display: flex;
      align-items: center;
    }

    .section-title:first-child {
      margin-top: 0;
    }

    /* Essence Box (15 words) */
    .essence-box {
      background: linear-gradient(135deg, #18181b 0%, #27272a 100%);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 40px;
    }

    .essence-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #10b981;
      margin-bottom: 12px;
    }

    .essence-text {
      font-size: 22px;
      font-weight: 500;
      color: #ffffff;
      line-height: 1.4;
    }

    /* Core Abstraction Box */
    .core-abstraction {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .core-philosophy {
      font-size: 16px;
      color: #3f3f46;
      margin-bottom: 16px;
      font-style: italic;
    }

    .core-code {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 16px;
      overflow-x: auto;
    }

    .core-code code {
      font-family: 'Fira Code', monospace;
      font-size: 15px;
      color: #10b981;
      white-space: nowrap;
    }

    .core-anchor {
      font-size: 14px;
      color: #71717a;
      text-align: center;
    }

    /* Design Decision Box */
    .decision-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .decision-why {
      font-size: 16px;
      font-weight: 600;
      color: #0D9373;
      margin-bottom: 12px;
    }

    .decision-reasoning {
      font-size: 14px;
      color: #3f3f46;
      margin-bottom: 16px;
    }

    .decision-implication {
      background: #f4f4f5;
      border-radius: 8px;
      padding: 16px;
    }

    .decision-implication-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: #71717a;
      margin-bottom: 8px;
    }

    /* Code Blocks */
    .code-block {
      background: #18181b;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 24px;
      position: relative;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
      color: #e4e4e7;
      line-height: 1.6;
    }

    .code-block .comment { color: #6b7280; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #10b981; }
    .code-block .variable { color: #60a5fa; }

    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #3f3f46;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: background 0.15s;
    }

    .copy-btn:hover {
      background: #52525b;
    }

    /* Path Steps */
    .path-container {
      background: #fafafa;
      border: 1px solid #e4e4e7;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 40px;
    }

    .path-step {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .path-step:last-child {
      margin-bottom: 0;
    }

    .path-number {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: #0D9373;
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .path-content {
      flex: 1;
      font-size: 14px;
      color: #3f3f46;
    }

    .path-content code {
      background: #e4e4e7;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }

    /* Gotcha Box */
    .gotcha-box {
      background: #fffbeb;
      border: 1px solid #fcd34d;
      border-left: 4px solid #f59e0b;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .gotcha-title {
      font-weight: 600;
      color: #92400e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .gotcha-detail {
      font-size: 14px;
      color: #78350f;
      margin-bottom: 8px;
    }

    .gotcha-detail strong {
      color: #92400e;
    }

    /* What's Hard Box */
    .hard-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .hard-title {
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hard-detail {
      font-size: 14px;
      color: #7f1d1d;
      margin-bottom: 8px;
    }

    /* When To Use Grid */
    .when-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }

    @media (max-width: 900px) {
      .when-grid {
        grid-template-columns: 1fr;
      }
    }

    .when-use {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 24px;
    }

    .when-not {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 24px;
    }

    .when-title {
      font-weight: 600;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .when-use .when-title { color: #166534; }
    .when-not .when-title { color: #991b1b; }

    .when-item {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .when-use .when-item { color: #166534; }
    .when-not .when-item { color: #991b1b; }

    /* Factor Box - specific to 12-Factor content */
    .factor-box {
      background: #ffffff;
      border: 1px solid #e4e4e7;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 12px;
    }

    .factor-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      background: #18181b;
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      border-radius: 4px;
      margin-right: 12px;
    }

    .factor-title {
      font-weight: 600;
      color: #18181b;
      display: inline;
    }

    .factor-description {
      font-size: 14px;
      color: #71717a;
      margin-top: 8px;
    }

    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: none;
      padding: 8px;
      background: none;
      border: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #fafafa;
    }

    ::-webkit-scrollbar-thumb {
      background: #d4d4d8;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1aa;
    }

    /* Keyboard shortcut hint */
    .kbd {
      display: inline-flex;
      align-items: center;
      padding: 2px 6px;
      background: #f4f4f5;
      border: 1px solid #e4e4e7;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      color: #71717a;
    }

    /* Quote Box */
    .quote-box {
      background: #f8fafc;
      border-left: 4px solid #0D9373;
      border-radius: 0 8px 8px 0;
      padding: 20px 24px;
      margin: 24px 0;
    }

    .quote-text {
      font-style: italic;
      color: #3f3f46;
      font-size: 15px;
      line-height: 1.7;
    }

    .quote-attribution {
      margin-top: 12px;
      font-size: 13px;
      color: #71717a;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
      <i data-lucide="menu" class="w-5 h-5 text-text-secondary"></i>
    </button>
    <div class="flex items-center gap-3">
      <i data-lucide="terminal" class="w-5 h-5 text-accent"></i>
      <span class="font-semibold text-text-primary">Claude Code</span>
    </div>
    <div class="flex-1 flex justify-center">
      <button class="flex items-center gap-2 px-4 py-2 bg-bg-muted rounded-lg text-text-muted text-sm hover:bg-border transition-colors">
        <i data-lucide="search" class="w-4 h-4"></i>
        <span>Search documentation...</span>
        <span class="kbd">Cmd+K</span>
      </button>
    </div>
    <div class="flex items-center gap-4">
      <a href="#" class="text-sm text-text-muted hover:text-text-primary transition-colors">Support</a>
      <button class="p-2 hover:bg-bg-muted rounded-lg transition-colors" aria-label="Toggle theme">
        <i data-lucide="sun" class="w-4 h-4 text-text-muted"></i>
      </button>
    </div>
  </header>

  <div class="three-panel-layout">
    <!-- Left Navigation -->
    <nav class="left-nav" id="leftNav">
      <div class="nav-content"></div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">Own your prompts, context window, and control flow. LLMs decide, code controls.</div>
        </div>

        <p class="text-text-secondary mb-6">
          Dexter Horthy is the founder of HumanLayer (YC F24) and creator of the 12-Factor Agents framework. His philosophy: <strong>most successful AI products aren't purely agentic</strong>—they combine deterministic code with strategically placed LLM decision points.
        </p>
      </section>

      <!-- Section 2: CORE ABSTRACTION + IMPLEMENTATION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Core Abstraction
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"The contents of your context window are the ONLY lever you have to affect the quality of your output."</div>

          <div class="core-code">
            <button class="copy-btn" onclick="copyCode(this, 'Deterministic Code -> LLM Decision -> Deterministic Code')">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <code>Deterministic Code -> LLM Decision -> Deterministic Code</code>
          </div>

          <div class="core-anchor">Software first. LLMs for decisions. Not the other way around.</div>
        </div>

        <p class="text-text-secondary mb-6">
          Traditional agent loops let the LLM control everything: <code>LLM -> tool -> context -> LLM -> tool</code>. Dexter inverts this. Code controls the flow, LLMs make decisions at specific points. This is "software first" architecture.
        </p>

        <div class="quote-box">
          <div class="quote-text">"I've tried every agent framework out there, from the plug-and-play crew/langchains to the 'minimalist' smolagents to the 'production grade' langgraph, griptape, etc. Most strong founders are rolling the stack themselves. I don't see a lot of frameworks in production customer-facing agents."</div>
          <div class="quote-attribution">— Dexter Horthy</div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="twelve-factors">The 12 Factors</h3>

        <div class="factor-box">
          <span class="factor-number">1</span>
          <span class="factor-title">Natural Language to Tool Calls</span>
          <div class="factor-description">LLMs determine next steps via structured JSON output</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">2</span>
          <span class="factor-title">Own Your Prompts</span>
          <div class="factor-description">Direct control, not framework defaults</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">3</span>
          <span class="factor-title">Own Your Context Window</span>
          <div class="factor-description">Strategic context building (Context Engineering)</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">4</span>
          <span class="factor-title">Tools Are Structured Outputs</span>
          <div class="factor-description">Treat tool calls as JSON generation</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">5</span>
          <span class="factor-title">Unify Execution & Business State</span>
          <div class="factor-description">Keep agent state aligned with application state</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">6</span>
          <span class="factor-title">Launch/Pause/Resume APIs</span>
          <div class="factor-description">Simple interfaces for agent lifecycle</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">7</span>
          <span class="factor-title">Contact Humans with Tools</span>
          <div class="factor-description">Use tool calls to request human input</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">8</span>
          <span class="factor-title">Own Your Control Flow</span>
          <div class="factor-description">Write explicit logic, not framework loops</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">9</span>
          <span class="factor-title">Compact Errors into Context</span>
          <div class="factor-description">Fit error information within context window</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">10</span>
          <span class="factor-title">Small, Focused Agents</span>
          <div class="factor-description">Specialized over monolithic</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">11</span>
          <span class="factor-title">Trigger from Anywhere</span>
          <div class="factor-description">Meet users in their platforms</div>
        </div>

        <div class="factor-box">
          <span class="factor-number">12</span>
          <span class="factor-title">Stateless Reducer</span>
          <div class="factor-description">Agents as pure functions</div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">The "Dumb Zone" Discovery</h3>

        <p class="text-text-secondary mb-6">
          Dexter analyzed 100,000 developer sessions and discovered the "dumb zone": the middle 40-60% of a large context window where model recall degrades and reasoning falters.
        </p>

        <div class="code-block">
          <pre><span class="comment"># Context Window Performance</span>

<span class="variable">0-40%</span>:   <span class="string">Good performance</span>
<span class="variable">40-60%</span>:  <span class="keyword">Degraded recall (the "dumb zone")</span>
<span class="variable">60-100%</span>: <span class="string">Diminishing returns accelerate</span>

<span class="comment"># Implication: Fill past 40% and expect problems.</span></pre>
        </div>
      </section>

      <!-- Section 3: DESIGN DECISIONS -->
      <section id="why-no-frameworks" data-activity="decisions">
        <h2 class="section-title">
          <span class="section-number">3</span>
          Design Decisions
        </h2>

        <div class="decision-box">
          <div class="decision-why">WHY NO FRAMEWORKS?</div>
          <div class="decision-reasoning">
            "Most successful AI products aren't purely agentic. They combine deterministic code with strategically placed LLM decision points." Frameworks hide prompts, control flow, and context management—the three things you need to own for production reliability.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Write explicit control flow, don't surrender to framework loops. If a framework abstracts your prompts, you've lost your competitive moat. Build custom when you need production reliability.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-own-prompts">
          <div class="decision-why">WHY OWN YOUR PROMPTS?</div>
          <div class="decision-reasoning">
            Framework defaults are generic, not optimized for your domain. The prompt IS the product. When a framework hides your prompt, you can't iterate, version, or differentiate.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Store prompts in version-controlled files. Iterate on them like code. A/B test them. Your prompt is your moat—don't let a framework own it.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-human-loop">
          <div class="decision-why">WHY HUMAN-IN-THE-LOOP?</div>
          <div class="decision-reasoning">
            "Companies won't give AI unsupervised access to sensitive operations like dropping database tables." LLMs are non-deterministic. The most useful functions (delete, send, transfer) are also the most risky.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Build approval flows for risky operations. Use tool calls to request human input. This is what HumanLayer solves—make "contact human" just another tool the agent can call.
            </div>
          </div>
        </div>

        <div class="decision-box">
          <div class="decision-why">WHY OWN YOUR CONTEXT WINDOW?</div>
          <div class="decision-reasoning">
            "The context window is the ONLY lever you have." More context doesn't mean better results—after 40%, quality degrades. Context engineering is the differentiating skill.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Use progressive disclosure. Load context on-demand. Prune aggressively. Stay under 40% of your context window for optimal quality.
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: FILE STRUCTURE -->
      <section id="file-structure" data-activity="files">
        <h2 class="section-title">
          <span class="section-number">4</span>
          The File Structure
        </h2>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre>my-agent/
<span class="comment">├── prompts/                    # Own your prompts (Factor 2)</span>
│   ├── system.md               <span class="comment"># System prompt (versioned)</span>
│   ├── tools.md                <span class="comment"># Tool definitions</span>
│   └── context/                <span class="comment"># Context templates</span>
│       ├── user-context.md     <span class="comment"># User-specific context</span>
│       └── task-context.md     <span class="comment"># Task-specific context</span>
<span class="comment">├── src/</span>
│   ├── agent.py                <span class="comment"># Main agent loop (you own control flow)</span>
│   ├── tools/                  <span class="comment"># Tool implementations</span>
│   │   ├── __init__.py
│   │   └── sensitive_ops.py    <span class="comment"># Human approval required</span>
│   ├── context/                <span class="comment"># Context engineering (Factor 3)</span>
│   │   ├── builder.py          <span class="comment"># Strategic context building</span>
│   │   └── pruner.py           <span class="comment"># Context window management</span>
│   └── state/                  <span class="comment"># State management (Factor 5)</span>
│       ├── unified.py          <span class="comment"># Execution + business state</span>
│       └── persistence.py      <span class="comment"># Launch/pause/resume (Factor 6)</span>
├── humanlayer.yaml             <span class="comment"># HumanLayer config</span>
├── requirements.txt
└── .env                        <span class="comment"># API keys (gitignored)</span></pre>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="humanlayer-config">HumanLayer Configuration</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># humanlayer.yaml</span>
<span class="variable">version</span>: <span class="string">"1.0"</span>

<span class="variable">approval_channels</span>:
  <span class="keyword">slack</span>:
    <span class="variable">channel</span>: <span class="string">"#ai-approvals"</span>
    <span class="variable">timeout</span>: <span class="string">"5m"</span>
  <span class="keyword">email</span>:
    <span class="variable">to</span>: <span class="string">"approvers@company.com"</span>
    <span class="variable">timeout</span>: <span class="string">"30m"</span>

<span class="variable">sensitive_operations</span>:
  - <span class="string">"db_delete"</span>
  - <span class="string">"send_email"</span>
  - <span class="string">"process_payment"</span>
  - <span class="string">"modify_production"</span>

<span class="variable">fallback</span>:
  <span class="variable">on_timeout</span>: <span class="string">"reject"</span>
  <span class="variable">on_error</span>: <span class="string">"escalate"</span></pre>
        </div>
      </section>

      <!-- Section 5: PATH OF A TASK -->
      <section id="path" data-activity="path">
        <h2 class="section-title">
          <span class="section-number">5</span>
          Path of a Task
        </h2>

        <p class="text-text-secondary mb-6">
          Follow a sensitive operation ("Delete old user records") through the 12-Factor system:
        </p>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content"><strong>T+0s:</strong> User request arrives: "Clean up old user records from database"</div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content"><strong>Factor 1:</strong> LLM parses intent, generates structured JSON: <code>{ tool: "db_delete", table: "users", filter: "..." }</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content"><strong>Factor 3:</strong> Context builder loads schema info, deletion policy, recent activity. Stays under 40% to avoid "dumb zone"</div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content"><strong>Factor 4:</strong> Tool definition validates JSON schema, type checking on parameters</div>
          </div>
          <div class="path-step">
            <div class="path-number">5</div>
            <div class="path-content"><strong>Factor 7:</strong> Sensitive operation detected (DELETE). HumanLayer SDK triggers approval request via Slack</div>
          </div>
          <div class="path-step">
            <div class="path-number">6</div>
            <div class="path-content"><strong>T+5min:</strong> Human reviews in Slack, approves/rejects. Response captured by HumanLayer</div>
          </div>
          <div class="path-step">
            <div class="path-number">7</div>
            <div class="path-content"><strong>Factor 6:</strong> Agent resumes from paused state. Approval token passed to execution</div>
          </div>
          <div class="path-step">
            <div class="path-number">8</div>
            <div class="path-content"><strong>Factor 8:</strong> Deterministic code executes deletion. LLM not involved in execution logic</div>
          </div>
          <div class="path-step">
            <div class="path-number">9</div>
            <div class="path-content"><strong>Factor 9:</strong> If error occurs, formatted for next LLM call within context window budget</div>
          </div>
          <div class="path-step">
            <div class="path-number">10</div>
            <div class="path-content"><strong>T+5min+10s:</strong> Complete. Result logged, state updated</div>
          </div>
        </div>
      </section>

      <!-- Section 6: GOTCHAS -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Gotchas
        </h2>

        <p class="text-text-secondary mb-6">
          Real problems you'll hit, with concrete numbers and fixes:
        </p>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #1: Context window bloat
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> LLM starts hallucinating, quality degrades suddenly</div>
          <div class="gotcha-detail"><strong>Threshold:</strong> >40% context window usage = entering dumb zone</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Prune context, use progressive disclosure. 10-30 min to fix.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #2: Dumb zone entry
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Model "forgets" earlier context, contradicts itself</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Context filled 40-60%, attention degraded</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Reset conversation, compress context to <40%. 5-15 min.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #3: Framework lock-in
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Can't customize prompts, stuck with defaults</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Framework abstracts away the things you need to control</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Extract prompts, own your control flow. 2-4 hours.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #4: Tool call validation failures
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> JSON schema mismatches, type errors</div>
          <div class="gotcha-detail"><strong>Cause:</strong> LLM generated malformed tool call</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Define explicit schemas, test edge cases. 15-30 min.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #5: Human approval timeout
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Agent waits forever for approval</div>
          <div class="gotcha-detail"><strong>Cause:</strong> No timeout configured, approver unavailable</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Set timeouts, implement fallback paths. 5-10 min.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #6: State drift
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Execution state doesn't match business state</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Agent state and app state diverged (Factor 5 violated)</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Unify state, single source of truth. 1-2 hours.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            #7: Monolithic agent syndrome
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Single agent tries to do everything, confusion increases</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Factor 10 violated—agent not focused</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Split into focused specialists. 2-4 hours.</div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          These are fundamental tensions, not bugs to fix:
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Context vs. Quality
          </div>
          <div class="hard-detail"><strong>The tension:</strong> More context = more information but worse reasoning. The dumb zone is real. Context is not free storage.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Strategic pruning, progressive disclosure, stay under 40%. Accept that you can't have both maximum context AND maximum quality.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Autonomy vs. Safety
          </div>
          <div class="hard-detail"><strong>The tension:</strong> More autonomy = faster but riskier. Less autonomy = safer but slower.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Human-in-the-loop for sensitive operations only. Risk-based: approve deletes, not reads.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Framework vs. Control
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Frameworks are faster to start but limit customization. Custom is slower to build but gives full control.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Start with framework for prototypes. Graduate to custom when framework limits you. This is the path most strong founders take.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Speed vs. Reliability
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Fast responses may be wrong. Reliable responses take longer (human approval, verification).</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Verification loops, human review gates. Accept that production-grade agents are slower than demos.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Tokens vs. Cost
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Better context = more tokens = more cost. Budget constraints are real.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Budget-aware context engineering. Know your cost per operation. Prune context not just for quality but for economics.</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO USE -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Use / When Not
        </h2>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              USE 12-FACTOR WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Building for production (not just prototypes)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Sensitive operations present (delete, send, transfer)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Need custom prompts (domain-specific optimization)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Framework limitations frustrating you</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Team has intermediate+ AI experience</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Budget for custom development (takes longer than frameworks)</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              DON'T USE 12-FACTOR WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Quick prototype needed -> Use LangChain/CrewAI</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Simple chatbot -> Direct API calls sufficient</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>No sensitive operations -> Human-in-loop overkill</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Small context needs -> Direct prompting works</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Team new to AI -> Learning curve too steep</span>
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8">The Graduation Path</h3>

        <div class="code-block">
          <pre><span class="comment"># Evolution to 12-Factor</span>

<span class="variable">Beginner:</span>    Direct API calls
    |
<span class="variable">Intermediate:</span> Framework (LangChain)
    |
<span class="variable">Frustrated:</span>  Own your prompts (Factor 2)
    |
<span class="variable">Growing:</span>     Own your context (Factor 3)
    |
<span class="variable">Mature:</span>      Own your control flow (Factor 8)
    |
<span class="variable">Production:</span>  Full 12-Factor implementation</pre>
        </div>
      </section>

    </main>

    <!-- Resizer between Main Panel and Activity Zone -->
    <div class="resizer" data-resizer="activity-zone" aria-label="Resize activity panel"></div>

    <!-- Activity Zone -->
    <aside class="activity-zone" id="activityZone">
      <div class="text-xs font-semibold text-text-muted uppercase tracking-wider mb-4">Operational Intelligence</div>

      <!-- ESSENCE SECTION (3 items) -->
      <div class="activity-item invariant" data-section="essence">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">Shared with Boris: External State</div>
        <div class="text-text-secondary text-sm">
          12-Factor's "own your context window" mirrors Boris's external state principle. Both avoid internal memory. Both treat files as truth.
        </div>
      </div>

      <div class="activity-item invariant" data-section="essence">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">Shared with Ralph: Fresh Context</div>
        <div class="text-text-secondary text-sm">
          12-Factor's context engineering aligns with Ralph's fresh context per iteration. Both recognize: context degrades, fresh is better.
        </div>
      </div>

      <div class="activity-item analogy" data-section="essence">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Named after Heroku 12-Factor App</div>
        <div class="text-text-secondary text-sm">
          <strong>Original:</strong> Stateless processes, config in environment, explicit dependencies.<br>
          <strong>Agent version:</strong> Stateless agents, external state, explicit tool definitions.<br>
          <em>Same philosophy, different domain.</em>
        </div>
      </div>

      <!-- CORE SECTION (6 items) -->
      <div class="activity-item warstory" data-section="core">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">HumanLayer Origin: SQL Agents</div>
        <div class="text-text-secondary text-sm">
          Dexter built autonomous SQL agents for warehouse management. Companies refused unsupervised access to DELETE operations. This frustration birthed HumanLayer (YC F24).
        </div>
      </div>

      <div class="activity-item warstory" data-section="core">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">100,000 Sessions Analyzed</div>
        <div class="text-text-secondary text-sm">
          Dexter analyzed 100K developer sessions. Discovered the "dumb zone" where model recall degrades (40-60% of context). Changed how he advises on context engineering.
        </div>
      </div>

      <div class="activity-item inflection" data-section="core">
        <div class="activity-label" style="color: #eab308;">
          <i data-lucide="activity" class="w-4 h-4"></i>
          Inflection Point
        </div>
        <div class="font-medium text-text-primary mb-2">When context flips from help to hurt</div>
        <div class="text-text-secondary text-sm">
          <strong>0-40%:</strong> More context = better results<br>
          <strong>40-60%:</strong> "Dumb zone" - recall degrades<br>
          <strong>60%+:</strong> Diminishing returns accelerate<br><br>
          <strong>THE FLIP:</strong> ~40% of context window<br>
          <em>Past this point, adding context hurts quality.</em>
        </div>
      </div>

      <div class="activity-item gradient" data-section="core">
        <div class="activity-label" style="color: #f43f5e;">
          <i data-lucide="trending-down" class="w-4 h-4"></i>
          Failure Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How context bloat degrades (invisibly)</div>
        <div class="text-text-secondary text-sm">
          <strong>100% -> 90%</strong> (0-40%): Subtle, you won't notice<br>
          <strong>90% -> 70%</strong> (40-60%): Model starts contradicting itself<br>
          <strong>70% -> 50%</strong> (60-80%): Instructions forgotten<br>
          <strong>50% -> CLIFF</strong> (80%+): Hallucinations, amnesia<br><br>
          <em>Critical: The gradient is invisible until the cliff.</em>
        </div>
      </div>

      <div class="activity-item constraint" data-section="core">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">Context window is ONLY lever</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> Context window is finite (~170K tokens)<br>
          -> Must optimize context usage<br>
          -> Progressive disclosure required<br>
          -> Strategic loading necessary<br>
          -> Context engineering becomes critical skill<br>
          -> 12-Factor codifies the discipline
        </div>
      </div>

      <div class="activity-item minimal" data-section="core">
        <div class="activity-label" style="color: #84cc16;">
          <i data-lucide="minimize-2" class="w-4 h-4"></i>
          Minimal Pattern
        </div>
        <div class="font-medium text-text-primary mb-2">"Three Factor Agent"</div>
        <div class="text-text-secondary text-sm">
          <strong>Essential:</strong> Factor 2 (Own Prompts) + Factor 3 (Own Context) + Factor 8 (Own Control Flow)<br>
          <strong>Everything else:</strong> Refinements for scale and safety<br><br>
          <em>Start here. Add factors as complexity demands.</em>
        </div>
      </div>

      <!-- DECISIONS SECTION (5 items) -->
      <div class="activity-item inversion" data-section="decisions">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if we used framework defaults for prompts?</div>
        <div class="text-text-secondary text-sm">
          Generic prompts not optimized for your domain. Can't iterate, can't version, can't differentiate. Your competitor using the same framework has the same "moat."<br><br>
          <strong>Why this fails:</strong> The prompt IS the product.<br>
          <em>Hidden constraint: Prompt ownership is competitive advantage.</em>
        </div>
      </div>

      <div class="activity-item inversion" data-section="decisions">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if we filled the entire context window?</div>
        <div class="text-text-secondary text-sm">
          "Dumb zone" kicks in at 40%. Model recall degrades, reasoning falters. By 80%, the model forgets your instructions.<br><br>
          <strong>Why this fails:</strong> Context window is not free storage.<br>
          <em>Hidden constraint: Less context = better quality.</em>
        </div>
      </div>

      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip Factor 3 (Own Context)</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> Let framework manage context<br>
          <strong>THEN:</strong> Context window fills up<br>
          <strong>THEN:</strong> Hit "dumb zone" at 40%<br>
          <strong>THEN:</strong> Model quality degrades<br>
          <strong>FINALLY:</strong> Production agent becomes unreliable<br><br>
          <em>The fix: Strategic context building from day one.</em>
        </div>
      </div>

      <div class="activity-item violation" data-section="decisions">
        <div class="activity-label" style="color: #f97316;">
          <i data-lucide="alert-octagon" class="w-4 h-4"></i>
          Violation Chain
        </div>
        <div class="font-medium text-text-primary mb-2">If you skip Factor 7 (Human Contact)</div>
        <div class="text-text-secondary text-sm">
          <strong>IF:</strong> No approval for sensitive ops<br>
          <strong>THEN:</strong> LLM makes risky decision autonomously<br>
          <strong>THEN:</strong> Risky operation executes<br>
          <strong>THEN:</strong> Data loss, security breach, or worse<br>
          <strong>FINALLY:</strong> "AI deleted production database"<br><br>
          <em>The fix: Human-in-the-loop for sensitive operations.</em>
        </div>
      </div>

      <div class="activity-item tradeoff" data-section="decisions">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Framework vs. Custom Dilemma</div>
        <div class="text-text-secondary text-sm">
          <strong>Framework:</strong> Fast development, generic output, limited customization<br>
          <strong>Custom:</strong> Slow development, optimized output, full control<br><br>
          <strong>Resolution:</strong> Start framework, graduate to custom when limited. This is the path most strong founders take.
        </div>
      </div>

      <!-- FILES SECTION (3 items) -->
      <div class="activity-item composition" data-section="files">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">12-Factor + Ralph Loop</div>
        <div class="text-text-secondary text-sm">
          <strong>Works:</strong> 12-Factor context engineering inside Ralph loops. Context stays fresh (Ralph), factors guide each iteration (12-Factor).<br>
          <strong>Synergy:</strong> Ralph handles fresh context, 12-Factor handles what goes in it.
        </div>
      </div>

      <div class="activity-item composition" data-section="files">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="layers" class="w-4 h-4"></i>
          Composition Case
        </div>
        <div class="font-medium text-text-primary mb-2">12-Factor + HumanLayer</div>
        <div class="text-text-secondary text-sm">
          <strong>Native combination:</strong> HumanLayer implements Factor 7 (Contact Humans). Same company, designed to work together.<br>
          <strong>Integration:</strong> Just add humanlayer.yaml and SDK calls.
        </div>
      </div>

      <div class="activity-item alternative" data-section="files">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Anti-Composition
        </div>
        <div class="font-medium text-text-primary mb-2">12-Factor + Framework Defaults</div>
        <div class="text-text-secondary text-sm">
          <strong>Contradiction:</strong> 12-Factor says own your prompts. Frameworks hide prompts.<br>
          <strong>Conflict:</strong> 12-Factor says own control flow. Frameworks control flow.<br>
          <em>These are fundamentally opposed philosophies.</em>
        </div>
      </div>

      <!-- PATH SECTION (3 items) -->
      <div class="activity-item horizon" data-section="path">
        <div class="activity-label" style="color: #06b6d4;">
          <i data-lucide="clock" class="w-4 h-4"></i>
          Time Horizon Shift
        </div>
        <div class="font-medium text-text-primary mb-2">When is 12-Factor the right choice?</div>
        <div class="text-text-secondary text-sm">
          <strong>Prototype (hours):</strong> No - frameworks faster<br>
          <strong>MVP (days-weeks):</strong> Maybe - if you know you'll need customization<br>
          <strong>Production (months):</strong> Yes - investment pays off<br>
          <strong>Enterprise (years):</strong> Absolutely - control, security, reliability all critical
        </div>
      </div>

      <div class="activity-item expertise" data-section="path">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
          Expertise Gradient
        </div>
        <div class="font-medium text-text-primary mb-2">How deep is your 12-Factor understanding?</div>
        <div class="text-text-secondary text-sm">
          <strong>Novice:</strong> "What are the 12 factors?" -> Read the guide<br>
          <strong>Intermediate:</strong> "Why these factors?" -> Own prompts, context, control flow<br>
          <strong>Advanced:</strong> "Full implementation" -> Production agents<br>
          <strong>Expert:</strong> "Team scaling" -> CodeLayer, organizational patterns
        </div>
      </div>

      <div class="activity-item warstory" data-section="path">
        <div class="activity-label" style="color: #10b981;">
          <i data-lucide="user" class="w-4 h-4"></i>
          War Story
        </div>
        <div class="font-medium text-text-primary mb-2">CodeLayer: Scaling Beyond Individual</div>
        <div class="text-text-secondary text-sm">
          "Once an engineer masters Claude Code, productivity gains are so substantial that the real challenge becomes organizational." Dexter built CodeLayer to scale 12-Factor to teams.
        </div>
      </div>

      <!-- GOTCHAS SECTION (3 items) -->
      <div class="activity-item frontier" data-section="gotchas">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Optimal Context Budget</div>
        <div class="text-text-secondary text-sm">
          "40% dumb zone" is a heuristic, not precise. Varies by model, task, domain. Dexter's ongoing research explores where exactly the cliff is.
        </div>
      </div>

      <div class="activity-item frontier" data-section="gotchas">
        <div class="activity-label" style="color: #ef4444;">
          <i data-lucide="flask-conical" class="w-4 h-4"></i>
          Research Frontier
        </div>
        <div class="font-medium text-text-primary mb-2">UNSOLVED: Multi-Agent 12-Factor</div>
        <div class="text-text-secondary text-sm">
          12 factors are single-agent focused. What are the factors for multi-agent systems? Coordination, shared state, handoffs? Community exploration ongoing.
        </div>
      </div>

      <div class="activity-item effect" data-section="gotchas">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="zap" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Framework Exodus</div>
        <div class="text-text-secondary text-sm">
          As teams adopt 12-Factor, they progressively abandon frameworks. Creates knowledge gap for new hires who learned on LangChain. "Unlearning" becomes part of onboarding.
        </div>
      </div>

      <!-- HARD SECTION (4 items) -->
      <div class="activity-item tradeoff" data-section="hard">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="scale" class="w-4 h-4"></i>
          Trade-Off Tension
        </div>
        <div class="font-medium text-text-primary mb-2">Speed vs. Safety</div>
        <div class="text-text-secondary text-sm">
          <strong>No human approval:</strong> Fast, risky<br>
          <strong>Human approval:</strong> Slow, safe<br><br>
          <strong>Resolution:</strong> Risk-based - only approve sensitive operations. Read operations don't need approval. Delete operations do.
        </div>
      </div>

      <div class="activity-item effect" data-section="hard">
        <div class="activity-label" style="color: #f59e0b;">
          <i data-lucide="zap" class="w-4 h-4"></i>
          Second-Order Effect
        </div>
        <div class="font-medium text-text-primary mb-2">Team Scaling Bottleneck</div>
        <div class="text-text-secondary text-sm">
          "Individual productivity is solved. The bottleneck is now team coordination, review processes, workflow standardization, knowledge sharing." This is why HumanLayer built CodeLayer.
        </div>
      </div>

      <div class="activity-item analogy" data-section="hard">
        <div class="activity-label" style="color: #d946ef;">
          <i data-lucide="git-compare" class="w-4 h-4"></i>
          Analogical Bridge
        </div>
        <div class="font-medium text-text-primary mb-2">Context Engineering = Database Indexing</div>
        <div class="text-text-secondary text-sm">
          <strong>Database:</strong> More data isn't better. Index smartly, query what you need.<br>
          <strong>Context:</strong> More context isn't better. Load strategically, prune aggressively.<br><br>
          <em>If you understand database performance, you understand context engineering.</em>
        </div>
      </div>

      <div class="activity-item constraint" data-section="hard">
        <div class="activity-label" style="color: #8b5cf6;">
          <i data-lucide="link-2" class="w-4 h-4"></i>
          Constraint Chain
        </div>
        <div class="font-medium text-text-primary mb-2">LLMs are non-deterministic</div>
        <div class="text-text-secondary text-sm">
          <strong>ROOT:</strong> LLMs are non-deterministic<br>
          -> Can't guarantee correct output<br>
          -> Need human approval for sensitive ops<br>
          -> Need approval API<br>
          -> Need multi-channel delivery (Slack, email, SMS)<br>
          -> HumanLayer exists
        </div>
      </div>

      <!-- WHEN SECTION (4 items) -->
      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Alternative Paths
        </div>
        <div class="font-medium text-text-primary mb-2">If 12-Factor isn't right for you</div>
        <div class="text-text-secondary text-sm">
          <strong>Quick prototype?</strong> -> LangChain/CrewAI (frameworks faster for MVPs)<br>
          <strong>Simple chatbot?</strong> -> Direct API calls (12-Factor overkill)<br>
          <strong>Simplicity priority?</strong> -> Boris vanilla approach
        </div>
      </div>

      <div class="activity-item inversion" data-section="when">
        <div class="activity-label" style="color: #4f46e5;">
          <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
          Inversion Lens
        </div>
        <div class="font-medium text-text-primary mb-2">What if you used 12-Factor for simple chatbot?</div>
        <div class="text-text-secondary text-sm">
          Overhead dominates. You spend more time on context engineering than actual development. Human-in-the-loop for a FAQ bot?<br><br>
          <strong>Why this fails:</strong> 12-Factor is for production agents, not simple tasks.<br>
          <em>Match complexity to problem size.</em>
        </div>
      </div>

      <div class="activity-item invariant" data-section="when">
        <div class="activity-label" style="color: #3b82f6;">
          <i data-lucide="link" class="w-4 h-4"></i>
          Invariant Connection
        </div>
        <div class="font-medium text-text-primary mb-2">Shared principle: Match tool to task</div>
        <div class="text-text-secondary text-sm">
          12-Factor, Ralph, Gas Town all share this: don't use a cannon for a fly. Use single Claude for exploration. Use Ralph for overnight. Use 12-Factor for production. Use Gas Town for factory-scale.
        </div>
      </div>

      <div class="activity-item alternative" data-section="when">
        <div class="activity-label" style="color: #6b7280;">
          <i data-lucide="arrow-right" class="w-4 h-4"></i>
          Related Patterns
        </div>
        <div class="font-medium text-text-primary mb-2">The ecosystem around 12-Factor</div>
        <div class="text-text-secondary text-sm">
          <strong>HumanLayer:</strong> Implements Factor 7<br>
          <strong>CodeLayer:</strong> Scales to teams<br>
          <strong>Maven Course:</strong> Advanced Context Engineering training<br>
          <strong>12-Factor GitHub:</strong> github.com/humanlayer/12-factor-agents
        </div>
      </div>

    </aside>
  </div>

  <script>
    /**
     * PanelResizer - Handles draggable panel dividers
     */
    class PanelResizer {
      constructor(resizerEl, config = {}) {
        this.resizer = resizerEl;
        this.config = {
          storageKey: 'panel-activity-zone-width',
          minWidth: 280,
          maxWidth: 900,
          defaultWidth: 480,
          ...config
        };

        this.isResizing = false;
        this.startX = 0;
        this.startWidth = 0;

        this.activityZone = document.querySelector('.activity-zone');
        this.mainContent = document.querySelector('.main-content');

        this.onMouseDown = this.onMouseDown.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
        this.onMouseUp = this.onMouseUp.bind(this);

        this.init();
      }

      init() {
        this.restoreWidth();
        this.resizer.addEventListener('mousedown', this.onMouseDown);
      }

      onMouseDown(e) {
        if (e.button !== 0) return;

        this.isResizing = true;
        this.startX = e.clientX;
        this.startWidth = this.activityZone.offsetWidth;

        this.resizer.classList.add('active');
        document.body.classList.add('resizing');

        document.addEventListener('mousemove', this.onMouseMove);
        document.addEventListener('mouseup', this.onMouseUp);

        e.preventDefault();
      }

      onMouseMove(e) {
        if (!this.isResizing) return;

        const delta = this.startX - e.clientX;
        const newWidth = this.startWidth + delta;

        const constrainedWidth = Math.max(
          this.config.minWidth,
          Math.min(this.config.maxWidth, newWidth)
        );

        this.activityZone.style.width = constrainedWidth + 'px';
        this.mainContent.style.marginRight = constrainedWidth + 'px';
        this.resizer.style.right = constrainedWidth + 'px';
      }

      onMouseUp(e) {
        if (!this.isResizing) return;

        this.isResizing = false;

        this.resizer.classList.remove('active');
        document.body.classList.remove('resizing');

        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);

        this.saveWidth();
      }

      saveWidth() {
        const width = this.activityZone.offsetWidth;
        localStorage.setItem(this.config.storageKey, JSON.stringify({
          width,
          timestamp: Date.now()
        }));
      }

      restoreWidth() {
        try {
          const stored = localStorage.getItem(this.config.storageKey);
          if (stored) {
            const { width } = JSON.parse(stored);
            if (width >= this.config.minWidth && width <= this.config.maxWidth) {
              this.activityZone.style.width = width + 'px';
              this.mainContent.style.marginRight = width + 'px';
              this.resizer.style.right = width + 'px';
            }
          }
        } catch (e) {
          console.warn('Failed to restore panel width:', e);
        }
      }

      destroy() {
        this.resizer.removeEventListener('mousedown', this.onMouseDown);
        document.removeEventListener('mousemove', this.onMouseMove);
        document.removeEventListener('mouseup', this.onMouseUp);
      }
    }

    // Auto-initialize resizers on DOM ready
    document.addEventListener('DOMContentLoaded', () => {
      const resizers = document.querySelectorAll('[data-resizer]');
      resizers.forEach(resizer => new PanelResizer(resizer));
    });

    // Initialize Lucide icons
    lucide.createIcons();

    // Navigation toggle
    function toggleSection(header) {
      const section = header.closest('.nav-section');
      section.classList.toggle('expanded');
      const children = section.querySelector('.nav-children');
      children.classList.toggle('expanded');
    }

    // Mobile menu toggle
    function toggleMobileMenu() {
      const nav = document.getElementById('leftNav');
      nav.classList.toggle('open');
    }

    // Copy functionality
    function copyCode(btn, text) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check" class="w-3 h-3"></i> Copied!';
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = originalText;
          lucide.createIcons();
        }, 2000);
      });
    }

    function copyCodeBlock(btn) {
      const codeBlock = btn.closest('.code-block');
      const pre = codeBlock.querySelector('pre');
      const text = pre.textContent;
      copyCode(btn, text);
    }

    // Scroll-sync with GSAP ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    const sections = document.querySelectorAll('[data-activity]');
    const activityItems = document.querySelectorAll('.activity-item');

    sections.forEach(section => {
      ScrollTrigger.create({
        trigger: section,
        start: 'top 40%',
        end: 'bottom 40%',
        onEnter: () => activateSection(section.dataset.activity),
        onEnterBack: () => activateSection(section.dataset.activity),
      });
    });

    function activateSection(sectionName) {
      activityItems.forEach(item => {
        if (item.dataset.section === sectionName) {
          item.classList.add('active');
          gsap.to(item, {
            opacity: 1,
            y: -2,
            boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
            duration: 0.3,
            ease: 'power2.out'
          });
        } else {
          item.classList.remove('active');
          gsap.to(item, {
            opacity: 0.5,
            y: 0,
            boxShadow: 'none',
            duration: 0.3,
            ease: 'power2.out'
          });
        }
      });

      // Update nav active state
      document.querySelectorAll('.nav-section-header').forEach(header => {
        header.classList.remove('active');
      });
      const activeNav = document.querySelector(`[data-section="${sectionName}"] .nav-section-header`);
      if (activeNav) {
        activeNav.classList.add('active');
      }
    }

    // Initialize first section as active
    activateSection('essence');

    // Smooth scroll for nav links
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.nav-item').forEach(l => l.classList.remove('active'));
          link.classList.add('active');
        }
      });
    });

    // Brushing interaction - hover activity item highlights related content
    activityItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = 'rgba(13, 147, 115, 0.05)';
          relatedSection.style.transition = 'background-color 0.3s ease';
        }
      });

      item.addEventListener('mouseleave', () => {
        const sectionName = item.dataset.section;
        const relatedSection = document.querySelector(`[data-activity="${sectionName}"]`);
        if (relatedSection) {
          relatedSection.style.backgroundColor = '';
        }
      });
    });
  </script>
<script src="../../js/global-nav.js"></script>
</body>
</html>
