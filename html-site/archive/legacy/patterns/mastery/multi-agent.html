<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="chapter" content="Patterns">
  <meta data-pagefind-meta="section" content="Mastery">
  <title>Multi-Agent Architecture: Complete Mastery Guide | Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="stylesheet" href="../../css/search.css">
  <style>
    .bionic { font-weight: 700; }

    .you-are-here {
      background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%);
      border-left: 4px solid var(--accent);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .you-are-here h2 {
      margin-top: 0;
      border-bottom: none;
      padding-bottom: 0;
      color: var(--accent);
    }

    .checkpoint {
      background: #f0ebe3;
      border-left: 4px solid var(--success);
      border-radius: 8px;
      padding: 1.5rem;
      margin: 2rem 0;
    }

    .checkpoint-header {
      color: var(--success);
      font-weight: 600;
      font-size: 0.85em;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.75rem;
    }

    .milestone {
      background: linear-gradient(90deg, var(--success) 0%, var(--accent) 100%);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      text-align: center;
      margin: 2rem 0;
      font-weight: 600;
    }

    .troubleshoot {
      border: 1px solid var(--error);
      border-radius: 8px;
      margin: 1rem 0;
    }

    .troubleshoot summary {
      background: #fef6f5;
      padding: 1rem;
      cursor: pointer;
      color: var(--error);
      font-weight: 600;
      list-style: none;
    }

    .troubleshoot summary::-webkit-details-marker {
      display: none;
    }

    .troubleshoot summary::after {
      content: '+';
      float: right;
    }

    .troubleshoot[open] summary::after {
      content: '-';
    }

    .troubleshoot-content {
      padding: 1rem;
      background: white;
    }

    .copy-btn {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
      cursor: pointer;
      font-size: 0.75em;
    }

    .copy-btn:hover {
      background: var(--accent-light);
    }

    .code-block-wrapper {
      position: relative;
    }

    .visual-break {
      text-align: center;
      padding: 1.5rem 0;
      color: var(--text-muted);
      font-size: 1.5em;
    }

    .iron-law {
      background: linear-gradient(135deg, #5c4b3a 0%, #3d3d3d 100%);
      color: white;
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem 0;
      text-align: center;
    }

    .iron-law h3 {
      color: white;
      margin-top: 0;
      border-bottom: none;
    }

    .iron-law p {
      font-size: 1.1em;
      margin-bottom: 0;
    }

    .architecture-card {
      background: white;
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
    }

    .architecture-card h3 {
      margin-top: 0;
      color: var(--accent);
      border-bottom: none;
      padding-bottom: 0;
    }

    .architecture-card .source {
      font-size: 0.85em;
      color: var(--text-muted);
      margin-bottom: 1rem;
    }

    .stage-indicator {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-size: 0.8em;
      font-weight: 600;
      margin-right: 0.5rem;
    }

    .stage-beginner { background: var(--success); color: white; }
    .stage-intermediate { background: var(--warning); color: white; }
    .stage-advanced { background: var(--error); color: white; }

    .pitfall-box {
      background: #fef6f5;
      border-left: 4px solid var(--error);
      border-radius: 0 8px 8px 0;
      padding: 1rem 1.25rem;
      margin: 1rem 0;
    }

    .pitfall-box h4 {
      color: var(--error);
      margin-top: 0;
      margin-bottom: 0.5rem;
    }

    .role-table {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      margin: 1rem 0;
    }

    .role-table th {
      background: var(--heading);
      color: white;
    }
  </style>
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="ch1">Chapter 1</button>
        <button class="filter-btn" data-filter="ch2">Chapter 2</button>
        <button class="filter-btn" data-filter="ch3">Chapter 3</button>
        <button class="filter-btn" data-filter="ch4">Chapter 4</button>
        <button class="filter-btn" data-filter="ref">Reference</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>&#8593;&#8595; Navigate</span><span>&#8629; Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Search Trigger Button -->
    <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
      <span class="search-icon">Cmd+K</span>
      <span class="search-text">Search</span>
    </button>
    <!-- Breadcrumb -->
    <nav class="nav-breadcrumb">
      <a href="../../index.html">Home</a>
      <span>&rarr;</span>
      <a href="../index.html">Patterns</a>
      <span>&rarr;</span>
      <a href="index.html">Mastery</a>
      <span>&rarr;</span>
      <strong>Multi-Agent Architecture</strong>
    </nav>

    <h1><span class="bionic">Mul</span>ti-Agent <span class="bionic">Arc</span>hitecture: <span class="bionic">Com</span>plete <span class="bionic">Mas</span>tery <span class="bionic">Gui</span>de</h1>

    <!-- You Are Here Box -->
    <div class="you-are-here">
      <h2><span class="bionic">You</span> Are <span class="bionic">Her</span>e</h2>
      <p><strong><span class="bionic">Wha</span>t this is:</strong> The <span class="bionic">def</span>initive <span class="bionic">gui</span>de to <span class="bionic">mul</span>ti-agent <span class="bionic">orc</span>hestration with <span class="bionic">Cla</span>ude Code. <span class="bionic">Syn</span>thesized from CC <span class="bionic">Mir</span>ror, Gas Town, <span class="bionic">Inf</span>inite <span class="bionic">Orc</span>hestra, <span class="bionic">com</span>munity <span class="bionic">pat</span>terns, and <span class="bionic">pro</span>duction <span class="bionic">dep</span>loyments.</p>
      <p><strong><span class="bionic">Whe</span>re it <span class="bionic">fit</span>s:</strong> <span class="bionic">Mul</span>ti-agent is <span class="bionic">Lev</span>el 5-7 on the <a href="../../foundations/architecture/complexity-ladder.html"><span class="bionic">com</span>plexity <span class="bionic">lad</span>der</a>. If you're not <span class="bionic">com</span>fortable with <span class="bionic">sin</span>gle-agent <span class="bionic">wor</span>kflows, start there first.</p>
      <p><strong><span class="bionic">Pre</span>requisites:</strong> <span class="bionic">Mas</span>tery of <a href="ralph-complete.html">Ralph <span class="bionic">pat</span>tern</a> and <a href="context-management.html"><span class="bionic">con</span>text <span class="bionic">man</span>agement</a>. Git <span class="bionic">wor</span>ktree <span class="bionic">fam</span>iliarity <span class="bionic">hel</span>pful.</p>
      <p><strong><span class="bionic">War</span>ning:</strong> "If you have any doubt <span class="bionic">wha</span>tsoever, then you can't use it" - Steve Yegge on Gas Town</p>
    </div>

    <!-- The Iron Law -->
    <div class="iron-law">
      <h3>The Iron Law of Worker <span class="bionic">Sep</span>aration</h3>
      <p><strong><span class="bionic">ORC</span>HESTRATORS <span class="bionic">COO</span>RDINATE. <span class="bionic">WOR</span>KERS <span class="bionic">EXE</span>CUTE. NEVER MIX.</strong></p>
      <p>You are the <span class="bionic">CON</span>DUCTOR. Your agents play the <span class="bionic">ins</span>truments.</p>
    </div>

    <!-- Table of Contents -->
    <nav class="toc">
      <div class="toc-title"><span class="bionic">Tab</span>le of <span class="bionic">Con</span>tents</div>
      <ul>
        <li><a href="#separation"><span class="bionic">Wor</span>ker <span class="bionic">Sep</span>aration in <span class="bionic">Pra</span>ctice</a></li>
        <li><a href="#architectures"><span class="bionic">Arc</span>hitecture <span class="bionic">Com</span>parison</a>
          <ul>
            <li><a href="#cc-mirror">CC <span class="bionic">Mir</span>ror</a></li>
            <li><a href="#gas-town">Gas Town</a></li>
            <li><a href="#orchestra"><span class="bionic">Inf</span>inite <span class="bionic">Orc</span>hestra</a></li>
            <li><a href="#ralph">Ralph <span class="bionic">Wig</span>gum</a></li>
            <li><a href="#worktrees"><span class="bionic">Par</span>allel <span class="bionic">Swa</span>rms</a></li>
          </ul>
        </li>
        <li><a href="#selection"><span class="bionic">Arc</span>hitecture <span class="bionic">Sel</span>ection <span class="bionic">Gui</span>de</a></li>
        <li><a href="#pitfalls"><span class="bionic">Com</span>mon <span class="bionic">Pit</span>falls</a></li>
        <li><a href="#scaling"><span class="bionic">Sca</span>ling <span class="bionic">Con</span>siderations</a></li>
        <li><a href="#commands"><span class="bionic">Qui</span>ck <span class="bionic">Ref</span>erence <span class="bionic">Com</span>mands</a></li>
        <li><a href="#troubleshooting"><span class="bionic">Tro</span>ubleshooting</a></li>
      </ul>
    </nav>

    <!-- Section: Separation -->
    <section id="separation">
      <h2>The <span class="bionic">Sep</span>aration in <span class="bionic">Pra</span>ctice</h2>

      <p><span class="bionic">Vio</span>lating the Iron Law causes:</p>
      <ul>
        <li><strong><span class="bionic">Wor</span>ker <span class="bionic">rec</span>ursion</strong> (agents <span class="bionic">spa</span>wning <span class="bionic">inf</span>inite sub-agents)</li>
        <li><strong><span class="bionic">Con</span>text <span class="bionic">exp</span>losion</strong> (<span class="bionic">wor</span>kers <span class="bionic">con</span>suming <span class="bionic">orc</span>hestrator <span class="bionic">con</span>text)</li>
        <li><strong><span class="bionic">Coo</span>rdination <span class="bionic">fai</span>lures</strong> (no <span class="bionic">cen</span>tral <span class="bionic">aut</span>hority <span class="bionic">tra</span>cking state)</li>
      </ul>

      <table class="role-table">
        <thead>
          <tr>
            <th>Role</th>
            <th>What They DO</th>
            <th>What They DON'T Do</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong><span class="bionic">Orc</span>hestrator</strong></td>
            <td><span class="bionic">Dec</span>ompose tasks, <span class="bionic">ass</span>ign <span class="bionic">wor</span>kers, track <span class="bionic">pro</span>gress, <span class="bionic">syn</span>thesize <span class="bionic">res</span>ults</td>
            <td>Write code, run <span class="bionic">com</span>mands, <span class="bionic">exp</span>lore <span class="bionic">cod</span>ebases</td>
          </tr>
          <tr>
            <td><strong><span class="bionic">Wor</span>kers</strong></td>
            <td><span class="bionic">Exe</span>cute <span class="bionic">spe</span>cific tasks using tools, <span class="bionic">rep</span>ort <span class="bionic">res</span>ults</td>
            <td>Spawn sub-agents, <span class="bionic">man</span>age task <span class="bionic">gra</span>phs, make <span class="bionic">arc</span>hitectural <span class="bionic">dec</span>isions</td>
          </tr>
        </tbody>
      </table>

      <h3>Tool <span class="bionic">Own</span>ership</h3>

      <table>
        <thead>
          <tr>
            <th><span class="bionic">Orc</span>hestrator Uses</th>
            <th><span class="bionic">Wor</span>kers Use</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>Read</code> (1-2 files max)</td>
            <td><code>Read</code>, <code>Write</code>, <code>Edit</code>, <code>Bash</code></td>
          </tr>
          <tr>
            <td><code><span class="bionic">Tas</span>kCreate</code>, <code><span class="bionic">Tas</span>kUpdate</code>, <code><span class="bionic">Tas</span>kGet</code>, <code><span class="bionic">Tas</span>kList</code></td>
            <td><code>Glob</code>, <code>Grep</code>, <code><span class="bionic">Web</span>Fetch</code>, <code><span class="bionic">Web</span>Search</code></td>
          </tr>
          <tr>
            <td><code><span class="bionic">Ask</span>UserQuestion</code></td>
            <td><span class="bionic">Bro</span>wser <span class="bionic">aut</span>omation, MCP tools</td>
          </tr>
          <tr>
            <td><code>Task</code> (to spawn <span class="bionic">wor</span>kers)</td>
            <td><strong>CAN'T:</strong> Spawn sub-agents</td>
          </tr>
        </tbody>
      </table>

      <h3>The Worker <span class="bionic">Pre</span>amble <span class="bionic">Tem</span>plate</h3>

      <p>Every worker must <span class="bionic">rec</span>eive <span class="bionic">exp</span>licit <span class="bionic">bou</span>ndaries:</p>

      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="navigator.clipboard.writeText(`CONTEXT: You are a WORKER agent, not an orchestrator.

RULES:
- Complete ONLY the task described below
- Use tools directly (Read, Write, Edit, Bash, etc.)
- Do NOT spawn sub-agents
- Do NOT call TaskCreate or TaskUpdate
- Report your results with absolute file paths

TASK:
[Your specific task here]`)">Copy</button>
        <pre><code>CONTEXT: You are a WORKER agent, not an orchestrator.

RULES:
- Complete ONLY the task described below
- Use tools directly (Read, Write, Edit, Bash, etc.)
- Do NOT spawn sub-agents
- Do NOT call TaskCreate or TaskUpdate
- Report your results with absolute file paths

TASK:
[Your specific task here]</code></pre>
      </div>
    </section>

    <div class="visual-break">* * *</div>

    <!-- Section: Architectures -->
    <section id="architectures">
      <h2><span class="bionic">Arc</span>hitecture <span class="bionic">Com</span>parison</h2>

      <h3><span class="bionic">Arc</span>hitecture <span class="bionic">Spe</span>ctrum</h3>

      <div class="ascii-diagram">
SIMPLE <------------------------------------------> COMPLEX

[Ralph Loop]    [CC Mirror]    [Orchestra]    [Gas Town]
     |               |              |              |
Single agent    Multi-agent    Self-improving  Agent factory
Retry loop      Task-based     Docker-based    Role-based
Bash script     Native CC      Specialized     Full system</div>

      <!-- CC Mirror -->
      <div class="architecture-card" id="cc-mirror">
        <h3>CC <span class="bionic">Mir</span>ror (Hub-and-Spoke)</h3>
        <div class="source"><span class="stage-indicator stage-beginner">Stage 5-6</span>Source: @nummanali - <a href="https://github.com/numman-ali/cc-mirror">github.com/numman-ali/cc-mirror</a></div>

        <p>CC <span class="bionic">Mir</span>ror <span class="bionic">unl</span>ocks <span class="bionic">Cla</span>ude Code's <span class="bionic">dis</span>abled <span class="bionic">nat</span>ive <span class="bionic">mul</span>ti-agent <span class="bionic">orc</span>hestration in an <span class="bionic">iso</span>lated <span class="bionic">env</span>ironment. It <span class="bionic">exp</span>oses hidden task <span class="bionic">man</span>agement <span class="bionic">pri</span>mitives.</p>

        <div class="ascii-diagram">
           +------------------+
           |   Orchestrator   |
           +--------+---------+
                    |
    +---------------+---------------+
    |               |               |
    v               v               v
+-------+       +-------+       +-------+
| Coder |       | Tester|       | Docs  |
+-------+       +-------+       +-------+</div>

        <h4>Task <span class="bionic">Man</span>agement API</h4>
        <pre><code>TaskCreate  -> Create with subject, description, acceptance criteria
TaskList    -> Filter: status='open', no owner, not blocked
TaskGet     -> Full context: description, comments, dependencies
TaskUpdate  -> Claim (set owner), add comments, resolve, link references</code></pre>

        <h4>Quick Start</h4>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="navigator.clipboard.writeText(`# Step 1: Create isolated variant
npx cc-mirror quick --provider mirror --name mclaude

# Step 2: Launch it
mclaude

# Step 3: In the terminal
\"Load the orchestration skill and initiate\"`)">Copy</button>
          <pre><code># Step 1: Create isolated variant
npx cc-mirror quick --provider mirror --name mclaude

# Step 2: Launch it
mclaude

# Step 3: In the terminal
"Load the orchestration skill and initiate"</code></pre>
        </div>
      </div>

      <!-- Checkpoint: CC Mirror -->
      <div class="checkpoint">
        <div class="checkpoint-header">Checkpoint: CC Mirror Quick Start</div>
        <p><strong><span class="bionic">Ver</span>ify your <span class="bionic">sta</span>te:</strong></p>
        <pre><code># Check mclaude exists
which mclaude

# Test it launches
mclaude --version</code></pre>
        <p><strong>In the mclaude <span class="bionic">ses</span>sion, test <span class="bionic">orc</span>hestration:</strong></p>
        <pre><code>You: "List available task management commands"
Claude should mention: TaskCreate, TaskList, TaskGet, TaskUpdate</code></pre>

        <details class="troubleshoot">
          <summary>mclaude not found?</summary>
          <div class="troubleshoot-content">
            <ul>
              <li><span class="bionic">Che</span>ck: Did <code>npx cc-mirror quick</code> <span class="bionic">com</span>plete <span class="bionic">wit</span>hout <span class="bionic">err</span>ors?</li>
              <li><span class="bionic">Che</span>ck: Is Node.js <span class="bionic">ins</span>talled? (<code>node --version</code>)</li>
              <li><span class="bionic">Che</span>ck: Try <code>npx cc-mirror</code> to see <span class="bionic">ava</span>ilable <span class="bionic">com</span>mands</li>
            </ul>
          </div>
        </details>
      </div>

      <!-- Gas Town -->
      <div class="architecture-card" id="gas-town">
        <h3>Gas Town (Agent <span class="bionic">Fac</span>tory)</h3>
        <div class="source"><span class="stage-indicator stage-advanced">Stage 7+</span>Source: @steve_yegge - <a href="https://github.com/steveyegge/gastown">github.com/steveyegge/gastown</a></div>

        <p>Gas Town is a <strong><span class="bionic">fac</span>tory for agents</strong>, not a <span class="bionic">bet</span>ter <span class="bionic">sin</span>gle agent. It's <span class="bionic">des</span>igned for <span class="bionic">dev</span>elopers at Stage 7+ of AI <span class="bionic">evo</span>lution (10+ agents, hand-<span class="bionic">man</span>aged).</p>

        <blockquote>"<span class="bionic">Cla</span>ude Code is the <span class="bionic">wor</span>ld's <span class="bionic">big</span>gest fuckin' ant. <span class="bionic">Eve</span>ryone is <span class="bionic">foc</span>used on <span class="bionic">mak</span>ing their ant run <span class="bionic">lon</span>ger... when <span class="bionic">nat</span>ure <span class="bionic">pre</span>fers <span class="bionic">col</span>onies." - Steve Yegge</blockquote>

        <h4>The 7 Worker Roles</h4>

        <table>
          <thead>
            <tr><th>Role</th><th><span class="bionic">Fun</span>ction</th><th><span class="bionic">Lev</span>el</th></tr>
          </thead>
          <tbody>
            <tr><td><strong><span class="bionic">May</span>or</strong></td><td>Town-level <span class="bionic">coo</span>rdination</td><td>Town</td></tr>
            <tr><td><strong><span class="bionic">Dea</span>con</strong></td><td><span class="bionic">Mon</span>itoring/<span class="bionic">han</span>dshakes</td><td>Town</td></tr>
            <tr><td><strong>Dogs</strong></td><td><span class="bionic">Qua</span>lity <span class="bionic">gat</span>es/<span class="bionic">wat</span>chdogs</td><td>Town</td></tr>
            <tr><td><strong><span class="bionic">Ref</span>inery</strong></td><td>Task <span class="bionic">dec</span>omposition</td><td>Rig</td></tr>
            <tr><td><strong><span class="bionic">Pol</span>ecat</strong></td><td>Named <span class="bionic">per</span>sistent <span class="bionic">wor</span>kers</td><td>Rig</td></tr>
            <tr><td><strong><span class="bionic">Wit</span>ness</strong></td><td>Per-rig <span class="bionic">obs</span>erver</td><td>Rig</td></tr>
            <tr><td><strong>Crew</strong></td><td><span class="bionic">Eph</span>emeral <span class="bionic">wor</span>kers</td><td>Task</td></tr>
          </tbody>
        </table>

        <h4>Quick Start</h4>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="navigator.clipboard.writeText(`# Install
go install github.com/steveyegge/gastown/cmd/gt@latest

# Initialize town
gt init

# Add rig
gt rig add <repo-path>

# Launch roles
gt mayor up
gt refinery up beads
gt polecat up beads alice`)">Copy</button>
          <pre><code># Install
go install github.com/steveyegge/gastown/cmd/gt@latest

# Initialize town
gt init

# Add rig
gt rig add &lt;repo-path&gt;

# Launch roles
gt mayor up
gt refinery up beads
gt polecat up beads alice</code></pre>
        </div>

        <div class="callout callout-warning">
          <div class="callout-title"><span class="bionic">War</span>ning</div>
          <p>Code is 3 weeks old, "100% <span class="bionic">vib</span>e-coded." Steve has never <span class="bionic">loo</span>ked at the code. <strong>"If you have any doubt <span class="bionic">wha</span>tsoever, then you can't use it."</strong></p>
        </div>
      </div>

      <!-- Checkpoint: Gas Town -->
      <div class="checkpoint">
        <div class="checkpoint-header">Checkpoint: Gas Town Installation</div>
        <p><strong><span class="bionic">Ver</span>ify your <span class="bionic">sta</span>te:</strong></p>
        <pre><code># Check gt is installed
which gt
gt --version

# Check town initialized
ls -la ~/.gastown/

# Check rig was added
gt rig list</code></pre>
        <p><strong>Test role launch:</strong></p>
        <pre><code>gt mayor up
# In another terminal:
gt status</code></pre>

        <details class="troubleshoot">
          <summary>go install fails?</summary>
          <div class="troubleshoot-content">
            <ul>
              <li><span class="bionic">Che</span>ck: Is Go <span class="bionic">ins</span>talled? (<code>go version</code>, needs 1.21+)</li>
              <li><span class="bionic">Che</span>ck: Is <code>$GOPATH/bin</code> in your PATH?</li>
              <li>Try: <code>export PATH="$PATH:$(go env GOPATH)/bin"</code></li>
            </ul>
          </div>
        </details>
      </div>

      <!-- Infinite Orchestra -->
      <div class="architecture-card" id="orchestra">
        <h3><span class="bionic">Inf</span>inite <span class="bionic">Orc</span>hestra (<span class="bionic">Sel</span>f-<span class="bionic">Imp</span>roving)</h3>
        <div class="source"><span class="stage-indicator stage-intermediate">Stage 6</span>Source: @0xSero - <a href="https://github.com/0xSero/orchestra">github.com/0xSero/orchestra</a></div>

        <p>A <span class="bionic">sel</span>f-improving <span class="bionic">orc</span>hestrator that keeps <span class="bionic">its</span>elf <span class="bionic">wor</span>king 24/7 in a <span class="bionic">Doc</span>ker <span class="bionic">env</span>ironment. When told to "<span class="bionic">imp</span>rove <span class="bionic">its</span>elf," it added <span class="bionic">Doc</span>ker <span class="bionic">con</span>tainerization to <span class="bionic">pre</span>vent <span class="bionic">des</span>troying the host <span class="bionic">mac</span>hine.</p>

        <h4>Worker <span class="bionic">Pro</span>files</h4>
        <pre><code>{
  "profiles": [
    { "id": "vision", "purpose": "Visual analysis" },
    { "id": "docs", "purpose": "Documentation research" },
    { "id": "research", "purpose": "Deep investigation" },
    { "id": "coder", "purpose": "Implementation" },
    { "id": "memory", "purpose": "Context persistence" },
    { "id": "architect", "purpose": "System design" }
  ]
}</code></pre>

        <p><strong><span class="bionic">Cav</span>eats:</strong> <span class="bionic">Seq</span>uential only (no <span class="bionic">par</span>allelization yet), no <span class="bionic">che</span>ckpointing - <span class="bionic">cra</span>shes lose <span class="bionic">pro</span>gress.</p>
      </div>

      <!-- Ralph Wiggum -->
      <div class="architecture-card" id="ralph">
        <h3>Ralph <span class="bionic">Wig</span>gum (<span class="bionic">Ite</span>rative Loop)</h3>
        <div class="source"><span class="stage-indicator stage-beginner">Stage 4-5</span>Official Plugin: <a href="https://github.com/anthropics/claude-code/tree/main/plugins/ralph-wiggum">github.com/anthropics/claude-code/plugins/ralph-wiggum</a></div>

        <p>A bash loop that runs <span class="bionic">Cla</span>ude Code <span class="bionic">rep</span>eatedly with <span class="bionic">fre</span>sh <span class="bionic">con</span>text until a <span class="bionic">com</span>pletion <span class="bionic">con</span>dition is met. See the <a href="ralph-complete.html"><span class="bionic">ded</span>icated Ralph <span class="bionic">gui</span>de</a> for full <span class="bionic">det</span>ails.</p>

        <div class="ascii-diagram">
+---------------------------------------------+
|  1. Start with fresh context                |
|  2. Read task state from files              |
|  3. Pick highest priority incomplete task   |
|  4. Implement task                          |
|  5. Run verification (tests, typecheck)     |
|  6. If pass: commit, update prd.json        |
|  7. Check completion condition              |
|     All done? -> Exit                       |
|     Not done? -> Loop                       |
+---------------------------------------------+</div>

        <h4><span class="bionic">Off</span>icial Plugin <span class="bionic">Com</span>mand</h4>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="navigator.clipboard.writeText('/ralph-loop \"Build a REST API for todos. Requirements: CRUD operations, input validation, tests. Output <promise>COMPLETE</promise> when done.\" --completion-promise \"COMPLETE\" --max-iterations 50')">Copy</button>
          <pre><code>/ralph-loop "Build a REST API for todos. Requirements: CRUD operations, input validation, tests. Output &lt;promise&gt;COMPLETE&lt;/promise&gt; when done." --completion-promise "COMPLETE" --max-iterations 50</code></pre>
        </div>
      </div>

      <!-- Parallel Swarms -->
      <div class="architecture-card" id="worktrees">
        <h3><span class="bionic">Par</span>allel <span class="bionic">Swa</span>rms (<span class="bionic">Wor</span>ktrees)</h3>
        <div class="source"><span class="stage-indicator stage-intermediate">Stage 6</span><span class="bionic">Pat</span>tern: Git <span class="bionic">wor</span>ktree <span class="bionic">iso</span>lation for <span class="bionic">par</span>allel agent work</div>

        <p><span class="bionic">Run</span>ning <span class="bionic">sep</span>arate <span class="bionic">Cla</span>ude Code <span class="bionic">ins</span>tances in <span class="bionic">iso</span>lated git <span class="bionic">wor</span>ktrees, each <span class="bionic">wor</span>king on <span class="bionic">ind</span>ependent <span class="bionic">fea</span>tures that merge via <span class="bionic">sta</span>ndard git <span class="bionic">wor</span>kflow.</p>

        <div class="ascii-diagram">
Main Repo ~/project/
  +-- .git/           # Shared git database
  +-- src/            # Main working directory

Worktrees (parallel agent checkouts)
~/project-worktrees/
  +-- feature-a/      # Agent 1's isolated directory
  +-- feature-b/      # Agent 2's isolated directory
  +-- bugfix-c/       # Agent 3's isolated directory</div>

        <h4>Setup</h4>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="navigator.clipboard.writeText(`# Create worktree for parallel agent
git worktree add ../feature-auth feature-auth

# Agent 1 works in main checkout
cd ~/project && claude

# Agent 2 works in worktree
cd ~/feature-auth && claude`)">Copy</button>
          <pre><code># Create worktree for parallel agent
git worktree add ../feature-auth feature-auth

# Agent 1 works in main checkout
cd ~/project && claude

# Agent 2 works in worktree
cd ~/feature-auth && claude</code></pre>
        </div>

        <h4><span class="bionic">Wor</span>ktree + Ralph <span class="bionic">Com</span>bination</h4>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="navigator.clipboard.writeText(`# Spawn parallel Ralph loops in worktrees
for feature in auth payments notifications; do
  git worktree add ../wt-\$feature \$feature-branch
  (cd ../wt-\$feature && ./ralph.sh 20) &
done
wait`)">Copy</button>
          <pre><code># Spawn parallel Ralph loops in worktrees
for feature in auth payments notifications; do
  git worktree add ../wt-$feature $feature-branch
  (cd ../wt-$feature && ./ralph.sh 20) &amp;
done
wait</code></pre>
        </div>
      </div>

      <!-- Checkpoint: Worktrees -->
      <div class="checkpoint">
        <div class="checkpoint-header">Checkpoint: Worktree Setup</div>
        <p><strong><span class="bionic">Ver</span>ify your <span class="bionic">sta</span>te:</strong></p>
        <pre><code># List all worktrees
git worktree list

# Check worktree directory exists
ls -la ../feature-auth/

# Verify it's on the right branch
cd ../feature-auth && git branch --show-current</code></pre>

        <details class="troubleshoot">
          <summary><span class="bionic">Wor</span>ktree <span class="bionic">cre</span>ation <span class="bionic">fai</span>led?</summary>
          <div class="troubleshoot-content">
            <ul>
              <li><span class="bionic">Che</span>ck: Does the branch exist? (<code>git branch -a | grep feature-auth</code>)</li>
              <li><span class="bionic">Che</span>ck: Are you in a git <span class="bionic">rep</span>ository?</li>
              <li>Try: <span class="bionic">Cre</span>ate branch first (<code>git checkout -b feature-auth</code>)</li>
            </ul>
          </div>
        </details>
      </div>
    </section>

    <div class="milestone">Architectures Complete - Selection Guide Next</div>

    <!-- Section: Selection -->
    <section id="selection">
      <h2><span class="bionic">Arc</span>hitecture <span class="bionic">Sel</span>ection <span class="bionic">Gui</span>de</h2>

      <h3><span class="bionic">Dec</span>ision Tree</h3>

      <div class="ascii-diagram">
START: What's your experience level?

Stage 1-4 (Single agent in IDE)
    -> STOP. Use single Claude Code. Learn the basics first.

Stage 5 (CLI single agent, YOLO)
    |
    +-- Want overnight autonomous work?
    |   -> Ralph Wiggum Loop
    |
    +-- Want quick multi-agent test?
        -> CC Mirror (3 commands, done)

Stage 6 (3-5 parallel agents)
    |
    +-- Need task dependencies?
    |   -> CC Mirror Native Orchestration
    |
    +-- Building a product?
    |   -> Ralph + Playwright
    |
    +-- Self-improving system?
        -> Infinite Orchestra

Stage 7+ (10+ agents, hand-managed)
    |
    +-- Cost-sensitive?
    |   -> Enhanced Ralph with Haiku workers
    |
    +-- Want structure + chaos tolerance?
    |   -> GAS TOWN
    |
    +-- Multiple clients/projects?
        -> Gas Town + Roughneck</div>

      <h3>Quick <span class="bionic">Com</span>parison <span class="bionic">Mat</span>rix</h3>

      <table>
        <thead>
          <tr>
            <th><span class="bionic">Arc</span>hitecture</th>
            <th>Setup</th>
            <th>Cost</th>
            <th><span class="bionic">Par</span>allelism</th>
            <th>Use Case</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Ralph Loop</strong></td>
            <td>5 min</td>
            <td>$</td>
            <td>None (<span class="bionic">ser</span>ial)</td>
            <td><span class="bionic">Ove</span>rnight <span class="bionic">bui</span>lds</td>
          </tr>
          <tr>
            <td><strong>CC <span class="bionic">Mir</span>ror</strong></td>
            <td>5 min</td>
            <td>$$</td>
            <td><span class="bionic">Nat</span>ive</td>
            <td>80% of <span class="bionic">pro</span>jects</td>
          </tr>
          <tr>
            <td><strong><span class="bionic">Wor</span>ktrees</strong></td>
            <td>10 min</td>
            <td>$$$</td>
            <td>Full <span class="bionic">iso</span>lation</td>
            <td><span class="bionic">Par</span>allel <span class="bionic">fea</span>tures</td>
          </tr>
          <tr>
            <td><strong><span class="bionic">Orc</span>hestra</strong></td>
            <td>1 hr</td>
            <td>$$</td>
            <td><span class="bionic">Seq</span>uential*</td>
            <td>24/7 <span class="bionic">sel</span>f-<span class="bionic">imp</span>rovement</td>
          </tr>
          <tr>
            <td><strong>Gas Town</strong></td>
            <td>Days</td>
            <td>$$$$</td>
            <td>Full <span class="bionic">fac</span>tory</td>
            <td>Stage 7+ scale</td>
          </tr>
        </tbody>
      </table>

      <div class="callout callout-insight">
        <div class="callout-title">The 80/20 Rule</div>
        <blockquote>"CC <span class="bionic">Mir</span>ror <span class="bionic">cov</span>ers 80% of use cases with zero <span class="bionic">eff</span>ort. Gas Town for the <span class="bionic">rem</span>aining 20%." - @nummanali</blockquote>
      </div>
    </section>

    <div class="visual-break">* * *</div>

    <!-- Section: Pitfalls -->
    <section id="pitfalls">
      <h2><span class="bionic">Com</span>mon <span class="bionic">Mul</span>ti-Agent <span class="bionic">Pit</span>falls</h2>

      <div class="pitfall-box">
        <h4>1. Worker <span class="bionic">Rec</span>ursion</h4>
        <p><strong><span class="bionic">Sym</span>ptom:</strong> <span class="bionic">Inf</span>inite agent <span class="bionic">spa</span>wning, <span class="bionic">run</span>away costs</p>
        <p><strong><span class="bionic">Pre</span>vention:</strong> Always use the worker <span class="bionic">pre</span>amble <span class="bionic">tem</span>plate with "Do NOT spawn sub-agents"</p>
      </div>

      <div class="pitfall-box">
        <h4>2. <span class="bionic">Con</span>text <span class="bionic">Exp</span>losion</h4>
        <p><strong><span class="bionic">Sym</span>ptom:</strong> Agents get "<span class="bionic">stu</span>pider" over time, lose track of goals</p>
        <p><strong><span class="bionic">Pre</span>vention:</strong></p>
        <ul>
          <li>Enable <span class="bionic">aut</span>o-compact beta <span class="bionic">fea</span>ture</li>
          <li>Use <span class="bionic">fre</span>sh <span class="bionic">con</span>text per <span class="bionic">ite</span>ration (Ralph <span class="bionic">pat</span>tern)</li>
          <li>Put <span class="bionic">exp</span>ensive tools in <span class="bionic">sub</span>agents (<span class="bionic">Pla</span>ywright, <span class="bionic">bro</span>wser)</li>
        </ul>
      </div>

      <div class="pitfall-box">
        <h4>3. <span class="bionic">Coo</span>rdination <span class="bionic">Fai</span>lures</h4>
        <p><strong><span class="bionic">Sym</span>ptom:</strong> <span class="bionic">Con</span>flicting edits, lost work, race <span class="bionic">con</span>ditions</p>
        <p><strong><span class="bionic">Pre</span>vention:</strong></p>
        <ul>
          <li>Use git <span class="bionic">wor</span>ktrees for <span class="bionic">iso</span>lation</li>
          <li><span class="bionic">Imp</span>lement file <span class="bionic">own</span>ership per agent</li>
          <li><span class="bionic">Bra</span>nch-based <span class="bionic">par</span>allel work with human merge</li>
        </ul>
      </div>

      <div class="pitfall-box">
        <h4>4. <span class="bionic">Dep</span>endency <span class="bionic">Inv</span>ersion</h4>
        <p><strong><span class="bionic">Sym</span>ptom:</strong> Agent tries to build UI before <span class="bionic">sch</span>ema exists</p>
        <p><strong><span class="bionic">Pre</span>vention:</strong> Always order: <span class="bionic">Sch</span>ema -> <span class="bionic">Bac</span>kend -> <span class="bionic">Fro</span>ntend</p>
      </div>

      <div class="pitfall-box">
        <h4>5. <span class="bionic">Ver</span>ification <span class="bionic">Byp</span>ass</h4>
        <p><strong><span class="bionic">Sym</span>ptom:</strong> "<span class="bionic">Com</span>plete" <span class="bionic">fea</span>tures that don't work</p>
        <p><strong><span class="bionic">Pre</span>vention:</strong> Always <span class="bionic">inc</span>lude <code>npm run typecheck passes</code>. Add <span class="bionic">bro</span>wser <span class="bionic">aut</span>omation for UI.</p>
        <blockquote>"<span class="bionic">Wit</span>hout <span class="bionic">ver</span>ification, Ralph <span class="bionic">pro</span>duces <span class="bionic">gar</span>bage." - @mattpocockuk</blockquote>
      </div>

      <div class="pitfall-box">
        <h4>6. Model <span class="bionic">Mis</span>match</h4>
        <p><strong><span class="bionic">Sym</span>ptom:</strong> <span class="bionic">Exp</span>ensive <span class="bionic">fai</span>lures on <span class="bionic">sim</span>ple tasks, weak <span class="bionic">out</span>put on <span class="bionic">com</span>plex tasks</p>
        <table>
          <thead>
            <tr><th>Task</th><th>Model</th></tr>
          </thead>
          <tbody>
            <tr><td>File <span class="bionic">loo</span>kup, grep</td><td>Haiku</td></tr>
            <tr><td><span class="bionic">Imp</span>lementation, <span class="bionic">tes</span>ting</td><td><span class="bionic">Son</span>net</td></tr>
            <tr><td><span class="bionic">Arc</span>hitecture, <span class="bionic">com</span>plex <span class="bionic">rea</span>soning</td><td>Opus</td></tr>
          </tbody>
        </table>
      </div>

      <div class="pitfall-box">
        <h4>7. Cost <span class="bionic">Exp</span>losion</h4>
        <p><strong><span class="bionic">Sym</span>ptom:</strong> $500 bills for <span class="bionic">sim</span>ple <span class="bionic">fea</span>tures</p>
        <p><strong><span class="bionic">Pre</span>vention:</strong></p>
        <ul>
          <li>Set <code>crew.max_per_rig</code></li>
          <li>Use <code>--max-iterations</code> with Ralph</li>
          <li>Track <span class="bionic">tok</span>en <span class="bionic">usa</span>ge</li>
        </ul>
      </div>
    </section>

    <!-- Section: Scaling -->
    <section id="scaling">
      <h2><span class="bionic">Sca</span>ling <span class="bionic">Con</span>siderations</h2>

      <h3>From 2 Agents to 10+</h3>

      <table>
        <thead>
          <tr>
            <th>Phase</th>
            <th><span class="bionic">Age</span>nts</th>
            <th>Setup</th>
            <th>Cost/<span class="bionic">Day</span></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="bionic">Dip</span>ping Toes</td>
            <td>2-3</td>
            <td>Git <span class="bionic">wor</span>ktrees, <span class="bionic">man</span>ual <span class="bionic">ove</span>rsight</td>
            <td>$20-50</td>
          </tr>
          <tr>
            <td><span class="bionic">Get</span>ting <span class="bionic">Ser</span>ious</td>
            <td>4-6</td>
            <td>CC <span class="bionic">Mir</span>ror, rpai <span class="bionic">mon</span>itoring</td>
            <td>$50-150</td>
          </tr>
          <tr>
            <td><span class="bionic">Fac</span>tory Floor</td>
            <td>7-10</td>
            <td>Gas Town, <span class="bionic">rol</span>e-based <span class="bionic">hie</span>rarchy</td>
            <td>$200-500</td>
          </tr>
          <tr>
            <td>Full <span class="bionic">Fac</span>tory</td>
            <td>10+</td>
            <td>Gas Town + <span class="bionic">Rou</span>ghneck, <span class="bionic">qua</span>lity gates</td>
            <td>$500-2000</td>
          </tr>
        </tbody>
      </table>

      <h3>Cost <span class="bionic">Man</span>agement at Scale</h3>

      <h4>Model <span class="bionic">Tie</span>ring by Role</h4>
      <table>
        <thead>
          <tr><th>Role</th><th>Model</th><th>Cost/Hour</th></tr>
        </thead>
        <tbody>
          <tr><td><span class="bionic">May</span>or, <span class="bionic">Ref</span>inery</td><td>Opus</td><td>$15-20</td></tr>
          <tr><td><span class="bionic">Pol</span>ecats, Dogs</td><td><span class="bionic">Son</span>net</td><td>$5-10</td></tr>
          <tr><td>Crew, <span class="bionic">Dea</span>con, <span class="bionic">Wit</span>ness</td><td>Haiku</td><td>$1-3</td></tr>
        </tbody>
      </table>

      <h4><span class="bionic">Bud</span>get <span class="bionic">For</span>mula</h4>
      <pre><code>Base Cost = Mayor($18) + Deacon($1.5) + Dogs($7)
Per-Rig = Witness($2) + Refinery($18)
Workers = Polecats($7.5 x count) + Crew($1 x count)

Example: 1 Town, 2 Rigs, 3 Polecats, 5 Crew
= $26.5 + (2 x $20) + (3 x $7.5) + (5 x $1)
= $26.5 + $40 + $22.5 + $5
= ~$94/hour</code></pre>
    </section>

    <div class="visual-break">* * *</div>

    <!-- Section: Commands -->
    <section id="commands">
      <h2><span class="bionic">Qui</span>ck <span class="bionic">Ref</span>erence <span class="bionic">Com</span>mands</h2>

      <h3>CC <span class="bionic">Mir</span>ror</h3>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="navigator.clipboard.writeText(`# Quick setup
npx cc-mirror quick --provider mirror --name mclaude
mclaude
\"Load the orchestration skill and initiate\"

# Task management (within session)
TaskCreate \"subject\", \"description\", [\"criteria\"]
TaskList status='open'
TaskUpdate id, addBlocks=[\"other-id\"]`)">Copy</button>
        <pre><code># Quick setup
npx cc-mirror quick --provider mirror --name mclaude
mclaude
"Load the orchestration skill and initiate"

# Task management (within session)
TaskCreate "subject", "description", ["criteria"]
TaskList status='open'
TaskUpdate id, addBlocks=["other-id"]</code></pre>
      </div>

      <h3>Gas Town</h3>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="navigator.clipboard.writeText(`# Installation
go install github.com/steveyegge/gastown/cmd/gt@latest

# Initialization
gt init
gt rig add /path/to/repo

# Role management
gt mayor up
gt deacon up
gt dogs up
gt witness up <rig>
gt refinery up <rig>
gt polecat up <rig> <name>
gt crew spawn <rig> --task \"...\"

# Monitoring
gt status
gt inbox
gt inbox respond <id> --approve`)">Copy</button>
        <pre><code># Installation
go install github.com/steveyegge/gastown/cmd/gt@latest

# Initialization
gt init
gt rig add /path/to/repo

# Role management
gt mayor up
gt deacon up
gt dogs up
gt witness up &lt;rig&gt;
gt refinery up &lt;rig&gt;
gt polecat up &lt;rig&gt; &lt;name&gt;
gt crew spawn &lt;rig&gt; --task "..."

# Monitoring
gt status
gt inbox
gt inbox respond &lt;id&gt; --approve</code></pre>
      </div>

      <h3>Ralph <span class="bionic">Wig</span>gum</h3>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="navigator.clipboard.writeText(`# Official plugin
/ralph-loop \"prompt\" --completion-promise \"COMPLETE\" --max-iterations 10
/cancel-ralph

# Bash script
./ralph.sh 25  # 25 max iterations`)">Copy</button>
        <pre><code># Official plugin
/ralph-loop "prompt" --completion-promise "COMPLETE" --max-iterations 10
/cancel-ralph

# Bash script
./ralph.sh 25  # 25 max iterations</code></pre>
      </div>

      <h3>Git <span class="bionic">Wor</span>ktrees</h3>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="navigator.clipboard.writeText(`# Create worktree
git worktree add ../feature-branch feature-branch

# List worktrees
git worktree list

# Remove worktree
git worktree remove ../feature-branch`)">Copy</button>
        <pre><code># Create worktree
git worktree add ../feature-branch feature-branch

# List worktrees
git worktree list

# Remove worktree
git worktree remove ../feature-branch</code></pre>
      </div>

      <h3><span class="bionic">Mon</span>itoring Tools</h3>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="navigator.clipboard.writeText(`# Claude HUD
/plugin install claude-hud

# rpai (tmux agent manager)
cargo install rpai && rpai

# Claude Mem (persistent memory)
/plugin install claude-mem`)">Copy</button>
        <pre><code># Claude HUD
/plugin install claude-hud

# rpai (tmux agent manager)
cargo install rpai && rpai

# Claude Mem (persistent memory)
/plugin install claude-mem</code></pre>
      </div>
    </section>

    <!-- Section: Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="bionic">Tro</span>ubleshooting</h2>

      <details class="troubleshoot">
        <summary><span class="bionic">Wor</span>kers <span class="bionic">spa</span>wning <span class="bionic">inf</span>inite sub-agents</summary>
        <div class="troubleshoot-content">
          <p><strong><span class="bionic">Sym</span>ptoms:</strong> <span class="bionic">Run</span>away costs, <span class="bionic">nes</span>ted agent chains, <span class="bionic">res</span>ource <span class="bionic">exh</span>austion</p>
          <p><strong>Cause:</strong> <span class="bionic">Wor</span>kers not <span class="bionic">res</span>tricted from <span class="bionic">spa</span>wning sub-agents</p>
          <p><strong><span class="bionic">Sol</span>ution:</strong> Add to EVERY worker <span class="bionic">pre</span>amble:</p>
          <pre><code>RULES:
- Complete ONLY the task described below
- Do NOT spawn sub-agents
- Do NOT call TaskCreate or TaskUpdate</code></pre>
          <p><strong><span class="bionic">Pre</span>vention:</strong> ALWAYS use the worker <span class="bionic">pre</span>amble <span class="bionic">tem</span>plate</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary><span class="bionic">Orc</span>hestration skill not <span class="bionic">loa</span>ding (CC <span class="bionic">Mir</span>ror)</summary>
        <div class="troubleshoot-content">
          <p><strong><span class="bionic">Sym</span>ptoms:</strong> <span class="bionic">Tas</span>kCreate/<span class="bionic">Tas</span>kUpdate <span class="bionic">com</span>mands not <span class="bionic">rec</span>ognized</p>
          <p><strong><span class="bionic">Sol</span>ution:</strong></p>
          <pre><code># Exit and restart mclaude
exit
mclaude

# Try explicit load
"Load the orchestration skill"

# If still failing, reinstall
rm -rf ~/.mclaude
npx cc-mirror quick --provider mirror --name mclaude</code></pre>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Agents <span class="bionic">mod</span>ifying same files - <span class="bionic">con</span>flicts</summary>
        <div class="troubleshoot-content">
          <p><strong><span class="bionic">Sym</span>ptoms:</strong> Merge <span class="bionic">con</span>flicts, <span class="bionic">ove</span>rwritten <span class="bionic">cha</span>nges, lost work</p>
          <p><strong>Cause:</strong> No file <span class="bionic">iso</span>lation <span class="bionic">bet</span>ween <span class="bionic">par</span>allel agents</p>
          <p><strong><span class="bionic">Sol</span>ution:</strong></p>
          <pre><code># Option 1: Git worktrees (recommended)
git worktree add ../agent-1 feature-1
git worktree add ../agent-2 feature-2

# Each agent works in complete isolation
cd ../agent-1 && claude
cd ../agent-2 && claude

# Merge when both complete
git merge agent-1 agent-2

# Option 2: File ownership rules
"Only modify files in src/api/ - do not touch other directories"</code></pre>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Cost <span class="bionic">exp</span>losion - $500+ bills</summary>
        <div class="troubleshoot-content">
          <p><strong><span class="bionic">Sym</span>ptoms:</strong> <span class="bionic">Une</span>xpected high costs, <span class="bionic">run</span>away crew</p>
          <p><strong><span class="bionic">Sol</span>ution:</strong></p>
          <pre><code># Set crew limits in gastown config:
crew.max_per_rig = 5

# Use appropriate models per role:
# Mayor, Refinery: Opus ($15-20/hr)
# Polecats, Dogs: Sonnet ($5-10/hr)
# Crew, Deacon: Haiku ($1-3/hr)

# Kill runaway crew
gt crew stop all</code></pre>
          <p><strong><span class="bionic">Pre</span>vention:</strong> Set hard <span class="bionic">lim</span>its, use Haiku for <span class="bionic">rou</span>tine tasks</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary><span class="bionic">Eme</span>rgency: <span class="bionic">Mul</span>ti-agent <span class="bionic">sys</span>tem <span class="bionic">com</span>pletely stuck</summary>
        <div class="troubleshoot-content">
          <pre><code># Nuclear option: kill all agents
pkill -f claude

# For Gas Town
gt mayor down
gt deacon down
gt dogs down
# Kill all rig-level roles

# Verify clean state
gt status  # Should show all DOWN

# Restart from scratch
gt mayor up
# Then other roles in order</code></pre>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Lost track of which agent is doing what</summary>
        <div class="troubleshoot-content">
          <pre><code># For tmux-based setup
tmux list-panes -a -F "#{session_name}:#{window_index}.#{pane_index} - #{pane_current_command}"

# For CC Mirror
"List all tasks with status and owner"

# For Gas Town
gt status --verbose
gt inbox</code></pre>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Need to stop <span class="bionic">eve</span>rything and start over</summary>
        <div class="troubleshoot-content">
          <pre><code># Save current state first
git add -A && git commit -m "WIP: saving state before reset"

# Kill all agents
pkill -f claude
pkill -f mclaude
gt mayor down  # If using Gas Town

# Start fresh
git status
# Assess what's done vs not done
# Begin with single agent to stabilize</code></pre>
        </div>
      </details>
    </section>

    <!-- The Mental Model -->
    <div class="milestone">The Multi-Agent Mental Model</div>

    <section>
      <div class="iron-law">
        <p><strong><span class="bionic">Mul</span>ti-agent <span class="bionic">orc</span>hestration is about:</strong></p>
        <p>1. <span class="bionic">SEP</span>ARATION - <span class="bionic">Orc</span>hestrators <span class="bionic">coo</span>rdinate, <span class="bionic">wor</span>kers <span class="bionic">exe</span>cute</p>
        <p>2. <span class="bionic">ISO</span>LATION - <span class="bionic">Fre</span>sh <span class="bionic">con</span>text, <span class="bionic">wor</span>ktrees, <span class="bionic">con</span>tainers</p>
        <p>3. <span class="bionic">VER</span>IFICATION - Tests, <span class="bionic">typ</span>echeck, <span class="bionic">bro</span>wser <span class="bionic">aut</span>omation</p>
        <p>4. <span class="bionic">PER</span>SISTENCE - Git, PRD, progress.txt</p>
        <p>5. <span class="bionic">EVO</span>LUTION - Ralph loops, <span class="bionic">sel</span>f-<span class="bionic">imp</span>rovement, <span class="bionic">ite</span>ration</p>
      </div>

      <h3>Choose Your <span class="bionic">Lev</span>el</h3>
      <table>
        <thead>
          <tr><th>If You Are...</th><th>Start With...</th></tr>
        </thead>
        <tbody>
          <tr><td><span class="bionic">Lea</span>rning <span class="bionic">Cla</span>ude Code</td><td><span class="bionic">Sin</span>gle agent, no <span class="bionic">orc</span>hestration</td></tr>
          <tr><td><span class="bionic">Bui</span>lding one <span class="bionic">fea</span>ture</td><td>Ralph <span class="bionic">Wig</span>gum loop</td></tr>
          <tr><td><span class="bionic">Man</span>aging small <span class="bionic">pro</span>ject</td><td>CC <span class="bionic">Mir</span>ror</td></tr>
          <tr><td><span class="bionic">Run</span>ning <span class="bionic">mul</span>tiple <span class="bionic">pro</span>jects</td><td>Gas Town</td></tr>
          <tr><td><span class="bionic">Bui</span>lding the <span class="bionic">fut</span>ure</td><td>Your own <span class="bionic">orc</span>hestrator</td></tr>
        </tbody>
      </table>
    </section>

    <!-- Related Pages -->
    <div class="related-pages">
      <h3><span class="bionic">Rel</span>ated Pages</h3>
      <ul>
        <li><a href="ralph-complete.html">Ralph <span class="bionic">Wig</span>gum <span class="bionic">Com</span>plete <span class="bionic">Gui</span>de</a> - The <span class="bionic">fou</span>ndation <span class="bionic">pat</span>tern</li>
        <li><a href="context-management.html"><span class="bionic">Con</span>text <span class="bionic">Man</span>agement</a> - <span class="bionic">Iso</span>lation <span class="bionic">str</span>ategies</li>
        <li><a href="../../foundations/architecture/complexity-ladder.html"><span class="bionic">Com</span>plexity <span class="bionic">Lad</span>der</a> - <span class="bionic">Eve</span>ry <span class="bionic">lev</span>el <span class="bionic">exp</span>lained</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="context-management.html">&larr; <span class="bionic">Con</span>text <span class="bionic">Man</span>agement</a>
      <a href="../../foundations/architecture/complexity-ladder.html"><span class="bionic">Com</span>plexity <span class="bionic">Lad</span>der &rarr;</a>
    </nav>

    <hr class="section-divider">

    <p><em><span class="bionic">Syn</span>thesized 2026-01-09 from CC <span class="bionic">Mir</span>ror, Gas Town, <span class="bionic">Inf</span>inite <span class="bionic">Orc</span>hestra, Ralph <span class="bionic">Wig</span>gum, and <span class="bionic">mul</span>ti-agent <span class="bionic">pat</span>terns <span class="bionic">res</span>earch.</em></p>
  </div>

  
  <script src="../../js/copy-code.js"></script>
  <script src="../../js/search.js"></script>
</body>
</html>
