<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="chapter" content="Patterns">
  <meta data-pagefind-meta="section" content="Orchestration">
  <title>Multi-Agent Patterns - Claude Code Orchestration</title>
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="stylesheet" href="../../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="ch1">Chapter 1</button>
        <button class="filter-btn" data-filter="ch2">Chapter 2</button>
        <button class="filter-btn" data-filter="ch3">Chapter 3</button>
        <button class="filter-btn" data-filter="ch4">Chapter 4</button>
        <button class="filter-btn" data-filter="ref">Reference</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>&#8593;&#8595; Navigate</span><span>&#8629; Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Search Trigger Button -->
    <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
      <span class="search-icon">Cmd+K</span>
      <span class="search-text">Search</span>
    </button>

    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../../index.html">Home</a>
      <span>/</span>
      <a href="../index.html">Patterns</a>
      <span>/</span>
      <a href="index.html">Orchestration</a>
      <span>/</span>
      <strong>Multi-Agent Patterns</strong>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="callout callout-insight" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d;">
      <div class="callout-title"><strong>You</strong> Are <strong>Her</strong>e</div>
      <p><strong>Whe</strong>re this <strong>fit</strong>s:</p>
      <ul>
        <li><strong>Ref</strong>erence guide</strong> for all <strong>mul</strong>ti-agent <strong>pat</strong>terns in <strong>Cla</strong>ude Code</li>
        <li><strong>Con</strong>solidates: <a href="ralph-research.html">Ralph</a>, <a href="cc-mirror.html">CC Mirror</a>, <a href="gas-town.html">Gas Town</a>, and <strong>com</strong>munity <strong>pat</strong>terns</li>
        <li><strong>Use</strong> this to: Compare <strong>opt</strong>ions, find the <strong>rig</strong>ht <strong>pat</strong>tern for your <strong>nee</strong>ds</li>
      </ul>
    </div>

    <h1><strong>Mul</strong>ti-Agent <strong>Pat</strong>terns for <strong>Cla</strong>ude Code</h1>
    <p class="conversational-lead"><strong>A</strong> <strong>com</strong>prehensive <strong>gui</strong>de to all known <strong>mul</strong>ti-agent <strong>pat</strong>terns, <strong>arc</strong>hitectures, and <strong>bes</strong>t <strong>pra</strong>ctices from <strong>com</strong>munity <strong>inn</strong>ovations, <strong>pro</strong>duction <strong>imp</strong>lementations, and <strong>Ant</strong>hropic's <strong>off</strong>icial <strong>gui</strong>dance.</p>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#pattern-selection">Pattern Selection Guide</a></li>
        <li><a href="#foundational">Foundational Patterns</a></li>
        <li><a href="#parallel-strategies">Parallel Agent Strategies</a></li>
        <li><a href="#git-worktrees">Git Worktrees for Isolation</a></li>
        <li><a href="#subagent-patterns">Subagent Coordination Patterns</a></li>
        <li><a href="#handoffs">Agent-to-Agent Handoffs</a></li>
        <li><a href="#architectures">Architecture Patterns</a></li>
        <li><a href="#specializations">Agent Specializations</a></li>
        <li><a href="#conflict-resolution">Conflict Resolution</a></li>
        <li><a href="#monitoring">Monitoring and Observability</a></li>
        <li><a href="#troubleshooting">Troubleshooting Common Issues</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- Section: Pattern Selection -->
    <h2 id="pattern-selection"><strong>Pat</strong>tern <strong>Sel</strong>ection <strong>Gui</strong>de</h2>

    <div class="decision-point">
      <h4><strong>Whi</strong>ch <strong>Pat</strong>tern <strong>Sho</strong>uld I <strong>Use</strong>?</h4>
      <table>
        <tr>
          <th>Scenario</th>
          <th>Recommended Pattern</th>
          <th>Link</th>
        </tr>
        <tr>
          <td><strong>Sin</strong>gle <strong>fea</strong>ture, <strong>ove</strong>rnight</td>
          <td>Ralph Loop</td>
          <td><a href="ralph-research.html">Details</a></td>
        </tr>
        <tr>
          <td><strong>Mul</strong>tiple life <strong>dom</strong>ains</td>
          <td>Panopticon (isolated directories)</td>
          <td><a href="#panopticon">Details</a></td>
        </tr>
        <tr>
          <td><strong>Tea</strong>m project, <strong>par</strong>allel <strong>fea</strong>tures</td>
          <td>Git worktrees + branch discipline</td>
          <td><a href="#git-worktrees">Details</a></td>
        </tr>
        <tr>
          <td><strong>Com</strong>plex <strong>arc</strong>hitecture</td>
          <td>Hub-and-spoke with specialized workers</td>
          <td><a href="#hub-spoke">Details</a></td>
        </tr>
        <tr>
          <td><strong>Pro</strong>duction app with <strong>dep</strong>endencies</td>
          <td>CC Mirror native orchestration</td>
          <td><a href="cc-mirror.html">Details</a></td>
        </tr>
        <tr>
          <td><strong>Mas</strong>sive scale (10+ <strong>age</strong>nts)</td>
          <td>Gas Town factory</td>
          <td><a href="gas-town.html">Details</a></td>
        </tr>
        <tr>
          <td><strong>Con</strong>tent/<strong>mar</strong>keting</td>
          <td>Ralph Wiggum Marketer</td>
          <td><a href="#ralph-marketer">Details</a></td>
        </tr>
        <tr>
          <td><strong>Sel</strong>f-improving <strong>sys</strong>tem</td>
          <td>Infinite Orchestra</td>
          <td><a href="#orchestra">Details</a></td>
        </tr>
      </table>
    </div>

    <hr class="section-divider">

    <!-- Section: Foundational Patterns -->
    <h2 id="foundational"><strong>Fou</strong>ndational <strong>Pat</strong>terns</h2>

    <h3 id="panopticon"><strong>The</strong> <strong>Per</strong>sonal <strong>Pan</strong>opticon (<strong>Mol</strong>ly <strong>Can</strong>tillon)</h3>
    <p><strong>Sou</strong>rce: @mollycantillon | <strong>Eng</strong>agement: 2.4K <strong>lik</strong>es, 418K <strong>vie</strong>ws</p>

    <p>Run <strong>Cla</strong>ude Code as a <strong>swa</strong>rm of 8 <strong>par</strong>allel <strong>iso</strong>lated <strong>ins</strong>tances, <strong>eac</strong>h <strong>own</strong>ing a life <strong>dom</strong>ain:</p>

    <div class="file-listing">
      <div class="file-listing-header">Directory Structure</div>
      <div class="file-item">
        <span class="file-name">~/nox</span>
        <span class="file-desc">Company/product development</span>
      </div>
      <div class="file-item">
        <span class="file-name">~/metrics</span>
        <span class="file-desc">Analytics/data analysis</span>
      </div>
      <div class="file-item">
        <span class="file-name">~/email</span>
        <span class="file-desc">Communications management</span>
      </div>
      <div class="file-item">
        <span class="file-name">~/growth</span>
        <span class="file-desc">Marketing/acquisition</span>
      </div>
      <div class="file-item">
        <span class="file-name">~/trades</span>
        <span class="file-desc">Personal finance/trading</span>
      </div>
      <div class="file-item">
        <span class="file-name">~/health</span>
        <span class="file-desc">Fitness/sleep/wellness</span>
      </div>
      <div class="file-item">
        <span class="file-name">~/writing</span>
        <span class="file-desc">Content creation</span>
      </div>
      <div class="file-item">
        <span class="file-name">~/personal</span>
        <span class="file-desc">Life admin</span>
      </div>
    </div>

    <h4>Key <strong>Pri</strong>nciples</h4>
    <ul>
      <li><strong>Iso</strong>lation:</strong> Each <strong>ins</strong>tance <strong>ope</strong>rates <strong>ind</strong>ependently, no <strong>cro</strong>ss-contamination</li>
      <li><strong>Sub</strong>agents:</strong> Spawn <strong>sho</strong>rt-lived <strong>age</strong>nts for <strong>spe</strong>cific <strong>tas</strong>ks</li>
      <li><strong>Han</strong>doffs:</strong> Exchange <strong>con</strong>text through <strong>exp</strong>licit <strong>fil</strong>e-based <strong>han</strong>doffs</li>
      <li><strong>Fil</strong>esystem:</strong> Read/<strong>wri</strong>te to <strong>the</strong>ir <strong>dir</strong>ectory as <strong>per</strong>sistent <strong>mem</strong>ory</li>
    </ul>

    <pre><code># Keep system awake during long runs
caffeinate -i

# Simple alias for natural language CLI
alias c='claude'

# Cron jobs for scheduled runs
0 6 * * * cd ~/trades && claude "Generate morning brief" > brief.md</code></pre>

    <h3 id="orchestra"><strong>The</strong> <strong>Inf</strong>inite <strong>Orc</strong>hestra (0xSero)</h3>
    <p><strong>Sou</strong>rce: @0xSero | <strong>Rep</strong>o: github.com/0xSero/orchestra</p>

    <p>A <strong>sel</strong>f-improving <strong>orc</strong>hestrator that <strong>run</strong>s 24/7 in <strong>Doc</strong>ker, with <strong>spe</strong>cialized <strong>wor</strong>ker <strong>pro</strong>files:</p>

    <pre><code>{
  "profiles": [
    { "id": "vision", "purpose": "Visual analysis" },
    { "id": "docs", "purpose": "Documentation research" },
    { "id": "research", "purpose": "Deep investigation" },
    { "id": "coder", "purpose": "Implementation" },
    { "id": "memory", "purpose": "Context persistence" },
    { "id": "architect", "purpose": "System design" }
  ]
}</code></pre>

    <div class="gotcha-block">
      <h4><strong>Cav</strong>eats</h4>
      <ul>
        <li><strong>Seq</strong>uential <strong>onl</strong>y (no <strong>par</strong>allelization <strong>yet</strong>)</li>
        <li><strong>Con</strong>flicts with 5+ <strong>age</strong>nts with 5 <strong>sub</strong>agents <strong>eac</strong>h</li>
        <li>No <strong>che</strong>ckpointing - <strong>cra</strong>shes <strong>los</strong>e <strong>pro</strong>gress</li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- Section: Parallel Strategies -->
    <h2 id="parallel-strategies"><strong>Par</strong>allel <strong>Age</strong>nt <strong>Str</strong>ategies</h2>

    <h3><strong>Dom</strong>ain-Isolated <strong>Par</strong>allel <strong>Ins</strong>tances</h3>
    <p>Run <strong>sep</strong>arate <strong>Cla</strong>ude Code <strong>pro</strong>cesses in <strong>dif</strong>ferent <strong>dir</strong>ectories:</p>

    <pre><code># Terminal 1
cd ~/project/frontend && claude

# Terminal 2
cd ~/project/backend && claude

# Terminal 3
cd ~/project/docs && claude</code></pre>

    <div class="recommendation">
      <strong>Key</strong> insight:</strong> <strong>Fil</strong>esystem <strong>iso</strong>lation <strong>pre</strong>vents <strong>con</strong>text <strong>pol</strong>lution <strong>bet</strong>ween <strong>age</strong>nts.
    </div>

    <h3><strong>Bra</strong>nch-Based <strong>Par</strong>allel <strong>Wor</strong>k</h3>
    <pre><code># Each agent works on its own branch
git checkout -b feature-auth
claude "Implement authentication"

# In another terminal
git checkout -b feature-payments
claude "Implement payment processing"</code></pre>
    <p><strong>Mer</strong>ge <strong>str</strong>ategy:</strong> <strong>Hum</strong>an <strong>rev</strong>iews and <strong>res</strong>olves <strong>con</strong>flicts <strong>dur</strong>ing PR.</p>

    <h3><strong>Con</strong>tainer-Isolated <strong>Par</strong>allelism (AI-Maestro)</h3>
    <p>For <strong>hea</strong>vy <strong>par</strong>allel <strong>wor</strong>k, run <strong>Cla</strong>ude Code <strong>ins</strong>tances in <strong>iso</strong>lated <strong>Doc</strong>ker <strong>con</strong>tainers:</p>

    <div class="ascii-diagram">
┌─────────────────────────────────────────┐
│              AI-Maestro                 │
├─────────────────────────────────────────┤
│  ┌─────────┐ ┌─────────┐ ┌─────────┐   │
│  │Container│ │Container│ │Container│   │
│  │ Claude1 │ │ Claude2 │ │ Claude3 │   │
│  │ Branch A│ │ Branch B│ │ Branch C│   │
│  └─────────┘ └─────────┘ └─────────┘   │
│       │           │           │         │
│       └───────────┼───────────┘         │
│                   │                     │
│          Shared Docker Volume           │
│         (file-based messaging)          │
└─────────────────────────────────────────┘
    </div>

    <p><strong>Ben</strong>efits:</strong></p>
    <ul>
      <li>No <strong>bra</strong>nch/<strong>fil</strong>e <strong>con</strong>flicts</li>
      <li><strong>Per</strong>-container <strong>fir</strong>ewalls</li>
      <li><strong>Per</strong>sistent <strong>cac</strong>hes</li>
      <li><strong>Rep</strong>roducibility</li>
    </ul>

    <hr class="section-divider">

    <!-- Section: Git Worktrees -->
    <h2 id="git-worktrees"><strong>Git</strong> <strong>Wor</strong>ktrees for <strong>Iso</strong>lation</h2>

    <p>Git <strong>wor</strong>ktrees <strong>cre</strong>ate <strong>iso</strong>lated <strong>wor</strong>king <strong>dir</strong>ectories <strong>sha</strong>ring the <strong>sam</strong>e <strong>rep</strong>o:</p>

    <div class="tutorial-block">
      <div class="tutorial-header">Multi-Worktree Setup</div>
      <div class="tutorial-content">
        <div class="tutorial-step">
          <div class="tutorial-step-number">1</div>
          <div class="tutorial-step-content">
            <h4>Create Worktree for Parallel Agent</h4>
            <pre><code>git worktree add ../feature-auth feature-auth</code></pre>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">2</div>
          <div class="tutorial-step-content">
            <h4>Agent 1 Works in Main Checkout</h4>
            <pre><code>cd ~/project && claude</code></pre>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">3</div>
          <div class="tutorial-step-content">
            <h4>Agent 2 Works in Worktree</h4>
            <pre><code>cd ~/feature-auth && claude</code></pre>
          </div>
        </div>
      </div>
    </div>

    <h3><strong>Wor</strong>ktree + <strong>Ral</strong>ph <strong>Com</strong>bination</h3>
    <p><strong>Com</strong>bining <strong>Ral</strong>ph <strong>loo</strong>ps with <strong>wor</strong>ktrees <strong>ena</strong>bles <strong>par</strong>allel <strong>fea</strong>ture <strong>dev</strong>elopment:</p>

    <pre><code># Spawn parallel Ralph loops in worktrees
for feature in auth payments notifications; do
  git worktree add ../wt-$feature $feature-branch
  (cd ../wt-$feature && ./ralph.sh 20) &
done
wait</code></pre>

    <hr class="section-divider">

    <!-- Section: Subagent Patterns -->
    <h2 id="subagent-patterns"><strong>Sub</strong>agent <strong>Coo</strong>rdination <strong>Pat</strong>terns</h2>

    <h3 id="hub-spoke"><strong>Hub</strong>-and-Spoke <strong>Mod</strong>el</h3>
    <p>The <strong>orc</strong>hestrator <strong>del</strong>egates to <strong>spe</strong>cialized <strong>wor</strong>kers:</p>

    <div class="ascii-diagram">
         ┌─────────────────┐
         │   Orchestrator  │
         └────────┬────────┘
                  │
    ┌─────────────┼─────────────┐
    │             │             │
    ▼             ▼             ▼
┌───────┐   ┌───────┐   ┌───────┐
│ Coder │   │ Tester│   │ Docs  │
└───────┘   └───────┘   └───────┘
    </div>

    <p><strong>Bes</strong>t for:</strong> Clear <strong>tas</strong>k <strong>dec</strong>omposition, <strong>pre</strong>dictable <strong>wor</strong>kflow, <strong>cen</strong>tralized <strong>mon</strong>itoring</p>

    <h3><strong>Mod</strong>el <strong>Sel</strong>ection for <strong>Sub</strong>agents</h3>
    <table>
      <tr>
        <th>Model</th>
        <th>Use Case</th>
        <th>Spawn Count</th>
      </tr>
      <tr>
        <td><strong>Haiku</strong></td>
        <td>Errand runner: fetch files, grep, simple lookups</td>
        <td>5-10 in parallel</td>
      </tr>
      <tr>
        <td><strong>Sonnet</strong></td>
        <td>Capable worker: implementation, patterns, tests</td>
        <td>2-5 parallel</td>
      </tr>
      <tr>
        <td><strong>Opus</strong></td>
        <td>Complex reasoning, architecture, ambiguous tasks</td>
        <td>1 (sequential)</td>
      </tr>
    </table>

    <h3><strong>Wor</strong>ker <strong>Pre</strong>amble <strong>Tem</strong>plate</h3>
    <pre><code>CONTEXT: You are a WORKER agent, not an orchestrator.

RULES:
- Complete ONLY the task described below
- Use tools directly (Read, Write, Edit, Bash, etc.)
- Do NOT spawn sub-agents
- Do NOT call TaskCreate or TaskUpdate
- Report your results with absolute file paths

TASK:
[Your specific task here]</code></pre>

    <hr class="section-divider">

    <!-- Section: Handoffs -->
    <h2 id="handoffs"><strong>Age</strong>nt-to-Agent <strong>Han</strong>doffs</h2>

    <h3><strong>Fil</strong>e-Based <strong>Han</strong>doffs (<strong>Pan</strong>opticon <strong>Pat</strong>tern)</h3>
    <p><strong>Age</strong>nts <strong>com</strong>municate <strong>thr</strong>ough the <strong>fil</strong>esystem:</p>

    <pre><code>// ~/shared/handoff-agent1-to-agent2.json
{
  "from": "agent1",
  "to": "agent2",
  "timestamp": "2026-01-09T10:30:00Z",
  "context": {
    "completed": ["API schema", "Database models"],
    "next_steps": ["Implement REST endpoints"],
    "blockers": [],
    "notes": "Using FastAPI, see docs in /api/README.md"
  }
}</code></pre>

    <h3><strong>Git</strong>-Based <strong>Han</strong>doffs (<strong>Ral</strong>ph <strong>Pat</strong>tern)</h3>
    <p><strong>Pro</strong>gress <strong>per</strong>sists in <strong>fil</strong>es, git <strong>his</strong>tory <strong>pro</strong>vides <strong>con</strong>text:</p>
    <ul>
      <li><strong>pro</strong>gress.txt</strong> - <strong>App</strong>end-only <strong>lea</strong>rnings <strong>log</strong></li>
      <li><strong>prd</strong>.json</strong> - <strong>Tas</strong>k <strong>sta</strong>tus with <code>passes: true/false</code></li>
      <li><strong>Git</strong> <strong>com</strong>mits</strong> - Each <strong>ite</strong>ration <strong>com</strong>mits, <strong>fut</strong>ure <strong>age</strong>nts see <strong>his</strong>tory</li>
    </ul>

    <pre><code># Future agent can understand what happened
git log --oneline
git diff HEAD~5</code></pre>

    <h3><strong>MCP</strong> Agent <strong>Mai</strong>l</h3>
    <p><strong>Sou</strong>rce: Steve Yegge's Gas Town | <strong>Rep</strong>o: github.com/Dicklesworthstone/mcp_agent_mail</p>
    <p><strong>Age</strong>nts <strong>col</strong>laborate via <strong>ema</strong>il-like <strong>int</strong>erfaces - no <strong>tra</strong>ining <strong>nee</strong>ded, <strong>nat</strong>ural "<strong>age</strong>nt <strong>vil</strong>lage" <strong>beh</strong>avior.</p>

    <hr class="section-divider">

    <!-- Section: Architectures -->
    <h2 id="architectures"><strong>Arc</strong>hitecture <strong>Pat</strong>terns</h2>

    <div class="card-grid">
      <div class="card">
        <div class="card-title">Hub-and-Spoke</div>
        <div class="card-description"><strong>Cen</strong>tral <strong>orc</strong>hestrator <strong>del</strong>egates to <strong>spe</strong>cialized <strong>wor</strong>kers. Best for <strong>cle</strong>ar <strong>dec</strong>omposition.</div>
        <div class="card-meta">Examples: CC Mirror, Gas Town (Deacon role)</div>
      </div>
      <div class="card">
        <div class="card-title">Peer-to-Peer</div>
        <div class="card-description"><strong>Age</strong>nts <strong>com</strong>municate <strong>dir</strong>ectly <strong>wit</strong>hout <strong>cen</strong>tral <strong>coo</strong>rdinator. Best for <strong>eme</strong>rgent <strong>col</strong>laboration.</div>
        <div class="card-meta">Challenges: Harder to monitor, potential deadlocks</div>
      </div>
      <div class="card">
        <div class="card-title">Factory Pattern</div>
        <div class="card-description">Not <strong>jus</strong>t <strong>age</strong>nts, but an <strong>age</strong>nt <strong>fac</strong>tory. 8 <strong>spe</strong>cialized <strong>rol</strong>es with <strong>per</strong>sistent <strong>mem</strong>ory.</div>
        <div class="card-meta">Example: Gas Town</div>
      </div>
      <div class="card">
        <div class="card-title">Kanban Loop</div>
        <div class="card-description"><strong>Sin</strong>gle <strong>age</strong>nt <strong>pic</strong>ks from a <strong>boa</strong>rd, <strong>com</strong>pletes <strong>tas</strong>k, <strong>ret</strong>urns. Focus on <strong>WHA</strong>T not <strong>HOW</strong>.</div>
        <div class="card-meta">Example: Ralph Wiggum</div>
      </div>
    </div>

    <hr class="section-divider">

    <!-- Section: Specializations -->
    <h2 id="specializations"><strong>Age</strong>nt <strong>Spe</strong>cializations</h2>

    <table>
      <tr>
        <th>Role</th>
        <th>Purpose</th>
        <th>Tools/Skills</th>
      </tr>
      <tr>
        <td><strong>Researcher</strong></td>
        <td>Deep investigation, codebase exploration</td>
        <td>Glob, Grep, Read, WebSearch</td>
      </tr>
      <tr>
        <td><strong>Coder</strong></td>
        <td>Implementation</td>
        <td>Write, Edit, Bash</td>
      </tr>
      <tr>
        <td><strong>Tester</strong></td>
        <td>Verification, test generation</td>
        <td>Bash (test runners), Read</td>
      </tr>
      <tr>
        <td><strong>Reviewer</strong></td>
        <td>Code review, security analysis</td>
        <td>Read, Grep, LSP</td>
      </tr>
      <tr>
        <td><strong>Architect</strong></td>
        <td>System design, decisions</td>
        <td>Read, WebSearch</td>
      </tr>
      <tr>
        <td><strong>Docs</strong></td>
        <td>Documentation, README generation</td>
        <td>Write, Read</td>
      </tr>
      <tr>
        <td><strong>Vision</strong></td>
        <td>Visual analysis (screenshots, UI)</td>
        <td>Browser tools</td>
      </tr>
      <tr>
        <td><strong>Memory</strong></td>
        <td>Context persistence across sessions</td>
        <td>SQLite, file operations</td>
      </tr>
    </table>

    <h3><strong>Adv</strong>ersarial <strong>Spe</strong>ccing <strong>Pat</strong>tern</h3>
    <p>Use two <strong>sub</strong>agents in <strong>deb</strong>ate for <strong>com</strong>plex <strong>fea</strong>tures:</p>
    <ol>
      <li><strong>Arc</strong>hitect</strong> <strong>sub</strong>agent <strong>pro</strong>poses <strong>des</strong>ign</li>
      <li><strong>Cri</strong>tic</strong> <strong>sub</strong>agent <strong>cha</strong>llenges from <strong>spe</strong>cific <strong>per</strong>sona</li>
    </ol>

    <p><strong>Exa</strong>mple <strong>Cri</strong>tic <strong>Per</strong>sonas:</strong></p>
    <ul>
      <li><strong>DHH</strong> (<strong>sim</strong>plicity, <strong>con</strong>vention over <strong>con</strong>figuration)</li>
      <li><strong>Sec</strong>urity <strong>eng</strong>ineer</strong> (<strong>att</strong>ack <strong>vec</strong>tors, <strong>dat</strong>a <strong>pro</strong>tection)</li>
      <li><strong>Per</strong>formance <strong>eng</strong>ineer</strong> (<strong>lat</strong>ency, <strong>res</strong>ource <strong>usa</strong>ge)</li>
      <li><strong>UX</strong> <strong>adv</strong>ocate</strong> (<strong>use</strong>r <strong>exp</strong>erience <strong>imp</strong>lications)</li>
    </ul>

    <hr class="section-divider">

    <!-- Section: Conflict Resolution -->
    <h2 id="conflict-resolution"><strong>Con</strong>flict <strong>Res</strong>olution</h2>

    <div class="gotcha-block">
      <h4><strong>The</strong> Core <strong>Pro</strong>blem</h4>
      <blockquote>"Parallel agents cause merge conflicts - use serial" - Matt Pocock</blockquote>
    </div>

    <h3><strong>Str</strong>ategy 1: <strong>Bra</strong>nch <strong>Iso</strong>lation (<strong>Pri</strong>mary)</h3>
    <p><strong>Eac</strong>h <strong>age</strong>nt <strong>wor</strong>ks on its <strong>own</strong> <strong>bra</strong>nch. <strong>Hum</strong>an <strong>mer</strong>ges.</p>

    <h3><strong>Str</strong>ategy 2: <strong>Fil</strong>e-Level <strong>Loc</strong>king</h3>
    <pre><code># Agent acquires lock before editing
if [ ! -f "$FILE.lock" ]; then
  touch "$FILE.lock"
  # do work
  rm "$FILE.lock"
else
  echo "File locked, waiting..."
fi</code></pre>

    <h3><strong>Str</strong>ategy 3: <strong>Dir</strong>ectory <strong>Own</strong>ership</h3>
    <pre><code>agent-frontend/ → Only frontend agent touches
agent-backend/  → Only backend agent touches
shared/         → Read-only for all, write via handoff protocol</code></pre>

    <h3><strong>Str</strong>ategy 4: <strong>Tra</strong>nsactional <strong>Fil</strong>e <strong>Ope</strong>rations</h3>
    <pre><code># Safe write pattern
echo "content" > file.tmp
mv file.tmp file.actual</code></pre>

    <hr class="section-divider">

    <!-- Section: Monitoring -->
    <h2 id="monitoring"><strong>Mon</strong>itoring and <strong>Obs</strong>ervability</h2>

    <h3><strong>Cla</strong>ude <strong>HUD</strong> <strong>Plu</strong>gin</h3>
    <p><strong>Sou</strong>rce: @jarrodwatts | <strong>Rep</strong>o: github.com/jarrodwatts/claude-hud</p>
    <p><strong>Sho</strong>ws <strong>con</strong>text <strong>rem</strong>aining, <strong>too</strong>ls <strong>exe</strong>cuting, <strong>sub</strong>agents <strong>run</strong>ning, <strong>to</strong>-do <strong>pro</strong>gress.</p>

    <pre><code>/plugin marketplace add jarrodwatts/claude-hud
/plugin install claude-hud</code></pre>

    <p><strong>Sam</strong>ple <strong>out</strong>put:</p>
    <pre><code>[Opus 4.5] ████████░░ 35% | 1 MCPs | ⏳ 1m
✓ Read x2 | ✓ WebFetch x1 | ✓ Skill x1 | ✓ Edit x1</code></pre>

    <h3><strong>rpa</strong>i - <strong>tmu</strong>x <strong>Mul</strong>ti-Agent <strong>Man</strong>ager</h3>
    <pre><code>cargo install rpai
rpai  # Run in any tmux session</code></pre>
    <p><strong>Fea</strong>tures:</strong> <strong>Sca</strong>ns <strong>tmu</strong>x <strong>pan</strong>es for <strong>run</strong>ning AI <strong>age</strong>nts, <strong>dis</strong>plays TUI with <strong>age</strong>nt <strong>lis</strong>t, <strong>sta</strong>tus, <strong>out</strong>put <strong>pre</strong>views.</p>

    <h3><strong>CC</strong> <strong>Mir</strong>ror <strong>Age</strong>nt <strong>Mon</strong>itoring</h3>
    <pre><code>Background Tasks: 1 active

Async agents (6):
> Implement data models (running)
  Create API documentation (completed)
  Write integration tests (completed)</code></pre>

    <hr class="section-divider">

    <!-- Section: Troubleshooting -->
    <h2 id="troubleshooting"><strong>Tro</strong>ubleshooting <strong>Com</strong>mon <strong>Iss</strong>ues</h2>

    <details>
      <summary><strong>Con</strong>text <strong>Col</strong>lapse - <strong>Age</strong>nts <strong>los</strong>e <strong>tra</strong>ck</summary>
      <div>
        <p><strong>Sym</strong>ptom:</strong> <strong>Age</strong>nts stop <strong>mak</strong>ing <strong>sen</strong>se, <strong>cir</strong>cular <strong>rea</strong>soning</p>
        <p><strong>Cau</strong>ses:</strong></p>
        <ul>
          <li><strong>Con</strong>text <strong>win</strong>dow <strong>ove</strong>rflow</li>
          <li><strong>Aut</strong>o-compact not <strong>ena</strong>bled</li>
          <li><strong>Tas</strong>ks too <strong>lar</strong>ge for <strong>sin</strong>gle <strong>ite</strong>ration</li>
        </ul>
        <p><strong>Fix</strong>:</strong></p>
        <ul>
          <li><strong>Ena</strong>ble <strong>aut</strong>o-compact <strong>bet</strong>a <strong>fea</strong>ture</li>
          <li><strong>Spl</strong>it <strong>tas</strong>ks <strong>sma</strong>ller</li>
          <li>Use <strong>fre</strong>sh <strong>con</strong>text per <strong>ite</strong>ration (<strong>Ral</strong>ph <strong>pat</strong>tern)</li>
        </ul>
      </div>
    </details>

    <details>
      <summary><strong>Mer</strong>ge <strong>Con</strong>flicts - <strong>Mul</strong>tiple <strong>age</strong>nts <strong>edi</strong>ting <strong>sam</strong>e <strong>fil</strong>es</summary>
      <div>
        <p><strong>Sym</strong>ptom:</strong> Git <strong>con</strong>flict <strong>mar</strong>kers, <strong>ove</strong>rwritten <strong>wor</strong>k</p>
        <p><strong>Fix</strong>:</strong></p>
        <ul>
          <li>Use git <strong>wor</strong>ktrees for <strong>iso</strong>lation</li>
          <li><strong>Ass</strong>ign file <strong>own</strong>ership per <strong>age</strong>nt</li>
          <li>Use <strong>seq</strong>uential <strong>mer</strong>ge <strong>que</strong>ue (<strong>Ref</strong>inery in Gas <strong>Tow</strong>n)</li>
        </ul>
      </div>
    </details>

    <details>
      <summary><strong>Run</strong>away <strong>Cos</strong>ts - <strong>Tok</strong>en <strong>usa</strong>ge <strong>spi</strong>king</summary>
      <div>
        <p><strong>Sym</strong>ptom:</strong> <strong>Unex</strong>pected API <strong>bil</strong>ls</p>
        <p><strong>Cau</strong>ses:</strong></p>
        <ul>
          <li><strong>Age</strong>nts <strong>spa</strong>wning <strong>sub</strong>agents <strong>rec</strong>ursively</li>
          <li>No <strong>max</strong> <strong>ite</strong>rations <strong>set</strong></li>
          <li><strong>Exp</strong>ensive <strong>too</strong>ls (<strong>Pla</strong>ywright) in <strong>mai</strong>n <strong>con</strong>text</li>
        </ul>
        <p><strong>Fix</strong>:</strong></p>
        <ul>
          <li>Set <code>--max-iterations</code> on <strong>loo</strong>ps</li>
          <li>Put <strong>cos</strong>tly <strong>too</strong>ls in <strong>sub</strong>agents</li>
          <li>Use <strong>Hai</strong>ku for <strong>sim</strong>ple <strong>tas</strong>ks, <strong>Opu</strong>s <strong>onl</strong>y for <strong>com</strong>plex</li>
        </ul>
      </div>
    </details>

    <details>
      <summary><strong>Age</strong>nt <strong>Dea</strong>dlock - <strong>Not</strong>hing <strong>pro</strong>gressing</summary>
      <div>
        <p><strong>Sym</strong>ptom:</strong> <strong>Age</strong>nts <strong>wai</strong>ting on <strong>eac</strong>h <strong>oth</strong>er</p>
        <p><strong>Cau</strong>ses:</strong></p>
        <ul>
          <li><strong>Cir</strong>cular <strong>dep</strong>endencies in <strong>tas</strong>k <strong>gra</strong>ph</li>
          <li><strong>Age</strong>nt <strong>wai</strong>ting for <strong>hum</strong>an <strong>dec</strong>ision</li>
        </ul>
        <p><strong>Fix</strong>:</strong></p>
        <ul>
          <li><strong>Che</strong>ck <strong>inb</strong>ox for <strong>pen</strong>ding <strong>app</strong>rovals</li>
          <li><strong>Rev</strong>iew <strong>tas</strong>k <strong>dep</strong>endency <strong>gra</strong>ph</li>
          <li><strong>Bre</strong>ak <strong>cir</strong>cular <strong>dep</strong>endencies</li>
        </ul>
      </div>
    </details>

    <!-- Quick Reference -->
    <div class="quick-ref" style="margin-top: 40px;">
      <div class="quick-ref-title">Quick Reference: Commands</div>
      <pre><code># Ralph Loop
./ralph.sh 25

# Git Worktree
git worktree add ../feature-branch feature-branch

# CC Mirror
npx cc-mirror quick --provider mirror --name mclaude

# Claude HUD
/plugin install claude-hud

# rpai (tmux manager)
cargo install rpai && rpai

# Gas Town
go install github.com/steveyegge/gastown/cmd/gt@latest</code></pre>
    </div>

    <!-- Final Checkpoint -->
    <div class="callout callout-success" style="margin-top: 40px;">
      <div class="callout-title">Reference Guide Complete</div>
      <p>This <strong>pag</strong>e <strong>con</strong>solidates all known <strong>mul</strong>ti-agent <strong>pat</strong>terns. For <strong>dee</strong>p <strong>div</strong>es:</p>
      <ul>
        <li><a href="ralph-research.html"><strong>Ral</strong>ph <strong>Wig</strong>gum</a> - <strong>Ite</strong>rative <strong>loo</strong>ps with <strong>fre</strong>sh <strong>con</strong>text</li>
        <li><a href="cc-mirror.html"><strong>CC</strong> <strong>Mir</strong>ror</a> - <strong>Hid</strong>den <strong>orc</strong>hestration <strong>API</strong></li>
        <li><a href="gas-town.html"><strong>Gas</strong> <strong>Tow</strong>n</a> - <strong>Fac</strong>tory-scale <strong>arc</strong>hitecture</li>
      </ul>
    </div>

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="ralph-research.html">Ralph Wiggum Pattern</a></li>
        <li><a href="cc-mirror.html">CC Mirror Orchestration</a></li>
        <li><a href="gas-town.html">Gas Town Factory</a></li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <div class="footer-nav">
      <a href="gas-town.html">Previous: Gas Town</a>
      <a href="index.html">Orchestration Index</a>
    </div>

  </div>
  <script src="../../js/copy-code.js"></script>
  <script src="../../js/search.js"></script>
</body>
</html>
