<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta data-pagefind-meta="chapter" content="Extractions">
    <meta data-pagefind-meta="section" content="Extractions">
    <title>Techniques - Claude Code Knowledge Base</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/search.css">
</head>
<body>
    <!-- Search Modal -->
    <div class="search-modal" id="searchModal" aria-hidden="true">
      <div class="search-overlay" onclick="closeSearch()"></div>
      <div class="search-content">
        <div class="search-header">
          <div class="search-input-wrapper">
            <span class="search-icon-input">üîç</span>
            <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
            <kbd class="search-kbd">ESC</kbd>
          </div>
        </div>
        <div class="search-filters">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="ch1">Chapter 1</button>
          <button class="filter-btn" data-filter="ch2">Chapter 2</button>
          <button class="filter-btn" data-filter="ch3">Chapter 3</button>
          <button class="filter-btn" data-filter="ch4">Chapter 4</button>
          <button class="filter-btn" data-filter="ref">Reference</button>
        </div>
        <div class="search-results" id="searchResults">
          <div class="search-empty"><p>Start typing to search... (Press ‚åòK anytime)</p></div>
        </div>
        <div class="search-footer">
          <span>‚Üë‚Üì Navigate</span><span>‚Üµ Select</span><span>ESC Close</span>
        </div>
      </div>
    </div>

    <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
      <span class="search-icon">‚åòK</span>
      <span class="search-text">Search</span>
    </button>

    <div class="container">
        <nav class="nav-breadcrumb">
            <a href="../index.html">Home</a>
            <span>/</span>
            <a href="orchestration-master.html">Extractions</a>
            <span>/</span>
            Techniques
        </nav>

        <h1><span class="bionic">Tec</span>hniques</h1>

        <div class="you-are-here">
            <strong>You Are Here:</strong> This page covers the tactical how-to's of Claude Code: hooks for event-driven automation, MCP servers for tool extensions, skills for reusable commands, and security patterns for safe operation. These are the building blocks that power orchestration patterns.
        </div>

        <nav class="toc">
            <div class="toc-title">Table of Contents</div>
            <ul>
                <li><a href="#hooks">Hooks - Event-Driven Automation</a></li>
                <li><a href="#mcp">MCP Servers - Tool Extensions</a></li>
                <li><a href="#skills">Skills - Reusable Commands</a></li>
                <li><a href="#security">Security Patterns</a></li>
                <li><a href="#wave3-techniques">Wave-3 Techniques Extractions (5 files)</a></li>
            </ul>
        </nav>

        <hr class="section-divider">

        <section id="hooks">
            <h2><span class="bionic">Hoo</span>ks - <span class="bionic">Eve</span>nt-Driven Automation</h2>

            <div class="pattern-box">
                <div class="pattern-title">What Hooks Are</div>
                <p>Event-driven shell commands (NOT AI prompts) that run automatically on Claude Code lifecycle events. They're for deterministic automation, not AI reasoning.</p>
            </div>

            <h3><span class="bionic">Ava</span>ilable Events</h3>
            <table>
                <thead>
                    <tr>
                        <th>Event</th>
                        <th>Trigger</th>
                        <th>Common Uses</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>PreToolUse</code></td>
                        <td>Before a tool runs</td>
                        <td>Validation, notifications, approval gates</td>
                    </tr>
                    <tr>
                        <td><code>PostToolUse</code></td>
                        <td>After a tool completes</td>
                        <td>Formatting, linting, logging</td>
                    </tr>
                    <tr>
                        <td><code>SessionStart</code></td>
                        <td>When session begins</td>
                        <td>Context loading, environment setup</td>
                    </tr>
                    <tr>
                        <td><code>SessionEnd</code></td>
                        <td>When session ends</td>
                        <td>Cleanup, summary generation</td>
                    </tr>
                </tbody>
            </table>

            <h3><span class="bionic">Too</span>l Matchers</h3>
            <p>Hooks can target specific tools: <code>Edit</code>, <code>Write</code>, <code>Bash</code>, <code>Read</code>, <code>Glob</code>, <code>Grep</code>, <code>AskUserQuestion</code>, <code>Task</code>, <code>WebFetch</code>, <code>WebSearch</code>, or <code>*</code> for all.</p>

            <h3><span class="bionic">Con</span>figuration</h3>
            <pre><code>// ~/.claude/settings.json
{
  "hooks": {
    "PreToolUse": [{
      "matcher": "AskUserQuestion",
      "hooks": [{
        "type": "command",
        "command": "~/.claude/hooks/notify.sh"
      }]
    }],
    "PostToolUse": [{
      "matcher": "Edit",
      "hooks": [{
        "type": "command",
        "command": "prettier --write $FILE"
      }]
    }]
  }
}</code></pre>

            <h3><span class="bionic">Rec</span>ipe: Push Notifications</h3>
            <div class="tutorial-block">
                <div class="tutorial-header">Mobile Notification on User Input Required</div>
                <div class="tutorial-content">
                    <div class="tutorial-step">
                        <div class="tutorial-step-number">1</div>
                        <div class="tutorial-step-content">
                            <h4>Create notification script</h4>
                            <pre><code>#!/bin/bash
# ~/.claude/hooks/notify.sh
QUESTION=$(echo "$EVENT_DATA" | jq -r '.tool_input.questions[0].question')
curl -d "Claude needs: $QUESTION" ntfy.sh/your-topic</code></pre>
                        </div>
                    </div>
                    <div class="tutorial-step">
                        <div class="tutorial-step-number">2</div>
                        <div class="tutorial-step-content">
                            <h4>Make executable</h4>
                            <pre><code>chmod +x ~/.claude/hooks/notify.sh</code></pre>
                        </div>
                    </div>
                    <div class="tutorial-step">
                        <div class="tutorial-step-number">3</div>
                        <div class="tutorial-step-content">
                            <h4>Add to settings.json</h4>
                            <p>Use the PreToolUse configuration above with AskUserQuestion matcher.</p>
                        </div>
                    </div>
                </div>
            </div>

            <h3><span class="bionic">Rec</span>ipe: Auto-Formatting</h3>
            <pre><code>// Language-specific formatting
{
  "hooks": {
    "PostToolUse": [
      {"matcher": "Edit", "command": "prettier --write $FILE"},  // JS/TS
      {"matcher": "Edit", "command": "black $FILE"},             // Python
      {"matcher": "Edit", "command": "gofmt -w $FILE"},          // Go
      {"matcher": "Edit", "command": "rustfmt $FILE"}            // Rust
    ]
  }
}</code></pre>

            <h3><span class="bionic">Rec</span>ipe: Security Gate</h3>
            <pre><code>#!/bin/bash
# ~/.claude/hooks/security-gate.sh
COMMAND=$(echo "$EVENT_DATA" | jq -r '.tool_input.command')

DANGEROUS_PATTERNS=("rm -rf" "git push --force" "DROP TABLE" "sudo")

for pattern in "${DANGEROUS_PATTERNS[@]}"; do
    if [[ "$COMMAND" == *"$pattern"* ]]; then
        echo "BLOCKED: $pattern detected" >&2
        exit 1  # Non-zero blocks the operation
    fi
done

exit 0  # Allow operation</code></pre>

            <div class="callout callout-insight">
                <div class="callout-title">Exit Code Behavior</div>
                <ul>
                    <li><strong>Exit 0:</strong> Tool proceeds normally</li>
                    <li><strong>Non-zero:</strong> Tool blocked, stderr shown to user</li>
                </ul>
            </div>

            <h3><span class="bionic">Env</span>ironment Variables</h3>
            <table>
                <thead>
                    <tr>
                        <th>Variable</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><code>$EVENT_DATA</code></td><td>JSON blob with tool input/output</td></tr>
                    <tr><td><code>$TOOL_NAME</code></td><td>Name of tool being used</td></tr>
                    <tr><td><code>$FILE</code></td><td>Target file path (PostToolUse Edit/Write)</td></tr>
                    <tr><td><code>$PROJECT_NAME</code></td><td>Current project name</td></tr>
                    <tr><td><code>$SESSION_ID</code></td><td>Current session identifier</td></tr>
                </tbody>
            </table>
        </section>

        <hr class="section-divider">

        <section id="mcp">
            <h2><span class="bionic">MCP</span> Servers - <span class="bionic">Too</span>l Extensions</h2>

            <div class="pattern-box">
                <div class="pattern-title">Model Context Protocol</div>
                <p>MCP servers extend Claude's capabilities with custom tools. They run as separate processes that Claude can invoke, enabling database access, API calls, file system operations, and more.</p>
            </div>

            <h3><span class="bionic">Pop</span>ular MCP Servers</h3>
            <div class="card-grid">
                <div class="card">
                    <div class="card-title">mcp-server-fetch</div>
                    <div class="card-description">Web fetching and API calls. Alternative to WebFetch with fewer restrictions.</div>
                    <div class="card-meta">npm install @anthropic/mcp-server-fetch</div>
                </div>
                <div class="card">
                    <div class="card-title">mcp-server-filesystem</div>
                    <div class="card-description">Extended file system operations beyond built-in tools.</div>
                    <div class="card-meta">npm install @anthropic/mcp-server-filesystem</div>
                </div>
                <div class="card">
                    <div class="card-title">mcp-server-sqlite</div>
                    <div class="card-description">Direct SQLite database queries and management.</div>
                    <div class="card-meta">npm install @anthropic/mcp-server-sqlite</div>
                </div>
                <div class="card">
                    <div class="card-title">mcp-server-browser</div>
                    <div class="card-description">Browser automation for UI verification and testing.</div>
                    <div class="card-meta">Enables visual verification loops</div>
                </div>
            </div>

            <h3><span class="bionic">Con</span>figuration</h3>
            <pre><code>// ~/.claude/settings.json
{
  "mcpServers": {
    "fetch": {
      "command": "npx",
      "args": ["@anthropic/mcp-server-fetch"]
    },
    "sqlite": {
      "command": "npx",
      "args": ["@anthropic/mcp-server-sqlite", "--db-path", "./data.db"]
    },
    "filesystem": {
      "command": "npx",
      "args": ["@anthropic/mcp-server-filesystem", "--allowed-directories", "/home/user/projects"]
    }
  }
}</code></pre>

            <h3><span class="bionic">Chr</span>ome MCP Pattern</h3>
            <div class="pattern-box">
                <div class="pattern-title">Visual Verification</div>
                <div class="pattern-subtitle">Source: @pk_iv reverse engineering</div>
                <p>Use Playwright/Chrome MCP for UI verification. Claude can take screenshots, check element presence, and verify visual output.</p>
            </div>
            <pre><code>// Example verification loop
// 1. Claude edits component
// 2. MCP browser loads page
// 3. Screenshot captured
// 4. Claude analyzes screenshot
// 5. Iterate until visual matches spec</code></pre>
        </section>

        <hr class="section-divider">

        <section id="skills">
            <h2><span class="bionic">Ski</span>lls - <span class="bionic">Reu</span>sable Commands</h2>

            <div class="pattern-box">
                <div class="pattern-title">What Skills Are</div>
                <p>Skills are reusable command templates stored in <code>.claude/commands/</code>. They can be invoked with <code>/skillname</code> and can contain complex multi-step instructions.</p>
            </div>

            <h3><span class="bionic">Ski</span>ll Structure</h3>
            <pre><code>.claude/
‚îî‚îÄ‚îÄ commands/
    ‚îú‚îÄ‚îÄ review-pr.md      # /review-pr
    ‚îú‚îÄ‚îÄ debug.md          # /debug
    ‚îú‚îÄ‚îÄ refactor.md       # /refactor
    ‚îî‚îÄ‚îÄ test-coverage.md  # /test-coverage</code></pre>

            <h3><span class="bionic">Exa</span>mple Skill</h3>
            <pre><code># .claude/commands/review-pr.md
# PR Review Skill

## Instructions
Review the current PR with focus on:
1. Code correctness
2. Security vulnerabilities
3. Performance implications
4. Test coverage

## Steps
1. Run `gh pr view --json title,body,files`
2. Read each changed file
3. Identify issues in each category
4. Suggest specific improvements
5. Output summary table

## Output Format
| Category | Status | Notes |
|----------|--------|-------|
| Correctness | OK/Issue | ... |
| Security | OK/Issue | ... |
| Performance | OK/Issue | ... |
| Tests | OK/Issue | ... |</code></pre>

            <h3><span class="bionic">Bui</span>lt-in vs Custom</h3>
            <table>
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Location</th>
                        <th>Examples</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Built-in</td>
                        <td>Claude Code binary</td>
                        <td>/help, /clear, /compact</td>
                    </tr>
                    <tr>
                        <td>Global</td>
                        <td>~/.claude/commands/</td>
                        <td>Personal workflow commands</td>
                    </tr>
                    <tr>
                        <td>Project</td>
                        <td>.claude/commands/</td>
                        <td>Project-specific automation</td>
                    </tr>
                </tbody>
            </table>

            <h3><span class="bionic">CC</span> Mirror Skill Unlock</h3>
            <p>CC Mirror's key contribution is providing the skill structure that enables native orchestration. The skills define how Claude can spawn and coordinate subagents.</p>
        </section>

        <hr class="section-divider">

        <section id="security">
            <h2><span class="bionic">Sec</span>urity <span class="bionic">Pat</span>terns</h2>

            <div class="problem-statement">
                AI agents executing code have real security implications. 35% of AI security incidents come from simple prompts. Shadow AI breaches average $670,000 more than traditional incidents and take 247 days to detect.
            </div>

            <h3><span class="bionic">Key</span> Principles</h3>
            <ol>
                <li><strong>Never expose API keys in hooks</strong> - Use environment variables</li>
                <li><strong>Validate input before execution</strong> - Sanitize $EVENT_DATA</li>
                <li><strong>Limit hook permissions</strong> - Use least-privilege scripts</li>
                <li><strong>Audit hook execution</strong> - Log all hook runs</li>
                <li><strong>Isolate dangerous operations</strong> - Run on VMs, not local machines</li>
            </ol>

            <h3><span class="bionic">Per</span>mission Management</h3>
            <div class="callout callout-warning">
                <div class="callout-title">Permission Guidance</div>
                <p>"Think of permissions in Claude Code as your 'App Store approval system.' Only include commands that are 100% harmless in the allowlist. Don't get tempted to add git push or docker run‚Äîthat's where trouble begins."</p>
            </div>

            <h3><span class="bionic">San</span>dboxing Options</h3>
            <table>
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Isolation Level</th>
                        <th>Use Case</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Docker Sandbox</td>
                        <td>Container</td>
                        <td>Standard isolation</td>
                    </tr>
                    <tr>
                        <td>Cloudflare Workers</td>
                        <td>V8 Isolate</td>
                        <td>Serverless execution</td>
                    </tr>
                    <tr>
                        <td>Kata Containers</td>
                        <td>Hardware VM</td>
                        <td>Maximum isolation</td>
                    </tr>
                    <tr>
                        <td>Cloud VM</td>
                        <td>Full VM</td>
                        <td>Disposable environments</td>
                    </tr>
                </tbody>
            </table>

            <h3><span class="bionic">Com</span>mand Allowlist Example</h3>
            <pre><code>{
  "permissions": {
    "allow": [
      "Bash(npm run *)",
      "Bash(git status)",
      "Bash(git diff *)",
      "Bash(git log *)",
      "Bash(ls *)",
      "Bash(cat *)"
    ],
    "deny": [
      "Bash(rm -rf *)",
      "Bash(git push *)",
      "Bash(sudo *)",
      "Bash(curl * | sh)",
      "Bash(chmod 777 *)"
    ]
  }
}</code></pre>

            <div class="gotcha-block">
                <strong>Never run permissive mode on your main machine.</strong> If you need YOLO mode, use an isolated VM accessible via Tailscale. No public SSH, cloud firewall + nftables + fail2ban.
            </div>
        </section>

        <hr class="section-divider">

        <section id="wave3-techniques">
            <h2><span class="bionic">Wav</span>e-3 Techniques <span class="bionic">Ext</span>ractions</h2>

            <div class="you-are-here">
                <strong>Wave-3 Content:</strong> These 5 extractions cover advanced techniques including MCP SDKs, skill marketplaces, agent coordination infrastructure, and community tips collections.
            </div>

            <h3><span class="bionic">MCP</span> Development <span class="bionic">SDK</span>s</h3>
            <div class="card-grid">
                <div class="card">
                    <div class="card-title"><a href="../../extractions/techniques/012-mcp-python-sdk.md">012 - MCP Python SDK</a></div>
                    <div class="card-description">Official Python SDK for Model Context Protocol. Complete technical reference: architecture, custom tools, integration patterns with Ralph/Gas Town/CC-Mirror.</div>
                </div>
                <div class="card">
                    <div class="card-title"><a href="../../extractions/techniques/013-mcp-typescript-sdk.md">013 - MCP TypeScript SDK</a></div>
                    <div class="card-description">Official TypeScript SDK (11.4k stars). Type-safe MCP development, framework adapters, building custom tools for Claude Code extensions.</div>
                </div>
            </div>

            <h3><span class="bionic">Age</span>nt Coordination & <span class="bionic">Ski</span>lls</h3>
            <div class="card-grid">
                <div class="card">
                    <div class="card-title"><a href="../../extractions/techniques/009-mcp-agent-mail.md">009 - MCP Agent Mail</a></div>
                    <div class="card-description">Jeffrey Emanuel's asynchronous coordination infrastructure. File reservation system, async messaging for multi-agent workflows. FastMCP 2.0 based.</div>
                </div>
                <div class="card">
                    <div class="card-title"><a href="../../extractions/techniques/010-n-skills-collection.md">010 - N-Skills Collection</a></div>
                    <div class="card-description">Numman Ali's universal agent skills marketplace. SKILL.md/AGENTS.md standards, cross-platform compatibility, production-ready Gas Town and browser automation skills.</div>
                </div>
            </div>

            <h3><span class="bionic">Com</span>munity <span class="bionic">Tip</span>s</h3>
            <div class="card-grid">
                <div class="card">
                    <div class="card-title"><a href="../../extractions/techniques/011-claude-code-tips.md">011 - Claude Code Tips</a></div>
                    <div class="card-description">ykdojo's community knowledge base. 40+ numbered tips, custom scripts (status bar, cloning), skills (reddit-fetch), slash commands (/handoff, /gha, /clone).</div>
                </div>
            </div>
        </section>

        <hr class="section-divider">

        <div class="related-pages">
            <h3>Related Pages</h3>
            <ul>
                <li><a href="orchestration-master.html">Orchestration (Ralph, Gas Town)</a></li>
                <li><a href="tooling-master.html">Tooling (rpai, claude-mem)</a></li>
                <li><a href="infrastructure-master.html">Infrastructure (Sandboxing, Remote)</a></li>
            </ul>
        </div>

        <nav class="footer-nav">
            <a href="orchestration-master.html">Previous: Orchestration</a>
            <a href="philosophy-master.html">Next: Philosophy</a>
        </nav>
    </div>
    <script src="../js/search.js"></script>
</body>
</html>
