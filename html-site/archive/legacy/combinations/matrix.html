<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pattern Combination Matrix - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .bionic { font-weight: 700; }

    /* Matrix Grid Styling */
    .matrix-container {
      overflow-x: auto;
      margin: 24px 0;
    }
    .combination-matrix {
      border-collapse: collapse;
      font-size: 0.85em;
      min-width: 800px;
    }
    .combination-matrix th,
    .combination-matrix td {
      padding: 10px 12px;
      text-align: center;
      border: 1px solid var(--border);
      min-width: 90px;
    }
    .combination-matrix th {
      background: var(--heading);
      color: white;
      font-weight: 600;
      position: sticky;
      top: 0;
    }
    .combination-matrix th.row-header {
      background: var(--bg-secondary);
      color: var(--heading);
      text-align: left;
      position: sticky;
      left: 0;
    }
    .combination-matrix .cell-documented {
      background: #e8f5e8;
      color: var(--success);
      font-weight: 600;
    }
    .combination-matrix .cell-synergistic {
      background: #e8f4f4;
      color: var(--accent);
      font-weight: 600;
    }
    .combination-matrix .cell-possible {
      background: #fdf6e9;
      color: var(--warning);
    }
    .combination-matrix .cell-antipattern {
      background: #fdf0ef;
      color: var(--error);
      font-weight: 600;
    }
    .combination-matrix .cell-unexplored {
      background: var(--bg-secondary);
      color: var(--text-muted);
      font-style: italic;
    }
    .combination-matrix .cell-self {
      background: #f5f5f5;
      color: #999;
    }

    /* Legend */
    .matrix-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin: 20px 0;
      padding: 16px 20px;
      background: var(--bg-secondary);
      border-radius: 8px;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9em;
    }
    .legend-swatch {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      border: 1px solid var(--border);
    }
    .swatch-documented { background: #e8f5e8; }
    .swatch-synergistic { background: #e8f4f4; }
    .swatch-possible { background: #fdf6e9; }
    .swatch-antipattern { background: #fdf0ef; }
    .swatch-unexplored { background: var(--bg-secondary); }

    /* ROI Matrix */
    .roi-table {
      margin: 24px 0;
    }
    .roi-table td:nth-child(2),
    .roi-table td:nth-child(3),
    .roi-table td:nth-child(4) {
      text-align: center;
    }
    .roi-5 { color: var(--success); font-weight: 700; }
    .roi-4 { color: var(--accent); font-weight: 600; }
    .roi-3 { color: var(--warning); }
    .roi-2 { color: var(--text-muted); }

    /* Decision Flowchart */
    .flowchart {
      background: var(--code-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
      font-family: 'SF Mono', monospace;
      font-size: 0.85em;
      line-height: 1.6;
      white-space: pre;
      overflow-x: auto;
    }

    /* Recommendation Cards */
    .stage-card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px 24px;
      margin: 16px 0;
    }
    .stage-label {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.75em;
      font-weight: 600;
      text-transform: uppercase;
      margin-bottom: 12px;
    }
    .stage-beginner { background: #e8f5e8; color: var(--success); }
    .stage-intermediate { background: #e8f4f4; color: var(--accent); }
    .stage-advanced { background: #fdf6e9; color: var(--warning); }

    .copy-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--accent);
      color: white;
      border: none;
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 0.75em;
      cursor: pointer;
    }
    .code-block-wrapper {
      position: relative;
    }
  </style>
</head>
<body>
  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="index.html">Combinations</a>
      <span>/</span>
      Matrix
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid var(--accent); border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="margin-top: 0; color: var(--accent);"><span class="bionic">You</span> Are <span class="bionic">Her</span>e</h3>
      <p style="margin-bottom: 0;"><strong><span class="bionic">Con</span>text:</strong> This is your <span class="bionic">qui</span>ck reference for pattern compatibility. Use this matrix to instantly see which patterns work well together, which <span class="bionic">con</span>flict, and which are worth exploring.</p>
      <p style="margin-bottom: 0; margin-top: 12px;"><strong><span class="bionic">How</span> to use:</strong> Find one pattern on the top row, another on the left column. The intersection tells you the combination type and expected outcome.</p>
    </div>

    <h1><span class="bionic">Pat</span>tern <span class="bionic">Com</span>bination <span class="bionic">Mat</span>rix</h1>

    <p class="conversational-lead">A comprehensive guide to combining Claude Code patterns. <span class="bionic">Gre</span>en means go, <span class="bionic">red</span> means stop, <span class="bionic">yel</span>low means proceed with caution.</p>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title"><span class="bionic">Tab</span>le of <span class="bionic">Con</span>tents</div>
      <ul>
        <li><a href="#core-matrix">Core Pattern Matrix</a></li>
        <li><a href="#roi-matrix">ROI by Combination</a></li>
        <li><a href="#recommendations">Stage-Based Recommendations</a></li>
        <li><a href="#decision-flowchart">Decision Flowchart</a></li>
        <li><a href="#anti-patterns">Anti-Patterns</a></li>
        <li><a href="#quick-start">Quick Start Commands</a></li>
      </ul>
    </div>

    <hr class="section-divider divider-context">

    <!-- Legend -->
    <div class="matrix-legend">
      <div class="legend-item">
        <div class="legend-swatch swatch-documented"></div>
        <span><strong>Documented</strong> - Community-validated, examples exist</span>
      </div>
      <div class="legend-item">
        <div class="legend-swatch swatch-synergistic"></div>
        <span><strong>Synergistic</strong> - Works well, complementary strengths</span>
      </div>
      <div class="legend-item">
        <div class="legend-swatch swatch-possible"></div>
        <span><strong>Possible</strong> - Can work with careful setup</span>
      </div>
      <div class="legend-item">
        <div class="legend-swatch swatch-antipattern"></div>
        <span><strong>Anti-pattern</strong> - Conflicting approaches, avoid</span>
      </div>
      <div class="legend-item">
        <div class="legend-swatch swatch-unexplored"></div>
        <span><strong>Unexplored</strong> - No known examples, untested</span>
      </div>
    </div>

    <!-- Core Pattern Matrix -->
    <h2 id="core-matrix"><span class="bionic">Cor</span>e <span class="bionic">Pat</span>tern <span class="bionic">Mat</span>rix</h2>

    <div class="matrix-container">
      <table class="combination-matrix">
        <thead>
          <tr>
            <th></th>
            <th>Ralph Loop</th>
            <th>CC Mirror</th>
            <th>Gas Town</th>
            <th>Hooks</th>
            <th>Subagents</th>
            <th>Git Worktrees</th>
            <th>Claude-Mem</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th class="row-header">Ralph Loop</th>
            <td class="cell-self">-</td>
            <td class="cell-possible">Possible</td>
            <td class="cell-possible">Possible</td>
            <td class="cell-documented">Documented</td>
            <td class="cell-documented">Documented</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-synergistic">Synergistic</td>
          </tr>
          <tr>
            <th class="row-header">CC Mirror</th>
            <td class="cell-possible">Possible</td>
            <td class="cell-self">-</td>
            <td class="cell-antipattern">Anti-pattern</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-documented">Documented</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-unexplored">Unexplored</td>
          </tr>
          <tr>
            <th class="row-header">Gas Town</th>
            <td class="cell-possible">Possible</td>
            <td class="cell-antipattern">Anti-pattern</td>
            <td class="cell-self">-</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-documented">Documented</td>
            <td class="cell-possible">Possible</td>
            <td class="cell-unexplored">Unexplored</td>
          </tr>
          <tr>
            <th class="row-header">Hooks</th>
            <td class="cell-documented">Documented</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-self">-</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-documented">Documented</td>
            <td class="cell-documented">Documented</td>
          </tr>
          <tr>
            <th class="row-header">Subagents</th>
            <td class="cell-documented">Documented</td>
            <td class="cell-documented">Documented</td>
            <td class="cell-documented">Documented</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-self">-</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-unexplored">Unexplored</td>
          </tr>
          <tr>
            <th class="row-header">Git Worktrees</th>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-possible">Possible</td>
            <td class="cell-documented">Documented</td>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-self">-</td>
            <td class="cell-possible">Possible</td>
          </tr>
          <tr>
            <th class="row-header">Claude-Mem</th>
            <td class="cell-synergistic">Synergistic</td>
            <td class="cell-unexplored">Unexplored</td>
            <td class="cell-unexplored">Unexplored</td>
            <td class="cell-documented">Documented</td>
            <td class="cell-unexplored">Unexplored</td>
            <td class="cell-possible">Possible</td>
            <td class="cell-self">-</td>
          </tr>
        </tbody>
      </table>
    </div>

    <hr class="section-divider divider-checkpoint">

    <!-- ROI Matrix -->
    <h2 id="roi-matrix"><span class="bionic">ROI</span> by <span class="bionic">Com</span>bination</h2>

    <table class="roi-table">
      <thead>
        <tr>
          <th>Combination</th>
          <th>Setup Effort</th>
          <th>Ongoing Effort</th>
          <th>Payoff</th>
          <th>ROI</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Ralph + Hooks</strong></td>
          <td>Low</td>
          <td>None</td>
          <td>High</td>
          <td class="roi-5">5/5</td>
          <td>Push notifications during AFK runs</td>
        </tr>
        <tr>
          <td><strong>Hooks + Subagents</strong></td>
          <td>Low</td>
          <td>Low</td>
          <td>High</td>
          <td class="roi-5">5/5</td>
          <td>Observable multi-agent workflows</td>
        </tr>
        <tr>
          <td><strong>CC Mirror + Subagents</strong></td>
          <td>None</td>
          <td>Low</td>
          <td>High</td>
          <td class="roi-5">5/5</td>
          <td>Already integrated</td>
        </tr>
        <tr>
          <td><strong>Subagents + Worktrees</strong></td>
          <td>Medium</td>
          <td>Low</td>
          <td>High</td>
          <td class="roi-4">4/5</td>
          <td>True parallel feature development</td>
        </tr>
        <tr>
          <td><strong>Ralph + Worktrees</strong></td>
          <td>Medium</td>
          <td>Low</td>
          <td>High</td>
          <td class="roi-4">4/5</td>
          <td>Parallel overnight loops</td>
        </tr>
        <tr>
          <td><strong>CC Mirror + Hooks</strong></td>
          <td>Low</td>
          <td>None</td>
          <td>High</td>
          <td class="roi-4">4/5</td>
          <td>Built-in observability</td>
        </tr>
        <tr>
          <td><strong>Ralph + Claude-Mem</strong></td>
          <td>Medium</td>
          <td>None</td>
          <td>Medium</td>
          <td class="roi-3">3/5</td>
          <td>Redundant state tracking possible</td>
        </tr>
        <tr>
          <td><strong>CC Mirror + Worktrees</strong></td>
          <td>Medium</td>
          <td>Medium</td>
          <td>High</td>
          <td class="roi-3">3/5</td>
          <td>Requires custom integration</td>
        </tr>
        <tr>
          <td><strong>Gas Town + Subagents</strong></td>
          <td>High</td>
          <td>Medium</td>
          <td>Very High</td>
          <td class="roi-3">3/5</td>
          <td>Full agent factory (Stage 7+)</td>
        </tr>
        <tr>
          <td><strong>Claude-Mem + Worktrees</strong></td>
          <td>Medium</td>
          <td>Medium</td>
          <td>Medium</td>
          <td class="roi-2">2/5</td>
          <td>Needs testing for concurrency</td>
        </tr>
      </tbody>
    </table>

    <hr class="section-divider divider-procedure">

    <!-- Stage-Based Recommendations -->
    <h2 id="recommendations"><span class="bionic">Sta</span>ge-Based <span class="bionic">Rec</span>ommendations</h2>

    <div class="decision-point">
      <p><strong><span class="bionic">Cho</span>ose your combinations based on your current experience level.</strong> Start simple, add complexity as you master each layer.</p>
    </div>

    <!-- Beginner -->
    <div class="stage-card">
      <span class="stage-label stage-beginner">Beginners (Stage 1-3)</span>
      <h3><span class="bionic">Fir</span>st <span class="bionic">Com</span>binations</h3>

      <h4>1. Hooks + HUD Plugin</h4>
      <ul>
        <li>Install <code>claude-hud</code> for visibility</li>
        <li>Add PreToolUse hook for notifications</li>
        <li>Zero code required</li>
      </ul>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>/plugin install claude-hud</code></pre>
      </div>

      <h4>2. Subagents Only</h4>
      <ul>
        <li>Use Task tool for parallel work</li>
        <li>Let Claude manage spawning</li>
        <li>Simplest multi-agent entry point</li>
      </ul>
    </div>

    <!-- Intermediate -->
    <div class="stage-card">
      <span class="stage-label stage-intermediate">Intermediate (Stage 4-5)</span>
      <h3><span class="bionic">Bui</span>lding <span class="bionic">Fou</span>ndation</h3>

      <h4>1. Ralph + Hooks</h4>
      <ul>
        <li>Run overnight feature loops</li>
        <li>Get notified when done</li>
        <li>File-based state management</li>
        <li><em>Setup time: 30 minutes</em></li>
      </ul>

      <h4>2. Subagents + Worktrees</h4>
      <ul>
        <li>Parallel feature development</li>
        <li>No merge conflicts during work</li>
        <li>Human reviews and merges</li>
        <li><em>Setup time: 1 hour</em></li>
      </ul>

      <h4>3. CC Mirror + Hooks</h4>
      <ul>
        <li>Native orchestration unlocked</li>
        <li>Observable agent activity</li>
        <li>Covers 80% of multi-agent needs</li>
        <li><em>Setup time: 15 minutes</em></li>
      </ul>
    </div>

    <!-- Advanced -->
    <div class="stage-card">
      <span class="stage-label stage-advanced">Advanced (Stage 6-7)</span>
      <h3><span class="bionic">Sca</span>ling <span class="bionic">Up</span></h3>

      <h4>1. Ralph + Worktrees + Hooks</h4>
      <ul>
        <li>Multiple parallel Ralph loops</li>
        <li>Push notifications per loop</li>
        <li>Ship multiple features overnight</li>
        <li><em>Setup time: 2 hours</em></li>
      </ul>

      <h4>2. CC Mirror + Subagents + Worktrees</h4>
      <ul>
        <li>Full orchestration with isolation</li>
        <li>Model-appropriate task routing</li>
        <li>Production-grade parallel work</li>
        <li><em>Setup time: 2-3 hours</em></li>
      </ul>

      <h4>3. Claude-Mem + Any Pattern</h4>
      <ul>
        <li>Persistent project memory</li>
        <li>Reduces context re-explanation</li>
        <li>Worth adding to any workflow</li>
        <li><em>Setup time: 30 minutes</em></li>
      </ul>
    </div>

    <hr class="section-divider divider-context">

    <!-- Decision Flowchart -->
    <h2 id="decision-flowchart"><span class="bionic">Dec</span>ision <span class="bionic">Flo</span>wchart</h2>

    <p><span class="bionic">Use</span> this flowchart to choose the right combination for your use case:</p>

    <div class="flowchart">What's your use case?
|
+-- Single overnight feature
|   +-- Ralph + Hooks
|
+-- Multiple parallel features
|   +-- Ralph + Worktrees + Hooks
|
+-- Interactive multi-agent work
|   +-- CC Mirror + Subagents
|
+-- Complex project with memory
|   +-- Claude-Mem + (Ralph or CC Mirror)
|
+-- Mobile-first development
|   +-- Worktrees + Hooks (Poke) + Cloud VM
|
+-- 10+ agents, factory-scale
|   +-- Gas Town (if Stage 7+)
|
+-- Just starting out?
    +-- Subagents only --> add Hooks --> add HUD</div>

    <hr class="section-divider divider-warning">

    <!-- Anti-Patterns -->
    <h2 id="anti-patterns"><span class="bionic">Ant</span>i-Patterns to <span class="bionic">Avo</span>id</h2>

    <div class="gotcha-block">
      <h4>1. CC Mirror + Gas Town</h4>
      <p><strong>Why:</strong> Competing orchestrators fight for control</p>
    </div>

    <div class="gotcha-block">
      <h4>2. Multiple Orchestrators</h4>
      <p><strong>Why:</strong> Conflicting task graphs, agent confusion</p>
    </div>

    <div class="gotcha-block">
      <h4>3. Ralph + CC Mirror (Simultaneous)</h4>
      <p><strong>Why:</strong> Both try to manage iteration state</p>
    </div>

    <div class="gotcha-block">
      <h4>4. Deep Subagent Nesting (&gt;3 levels)</h4>
      <p><strong>Why:</strong> Context loss, coordination overhead, cost explosion</p>
    </div>

    <div class="gotcha-block">
      <h4>5. Claude-Mem + Very Short Sessions</h4>
      <p><strong>Why:</strong> Overhead exceeds benefit for quick tasks</p>
    </div>

    <div class="gotcha-block">
      <h4>6. Worktrees Without Merge Strategy</h4>
      <p><strong>Why:</strong> Features diverge, merge becomes nightmare</p>
    </div>

    <hr class="section-divider divider-checkpoint">

    <!-- Quick Start Commands -->
    <h2 id="quick-start"><span class="bionic">Qui</span>ck <span class="bionic">Sta</span>rt <span class="bionic">Com</span>mands</h2>

    <div class="code-block-wrapper">
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
      <pre><code># Basic observability
/plugin install claude-hud

# Memory persistence
/plugin marketplace add thedotmack/claude-mem
/plugin install claude-mem

# CC Mirror orchestration
npx cc-mirror quick --provider mirror --name mclaude

# Ralph loop
./ralph.sh 25

# Git worktree for parallel agent
git worktree add ../worktrees/feature-x feature-x-branch

# tmux agent manager (for multiple instances)
cargo install rpai && rpai</code></pre>
    </div>

    <!-- Checkpoint -->
    <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid var(--success); border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
      <div class="checkpoint-header" style="color: var(--success); font-weight: 600;">Checkpoint Complete</div>
      <p>You now have a <span class="bionic">vis</span>ual reference for all pattern combinations. <span class="bionic">Key</span> takeaways:</p>
      <ul>
        <li><span class="bionic">Gre</span>en cells (Documented/Synergistic) are safe to combine</li>
        <li><span class="bionic">Red</span> cells (Anti-pattern) should be avoided</li>
        <li><span class="bionic">Yel</span>low cells (Possible) require careful setup</li>
        <li><span class="bionic">Gra</span>y cells (Unexplored) are opportunities for innovation</li>
      </ul>
    </div>

    <!-- Related Pages -->
    <div class="related-pages">
      <h3><span class="bionic">Rel</span>ated <span class="bionic">Pag</span>es</h3>
      <ul>
        <li><a href="pairwise.html">Pairwise Analysis</a> - Deep dive into each combination</li>
        <li><a href="triple-plus.html">Triple+ Combinations</a> - Higher-order pattern stacks</li>
        <li><a href="unexplored.html">Unexplored Territory</a> - Theoretical combinations to try</li>
        <li><a href="extensions.html">Extensions as Composition</a> - Building blocks for combinations</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <div class="footer-nav">
      <a href="pairwise.html">Previous: Pairwise Analysis</a>
      <a href="triple-plus.html">Next: Triple+ Combinations</a>
    </div>
  </div>

  
  <script src="../js/copy-code.js"></script>
</body>
</html>
