<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="chapter" content="Infrastructure">
  <meta data-pagefind-meta="section" content="Infrastructure">
  <title>Mobile Cloud VM - Phone-First Development with Claude Code</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/search.css">
  <style>
    .bionic { font-weight: 700; }

    .you-are-here {
      background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%);
      border-left: 4px solid var(--accent);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .you-are-here h2 {
      margin-top: 0;
      font-size: 1.2rem;
      color: var(--accent);
    }

    .meta-box {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .meta-item strong {
      color: var(--heading);
    }

    .checkpoint {
      background: #f0ebe3;
      border-left: 4px solid var(--success);
      border-radius: 8px;
      padding: 1.5rem;
      margin: 2rem 0;
    }

    .checkpoint-header {
      color: var(--success);
      font-weight: 600;
      margin: 0 0 0.75rem 0;
      font-size: 1rem;
    }

    .checkpoint ul {
      margin-bottom: 0;
    }

    .troubleshoot {
      border: 1px solid var(--error);
      border-radius: 8px;
      margin: 1rem 0;
    }

    .troubleshoot summary {
      background: #fef6f5;
      padding: 1rem;
      cursor: pointer;
      color: var(--error);
      font-weight: 600;
    }

    .troubleshoot > div {
      padding: 1rem;
      background: white;
    }

    .milestone {
      background: linear-gradient(90deg, var(--success) 0%, var(--accent) 100%);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      text-align: center;
      margin: 2rem 0;
      font-weight: 600;
    }

    .ascii-diagram {
      background: var(--code-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1.5rem;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 0.8rem;
      line-height: 1.4;
      overflow-x: auto;
      white-space: pre;
      margin: 1.5rem 0;
    }

    .cost-table {
      width: 100%;
      margin: 1.5rem 0;
    }

    .cost-table th {
      background: var(--heading);
      color: white;
    }

    .component-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .component-card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
    }

    .component-card h4 {
      margin: 0 0 0.5rem 0;
      color: var(--accent);
      font-size: 0.95rem;
    }

    .component-card p {
      margin: 0;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .workflow-step {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
      padding: 1rem;
      background: var(--bg-secondary);
      border-radius: 8px;
    }

    .workflow-number {
      background: var(--accent);
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      flex-shrink: 0;
    }

    .workflow-content {
      flex: 1;
    }

    .workflow-content strong {
      color: var(--heading);
    }

    .output-example {
      background: var(--code-bg);
      border-left: 3px solid var(--success);
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 0 8px 8px 0;
      font-family: 'SF Mono', monospace;
      font-size: 0.85rem;
      white-space: pre-wrap;
      overflow-x: auto;
    }

    .quote-block {
      border-left: 4px solid var(--accent);
      padding: 1rem 1.5rem;
      background: var(--bg-secondary);
      margin: 1.5rem 0;
      border-radius: 0 8px 8px 0;
      font-style: italic;
    }

    .quote-author {
      font-style: normal;
      font-weight: 600;
      color: var(--heading);
      margin-top: 0.5rem;
    }

    .setup-section {
      background: white;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
    }

    .setup-section h4 {
      margin-top: 0;
      color: var(--heading);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin: 1rem 0;
    }

    .alternatives-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .alternative-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
    }

    .alternative-card h4 {
      margin: 0 0 0.5rem 0;
      color: var(--heading);
      font-size: 1rem;
    }

    .alternative-card .author {
      font-size: 0.85rem;
      color: var(--accent);
      margin-bottom: 0.5rem;
    }

    pre {
      position: relative;
    }

    .divider-procedure { border-top: 3px solid var(--accent); margin: 2.5rem 0; }
    .divider-checkpoint { border-top: 3px solid var(--success); margin: 2.5rem 0; }
    .divider-context { border-top: 3px solid var(--heading); margin: 2.5rem 0; }
  </style>
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">üîç</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="ch1">Chapter 1</button>
        <button class="filter-btn" data-filter="ch2">Chapter 2</button>
        <button class="filter-btn" data-filter="ch3">Chapter 3</button>
        <button class="filter-btn" data-filter="ch4">Chapter 4</button>
        <button class="filter-btn" data-filter="ref">Reference</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press ‚åòK anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>‚Üë‚Üì Navigate</span><span>‚Üµ Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">‚åòK</span>
    <span class="search-text">Search</span>
  </button>

  <div class="container">

    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="index.html">Infrastructure</a>
      <span>/</span>
      Mobile Cloud VM
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here">
      <h2>You Are Here</h2>
      <p>
        <strong><span class="bionic">Con</span>text:</strong> This guide covers <span class="bionic">Nad</span>er Dabit's approach to <span class="bionic">mob</span>ile-first development - running 6 parallel <span class="bionic">Cla</span>ude Code agents on a <span class="bionic">clo</span>ud VM, accessed entirely from your <span class="bionic">pho</span>ne via SSH with push <span class="bionic">not</span>ifications.
      </p>
      <p>
        <strong><span class="bionic">Par</span>adigm Shift:</strong> <em>"Instead of long periods of <span class="bionic">int</span>ense focus, software development can now just fit into the <span class="bionic">gap</span>s of your day."</em>
      </p>
      <div class="meta-box">
        <div class="meta-item">
          <strong>Prerequisites:</strong> Basic SSH knowledge, Anthropic API key
        </div>
        <div class="meta-item">
          <strong>Time to Read:</strong> 15-20 minutes
        </div>
        <div class="meta-item">
          <strong>Difficulty:</strong> Medium lift
        </div>
      </div>
    </div>

    <h1><span class="bionic">Mob</span>ile <span class="bionic">Clo</span>ud VM - <span class="bionic">Pho</span>ne-First <span class="bionic">Dev</span>elopment</h1>

    <!-- Source Attribution -->
    <div class="tag-row">
      <span class="tag">@dabit3 (Nader Dabit)</span>
      <span class="tag">DevRel at EigenCloud</span>
      <span class="tag">1.3K likes</span>
      <span class="tag">98K views</span>
      <span class="tag">1.7K bookmarks</span>
    </div>

    <p class="conversational-lead">
      Run <span class="bionic">mul</span>tiple Claude Code agents on a <strong>$7/day</strong> cloud VM, <span class="bionic">acc</span>essed via phone SSH with push <span class="bionic">not</span>ifications when Claude needs input - <strong>no laptop required</strong>.
    </p>

    <hr class="divider-context">

    <!-- Architecture Section -->
    <section id="architecture">
      <h2><span class="bionic">Arc</span>hitecture <span class="bionic">Ove</span>rview</h2>

      <p>
        The setup <span class="bionic">spl</span>its into two parts: your <span class="bionic">pho</span>ne (the controller) and a <span class="bionic">clo</span>ud VM (the workhorse). They connect via <span class="bionic">Tai</span>lscale VPN for <span class="bionic">sec</span>urity.
      </p>

      <div class="ascii-diagram">PHONE
+------------------------------------------------------+
|  Termius (SSH/mosh client)                           |
|  Tailscale VPN                                       |
|  Poke (push notifications)                           |
|  iOS Shortcuts (VM lifecycle)                        |
+------------------------------------------------------+
                         |
                  Tailscale VPN
                         |
                         v
CLOUD VM (Vultr vhf-8c-32gb, ~$7/day)
+------------------------------------------------------+
|  tmux (persistent sessions)                          |
|  6x Claude Code agents (parallel tmux windows)       |
|  Git worktrees (branch isolation)                    |
|  PreToolUse hook -> Poke webhook                     |
|  Security: nftables, fail2ban, no public SSH         |
+------------------------------------------------------+</div>

      <h3><span class="bionic">Com</span>ponent <span class="bionic">Bre</span>akdown</h3>

      <div class="component-grid">
        <div class="component-card">
          <h4>Termius</h4>
          <p>Mobile SSH/mosh client. Connects to your VM from anywhere.</p>
        </div>
        <div class="component-card">
          <h4>Tailscale</h4>
          <p>Zero-config VPN. No exposed ports, secure by default.</p>
        </div>
        <div class="component-card">
          <h4>Poke</h4>
          <p>Push notifications service. Alerts you when Claude needs input.</p>
        </div>
        <div class="component-card">
          <h4>tmux</h4>
          <p>Terminal multiplexer. Sessions persist even when disconnected.</p>
        </div>
        <div class="component-card">
          <h4>mosh</h4>
          <p>Mobile shell. Survives network transitions (WiFi to cellular).</p>
        </div>
        <div class="component-card">
          <h4>Git Worktrees</h4>
          <p>Separate directories per branch. Run parallel Claude agents.</p>
        </div>
      </div>

      <div class="callout callout-insight">
        <div class="callout-title">Why mosh over SSH?</div>
        <ul>
          <li><span class="bionic">Sur</span>vives WiFi to cellular transitions</li>
          <li><span class="bionic">Per</span>sists through device sleep</li>
          <li><span class="bionic">Net</span>work-resilient connection</li>
        </ul>
      </div>
    </section>

    <div class="checkpoint">
      <h4 class="checkpoint-header">Checkpoint: Understanding the Architecture</h4>
      <p>Before proceeding, you should understand:</p>
      <ul>
        <li>Your phone is just a <strong>controller</strong> - no code runs on it</li>
        <li>The cloud VM does <strong>all the work</strong> - Claude Code, git, builds</li>
        <li>Tailscale provides <strong>secure access</strong> without exposing ports</li>
        <li>Push notifications let you <strong>step away</strong> until needed</li>
      </ul>
    </div>

    <hr class="divider-procedure">

    <!-- Quick Start Section -->
    <section id="quick-start">
      <h2><span class="bionic">Qui</span>ck Start (<span class="bionic">Min</span>imal Version)</h2>

      <p>
        If you have a <span class="bionic">Mac</span> at home that's always on, you can skip the cloud VM and use it directly:
      </p>

      <div class="setup-section">
        <h4>Home Mac Setup (~30 minutes)</h4>

        <div class="workflow-step">
          <div class="workflow-number">1</div>
          <div class="workflow-content">
            <strong>Install Tailscale on phone + home Mac</strong>
            <p>Download from tailscale.com. Creates a secure network between devices.</p>
          </div>
        </div>

        <div class="workflow-step">
          <div class="workflow-number">2</div>
          <div class="workflow-content">
            <strong>Install Termius on phone</strong>
            <p>iOS App Store or Google Play. Free tier works fine.</p>
          </div>
        </div>

        <div class="workflow-step">
          <div class="workflow-number">3</div>
          <div class="workflow-content">
            <strong>Set up tmux on Mac</strong>
            <pre><code>brew install tmux
tmux new -s work</code></pre>
          </div>
        </div>

        <div class="workflow-step">
          <div class="workflow-number">4</div>
          <div class="workflow-content">
            <strong>SSH from phone via Tailscale IP</strong>
            <p>In Termius, add your Mac using its Tailscale IP (100.x.x.x).</p>
          </div>
        </div>

        <div class="workflow-step">
          <div class="workflow-number">5</div>
          <div class="workflow-content">
            <strong>Run Claude Code in tmux</strong>
            <pre><code>tmux attach -t work
cd your-project
claude</code></pre>
          </div>
        </div>

        <div class="workflow-step">
          <div class="workflow-number">6</div>
          <div class="workflow-content">
            <strong>Detach and reconnect anytime</strong>
            <p>Press <code>Ctrl+B, D</code> to detach. Session continues running.</p>
          </div>
        </div>
      </div>

      <div class="quote-block">
        "You just need Tailscale, Termius, tmux and a Mac that's always plugged in and lid open."
        <div class="quote-author">@randomor</div>
      </div>
    </section>

    <div class="checkpoint">
      <h4 class="checkpoint-header">Checkpoint: Quick Start Complete</h4>
      <p>You should now be able to:</p>
      <ul>
        <li>Connect to your Mac from your phone via Termius</li>
        <li>Attach to a tmux session with <code>tmux attach -t work</code></li>
        <li>Run Claude Code and detach without killing the session</li>
      </ul>
    </div>

    <hr class="divider-procedure">

    <!-- Full Cloud Setup -->
    <section id="full-setup">
      <h2><span class="bionic">Ful</span>l Cloud VM Setup</h2>

      <p>
        For the complete <span class="bionic">mob</span>ile-first experience with push <span class="bionic">not</span>ifications and multiple parallel agents, set up a <span class="bionic">clo</span>ud VM.
      </p>

      <h3>Step 1: <span class="bionic">Pro</span>vision Cloud VM</h3>

      <p>
        Nader uses <strong>Vultr</strong> with the <code>vhf-8c-32gb</code> plan (~$7/day). Any cloud provider works.
      </p>

      <table class="cost-table">
        <thead>
          <tr>
            <th>Setup</th>
            <th>Daily Cost</th>
            <th>Tradeoffs</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Cloud VM (Vultr)</td>
            <td>~$7</td>
            <td>Always available, isolated, scalable</td>
          </tr>
          <tr>
            <td>Home Mac</td>
            <td>$0</td>
            <td>Must stay powered, less isolated</td>
          </tr>
          <tr>
            <td>Home Laptop</td>
            <td>$0</td>
            <td>Must stay open, battery concerns</td>
          </tr>
        </tbody>
      </table>

      <div class="callout callout-warning">
        <div class="callout-title">Cost Warning</div>
        <p>VM costs add up if not stopped. ~$210/month if always running. Use <code>vm-start</code> and <code>vm-stop</code> scripts to control costs.</p>
      </div>

      <h3>Step 2: <span class="bionic">Con</span>figure Tailscale</h3>

      <p>Install Tailscale on the VM and your phone. This creates a secure network with no exposed ports.</p>

      <pre><code># On VM (Ubuntu/Debian)
curl -fsSL https://tailscale.com/install.sh | sh
sudo tailscale up

# Note the Tailscale IP (100.x.x.x)
tailscale ip -4</code></pre>

      <h3>Step 3: Set Up <span class="bionic">tmu</span>x Auto-Attach</h3>

      <p>Add to your <code>~/.zshrc</code> or <code>~/.bashrc</code> so you auto-attach on login:</p>

      <pre><code># Auto-attach to tmux on SSH login
if [[ -z "$TMUX" ]] && [ "$SSH_CONNECTION" != "" ]; then
    tmux attach-session -t work || tmux new-session -s work
fi</code></pre>

      <h3>Step 4: <span class="bionic">Con</span>figure Push Notifications</h3>

      <p>
        This is the magic. A <span class="bionic">Pre</span>ToolUse hook in <code>~/.claude/settings.json</code> triggers when Claude asks a question, sending a push notification to your phone.
      </p>

      <pre><code>{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "AskUserQuestion",
        "commands": [
          "bash -c 'curl -s -X POST https://api.poke.co/v1/push \\
            -H \"Authorization: Bearer YOUR_POKE_TOKEN\" \\
            -H \"Content-Type: application/json\" \\
            -d \"{\\\"title\\\": \\\"Claude needs input\\\", \\\"body\\\": \\\"$CLAUDE_TOOL_INPUT\\\"}\"'"
        ]
      }
    ]
  }
}</code></pre>

      <div class="callout callout-insight">
        <div class="callout-title">How It Works</div>
        <ul>
          <li><strong>Trigger:</strong> PreToolUse when Claude calls <code>AskUserQuestion</code></li>
          <li><strong>Action:</strong> Script extracts question, sends to Poke API via curl</li>
          <li><strong>Result:</strong> Phone buzzes with the question, you respond</li>
        </ul>
      </div>

      <h3>Step 5: <span class="bionic">VM</span> Lifecycle Scripts</h3>

      <p>Create scripts to start/stop your VM from anywhere (including iOS Shortcuts):</p>

      <pre><code># vm-start (using Vultr API)
#!/bin/bash
curl -s -X POST "https://api.vultr.com/v2/instances/YOUR_INSTANCE_ID/start" \
  -H "Authorization: Bearer YOUR_VULTR_API_KEY"
echo "VM starting... wait 45-60 seconds"

# vm-stop
#!/bin/bash
curl -s -X POST "https://api.vultr.com/v2/instances/YOUR_INSTANCE_ID/halt" \
  -H "Authorization: Bearer YOUR_VULTR_API_KEY"
echo "VM stopped"</code></pre>

      <h3>Step 6: <span class="bionic">Git</span> Worktrees for Parallelism</h3>

      <p>Each feature branch gets its own directory, Claude agent, and tmux window:</p>

      <pre><code># Create worktrees for parallel development
git worktree add ../project-auth feature/auth
git worktree add ../project-dashboard feature/dashboard
git worktree add ../project-api feature/api-refactor

# Each worktree runs in its own tmux window with its own Claude agent</code></pre>

      <div class="callout callout-insight">
        <div class="callout-title">Hash-Based Port Allocation</div>
        <p>Nader uses a hash of the branch name to generate unique ports, avoiding conflicts when running multiple dev servers.</p>
      </div>

      <h3>Step 7: <span class="bionic">Sec</span>urity Configuration</h3>

      <pre><code># Firewall - block all except Tailscale
sudo ufw default deny incoming
sudo ufw allow in on tailscale0
sudo ufw enable

# Install fail2ban for extra protection
sudo apt install fail2ban
sudo systemctl enable fail2ban</code></pre>

      <div class="callout callout-success">
        <div class="callout-title">Security Note</div>
        <p><strong>No public SSH</strong> - Tailscale only. This makes <span class="bionic">per</span>missive mode safe on an isolated VM.</p>
      </div>
    </section>

    <div class="checkpoint">
      <h4 class="checkpoint-header">Checkpoint: Full Setup Complete</h4>
      <p>You should now have:</p>
      <ul>
        <li>Cloud VM accessible via Tailscale IP</li>
        <li>tmux auto-attach configured in shell rc file</li>
        <li>Push notifications configured in <code>~/.claude/settings.json</code></li>
        <li>VM start/stop scripts ready</li>
        <li>Firewall blocking everything except Tailscale</li>
      </ul>
    </div>

    <hr class="divider-procedure">

    <!-- Daily Workflow -->
    <section id="workflow">
      <h2>The <span class="bionic">Dai</span>ly Workflow</h2>

      <p>
        Here's what <span class="bionic">mob</span>ile-first development actually looks like:
      </p>

      <div class="workflow-step">
        <div class="workflow-number">1</div>
        <div class="workflow-content">
          <strong>Start VM</strong> via iOS Shortcut
          <p>Tap the shortcut on your home screen. VM boots in 30-60 seconds.</p>
        </div>
      </div>

      <div class="workflow-step">
        <div class="workflow-number">2</div>
        <div class="workflow-content">
          <strong>Connect</strong> via Termius
          <p>Open Termius, tap your saved VM host. Auto-attaches to tmux.</p>
        </div>
      </div>

      <div class="workflow-step">
        <div class="workflow-number">3</div>
        <div class="workflow-content">
          <strong>Kick off agents</strong> on different feature branches
          <p>Each tmux window runs a separate Claude agent on a different worktree.</p>
        </div>
      </div>

      <div class="workflow-step">
        <div class="workflow-number">4</div>
        <div class="workflow-content">
          <strong>Go about your day</strong>
          <p>Close Termius. Agents keep working. Sessions persist in tmux.</p>
        </div>
      </div>

      <div class="workflow-step">
        <div class="workflow-number">5</div>
        <div class="workflow-content">
          <strong>Phone buzzes</strong> when agent needs input
          <p>Poke notification shows Claude's question. Open Termius to respond.</p>
        </div>
      </div>

      <div class="workflow-step">
        <div class="workflow-number">6</div>
        <div class="workflow-content">
          <strong>Respond and continue</strong>
          <p>Answer Claude's question. Agent continues working. Go back to your day.</p>
        </div>
      </div>

      <div class="workflow-step">
        <div class="workflow-number">7</div>
        <div class="workflow-content">
          <strong>Stop VM</strong> when done
          <p>Run <code>vm-stop</code> or tap iOS Shortcut. Save money.</p>
        </div>
      </div>

      <h3><span class="bionic">Wha</span>t You'll See</h3>

      <p>When you connect, tmux shows your running sessions:</p>

      <div class="output-example">tmux: session 'work' (6 windows)

Windows:
0: main (current)
1: auth-feature       <-- Claude agent on feature/auth branch
2: dashboard          <-- Claude agent on feature/dashboard
3: api-refactor       <-- Claude agent working
4: mobile-styles      <-- Claude agent idle
5: tests              <-- Claude agent running tests

dev@vm:~/project$ _</div>

      <p>When Claude needs input, your phone shows:</p>

      <div class="output-example">Poke Notification

auth-feature:
Claude needs input

"How should I handle token expiry?
 Option 1: Auto-refresh
 Option 2: Redirect to login"

[Open Termius]</div>

      <p>End of day, check your git log:</p>

      <div class="output-example">$ git log --all --oneline --since="8 hours ago"

abc1234 (auth) feat: JWT refresh with auto-refresh
def5678 (auth) fix: Token validation edge case
ghi9012 (dashboard) feat: Widget persistence
jkl3456 (dashboard) feat: Dark mode toggle
mno7890 (api) refactor: Error handling cleanup

5 commits across 3 features from your phone throughout the day!</div>
    </section>

    <div class="milestone">
      Workflow Guide Complete - Development now fits into the gaps of your day
    </div>

    <hr class="divider-checkpoint">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="bionic">Tro</span>ubleshooting</h2>

      <details class="troubleshoot">
        <summary>VM costs running up</summary>
        <div>
          <p><strong>Problem:</strong> Forgot to stop VM, now you have a $200 bill.</p>
          <p><strong>Solution:</strong> Set up billing alerts in your cloud provider. Create iOS Shortcut reminders to stop VM. Consider using spot/preemptible instances for lower costs.</p>
          <pre><code># Quick check: Is my VM running?
curl -s "https://api.vultr.com/v2/instances/YOUR_ID" \
  -H "Authorization: Bearer YOUR_KEY" | jq '.instance.power_status'</code></pre>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Notifications not arriving</summary>
        <div>
          <p><strong>Problem:</strong> Claude asks questions but phone doesn't buzz.</p>
          <p><strong>Solution:</strong> Check your Poke token is valid. Test the webhook manually:</p>
          <pre><code>curl -X POST https://api.poke.co/v1/push \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"title": "Test", "body": "This is a test"}'</code></pre>
          <p>Also check <code>~/.claude/settings.json</code> hook syntax.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Connection drops frequently</summary>
        <div>
          <p><strong>Problem:</strong> SSH keeps disconnecting.</p>
          <p><strong>Solution:</strong> Use mosh instead of SSH. It survives network transitions:</p>
          <pre><code># Install mosh on VM
sudo apt install mosh

# Connect via mosh (in Termius, select mosh protocol)
mosh user@100.x.x.x</code></pre>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Agents stuck waiting for hours</summary>
        <div>
          <p><strong>Problem:</strong> Checked phone late, Claude had been waiting all day.</p>
          <p><strong>Solution:</strong> This is expected if notifications don't reach you. Configure Claude to skip or assume defaults after timeout. Consider using <code>--continue</code> flag for less interactive sessions.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Port conflicts with multiple agents</summary>
        <div>
          <p><strong>Problem:</strong> Two dev servers trying to use same port.</p>
          <p><strong>Solution:</strong> Use hash-based port allocation based on branch name:</p>
          <pre><code># In your project config, derive port from branch name
PORT=$((8000 + $(echo $BRANCH | md5sum | cut -c1-4 | xargs -I{} printf "%d" 0x{}) % 1000))</code></pre>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Permissive mode security concerns</summary>
        <div>
          <p><strong>Problem:</strong> Worried about running Claude in permissive mode.</p>
          <p><strong>Solution:</strong> Permissive mode is safe on an isolated VM because:</p>
          <ul>
            <li>No public SSH - only accessible via Tailscale</li>
            <li>Cloud firewall + nftables + fail2ban</li>
            <li>VM contains no sensitive credentials (use env vars)</li>
            <li>Easy to destroy and recreate if needed</li>
          </ul>
        </div>
      </details>
    </section>

    <hr class="divider-context">

    <!-- Alternative Setups -->
    <section id="alternatives">
      <h2><span class="bionic">Alt</span>ernative Setups</h2>

      <p>Community members shared variations on the mobile workflow:</p>

      <div class="alternatives-grid">
        <div class="alternative-card">
          <h4>Mac-at-Home</h4>
          <div class="author">@randomor</div>
          <p>"You just need Tailscale, Termius, tmux and a Mac that's always plugged in and lid open."</p>
          <p><strong>Cost:</strong> $0/day. <strong>Tradeoff:</strong> Requires always-on Mac.</p>
        </div>

        <div class="alternative-card">
          <h4>Laptop Version</h4>
          <div class="author">@GabGarrett</div>
          <p>"Just leave your laptop open at home and use Tailscale to control Claude."</p>
          <p><strong>Cost:</strong> $0/day. <strong>Tradeoff:</strong> Battery, laptop must stay open.</p>
        </div>

        <div class="alternative-card">
          <h4>Superconductor App</h4>
          <div class="author">@sergeykarayev</div>
          <p>"Launched agents, went on a hike, checked in on my phone, tweaked code, and opened a PR from the trail."</p>
          <p>iOS app that orchestrates Claude Code, Codex, Amp, Opencode.</p>
        </div>

        <div class="alternative-card">
          <h4>Add Ralph on Top</h4>
          <div class="author">@ayvee_bera</div>
          <p>Layer orchestration tools like Ralph for automated iterations:</p>
          <pre><code>gh issue view 4
claude --resume SESSION_ID</code></pre>
        </div>
      </div>
    </section>

    <hr class="divider-context">

    <!-- Mental Model -->
    <section id="mental-model">
      <h2><span class="bionic">Men</span>tal Model</h2>

      <div class="quote-block">
        "View software development as an <strong>asynchronous, agent-orchestrated process</strong> that interleaves with life, rather than a <strong>synchronous, focused activity</strong> requiring dedicated hardware/time."
        <div class="quote-author">Nader Dabit</div>
      </div>

      <h3>Key <span class="bionic">Pri</span>nciples</h3>

      <ul>
        <li><strong><span class="bionic">Che</span>ap cloud for compute</strong> - Your phone is just a controller</li>
        <li><strong><span class="bionic">Per</span>sistence</span> (tmux, mosh)</strong> - Sessions survive disconnects</li>
        <li><strong><span class="bionic">Not</span>ifications for async</strong> - Human-in-loop without constant attention</li>
        <li><strong><span class="bionic">Iso</span>lation (worktrees)</strong> - Multiple parallel workstreams</li>
        <li><strong><span class="bionic">Sec</span>urity enables permissive</strong> - Isolated VM unlocks full Claude power</li>
      </ul>

      <div class="callout callout-insight">
        <div class="callout-title">Future Direction</div>
        <p>From @ryohhno: "Mobile code interfaces are going to become a large area of VC interest in 2026: 'code from your phone', 'voice memos to code', 'ssh into your terminal from your phone', kanban style drag-and-drop visual coding."</p>
        <p><strong>This is early innings of a paradigm shift.</strong></p>
      </div>
    </section>

    <div class="milestone">
      Mobile Cloud VM Guide Complete
    </div>

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="remote.html">Remote Mac Control (System)</a> - Alternative: Mac-as-API via Cloudflare tunnel</li>
        <li><a href="index.html">Infrastructure Index</a> - All infrastructure patterns</li>
        <li><a href="../patterns/orchestration/ralph-research.html">Ralph Pattern</a> - Layer orchestration on top of mobile setup</li>
        <li><a href="../patterns/mastery/context-management.html">Context Management</a> - Managing context across sessions</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <div class="footer-nav">
      <a href="index.html">Back to Infrastructure</a>
      <a href="remote.html">Next: Remote Mac Control</a>
    </div>

  </div>

  <script src="../js/copy-code.js"></script>
  <script src="../js/search.js"></script>
</body>
</html>
