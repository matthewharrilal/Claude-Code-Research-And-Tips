<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Technical">
  <title>Advanced Context Management - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <span>Technical</span>
      <span>/</span>
      <span>Advanced Context Management</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;">This document provides <strong>technical depth</strong> on context management - the single most important operational skill for Claude Code mastery. You already understand that context is finite. This document teaches you <strong>HOW</strong> to budget it, <strong>WHEN</strong> to reset, and <strong>WHY</strong> quality degrades at specific thresholds.</p>
    </div>

    <h1><span style="font-weight: 700;">Adv</span>anced Context Management: Technical Deep Dive</h1>

    <p class="conversational-lead">
      <span style="font-weight: 700;">Con</span>text is the constraint. Every optimization in this knowledge base ultimately addresses <strong>context window exhaustion</strong>.
    </p>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#quality-degradation">Quality Degradation Table</a> - Thresholds and symptoms</li>
        <li><a href="#60-percent-rule">The 60% Rule</a> - Why this specific threshold matters</li>
        <li><a href="#budget-allocation">Context Budget Allocation</a> - Enterprise-scale numbers</li>
        <li><a href="#management-strategies">Management Strategies</a> - /clear, thoughts/, three-layer</li>
        <li><a href="#context-recovery">Context Recovery</a> - After compaction, session handoff</li>
        <li><a href="#autonomous-duration">Autonomous Duration</a> - Effective working windows</li>
        <li><a href="#quick-reference">Quick Reference Card</a> - Commands and checklists</li>
        <li><a href="#troubleshooting">Troubleshooting</a> - Common problems and fixes</li>
      </ul>
    </div>

    <hr class="section-divider divider-context">

    <!-- Quality Degradation Section -->
    <section id="quality-degradation">
      <h2><span style="font-weight: 700;">Qua</span>lity Degradation Table</h2>

      <table class="comparison-table">
        <thead>
          <tr><th>Context Level</th><th>Quality</th><th>Recommendation</th><th>Warning Signs</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>&lt;40%</strong></td><td>Excellent</td><td>Ideal operating range</td><td>None</td></tr>
          <tr><td><strong>40-60%</strong></td><td>Good</td><td>Safe zone, normal operation</td><td>None</td></tr>
          <tr><td><strong>60-80%</strong></td><td>Degrading</td><td>Consider reset or /compact</td><td>Slight repetition, longer responses</td></tr>
          <tr><td><strong>&gt;80%</strong></td><td>Poor</td><td>Reset required immediately</td><td>Instructions ignored, contradictions</td></tr>
        </tbody>
      </table>

      <blockquote style="border-left: 3px solid #2a7d7d; padding-left: 1rem; margin: 1.5rem 0; font-style: italic; color: #5c4b3a;">
        "60% is not a suggestion - it's physics. Overflow the context and you'll overflow the quality."
        <cite style="display: block; margin-top: 0.5rem; font-size: 0.9em;">-- Ashley Ha, Humaine Interface Substack</cite>
      </blockquote>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- 60% Rule Section -->
    <section id="60-percent-rule">
      <h2><span style="font-weight: 700;">The</span> 60% Rule (VERIFIED)</h2>

      <h3>Why 60% Specifically?</h3>
      <p>The context window isn't just storage - it's <strong>working memory</strong>. Claude needs headroom for:</p>
      <ul>
        <li><strong>Reasoning:</strong> Planning the response structure</li>
        <li><strong>Generation:</strong> Producing the actual output</li>
        <li><strong>Self-correction:</strong> Re-reading and adjusting mid-response</li>
      </ul>
      <p>At 60% input utilization, approximately 40% remains for these operations. Push past this, and Claude begins cutting corners.</p>

      <h3>Calculation Example</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <pre style="margin: 0; overflow-x: auto;"><code>Total context window: 200K tokens
Effective capacity: ~100K tokens (quality threshold)
60% of effective: ~60K tokens input budget
Remaining for output: ~40K tokens</code></pre>
      </div>

      <h3>Quick Estimate Method</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Characters to tokens: divide by 4
wc -c CLAUDE.md
# Output: 12500 CLAUDE.md
# Estimate: 12500 / 4 = ~3,125 tokens</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Budget Allocation Section -->
    <section id="budget-allocation">
      <h2><span style="font-weight: 700;">Con</span>text Budget Allocation (Enterprise Scale)</h2>

      <h3>Shrivu Shankar's Production Numbers</h3>
      <p><strong>Source:</strong> Shrivu Shankar, part of a team consuming several billion tokens per month at enterprise scale.</p>

      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <pre style="margin: 0; overflow-x: auto;"><code>Baseline Context Budget:

Total Available: ~200K tokens (model maximum)
Effective for Quality Work: ~180K tokens
Baseline CLAUDE.md: ~20K tokens (~10% of budget)
Available for Session Work: ~160K tokens (80%)
Buffer/Safety: ~20K tokens (10%)</code></pre>
      </div>

      <div class="callout callout-insight">
        <div class="callout-title">The Critical Insight</div>
        <p style="margin-bottom: 0;">Shrivu's 13KB CLAUDE.md (approximately 3,250 words / ~4,300 tokens when including overhead) leaves <strong>90% of context available for actual work</strong>. Most users make the opposite mistake - bloated CLAUDE.md files that consume 30-50% of context before any work begins.</p>
      </div>

      <h3>Recommended Allocation</h3>
      <div class="ascii-diagram">
CONTEXT BUDGET ALLOCATION (180K effective tokens)

+-- System prompt + CLAUDE.md:        ~10-15K (5-8%)   <-- Keep lean
+-- Codebase context (files read):    ~30-40K (15-20%)
+-- Current task specification:       ~5K (2-3%)
+-- Working memory (conversation):    ~50-60K (25-30%)
+-- Tool outputs (tests, diffs):      ~30-40K (15-20%)
+-- Code generation output:           ~25-30K (12-15%)
+-- Buffer for retries:               ~15-20K (8-10%)  <-- Emergency
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Management Strategies Section -->
    <section id="management-strategies">
      <h2><span style="font-weight: 700;">Man</span>agement Strategies</h2>

      <h3>Strategy 1: The /clear Habit</h3>
      <p><strong>Pattern:</strong> Use /clear between distinct tasks to prevent context pollution.</p>

      <p><strong>When to use /clear:</strong></p>
      <ul>
        <li>After completing a feature or bug fix</li>
        <li>Before starting a new, unrelated task</li>
        <li>When you notice any context rot symptoms</li>
        <li>After debugging sessions (error messages accumulate)</li>
      </ul>

      <h4>The /clear + /catchup Pattern (Shrivu Shankar)</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Simple restart (preferred over /compact)
/clear
/catchup  # Reads git-changed files automatically

# Why this works:
# - /clear gives predictable, complete reset
# - /catchup restores only relevant context
# - No lossy compression like /compact</code></pre>
      </div>

      <div class="callout callout-warning">
        <div class="callout-title">Warning: Avoid /compact for resets</div>
        <p style="margin-bottom: 0;">Shrivu specifically avoids /compact - it's opaque and error-prone. Use /clear + /catchup instead for predictable context management. /compact performs lossy compression. Details get summarized.</p>
      </div>

      <h3>Strategy 2: The thoughts/ Directory Pattern</h3>
      <p><strong>Source:</strong> Ashley Ha, Humaine Interface</p>
      <p><strong>Purpose:</strong> Externalize Claude's reasoning to persist across sessions.</p>

      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <pre style="margin: 0; overflow-x: auto;"><code>project/
+-- thoughts/
|   +-- README.md              # Directory purpose
|   +-- research-[task].md     # Phase 1: Investigation
|   +-- plan-[task].md         # Phase 2: Strategy
|   +-- progress-[task].md     # Phase 3: Running log
|   +-- complete-[task].md     # Phase 4: Summary
|   +-- decisions/             # Architectural decisions
|   |   +-- 001-database.md
|   |   +-- 002-auth-flow.md
|   +-- debug/                 # Debug session logs
|       +-- 2026-01-13-memory-leak.md
+-- src/</code></pre>
      </div>

      <p><strong>Why This Works:</strong> Each new Claude session starts fresh - no memory of previous conversations. Without external state, all reasoning is lost. The thoughts/ directory acts as Claude's long-term memory: queryable, persistent, version-controlled.</p>

      <h4>Implementation: Add to your CLAUDE.md</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>## Thinking Directory
When working on complex tasks:
1. Read relevant thoughts/* files for context
2. Update progress files during work
3. Create new files for new investigations

Never delete thoughts files - they are institutional memory.</code></pre>
      </div>

      <h3>Strategy 3: Three-Layer Context Architecture</h3>
      <p><strong>Source:</strong> Shrivu Shankar's enterprise workflow</p>

      <div class="ascii-diagram">
+---------------------------------------------------------------------+
| LAYER 1: GLOBAL (CLAUDE.md)                                          |
|----------------------------------------------------------------------|
| * Repository constitution (conventions, commands)                    |
| * Tool documentation (30%+ usage threshold only)                     |
| * Known gotchas and guardrails                                       |
| * Budget: ~10% of context (~20K tokens max)                          |
| * Lifetime: Permanent (checked into git)                             |
+---------------------------------------------------------------------+
| LAYER 2: PROJECT (Session-specific)                                  |
|----------------------------------------------------------------------|
| * Current feature/PR context                                         |
| * Loaded via /add-dir or file reads                                  |
| * Task-specific documentation                                        |
| * Budget: ~30-40% of context                                         |
| * Lifetime: Disposable per session                                   |
+---------------------------------------------------------------------+
| LAYER 3: SESSION (Conversation memory)                               |
|----------------------------------------------------------------------|
| * Current conversation state                                         |
| * File reads, tool outputs, responses                                |
| * Most volatile layer                                                |
| * Compactable via /clear + /catchup                                  |
| * Lifetime: Single session                                           |
+---------------------------------------------------------------------+
      </div>

      <p><strong>Key Insight:</strong> Layer 1 (CLAUDE.md) is the only layer that persists. Everything else must be reconstructed from external state (git, files, progress logs).</p>

      <!-- Checkpoint -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Context Budget Mastery</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>The 60% rule and why it matters (working memory headroom)</li>
          <li>Three-layer context architecture (Global, Project, Session)</li>
          <li>How to calculate your effective token budget</li>
          <li>When and why to use /clear + /catchup vs /compact</li>
        </ul>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Context Recovery Section -->
    <section id="context-recovery">
      <h2><span style="font-weight: 700;">Con</span>text Recovery</h2>

      <h3>After Compaction</h3>
      <p>When /compact has been used (or auto-triggered):</p>

      <ol>
        <li><strong>Verify critical context remains:</strong>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code>"What does CLAUDE.md say about our test conventions?"
"What task were we working on?"
"What files have we modified?"</code></pre>
          </div>
        </li>
        <li><strong>Re-inject if lost:</strong>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code>"Read CLAUDE.md and the current file structure."
"Check git status and git log -5 for recent work."</code></pre>
          </div>
        </li>
        <li><strong>Externalize before future compacts:</strong>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code>"Write all critical decisions and current state to thoughts/progress-[task].md"</code></pre>
          </div>
        </li>
      </ol>

      <h3>Session Handoff</h3>
      <p>When starting a new session to continue previous work:</p>

      <h4>Minimum Recovery Protocol</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># In Claude Code:
1. Read CLAUDE.md
2. git status
3. git log --oneline -10
4. Read thoughts/progress-[task].md (if exists)
5. Read relevant source files</code></pre>
      </div>

      <h4>Prompt for Session Handoff</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>Continue from where we left off.
1. Check git log and git status for recent work
2. Read thoughts/progress-*.md for context
3. Tell me what state we're in before making changes</code></pre>
      </div>

      <!-- Checkpoint -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Recovery Protocols</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>How to recover from compaction (verify critical context, re-inject if lost)</li>
          <li>Session handoff protocol (git status, log, progress files)</li>
          <li>When to use CLAUDE.md checkpoints for long-running work</li>
        </ul>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Autonomous Duration Section -->
    <section id="autonomous-duration">
      <h2><span style="font-weight: 700;">Aut</span>onomous Duration</h2>

      <h3>Effective Working Windows</h3>
      <p>Without the Ralph pattern or similar fresh-context loops, a single Claude session has practical limits:</p>

      <table class="comparison-table">
        <thead>
          <tr><th>Duration</th><th>Context Status</th><th>Quality</th><th>Recommendation</th></tr>
        </thead>
        <tbody>
          <tr><td>0-15 min</td><td>Fresh</td><td>Excellent</td><td>Peak productivity</td></tr>
          <tr><td>15-30 min</td><td>Filling</td><td>Good</td><td>Monitor context %</td></tr>
          <tr><td>30-60 min</td><td>Accumulated</td><td>Degrading</td><td>Plan checkpoint</td></tr>
          <tr><td>60+ min</td><td>Saturated</td><td>Poor</td><td>Reset required</td></tr>
        </tbody>
      </table>

      <p><strong>Note:</strong> These are rough guidelines. Actual duration depends heavily on task complexity, file reads, tool output volume, and debugging loops.</p>

      <h3>Why Quality Degrades Over Time</h3>
      <ol>
        <li><strong>Context accumulation:</strong> Every file read, tool output, and response adds tokens</li>
        <li><strong>Compression artifacts:</strong> Auto-compaction loses detail progressively</li>
        <li><strong>Attention dilution:</strong> Model attention spreads across more content</li>
        <li><strong>Instruction drift:</strong> Early instructions (CLAUDE.md) get "pushed out"</li>
      </ol>

      <h3>When to Reset</h3>
      <p><strong>Proactive resets (before symptoms):</strong></p>
      <ul>
        <li>Context reaches 60-70%</li>
        <li>After completing a logical milestone</li>
        <li>Before starting a new task type</li>
        <li>After any debugging session</li>
      </ul>

      <p><strong>Reactive resets (after symptoms appear):</strong></p>
      <ul>
        <li>Claude repeating earlier statements</li>
        <li>Instructions being ignored</li>
        <li>Contradictory responses</li>
        <li>Hallucinated file references</li>
      </ul>

      <div class="callout callout-insight">
        <div class="callout-title">The Ralph Pattern Solution</div>
        <p>For sustained autonomous work (hours to days), use fresh context per iteration:</p>
        <div class="code-block" style="background: #fefcf3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <pre style="margin: 0;"><code># Each iteration is a NEW Claude instance
# No context accumulation between iterations
# State persists in files, not conversation</code></pre>
        </div>
        <p style="margin-bottom: 0;">See: <a href="mastery-ralph-complete.html">Ralph Complete</a> for full pattern documentation.</p>
      </div>
    </section>

    <hr class="section-divider divider-checkpoint">

    <!-- Quick Reference Section -->
    <section id="quick-reference">
      <h2><span style="font-weight: 700;">Qui</span>ck Reference Card</h2>

      <h3>Context Thresholds</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <pre style="margin: 0; overflow-x: auto;"><code>&lt;40%   --> Excellent (ideal)
40-60% --> Good (normal operation)
60-80% --> Degrading (consider reset)
&gt;80%   --> Poor (reset now)</code></pre>
      </div>

      <h3>Recovery Commands</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>/clear               # Complete context reset
/catchup            # Reload git-changed files
/context            # Check current usage
/compact            # Lossy compression (avoid for resets)</code></pre>
      </div>

      <h3>Session Start Checklist</h3>
      <ol>
        <li>Read CLAUDE.md</li>
        <li>Check git status</li>
        <li>Check git log -5</li>
        <li>Read progress files if continuing work</li>
        <li>Verify context % before heavy work</li>
      </ol>

      <h3>Pre-Reset Checklist</h3>
      <ol>
        <li>Externalize critical state to files</li>
        <li>Commit any pending changes</li>
        <li>Update progress log</li>
        <li>Note what to resume with</li>
      </ol>

      <!-- Milestone -->
      <div class="milestone" style="background: linear-gradient(90deg, #6b9b7a 0%, #2a7d7d 100%); color: white; padding: 1rem 1.5rem; border-radius: 8px; text-align: center; margin: 2rem 0;">
        The 60% rule is physics, not a suggestion. Monitor context, reset proactively.
      </div>
    </section>

    <hr class="section-divider divider-warning">

    <!-- Troubleshooting Section -->
    <section id="troubleshooting">
      <h2><span style="font-weight: 700;">Tro</span>ubleshooting</h2>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Context fills too quickly</summary>
        <div style="padding: 1rem;">
          <p><strong>Causes:</strong></p>
          <ul>
            <li>Large CLAUDE.md (&gt;15KB)</li>
            <li>Reading many/large files</li>
            <li>Verbose tool output (test failures)</li>
            <li>Debugging loops</li>
          </ul>
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Audit CLAUDE.md size: <code>wc -c CLAUDE.md</code> (target &lt;15KB)</li>
            <li>Use .claudeignore aggressively</li>
            <li>Read specific files, not entire directories</li>
            <li>Start fresh sessions after debugging</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Quality degraded but context shows &lt;60%</summary>
        <div style="padding: 1rem;">
          <p><strong>Causes:</strong></p>
          <ul>
            <li>Context measurement includes system overhead</li>
            <li>Recent compaction lost critical detail</li>
            <li>Instruction drift from conversation length</li>
          </ul>
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Check actual conversation turn count</li>
            <li>Re-read CLAUDE.md explicitly</li>
            <li>Start fresh session (safest)</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Lost track of project state</summary>
        <div style="padding: 1rem;">
          <p><strong>Recovery:</strong></p>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code># Reconstruct from git
git log --oneline -20
git status
git diff HEAD

# Check file-based state
cat thoughts/progress-*.md
cat plans/prd.json (if using Ralph)

# Fresh start with context
exit
claude
"Read git log, progress files, and CLAUDE.md to understand current state"</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Attribution Section -->
    <section>
      <h2><span style="font-weight: 700;">Pra</span>ctitioner Attribution</h2>

      <table class="comparison-table">
        <thead>
          <tr><th>Insight</th><th>Practitioner</th><th>Source</th></tr>
        </thead>
        <tbody>
          <tr><td>60% context rule</td><td>Ashley Ha</td><td>Humaine Interface Substack</td></tr>
          <tr><td>~20K baseline budget</td><td>Shrivu Shankar</td><td>blog.sshh.io</td></tr>
          <tr><td>/clear + /catchup pattern</td><td>Shrivu Shankar</td><td>blog.sshh.io</td></tr>
          <tr><td>Three-layer context</td><td>Shrivu Shankar</td><td>blog.sshh.io</td></tr>
          <tr><td>thoughts/ directory</td><td>Ashley Ha</td><td>Humaine Interface Substack</td></tr>
          <tr><td>Context rot symptoms</td><td>Matt Pocock</td><td>@mattpocockuk</td></tr>
          <tr><td>Ralph fresh-context</td><td>Ryan Carson / Matt Pocock</td><td>ghuntley.com/ralph/</td></tr>
        </tbody>
      </table>
    </section>

    <!-- Related Pages -->
    <div class="related-pages" style="margin-top: 2rem; padding: 1rem; background: #f9f6f0; border-radius: 8px;">
      <h4 style="margin-top: 0;">Related Documents</h4>
      <ul>
        <li><a href="mastery-ralph-complete.html">Ralph Complete</a> - Fresh context per iteration pattern</li>
        <li><a href="mastery-context-management.html">Context Management Mastery</a> - Full context management guide</li>
        <li><a href="principles-anti-patterns.html">Anti-Patterns</a> - What NOT to do</li>
      </ul>
      <h4>Key Practitioners</h4>
      <ul>
        <li>Ashley Ha - 60% rule originator</li>
        <li>Shrivu Shankar - Enterprise scale patterns</li>
        <li>Matt Pocock - Context rot awareness</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <div class="footer-nav" style="display: flex; justify-content: space-between; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #e0d5c5;">
      <a href="reference-cost-economics.html">Prev: Cost Economics</a>
      <a href="technical-subagent-spawning-best-practices.html">Next: Subagent Spawning</a>
    </div>

  </div>

  <script src="../js/copy-code.js"></script>
  <script src="../js/search.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      setTimeout(() => button.textContent = 'Copy', 2000);
    }
  </script>
<script src="../js/global-nav.js"></script>
</body>
</html>
