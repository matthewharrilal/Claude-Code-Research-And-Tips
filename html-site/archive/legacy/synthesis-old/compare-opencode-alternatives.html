<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Comparisons">
  <title>Claude Code Alternatives: OpenCode and RPAI - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
        <button class="filter-btn" data-filter="journeys">Journeys</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="compare-master.html">Comparisons</a>
      <span>/</span>
      <span>OpenCode Alternatives</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0.5rem;"><strong><span class="b">Clau</span>de Code <span class="b">Alt</span>ernatives</strong> - Comprehensive analysis of Claude Code alternatives, focusing on OpenCode for provider flexibility and RPAI for multi-agent visibility.</p>
      <div class="ascii-diagram" style="font-size: 0.85em; margin-top: 1rem;">
AI CODING AGENT ECOSYSTEM

+-------------------------------------------------------+
|                  Proprietary CLI Tools                 |
|  Claude Code (Anthropic)  <- The benchmark             |
|  GitHub Copilot CLI       <- GitHub ecosystem          |
|  Cursor                   <- IDE-first approach        |
+-------------------------------------------------------+
                           |
                           v
+-------------------------------------------------------+
|             Open Source Alternatives  <- YOU ARE HERE  |
|  OpenCode (SST)     <- Provider-agnostic, 75+ models   |
|  Aider              <- Git-native, conversation-based  |
|  Continue           <- IDE extension focused           |
+-------------------------------------------------------+
                           |
                           v
+-------------------------------------------------------+
|            Visibility & Coordination Layer             |
|  RPAI (tmux TUI)    <- Multi-agent dashboard           |
|  Claude HUD         <- Log visualization               |
|  Custom dashboards  <- Prometheus/Grafana integrations |
+-------------------------------------------------------+</div>
    </div>

    <h1><span class="b">Clau</span>de Code <span class="b">Alt</span>ernatives</h1>
    <p style="font-size: 1.1em; color: #5c4b3a;"><strong>OpenCode and RPAI Comparison</strong></p>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#executive-summary">Executive Summary</a></li>
        <li><a href="#opencode">Part 1: OpenCode as Claude Code Alternative</a></li>
        <li><a href="#rpai">Part 2: RPAI - Multi-Agent Visibility Layer</a></li>
        <li><a href="#feature-comparison">Part 3: Feature Comparison Matrix</a></li>
        <li><a href="#when-to-use">Part 4: When to Use Each Tool</a></li>
        <li><a href="#integration-patterns">Part 5: Integration Patterns</a></li>
        <li><a href="#mental-models">Mental Models</a></li>
        <li><a href="#checkpoints">Checkpoints</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- Executive Summary -->
    <section id="executive-summary">
      <h2><span class="b">Exec</span>utive <span class="b">Sum</span>mary</h2>

      <h3>The Landscape</h3>
      <p><strong>Claude Code</strong> is the benchmark - optimized specifically for Claude models with features like checkpoints, intelligent subagent parallelism, and tight Anthropic integration. But it creates dependency on a single provider.</p>

      <p><strong>OpenCode</strong> breaks this dependency, offering:</p>
      <ul>
        <li><strong>75+</strong> LLM providers (including local models via Ollama)</li>
        <li><strong>Open source</strong> (MIT license)</li>
        <li><strong>Native</strong> multi-session support</li>
        <li><strong>$0</strong> tool cost (API-only pricing)</li>
      </ul>

      <p><strong>RPAI</strong> complements both by solving visibility:</p>
      <ul>
        <li><strong>See</strong> all running agents at a glance</li>
        <li><strong>Detect</strong> idle vs. active state</li>
        <li><strong>Jump</strong> between sessions instantly</li>
      </ul>

      <h3>Quick Decision Matrix</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Scenario</th><th>Recommended Tool</th><th>Why</th></tr>
          </thead>
          <tbody>
            <tr><td>Claude-only, want best integration</td><td><strong>Claude Code</strong></td><td>Native optimization</td></tr>
            <tr><td>Cost optimization across providers</td><td><strong>OpenCode</strong></td><td>Provider flexibility</td></tr>
            <tr><td>Privacy/local execution required</td><td><strong>OpenCode + Ollama</strong></td><td>No external API</td></tr>
            <tr><td>Running 3+ parallel agents</td><td><strong>RPAI</strong></td><td>Visibility layer</td></tr>
            <tr><td>Open source philosophy</td><td><strong>OpenCode</strong></td><td>MIT licensed</td></tr>
            <tr><td>Enterprise Anthropic agreement</td><td><strong>Claude Code</strong></td><td>Ecosystem alignment</td></tr>
            <tr><td>Multi-provider orchestration</td><td><strong>OpenCode</strong></td><td>Different models per task</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- OpenCode -->
    <section id="opencode">
      <h2><span class="b">Part</span> 1: <span class="b">Open</span>Code as Claude Code Alternative</h2>

      <h3>What OpenCode Is</h3>
      <blockquote>
        <p>OpenCode is an open-source, provider-agnostic AI coding agent built for the terminal, supporting 75+ LLM providers including local models.</p>
      </blockquote>

      <p><strong>Core Philosophy: Bring Your Own Key (BYOK)</strong></p>
      <div class="ascii-diagram">
Traditional SaaS Model:
  You rent -> They own -> They control

OpenCode Philosophy:
  You download -> You own -> You control

This means:
  +-- Your workflow survives provider changes
  +-- Your data stays local (with Ollama)
  +-- Your customizations persist
  +-- Your investment compounds</div>

      <h3>Architecture Deep Dive</h3>
      <p>Client/Server Design (unlike Claude Code's monolithic CLI):</p>
      <div class="ascii-diagram">
OPENCODE ARCHITECTURE

+-------------------+        +---------------------------------------+
|     Clients       |        |             Core Server               |
|                   |        |                                       |
|   - Terminal TUI  |  <-->  |   - Agent Orchestration              |
|   - Desktop App   |        |   - Provider Management              |
|   - IDE Extension |        |   - Tool Registry                    |
|   - Web Interface |        |   - Session State                    |
|   - Mobile*       |        |   - MCP Integration                  |
+-------------------+        +---------------------------------------+
         |                                     |
         v                                     v
+-------------------+        +---------------------------------------+
|   Local UI        |        |          Provider Layer               |
|   Rendering       |        |                                       |
+-------------------+        |   - Anthropic (Claude)                |
                             |   - OpenAI (GPT)                      |
                             |   - Google (Gemini)                   |
                             |   - Ollama (Local)                    |
                             |   - 70+ more via AI SDK               |
                             +---------------------------------------+

* Mobile in development</div>

      <p><strong>Benefits of this architecture:</strong></p>
      <ul>
        <li><strong>Remote Execution</strong> - Run server in Docker/cloud, attach from anywhere</li>
        <li><strong>Workspaces</strong> - Sessions persist even when you close your laptop</li>
        <li><strong>Multi-Client</strong> - Different interfaces for different contexts</li>
        <li><strong>Headless Mode</strong> - API server for automation/scripting</li>
      </ul>

      <h3>Agent System Comparison</h3>
      <p><strong>Primary Agents</strong> (cycle with Tab):</p>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Agent</th><th>Purpose</th><th>Default Tools</th><th>Claude Code Equivalent</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>build</strong></td><td>Full development</td><td>All tools enabled</td><td>Default mode</td></tr>
            <tr><td><strong>plan</strong></td><td>Analysis only</td><td>Read-only, asks before bash</td><td>Task tool with constraints</td></tr>
          </tbody>
        </table>
      </div>

      <p><strong>Subagents</strong> (invoke with @):</p>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Subagent</th><th>Purpose</th><th>Access Level</th><th>Claude Code Equivalent</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>@general</strong></td><td>Complex multi-step</td><td>Full tools</td><td>Task tool (subagent type)</td></tr>
            <tr><td><strong>@explore</strong></td><td>Codebase discovery</td><td>Read-only</td><td>Grep/Glob operations</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Tool System Comparison</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Tool</th><th>OpenCode</th><th>Claude Code</th><th>Notes</th></tr>
          </thead>
          <tbody>
            <tr><td><code>read</code></td><td>Yes</td><td>Read</td><td>Equivalent</td></tr>
            <tr><td><code>write</code></td><td>Yes</td><td>Write</td><td>Equivalent</td></tr>
            <tr><td><code>edit</code></td><td>Yes</td><td>Edit</td><td>String replacement</td></tr>
            <tr><td><code>patch</code></td><td>Yes</td><td>-</td><td><strong>OpenCode advantage</strong></td></tr>
            <tr><td><code>grep</code></td><td>Yes</td><td>Grep</td><td>Equivalent</td></tr>
            <tr><td><code>lsp</code></td><td>Yes</td><td>-</td><td><strong>OpenCode advantage</strong> - Language Server integration</td></tr>
            <tr><td><code>bash</code></td><td>Yes</td><td>Bash</td><td>Equivalent</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Key Feature 1: Multi-Provider Support</h3>
      <p>The killer feature. Configure any combination of providers:</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "providers": {
    "anthropic": {
      "apiKey": "{env:ANTHROPIC_API_KEY}"
    },
    "openai": {
      "apiKey": "{env:OPENAI_API_KEY}"
    },
    "google": {
      "apiKey": "{env:GOOGLE_GENERATIVE_AI_API_KEY}"
    },
    "ollama": {
      "baseURL": "http://localhost:11434"
    }
  }
}</code></pre>
      </div>

      <p><strong>Practical Application - Different Models for Different Tasks:</strong></p>
      <div class="ascii-diagram">
Task Matching Matrix:
+-- Complex reasoning       ->  Claude Opus / GPT-5
+-- Fast iteration          ->  Claude Haiku / GPT-4o-mini
+-- Code generation         ->  Codex / Code-specialized
+-- Private work            ->  Ollama / Local
+-- Cost-sensitive tasks    ->  Cheapest capable model

OpenCode enables this matching.
Claude Code forces single-provider.</div>

      <h3>Installation and Setup</h3>
      <h4>Quick Install</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># macOS/Linux
curl -fsSL https://opencode.ai/install | bash

# npm (cross-platform)
npm install -g opencode-ai@latest

# Homebrew (macOS)
brew install opencode

# Windows (Scoop)
scoop install opencode</code></pre>
      </div>

      <h4>Core Configuration Example</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>// opencode.json (supports JSONC - comments allowed)
{
  // Primary model (format: provider/model)
  "model": "anthropic/claude-sonnet-4",

  // Lightweight model for titles, summaries
  "small_model": "anthropic/claude-haiku",

  // Theme selection
  "theme": "catppuccin-mocha",

  // Tool permissions
  "permission": {
    "edit": "ask",      // ask, allow, deny
    "bash": "ask",
    "write": "allow"
  },

  // Custom instructions file
  "instructions": ".opencode/INSTRUCTIONS.md",

  // Context management
  "compaction": "auto"  // auto, prune, or false
}</code></pre>
      </div>
    </section>

    <hr class="section-divider">

    <!-- RPAI -->
    <section id="rpai">
      <h2><span class="b">Part</span> 2: <span class="b">RP</span>AI - Multi-Agent Visibility Layer</h2>

      <h3>What RPAI Is</h3>
      <p><strong>RPAI</strong> (Rust Process AI) is a terminal user interface that:</p>
      <ol>
        <li><strong>Scans</strong> for running AI coding agents (Claude, OpenCode, Codex, Cursor, Gemini)</li>
        <li><strong>Displays</strong> their status, resource usage, and location in tmux</li>
        <li><strong>Enables</strong> instant navigation between agent sessions</li>
        <li><strong>Shows</strong> real-time activity state (running vs. idle)</li>
      </ol>
      <p>Think of it as a "process monitor + session switcher" purpose-built for AI-assisted development workflows.</p>

      <h3>The Problem RPAI Solves</h3>
      <div class="ascii-diagram">
Without RPAI:
+-----------------------------------------------------------------------------+
| Terminal 1: Claude working on auth feature...                                |
| Terminal 2: Claude refactoring database layer...                             |
| Terminal 3: Claude writing tests...                                          |
| Terminal 4: Claude reviewing PR...                                           |
|                                                                              |
| You: "Which one finished? Which needs attention?"                            |
|      *frantically switching between windows*                                 |
+-----------------------------------------------------------------------------+

With RPAI:
+-----------------------------------------------------------------------------+
|  RPAI Session Manager                                                        |
|  --------------------                                                        |
|  > claude  ~/project/auth      CPU: 45%  MEM: 2.1G                          |
|  @ claude  ~/project/db        CPU: 0.5% MEM: 1.8G  <- Idle! Needs input    |
|  > claude  ~/project/tests     CPU: 38%  MEM: 2.0G                          |
|  @ claude  ~/project/review    CPU: 0.2% MEM: 1.5G  <- Idle! Review done    |
|                                                                              |
|  [Enter: Jump] [j/k: Navigate] [q: Quit]                                    |
+-----------------------------------------------------------------------------+</div>

      <h3>When RPAI Matters</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Pattern</th><th>Agent Count</th><th>Visibility Need</th></tr>
          </thead>
          <tbody>
            <tr><td>Single Claude Code</td><td>1</td><td>None</td></tr>
            <tr><td>Ralph Wiggum Loop</td><td>1-3</td><td>Low (sequential)</td></tr>
            <tr><td>Parallel Ralph</td><td>3-6</td><td><strong>High</strong></td></tr>
            <tr><td>Gas Town</td><td>5-10+</td><td><strong>Critical</strong></td></tr>
            <tr><td>Personal Panopticon</td><td>8+</td><td><strong>Essential</strong></td></tr>
          </tbody>
        </table>
      </div>

      <h3>The Killer Feature: Idle Detection</h3>
      <p>RPAI's most valuable feature is distinguishing active from idle agents:</p>
      <div class="ascii-diagram">
Agent States:
> Running (CPU > 3%): Claude is thinking/working
@ Waiting (CPU < 3%): Claude finished, awaiting your input

Your Attention Model:
  Running agents -> Low priority (check occasionally)
  Waiting agents -> High priority (they need input)

Invert your attention: spend time on idle agents, not running ones.</div>

      <h3>Installation and Setup</h3>
      <h4>Installation</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Recommended: via Cargo
cargo install rpai

# Or build from source
git clone https://github.com/radoslav11/rpai.git
cd rpai
./install.sh</code></pre>
      </div>

      <h4>Critical: tmux Integration</h4>
      <p>Add to <code>~/.tmux.conf</code>:</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Bind prefix + a to open RPAI in popup
bind-key a display-popup -E "rpai"</code></pre>
      </div>
      <p>Reload tmux config:</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>tmux source ~/.tmux.conf</code></pre>
      </div>
      <p>Now <code>prefix + a</code> opens RPAI in a centered popup overlay.</p>

      <h4>Configuration</h4>
      <p>Configuration file: <code>~/.config/rpai/config.json</code></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "theme": "gruvbox",
  "idle_threshold": 3.0,
  "refresh_ms": 50,
  "ascii_symbols": false
}</code></pre>
      </div>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr>
          </thead>
          <tbody>
            <tr><td><code>theme</code></td><td>string</td><td>"gruvbox"</td><td>Color scheme</td></tr>
            <tr><td><code>idle_threshold</code></td><td>float</td><td>3.0</td><td>CPU% below which agent is "waiting"</td></tr>
            <tr><td><code>refresh_ms</code></td><td>integer</td><td>50</td><td>TUI refresh interval in milliseconds</td></tr>
            <tr><td><code>ascii_symbols</code></td><td>boolean</td><td>false</td><td>Use ASCII instead of Unicode symbols</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Feature Comparison -->
    <section id="feature-comparison">
      <h2><span class="b">Part</span> 3: <span class="b">Fea</span>ture Comparison Matrix</h2>

      <h3>Core Capabilities</h3>
      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr><th>Feature</th><th>Claude Code</th><th>OpenCode</th><th>RPAI</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Terminal UI</strong></td><td>Yes</td><td>Yes</td><td>Yes</td></tr>
            <tr><td><strong>File operations</strong></td><td>Yes</td><td>Yes</td><td>No (monitor only)</td></tr>
            <tr><td><strong>Bash execution</strong></td><td>Yes</td><td>Yes</td><td>No</td></tr>
            <tr><td><strong>Subagents</strong></td><td>Yes</td><td>Yes</td><td>No</td></tr>
            <tr><td><strong>Custom agents</strong></td><td>Via prompts</td><td>Structured markdown</td><td>No</td></tr>
            <tr><td><strong>MCP support</strong></td><td>Yes</td><td>Yes</td><td>No</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Provider and Model Support</h3>
      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr><th>Feature</th><th>Claude Code</th><th>OpenCode</th><th>RPAI</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Anthropic Claude</strong></td><td>Yes</td><td>Yes</td><td>Monitors</td></tr>
            <tr><td><strong>OpenAI GPT</strong></td><td>No</td><td>Yes</td><td>Monitors</td></tr>
            <tr><td><strong>Google Gemini</strong></td><td>No</td><td>Yes</td><td>Monitors</td></tr>
            <tr><td><strong>Local models (Ollama)</strong></td><td>No</td><td>Yes</td><td>Monitors</td></tr>
            <tr><td><strong>75+ providers</strong></td><td>No</td><td>Yes</td><td>N/A</td></tr>
            <tr><td><strong>Provider switching</strong></td><td>No</td><td>Runtime</td><td>N/A</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Unique Features</h3>
      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr><th>Feature</th><th>Claude Code</th><th>OpenCode</th><th>RPAI</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Checkpoints</strong></td><td>Yes</td><td>No</td><td>No</td></tr>
            <tr><td><strong>Instant rewind</strong></td><td>Yes</td><td>No</td><td>No</td></tr>
            <tr><td><strong>Thinking mode</strong></td><td>Native</td><td>Via model</td><td>No</td></tr>
            <tr><td><strong>Multi-session native</strong></td><td>Via hacks</td><td>Yes</td><td>Monitors</td></tr>
            <tr><td><strong>Desktop app</strong></td><td>No</td><td>Yes</td><td>No</td></tr>
            <tr><td><strong>Idle detection</strong></td><td>No</td><td>No</td><td>Yes</td></tr>
            <tr><td><strong>Agent dashboard</strong></td><td>No</td><td>No</td><td>Yes</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Cost Model</h3>
      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr><th>Aspect</th><th>Claude Code</th><th>OpenCode</th><th>RPAI</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Tool cost</strong></td><td>$17-100/mo</td><td>$0</td><td>$0</td></tr>
            <tr><td><strong>API costs</strong></td><td>Anthropic only</td><td>Any provider</td><td>N/A</td></tr>
            <tr><td><strong>Local (free) models</strong></td><td>No</td><td>Yes (Ollama)</td><td>N/A</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Ecosystem</h3>
      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr><th>Aspect</th><th>Claude Code</th><th>OpenCode</th><th>RPAI</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>License</strong></td><td>Proprietary</td><td>MIT</td><td>MIT</td></tr>
            <tr><td><strong>Source code</strong></td><td>Closed</td><td>Open</td><td>Open</td></tr>
            <tr><td><strong>GitHub stars</strong></td><td>N/A</td><td>78,000+</td><td>11</td></tr>
            <tr><td><strong>Contributors</strong></td><td>Anthropic</td><td>600+</td><td>2</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- When to Use -->
    <section id="when-to-use">
      <h2><span class="b">Part</span> 4: <span class="b">When</span> to Use Each Tool</h2>

      <h3>Decision Tree</h3>
      <div class="ascii-diagram">
TOOL SELECTION DECISION TREE

START: What's your primary concern?
    |
    +-- Cost optimization -------------------> OpenCode
    |                                          (provider flexibility, local models)
    |
    +-- Privacy/local execution -------------> OpenCode + Ollama
    |                                          (no external API calls)
    |
    +-- Best Claude experience --------------> Claude Code
    |                                          (checkpoints, native optimization)
    |
    +-- Open source philosophy --------------> OpenCode
    |                                          (MIT licensed, fork-friendly)
    |
    +-- Multi-agent visibility --------------> RPAI
    |                                          (dashboard for any agent count)
    |
    +-- Provider experimentation ------------> OpenCode
    |                                          (try 75+ models easily)
    |
    +-- Enterprise Anthropic agreement ------> Claude Code
                                               (ecosystem alignment)</div>

      <h3>Claude Code: When It's Best</h3>
      <p>Choose Claude Code when:</p>
      <ul>
        <li><strong>Claude optimization</strong> - You want the best Claude experience with native integrations</li>
        <li><strong>Checkpoints</strong> - You need instant rewind capabilities</li>
        <li><strong>Subagent sophistication</strong> - You want Claude Code's parallel workflow features</li>
        <li><strong>Enterprise Anthropic</strong> - You have an Anthropic enterprise agreement</li>
        <li><strong>Simplicity</strong> - You don't need provider flexibility</li>
      </ul>

      <p><strong>Trade-offs:</strong></p>
      <ul>
        <li>+ Best Claude integration, checkpoints/rewind, sophisticated subagents</li>
        <li>- Vendor lock-in, no local models, single provider, closed source</li>
      </ul>

      <h3>OpenCode: When It's Best</h3>
      <p>Choose OpenCode when:</p>
      <ul>
        <li><strong>Cost matters</strong> - You want to optimize across providers or use free/local models</li>
        <li><strong>Privacy matters</strong> - You need local execution or on-premise deployment</li>
        <li><strong>Flexibility matters</strong> - You want to experiment with different models</li>
        <li><strong>Open source matters</strong> - You need to audit, fork, or contribute</li>
        <li><strong>Multi-session native</strong> - You want parallel agents without hacks</li>
      </ul>

      <p><strong>Trade-offs:</strong></p>
      <ul>
        <li>+ Provider flexibility (75+), local model support, open source, native multi-session</li>
        <li>- No checkpoints, less Claude-optimized, newer ecosystem, community support only</li>
      </ul>

      <h3>RPAI: When It's Best</h3>
      <p>Choose RPAI when:</p>
      <ul>
        <li><strong>Running 3+ agents</strong> - Manual window-switching becomes untenable</li>
        <li><strong>Ralph loops</strong> - Parallel continuous iteration workflows</li>
        <li><strong>Gas Town</strong> - Agent factory hierarchies need visibility</li>
        <li><strong>Personal Panopticon</strong> - 8+ domain agents across life areas</li>
        <li><strong>Resource awareness</strong> - Need to monitor CPU/memory across agents</li>
        <li><strong>Idle detection</strong> - Want to know which agents need attention</li>
      </ul>

      <p><strong>Trade-offs:</strong></p>
      <ul>
        <li>+ Visibility layer for any agent count, idle detection, tmux integration</li>
        <li>- Requires tmux, Unix-only, doesn't control agents (monitor only)</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Integration Patterns -->
    <section id="integration-patterns">
      <h2><span class="b">Part</span> 5: <span class="b">Integ</span>ration Patterns</h2>

      <h3>OpenCode with Ralph Wiggum Loop</h3>
      <p>The Ralph Wiggum Loop pattern works seamlessly with OpenCode, offering provider flexibility that Claude Code cannot match.</p>

      <h4>Basic Ralph with OpenCode</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# ralph-opencode.sh

PROMPT_FILE="PROMPT.md"
MAX_ITERATIONS=50
COMPLETION_TOKEN="COMPLETE"

iteration=0
while [ $iteration -lt $MAX_ITERATIONS ]; do
    echo "=== Iteration $((iteration + 1)) ==="

    # Run OpenCode with prompt
    opencode run "$(cat $PROMPT_FILE)" --model anthropic/claude-sonnet-4

    # Check for completion signal in output
    if grep -q "$COMPLETION_TOKEN" ./PROGRESS.md 2>/dev/null; then
        echo "Task completed!"
        exit 0
    fi

    ((iteration++))
done

echo "Max iterations reached"</code></pre>
      </div>

      <h4>Multi-Provider Ralph</h4>
      <p>The key advantage over Claude Code: switch models mid-project:</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# multi-provider-ralph.sh

PHASE=$(cat PHASE.md 2>/dev/null || echo "planning")

case $PHASE in
    planning)
        MODEL="anthropic/claude-opus-4"
        ;;
    implementation)
        MODEL="openai/gpt-5.1-codex"
        ;;
    review)
        MODEL="google/gemini-3-pro"
        ;;
esac

opencode run "$(cat PROMPT.md)" --model $MODEL</code></pre>
      </div>

      <h3>RPAI with Ralph Wiggum Loop</h3>
      <p>Scenario: Running multiple Ralph loops in parallel.</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Feature 1 Ralph loop
cd ~/project/feature-auth
while :; do cat PROMPT-auth.md | claude-code ; done

# Feature 2 Ralph loop
cd ~/project/feature-api
while :; do cat PROMPT-api.md | claude-code ; done

# Feature 3 Ralph loop
cd ~/project/feature-ui
while :; do cat PROMPT-ui.md | claude-code ; done</code></pre>
      </div>

      <p><strong>RPAI View:</strong></p>
      <div class="ascii-diagram">
+--------------------------------------------------------------------------+
|  rpai - Ralph Loops                                                       |
|  ===================                                                      |
|                                                                           |
|  > claude    ~/project/feature-auth     CPU: 45%  [RALPH]                |
|  @ claude    ~/project/feature-api      CPU: 1%   [RALPH]  <- Check!     |
|  > claude    ~/project/feature-ui       CPU: 38%  [RALPH]                |
|                                                                           |
+--------------------------------------------------------------------------+</div>

      <h3>Combination Matrix</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Tool Combo</th><th>Use Case</th><th>Complexity</th><th>Value</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>OpenCode + Ralph</strong></td><td>Provider-flexible iteration</td><td>Low</td><td><strong>High</strong></td></tr>
            <tr><td><strong>OpenCode + Gas Town</strong></td><td>Multi-provider agent factory</td><td>Medium</td><td><strong>High</strong></td></tr>
            <tr><td><strong>RPAI + Ralph</strong></td><td>Parallel Ralph visibility</td><td>Low</td><td><strong>High</strong></td></tr>
            <tr><td><strong>RPAI + Gas Town</strong></td><td>Agent hierarchy dashboard</td><td>Medium</td><td><strong>Very High</strong></td></tr>
            <tr><td><strong>OpenCode + RPAI</strong></td><td>Full alternative stack</td><td>Medium</td><td><strong>High</strong></td></tr>
            <tr><td><strong>Claude Code + RPAI</strong></td><td>Enhanced Claude visibility</td><td>Low</td><td><strong>High</strong></td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Mental Models -->
    <section id="mental-models">
      <h2><span class="b">Men</span>tal <span class="b">Mod</span>els</h2>

      <h3>Mental Model 1: The Universal Adapter</h3>
      <div class="ascii-diagram">
OPENCODE AS UNIVERSAL ADAPTER

                        Your Workflow
                             |
                             v
                  +---------------------+
                  |      OpenCode        |
                  |  Universal Adapter   |
                  +----------+----------+
                             |
              +--------------+--------------+
              v              v              v
        +----------+   +----------+   +----------+
        |  Claude  |   |   GPT    |   |  Local   |
        | Anthropic|   |  OpenAI  |   |  Ollama  |
        +----------+   +----------+   +----------+

Your commands stay the same. The backend can change.</div>

      <p><strong>Key Insight:</strong> Decouple your workflow from your provider. Invest in your commands and patterns, not in a specific model's quirks.</p>

      <h3>Mental Model 2: The Control Tower</h3>
      <div class="ascii-diagram">
RPAI AS CONTROL TOWER

Traditional Development:
  You <-> Single IDE <-> Single Context

AI-Assisted Development:
  You <-> RPAI (Tower) <-> Multiple Agents <-> Multiple Contexts
            ^
       Visibility layer

You don't fly each plane--you monitor the airspace and intervene when needed.</div>

      <p><strong>Key Insight:</strong> Scale by observation, not by attention division. Let the tower tell you where to focus.</p>

      <h3>Mental Model 3: The "Idle = Done" Pattern</h3>
      <div class="ascii-diagram">
ATTENTION INVERSION

Agent States:
  > Running  = "Leave me alone, I'm working"
  @ Waiting  = "I need you--I'm blocked or finished"

Your Attention:
  Running agents -> Low priority (check occasionally)
  Waiting agents -> High priority (they need input)

Without RPAI (8 agents):
  8 agents x 2 minutes checking each = 16 minutes/cycle
  Most checks find "still working" -> wasted time

With RPAI (8 agents):
  Open RPAI: 5 seconds
  Identify 2 idle agents: instant
  Jump and respond: 2 minutes each
  Total: ~4.5 minutes/cycle

Attention savings: 70%+</div>

      <p><strong>Key Insight:</strong> Invert your attention model. Spend time on idle agents, not running ones.</p>
    </section>

    <hr class="section-divider">

    <!-- Checkpoints -->
    <section id="checkpoints">
      <h2><span class="b">Check</span>points</h2>

      <h3>Installation Verification</h3>

      <h4>OpenCode Installation</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Checkpoint 1: Binary exists
opencode --version
# Expected: opencode 1.x.x

# Checkpoint 2: Path is correct
which opencode
# Expected: /usr/local/bin/opencode (or npm global path)</code></pre>
      </div>

      <h4>RPAI Installation</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Checkpoint 1: Binary exists
which rpai
# Expected: ~/.cargo/bin/rpai (or similar)

# Checkpoint 2: Version check
rpai --version
# Expected: rpai 0.1.12 (or newer)

# Checkpoint 3: Basic execution
rpai scan
# Expected: List of sessions (may be empty if no agents running)</code></pre>
      </div>

      <h4>tmux Integration Verification</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Checkpoint 1: tmux config loaded
grep -q "rpai" ~/.tmux.conf && echo "RPAI binding found"
# Expected: "RPAI binding found"

# Checkpoint 2: Keybinding works
# In tmux, press: prefix + a
# Expected: RPAI popup appears (or "No sessions" if no agents)</code></pre>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Checkpoint Box -->
    <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
      <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Tool Selection</div>
      <p><strong>You should now understand:</strong></p>
      <ul>
        <li>The three-tool ecosystem: Claude Code, OpenCode, RPAI</li>
        <li>When to use each tool based on your requirements</li>
        <li>How to integrate tools with Ralph and other orchestration patterns</li>
        <li>The mental models for provider flexibility and visibility</li>
      </ul>
      <p><strong>If unclear:</strong> Start with Claude Code for Claude-specific work, add RPAI when running 3+ agents, consider OpenCode for provider diversity.</p>
    </div>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="b">Trou</span>bleshooting</h2>

      <details class="troubleshoot">
        <summary>OpenCode: "ProviderInitError" on startup</summary>
        <div>
          <p><strong>Symptom:</strong> <code>Error: ProviderInitError - Failed to initialize provider</code></p>
          <p><strong>Cause:</strong> API key not set or OAuth token expired.</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Re-authenticate provider
opencode
/connect anthropic  # or your provider

# Or clear and reconfigure
rm -rf ~/.local/share/opencode/auth.json
opencode
/connect</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>OpenCode: Model not found</summary>
        <div>
          <p><strong>Symptom:</strong> <code>Error: Model "anthropic/claude-opus" not found</code></p>
          <p><strong>Cause:</strong> Incorrect model ID format.</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># List available models
opencode models --refresh

# Use correct format: provider/model-id
# Example: anthropic/claude-opus-4-5 (not claude-opus)</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>RPAI: Shows No Sessions</summary>
        <div>
          <p><strong>Symptom:</strong> <code>rpai scan</code> returns empty, RPAI TUI shows "No sessions"</p>
          <p><strong>Cause:</strong> No agents running, agent name not matched, or not running in tmux.</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Check manually for agent processes
ps aux | grep -E "claude|opencode|codex|cursor|gemini"

# RPAI needs tmux for session correlation
tmux  # Start tmux first
claude  # Then start agent</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>RPAI: Agent Shows as "Running" When Idle</summary>
        <div>
          <p><strong>Symptom:</strong> Agent at Running symbol despite being at prompt.</p>
          <p><strong>Cause:</strong> LSP processes inflating CPU, or threshold too low.</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code>// Raise idle_threshold in ~/.config/rpai/config.json
{
  "idle_threshold": 5.0
}</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>RPAI: "Jump" Doesn't Work</summary>
        <div>
          <p><strong>Symptom:</strong> Pressing Enter doesn't switch to session.</p>
          <p><strong>Cause:</strong> tmux pane correlation failed.</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Check tmux pane list
tmux list-panes -a

# Ensure all agents run in the same tmux server</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Summary -->
    <section id="summary">
      <h2><span class="b">Sum</span>mary</h2>

      <h3>The Three-Tool Ecosystem</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Tool</th><th>Primary Value</th><th>Best For</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Claude Code</strong></td><td>Best Claude experience</td><td>Single-provider, checkpoint-critical workflows</td></tr>
            <tr><td><strong>OpenCode</strong></td><td>Provider flexibility</td><td>Cost optimization, privacy, multi-model workflows</td></tr>
            <tr><td><strong>RPAI</strong></td><td>Multi-agent visibility</td><td>Any workflow with 3+ parallel agents</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Key Takeaways</h3>
      <ol>
        <li><strong>The choice isn't either/or</strong> - Many developers use Claude Code for Claude-specific work and OpenCode for provider diversity.</li>
        <li><strong>RPAI complements both</strong> - It's a visibility layer, not an alternative. Use it with Claude Code, OpenCode, or both.</li>
        <li><strong>Cost optimization is real</strong> - OpenCode's provider flexibility enables significant savings for high-volume workflows.</li>
        <li><strong>Privacy has options</strong> - OpenCode + Ollama provides full local execution for sensitive codebases.</li>
        <li><strong>Visibility scales</strong> - Manual window-switching fails at 3+ agents. RPAI makes it manageable at any scale.</li>
        <li><strong>Patterns transfer</strong> - Ralph, Gas Town, and other orchestration patterns work with both Claude Code and OpenCode.</li>
      </ol>

      <h3>Final Decision Guide</h3>
      <div class="ascii-diagram">
If you value...
+-- Best Claude integration      -> Claude Code
+-- Provider flexibility         -> OpenCode
+-- Cost optimization            -> OpenCode
+-- Privacy/local execution      -> OpenCode + Ollama
+-- Multi-agent visibility       -> Add RPAI
+-- Open source philosophy       -> OpenCode + RPAI
+-- Simplicity over flexibility  -> Claude Code</div>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="compare-orchestration.html">Orchestration Compared</a> - Ralph, CC Mirror, Gas Town</li>
        <li><a href="compare-observability.html">Observability Patterns</a> - Claude HUD, rpai, monitoring</li>
        <li><a href="mastery-ralph-complete.html">Ralph Pattern Mastery</a> - Complete Ralph implementation</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="compare-enterprise-orchestration.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Enterprise Orchestration</span>
      </a>
      <a href="compare-master.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">Comparisons Index</span>
      </a>
    </nav>

  </div>

  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <script src="../js/search.js"></script>
  <script src="../js/sidebar.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      button.classList.add('copied');
      setTimeout(() => {
        button.textContent = 'Copy';
        button.classList.remove('copied');
      }, 2000);
    }
  </script>
</body>
</html>
