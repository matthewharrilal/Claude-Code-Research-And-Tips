<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Architecture">
  <title>Claude Code Complexity Ladder - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <span>Architecture</span>
      <span>/</span>
      <span>Complexity Ladder</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;">This is the <strong><span style="font-weight: 700;">cap</span>ability progression roadmap</strong> - the path from basic Claude Code usage (Level 0) to full agent factory operations (Level 7). Use this to understand where you are now and what's needed to advance. Start here if you want to know "what's possible" and "what should I learn next."</p>
    </div>

    <h1><span style="font-weight: 700;">Cla</span>ude Code Complexity Ladder</h1>

    <p class="conversational-lead">
      A <span style="font-weight: 700;">pro</span>gression from beginner to expert Claude Code usage patterns, synthesized from community implementations, power user workflows, and production configurations.
    </p>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#overview">Overview</a> - The full ladder visualization</li>
        <li><a href="#level-0">Level 0</a> - Single Interactive Session</li>
        <li><a href="#level-1">Level 1</a> - CLAUDE.md + Slash Commands</li>
        <li><a href="#level-2">Level 2</a> - Subagents + Hooks</li>
        <li><a href="#level-3">Level 3</a> - Simple Loops (Basic Ralph)</li>
        <li><a href="#level-4">Level 4</a> - PRD-Driven Loops (Full Ralph)</li>
        <li><a href="#level-5">Level 5</a> - Multi-Agent Orchestration</li>
        <li><a href="#level-6">Level 6</a> - Parallel Swarms + Worktrees</li>
        <li><a href="#level-7">Level 7</a> - Full Agent Factory (Gas Town)</li>
        <li><a href="#progression-guide">Progression Guide</a> - Time and cost</li>
        <li><a href="#troubleshooting">Troubleshooting</a> - Common issues</li>
      </ul>
    </div>

    <hr class="section-divider divider-context">

    <!-- Overview Section -->
    <section id="overview">
      <h2><span style="font-weight: 700;">Ove</span>rview</h2>

      <p>This ladder represents the natural evolution of Claude Code usage, from simple interactive sessions to full team-scale autonomous development. Each level unlocks new capabilities but requires mastering the previous level's patterns.</p>

      <div class="ascii-diagram">
Level 7: Full Agent Factory (Gas Town)          [Team-scale solo]
         |
Level 6: Parallel Swarms + Worktrees            [Massive parallelization]
         |
Level 5: Multi-Agent Orchestration              [Parallel specialized work]
         |
Level 4: PRD-Driven Loops (Full Ralph)          [Structured autonomous dev]
         |
Level 3: Simple Loops (Basic Ralph)             [Autonomous execution]
         |
Level 2: Subagents + Hooks                      [Task delegation, automation]
         |
Level 1: CLAUDE.md + Slash Commands             [Consistent behavior, shortcuts]
         |
Level 0: Single Interactive Session             [Basic AI coding assistance]
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Level 0 Section -->
    <section id="level-0">
      <h2><span style="font-weight: 700;">Lev</span>el 0: Single Interactive Session</h2>

      <h3>Description</h3>
      <p>Basic Claude Code usage in a single terminal. No persistence between sessions. Manual approval for all operations. You're the driver, Claude is the copilot.</p>

      <h3>What You Do</h3>
      <ul>
        <li>Run <code>claude</code> in a project directory</li>
        <li>Ask questions, request code changes</li>
        <li>Approve each operation manually</li>
        <li>Session ends, context is lost</li>
      </ul>

      <h3>Key Characteristics</h3>
      <ul>
        <li>No memory between sessions</li>
        <li>No custom instructions</li>
        <li>Manual everything</li>
        <li>Single task focus</li>
      </ul>

      <h3>Example Workflow</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>cd ~/my-project
claude
> "Add a login form to the homepage"
# Claude edits files, you approve each one
# Session ends, you start fresh next time</code></pre>
      </div>

      <div class="callout callout-success">
        <div class="callout-title">Unlock: Basic AI Coding Assistance</div>
        <p>You can now get AI help for coding tasks, but every session starts from scratch.</p>
      </div>

      <h3>When to Advance</h3>
      <ul>
        <li>You find yourself repeating the same instructions</li>
        <li>You want Claude to "just know" your project's patterns</li>
        <li>You're tired of re-establishing context every session</li>
      </ul>

      <!-- Checkpoint Box -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Level 0 Mastery</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>How to start a Claude Code session with <code>claude</code></li>
          <li>How to approve/reject operations manually</li>
          <li>That context is lost when sessions end</li>
          <li>When AI assistance adds value vs. when to code manually</li>
        </ul>
        <p><strong>If unclear:</strong> Practice with 3-5 simple coding tasks before advancing.</p>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Level 1 Section -->
    <section id="level-1">
      <h2><span style="font-weight: 700;">Lev</span>el 1: CLAUDE.md + Slash Commands</h2>

      <h3>Description</h3>
      <p>Project context via CLAUDE.md files. Reusable workflows via slash commands. Claude "remembers" your project's architecture, coding standards, and preferences.</p>

      <h3>What You Add</h3>

      <p><strong>CLAUDE.md in project root:</strong></p>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Project Context

## Tech Stack
- TypeScript + React
- PostgreSQL with Drizzle ORM
- Tailwind CSS

## Coding Standards
- Use functional components only
- All API calls through server actions
- Never use `any` type

## Common Commands
npm run dev       # Start dev server
npm run typecheck # TypeScript check
npm run test      # Run tests</code></pre>
      </div>

      <p><strong>Slash commands in <code>.claude/commands/</code>:</strong></p>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># .claude/commands/review.md
Review the current git diff for:
1. Logic errors
2. Missing error handling
3. TypeScript issues

Output format: [file:line] - [severity] - [issue]</code></pre>
      </div>

      <h3>Example Workflow</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>claude
> /review           # Custom command
> "Add pagination"  # Claude knows your tech stack</code></pre>
      </div>

      <div class="callout callout-success">
        <div class="callout-title">Unlock: Consistent Behavior, Workflow Shortcuts</div>
        <p>Claude now understands your project. Commands take seconds instead of paragraphs.</p>
      </div>

      <!-- Checkpoint Box -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Level 1 Mastery</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>How CLAUDE.md provides persistent project context</li>
          <li>How to create and invoke slash commands</li>
          <li>The difference between global (<code>~/.claude/</code>) and project-level (<code>.claude/</code>) configuration</li>
          <li>How to keep CLAUDE.md concise (&lt;500 tokens)</li>
        </ul>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Level 2 Section -->
    <section id="level-2">
      <h2><span style="font-weight: 700;">Lev</span>el 2: Subagents + Hooks</h2>

      <h3>Description</h3>
      <p>Delegate to specialized agents with isolated contexts. Automate responses to lifecycle events. Claude becomes a small team rather than a single assistant.</p>

      <h3>Subagent vs Hook Decision</h3>

      <table class="comparison-table">
        <thead>
          <tr><th>Scenario</th><th>Tool</th></tr>
        </thead>
        <tbody>
          <tr><td>Complex multi-step reasoning</td><td>Subagent</td></tr>
          <tr><td>Simple automatic task</td><td>Hook</td></tr>
          <tr><td>Adversarial review</td><td>Subagent</td></tr>
          <tr><td>Format on save</td><td>Hook</td></tr>
          <tr><td>Quick notification</td><td>Hook</td></tr>
        </tbody>
      </table>

      <h3>Hooks in settings.json</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>{
  "hooks": {
    "PostToolUse": [{
      "matcher": "Edit",
      "hooks": [{
        "type": "command",
        "command": "prettier --write $FILE"
      }]
    }],
    "PreToolUse": [{
      "matcher": "AskUserQuestion",
      "hooks": [{
        "type": "command",
        "command": "~/.claude/hooks/notify.sh"
      }]
    }]
  }
}</code></pre>
      </div>

      <div class="callout callout-success">
        <div class="callout-title">Unlock: Task Delegation, Automated Workflows</div>
        <p>You now have a small AI team. Subagents handle specialized work. Hooks handle automation.</p>
      </div>

      <!-- Checkpoint Box -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Level 2 Mastery</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>How to create subagent YAML files in <code>.claude/agents/</code></li>
          <li>Hook event types: PreToolUse, PostToolUse, SessionStart, SessionEnd</li>
          <li>When to use subagents vs. hooks (complex reasoning vs. simple automation)</li>
          <li>How subagent contexts are isolated from main context</li>
        </ul>
        <p><strong>If unclear:</strong> See <a href="architecture-primitives.html">architecture-primitives</a> for detailed hook and subagent patterns.</p>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Level 3 Section -->
    <section id="level-3">
      <h2><span style="font-weight: 700;">Lev</span>el 3: Simple Loops (Basic Ralph)</h2>

      <h3>Description</h3>
      <p>Claude Code runs in a loop until a task is complete. Each iteration gets fresh context. External memory via git and files. Named after Geoffrey Huntley's "Ralph Wiggum" pattern.</p>

      <h3>The Core Loop</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>#!/bin/bash
# ralph-simple.sh
while :; do
  claude "Check progress.txt, complete next task, update progress" | tee output.txt

  if grep -q "ALL TASKS COMPLETE" output.txt; then
    break
  fi

  sleep 5
done</code></pre>
      </div>

      <p><strong>External memory files:</strong></p>
      <ul>
        <li><code>progress.txt</code> - What's done, what's next</li>
        <li><code>AGENTS.md</code> - Learnings for future iterations</li>
      </ul>

      <div class="callout callout-success">
        <div class="callout-title">Unlock: Autonomous Execution</div>
        <p>Claude can now work without you watching. Come back to find tasks completed.</p>
      </div>

      <!-- Checkpoint Box -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Level 3 Mastery</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>The basic <code>while :; do claude ... ; done</code> loop pattern</li>
          <li>Why fresh context beats extended sessions (context rot)</li>
          <li>How progress.txt serves as external memory</li>
          <li>How to use grep to detect completion signals</li>
        </ul>
        <p><strong>Terminal verification:</strong></p>
        <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
          <pre style="margin: 0; overflow-x: auto;"><code># You should be able to run this without errors:
while [ $i -lt 3 ]; do echo "Iteration $i"; i=$((i+1)); done</code></pre>
        </div>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Level 4 Section -->
    <section id="level-4">
      <h2><span style="font-weight: 700;">Lev</span>el 4: PRD-Driven Loops (Full Ralph)</h2>

      <h3>Description</h3>
      <p>JSON-based task tracking with acceptance criteria, priority ordering, and quality gates. Full product requirement documents drive autonomous development.</p>

      <h3>prd.json Structure</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>{
  "branchName": "ralph/auth-feature",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create login form component",
      "acceptanceCriteria": [
        "Email/password fields render",
        "Validates email format",
        "npm run typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    }
  ]
}</code></pre>
      </div>

      <h3>Story Sizing Rules</h3>

      <div class="callout callout-insight">
        <div class="callout-title">The 2-3 Sentence Rule</div>
        <p>If you can't describe the task in 2-3 sentences, it's too big. Split it.</p>
      </div>

      <p><strong>Right-sized tasks:</strong></p>
      <ul>
        <li>Add a database column + migration</li>
        <li>Implement one API endpoint</li>
        <li>Create one UI component</li>
      </ul>

      <p><strong>Too big (split these):</strong></p>
      <ul>
        <li>"Build the entire dashboard"</li>
        <li>"Add authentication"</li>
        <li>"Refactor the API"</li>
      </ul>

      <div class="callout callout-success">
        <div class="callout-title">Unlock: Structured Autonomous Development</div>
        <p>Real features shipped overnight. Learnings compound across iterations.</p>
      </div>

      <!-- Checkpoint Box -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Level 4 Mastery</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>prd.json structure with userStories, acceptanceCriteria, and passes fields</li>
          <li>How to write atomic, verifiable tasks (2-3 sentence rule)</li>
          <li>Quality gate enforcement (typecheck + tests before commit)</li>
          <li>The <code>&lt;promise&gt;COMPLETE&lt;/promise&gt;</code> termination signal</li>
        </ul>
        <p><strong>Terminal verification:</strong></p>
        <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
          <pre style="margin: 0; overflow-x: auto;"><code># Parse prd.json to see incomplete tasks:
jq '.userStories[] | select(.passes == false) | .title' prd.json</code></pre>
        </div>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Level 5 Section -->
    <section id="level-5">
      <h2><span style="font-weight: 700;">Lev</span>el 5: Multi-Agent Orchestration</h2>

      <h3>Description</h3>
      <p>Central orchestrator delegates to specialized workers. Hub-and-spoke architecture. Agents coordinate via task management and file-based handoffs. Powered by CC Mirror or similar tools.</p>

      <h3>Architecture</h3>
      <div class="ascii-diagram">
         Orchestrator
              |
    +---------+---------+
    |         |         |
 Coder     Tester    Docs
 Agent     Agent     Agent
      </div>

      <h3>Model Selection for Workers</h3>

      <table class="comparison-table">
        <thead>
          <tr><th>Model</th><th>Use Case</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>Haiku</strong></td><td>File lookups, simple transforms. Spawn 5-10 parallel.</td></tr>
          <tr><td><strong>Sonnet</strong></td><td>Implementation, test generation. Main workhorse.</td></tr>
          <tr><td><strong>Opus</strong></td><td>Architecture decisions, ambiguous tasks. Reserve for complex.</td></tr>
        </tbody>
      </table>

      <div class="callout callout-success">
        <div class="callout-title">Unlock: Parallel Specialized Work</div>
        <p>Multiple agents working simultaneously on coordinated tasks.</p>
      </div>

      <!-- Checkpoint Box -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Level 5 Mastery</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>Orchestrator vs. worker role separation (conductors don't play instruments)</li>
          <li>Worker preamble pattern to prevent recursion</li>
          <li>Task dependencies with blockedBy/addBlocks</li>
          <li>Model selection: Haiku for lookups, Sonnet for implementation, Opus for architecture</li>
        </ul>
        <p><strong>If unclear:</strong> See <a href="architecture-composition-rules.html">architecture-composition-rules</a> for CC Mirror pattern details.</p>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Level 6 Section -->
    <section id="level-6">
      <h2><span style="font-weight: 700;">Lev</span>el 6: Parallel Swarms + Worktrees</h2>

      <h3>Description</h3>
      <p>Git worktrees provide complete isolation for parallel agents. Multiple Ralph loops running simultaneously. Merge orchestration handles conflicts.</p>

      <h3>Git Worktree Setup</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Create isolated worktrees for parallel agents
git worktree add ../wt-auth feature-auth
git worktree add ../wt-payments feature-payments
git worktree add ../wt-notifications feature-notifications</code></pre>
      </div>

      <h3>Architecture</h3>
      <div class="ascii-diagram">
Main Repo
    |
    +---> Worktree: auth (Agent 1)
    |         |
    |         +-> Ralph loop running
    |
    +---> Worktree: payments (Agent 2)
    |         |
    |         +-> Ralph loop running
    |
    +---> Worktree: notifications (Agent 3)
              |
              +-> Ralph loop running
      </div>

      <div class="callout callout-success">
        <div class="callout-title">Unlock: Massive Parallelization</div>
        <p>10x productivity through true parallel development.</p>
      </div>

      <!-- Checkpoint Box -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Level 6 Mastery</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>Git worktree creation and management</li>
          <li>Running parallel bash processes with <code>&amp;</code> and <code>wait</code></li>
          <li>Merge strategies for parallel feature branches</li>
          <li>Using tmux or similar for multi-agent monitoring</li>
        </ul>
        <p><strong>Terminal verification:</strong></p>
        <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
          <pre style="margin: 0; overflow-x: auto;"><code># You should be able to create a worktree:
git worktree add ../test-worktree test-branch
git worktree list
git worktree remove ../test-worktree</code></pre>
        </div>
        <p><strong>If unclear:</strong> See <a href="architecture-domain-isolation.html">architecture-domain-isolation</a> for isolation patterns.</p>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Level 7 Section -->
    <section id="level-7">
      <h2><span style="font-weight: 700;">Lev</span>el 7: Full Agent Factory (Gas Town)</h2>

      <h3>Description</h3>
      <p>Factory architecture for agent production. 7+ specialized roles working continuously. Self-improving systems that add capabilities. Human becomes Product Manager, agents become the engineering team.</p>

      <h3>The 7 Roles</h3>

      <table class="comparison-table">
        <thead>
          <tr><th>Role</th><th>Function</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>Mayor</strong></td><td>Town-level coordination across all projects</td></tr>
          <tr><td><strong>Deacon</strong></td><td>Monitoring, health checks, handshakes</td></tr>
          <tr><td><strong>Dogs</strong></td><td>Quality gates, watchdogs, linting</td></tr>
          <tr><td><strong>Refinery</strong></td><td>Task decomposition from high-level specs</td></tr>
          <tr><td><strong>Polecat</strong></td><td>Named persistent workers (specialized)</td></tr>
          <tr><td><strong>Witness</strong></td><td>Per-project observer</td></tr>
          <tr><td><strong>Crew</strong></td><td>Ephemeral workers for burst tasks</td></tr>
          <tr><td><strong>Overseer (YOU)</strong></td><td>Human boss with inbox</td></tr>
        </tbody>
      </table>

      <h3>Mental Model Shift</h3>

      <blockquote style="border-left: 3px solid #2a7d7d; padding-left: 1rem; margin: 1.5rem 0; font-style: italic; color: #5c4b3a;">
        "You're a Product Manager. Gas Town is an Idea Compiler. You file features, agents build them."
      </blockquote>

      <div class="callout callout-warning">
        <div class="callout-title">Warnings (from Steve Yegge)</div>
        <ul style="margin-bottom: 0;">
          <li>"Code is 3 weeks old, smuggled 400 miles upriver"</li>
          <li>"100% vibe-coded - never looked at the code myself"</li>
          <li>"If you have any doubt whatsoever, you can't use it"</li>
          <li>"Expensive as hell"</li>
          <li>"Requires tmux"</li>
        </ul>
      </div>

      <div class="callout callout-success">
        <div class="callout-title">Unlock: Team-Scale Productivity Solo</div>
        <p>One person with Gas Town = small engineering team output.</p>
      </div>
    </section>

    <hr class="section-divider divider-checkpoint">

    <!-- Progression Guide Section -->
    <section id="progression-guide">
      <h2><span style="font-weight: 700;">Pro</span>gression Guide</h2>

      <h3>Moving Up Each Level</h3>

      <table class="comparison-table">
        <thead>
          <tr><th>From</th><th>To</th><th>Key Steps</th></tr>
        </thead>
        <tbody>
          <tr><td>0</td><td>1</td><td>Create CLAUDE.md, make 3 slash commands for common tasks</td></tr>
          <tr><td>1</td><td>2</td><td>Add one subagent for security/review, add format-on-save hook</td></tr>
          <tr><td>2</td><td>3</td><td>Write a simple bash loop, let it run unattended for one task</td></tr>
          <tr><td>3</td><td>4</td><td>Create your first prd.json, run Ralph on a real feature</td></tr>
          <tr><td>4</td><td>5</td><td>Set up CC Mirror, orchestrate 3 agents on one task</td></tr>
          <tr><td>5</td><td>6</td><td>Use worktrees, run 3 parallel Ralph loops on related features</td></tr>
          <tr><td>6</td><td>7</td><td>Install Gas Town, create your first rig, name your first polecat</td></tr>
        </tbody>
      </table>

      <h3>Time Investment by Level</h3>

      <table class="comparison-table">
        <thead>
          <tr><th>Level</th><th>Setup Time</th><th>Mastery Time</th></tr>
        </thead>
        <tbody>
          <tr><td>0</td><td>0</td><td>1 day</td></tr>
          <tr><td>1</td><td>30 min</td><td>1 week</td></tr>
          <tr><td>2</td><td>2 hours</td><td>2 weeks</td></tr>
          <tr><td>3</td><td>1 hour</td><td>1 week</td></tr>
          <tr><td>4</td><td>4 hours</td><td>2 weeks</td></tr>
          <tr><td>5</td><td>4 hours</td><td>2 weeks</td></tr>
          <tr><td>6</td><td>2 hours</td><td>1 week</td></tr>
          <tr><td>7</td><td>1 day</td><td>1+ month</td></tr>
        </tbody>
      </table>

      <h3>Cost Implications</h3>

      <table class="comparison-table">
        <thead>
          <tr><th>Level</th><th>API Cost/Month (Active Use)</th></tr>
        </thead>
        <tbody>
          <tr><td>0-1</td><td>$20-50</td></tr>
          <tr><td>2-3</td><td>$50-100</td></tr>
          <tr><td>4</td><td>$100-200</td></tr>
          <tr><td>5</td><td>$200-400</td></tr>
          <tr><td>6</td><td>$400-800</td></tr>
          <tr><td>7</td><td>$800+ (multiple accounts)</td></tr>
        </tbody>
      </table>

      <h3>Quick Reference: Key Tools by Level</h3>

      <table class="comparison-table">
        <thead>
          <tr><th>Level</th><th>Primary Tools</th></tr>
        </thead>
        <tbody>
          <tr><td>0</td><td><code>claude</code></td></tr>
          <tr><td>1</td><td>CLAUDE.md, <code>.claude/commands/</code></td></tr>
          <tr><td>2</td><td><code>.claude/agents/</code>, <code>~/.claude/settings.json</code> hooks</td></tr>
          <tr><td>3</td><td>bash loop, progress.txt</td></tr>
          <tr><td>4</td><td>prd.json, prompt.md, ralph.sh</td></tr>
          <tr><td>5</td><td>CC Mirror, orchestration skill, Task tool</td></tr>
          <tr><td>6</td><td><code>git worktree</code>, parallel bash, merge scripts</td></tr>
          <tr><td>7</td><td>Gas Town (<code>gt</code>), tmux, MCP Agent Mail</td></tr>
        </tbody>
      </table>
    </section>

    <hr class="section-divider divider-warning">

    <!-- Troubleshooting Section -->
    <section id="troubleshooting">
      <h2><span style="font-weight: 700;">Tro</span>ubleshooting</h2>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Ralph Loop Never Terminates</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Loop runs indefinitely, burning API credits</p>
          <p><strong>Cause:</strong> Completion signal not being emitted or not being detected</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Verify your prompt includes the exact completion signal format: <code>&lt;promise&gt;COMPLETE&lt;/promise&gt;</code></li>
            <li>Check that grep is searching the correct output file</li>
            <li>Add a maximum iteration limit as a safety net</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Context Rot Mid-Session</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Claude starts forgetting instructions, repeating itself, or hallucinating files</p>
          <p><strong>Cause:</strong> Extended session has accumulated too much context</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Use fresh context pattern (Level 3+) instead of extended sessions</li>
            <li>If you must continue, use <code>/compact</code> at 60-70% context usage</li>
            <li>Externalize state to files (progress.txt, prd.json) before restarting</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Subagent Spawns Its Own Subagents</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Runaway recursion, exploding API costs</p>
          <p><strong>Cause:</strong> Worker agent not properly constrained</p>
          <p><strong>Fix:</strong> Always include the worker preamble in subagent prompts that prohibits spawning</p>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Parallel Agents Create Merge Conflicts</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Git conflicts when merging parallel feature branches</p>
          <p><strong>Cause:</strong> Agents modified the same files simultaneously</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Use git worktrees for true directory isolation (Level 6)</li>
            <li>Assign clear file ownership to each agent</li>
            <li>Run agents sequentially if they touch shared files</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Tests Pass But Shouldn't</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Agent marks task complete, but tests are broken or not running</p>
          <p><strong>Cause:</strong> Exit code not being checked, or test framework misconfigured</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Always verify test output manually after first few runs</li>
            <li>Include exit code checks in your scripts</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Stuck at Level Transition</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Not sure if ready to advance to next level</p>
          <p><strong>Cause:</strong> Missing mastery of current level fundamentals</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Use the checkpoint checklist for your current level</li>
            <li>Complete all items before advancing</li>
            <li>Build something non-trivial at your current level before moving up</li>
          </ol>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- The Bottom Line -->
    <blockquote style="border-left: 3px solid #2a7d7d; padding-left: 1rem; margin: 2rem 0; font-style: italic; color: #5c4b3a; font-size: 1.1em;">
      "Given excellent upfront specification, we can already achieve meaningful unattended software production in 2026."<br>
      <cite style="font-size: 0.9em;">-- Ryan Carson</cite>
    </blockquote>

    <!-- Milestone -->
    <div class="milestone" style="background: linear-gradient(90deg, #6b9b7a 0%, #2a7d7d 100%); color: white; padding: 1rem 1.5rem; border-radius: 8px; text-align: center; margin: 2rem 0;">
      Start at Level 0. Master each level before advancing. By Level 4, you're shipping features overnight. By Level 7, you're running a solo engineering department. The ladder is real. Climb it.
    </div>

    <!-- Related Pages -->
    <div class="related-pages" style="margin-top: 2rem; padding: 1rem; background: #f9f6f0; border-radius: 8px;">
      <h4 style="margin-top: 0;">Related Architecture Documents</h4>
      <ul>
        <li><a href="architecture-primitives.html">Architecture Primitives</a> - The atomic building blocks</li>
        <li><a href="architecture-composition-rules.html">Composition Rules</a> - How primitives combine</li>
        <li><a href="architecture-domain-isolation.html">Domain Isolation</a> - Running parallel isolated instances</li>
        <li><a href="architecture-swarm-topologies.html">Swarm Topologies</a> - Advanced multi-agent structures</li>
      </ul>
      <h4>Community Resources</h4>
      <ul>
        <li><a href="https://github.com/numman-ali/cc-mirror">CC Mirror</a> - Multi-agent orchestration</li>
        <li><a href="https://github.com/snarktank/ralph">Ralph</a> - PRD-driven loops</li>
        <li><a href="https://github.com/steveyegge/gastown">Gas Town</a> - Agent factory</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <div class="footer-nav" style="display: flex; justify-content: space-between; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #e0d5c5;">
      <a href="architecture-domain-isolation.html">Prev: Domain Isolation</a>
      <a href="architecture-swarm-topologies.html">Next: Swarm Topologies</a>
    </div>

  </div>

  <script src="../js/copy-code.js"></script>
  <script src="../js/search.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      setTimeout(() => button.textContent = 'Copy', 2000);
    }
  </script>
</body>
</html>
