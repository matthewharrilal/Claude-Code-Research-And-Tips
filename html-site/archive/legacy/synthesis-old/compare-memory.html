<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Comparisons">
  <title>Memory Approaches Compared - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
        <button class="filter-btn" data-filter="journeys">Journeys</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="compare-master.html">Comparisons</a>
      <span>/</span>
      <span>Memory</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;"><strong><span class="b">Mem</span>ory <span class="b">App</span>roaches <span class="b">Com</span>pared</strong> - Four memory strategies (progress.txt, Git History, AGENTS.md, Claude-Mem) for persisting knowledge across Claude Code sessions. Use this when your agent keeps "forgetting" context between sessions or when deciding how to store learnings.</p>
    </div>

    <h1><span class="b">Mem</span>ory <span class="b">App</span>roaches <span class="b">Com</span>pared</h1>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#same-goal">The Same Goal</a></li>
        <li><a href="#progress-txt">Approach 1: progress.txt</a></li>
        <li><a href="#git-history">Approach 2: Git History</a></li>
        <li><a href="#agents-md">Approach 3: AGENTS.md</a></li>
        <li><a href="#claude-mem">Approach 4: Claude-Mem / External Database</a></li>
        <li><a href="#comparison-matrix">Comparison Matrix</a></li>
        <li><a href="#layered-memory">Layered Memory Strategy</a></li>
        <li><a href="#migration-path">Migration Path</a></li>
        <li><a href="#anti-patterns">Anti-Patterns</a></li>
        <li><a href="#recommended-defaults">Recommended Defaults</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- The Same Goal -->
    <section id="same-goal">
      <h2><span class="b">The</span> Same <span class="b">Go</span>al</h2>

      <p>Every approach aims to solve the same fundamental problem: <strong>persist knowledge across sessions</strong>. Claude starts fresh each conversation. Without memory, every session is groundhog day.</p>
    </section>

    <hr class="section-divider">

    <!-- Approach 1: progress.txt -->
    <section id="progress-txt">
      <h2><span class="b">App</span>roach 1: <span class="b">pro</span>gress.txt</h2>

      <h3>How it works</h3>
      <ul>
        <li>Append-only text file in project root</li>
        <li>Often includes "Codebase Patterns" or "Session Learnings" sections</li>
        <li>Dated entries track what was discovered and when</li>
        <li>Agent appends before ending session</li>
      </ul>

      <h3>Pros</h3>
      <ul>
        <li><strong>Zero setup required</strong> - Just create a file</li>
        <li><strong>Human readable and editable</strong> - Plain text</li>
        <li><strong>Easy to update</strong> - Simple append operation</li>
        <li><strong>Visible in file tree</strong> - No hidden magic</li>
        <li><strong>Works with any tooling</strong> - Universal format</li>
      </ul>

      <h3>Cons</h3>
      <ul>
        <li><strong>Can grow large over time</strong> - Unbounded growth</li>
        <li><strong>No inherent structure or schema</strong> - Freeform chaos</li>
        <li><strong>Manual pruning needed periodically</strong> - Maintenance burden</li>
        <li><strong>No semantic search capability</strong> - grep only</li>
        <li><strong>Duplicates accumulate</strong> - Same discovery multiple times</li>
      </ul>

      <h3>Best for</h3>
      <ul>
        <li>Session memory and short-term learnings</li>
        <li>Scratchpad for current work</li>
        <li>Quick handoff between sessions</li>
        <li>Projects without complex memory needs</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Approach 2: Git History -->
    <section id="git-history">
      <h2><span class="b">App</span>roach 2: <span class="b">Git</span> History</h2>

      <h3>How it works</h3>
      <ul>
        <li>Commit messages encode decisions and context</li>
        <li>Branch state shows work in progress</li>
        <li>Diff history reveals code evolution</li>
        <li>PR descriptions capture rationale</li>
      </ul>

      <h3>Pros</h3>
      <ul>
        <li><strong>Already exists in every project</strong> - No extra setup</li>
        <li><strong>Structured timeline built-in</strong> - Natural chronology</li>
        <li><strong>No extra files to maintain</strong> - Part of workflow</li>
        <li><strong>Immutable record</strong> - Trustworthy history</li>
        <li><strong>Standard tooling support</strong> - Universal git commands</li>
      </ul>

      <h3>Cons</h3>
      <ul>
        <li><strong>Hard to query semantically</strong> - Keyword search only</li>
        <li><strong>Knowledge is implicit, not explicit</strong> - Must infer</li>
        <li><strong>Requires discipline in commit messages</strong> - GIGO</li>
        <li><strong>Can't store non-code learnings</strong> - Code-centric</li>
        <li><strong>git log archaeology is tedious</strong> - Slow discovery</li>
      </ul>

      <h3>Best for</h3>
      <ul>
        <li>Code evolution tracking</li>
        <li>Decision history ("why was this changed?")</li>
        <li>Rollback scenarios</li>
        <li>Audit trails</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Approach 3: AGENTS.md -->
    <section id="agents-md">
      <h2><span class="b">App</span>roach 3: <span class="b">AG</span>ENTS.md</h2>

      <h3>How it works</h3>
      <ul>
        <li>Permanent learnings document in project root</li>
        <li>Captures patterns, gotchas, and conventions</li>
        <li>Updated by agents when significant learning occurs</li>
        <li>Lives alongside CLAUDE.md (instructions) as knowledge base</li>
      </ul>

      <h3>Pros</h3>
      <ul>
        <li><strong>Long-term knowledge survives all sessions</strong> - Permanent</li>
        <li><strong>Both human and agent readable</strong> - Dual purpose</li>
        <li><strong>Curated signal, not noise</strong> - High quality</li>
        <li><strong>Version controlled with project</strong> - Tracked in git</li>
        <li><strong>Natural place for "project wisdom"</strong> - Central repository</li>
      </ul>

      <h3>Cons</h3>
      <ul>
        <li><strong>Requires manual curation</strong> - Active maintenance</li>
        <li><strong>Can become stale if not maintained</strong> - Knowledge rot</li>
        <li><strong>Single file limits organization</strong> - Flat structure</li>
        <li><strong>No automatic updates</strong> - Human judgment needed</li>
        <li><strong>Subjective what belongs</strong> - No clear criteria</li>
      </ul>

      <h3>Best for</h3>
      <ul>
        <li>Permanent project knowledge</li>
        <li>Team onboarding context</li>
        <li>Architectural decisions</li>
        <li>"Things we learned the hard way"</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Approach 4: Claude-Mem -->
    <section id="claude-mem">
      <h2><span class="b">App</span>roach 4: <span class="b">Cla</span>ude-Mem / External Database</h2>

      <h3>How it works</h3>
      <ul>
        <li>Semantic memory store (vector DB, structured DB, or hybrid)</li>
        <li>Compressed summaries of learnings</li>
        <li>Cross-session persistence with retrieval</li>
        <li>Often uses embeddings for similarity search</li>
      </ul>

      <h3>Pros</h3>
      <ul>
        <li><strong>Automatic memory formation</strong> - System handles it</li>
        <li><strong>Semantic search</strong> - "find related learnings"</li>
        <li><strong>Scales to massive knowledge bases</strong> - No limit</li>
        <li><strong>Cross-project knowledge possible</strong> - Organizational memory</li>
        <li><strong>Handles unstructured data well</strong> - Flexible input</li>
      </ul>

      <h3>Cons</h3>
      <ul>
        <li><strong>Requires setup and infrastructure</strong> - Configuration needed</li>
        <li><strong>External dependency to maintain</strong> - Ops burden</li>
        <li><strong>Less transparent</strong> - Black box feeling</li>
        <li><strong>Cost and complexity overhead</strong> - More expensive</li>
        <li><strong>Potential latency in retrieval</strong> - Performance impact</li>
      </ul>

      <h3>Best for</h3>
      <ul>
        <li>Long-running AI systems</li>
        <li>Large teams or organizations</li>
        <li>Cross-project knowledge sharing</li>
        <li>Systems requiring semantic retrieval</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Comparison Matrix -->
    <section id="comparison-matrix">
      <h2><span class="b">Com</span>parison <span class="b">Mat</span>rix</h2>

      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Factor</th>
              <th>progress.txt</th>
              <th>Git History</th>
              <th>AGENTS.md</th>
              <th>Claude-Mem</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><strong>Setup</strong></td><td>None</td><td>None</td><td>Low</td><td>Medium-High</td></tr>
            <tr><td><strong>Persistence</strong></td><td>Session</td><td>Forever</td><td>Forever</td><td>Forever</td></tr>
            <tr><td><strong>Query</strong></td><td>Manual/grep</td><td>Hard</td><td>Manual/grep</td><td>Semantic</td></tr>
            <tr><td><strong>Scale</strong></td><td>Medium</td><td>Good</td><td>Limited</td><td>Excellent</td></tr>
            <tr><td><strong>Structure</strong></td><td>Freeform</td><td>Rigid</td><td>Curated</td><td>Flexible</td></tr>
            <tr><td><strong>Maintenance</strong></td><td>Prune needed</td><td>Automatic</td><td>Curation</td><td>Automatic</td></tr>
            <tr><td><strong>Transparency</strong></td><td>Full</td><td>Full</td><td>Full</td><td>Variable</td></tr>
            <tr><td><strong>Human readable</strong></td><td>Yes</td><td>Partial</td><td>Yes</td><td>Depends</td></tr>
            <tr><td><strong>Cross-project</strong></td><td>No</td><td>No</td><td>No</td><td>Possible</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Checkpoint -->
    <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
      <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Memory Approaches</div>
      <p><strong>You should now understand:</strong></p>
      <ul>
        <li>The four memory approaches and their tradeoffs</li>
        <li>Which approach fits which persistence need</li>
        <li>How to query/search each memory type</li>
      </ul>
      <p><strong>If unclear:</strong> Re-read the Comparison Matrix or "Best for" sections above.</p>
    </div>

    <hr class="section-divider">

    <!-- Layered Memory Strategy -->
    <section id="layered-memory">
      <h2><span class="b">Lay</span>ered <span class="b">Mem</span>ory Strategy</h2>

      <div class="callout callout-insight">
        <div class="callout-title">Key Insight</div>
        <p><strong>Use ALL of them, each for its strength.</strong></p>
      </div>

      <h3>Layer 1: progress.txt (Session Memory)</h3>
      <div class="ascii-diagram">
What am I working on RIGHT NOW?
What did I just discover?
What should I pick up next session?</div>
      <ul>
        <li>Append during work</li>
        <li>Review at session start</li>
        <li>Prune after incorporating learnings elsewhere</li>
      </ul>

      <h3>Layer 2: Git History (Code Memory)</h3>
      <div class="ascii-diagram">
What changed and why?
What was the state before?
Who/what made this decision?</div>
      <ul>
        <li>Good commit messages are investment</li>
        <li>PR descriptions capture context</li>
        <li>Tags mark significant states</li>
      </ul>

      <h3>Layer 3: AGENTS.md (Project Memory)</h3>
      <div class="ascii-diagram">
What does this codebase NEED to know forever?
What gotchas will bite future agents?
What patterns define this project?</div>
      <ul>
        <li>Graduate from progress.txt when proven valuable</li>
        <li>Curate ruthlessly</li>
        <li>Review quarterly</li>
      </ul>

      <h3>Layer 4: Claude-Mem/DB (System Memory)</h3>
      <div class="ascii-diagram">
What have we learned across ALL projects?
What patterns recur?
What can be retrieved semantically?</div>
      <ul>
        <li>For sophisticated setups</li>
        <li>Organizational knowledge</li>
        <li>Long-term AI assistant memory</li>
      </ul>

      <h3>Memory Layer Summary</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Layer</th><th>Analogy</th><th>Purpose</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>progress.txt</strong></td><td>Working memory</td><td>What's active now</td></tr>
            <tr><td><strong>Git</strong></td><td>Episodic memory</td><td>What happened when</td></tr>
            <tr><td><strong>AGENTS.md</strong></td><td>Semantic memory</td><td>What we know</td></tr>
            <tr><td><strong>Claude-Mem</strong></td><td>Long-term store</td><td>Everything, searchable</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Migration Path -->
    <section id="migration-path">
      <h2><span class="b">Mig</span>ration <span class="b">Pa</span>th</h2>

      <div class="ascii-diagram">
Session Discovery
      |
      v
 progress.txt (temporary hold)
      |
      v
 Proven valuable? --> AGENTS.md (permanent)
      |
      v
 Cross-project relevance? --> Claude-Mem (semantic store)

Git captures code decisions throughout</div>
    </section>

    <hr class="section-divider">

    <!-- Anti-Patterns -->
    <section id="anti-patterns">
      <h2><span class="b">Anti</span>-Patterns</h2>

      <ol>
        <li><strong>Everything in progress.txt</strong> - becomes unreadable</li>
        <li><strong>Nothing in AGENTS.md</strong> - keeps rediscovering</li>
        <li><strong>Over-engineering Claude-Mem for simple project</strong> - complexity overhead</li>
        <li><strong>Ignoring git messages</strong> - losing free memory</li>
        <li><strong>Never pruning</strong> - noise overwhelms signal</li>
      </ol>
    </section>

    <hr class="section-divider">

    <!-- Recommended Defaults -->
    <section id="recommended-defaults">
      <h2><span class="b">Rec</span>ommended <span class="b">Def</span>aults</h2>

      <h3>Solo developer, small project:</h3>
      <p>progress.txt + good git messages</p>

      <h3>Team project, medium complexity:</h3>
      <p>progress.txt + AGENTS.md + disciplined git</p>

      <h3>Long-running AI system, organization:</h3>
      <p>All four layers, with automation</p>
    </section>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="b">Trou</span>bleshooting</h2>

      <details class="troubleshoot">
        <summary>progress.txt Becomes Unmanageable</summary>
        <div>
          <p><strong>Symptom:</strong> File is thousands of lines; agent references outdated information; search returns too many results.</p>
          <p><strong>Cause:</strong> Never pruned; everything accumulated without curation.</p>
          <p><strong>Fix:</strong> Archive old content to a dated backup, then prune to recent sessions only. Graduate valuable patterns to AGENTS.md.</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Check progress.txt size
wc -l scripts/ralph/progress.txt

# Archive and reset
mv scripts/ralph/progress.txt scripts/ralph/progress-archive-$(date +%Y%m%d).txt
echo "# Session Progress" > scripts/ralph/progress.txt</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Agent Keeps Rediscovering Same Patterns</summary>
        <div>
          <p><strong>Symptom:</strong> Same "Learned:" entries appearing in progress.txt across sessions; agent makes same mistakes repeatedly.</p>
          <p><strong>Cause:</strong> Knowledge not graduating from progress.txt to AGENTS.md; agent not reading AGENTS.md.</p>
          <p><strong>Fix:</strong> Create AGENTS.md with proven patterns. Ensure CLAUDE.md instructs agent to read AGENTS.md at session start.</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Create AGENTS.md if it doesn't exist
touch AGENTS.md

# Add to CLAUDE.md:
# "At session start, read AGENTS.md for permanent project knowledge."</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Git History Hard to Search</summary>
        <div>
          <p><strong>Symptom:</strong> Know something was changed but can't find when or why.</p>
          <p><strong>Cause:</strong> Poor commit messages; no semantic tagging; relying on implicit knowledge.</p>
          <p><strong>Fix:</strong> Improve commit message discipline. Use conventional commits. Consider adding <code>[DECISION]</code> or <code>[PATTERN]</code> tags.</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Search commit messages
git log --all --oneline --grep="auth"

# Search code changes
git log -p -S "functionName"

# Find commits by date range
git log --since="2026-01-01" --until="2026-01-15" --oneline</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Claude-Mem Retrieval Returns Irrelevant Results</summary>
        <div>
          <p><strong>Symptom:</strong> Semantic search returns tangentially related content; misses obviously relevant entries.</p>
          <p><strong>Cause:</strong> Poor embedding quality for your domain; retrieval threshold too loose/strict.</p>
          <p><strong>Fix:</strong> Tune similarity thresholds. Consider domain-specific embeddings. Fall back to keyword search for precision needs.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Memory Layers Out of Sync</summary>
        <div>
          <p><strong>Symptom:</strong> progress.txt says one thing, AGENTS.md says another, code comments say a third.</p>
          <p><strong>Cause:</strong> No graduation process; multiple sources of truth evolving independently.</p>
          <p><strong>Fix:</strong> Establish weekly memory maintenance: prune progress.txt, review AGENTS.md, archive stale content.</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Weekly memory audit script
echo "=== Memory Audit $(date) ==="
echo "progress.txt lines: $(wc -l < scripts/ralph/progress.txt)"
echo "AGENTS.md lines: $(wc -l < AGENTS.md)"
echo "Recent patterns in progress.txt:"
grep -i "pattern\|learned" scripts/ralph/progress.txt | tail -10</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="compare-orchestration.html">Orchestration Approaches Compared</a> - Ralph, PRD-Ralph, CC Mirror, Gas Town</li>
        <li><a href="compare-cost.html">Cost Optimization Compared</a> - Budget strategies for different scales</li>
        <li><a href="../journeys/implementation/context-state.html">Context & State Implementation</a> - Hands-on patterns</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="compare-orchestration.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Orchestration Compared</span>
      </a>
      <a href="compare-cost.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">Cost Compared</span>
      </a>
    </nav>

  </div>

  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <script src="../js/search.js"></script>
  <script src="../js/sidebar.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      button.classList.add('copied');
      setTimeout(() => {
        button.textContent = 'Copy';
        button.classList.remove('copied');
      }, 2000);
    }
  </script>
</body>
</html>
