<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Transformations">
  <title>Single Session to Autonomous | Transformations | Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
  <style>
    .you-are-here {
      background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%);
      border-left: 4px solid #2a7d7d;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    .bionic { font-weight: 700; }
    .checkpoint {
      background: #f0ebe3;
      border-left: 4px solid #6b9b7a;
      border-radius: 8px;
      padding: 1.5rem;
      margin: 2rem 0;
    }
    .checkpoint-header { color: #6b9b7a; font-weight: 600; margin-bottom: 0.5rem; }
    .milestone {
      background: linear-gradient(90deg, #6b9b7a 0%, #2a7d7d 100%);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      text-align: center;
      margin: 2rem 0;
    }
    .before-after-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin: 24px 0;
    }
    @media (max-width: 900px) {
      .before-after-container { grid-template-columns: 1fr; }
    }
    .before-box, .after-box {
      border-radius: 12px;
      padding: 20px;
    }
    .before-box {
      background: #fdf0ef;
      border: 2px solid var(--error);
    }
    .before-box h3, .before-box h4 { color: var(--error); margin-top: 0; }
    .after-box {
      background: #eef6f0;
      border: 2px solid var(--success);
    }
    .after-box h3, .after-box h4 { color: var(--success); margin-top: 0; }
    .code-block-wrapper {
      position: relative;
    }
    .context-meter {
      background: var(--code-bg);
      border-radius: 8px;
      padding: 16px;
      margin: 16px 0;
    }
    .context-bar {
      height: 24px;
      background: #e0d5c5;
      border-radius: 4px;
      overflow: hidden;
      margin: 8px 0;
    }
    .context-fill {
      height: 100%;
      transition: width 0.3s;
    }
    .context-fill.good { background: var(--success); }
    .context-fill.warning { background: var(--warning); }
    .context-fill.danger { background: var(--error); }
    .troubleshoot {
      border: 1px solid #c97065;
      border-radius: 8px;
      margin: 1rem 0;
    }
    .troubleshoot summary {
      background: #fef6f5;
      padding: 1rem;
      cursor: pointer;
      color: #c97065;
      font-weight: 600;
    }
    .troubleshoot > div {
      padding: 1rem;
    }
    .d-final-box {
      background: #f5f0e8;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
      font-size: 0.9em;
    }
    .d-final-box h4 {
      margin-top: 0;
      color: var(--heading);
    }
  </style>
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
        <button class="filter-btn" data-filter="journeys">Journeys</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <div class="container">
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="transform-master.html">Transformations</a>
      <span>/</span>
      <strong>Single to Autonomous</strong>
    </nav>

    <h1><span class="bionic">Tra</span>nsformation: <span class="bionic">Sin</span>gle Session to <span class="bionic">Per</span>sistent <span class="bionic">Aut</span>onomous</h1>

    <div class="you-are-here">
      <h3 style="margin-top: 0; color: var(--accent);"><span class="bionic">You</span> Are <span class="bionic">Her</span>e</h3>
      <p>This document shows the most important paradigm shift in Claude Code mastery: moving from single interactive sessions to autonomous overnight development. If you're tired of babysitting Claude and watching quality degrade after an hour, this transformation is for you. This connects to Level 2 (Ralph Wiggum Loop) on the complexity ladder and unlocks the ability to ship features while you sleep.</p>
      <p><strong>The Paradigm Shift:</strong> From "human babysitting AI" to "AI working while human sleeps"</p>
    </div>

    <div class="d-final-box">
      <h4>D-FINAL Integration</h4>
      <p><strong>Validates invariants:</strong> INV-1 (Context is constraint), INV-2 (External state over internal memory), INV-3 (Fresh context beats extended), INV-4 (Verification as trust boundary), INV-9 (Learning must compound)</p>
      <p><strong>Maps to complexity ladder:</strong> Level 1 (Single Session) to Level 2 (Ralph Wiggum Loop)</p>
      <p><strong>Cross-references:</strong> <a href="architecture-complexity-ladder.html">Complexity Ladder</a>, <a href="mastery-ralph-complete.html">Ralph Complete Guide</a></p>
    </div>

    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#the-task">The Task</a></li>
        <li><a href="#before">BEFORE: Single Interactive Session</a></li>
        <li><a href="#decision-point">Checkpoint: Decision Point</a></li>
        <li><a href="#after">AFTER: Persistent Autonomous (Ralph)</a></li>
        <li><a href="#under-the-hood">What Happens Under the Hood</a></li>
        <li><a href="#comparison">Side-by-Side Comparison</a></li>
        <li><a href="#mental-model">The Mental Model Shift</a></li>
        <li><a href="#when-to-use">When to Use Which</a></li>
        <li><a href="#quick-start">Quick Start</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <h2 id="the-task">The <span class="bionic">Tas</span>k</h2>

    <p>Build a user authentication feature with:</p>
    <ul>
      <li>Login form component</li>
      <li>Email validation</li>
      <li>Server action for authentication</li>
      <li>Unit tests</li>
    </ul>

    <p>This is a real, multi-part feature that would typically take 1-2 hours of focused development.</p>

    <hr class="section-divider">

    <h2 id="before"><span class="bionic">BEF</span>ORE: <span class="bionic">Sin</span>gle <span class="bionic">Int</span>eractive <span class="bionic">Ses</span>sion</h2>

    <div class="before-box" style="margin: 24px 0;">
      <h3>The Approach</h3>
      <p>Start Claude Code, prompt iteratively, manually manage context, stop when tired or context degrades.</p>
    </div>

    <h3>The <span class="bionic">Int</span>eraction</h3>

    <div class="code-block-wrapper">
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
      <pre><code># Session start
$ claude

You: Build a login form for my Next.js app

Claude: I'll create a login form component...
[Writes LoginForm.tsx with email/password fields]
[500 tokens used]

You: Now add client-side email validation

Claude: I'll add email validation to the form...
[Updates LoginForm.tsx with regex validation]
[1,200 tokens used]

You: Actually, let's use Zod for validation instead

Claude: Good idea. I'll refactor to use Zod...
[Rewrites validation logic, adds schema]
[2,100 tokens used]

You: Now create the server action

Claude: I'll create an auth server action...
[Creates auth/actions.ts]
[3,400 tokens used]

You: The server action needs to hash passwords with bcrypt

Claude: I'll add bcrypt for password hashing...
[Updates actions.ts]
[4,200 tokens used]

You: Now wire it up to the database

Claude: I'll add the database queries...
[Adds Prisma queries, updates schema]
[5,800 tokens used]

# 30 minutes in, context at 40%...

You: Write tests for the login functionality

Claude: I'll create comprehensive tests...
[Writes test file]
[7,500 tokens used]

You: The tests are failing

Claude: Let me check...
[Reads files, debugging]
[9,200 tokens used]

# 45 minutes in, context at 55%...

You: There's a type error in the server action

Claude: I see the issue... wait, let me re-read the schema...
[Re-reads files already read, context building]
[11,400 tokens used]

# 60 minutes in, context at 65%...
# Claude starts forgetting earlier decisions

You: Why did you change the validation back to regex?

Claude: I apologize, let me check what we decided...
[Has lost track of Zod decision]
[13,000 tokens used]

# 75 minutes in, context at 75%...
# Quality visibly degrading

You: The login form isn't rendering correctly

Claude: I'll fix the rendering...
[Makes changes that conflict with earlier work]
[15,500 tokens used]

# 90 minutes in, context at 85%...
# You're tired, Claude is confused

You: Just... run the tests again

Claude: Running tests... 3 failed, 2 passed
[Tests fail for reasons related to earlier context loss]

You: I give up for today
# Session ends with incomplete, buggy feature</code></pre>
    </div>

    <h3>The <span class="bionic">Pro</span>blems</h3>

    <div class="table-responsive">
      <table>
        <thead>
          <tr>
            <th>Issue</th>
            <th>Impact</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>Context degradation</strong></td><td>Quality drops after 60-70% context usage</td></tr>
          <tr><td><strong>Human must stay engaged</strong></td><td>90+ minutes of active participation</td></tr>
          <tr><td><strong>No persistence</strong></td><td>Session ends, state lost</td></tr>
          <tr><td><strong>Quality drops over time</strong></td><td>Late-session code worse than early</td></tr>
          <tr><td><strong>Cumulative confusion</strong></td><td>Earlier decisions forgotten</td></tr>
          <tr><td><strong>No recoverability</strong></td><td>Hard to resume where you left off</td></tr>
          <tr><td><strong>Manual testing</strong></td><td>Human must verify each step</td></tr>
        </tbody>
      </table>
    </div>

    <h3>What <span class="bionic">Con</span>text <span class="bionic">Deg</span>radation <span class="bionic">Loo</span>ks Like</h3>

    <div class="context-meter">
      <p><strong>0-50% Context:</strong> Full capability</p>
      <div class="context-bar"><div class="context-fill good" style="width: 50%;"></div></div>

      <p><strong>50-70% Context:</strong> Slight degradation possible</p>
      <div class="context-bar"><div class="context-fill warning" style="width: 70%;"></div></div>

      <p><strong>70-85% Context:</strong> Noticeable quality loss</p>
      <div class="context-bar"><div class="context-fill warning" style="width: 85%;"></div></div>

      <p><strong>85-95% Context:</strong> Instructions forgotten, contradictions</p>
      <div class="context-bar"><div class="context-fill danger" style="width: 95%;"></div></div>

      <p><strong>95%+ Context:</strong> Hallucinations, false completions</p>
      <div class="context-bar"><div class="context-fill danger" style="width: 100%;"></div></div>
    </div>

    <hr class="section-divider">

    <h2 id="decision-point"><span class="bionic">Che</span>ckpoint: <span class="bionic">Dec</span>ision Point - Is <span class="bionic">Ral</span>ph Right For This Task?</h2>

    <div class="checkpoint">
      <div class="checkpoint-header">Decision Point</div>
      <p><strong>Where you are:</strong> You've seen the pain of single-session context degradation. Now decide if Ralph is appropriate.</p>
      <p><strong>What this enables:</strong> Avoiding wasted setup time on tasks that don't benefit from autonomous loops.</p>

      <p><strong>Ask yourself:</strong></p>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Question</th><th>If YES</th><th>If NO</th></tr>
          </thead>
          <tbody>
            <tr><td>Does task have 3+ discrete steps?</td><td>Ralph candidate</td><td>Single session OK</td></tr>
            <tr><td>Will it take &gt; 30 min total?</td><td>Ralph candidate</td><td>Single session OK</td></tr>
            <tr><td>Do you have clear "done" criteria?</td><td>Ralph candidate</td><td>Need more planning</td></tr>
            <tr><td>Can each step be verified programmatically?</td><td>Ralph candidate</td><td>Need manual review</td></tr>
            <tr><td>Are you okay walking away?</td><td>Ralph candidate</td><td>Use HOTL Ralph</td></tr>
          </tbody>
        </table>
      </div>

      <p><strong>Quick decision flowchart:</strong></p>
      <div class="code-block-wrapper">
        <pre><code>Task &gt; 30 min AND has discrete parts AND verifiable?
    YES -&gt; Use Ralph (continue below)
    NO  -&gt; Stick with single session</code></pre>
      </div>

      <p><strong>If choosing Ralph, verify you have:</strong></p>
      <ul>
        <li>Clear feature goal (not exploratory)</li>
        <li>Existing test infrastructure (<code>npm test</code> works)</li>
        <li>Typecheck setup (<code>npm run typecheck</code> works)</li>
        <li>Git repository initialized</li>
      </ul>
    </div>

    <hr class="section-divider">

    <h2 id="after"><span class="bionic">AFT</span>ER: <span class="bionic">Per</span>sistent <span class="bionic">Aut</span>onomous (<span class="bionic">Ral</span>ph <span class="bionic">Pat</span>tern)</h2>

    <div class="after-box" style="margin: 24px 0;">
      <h3>The Approach</h3>
      <ol>
        <li>Create <code>prd.json</code> with small, atomic user stories</li>
        <li>Set up <code>ralph.sh</code> automation script</li>
        <li>Start the loop and walk away</li>
        <li>Wake up to completed feature</li>
      </ol>
    </div>

    <h3><span class="bionic">Fil</span>es <span class="bionic">Cre</span>ated</h3>

    <div class="tutorial-block">
      <div class="tutorial-header">prd.json - The Task Board</div>
      <div class="tutorial-content">
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code>{
  "project": "UserAuth",
  "branchName": "feat/user-auth",
  "description": "User authentication with login form, validation, and tests",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create login form component with email/password fields",
      "description": "Basic login form UI with styled inputs",
      "acceptanceCriteria": [
        "LoginForm component exists in components/auth/",
        "Has email input with type='email'",
        "Has password input with type='password'",
        "Has submit button",
        "npm run typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Add Zod schema for login validation",
      "description": "Client-side validation using Zod",
      "acceptanceCriteria": [
        "loginSchema defined with email and password fields",
        "Email validates format with .email()",
        "Password requires minimum 8 characters",
        "Schema exported from lib/validations/auth.ts",
        "npm run typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Integrate validation into login form",
      "description": "Wire Zod schema to form with error display",
      "acceptanceCriteria": [
        "Form uses react-hook-form with zodResolver",
        "Validation errors display below inputs",
        "Submit disabled when form invalid",
        "npm run typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Create auth server action",
      "description": "Server action for login authentication",
      "acceptanceCriteria": [
        "loginAction in app/auth/actions.ts",
        "Accepts email and password",
        "Uses bcrypt for password comparison",
        "Returns success/error response",
        "npm run typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Wire form to server action",
      "description": "Connect form submission to auth action",
      "acceptanceCriteria": [
        "Form calls loginAction on submit",
        "Loading state during submission",
        "Error messages from server displayed",
        "Redirect on success",
        "npm run typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Write unit tests for validation schema",
      "description": "Test Zod schema edge cases",
      "acceptanceCriteria": [
        "Tests in __tests__/auth/validation.test.ts",
        "Tests valid email formats",
        "Tests invalid email rejection",
        "Tests password length requirements",
        "npm run test passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Write unit tests for server action",
      "description": "Test loginAction logic",
      "acceptanceCriteria": [
        "Tests in __tests__/auth/actions.test.ts",
        "Tests successful login",
        "Tests invalid credentials",
        "Tests missing user",
        "Mocks database calls",
        "npm run test passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    }
  ]
}</code></pre>
        </div>

        <div class="why-matters">
          <p><strong>Why this structure works:</strong></p>
          <ul>
            <li>Each story is <strong>atomic</strong> (one context window)</li>
            <li>Dependencies are <strong>ordered by priority</strong></li>
            <li>Acceptance criteria are <strong>verifiable</strong></li>
            <li><code>passes: true/false</code> tracks completion state</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <div class="checkpoint-header">Checkpoint: After prd.json Creation</div>
      <p><strong>Where you are:</strong> You have a machine-readable task board with atomic user stories and acceptance criteria.</p>
      <p><strong>What this enables:</strong> Claude knows exactly what to work on. Each story fits in one iteration. Progress is trackable.</p>

      <p><strong>Verify your state:</strong></p>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Check prd.json exists and is valid
jq . scripts/ralph/prd.json

# Count user stories
jq '.userStories | length' scripts/ralph/prd.json

# Check first story structure
jq '.userStories[0] | keys' scripts/ralph/prd.json</code></pre>
      </div>

      <div class="expected-output">
        <p><strong>You should see:</strong></p>
        <pre>{
  "project": "UserAuth",
  "branchName": "feat/user-auth",
  ...
}

7                                        &larr; 7 atomic stories

["acceptanceCriteria", "description", "id", "notes", "passes", "priority", "title"]</pre>
      </div>

      <p><strong>Your PRD should have:</strong></p>
      <ul>
        <li>Each story completable in ~5-10 minutes</li>
        <li>Clear, verifiable acceptance criteria</li>
        <li><code>npm run typecheck passes</code> in every story</li>
        <li><code>passes: false</code> for all stories initially</li>
      </ul>

      <p><strong>If you don't see this:</strong></p>
      <ul>
        <li>Check: Is it valid JSON? (<code>jq . scripts/ralph/prd.json</code>)</li>
        <li>Check: Do all stories have acceptanceCriteria arrays?</li>
        <li>Check: Are priorities unique and sequential (1, 2, 3...)?</li>
        <li>Go back to: PRD template structure</li>
      </ul>
    </div>

    <div class="tutorial-block">
      <div class="tutorial-header">ralph.sh - The Automation Loop</div>
      <div class="tutorial-content">
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code>#!/bin/bash
set -e

MAX_ITERATIONS=${1:-25}
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" &amp;&amp; pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/../.." &amp;&amp; pwd)"

echo "========================================"
echo "  Ralph - Autonomous Development Loop"
echo "========================================"
echo "Max iterations: $MAX_ITERATIONS"
echo "Project root: $PROJECT_ROOT"
echo ""

cd "$PROJECT_ROOT"

for i in $(seq 1 $MAX_ITERATIONS); do
  echo ""
  echo "========================================"
  echo "  Iteration $i of $MAX_ITERATIONS"
  echo "========================================"
  echo ""

  # Run Claude with fresh context each iteration
  OUTPUT=$(claude --dangerously-skip-permissions &lt;&lt;'PROMPT' 2&gt;&amp;1 | tee /dev/stderr) || true
# Ralph Agent Instructions

## Your Context
You are one iteration in an autonomous development loop. You have NO memory of previous iterations.
Your memory comes from: git history, prd.json, and progress.txt.

## Your Task

1. Read `scripts/ralph/prd.json` to see all user stories
2. Read `scripts/ralph/progress.txt` for learnings from previous iterations
3. Verify you're on the correct git branch (create if needed)
4. Find the highest priority story where `passes: false`
5. Implement that ONE story completely
6. Run verification: `npm run typecheck` and `npm run test`
7. If passing:
   - Commit with message: `feat: [US-XXX] - [title]`
   - Update prd.json: set `passes: true` for this story
   - Append learnings to progress.txt
8. If failing:
   - Fix the issues
   - Try again (up to 3 attempts)
   - If still failing, log the blocker and move on

## Progress Log Format

APPEND to progress.txt (never edit previous entries):

---
## Iteration [N] - [Story ID] - [Date/Time]
- **Completed:** [what was done]
- **Files changed:** [list]
- **Learnings:** [patterns, gotchas discovered]
- **Blockers:** [any issues for next iteration]
---

## Stop Condition

If ALL stories in prd.json have `passes: true`, output exactly:
&lt;promise&gt;COMPLETE&lt;/promise&gt;

Otherwise, end your response normally after completing one story.
PROMPT

  # Check for completion signal
  if echo "$OUTPUT" | grep -q "&lt;promise&gt;COMPLETE&lt;/promise&gt;"; then
    echo ""
    echo "========================================"
    echo "  ALL STORIES COMPLETE!"
    echo "========================================"
    echo ""

    # Summary
    echo "Final status:"
    cat scripts/ralph/prd.json | jq '.userStories[] | {id, title, passes}'

    exit 0
  fi

  # Brief pause between iterations
  sleep 2
done

echo ""
echo "========================================"
echo "  Max iterations reached"
echo "========================================"
echo "Some stories may be incomplete. Check prd.json for status."
exit 1</code></pre>
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <div class="checkpoint-header">Checkpoint: After ralph.sh Creation</div>
      <p><strong>Where you are:</strong> You have an automation loop that spawns fresh Claude instances for each iteration.</p>
      <p><strong>What this enables:</strong> Context never degrades. Work compounds overnight. Human can sleep.</p>

      <p><strong>Verify your state:</strong></p>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Check script exists and is executable
ls -la scripts/ralph/ralph.sh
head -10 scripts/ralph/ralph.sh

# Dry run check (won't actually run Claude)
bash -n scripts/ralph/ralph.sh &amp;&amp; echo "Syntax OK"</code></pre>
      </div>

      <div class="expected-output">
        <p><strong>You should see:</strong></p>
        <pre>-rwxr-xr-x  scripts/ralph/ralph.sh      &larr; Must be executable

#!/bin/bash                             &larr; Correct shebang
set -e                                  &larr; Exit on error
MAX_ITERATIONS=${1:-25}                 &larr; Default iterations

Syntax OK                               &larr; No bash syntax errors</pre>
      </div>

      <p><strong>Your folder should look like:</strong></p>
      <pre>project/
+-- scripts/ralph/
|   +-- ralph.sh      &larr; YOU JUST CREATED THIS
|   +-- prd.json      &larr; Task definitions
|   +-- progress.txt  &larr; Will be created during runs
+-- CLAUDE.md
+-- src/</pre>

      <p><strong>Test single iteration:</strong></p>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>cd /path/to/project
./scripts/ralph/ralph.sh 1  # Run exactly 1 iteration</code></pre>
      </div>

      <p><strong>If you don't see this:</strong></p>
      <ul>
        <li>Check: Is script executable? (<code>chmod +x scripts/ralph/ralph.sh</code>)</li>
        <li>Check: Is <code>claude</code> in PATH? (<code>which claude</code>)</li>
        <li>Check: Are you in the project root?</li>
        <li>Go back to: Script creation step</li>
      </ul>
    </div>

    <div class="tutorial-block">
      <div class="tutorial-header">progress.txt - The Learning Log</div>
      <div class="tutorial-content">
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Ralph Progress Log
Project: UserAuth
Started: 2026-01-09

## Codebase Patterns
(Ralph updates this section with reusable patterns)

## Key Files
- components/auth/LoginForm.tsx
- lib/validations/auth.ts
- app/auth/actions.ts
- __tests__/auth/

---

## Iteration 1 - US-001 - 2026-01-09 02:15
- **Completed:** Created LoginForm component
- **Files changed:** components/auth/LoginForm.tsx
- **Learnings:** Project uses Tailwind, shadcn/ui components available
- **Blockers:** None

---

## Iteration 2 - US-002 - 2026-01-09 02:18
- **Completed:** Added Zod validation schema
- **Files changed:** lib/validations/auth.ts
- **Learnings:** Use .optional() for nullable fields in Zod
- **Blockers:** None

---
(Ralph continues appending...)</code></pre>
        </div>
      </div>
    </div>

    <h3><span class="bionic">Exe</span>cution</h3>

    <div class="code-block-wrapper">
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
      <pre><code># Make script executable
chmod +x scripts/ralph/ralph.sh

# Start Ralph with 25 max iterations
./scripts/ralph/ralph.sh 25

# Output:
# ========================================
#   Iteration 1 of 25
# ========================================
# [Claude implements US-001...]
# [Commits, updates prd.json, logs to progress.txt]
#
# ========================================
#   Iteration 2 of 25
# ========================================
# [Fresh Claude instance, reads state from files...]
# [Implements US-002...]
#
# ... (iterations continue) ...
#
# ========================================
#   ALL STORIES COMPLETE!
# ========================================

# Go to sleep at 11pm
# Wake up at 7am to:
# - 7 commits in git history
# - All tests passing
# - Complete authentication feature</code></pre>
    </div>

    <div class="checkpoint">
      <div class="checkpoint-header">Checkpoint: After First Complete Run</div>
      <p><strong>Where you are:</strong> Ralph has completed at least one full iteration. Progress is being logged. Work is committing.</p>
      <p><strong>What this enables:</strong> Confidence to run overnight. Verified that the loop works. Ready for autonomous operation.</p>

      <p><strong>Verify your state:</strong></p>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Check progress.txt has entries
cat scripts/ralph/progress.txt | head -20

# Check prd.json has some passes: true
jq '.userStories[] | select(.passes==true) | .id' scripts/ralph/prd.json

# Check git commits were made
git log --oneline -5</code></pre>
      </div>

      <div class="expected-output">
        <p><strong>You should see:</strong></p>
        <pre># Ralph Progress Log
Project: UserAuth
...
## Iteration 1 - US-001 - 2026-01-09 02:15
- **Completed:** Created LoginForm component    &larr; Work logged

"US-001"                                        &larr; At least one story passed

abc1234 feat: US-001 - Create login form       &larr; Commits appearing
def5678 feat: US-002 - Add Zod schema</pre>
      </div>

      <p><strong>Run status check:</strong></p>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Quick status of all stories
jq '.userStories | map({id, passes})' scripts/ralph/prd.json</code></pre>
      </div>

      <p><strong>If you don't see this:</strong></p>
      <ul>
        <li>Check: Did ralph.sh exit with error? (check terminal output)</li>
        <li>Check: Did Claude encounter permission issues?</li>
        <li>Check: Is <code>--dangerously-skip-permissions</code> in the script?</li>
        <li>Go back to: Run single iteration manually to debug</li>
      </ul>
    </div>

    <hr class="section-divider">

    <h2 id="under-the-hood"><span class="bionic">Wha</span>t <span class="bionic">Hap</span>pens <span class="bionic">Und</span>er the <span class="bionic">Hoo</span>d</h2>

    <div class="ascii-diagram">
Iteration 1 (2:00 AM)
+-- Fresh Claude instance spawns
+-- Reads: prd.json, progress.txt, CLAUDE.md
+-- Picks: US-001 (highest priority, passes: false)
+-- Implements: LoginForm.tsx
+-- Verifies: npm run typecheck (passes)
+-- Commits: "feat: US-001 - Create login form component"
+-- Updates: prd.json (US-001.passes = true)
+-- Appends: progress.txt with learnings
+-- Exits (context cleared)

Iteration 2 (2:05 AM)
+-- Fresh Claude instance spawns (NO MEMORY)
+-- Reads: prd.json (sees US-001 done)
+-- Reads: progress.txt (learns about Tailwind/shadcn)
+-- Picks: US-002 (next priority)
+-- Implements: Zod schema
+-- Verifies: npm run typecheck (passes)
+-- Commits: "feat: US-002 - Add Zod schema"
+-- Exits (context cleared)

... (pattern repeats) ...

Iteration 7 (2:35 AM)
+-- Fresh Claude instance spawns
+-- Reads: prd.json (all passes: true!)
+-- Outputs: &lt;promise&gt;COMPLETE&lt;/promise&gt;
+-- Script exits with success

You wake up at 7:00 AM to a complete feature.
    </div>

    <h3>The <span class="bionic">Ben</span>efits</h3>

    <div class="table-responsive">
      <table>
        <thead>
          <tr>
            <th>Benefit</th>
            <th>How It Works</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>Fresh context each iteration</strong></td><td>New Claude instance, 0% context usage</td></tr>
          <tr><td><strong>Quality maintained throughout</strong></td><td>No degradation from context buildup</td></tr>
          <tr><td><strong>No human babysitting</strong></td><td>Runs autonomously for hours</td></tr>
          <tr><td><strong>Overnight execution</strong></td><td>Start at 11pm, done by 2am</td></tr>
          <tr><td><strong>Recoverable state</strong></td><td>All progress in git + files</td></tr>
          <tr><td><strong>Compounding learnings</strong></td><td>progress.txt grows smarter</td></tr>
          <tr><td><strong>Verifiable progress</strong></td><td>Each story has acceptance criteria</td></tr>
          <tr><td><strong>Safe rollback</strong></td><td>Each commit is atomic</td></tr>
        </tbody>
      </table>
    </div>

    <hr class="section-divider">

    <h2 id="comparison"><span class="bionic">Sid</span>e-by-Side <span class="bionic">Com</span>parison</h2>

    <div class="table-responsive">
      <table class="comparison-table">
        <thead>
          <tr>
            <th>Aspect</th>
            <th>Before (Single Session)</th>
            <th>After (Ralph/Autonomous)</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>Context</strong></td><td>Degrades over 90 min</td><td>Fresh each 5-min iteration</td></tr>
          <tr><td><strong>Human</strong></td><td>Must stay engaged entire time</td><td>Can leave after setup</td></tr>
          <tr><td><strong>Quality</strong></td><td>Drops after 60% context</td><td>Maintained throughout</td></tr>
          <tr><td><strong>Duration</strong></td><td>90 min + human present</td><td>30 min setup + human asleep</td></tr>
          <tr><td><strong>Memory</strong></td><td>Lost when session ends</td><td>Persists in git + files</td></tr>
          <tr><td><strong>Recoverability</strong></td><td>Start over if session dies</td><td>Resume from last commit</td></tr>
          <tr><td><strong>Verification</strong></td><td>Manual after each step</td><td>Automated (typecheck/test)</td></tr>
          <tr><td><strong>Errors</strong></td><td>Compound in context</td><td>Isolated to one iteration</td></tr>
          <tr><td><strong>Debugging</strong></td><td>Hard (context pollution)</td><td>Easy (clean git history)</td></tr>
        </tbody>
      </table>
    </div>

    <hr class="section-divider">

    <h2 id="mental-model">The <span class="bionic">Men</span>tal <span class="bionic">Mod</span>el <span class="bionic">Shi</span>ft</h2>

    <div class="before-after-container">
      <div class="before-box">
        <h4>Before: AI as Pair Programmer</h4>
        <pre style="background: transparent; border: none; padding: 0;">Human &lt;-&gt; AI (continuous conversation)
        |
    Context fills
        |
    Quality drops
        |
    Human frustration</pre>
      </div>
      <div class="after-box">
        <h4>After: AI as Factory Worker</h4>
        <pre style="background: transparent; border: none; padding: 0;">Human -&gt; PRD -&gt; [Iter 1] -&gt; [Iter 2] -&gt; ... -&gt; Complete
                   |               |
               Fresh context   Fresh context
                   |               |
             Verified commit  Verified commit</pre>
      </div>
    </div>

    <hr class="section-divider">

    <h2 id="when-to-use"><span class="bionic">Whe</span>n to <span class="bionic">Use</span> <span class="bionic">Whi</span>ch</h2>

    <div class="recommendation">
      <p><strong>Use Single Session When:</strong></p>
      <ul>
        <li>Task is small (&lt; 30 minutes)</li>
        <li>Exploratory/discovery work</li>
        <li>You need to guide every decision</li>
        <li>Learning a new codebase together</li>
      </ul>
    </div>

    <div class="recommendation">
      <p><strong>Use Ralph/Autonomous When:</strong></p>
      <ul>
        <li>Feature has multiple discrete parts</li>
        <li>Work can span hours</li>
        <li>You want to sleep/do other things</li>
        <li>Quality must remain consistent</li>
        <li>You have clear acceptance criteria</li>
      </ul>
    </div>

    <hr class="section-divider">

    <h2 id="quick-start"><span class="bionic">Qui</span>ck <span class="bionic">Sta</span>rt: <span class="bionic">Tra</span>nsform <span class="bionic">You</span>r <span class="bionic">Wor</span>kflow</h2>

    <div class="tutorial-block">
      <div class="tutorial-header">Transform Any Feature</div>
      <div class="tutorial-content">
        <div class="tutorial-step">
          <div class="tutorial-step-number">1</div>
          <div class="tutorial-step-content">
            <h4>Take your feature request</h4>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">2</div>
          <div class="tutorial-step-content">
            <h4>Break it into 5-10 atomic stories</h4>
            <p>Each should be ~5 min of work</p>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">3</div>
          <div class="tutorial-step-content">
            <h4>Write acceptance criteria for each</h4>
            <p>Must be verifiable (tests, typecheck)</p>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">4</div>
          <div class="tutorial-step-content">
            <h4>Create prd.json with priorities</h4>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">5</div>
          <div class="tutorial-step-content">
            <h4>Set up ralph.sh</h4>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">6</div>
          <div class="tutorial-step-content">
            <h4>Run and walk away</h4>
            <div class="code-block-wrapper">
              <button class="copy-btn" onclick="copyCode(this)">Copy</button>
              <pre><code># The one command that replaces 90 minutes of babysitting
./ralph.sh 25</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <div class="checkpoint-header">Final Checkpoint: Transformation Complete</div>
      <p><strong>Where you are:</strong> You've gone from single-session pair programming to autonomous overnight development.</p>
      <p><strong>What this enables:</strong> The paradigm shift - AI works while you sleep, quality maintained, progress compounding.</p>

      <p><strong>Verify your transformation:</strong></p>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Check all stories completed
jq '.userStories | map(select(.passes==false)) | length' scripts/ralph/prd.json
# Should return: 0 (all complete)

# Check commits from overnight run
git log --oneline --since="yesterday" | wc -l
# Should show: 7+ commits (one per story)

# Check tests still pass
npm test
# Should: all pass</code></pre>
      </div>

      <div class="expected-output">
        <p><strong>You should see:</strong></p>
        <pre>0                                   &larr; no incomplete stories
7                                   &larr; 7 commits overnight
All tests pass                      &larr; code quality maintained</pre>
      </div>

      <p><strong>The transformation is complete when:</strong></p>
      <ul>
        <li>All stories have <code>passes: true</code></li>
        <li>Git history shows clean, atomic commits</li>
        <li>Tests pass (no quality degradation)</li>
        <li>Feature works as specified</li>
        <li>You did something else while it ran (slept, worked on other things)</li>
      </ul>

      <p><strong>What you've achieved:</strong></p>
      <pre>BEFORE                          AFTER
========================================
90 min active work       -&gt;     30 min setup + sleep
Context degradation      -&gt;     Fresh context each iteration
Manual verification      -&gt;     Automated tests
Lost state on crash      -&gt;     Recoverable from git
Quality drops over time  -&gt;     Consistent quality throughout
Human bottleneck         -&gt;     Autonomous scaling</pre>
    </div>

    <div class="milestone">
      Congratulations. You've shipped while you slept.
    </div>

    <hr class="section-divider">

    <h2 id="troubleshooting"><span class="bionic">Tro</span>ubleshooting</h2>

    <details class="troubleshoot">
      <summary>Ralph Exits After First Iteration</summary>
      <div>
        <p><strong>Symptom:</strong> Script runs once, then stops. Terminal shows completion but only 1 commit in git log.</p>
        <p><strong>Cause:</strong> The <code>&lt;promise&gt;COMPLETE&lt;/promise&gt;</code> signal was emitted incorrectly, or all stories were marked <code>passes: true</code> when they shouldn't be.</p>
        <p><strong>Fix:</strong></p>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Check prd.json for premature completion
jq '.userStories | map(select(.passes==true)) | length' scripts/ralph/prd.json

# If all marked true but shouldn't be, reset:
jq '.userStories |= map(.passes = false)' scripts/ralph/prd.json &gt; tmp.json &amp;&amp; mv tmp.json scripts/ralph/prd.json

# Rerun with verbose output
./scripts/ralph/ralph.sh 5 2&gt;&amp;1 | tee ralph-debug.log</code></pre>
        </div>
      </div>
    </details>

    <details class="troubleshoot">
      <summary>Claude Gets Stuck in Retry Loop</summary>
      <div>
        <p><strong>Symptom:</strong> Same story keeps failing, iteration count climbing without progress.</p>
        <p><strong>Cause:</strong> Story has acceptance criteria that can't pass (missing dependency, impossible test, wrong assumption).</p>
        <p><strong>Fix:</strong></p>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Check which story is stuck
jq '.userStories | map(select(.passes==false)) | .[0]' scripts/ralph/prd.json

# Check progress.txt for error patterns
grep -A5 "Blockers:" scripts/ralph/progress.txt | tail -20

# If story is truly blocked, split it or add missing dependency:
# 1. Edit prd.json to split large story into smaller parts
# 2. Or add new story for the missing prerequisite
# 3. Reset iteration count: ./scripts/ralph/ralph.sh 25</code></pre>
        </div>
      </div>
    </details>

    <details class="troubleshoot">
      <summary>Tests Pass Locally But Story Marked Failed</summary>
      <div>
        <p><strong>Symptom:</strong> <code>npm test</code> shows green but prd.json still has <code>passes: false</code>.</p>
        <p><strong>Cause:</strong> Claude didn't update prd.json after verification passed (incomplete prompt following).</p>
        <p><strong>Fix:</strong></p>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Manually verify tests pass
npm run typecheck &amp;&amp; npm run test

# If passing, manually update prd.json
jq '.userStories |= map(if .id == "US-XXX" then .passes = true else . end)' scripts/ralph/prd.json &gt; tmp.json &amp;&amp; mv tmp.json scripts/ralph/prd.json

# Continue from next story
./scripts/ralph/ralph.sh 25</code></pre>
        </div>
      </div>
    </details>

    <details class="troubleshoot">
      <summary>Permission Denied Errors</summary>
      <div>
        <p><strong>Symptom:</strong> Script fails with "permission denied" or Claude can't write files.</p>
        <p><strong>Cause:</strong> Missing <code>--dangerously-skip-permissions</code> flag or script not executable.</p>
        <p><strong>Fix:</strong></p>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Make script executable
chmod +x scripts/ralph/ralph.sh

# Verify the flag is in the script
grep "dangerously-skip-permissions" scripts/ralph/ralph.sh

# If missing, add to the claude invocation:
# claude --dangerously-skip-permissions &lt;&lt;'PROMPT'</code></pre>
        </div>
      </div>
    </details>

    <details class="troubleshoot">
      <summary>Context Too Large for Single Story</summary>
      <div>
        <p><strong>Symptom:</strong> Iteration completes but work is incomplete. Output mentions "running out of space" or changes seem truncated.</p>
        <p><strong>Cause:</strong> User story is too large for one context window. Single iteration should be ~5-10 minutes of work.</p>
        <p><strong>Fix:</strong></p>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Check story size (acceptance criteria count)
jq '.userStories[] | {id, criteria_count: (.acceptanceCriteria | length)}' scripts/ralph/prd.json

# If any story has &gt;5 acceptance criteria, split it:
# US-002 (8 criteria) -&gt; US-002a (4 criteria) + US-002b (4 criteria)

# Add dependencies: US-002b depends on US-002a</code></pre>
        </div>
      </div>
    </details>

    <details class="troubleshoot">
      <summary>Git Commits Not Appearing</summary>
      <div>
        <p><strong>Symptom:</strong> Work is done in progress.txt but <code>git log</code> shows no new commits.</p>
        <p><strong>Cause:</strong> Claude didn't commit, or commits are on wrong branch.</p>
        <p><strong>Fix:</strong></p>
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Check current branch
git branch --show-current

# Check if on the expected feature branch
git branch -a | grep $(jq -r '.branchName' scripts/ralph/prd.json)

# If work exists but not committed:
git status
git add -A &amp;&amp; git commit -m "feat: manual catchup commit"

# If on wrong branch, stash and move:
git stash
git checkout $(jq -r '.branchName' scripts/ralph/prd.json)
git stash pop</code></pre>
        </div>
      </div>
    </details>

    <hr class="section-divider">

    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="mastery-ralph-complete.html">Ralph Pattern Complete Guide</a></li>
        <li><a href="architecture-complexity-ladder.html">Complexity Ladder (Level 0-7)</a></li>
        <li><a href="transform-manual-to-filesystem.html">Transform: Manual to Filesystem State</a></li>
        <li><a href="transform-prompt-to-agent.html">Transform: Prompt to Agent Engineering</a></li>
      </ul>
    </div>

    <div class="footer-nav">
      <a href="transform-master.html" class="nav-prev">
        <span class="nav-direction">&larr; Previous</span>
        <span class="nav-title">All Transformations</span>
      </a>
      <a href="transform-prompt-to-agent.html" class="nav-next">
        <span class="nav-direction">Next &rarr;</span>
        <span class="nav-title">Prompt to Agent</span>
      </a>
    </div>

  </div>

  <script>
    function copyCode(btn) {
      const pre = btn.parentElement.querySelector('pre');
      const code = pre.querySelector('code') || pre;
      navigator.clipboard.writeText(code.textContent);
      btn.textContent = 'Copied!';
      setTimeout(() => btn.textContent = 'Copy', 2000);
    }
  </script>
  <script src="../js/copy-code.js"></script>
  <script src="../js/search.js"></script>
  <script src="../js/global-nav.js"></script>
</body>
</html>
