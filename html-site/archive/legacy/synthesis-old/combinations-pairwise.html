<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Combinations">
  <title>Pairwise Combination Analysis - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="combinations-master.html">Combinations</a>
      <span>/</span>
      <span>Pairwise</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;">This document goes deep on <strong>two-pattern combinations</strong>, showing exactly what happens when you combine patterns in pairs. While <a href="combinations-matrix.html">combinations-matrix.html</a> tells you WHAT works together, this document explains HOW and WHY those combinations unlock new capabilities. Use this when planning your first multi-pattern workflow.</p>
    </div>

    <h1><span class="bionic">Pai</span>rwise <span class="bionic">Com</span>bination <span class="bionic">Ana</span>lysis</h1>

    <p class="conversational-lead">
      This <span class="bionic">doc</span>ument analyzes what happens when you combine two patterns together, revealing emergent capabilities that neither pattern provides alone.
    </p>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#loop-tool">Loop + Tool Combinations</a></li>
        <li><a href="#orchestration-verification">Orchestration + Verification Combinations</a></li>
        <li><a href="#memory-learning">Memory + Learning Combinations</a></li>
        <li><a href="#mobility-notification">Mobility + Notification Combinations</a></li>
        <li><a href="#isolation-coordination">Isolation + Coordination Combinations</a></li>
        <li><a href="#tooling-workflow">Tooling + Workflow Combinations</a></li>
        <li><a href="#philosophy-implementation">Philosophy + Implementation Combinations</a></li>
        <li><a href="#combination-matrix">Combination Matrix Summary</a></li>
        <li><a href="#implementation-priority">Implementation Priority</a></li>
        <li><a href="#anti-patterns">Anti-Patterns to Avoid</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- Loop + Tool Combinations -->
    <section id="loop-tool">
      <h2><span class="bionic">Loo</span>p + <span class="bionic">Too</span>l <span class="bionic">Com</span>binations</h2>

      <h3>Ralph + Playwright (Browser Automation)</h3>
      <p><strong>Source:</strong> @weswinder - "opus 4.5 with ralph wiggum and playwright is agi"</p>

      <h4>What It Enables</h4>
      <ul>
        <li>Visual verification in iterative loops</li>
        <li>UI changes confirmed via screenshot, not just tests</li>
        <li>Real-world feedback prevents "feature complete but broken" syndrome</li>
        <li>Each iteration can prove the UI actually works</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># In prd.json acceptance criteria
"acceptanceCriteria": [
  "Button renders correctly",
  "npm run typecheck passes",
  "Playwright screenshot shows button at expected position"
]</code></pre>
      </div>

      <blockquote>
        <p>"Put costly tools like browser control in subagents to protect your main context window tokens"</p>
        <cite>-- @TendiesOfWisdom</cite>
      </blockquote>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
Ralph Loop (Main Agent)
    |
    +-- Pick story
    +-- Implement
    +-- Run typecheck/tests
    |
    +-- Spawn Playwright Subagent --> Take screenshot
                                      Return verification
    |
    +-- If verified: commit, mark passes: true
      </div>

      <p><strong>ROI:</strong> Very High - Catches visual regressions that unit tests miss</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Ralph + MCP Tools</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Database operations verified per iteration</li>
        <li>API integrations tested automatically</li>
        <li>File operations across multiple systems</li>
        <li>Each story can verify end-to-end functionality</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>// prd.json with MCP verification
{
  "id": "US-003",
  "title": "Add user to database",
  "acceptanceCriteria": [
    "User created in PostgreSQL",
    "MCP verify: SELECT * FROM users WHERE email = 'test@test.com' returns 1 row",
    "npm run typecheck passes"
  ],
  "passes": false
}</code></pre>
      </div>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
Ralph Iteration
    |
    +-- Implement database change
    +-- Run migration
    |
    +-- MCP SQLite/Postgres --> Verify data state
    |
    +-- Tests pass --> Commit
      </div>

      <p><strong>ROI:</strong> High - Database state validated automatically</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Ralph + Claude-Mem (Persistent Memory)</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Semantic memory augments file-based memory</li>
        <li>Avoid repeating mistakes from previous sessions (not just iterations)</li>
        <li>Pattern recognition across projects, not just within</li>
        <li>"Did I solve this before?" becomes queryable</li>
      </ul>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
Claude-Mem (Background Service)
    |
    +-- Captures: All tool calls, decisions, patterns
    +-- Stores: SQLite + Chroma Vector DB
           |
           v
Ralph Loop (Iteration N)
    |
    +-- Query: "Authentication patterns from last week"
    +-- Inject: Relevant memories into context
    +-- Execute: Current story with enriched context
    +-- Log: New learnings back to Claude-Mem
      </div>

      <h4>Avoids Dead Ends</h4>
      <ul>
        <li>Memory surfaces "Last time this approach failed because..."</li>
        <li>Reduces iteration count by learning from past sessions</li>
      </ul>

      <p><strong>ROI:</strong> High - Compounds learning across days/weeks, not just iterations</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Ralph + Claude HUD (Monitoring)</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Real-time visibility into Ralph's progress</li>
        <li>Context usage tracking prevents overflow mid-story</li>
        <li>Subagent activity visible during verification</li>
        <li>Early warning when iteration is going wrong</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <pre><code># Terminal 1: Run Ralph
./ralph.sh 25

# Terminal 2 (visible): HUD shows
[Opus 4.5] ######## 35% | 1 MCPs | timer 5m
check Read x4 | check Edit x2 | spinner Bash (npm test)
Todo: 3/7 complete</code></pre>
      </div>

      <div class="callout callout-insight">
        <div class="callout-title">Key Insight</div>
        <p>If context hits 80%+ before story complete, the story is too big - split it.</p>
      </div>

      <p><strong>ROI:</strong> Medium-High - Debugging and confidence in autonomous runs</p>
    </section>

    <hr class="section-divider">

    <!-- Orchestration + Verification Combinations -->
    <section id="orchestration-verification">
      <h2><span class="bionic">Orc</span>hestration + <span class="bionic">Ver</span>ification <span class="bionic">Com</span>binations</h2>

      <h3>CC Mirror + Hooks (Quality Gates)</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>PostToolUse hooks enforce formatting on all agent outputs</li>
        <li>PreToolUse hooks can block dangerous operations</li>
        <li>Multi-agent work stays consistent with auto-formatting</li>
        <li>Security gates apply to all agents uniformly</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>// ~/.claude/settings.json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit",
        "hooks": [{ "type": "command", "command": "prettier --write $FILE" }]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [{ "type": "command", "command": "~/.claude/hooks/security-gate.sh" }]
      }
    ]
  }
}</code></pre>
      </div>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
CC Mirror Orchestrator
    |
    +-- Spawns Worker Agent 1 --> Edits file.ts
    |                              |
    |                              +-- PostToolUse Hook: prettier --write
    |
    +-- Spawns Worker Agent 2 --> Edits file.py
    |                              |
    |                              +-- PostToolUse Hook: black --quiet
    |
    +-- All outputs consistently formatted
      </div>

      <p><strong>ROI:</strong> High - Quality enforcement without manual intervention</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Subagents + Git Worktrees</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>True isolation: Each agent works in separate worktree</li>
        <li>No file conflicts between parallel agents</li>
        <li>Git-based coordination (shared history, separate working copies)</li>
        <li>Merge at the end with human review</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Spawn isolated agent in worktree
spawn_isolated_agent() {
  local task_id=$1
  local branch="agent-$task_id"

  git worktree add ../worktrees/$branch -b $branch
  (cd ../worktrees/$branch && claude "Implement feature X") &
}

# Merge results
merge_agent_work() {
  local branch=$1
  git merge ../worktrees/$branch
  git worktree remove ../worktrees/$branch
}</code></pre>
      </div>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
Main Repo (.git/)
    |
    +-- Worktree A (/auth-agent/)
    |   +-- Agent 1: Implements auth
    |
    +-- Worktree B (/payment-agent/)
    |   +-- Agent 2: Implements payments
    |
    +-- Worktree C (/ui-agent/)
        +-- Agent 3: Implements UI

All share git history, no conflicts during work.
Human merges at end.
      </div>

      <p><strong>ROI:</strong> Very High - Enables true parallel development without pain</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>CC Mirror + Task Decomposition</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Automatic dependency tracking (blocked_by relationships)</li>
        <li>Agents self-organize around available tasks</li>
        <li>Visual tracking of multi-agent progress</li>
        <li>Recovery when agents fail (task reverts to pending)</li>
      </ul>

      <h4>Demo Output</h4>
      <div class="code-block">
        <pre><code>Tasks:
[check] #1 Design API architecture
[ ] #2 Create project structure
[ ] #3 Implement data models
[blocked] #4 Implement REST API endpoints (blocked by #3)
[blocked] #5 Write integration tests (blocked by #4)</code></pre>
      </div>

      <p><strong>ROI:</strong> High - Natural workflow without manual orchestration</p>
    </section>

    <hr class="section-divider">

    <!-- Memory + Learning Combinations -->
    <section id="memory-learning">
      <h2><span class="bionic">Mem</span>ory + <span class="bionic">Lea</span>rning <span class="bionic">Com</span>binations</h2>

      <h3>progress.txt + AGENTS.md</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Short-term memory (progress.txt) informs current session</li>
        <li>Long-term memory (AGENTS.md) compounds across all sessions</li>
        <li>Patterns discovered in iteration 3 help iteration 13</li>
        <li>Human-readable documentation as side effect</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># progress.txt (ephemeral, session-scoped)
## Codebase Patterns
- Migrations: Use IF NOT EXISTS
- React: useRef&lt;Timeout | null&gt;(null)

## 2026-01-09 - US-003
- Implemented auth middleware
- Learned: Always check token expiry

---

# AGENTS.md (permanent, in repo)
## Authentication Module
When modifying auth:
- Tokens expire after 24h
- Refresh tokens in separate table
- Always hash with bcrypt, never SHA</code></pre>
      </div>

      <h4>Compounding Effect</h4>
      <div class="ascii-diagram">
Iteration 1: Learns migration pattern
  --> Appends to progress.txt

Iteration 5: Reads pattern, avoids mistake
  --> Updates AGENTS.md with key insight

Future Session: Agent reads AGENTS.md
  --> Applies learning immediately
      </div>

      <p><strong>ROI:</strong> Very High - Knowledge compounds exponentially</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Git History + Claude-Mem</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Structured memory (git) + semantic memory (Claude-Mem)</li>
        <li>"Why did we change this file?" becomes queryable</li>
        <li>Commit messages + vector search = rich context</li>
        <li>Debug by asking "What happened to auth last week?"</li>
      </ul>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
Git History
    |
    +-- Commit: "feat: add JWT refresh"
    +-- Commit: "fix: token expiry bug"
    +-- Structured, exact, searchable
           |
           v
Claude-Mem Vector DB
    |
    +-- Observation: "Refresh tokens needed because..."
    +-- Pattern: "Always verify token in middleware"
    +-- Semantic, fuzzy, contextual
      </div>

      <p><strong>ROI:</strong> High - Two memory systems complement each other</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>prd.json + Git Commits</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Each commit maps to a user story</li>
        <li>Bisect failures to specific features</li>
        <li>Rollback atomic: revert story, not random changes</li>
        <li>Audit trail: who/what/when for each feature</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Ralph commit pattern
git commit -m "feat: [US-003] - Add login form"

# Easy to find what changed for a story
git log --grep="US-003"

# Rollback entire feature
git revert $(git log --grep="US-003" --format="%H")</code></pre>
      </div>

      <p><strong>ROI:</strong> High - Clean git history enables debugging</p>
    </section>

    <hr class="section-divider">

    <!-- Mobility + Notification Combinations -->
    <section id="mobility-notification">
      <h2><span class="bionic">Mob</span>ility + <span class="bionic">Not</span>ification <span class="bionic">Com</span>binations</h2>

      <h3>Mobile Claude Code + Hooks (Poke/ntfy)</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Work starts on desktop, continues on phone</li>
        <li>Push notification when Claude needs input</li>
        <li>Reply from anywhere to unblock agent</li>
        <li>Truly async development workflow</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>// ~/.claude/settings.json
{
  "hooks": {
    "PreToolUse": [{
      "matcher": "AskUserQuestion",
      "hooks": [{
        "type": "command",
        "command": "~/.claude/hooks/poke-notify.sh"
      }]
    }]
  }
}</code></pre>
      </div>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# ~/.claude/hooks/poke-notify.sh
QUESTION=$(echo "$EVENT_DATA" | jq -r '.tool_input.questions[0].question')
curl -X POST "$POKE_API_URL" -d "{\"message\": \"Claude needs input: $QUESTION\"}"</code></pre>
      </div>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
Desktop (start task) --> Claude runs autonomously
                           |
                           +-- Needs input
                                  |
                                  +-- Hook fires --> Push notification
                                                       |
Mobile &lt;----------------------------------------------+
    |
    +-- SSH to VM --> Answer question --> Claude continues
      </div>

      <p><strong>ROI:</strong> Very High - Multiplies productive time</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>tmux + rpai (Multi-Agent Monitor)</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Run multiple agents in tmux panes</li>
        <li>rpai provides unified dashboard view</li>
        <li>Jump to any agent with one keystroke</li>
        <li>See all agent outputs simultaneously</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Start agents in tmux
tmux new-session -d -s agents
tmux split-window -h
tmux send-keys -t agents:0.0 'claude "Build auth"' Enter
tmux send-keys -t agents:0.1 'claude "Build payments"' Enter

# Monitor all with rpai
cargo install rpai
rpai</code></pre>
      </div>

      <h4>Dashboard View</h4>
      <div class="code-block">
        <pre><code>+---------------------------------------------+
|  RPAI - Agent Monitor                       |
+---------------------------------------------+
|  [1] CLAUDE: Build auth    ###### running   |
|  [2] CLAUDE: Build payments###### idle      |
|  [3] CLAUDE: Write tests   ###### running   |
+---------------------------------------------+
|  Preview: Claude is editing auth.ts...      |
+---------------------------------------------+</code></pre>
      </div>

      <p><strong>ROI:</strong> Medium-High - Essential for parallel agent workflows</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Panopticon + Cron Jobs</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Scheduled agent runs across life domains</li>
        <li>Morning briefs generated overnight</li>
        <li>Continuous monitoring without manual triggers</li>
        <li>"Autonomous departments" for different areas</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># crontab -e
0 6 * * * cd ~/trades && claude "Generate morning brief" > brief.md
0 2 * * * cd ~/metrics && claude "Analyze yesterday's data" > report.md
*/30 * * * * cd ~/email && claude "Draft replies to urgent" > drafts.md</code></pre>
      </div>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
Cron Scheduler
    |
    +-- 6:00 AM: ~/trades agent --> Morning brief
    +-- 2:00 AM: ~/metrics agent --> Daily report
    +-- Every 30m: ~/email agent --> Draft replies
    |
    +-- All run independently, file-based memory
      </div>

      <p><strong>ROI:</strong> Very High - Continuous automation without supervision</p>
    </section>

    <hr class="section-divider">

    <!-- Isolation + Coordination Combinations -->
    <section id="isolation-coordination">
      <h2><span class="bionic">Iso</span>lation + <span class="bionic">Coo</span>rdination <span class="bionic">Com</span>binations</h2>

      <h3>Panopticon + File-Based Handoffs</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Isolated agents share context explicitly</li>
        <li>No cross-contamination of context windows</li>
        <li>Handoff files as "messages" between domains</li>
        <li>Agents can build on each other's work</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>// ~/shared/handoff-metrics-to-growth.json
{
  "from": "metrics-agent",
  "to": "growth-agent",
  "timestamp": "2026-01-09T06:00:00Z",
  "context": {
    "top_performing_content": ["post-123", "post-456"],
    "engagement_patterns": "Morning posts perform 2x better",
    "suggested_actions": ["Schedule more AM content"]
  }
}</code></pre>
      </div>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
~/metrics (Agent A)
    |
    +-- Analyzes performance
    +-- Writes: ~/shared/handoff-metrics-to-growth.json
                   |
                   v
~/growth (Agent B)
    |
    +-- Reads handoff file
    +-- Acts on recommendations
      </div>

      <p><strong>ROI:</strong> High - Coordination without shared context overhead</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Docker Containers + Shared Volumes</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Per-agent isolated environments</li>
        <li>Shared filesystem for coordination</li>
        <li>Different agents can have different dependencies</li>
        <li>Reproducible environments per agent type</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># docker-compose.yml
services:
  agent-frontend:
    image: claude-agent
    volumes:
      - ./project:/workspace:ro
      - ./shared:/shared
    environment:
      - AGENT_ROLE=frontend

  agent-backend:
    image: claude-agent
    volumes:
      - ./project:/workspace:ro
      - ./shared:/shared
    environment:
      - AGENT_ROLE=backend</code></pre>
      </div>

      <p><strong>ROI:</strong> High for Production - Clean isolation with coordination</p>
    </section>

    <hr class="section-divider">

    <!-- Checkpoint: Tooling + Workflow Patterns -->
    <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
      <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Tooling + Workflow Patterns</div>
      <p><strong>You should now understand:</strong></p>
      <ul>
        <li>How skills from sub-agents.directory integrate with Claude Code</li>
        <li>The context percentage thresholds for task sizing decisions (50%, 70%, 85%)</li>
        <li>How auto-formatting hooks maintain code quality automatically</li>
        <li>The relationship between HUD visibility and workflow decisions</li>
      </ul>
      <p><strong>If unclear:</strong> Re-read the Skills + Sub-Agents Directory section for skill loading patterns, and Claude HUD + Context-Aware Task Sizing for the decision matrix.</p>
    </div>

    <hr class="section-divider">

    <!-- Tooling + Workflow Combinations -->
    <section id="tooling-workflow">
      <h2><span class="bionic">Too</span>ling + <span class="bionic">Wor</span>kflow <span class="bionic">Com</span>binations</h2>

      <h3>Skills (.md) + Sub-Agents Directory</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Pre-built prompts from directory (200+)</li>
        <li>Load as skills for on-demand use</li>
        <li>Specialization without building from scratch</li>
        <li>Community-maintained, battle-tested</li>
      </ul>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
sub-agents.directory
    |
    +-- 200+ prompts (YAML/Markdown)
           |
           v
.claude/agents/
    |
    +-- Loaded on-demand by Claude Code
           |
           v
/agents command
    |
    +-- Spawns specialist for task
      </div>

      <p><strong>ROI:</strong> Very High - Instant access to specialized agents</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Claude HUD + Context-Aware Task Sizing</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Real-time context percentage visible</li>
        <li>Split stories before they overflow</li>
        <li>Predictable iteration success</li>
        <li>"Story too big" signal early</li>
      </ul>

      <h4>Decision Matrix</h4>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Context %</th><th>Action</th></tr>
          </thead>
          <tbody>
            <tr><td>&lt;50%</td><td>Full speed ahead</td></tr>
            <tr><td>50-70%</td><td>Monitor closely</td></tr>
            <tr><td>70-85%</td><td>Consider splitting</td></tr>
            <tr><td>&gt;85%</td><td>Split now or abort</td></tr>
          </tbody>
        </table>
      </div>

      <p><strong>ROI:</strong> High - Prevents wasted iterations</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Hooks + Auto-Formatting</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Every file Claude touches is formatted</li>
        <li>Consistent code style without prompting</li>
        <li>Works across all agents automatically</li>
        <li>Zero manual intervention</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# ~/.claude/hooks/smart-format.sh
case "${FILE##*.}" in
  ts|tsx|js|jsx) prettier --write "$FILE" ;;
  py) black --quiet "$FILE" ;;
  go) gofmt -w "$FILE" ;;
  rs) rustfmt "$FILE" ;;
esac</code></pre>
      </div>

      <p><strong>ROI:</strong> High - Consistent quality with no effort</p>
    </section>

    <hr class="section-divider">

    <!-- Philosophy + Implementation Combinations -->
    <section id="philosophy-implementation">
      <h2><span class="bionic">Phi</span>losophy + <span class="bionic">Imp</span>lementation <span class="bionic">Com</span>binations</h2>

      <h3>Adversarial Speccing + Subagents</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Architect proposes design</li>
        <li>Critic challenges from persona (DHH, Security Engineer)</li>
        <li>Iterate until critic approves</li>
        <li>Better designs through debate</li>
      </ul>

      <h4>Architecture</h4>
      <div class="ascii-diagram">
Orchestrator
    |
    +-- Architect Subagent: "Here's my design..."
    |
    +-- Critic Subagent (DHH): "Too many services, merge them"
           |
           +-- Architect revises
                  |
                  +-- Critic approves
      </div>

      <p><strong>ROI:</strong> High - Better designs through structured disagreement</p>

      <hr style="border: 1px dashed #e0d5c5; margin: 2rem 0;">

      <h3>Planning/Execution Separation + Model Selection</h3>

      <h4>What It Enables</h4>
      <ul>
        <li>Opus for planning (needs reasoning)</li>
        <li>Sonnet for implementation (needs speed)</li>
        <li>Haiku for lookups (needs cost efficiency)</li>
        <li>Right model for right job</li>
      </ul>

      <h4>Implementation Notes</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Plan with Opus
plan=$(claude --model opus "Analyze requirements and create implementation plan")

# Implement with Sonnet
implementation=$(claude --model sonnet "Implement based on: $plan")

# Verify with Haiku
verification=$(claude --model haiku "Check if $implementation matches $plan")</code></pre>
      </div>

      <h4>Cost Matrix</h4>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Phase</th><th>Model</th><th>Rationale</th></tr>
          </thead>
          <tbody>
            <tr><td>Planning</td><td>Opus</td><td>Complex reasoning needed</td></tr>
            <tr><td>Implementation</td><td>Sonnet</td><td>Pattern-following, speed</td></tr>
            <tr><td>Verification</td><td>Haiku</td><td>Simple checks, cost</td></tr>
          </tbody>
        </table>
      </div>

      <p><strong>ROI:</strong> Very High - 10x cost savings with better results</p>
    </section>

    <hr class="section-divider">

    <!-- Combination Matrix Summary -->
    <section id="combination-matrix">
      <h2><span class="bionic">Com</span>bination <span class="bionic">Mat</span>rix <span class="bionic">Sum</span>mary</h2>

      <h3>High-Impact Pairings</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Pattern A</th><th>Pattern B</th><th>Combined Result</th><th>ROI</th></tr>
          </thead>
          <tbody>
            <tr><td>Ralph</td><td>Playwright</td><td>Verified UI loops</td><td>Very High</td></tr>
            <tr><td>Ralph</td><td>Claude-Mem</td><td>Cross-session learning</td><td>High</td></tr>
            <tr><td>Ralph</td><td>Claude HUD</td><td>Visible progress</td><td>High</td></tr>
            <tr><td>CC Mirror</td><td>Hooks</td><td>Quality gates for all agents</td><td>High</td></tr>
            <tr><td>Subagents</td><td>Worktrees</td><td>True parallel isolation</td><td>Very High</td></tr>
            <tr><td>progress.txt</td><td>AGENTS.md</td><td>Short + long-term memory</td><td>Very High</td></tr>
            <tr><td>Mobile</td><td>Poke Hooks</td><td>Async development</td><td>Very High</td></tr>
            <tr><td>Panopticon</td><td>Cron</td><td>Continuous automation</td><td>Very High</td></tr>
            <tr><td>Skills</td><td>Sub-Agents Dir</td><td>Instant specialization</td><td>Very High</td></tr>
            <tr><td>Planning</td><td>Model Selection</td><td>Cost-optimized quality</td><td>Very High</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Synergy Categories</h3>

      <h4>Multiplicative Synergies (1+1 = 5)</h4>
      <p>These combinations create capabilities neither pattern has alone:</p>
      <ol>
        <li><strong>Ralph + Playwright</strong> - Verification impossible without browser, persistence impossible without Ralph</li>
        <li><strong>Worktrees + Subagents</strong> - Isolation impossible without worktrees, parallelism impossible without subagents</li>
        <li><strong>progress.txt + AGENTS.md</strong> - Short-term learning useless without long-term, long-term empty without short-term</li>
      </ol>

      <h4>Additive Synergies (1+1 = 2)</h4>
      <p>These combinations improve both patterns but don't create new capabilities:</p>
      <ol>
        <li><strong>Claude HUD + Ralph</strong> - Both work alone, together they're better</li>
        <li><strong>Hooks + CC Mirror</strong> - Hooks work anywhere, CC Mirror works without hooks</li>
        <li><strong>Mobile + Poke</strong> - Both solve problems independently, together they're seamless</li>
      </ol>

      <h4>Enabling Synergies (1+0 = 1)</h4>
      <p>One pattern enables the other to function:</p>
      <ol>
        <li><strong>tmux + rpai</strong> - rpai requires tmux to function</li>
        <li><strong>Git + Claude-Mem</strong> - Both need history, but can work independently</li>
        <li><strong>MCP + Any Workflow</strong> - MCP enables tool access, workflows use it</li>
      </ol>
    </section>

    <hr class="section-divider">

    <!-- Implementation Priority -->
    <section id="implementation-priority">
      <h2><span class="bionic">Imp</span>lementation <span class="bionic">Pri</span>ority</h2>

      <h3>Start Here (Quick Wins)</h3>
      <ol>
        <li><strong>Hooks + Auto-Formatting</strong> - 5 minutes, immediate benefit</li>
        <li><strong>Claude HUD</strong> - 5 minutes, visibility into everything</li>
        <li><strong>Sub-Agents Directory</strong> - Browse, copy, paste - instant specialists</li>
      </ol>

      <h3>Build Foundation (Medium Effort)</h3>
      <ol>
        <li><strong>Ralph + progress.txt + AGENTS.md</strong> - Sets up compounding learning</li>
        <li><strong>Mobile + Poke Hooks</strong> - Enables async workflow</li>
        <li><strong>Worktrees + Basic Subagents</strong> - Parallel work capability</li>
      </ol>

      <h3>Scale Up (Deep Investment)</h3>
      <ol>
        <li><strong>CC Mirror Full Orchestration</strong> - Multi-agent coordination</li>
        <li><strong>Panopticon Architecture</strong> - Life OS across domains</li>
        <li><strong>Gas Town</strong> - Factory-scale agent production</li>
      </ol>
    </section>

    <hr class="section-divider">

    <!-- Anti-Patterns to Avoid -->
    <section id="anti-patterns">
      <h2><span class="bionic">Ant</span>i-Patterns to <span class="bionic">Avo</span>id</h2>

      <h3>Combinations That Conflict</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Pattern A</th><th>Pattern B</th><th>Why It Fails</th></tr>
          </thead>
          <tbody>
            <tr><td>Ralph (fresh context)</td><td>Large shared context</td><td>Defeats fresh context purpose</td></tr>
            <tr><td>Parallel agents</td><td>Single branch</td><td>Merge conflicts inevitable</td></tr>
            <tr><td>Heavy MCP tools</td><td>Main context</td><td>Token explosion</td></tr>
            <tr><td>Many Opus subagents</td><td>Cost constraints</td><td>Budget blown</td></tr>
            <tr><td>Strict hooks</td><td>YOLO mode</td><td>Contradictory philosophy</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Overhead Traps</h3>
      <ol>
        <li><strong>Too Many Monitoring Tools</strong> - rpai + HUD + custom logging = more monitoring than work</li>
        <li><strong>Over-Orchestration</strong> - CC Mirror + Gas Town + custom coordinator = chaos</li>
        <li><strong>Memory Overload</strong> - Claude-Mem + progress.txt + AGENTS.md + git notes = context bloat</li>
      </ol>
    </section>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="bionic">Tro</span>ubleshooting</h2>

      <details class="troubleshoot">
        <summary>Ralph + Playwright Screenshots Not Verifying</summary>
        <div>
          <p><strong>Symptom:</strong> Ralph loop claims UI verification passed, but screenshots show broken layouts or missing elements.</p>
          <p><strong>Cause:</strong> Playwright may be taking screenshots before the page fully renders, or the verification prompt isn't specific enough.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Add explicit wait conditions before screenshots:
              <div class="code-block">
                <pre><code>await page.waitForLoadState('networkidle');
await page.waitForSelector('.expected-element');</code></pre>
              </div>
            </li>
            <li>Make acceptance criteria more specific:
              <div class="code-block">
                <pre><code>"acceptanceCriteria": [
  "Screenshot shows button with text 'Submit' at y &lt; 500px",
  "No console errors in browser",
  "Element .login-form is visible"
]</code></pre>
              </div>
            </li>
            <li>Put Playwright in a subagent to isolate browser context issues</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Claude-Mem Injecting Irrelevant Context</summary>
        <div>
          <p><strong>Symptom:</strong> Ralph iterations receive memories from unrelated past sessions, wasting context tokens on irrelevant information.</p>
          <p><strong>Cause:</strong> Claude-Mem's semantic search is matching on general terms, not the specific story/task.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Query with story ID explicitly: <code>search(query="US-003 authentication", type="pattern")</code></li>
            <li>Use the timeline layer for recent context instead of broad search</li>
            <li>Tag memories with project identifiers during capture</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Worktree Subagents Diverging Too Far</summary>
        <div>
          <p><strong>Symptom:</strong> When merging worktree branches back to main, conflicts are massive because agents made incompatible architectural decisions.</p>
          <p><strong>Cause:</strong> Agents worked in isolation without shared architectural constraints.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Create shared AGENTS.md with architectural rules all worktrees read</li>
            <li>Use periodic "sync points" where agents check in before major decisions</li>
            <li>Assign a dedicated "merge agent" that monitors divergence</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Mobile + Poke Notifications Not Arriving</summary>
        <div>
          <p><strong>Symptom:</strong> Hooks are configured for push notifications but phone never receives them during AFK runs.</p>
          <p><strong>Cause:</strong> Common issues include wrong API URL, missing auth token, or the hook script failing silently.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Test the notification script manually first:
              <div class="code-block">
                <pre><code>curl -X POST "https://poke-api.com/send" \
  -H "Authorization: Bearer $POKE_TOKEN" \
  -d '{"message": "Test notification"}'</code></pre>
              </div>
            </li>
            <li>Add logging to the hook script</li>
            <li>Verify the PreToolUse matcher is correct (should be <code>AskUserQuestion</code>, not <code>Ask</code>)</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>progress.txt + AGENTS.md Getting Out of Sync</summary>
        <div>
          <p><strong>Symptom:</strong> Learnings in progress.txt contradict guidance in AGENTS.md, causing inconsistent agent behavior.</p>
          <p><strong>Cause:</strong> progress.txt is append-only and may contain outdated patterns that were later refined.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Periodically distill progress.txt into AGENTS.md (human-in-loop)</li>
            <li>Have Claude summarize and deduplicate at session end</li>
            <li>Use clear sections in AGENTS.md that override progress.txt</li>
          </ol>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Combinations Documents</h3>
      <ul>
        <li><a href="combinations-extensions.html">Extension Combinations</a> - Plugin and MCP combinations</li>
        <li><a href="combinations-matrix.html">Combination Matrix</a> - Quick reference for compatibility</li>
        <li><a href="combinations-triple-plus.html">Triple+ Stacks</a> - Advanced multi-pattern setups</li>
        <li><a href="combinations-unexplored.html">Unexplored Territory</a> - Frontier pattern ideas</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="combinations-matrix.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Combination Matrix</span>
      </a>
      <a href="combinations-triple-plus.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">Triple+ Stacks</span>
      </a>
    </nav>

    <!-- Tags -->
    <div style="margin-top: 2rem;">
      <span class="tag">#synthesis</span>
      <span class="tag">#combinations</span>
      <span class="tag">#patterns</span>
      <span class="tag">#synergies</span>
      <span class="tag">#ralph</span>
      <span class="tag">#playwright</span>
      <span class="tag">#worktrees</span>
      <span class="tag">#subagents</span>
      <span class="tag">#memory</span>
      <span class="tag">#hooks</span>
      <span class="tag">#mobile</span>
      <span class="tag">#orchestration</span>
      <span class="tag">#verification</span>
      <span class="tag">#isolation</span>
      <span class="tag">#coordination</span>
    </div>
  </div>

  <script src="../js/copy-code.js"></script>
  <script src="../js/search.js"></script>
  <script src="../js/global-nav.js"></script>
</body>
</html>
