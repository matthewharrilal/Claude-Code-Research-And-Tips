<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Taxonomy">
  <title>Tool Integration Taxonomy - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
        <button class="filter-btn" data-filter="journeys">Journeys</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="taxonomy-master.html">Taxonomy</a>
      <span>/</span>
      <span>Tool Integration</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;"><strong><span class="b">Too</span>l <span class="b">Int</span>egration <span class="b">Tax</span>onomy</strong> - The master tool reference for Claude Code extensions. If you're looking to extend Claude Code with hooks, MCP servers, plugins, skills, or sub-agents, this document catalogs every known integration pattern with installation commands and configuration examples.</p>
    </div>

    <h1><span class="b">Too</span>l <span class="b">Int</span>egration <span class="b">Tax</span>onomy for <span class="b">Cla</span>ude <span class="b">Co</span>de</h1>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#hooks-system">1. Hooks System</a></li>
        <li><a href="#mcp-servers">2. MCP (Model Context Protocol) Servers</a></li>
        <li><a href="#plugins">3. Plugins</a></li>
        <li><a href="#skills-system">4. Skills System</a></li>
        <li><a href="#sub-agents">5. Sub-Agents</a></li>
        <li><a href="#infrastructure">6. Infrastructure Tools</a></li>
        <li><a href="#browser-automation">7. Browser Automation</a></li>
        <li><a href="#multi-agent">8. Multi-Agent Management</a></li>
        <li><a href="#memory-persistence">9. Memory and Persistence</a></li>
        <li><a href="#integration-matrix">10. Integration Matrix</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- Hooks System -->
    <section id="hooks-system">
      <h2><span class="b">1.</span> <span class="b">Hoo</span>ks <span class="b">Sys</span>tem</h2>

      <p>Hooks are event-driven shell commands (NOT AI prompts) that execute automatically on Claude Code lifecycle events.</p>

      <h3>Hook Types</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Hook Event</th><th>Trigger Point</th><th>Common Use Cases</th></tr>
          </thead>
          <tbody>
            <tr><td><code>PreToolUse</code></td><td>Before any tool runs</td><td>Validation, security gates, logging, approval flows</td></tr>
            <tr><td><code>PostToolUse</code></td><td>After any tool completes</td><td>Auto-formatting, linting, notifications, metrics</td></tr>
            <tr><td><code>SessionStart</code></td><td>When session begins</td><td>Context loading, environment setup, welcome messages</td></tr>
            <tr><td><code>SessionEnd</code></td><td>When session ends</td><td>Cleanup, summary generation, persistence</td></tr>
            <tr><td><code>Stop</code></td><td>Exit/completion attempts</td><td>Loop continuation (Ralph pattern), cleanup</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Tool Matchers</h3>
      <p>Hooks can target specific tools:</p>
      <ul>
        <li><code>Edit</code> - File editing operations</li>
        <li><code>Write</code> - New file creation</li>
        <li><code>Bash</code> - Shell command execution</li>
        <li><code>Read</code> - File reading</li>
        <li><code>Glob</code> - File pattern matching</li>
        <li><code>Grep</code> - Content searching</li>
        <li><code>AskUserQuestion</code> - When Claude needs user input</li>
        <li><code>Task</code> - Subagent operations</li>
        <li><code>WebFetch</code> - URL fetching</li>
        <li><code>WebSearch</code> - Web searches</li>
        <li><code>*</code> or omit matcher - Match all tools</li>
      </ul>

      <h3>Configuration Location</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>~/.claude/settings.json           # Global hook config
.claude/settings.json             # Project hook config</code></pre>
      </div>

      <h3>Hook Configuration Format</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "hooks": {
    "PreToolUse": [{
      "matcher": "Bash",
      "hooks": [{
        "type": "command",
        "command": "~/.claude/hooks/security-gate.sh"
      }]
    }],
    "PostToolUse": [{
      "matcher": "Edit",
      "command": "prettier --write $FILE"
    }],
    "SessionStart": [{
      "type": "command",
      "command": "~/.claude/hooks/session-start.sh"
    }]
  }
}</code></pre>
      </div>

      <h3>Environment Variables Available</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Variable</th><th>Description</th><th>Available In</th></tr>
          </thead>
          <tbody>
            <tr><td><code>$EVENT_DATA</code></td><td>Full JSON event blob</td><td>All events</td></tr>
            <tr><td><code>$TOOL_NAME</code></td><td>Tool being used</td><td>Pre/PostToolUse</td></tr>
            <tr><td><code>$FILE</code></td><td>Target file path</td><td>PostToolUse (Edit/Write)</td></tr>
            <tr><td><code>$PROJECT_NAME</code></td><td>Current project name</td><td>All events</td></tr>
            <tr><td><code>$SESSION_ID</code></td><td>Current session ID</td><td>All events</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Common Hook Patterns</h3>

      <h4>1. Notification Hooks (Push to Mobile)</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# ~/.claude/hooks/poke-notify.sh
QUESTION=$(echo "$EVENT_DATA" | jq -r '.tool_input.questions[0].question')
curl -X POST "$POKE_API_URL" -d "{\"message\": \"$QUESTION\"}"</code></pre>
      </div>
      <p><strong>Services:</strong> Poke, Pushover, ntfy, Telegram Bot, Discord Webhook, Slack</p>

      <h4>2. Auto-Formatting Hooks</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "PostToolUse": [
    { "matcher": "Edit", "command": "prettier --write $FILE" },
    { "matcher": "Edit", "command": "eslint --fix $FILE" }
  ]
}</code></pre>
      </div>
      <p><strong>Languages:</strong> JavaScript/TypeScript (prettier, eslint), Python (black, isort, ruff), Go (gofmt), Rust (rustfmt)</p>

      <h4>3. Security Gate Hooks</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
COMMAND=$(echo "$EVENT_DATA" | jq -r '.tool_input.command')
DANGEROUS_PATTERNS=("rm -rf" "git push --force" "sudo")
for pattern in "${DANGEROUS_PATTERNS[@]}"; do
    if [[ "$COMMAND" == *"$pattern"* ]]; then
        echo "BLOCKED: $pattern" &gt;&amp;2
        exit 1  # Non-zero blocks the operation
    fi
done
exit 0</code></pre>
      </div>

      <h4>4. Ralph Loop Stop Hooks</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# Intercepts session exit, checks for completion
if grep -q "COMPLETE" ./progress.txt; then
    exit 0  # Allow exit
else
    cat PROMPT.md | claude-code  # Restart
fi</code></pre>
      </div>

      <h4>5. Audit Logging Hooks</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
LOG_FILE="$HOME/.claude/audit/$(date +%Y-%m-%d).jsonl"
jq -nc --arg ts "$(date -Iseconds)" --arg tool "$TOOL_NAME" '{ts:$ts,tool:$tool}' &gt;&gt; "$LOG_FILE"</code></pre>
      </div>

      <!-- Checkpoint -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Hooks System</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>The 5 hook event types and when each triggers</li>
          <li>How to configure hooks in <code>~/.claude/settings.json</code></li>
          <li>The difference between PreToolUse and PostToolUse</li>
          <li>How to use environment variables like <code>$EVENT_DATA</code> and <code>$TOOL_NAME</code></li>
        </ul>
        <p><strong>If unclear:</strong> Re-read the Hook Configuration Format section above.</p>
      </div>
    </section>

    <hr class="section-divider">

    <!-- MCP Servers -->
    <section id="mcp-servers">
      <h2><span class="b">2.</span> <span class="b">MCP</span> (<span class="b">Mod</span>el <span class="b">Con</span>text <span class="b">Pro</span>tocol) <span class="b">Ser</span>vers</h2>

      <p>MCP is an open protocol (like "USB-C for AI") enabling Claude to connect to external data sources and tools via JSON-RPC 2.0.</p>

      <h3>Architecture</h3>
      <div class="ascii-diagram">
+--------------------------------------------------+
|            MCP Host (Claude Code)                 |
+-------------------+------------------------------+
                    |
         +----------+----------+
         |          |          |
     +---v--+   +---v--+  +---v--+
     |Client|   |Client|  |Client|
     +---+--+   +---+--+  +---+--+
         |          |          |
    +----v---+ +----v---+ +----v---+
    |Server A| |Server B| |Server C|
    |(STDIO) | |(STDIO) | |(HTTP)  |
    +--------+ +--------+ +--------+</div>

      <h3>MCP Primitives</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Feature</th><th>Purpose</th><th>Control</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Tools</strong></td><td>Functions LLMs can actively call</td><td>Model-controlled</td></tr>
            <tr><td><strong>Resources</strong></td><td>Passive read-only data sources</td><td>Application-controlled</td></tr>
            <tr><td><strong>Prompts</strong></td><td>Pre-built instruction templates</td><td>User-controlled</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Configuration Format</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "mcpServers": {
    "server-name": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-name", "arg1"],
      "env": {
        "API_KEY": "your-key"
      }
    }
  }
}</code></pre>
      </div>

      <h3>Official Reference Servers</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Server</th><th>Package</th><th>Purpose</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Filesystem</strong></td><td><code>@modelcontextprotocol/server-filesystem</code></td><td>Secure file operations</td></tr>
            <tr><td><strong>Git</strong></td><td><code>mcp-server-git</code> (Python)</td><td>Git repository operations</td></tr>
            <tr><td><strong>GitHub</strong></td><td><code>@modelcontextprotocol/server-github</code></td><td>GitHub API integration</td></tr>
            <tr><td><strong>Memory</strong></td><td><code>@modelcontextprotocol/server-memory</code></td><td>Knowledge graph persistence</td></tr>
            <tr><td><strong>Fetch</strong></td><td><code>@modelcontextprotocol/server-fetch</code></td><td>Web content fetching</td></tr>
            <tr><td><strong>Sequential Thinking</strong></td><td><code>@modelcontextprotocol/server-sequential-thinking</code></td><td>Reflective problem-solving</td></tr>
            <tr><td><strong>Time</strong></td><td><code>@modelcontextprotocol/server-time</code></td><td>Time/timezone operations</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Popular Third-Party MCP Servers</h3>

      <h4>File/Data Servers</h4>
      <ul>
        <li><strong>SQLite:</strong> <code>mcp-server-sqlite</code> - Database operations</li>
        <li><strong>PostgreSQL:</strong> <code>mcp-server-postgres</code> - Database operations</li>
        <li><strong>Google Drive:</strong> Google Drive file access</li>
        <li><strong>Notion:</strong> Notion workspace integration</li>
      </ul>

      <h4>Communication Servers</h4>
      <ul>
        <li><strong>Slack:</strong> <code>@modelcontextprotocol/server-slack</code> - Slack messaging</li>
        <li><strong>Discord:</strong> Discord integration</li>
        <li><strong>Linear:</strong> Issue tracking</li>
      </ul>

      <h4>Browser Automation</h4>
      <ul>
        <li><strong>Puppeteer:</strong> <code>@modelcontextprotocol/server-puppeteer</code> - Browser automation</li>
        <li><strong>Playwright:</strong> Cross-browser automation</li>
        <li><strong>Browserbase:</strong> Cloud browser execution</li>
      </ul>

      <h3>MCP SDK Languages</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Language</th><th>Package</th></tr>
          </thead>
          <tbody>
            <tr><td>TypeScript</td><td><code>@modelcontextprotocol/sdk</code></td></tr>
            <tr><td>Python</td><td><code>pip install mcp</code></td></tr>
            <tr><td>Go</td><td><code>github.com/modelcontextprotocol/go-sdk</code></td></tr>
            <tr><td>Kotlin</td><td>Maven/Gradle</td></tr>
            <tr><td>Swift</td><td>Swift Package Manager</td></tr>
            <tr><td>Java</td><td>Maven/Gradle</td></tr>
            <tr><td>Rust</td><td>Cargo</td></tr>
          </tbody>
        </table>
      </div>

      <h3>MCP Debugging</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># MCP Inspector - interactive testing tool
npx @modelcontextprotocol/inspector npx @modelcontextprotocol/server-filesystem /path</code></pre>
      </div>

      <!-- Checkpoint -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: MCP Servers</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>The 3 MCP primitives: Tools, Resources, and Prompts</li>
          <li>How to configure MCP servers in <code>~/.claude/settings.json</code></li>
          <li>The difference between official reference servers and community servers</li>
          <li>How to debug MCP servers using the Inspector</li>
        </ul>
        <p><strong>Terminal verification:</strong></p>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Test MCP server is working
npx @modelcontextprotocol/inspector npx @modelcontextprotocol/server-filesystem /path
# You should see: MCP Inspector running at http://localhost:5173</code></pre>
        </div>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Plugins -->
    <section id="plugins">
      <h2><span class="b">3.</span> <span class="b">Plu</span>gins</h2>

      <p>Plugins are full packages combining code, hooks, commands, skills, and MCP integrations.</p>

      <h3>Plugin Installation</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Add marketplace
/plugin marketplace add author/repo

# Install plugin
/plugin install plugin-name@marketplace

# Or directly
claude plugin install plugin-name</code></pre>
      </div>

      <h3>Official Anthropic Plugins</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Plugin</th><th>Command</th><th>Purpose</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>agent-sdk-dev</strong></td><td><code>/new-sdk-app</code></td><td>Development kit for Claude Agent SDK projects</td></tr>
            <tr><td><strong>code-review</strong></td><td><code>/code-review</code></td><td>5 parallel Sonnet agents for code review</td></tr>
            <tr><td><strong>code-simplifier</strong></td><td>Natural language</td><td>Simplify/refine code for clarity</td></tr>
            <tr><td><strong>commit-commands</strong></td><td><code>/commit</code>, <code>/commit-push-pr</code></td><td>Git workflow automation</td></tr>
            <tr><td><strong>feature-dev</strong></td><td><code>/feature-dev</code></td><td>7-phase development workflow</td></tr>
            <tr><td><strong>frontend-design</strong></td><td>Auto-invoked</td><td>Production-grade frontend</td></tr>
            <tr><td><strong>hookify</strong></td><td><code>/hookify</code></td><td>Meta-hooks - create custom hooks</td></tr>
            <tr><td><strong>plugin-dev</strong></td><td><code>/plugin-dev:create-plugin</code></td><td>Toolkit for developing plugins</td></tr>
            <tr><td><strong>pr-review-toolkit</strong></td><td><code>/pr-review-toolkit:review-pr</code></td><td>6 specialized PR review agents</td></tr>
            <tr><td><strong>ralph-wiggum</strong></td><td><code>/ralph-loop</code>, <code>/cancel-ralph</code></td><td>Self-perpetuating autonomous loops</td></tr>
            <tr><td><strong>security-guidance</strong></td><td>PreToolUse hook</td><td>Security reminder and vulnerability detection</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Community Plugins</h3>

      <h4>Claude HUD (@jarrodwatts)</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>/plugin marketplace add jarrodwatts/claude-hud
/plugin install claude-hud
/claude-hud:setup</code></pre>
      </div>
      <p><strong>Shows:</strong> Context remaining, tools executing, subagents running, todo progress. Updates every ~300ms.</p>

      <h4>Claude-Mem (@thedotmack)</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>/plugin marketplace add thedotmack/claude-mem
/plugin install claude-mem</code></pre>
      </div>
      <p><strong>Purpose:</strong> Persistent memory with semantic compression. Up to 95% fewer tokens, ~20x more tool calls.</p>

      <h3>Plugin Directory Structure</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>my-plugin/
+-- .claude-plugin/
|   +-- plugin.json              # Manifest
+-- commands/
|   +-- init.md
|   +-- run.md
+-- skills/
|   +-- main/
|       +-- SKILL.md
+-- hooks/
|   +-- hooks.json
|   +-- post-edit.sh
+-- scripts/
|   +-- setup.js
+-- templates/
    +-- config.json</code></pre>
      </div>

      <h3>Plugin Manifest (plugin.json)</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "name": "my-plugin",
  "version": "1.0.0",
  "description": "What this plugin does",
  "author": "yourhandle",
  "commands": [
    {
      "name": "my-command",
      "description": "Command description",
      "file": "commands/my-command.md"
    }
  ],
  "skills": [
    {
      "name": "my-skill",
      "file": "skills/my-skill.md",
      "triggers": ["keyword1", "keyword2"]
    }
  ],
  "hooks": {
    "file": "hooks/hooks.json"
  }
}</code></pre>
      </div>

      <!-- Checkpoint -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Plugins</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>How to install plugins from marketplaces</li>
          <li>The key official Anthropic plugins and their purposes</li>
          <li>The plugin directory structure and manifest format</li>
          <li>The difference between commands, skills, and hooks within plugins</li>
        </ul>
        <p><strong>Terminal verification:</strong></p>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># List installed plugins
/plugin list
# You should see: a list of installed plugins with their versions</code></pre>
        </div>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Skills System -->
    <section id="skills-system">
      <h2><span class="b">4.</span> <span class="b">Ski</span>lls <span class="b">Sys</span>tem</h2>

      <p>Skills are Markdown files (.md) that extend Claude Code's capabilities as recipes, templates, or instruction sets.</p>

      <h3>Skill Locations</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>.claude/skills/              # Project-specific
~/.claude/skills/            # Global
~/.config/amp/skills/        # Alternative (Amp)</code></pre>
      </div>

      <h3>Skill Structure</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Skill Name

## Purpose
One-liner description

## Mental Model
Metaphor/framework for understanding the skill

## Instructions
Detailed guidance

## Rules/Constraints
What to do and not do

## Examples
Usage demonstrations</code></pre>
      </div>

      <h3>Skill Invocation</h3>
      <ol>
        <li><strong>Manual:</strong> <code>"Load the X skill and initiate"</code></li>
        <li><strong>Slash Command:</strong> <code>/skill skill-name</code></li>
        <li><strong>Auto-Trigger:</strong> Query relevance matching skill description</li>
      </ol>

      <h3>Skills vs Sub-Agents vs Hooks</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Aspect</th><th>Skills</th><th>Sub-Agents</th><th>Hooks</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>What</strong></td><td>Instruction sets</td><td>Mini-Claudes</td><td>Shell commands</td></tr>
            <tr><td><strong>Context</strong></td><td>Main conversation</td><td>Isolated window</td><td>N/A</td></tr>
            <tr><td><strong>Trigger</strong></td><td>Query relevance/manual</td><td>Task tool</td><td>Lifecycle events</td></tr>
            <tr><td><strong>Best For</strong></td><td>Complex workflows</td><td>Multi-step reasoning</td><td>Automation</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Community Skill Collections</h3>

      <h4>CC Mirror (@nummanali)</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>npx cc-mirror quick --provider mirror --name mclaude
mclaude
"Load the orchestration skill and initiate"</code></pre>
      </div>

      <h4>Sub-Agents Directory (@shydev69)</h4>
      <p><strong>Site:</strong> https://sub-agents.directory<br>
      <strong>Content:</strong> 200+ ready-to-use sub-agent prompts with MCP server listings, video tutorials, one-click spawning.</p>
    </section>

    <hr class="section-divider">

    <!-- Sub-Agents -->
    <section id="sub-agents">
      <h2><span class="b">5.</span> <span class="b">Sub</span>-<span class="b">Age</span>nts</h2>

      <p>Sub-agents are specialized mini-Claudes with isolated context windows for focused tasks.</p>

      <h3>Sub-Agent Location</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>.claude/agents/
+-- react-specialist.yaml
+-- python-expert.yaml
+-- security-auditor.yaml
+-- adversarial-critic.md</code></pre>
      </div>

      <h3>Sub-Agent Definition Format</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>name: agent-name
description: What triggers this agent's selection
model: opus|sonnet|haiku
context: fork|shared

# System prompt/instructions follow</code></pre>
      </div>

      <h3>Model Selection Guidelines</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Model</th><th>Use Case</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Haiku</strong></td><td>Errand runner: fetch files, grep, simple lookups (spawn 5-10 in parallel)</td></tr>
            <tr><td><strong>Sonnet</strong></td><td>Capable worker: structured implementation, pattern following, test generation</td></tr>
            <tr><td><strong>Opus</strong></td><td>Complex reasoning, architecture decisions, ambiguous tasks</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Orchestrator Pattern</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Orchestrator Pattern

## You Are
The conductor. You don't play instruments.

## You Do
- Decompose tasks
- Spawn workers via Task tool
- Monitor progress via TaskList
- Synthesize outputs

## You Don't
- Write code directly
- Run bash commands
- Explore files yourself</code></pre>
      </div>

      <h3>Worker Preamble Template</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>CONTEXT: You are a WORKER agent, not an orchestrator.
RULES:
- Complete ONLY the task described below
- Use tools directly (Read, Write, Edit, Bash, etc.)
- Do NOT spawn sub-agents
- Do NOT call TaskCreate or TaskUpdate
- Report results with absolute file paths
TASK: [specific task]</code></pre>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Infrastructure Tools -->
    <section id="infrastructure">
      <h2><span class="b">6.</span> <span class="b">Inf</span>rastructure <span class="b">Too</span>ls</h2>

      <h3>Remote Execution</h3>

      <h4>System - Remote Mac Control (@burcs)</h4>
      <p><strong>Repo:</strong> github.com/ygwyg/system<br>
      <strong>Purpose:</strong> Turn Mac into an API via Cloudflare tunnel</p>

      <div class="ascii-diagram">
Brain (Cloudflare Worker)
+- Claude AI for NLP
+- State in Durable Objects
+- Tool orchestration
       |
Cloudflare Tunnel (secure)
       |
Body (Local Mac Bridge)
+- Express server
+- AppleScript execution
+- Raycast extensions</div>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>git clone https://github.com/ygwyg/system
npm install && npm run setup && npm start</code></pre>
      </div>

      <h3>Sandboxing Options</h3>

      <h4>Docker Containerization</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>FROM node:20-alpine
RUN npm install -g @anthropic-ai/claude-code
RUN adduser -D claude
USER claude
WORKDIR /workspace
CMD ["claude", "--dangerously-skip-permissions"]</code></pre>
      </div>

      <h4>macOS Sandbox</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>sandbox-exec -f ~/.claude/sandbox.sb claude</code></pre>
      </div>

      <h4>Linux Options</h4>
      <ul>
        <li><strong>Firejail:</strong> <code>firejail --private=~/claude-sandbox --net=none claude</code></li>
        <li><strong>Bubblewrap (bwrap):</strong> Process isolation</li>
        <li><strong>Systemd:</strong> Unit file sandboxing</li>
      </ul>

      <h3>Claude Agent SDK</h3>
      <p><strong>Purpose:</strong> Programmatic agent building</p>
      <div class="ascii-diagram">
Your Application
       |
Claude Agent SDK (Orchestration)
       |
Claude API (Reasoning Brain)
       |
Tools / Computer</div>
      <p><strong>Pattern:</strong> Observe -> Think -> Act -> Repeat</p>
    </section>

    <hr class="section-divider">

    <!-- Browser Automation -->
    <section id="browser-automation">
      <h2><span class="b">7.</span> <span class="b">Bro</span>wser <span class="b">Aut</span>omation</h2>

      <h3>Claude for Chrome (MCP)</h3>
      <div class="ascii-diagram">
Claude Code (MCP Client)
        |
    Binary Protocol (4-byte LE + JSON)
        |
Chrome Extension (MCP Server)
        |
    Local Browser</div>

      <p><strong>Available Tools (19 total):</strong> Named <code>mcp__claude-in-chrome__*</code> including navigate, get_text, click, screenshot, and more.</p>

      <h3>Browserbase Cloud Browsers (@pk_iv)</h3>
      <p><strong>Purpose:</strong> Remote browser execution for security/scale</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>/plugin marketplace add browserbase/claude-code-plugin
/plugin install browserbase@browserbase-cloud</code></pre>
      </div>
      <p><strong>Benefits:</strong> Isolated execution, parallel sessions, production-grade - Claude doesn't know the difference.</p>

      <h3>Other Browser Tools</h3>
      <ul>
        <li><strong>Puppeteer MCP:</strong> <code>@modelcontextprotocol/server-puppeteer</code></li>
        <li><strong>Playwright MCP:</strong> Cross-browser automation</li>
        <li><strong>Stagehand:</strong> Browserbase's open-source agent framework</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Multi-Agent Management -->
    <section id="multi-agent">
      <h2><span class="b">8.</span> <span class="b">Mul</span>ti-<span class="b">Age</span>nt <span class="b">Man</span>agement</h2>

      <h3>rpai - tmux Multi-Agent Manager</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>cargo install rpai</code></pre>
      </div>
      <p><strong>Purpose:</strong> TUI for monitoring/switching between parallel AI agents.<br>
      <strong>Detected Agents:</strong> Claude, Cursor, Codex, Opencode<br>
      <strong>Features:</strong> Scans tmux panes for running AI agents, displays TUI with agent list, status, output previews. Jump to any agent with selection. Mouse support.</p>

      <h3>CC Mirror Multi-Agent (@nummanali)</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>npx cc-mirror quick --provider mirror --name mclaude
mclaude
"Load the orchestration skill and initiate"</code></pre>
      </div>
      <p><strong>Key Feature:</strong> Parallel agent spawning with model selection</p>

      <h3>Ralph Loop Pattern</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>while :; do cat PROMPT.md | claude --dangerously-skip-permissions ; done</code></pre>
      </div>
      <p><strong>Continuity:</strong> Git history, prd.json, progress.txt<br>
      <strong>Stop Hook:</strong> Checks for completion promise before allowing exit</p>
    </section>

    <hr class="section-divider">

    <!-- Memory and Persistence -->
    <section id="memory-persistence">
      <h2><span class="b">9.</span> <span class="b">Mem</span>ory and <span class="b">Per</span>sistence</h2>

      <h3>Claude-Mem Plugin</h3>
      <p><strong>Stats:</strong> Up to 95% fewer tokens, ~20x more tool calls<br>
      <strong>Storage:</strong> Local SQLite + Chroma Vector DB</p>

      <p><strong>3-Layer Retrieval:</strong></p>
      <ol>
        <li><code>search()</code> - Compact index, returns IDs</li>
        <li><code>timeline()</code> - Chronological snippets</li>
        <li><code>get_observations()</code> - Full details for specific IDs</li>
      </ol>
      <p><strong>Privacy:</strong> <code>&lt;private&gt;</code> tags to exclude sensitive data</p>

      <h3>MCP Memory Server</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "mcpServers": {
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"]
    }
  }
}</code></pre>
      </div>
      <p><strong>Purpose:</strong> Knowledge graph-based persistent memory</p>

      <h3>Session Persistence Patterns</h3>

      <h4>Hook-Based State</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# SessionStart: Load state
source ~/.claude/session-state

# SessionEnd: Save state
echo "LAST_SESSION=$(date)" > ~/.claude/session-state</code></pre>
      </div>

      <h4>Durable Objects (Cloudflare)</h4>
      <p>Save transcript & session after each method. Allows resume if sandbox dies.</p>
    </section>

    <hr class="section-divider">

    <!-- Integration Matrix -->
    <section id="integration-matrix">
      <h2><span class="b">10.</span> <span class="b">Int</span>egration <span class="b">Mat</span>rix</h2>

      <h3>Which Tools Combine With Which Patterns</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Base Pattern</th><th>Hooks</th><th>MCP</th><th>Plugins</th><th>Skills</th><th>Sub-Agents</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Ralph Loop</strong></td><td>Stop hook essential</td><td>Optional</td><td>Ralph plugins</td><td>Orchestration skill</td><td>Worker agents</td></tr>
            <tr><td><strong>Mobile Workflow</strong></td><td>Notification hooks</td><td>GitHub, Linear</td><td>Claude HUD</td><td>Minimal</td><td>Background</td></tr>
            <tr><td><strong>Multi-Agent</strong></td><td>Monitoring hooks</td><td>Shared MCP</td><td>CC Mirror</td><td>Orchestration</td><td>Heavy use</td></tr>
            <tr><td><strong>Browser Automation</strong></td><td>Pre/Post logging</td><td>Browserbase</td><td>Playwright</td><td>Browser patterns</td><td>Parallel scraping</td></tr>
            <tr><td><strong>Memory/Persistence</strong></td><td>Session hooks</td><td>Memory server</td><td>Claude-Mem</td><td>Memory-aware</td><td>Context sharing</td></tr>
            <tr><td><strong>Security</strong></td><td>PreToolUse gates</td><td>Filesystem limits</td><td>Security-guidance</td><td>Security review</td><td>Sandboxed workers</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Recommended Stacks by Use Case</h3>

      <h4>Personal Development</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>Hooks: Auto-formatting, notifications
MCP: Filesystem, GitHub
Plugins: Claude HUD
Skills: Project-specific
Sub-Agents: Task-based</code></pre>
      </div>

      <h4>Production Agents</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>Infrastructure: Cloudflare Sandbox + Agent SDK
MCP: Production databases, APIs
Security: PreToolUse gates, audit logging
Persistence: Durable Objects, Memory server</code></pre>
      </div>

      <h4>Autonomous/Ralph Loops</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>Hooks: Stop hook (essential), notifications
Sandboxing: VM or container (required for --dangerously-skip-permissions)
Skills: Orchestration, domain-specific
Sub-Agents: Parallel workers
Persistence: Git + progress files</code></pre>
      </div>

      <h3>Quick Reference</h3>

      <h4>Installation Commands</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Plugins
/plugin marketplace add author/repo
/plugin install plugin-name

# MCP Servers (TypeScript)
npx -y @modelcontextprotocol/server-name

# MCP Servers (Python)
uvx mcp-server-name

# Multi-Agent Manager
cargo install rpai

# CC Mirror
npx cc-mirror quick --provider mirror --name mclaude</code></pre>
      </div>

      <h4>Configuration Files</h4>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Purpose</th><th>Location</th></tr>
          </thead>
          <tbody>
            <tr><td>Hooks</td><td><code>~/.claude/settings.json</code></td></tr>
            <tr><td>MCP Servers</td><td><code>~/.claude/settings.json</code></td></tr>
            <tr><td>Skills</td><td><code>.claude/skills/*.md</code></td></tr>
            <tr><td>Sub-Agents</td><td><code>.claude/agents/*.yaml</code></td></tr>
            <tr><td>Plugins</td><td><code>~/.claude/plugins/</code></td></tr>
            <tr><td>Claude-Mem</td><td><code>~/.claude-mem/settings.json</code></td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="b">Trou</span>bleshooting</h2>

      <details class="troubleshoot">
        <summary>Hook Not Triggering</summary>
        <div>
          <p><strong>Symptom:</strong> Your hook command doesn't execute when expected</p>
          <p><strong>Cause:</strong> Incorrect matcher name, wrong file path, or missing execution permissions</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># 1. Verify hook configuration
cat ~/.claude/settings.json | jq '.hooks'

# 2. Ensure script is executable
chmod +x ~/.claude/hooks/your-script.sh

# 3. Test script manually
TOOL_NAME="Bash" EVENT_DATA='{"test":true}' ~/.claude/hooks/your-script.sh
# You should see: expected output from your script

# 4. Check matcher names (case-sensitive)
# Valid: Bash, Read, Write, Edit, Glob, Grep, AskUserQuestion, Task, WebFetch, WebSearch</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>MCP Server Connection Failed</summary>
        <div>
          <p><strong>Symptom:</strong> <code>Error: Failed to connect to MCP server</code></p>
          <p><strong>Cause:</strong> Server not installed, wrong command path, or missing environment variables</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># 1. Verify server is installed
npx -y @modelcontextprotocol/server-filesystem --help
# You should see: usage information

# 2. Check configuration in settings.json
cat ~/.claude/settings.json | jq '.mcpServers'

# 3. Test server directly
npx @modelcontextprotocol/inspector npx @modelcontextprotocol/server-filesystem /tmp
# You should see: Inspector UI at localhost:5173

# 4. Check for required environment variables
echo $YOUR_API_KEY  # Should not be empty</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Plugin Installation Fails</summary>
        <div>
          <p><strong>Symptom:</strong> <code>/plugin install</code> returns error or plugin doesn't work</p>
          <p><strong>Cause:</strong> Marketplace not added, version incompatibility, or network issues</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># 1. Verify marketplace is added
/plugin marketplace list
# You should see: list of configured marketplaces

# 2. Add marketplace if missing
/plugin marketplace add author/repo

# 3. Clear plugin cache and retry
rm -rf ~/.claude/plugins/.cache
/plugin install plugin-name

# 4. Check Claude Code version compatibility
claude --version
# Ensure version >= minimum required by plugin</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Skill Not Loading</summary>
        <div>
          <p><strong>Symptom:</strong> Skill doesn't auto-trigger or manual load fails</p>
          <p><strong>Cause:</strong> Wrong file location, invalid frontmatter, or conflicting triggers</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># 1. Verify skill file location
ls -la .claude/skills/
# or
ls -la ~/.claude/skills/

# 2. Check SKILL.md frontmatter syntax
head -20 .claude/skills/my-skill/SKILL.md
# Frontmatter should be valid YAML between --- markers

# 3. Try explicit skill load
"Load the my-skill skill and initiate"
# or
/skill my-skill

# 4. Check for syntax errors in skill content</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Sub-Agent Spawns But Doesn't Return</summary>
        <div>
          <p><strong>Symptom:</strong> Task tool hangs or agent doesn't complete</p>
          <p><strong>Cause:</strong> Task too large, context exhaustion, or missing completion criteria</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># 1. Check task complexity - should be single, focused task
# BAD: "Implement entire feature"
# GOOD: "Create login function in src/auth.ts"

# 2. Add explicit completion instructions to worker prompt
# Include: "Report your results with absolute file paths when done"

# 3. Use run_in_background: false for debugging
# This keeps output visible

# 4. Check if model is appropriate
# Haiku for simple lookups, Sonnet for implementation, Opus for complex reasoning</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Claude-Mem Not Persisting</summary>
        <div>
          <p><strong>Symptom:</strong> Memory not being stored or retrieved between sessions</p>
          <p><strong>Cause:</strong> Worker service not running, port conflict, or database corruption</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># 1. Check if worker service is running
curl http://localhost:37777/health
# You should see: {"status":"ok"}

# 2. Check for port conflicts
lsof -i :37777
# Should show claude-mem process

# 3. Restart worker service
pkill -f claude-mem
/plugin install claude-mem  # Reinstalls and restarts

# 4. Check database integrity
ls -la ~/.claude-mem/
# Should contain sqlite and chroma directories</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="taxonomy-skills-expanded.html">Skills and Commands Taxonomy</a> - 129+ skills, 57 commands, composition patterns</li>
        <li><a href="taxonomy-workflows.html">Workflow Pattern Taxonomy</a> - PRD-driven, Kanban, autonomous loops</li>
        <li><a href="compare-orchestration.html">Orchestration Approaches Compared</a> - Ralph, CC Mirror, Gas Town</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="taxonomy-skills-expanded.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Skills and Commands Taxonomy</span>
      </a>
      <a href="taxonomy-workflows.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">Workflow Pattern Taxonomy</span>
      </a>
    </nav>

  </div>

  <script src="../js/search.js"></script>
  <script src="../js/sidebar.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      button.classList.add('copied');
      setTimeout(() => {
        button.textContent = 'Copy';
        button.classList.remove('copied');
      }, 2000);
    }
  </script>
</body>
</html>
