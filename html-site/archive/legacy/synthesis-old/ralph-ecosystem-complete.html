<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Mastery">
  <title>Ralph Ecosystem: Complete Variant Documentation - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
        <button class="filter-btn" data-filter="journeys">Journeys</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="mastery-master.html">Mastery</a>
      <span>/</span>
      <span>Ralph Ecosystem</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;"><strong><span class="b">Ralph</span> Ecosystem: <span class="b">Comp</span>lete Variant Documentation</strong> - The complete reference for all Ralph Wiggum loop variants - the pattern that enables "ship while you sleep" autonomous development. Includes runnable code for Basic, Dr. Ralph, Rate-Limited, Compounding, Marathon, Lisa, and Zeroshot variants.</p>
    </div>

    <h1><span class="b">Ralph</span> Ecosystem: <span class="b">Comp</span>lete Variant Documentation</h1>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#philosophy">The Ralph Philosophy</a></li>
        <li><a href="#basic-ralph">1. Basic Ralph</a></li>
        <li><a href="#dr-ralph">2. Dr. Ralph</a></li>
        <li><a href="#rate-limited-ralph">3. Rate-Limited Ralph</a></li>
        <li><a href="#compounding-ralph">4. Compounding Ralph</a></li>
        <li><a href="#marathon-ralph">5. Marathon Ralph</a></li>
        <li><a href="#lisa">6. Lisa</a></li>
        <li><a href="#zeroshot">7. Zeroshot</a></li>
        <li><a href="#additional-variants">Additional Variants</a></li>
        <li><a href="#selection-guide">Variant Selection Guide</a></li>
        <li><a href="#cost-implications">Cost Implications</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- The Ralph Philosophy -->
    <section id="philosophy">
      <h2><span class="b">The</span> Ralph <span class="b">Phil</span>osophy</h2>

      <blockquote>
        <p>"Think of the AI agent as an <strong>eager but somewhat dim junior developer (Ralph)</strong> who never sleeps, happily works on one tiny task at a time, commits often, and tells you when it's truly finished - but needs extremely tight scoping, strong feedback loops, and hard limits to avoid disaster."</p>
        <cite>-- Matt Pocock</cite>
      </blockquote>

      <h3>The Four Pillars</h3>

      <ol>
        <li><strong>Fresh Context Per Iteration</strong> - Each loop spawns a NEW instance with NO memory</li>
        <li><strong>External Memory Architecture</strong> - Git, prd.json, progress.txt persist state</li>
        <li><strong>Small, Verifiable Tasks</strong> - Complete in one context window</li>
        <li><strong>Failure as Data</strong> - Each failure informs the next attempt</li>
      </ol>

      <!-- Checkpoint: Philosophy -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Ralph Philosophy</div>
        <p><strong>You should now understand:</strong></p>
        <ul>
          <li>The four pillars (fresh context, external memory, small tasks, failure as data)</li>
          <li>Ralph as "eager but somewhat dim junior developer"</li>
          <li>Why fresh context per iteration prevents quality degradation</li>
        </ul>
        <p><strong>If unclear:</strong> Re-read this section before proceeding to variants.</p>
      </div>
    </section>

    <hr class="section-divider">

    <!-- 1. Basic Ralph -->
    <section id="basic-ralph">
      <h2><span class="b">1.</span> Basic <span class="b">Ralph</span></h2>

      <h3>Origin</h3>
      <p><strong>Creator:</strong> Geoffrey Huntley</p>
      <p><strong>Source:</strong> ghuntley.com/ralph/</p>
      <p><strong>Official Plugin:</strong> github.com/anthropics/claude-code/tree/main/plugins/ralph-wiggum</p>

      <h3>Use Case</h3>
      <p>Standard feature development with clear acceptance criteria. The foundation all other variants build upon.</p>

      <h3>When to Use</h3>
      <ul>
        <li>Well-defined tasks with testable completion criteria</li>
        <li>Feature development following specifications</li>
        <li>Tasks you can describe in 2-3 sentences</li>
        <li>Projects with existing test infrastructure</li>
      </ul>

      <h3>Complete Runnable Implementation</h3>

      <p><strong>Directory Structure:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>project/
├── scripts/ralph/
│   ├── ralph.sh           # The loop script
│   ├── prompt.md          # Agent instructions
│   ├── prd.json           # Task tracking
│   └── progress.txt       # Append-only learnings
└── CLAUDE.md              # Project context</code></pre>
      </div>

      <p><strong>ralph.sh:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
set -e

MAX_ITERATIONS=${1:-10}
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "Starting Ralph - Max iterations: $MAX_ITERATIONS"

for i in $(seq 1 $MAX_ITERATIONS); do
  echo "=== Iteration $i / $MAX_ITERATIONS ==="

  OUTPUT=$(cat "$SCRIPT_DIR/prompt.md" \
    | claude --dangerously-skip-permissions 2>&1 \
    | tee /dev/stderr) || true

  if echo "$OUTPUT" | grep -q "&lt;promise&gt;COMPLETE&lt;/promise&gt;"; then
    echo "All stories complete!"
    exit 0
  fi

  sleep 2
done

echo "Max iterations reached without completion"
exit 1</code></pre>
      </div>

      <p><strong>prompt.md:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Ralph Agent Instructions

## Your Task

1. Read `scripts/ralph/prd.json` to find incomplete stories
2. Read `scripts/ralph/progress.txt` for learned patterns
3. Verify you're on the correct git branch
4. Pick the highest priority story where `passes: false`
5. Implement ONLY that ONE story
6. Run typecheck and tests
7. Commit: `feat: [ID] - [Title]`
8. Update prd.json: set `passes: true`
9. APPEND learnings to progress.txt

## Stop Condition

If ALL stories have `passes: true`, reply EXACTLY:
&lt;promise&gt;COMPLETE&lt;/promise&gt;

Otherwise, end normally for next iteration.</code></pre>
      </div>

      <h3>Configuration Options</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Option</th><th>Default</th><th>Description</th></tr>
          </thead>
          <tbody>
            <tr><td>MAX_ITERATIONS</td><td>10</td><td>Safety limit for loop count</td></tr>
            <tr><td>SCRIPT_DIR</td><td>auto</td><td>Path to Ralph files</td></tr>
            <tr><td>sleep</td><td>2s</td><td>Delay between iterations</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Cost Implications</h3>
      <ul>
        <li><strong>Per iteration:</strong> 3,000-15,000 tokens</li>
        <li><strong>10 iterations:</strong> $0.50-$2.25 (at $15/M tokens)</li>
        <li><strong>25 iterations:</strong> $1.13-$5.63</li>
        <li><strong>50 iterations:</strong> $2.25-$11.25</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- 2. Dr. Ralph -->
    <section id="dr-ralph">
      <h2><span class="b">2.</span> Dr. <span class="b">Ralph</span></h2>

      <h3>Origin</h3>
      <p><strong>Creator:</strong> @MikeEndale (Twitter/X)</p>
      <p><strong>Status:</strong> Conceptual variant, no official repository</p>

      <h3>Use Case</h3>
      <p>Complex, uncertain tasks where simple pass/fail isn't enough. Adds confidence thresholds so the agent pauses when uncertain rather than proceeding with low confidence.</p>

      <h3>When to Use</h3>
      <ul>
        <li>Tasks with ambiguous requirements that evolve</li>
        <li>Multi-phase features requiring checkpoint validation</li>
        <li>When you want the agent to STOP and ASK rather than guess</li>
        <li>Security-sensitive implementations where uncertainty should halt progress</li>
      </ul>

      <h3>Complete Runnable Implementation</h3>

      <p><strong>dr-ralph.sh:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
set -e

MAX_ITERATIONS=${1:-10}
CONFIDENCE_THRESHOLD=${2:-80}
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "Starting Dr. Ralph"
echo "  Max iterations: $MAX_ITERATIONS"
echo "  Confidence threshold: $CONFIDENCE_THRESHOLD%"

for i in $(seq 1 $MAX_ITERATIONS); do
  echo "=== Iteration $i / $MAX_ITERATIONS ==="

  OUTPUT=$(cat "$SCRIPT_DIR/prompt-dr.md" \
    | claude --dangerously-skip-permissions 2>&1 \
    | tee output.txt) || true

  # Check for completion
  if echo "$OUTPUT" | grep -q "&lt;promise&gt;COMPLETE&lt;/promise&gt;"; then
    echo "All stories complete!"
    exit 0
  fi

  # Check for low confidence pause request
  if echo "$OUTPUT" | grep -q "&lt;confidence&gt;PAUSE&lt;/confidence&gt;"; then
    REPORTED_CONFIDENCE=$(grep -oP 'confidence_level: \K\d+' output.txt || echo "0")
    echo ""
    echo "=== DR. RALPH PAUSED ==="
    echo "Agent confidence: $REPORTED_CONFIDENCE%"
    echo "Threshold: $CONFIDENCE_THRESHOLD%"
    echo ""
    read -p "Provide guidance or press Enter to continue: " GUIDANCE

    if [ -n "$GUIDANCE" ]; then
      echo "---" >> "$SCRIPT_DIR/progress.txt"
      echo "## Human Guidance (Iteration $i)" >> "$SCRIPT_DIR/progress.txt"
      echo "$GUIDANCE" >> "$SCRIPT_DIR/progress.txt"
    fi
  fi

  sleep 2
done

echo "Max iterations reached"
exit 1</code></pre>
      </div>

      <h3>Confidence Assessment</h3>
      <p>For each story, evaluate:</p>
      <ul>
        <li>Do I understand the requirements? (0-25%)</li>
        <li>Do I know the implementation approach? (0-25%)</li>
        <li>Can I verify success with tests? (0-25%)</li>
        <li>Are there dependencies I'm uncertain about? (0-25%)</li>
      </ul>
      <p>If Total Confidence &lt; 80%, output a PAUSE request and wait for human guidance.</p>

      <h3>When NOT to Use</h3>
      <ul>
        <li>Simple, well-defined tasks (overhead not justified)</li>
        <li>Fully automated overnight runs (requires human availability)</li>
        <li>When you trust the agent to figure it out</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- 3. Rate-Limited Ralph -->
    <section id="rate-limited-ralph">
      <h2><span class="b">3.</span> Rate-Limited <span class="b">Ralph</span></h2>

      <h3>Origin</h3>
      <p><strong>Creator:</strong> Geoffrey Huntley</p>
      <p><strong>Repository:</strong> github.com/ghuntley/ralph-claude-code</p>

      <h3>Use Case</h3>
      <p>API cost management with delays, budgets, and backoff strategies. Essential for overnight runs where you want to avoid runaway costs.</p>

      <h3>Complete Runnable Implementation</h3>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
set -e

MAX_ITERATIONS=${1:-10}
CALLS_PER_HOUR=${2:-100}
MAX_TOKENS=${3:-500000}
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Calculate delay between calls (seconds)
RATE_LIMIT_SLEEP=$((3600 / CALLS_PER_HOUR))
CURRENT_ITERATION=1
TOTAL_TOKENS=0
TOKEN_LOG="$SCRIPT_DIR/token_usage.log"

echo "Starting Rate-Limited Ralph"
echo "  Max iterations: $MAX_ITERATIONS"
echo "  Calls per hour: $CALLS_PER_HOUR (delay: ${RATE_LIMIT_SLEEP}s)"
echo "  Token budget: $MAX_TOKENS"

while [ $CURRENT_ITERATION -le $MAX_ITERATIONS ]; do
  echo "=== Iteration $CURRENT_ITERATION / $MAX_ITERATIONS ==="

  # Check rate limit lockfile
  if [ -f /tmp/ralph-rate-limited ]; then
    echo "Rate limited, waiting 60s..."
    sleep 60
    rm -f /tmp/ralph-rate-limited
  fi

  # Check token budget
  if [ $TOTAL_TOKENS -ge $MAX_TOKENS ]; then
    echo "Token budget exhausted ($TOTAL_TOKENS / $MAX_TOKENS)"
    echo "Stopping to prevent overruns."
    exit 1
  fi

  # Run Claude with output capture
  OUTPUT=$(cat "$SCRIPT_DIR/prompt.md" \
    | claude --dangerously-skip-permissions 2>&1 \
    | tee "$SCRIPT_DIR/output.txt") || true

  # Check for rate limit in response
  if echo "$OUTPUT" | grep -qi "rate_limit\|rate limit\|429"; then
    echo "Rate limit detected, backing off..."
    touch /tmp/ralph-rate-limited
    sleep $RATE_LIMIT_SLEEP
    continue
  fi

  # Check for completion
  if echo "$OUTPUT" | grep -q "&lt;promise&gt;COMPLETE&lt;/promise&gt;"; then
    echo "All stories complete!"
    echo "Total tokens used: $TOTAL_TOKENS"
    exit 0
  fi

  # Rate limiting delay
  echo "Waiting ${RATE_LIMIT_SLEEP}s before next iteration..."
  sleep $RATE_LIMIT_SLEEP
  CURRENT_ITERATION=$((CURRENT_ITERATION + 1))
done

echo "Max iterations reached"
exit 1</code></pre>
      </div>

      <h3>Budget Presets</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Conservative (overnight, low cost)
./ralph-rate-limited.sh 50 30 200000

# Standard (balanced)
./ralph-rate-limited.sh 25 100 500000

# Aggressive (fast, higher cost)
./ralph-rate-limited.sh 100 200 1000000</code></pre>
      </div>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Preset</th><th>Est. Duration</th><th>Est. Cost</th></tr>
          </thead>
          <tbody>
            <tr><td>Conservative</td><td>100 min</td><td>$3-6</td></tr>
            <tr><td>Standard</td><td>15 min</td><td>$7-15</td></tr>
            <tr><td>Aggressive</td><td>30 min</td><td>$15-30</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- 4. Compounding Ralph -->
    <section id="compounding-ralph">
      <h2><span class="b">4.</span> Compounding <span class="b">Ralph</span></h2>

      <h3>Origin</h3>
      <p><strong>Creator:</strong> Ryan Carson (@ryancarson)</p>
      <p><strong>Repository:</strong> github.com/snarktank/ralph</p>

      <blockquote>
        <p>"What's amazing is I can ask it to look at previous runs to learn what worked or didn't work."</p>
        <cite>-- Ryan Carson</cite>
      </blockquote>

      <h3>Use Case</h3>
      <p>Archives PRDs from previous runs so the agent references past successes and failures. Each run makes the next better.</p>

      <h3>When to Use</h3>
      <ul>
        <li>Long-term projects with recurring patterns</li>
        <li>Teams sharing Ralph learnings</li>
        <li>When you want institutional knowledge to accumulate</li>
        <li>Multi-phase features building on each other</li>
      </ul>

      <h3>Directory Structure</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>project/
├── scripts/ralph/
│   ├── ralph-compound.sh
│   ├── prompt-compound.md
│   ├── prd.json
│   ├── progress.txt
│   └── archive/              # Auto-created
│       ├── 2026-01-10-auth/
│       │   ├── prd.json
│       │   ├── progress.txt
│       │   └── learnings.md
│       └── 2026-01-12-payments/
│           └── ...</code></pre>
      </div>

      <h3>Cost Implications</h3>
      <ul>
        <li>Slightly higher initial cost (reading archives)</li>
        <li><strong>Significantly lower</strong> long-term costs as patterns compound</li>
        <li>Fewer failed iterations due to learned gotchas</li>
        <li>Real-world report: "By story 10, Ralph knew our patterns" - Ryan Carson</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- 5. Marathon Ralph -->
    <section id="marathon-ralph">
      <h2><span class="b">5.</span> Marathon <span class="b">Ralph</span></h2>

      <h3>Origin</h3>
      <p><strong>Creator:</strong> @stephen_rayner / @gruckion (attributed)</p>
      <p><strong>Status:</strong> Community variant focused on full SDLC compliance</p>

      <h3>Use Case</h3>
      <p>Full software development lifecycle integration with comprehensive test suite generation and E2E automation. Build entire apps, not just features.</p>

      <h3>SDLC Phases</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Phase</th><th>Description</th><th>Deliverables</th></tr>
          </thead>
          <tbody>
            <tr><td>Planning</td><td>Architecture and design decisions</td><td>ARCHITECTURE.md, API design</td></tr>
            <tr><td>Schema</td><td>Database schema and migrations</td><td>migrations/, db/schema.ts</td></tr>
            <tr><td>Backend</td><td>API endpoints and business logic</td><td>src/api/, Unit tests</td></tr>
            <tr><td>Frontend</td><td>UI components and pages</td><td>src/components/, src/pages/</td></tr>
            <tr><td>Testing</td><td>Comprehensive test suite</td><td>80%+ code coverage</td></tr>
            <tr><td>E2E</td><td>End-to-end test automation</td><td>e2e/, Playwright tests</td></tr>
            <tr><td>Documentation</td><td>API docs and user guides</td><td>README.md, API.md</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Cost Implications</h3>
      <ul>
        <li><strong>Significantly higher</strong> than Basic Ralph (50-100+ iterations)</li>
        <li>Typical cost: $50-150 for full application</li>
        <li>Consider running overnight with rate limiting</li>
        <li>Investment pays off in reduced manual testing</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- 6. Lisa -->
    <section id="lisa">
      <h2><span class="b">6.</span> Lisa</h2>

      <h3>Origin</h3>
      <p><strong>Creator:</strong> blencorp</p>
      <p><strong>Repository:</strong> github.com/blencorp/lisa</p>
      <p><strong>Philosophy:</strong> "Lisa plans. Ralph does."</p>

      <h3>Use Case</h3>
      <p>Structured scaffolding approach: Lisa conducts interviews to generate specifications, then Ralph implements. A complete planning-to-execution pipeline.</p>

      <h3>Workflow</h3>
      <div class="ascii-diagram">
+---------------------------------------------+
|  1. /lisa:plan "feature name"               |
|            |                                |
|  2. Lisa creates state files:               |
|     - .claude/lisa.local.md (state)         |
|     - .claude/lisa-draft.md (draft spec)    |
|            |                                |
|  3. Interview Loop:                         |
|     - Lisa asks questions                   |
|     - User answers                          |
|     - Stop hook continues conversation      |
|            |                                |
|  4. User says "done" or "finalize"          |
|            |                                |
|  5. Output: docs/specs/{feature-slug}.md    |
|            |                                |
|  6. NOW run Ralph with the spec             |
+---------------------------------------------+</div>

      <h3>Usage</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Install Lisa plugin
git clone https://github.com/blencorp/lisa ~/.claude/plugins/lisa

# Start planning session
/lisa:plan "user authentication feature"

# With additional context
/lisa:plan "payment processing" --context docs/PRD.md

# Then run Ralph with generated stories
./scripts/ralph/ralph.sh 25</code></pre>
      </div>

      <h3>Cost Implications</h3>
      <ul>
        <li><strong>Interview phase:</strong> 5,000-15,000 tokens (one-time)</li>
        <li><strong>Net savings:</strong> Better specs = fewer wasted Ralph iterations</li>
        <li>Investment in planning typically reduces implementation cost 30-50%</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- 7. Zeroshot -->
    <section id="zeroshot">
      <h2><span class="b">7.</span> Zeroshot</h2>

      <h3>Origin</h3>
      <p><strong>Creator:</strong> Covibes (@Eivind1384955)</p>
      <p><strong>Repository:</strong> github.com/covibes/zeroshot</p>
      <p><strong>Philosophy:</strong> Multi-agent validation prevents hallucination-based approvals</p>

      <h3>Use Case</h3>
      <p>"Next gen" Ralph with multi-agent orchestration: separate agents for planning, implementing, and validating. Validators can't lie about code they didn't write.</p>

      <h3>Architecture</h3>
      <div class="ascii-diagram">
+---------------------------------------------+
|        ZEROSHOT MULTI-AGENT FLOW            |
|                                             |
|  +---------+   Plans tasks    +----------+  |
|  | PLANNER | ----------------> |   PRD    |  |
|  +---------+                  +----------+  |
|       |                            |        |
|       | Acceptance criteria        |        |
|       v                            v        |
|  +-------------+           +------------+   |
|  | IMPLEMENTER | ---------> |   CODE     |   |
|  +-------------+           +------------+   |
|                                  |          |
|                                  v          |
|  +-------------------------------------+    |
|  |        VALIDATORS (blind)           |    |
|  |  - Generic validator                |    |
|  |  - Type checker                     |    |
|  |  - Test runner                      |    |
|  |  - Security scanner                 |    |
|  +-------------------------------------+    |
|                   |                         |
|             PASS / FAIL                     |
+---------------------------------------------+</div>

      <h3>Complexity Tiers</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Tier</th><th>Agents</th><th>Use Case</th></tr>
          </thead>
          <tbody>
            <tr><td>TRIVIAL</td><td>1</td><td>Single implementer, no validators</td></tr>
            <tr><td>SIMPLE</td><td>2</td><td>Implementer + 1 validator</td></tr>
            <tr><td>STANDARD</td><td>4</td><td>Planner + implementer + 2 validators</td></tr>
            <tr><td>CRITICAL</td><td>7</td><td>Planner + implementer + 5 validators</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Usage</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Install
npm install -g @covibes/zeroshot

# By GitHub issue number
zeroshot run 123

# By description
zeroshot run "Add rate limiting with 429 responses per IP"

# With PR creation
zeroshot run 123 --pr

# Full automation (auto-merge on approval)
zeroshot run 123 --ship

# Background mode
zeroshot run 123 --ship -d</code></pre>
      </div>

      <h3>Cost Implications</h3>
      <ul>
        <li><strong>Higher than Basic Ralph</strong> (multiple agents per task)</li>
        <li>TRIVIAL: ~1x Basic Ralph</li>
        <li>STANDARD: ~3-4x Basic Ralph</li>
        <li>CRITICAL: ~6-7x Basic Ralph</li>
        <li><strong>Trade-off:</strong> Higher cost = higher confidence in output</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Additional Variants -->
    <section id="additional-variants">
      <h2><span class="b">Add</span>itional <span class="b">Var</span>iants</h2>

      <h3>AFK Ralph (Away From Keyboard)</h3>
      <p>Full autonomous loop designed to run overnight without human intervention.</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# afk-ralph.sh - Overnight autonomous development

MAX_ITERATIONS=100
TIMEOUT_HOURS=8

timeout ${TIMEOUT_HOURS}h ./scripts/ralph/ralph.sh $MAX_ITERATIONS

# Notify on completion
curl -X POST "$WEBHOOK_URL" -d '{"message": "Ralph completed"}'</code></pre>
      </div>

      <h3>HOTL Ralph (Human On The Loop)</h3>
      <p>Single-iteration variant with human review between each run.</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# ralph-hotl.sh

claude "Review plans/prd.json and plans/progress.txt.
  Pick ONE feature marked passes: false.
  Implement it. Run tests. Commit if passing.
  Output what you completed."

echo ""
echo "=== Changes ==="
git diff HEAD~1 --stat

echo ""
read -p "Continue? (y/n) " -r
[[ $REPLY =~ ^[Yy]$ ]] && ./ralph-hotl.sh</code></pre>
      </div>

      <h3>Parallel Ralph</h3>
      <p>Multiple Ralph instances on different features simultaneously.</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# parallel-ralph.sh

for feature in auth payments notifications; do
  git worktree add ../wt-$feature $feature-branch
  (cd ../wt-$feature && ./ralph.sh 20) &
done
wait

# Merge results
for feature in auth payments notifications; do
  git merge wt-$feature
  git worktree remove ../wt-$feature
done</code></pre>
      </div>

      <h3>Other Community Variants</h3>
      <ul>
        <li><strong>Ralph Wiggum Marketer</strong> - Content generation with self-critique (github.com/muratcankoylan/ralph-wiggum-marketer)</li>
        <li><strong>Ralph Orchestrator</strong> - Multi-agent coordination (github.com/mikeyobrien/ralph-orchestrator)</li>
        <li><strong>Frank Bria's Ralph</strong> - Intelligent exit detection (github.com/frankbria/ralph-claude-code)</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Checkpoint: Advanced Variants -->
    <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
      <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Advanced Variants</div>
      <p><strong>You should now understand:</strong></p>
      <ul>
        <li>Marathon Ralph - Full SDLC with phases</li>
        <li>Lisa - Specification generation before implementation</li>
        <li>Zeroshot - Multi-agent validation (planner, implementer, validators)</li>
        <li>HOTL/AFK/Parallel variants for specific use cases</li>
      </ul>
      <p><strong>If unclear:</strong> Advanced variants add complexity - use them when simpler variants are insufficient.</p>
    </div>

    <hr class="section-divider">

    <!-- Variant Selection Guide -->
    <section id="selection-guide">
      <h2><span class="b">Var</span>iant Selection <span class="b">Gui</span>de</h2>

      <h3>Decision Matrix</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Scenario</th><th>Recommended Variant</th></tr>
          </thead>
          <tbody>
            <tr><td>Standard feature development</td><td>Basic Ralph</td></tr>
            <tr><td>Uncertain requirements</td><td>Dr. Ralph</td></tr>
            <tr><td>Overnight autonomous run</td><td>Rate-Limited Ralph</td></tr>
            <tr><td>Long-term project</td><td>Compounding Ralph</td></tr>
            <tr><td>Full application build</td><td>Marathon Ralph</td></tr>
            <tr><td>Unclear specifications</td><td>Lisa then Basic Ralph</td></tr>
            <tr><td>High-stakes code</td><td>Zeroshot</td></tr>
            <tr><td>Quick iteration</td><td>HOTL Ralph</td></tr>
            <tr><td>Multiple features</td><td>Parallel Ralph</td></tr>
            <tr><td>Content generation</td><td>Ralph Wiggum Marketer</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Complexity vs. Capability</h3>
      <div class="ascii-diagram">
                Capability
                    ^
                    |
 Zeroshot ●---------+--------------------●
                    |            Marathon Ralph
                    |               /
                    |          Lisa /
                    |              /  Compounding Ralph
                    |             /  /
 Dr. Ralph ●-------/--------------●
                  /               |
                 /                |
 Basic Ralph ●--/-----------------●
               /              Rate-Limited Ralph
              /
             ●
          HOTL
            |
------------+----------------------------------> Complexity
         Low                                High</div>
    </section>

    <hr class="section-divider">

    <!-- Cost Implications -->
    <section id="cost-implications">
      <h2><span class="b">Cost</span> <span class="b">Impl</span>ications</h2>

      <h3>Comparative Cost Table</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Variant</th><th>Per Iteration</th><th>10 Iters</th><th>50 Iters</th><th>Notes</th></tr>
          </thead>
          <tbody>
            <tr><td>Basic Ralph</td><td>$0.05-0.20</td><td>$0.50-2</td><td>$2.50-10</td><td>Baseline</td></tr>
            <tr><td>Dr. Ralph</td><td>$0.06-0.25</td><td>$0.60-2.50</td><td>$3-12.50</td><td>+20% for assessment</td></tr>
            <tr><td>Rate-Limited</td><td>$0.05-0.20</td><td>$0.50-2</td><td>$2.50-10</td><td>Same, but controlled</td></tr>
            <tr><td>Compounding</td><td>$0.07-0.25</td><td>$0.70-2.50</td><td>$3.50-12.50</td><td>+40% initially, decreases</td></tr>
            <tr><td>Marathon</td><td>$0.10-0.30</td><td>$1-3</td><td>$5-15</td><td>Higher due to SDLC phases</td></tr>
            <tr><td>Lisa</td><td>$0.15 (one-time)</td><td>N/A</td><td>N/A</td><td>Planning investment</td></tr>
            <tr><td>Zeroshot (STD)</td><td>$0.20-0.60</td><td>$2-6</td><td>$10-30</td><td>4x agents</td></tr>
            <tr><td>Zeroshot (CRIT)</td><td>$0.35-1.00</td><td>$3.50-10</td><td>$17.50-50</td><td>7x agents</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Real-World Cost Examples</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Project</th><th>Variant</th><th>Iterations</th><th>Cost</th><th>Outcome</th></tr>
          </thead>
          <tbody>
            <tr><td>Feature (14 stories)</td><td>Basic</td><td>14</td><td>~$12</td><td>Full feature shipped</td></tr>
            <tr><td>App overnight</td><td>Marathon</td><td>50</td><td>~$80</td><td>Complete app + tests</td></tr>
            <tr><td>Security feature</td><td>Zeroshot</td><td>8</td><td>~$25</td><td>5 validators passed</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="b">Trou</span>bleshooting</h2>

      <details class="troubleshoot">
        <summary>Loop runs forever, never completes</summary>
        <div>
          <p><strong>Symptoms:</strong> Iterations hit MAX_ITERATIONS without COMPLETE signal. Same work repeated.</p>
          <p><strong>Causes:</strong></p>
          <ol>
            <li>No clear completion criteria in prompt.md</li>
            <li>prd.json stories never marked resolved</li>
            <li>Claude can't detect when done</li>
          </ol>
          <p><strong>Solutions:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Add explicit completion marker in prompt.md:
When ALL stories in prd.json are resolved, output exactly:
&lt;promise&gt;COMPLETE&lt;/promise&gt;

# Check if stories are being marked:
cat prd.json | jq '.stories[] | select(.status != "RESOLVED")'</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Context drift - Claude forgetting between iterations</summary>
        <div>
          <p><strong>Symptoms:</strong> Later iterations don't know about earlier decisions. Same mistakes repeated.</p>
          <p><strong>Causes:</strong></p>
          <ol>
            <li>Not using file-based memory (progress.txt)</li>
            <li>Context not refreshed properly</li>
            <li>prompt.md not comprehensive enough</li>
          </ol>
          <p><strong>Solutions:</strong> Ensure progress.txt is read each iteration and use structured learnings format.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Cost exploding - 50+ iterations for simple task</summary>
        <div>
          <p><strong>Symptoms:</strong> Budget consumed rapidly. Task that should take 10 iterations takes 50+.</p>
          <p><strong>Causes:</strong></p>
          <ol>
            <li>Stories too large (not single-iteration sized)</li>
            <li>Acceptance criteria unmeetable</li>
            <li>Loop not terminating on success</li>
          </ol>
          <p><strong>Solutions:</strong> Break large stories into smaller ones. Add MAX_ITERATIONS safety. Start with low max-iterations.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Emergency Recovery</summary>
        <div>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Stop runaway loop immediately
pkill -f "ralph.sh"
pkill -f "claude"

# Check what state we're in
cat prd.json | jq '.stories[] | {title, status}'
git log --oneline -10

# If commits are bad, revert:
git log --oneline -20  # Find last good
git reset --hard abc123  # Reset to it

# Full restart:
git checkout main
git branch -D ralph-feature
git checkout -b ralph-feature
./ralph.sh 20  # Fresh start</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Summary -->
    <section id="summary">
      <h2><span class="b">Sum</span>mary</h2>

      <p>The Ralph ecosystem provides a variant for every use case:</p>

      <ol>
        <li><strong>Basic Ralph</strong> - Start here, the foundation</li>
        <li><strong>Dr. Ralph</strong> - When uncertainty matters</li>
        <li><strong>Rate-Limited Ralph</strong> - Budget and API control</li>
        <li><strong>Compounding Ralph</strong> - Long-term knowledge accumulation</li>
        <li><strong>Marathon Ralph</strong> - Full SDLC compliance</li>
        <li><strong>Lisa</strong> - When you need specs first</li>
        <li><strong>Zeroshot</strong> - Multi-agent validation</li>
      </ol>

      <div class="callout callout-insight">
        <div class="callout-title">The Common Thread</div>
        <p><strong>Fresh context + external memory + verifiable tasks + persistence = "Ship while you sleep"</strong></p>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="mastery-ralph-complete.html">Ralph Complete Mastery</a> - Philosophy and implementation deep dive</li>
        <li><a href="multi-agent-cc-mirror-complete.html">CC Mirror Multi-Agent</a> - Alternative orchestration approach</li>
        <li><a href="compare-orchestration.html">Orchestration Compared</a> - Ralph vs CC Mirror vs Gas Town</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="mastery-ralph-complete.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Ralph Complete</span>
      </a>
      <a href="multi-agent-cc-mirror-complete.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">CC Mirror</span>
      </a>
    </nav>

  </div>

  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <script src="../js/search.js"></script>
  <script src="../js/sidebar.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      button.classList.add('copied');
      setTimeout(() => {
        button.textContent = 'Copy';
        button.classList.remove('copied');
      }, 2000);
    }
  </script>
</body>
</html>
