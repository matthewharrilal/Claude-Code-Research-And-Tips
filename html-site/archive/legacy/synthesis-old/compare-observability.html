<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Comparisons">
  <title>Observability and Monitoring Patterns - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
        <button class="filter-btn" data-filter="journeys">Journeys</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="compare-master.html">Comparisons</a>
      <span>/</span>
      <span>Observability</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;"><strong><span class="b">Ob</span>servability &amp; <span class="b">Mon</span>itoring <span class="b">Pat</span>terns</strong> - Tools and techniques for monitoring Claude Code agent sessions, including Claude HUD, rpai, and custom monitoring scripts. Use this when you need visibility into what your agents are doing, especially during long-running or overnight autonomous workflows.</p>
    </div>

    <p style="background: #fff3cd; border-left: 4px solid #c49052; padding: 1rem; border-radius: 4px; margin-bottom: 2rem;">
      <strong>Note:</strong> This content has been superseded by D-FINAL synthesis. See D-FINAL-operations Section 1 for the most current content. Original preserved below for reference.
    </p>

    <h1><span class="b">Ob</span>servability &amp; <span class="b">Mon</span>itoring <span class="b">Pat</span>terns</h1>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#why-observability">Why Observability Matters</a></li>
        <li><a href="#four-pillars">The Four Pillars of Agent Observability</a></li>
        <li><a href="#observability-tools">Observability Tools</a></li>
        <li><a href="#metrics-to-track">Metrics to Track</a></li>
        <li><a href="#monitoring-patterns">Monitoring Patterns</a></li>
        <li><a href="#debugging-agent-issues">Debugging Agent Issues</a></li>
        <li><a href="#production-monitoring">Production Monitoring</a></li>
        <li><a href="#tool-comparison">Tool Comparison Matrix</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- Why Observability Matters -->
    <section id="why-observability">
      <h2><span class="b">Why</span> Observability <span class="b">Mat</span>ters</h2>

      <p>Agent systems are opaque by default. Unlike traditional software where you can set breakpoints and step through code, AI agents operate as black boxes that consume tokens, make decisions, and produce outputs with minimal visibility into their internal reasoning.</p>

      <blockquote>
        <p>"Makes the hidden control plane of Claude Code visible, which is critical for debugging long-horizon tasks."</p>
        <cite>-- @gurtej__gill_</cite>
      </blockquote>

      <p>When running agents for hours or overnight:</p>
      <ul>
        <li>Context silently exhausts</li>
        <li>Quality degrades without warning</li>
        <li>Tasks fail in ways that aren't immediately obvious</li>
        <li>Learning compounds invisibly (good or bad)</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Four Pillars -->
    <section id="four-pillars">
      <h2><span class="b">The</span> Four <span class="b">Pil</span>lars of Agent Observability</h2>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Pillar</th><th>Purpose</th><th>Without It</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Failure Detection</strong></td><td>Catch issues before they compound</td><td>Broken code accumulates silently</td></tr>
            <tr><td><strong>Behavior Understanding</strong></td><td>Know what the agent is actually doing</td><td>"Staring into the void" - @is_lu_is</td></tr>
            <tr><td><strong>Performance Optimization</strong></td><td>Identify bottlenecks and waste</td><td>Runaway token consumption</td></tr>
            <tr><td><strong>Debugging Capability</strong></td><td>Trace issues to root cause</td><td>Hours lost to mysterious failures</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Observability Tools -->
    <section id="observability-tools">
      <h2><span class="b">Ob</span>servability <span class="b">Too</span>ls</h2>

      <h3>Claude HUD - Native Session Visibility</h3>
      <p><strong>Source:</strong> @jarrodwatts | github.com/jarrodwatts/claude-hud</p>
      <p>The most direct solution for Claude Code visibility. A plugin that renders real-time session data in your terminal statusline.</p>

      <h4>Installation</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>/plugin marketplace add jarrodwatts/claude-hud
/plugin install claude-hud
/claude-hud:setup</code></pre>
      </div>

      <h4>What It Shows</h4>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Category</th><th>Metrics</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Session Metadata</strong></td><td>Model (e.g., Opus 4.5), plan tier, project path, git branch</td></tr>
            <tr><td><strong>Context Usage</strong></td><td>Percentage bar with color coding (green/yellow/red)</td></tr>
            <tr><td><strong>Tool Activity</strong></td><td>Spinners for running tools, checkmarks for completed</td></tr>
            <tr><td><strong>Agent Status</strong></td><td>Subagent names, descriptions, elapsed time</td></tr>
            <tr><td><strong>Todo Progress</strong></td><td>Current task status, completion counter</td></tr>
            <tr><td><strong>Configuration</strong></td><td>Count of CLAUDE.md files, rules, MCPs, hooks</td></tr>
          </tbody>
        </table>
      </div>

      <h4>Sample Output</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>[Opus 4.5] ████████░░ 35% | 1 MCPs | ⏳ 1m
✓ Read x2 | ✓ WebFetch x1 | ✓ Skill x1 | ✓ Edit x1</code></pre>
      </div>

      <h4>Color-Coded Context Bar</h4>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Color</th><th>Context Level</th><th>Action</th></tr>
          </thead>
          <tbody>
            <tr><td>Green</td><td>0-50%</td><td>Full capability, continue working</td></tr>
            <tr><td>Yellow</td><td>50-70%</td><td>Monitor closely, consider compacting soon</td></tr>
            <tr><td>Red</td><td>70-85%</td><td>Compact now or wrap up current task</td></tr>
            <tr><td>(Flashing)</td><td>85%+</td><td>Token breakdown appears, quality degrading</td></tr>
          </tbody>
        </table>
      </div>

      <h3>rpai - tmux Multi-Agent Manager</h3>
      <p><strong>Source:</strong> @radoslav11 | <code>cargo install rpai</code></p>
      <p>When running multiple agents in parallel, rpai provides a unified TUI for monitoring and navigation.</p>

      <h4>Installation</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>cargo install rpai
# Run in any tmux session with agents
rpai</code></pre>
      </div>

      <h4>What It Does</h4>
      <ol>
        <li><strong>Scans</strong> tmux panes for running AI agents (Claude, Cursor, Codex, Opencode)</li>
        <li><strong>Displays</strong> TUI with agent list, status, output previews</li>
        <li><strong>Jump</strong> to any agent with selection (mouse supported)</li>
        <li><strong>Monitor</strong> all agents from one view</li>
      </ol>

      <h4>Demo Interface</h4>
      <div class="ascii-diagram">
┌─────────────────────────────────────────────┐
│  RPAI - Agent Monitor                       │
├─────────────────────────────────────────────┤
│  [1] CURSOR AGENT    ██████ running         │
│  [2] CLAUDE AGENT    ██████ running         │
│  [3] CODEX AGENT     ██████ idle            │
├─────────────────────────────────────────────┤
│  Preview: Claude is executing Python...     │
│  > import pandas as pd                      │
│  > df = pd.read_csv('data.csv')            │
└─────────────────────────────────────────────┘</div>

      <blockquote>
        <p>"Parallel agents feel like herding caffeinated cats."</p>
        <cite>-- @FutbolmeAI</cite>
      </blockquote>
      <p>rpai turns chaos into a control center.</p>

      <h3>tmux/Terminal Monitoring</h3>
      <p>For manual multi-pane setups without rpai.</p>

      <h4>Recommended tmux Layout</h4>
      <div class="ascii-diagram">
┌────────────────────────────────────────────┐
│              Agent Output (main)            │
│                                             │
│  claude "Implement feature X..."            │
│                                             │
├─────────────────────┬──────────────────────┤
│    Test Watcher     │    Context HUD       │
│                     │                       │
│  npm test --watch   │  [HUD output here]   │
├─────────────────────┴──────────────────────┤
│              Git Log / Status               │
│  watch -n5 'git log --oneline -5'          │
└────────────────────────────────────────────┘</div>

      <h3>Git-Based Monitoring</h3>
      <p>Git history provides the most durable form of agent observability. Changes persist across sessions and agent resets.</p>

      <h4>Key Queries</h4>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Commit frequency (agent velocity)
git log --oneline --since="1 hour ago" | wc -l

# Branch state
git branch -v

# Recent activity
git log --oneline -10

# What changed in last iteration
git diff HEAD~1

# PR status (if using gh)
gh pr status

# Uncommitted changes
git status --short</code></pre>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Metrics to Track -->
    <section id="metrics-to-track">
      <h2><span class="b">Met</span>rics to <span class="b">Tra</span>ck</h2>

      <h3>Health Metrics</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Metric</th><th>Source</th><th>Warning Threshold</th><th>Critical Threshold</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Context Usage %</strong></td><td>Claude HUD</td><td>&gt; 60%</td><td>&gt; 85%</td></tr>
            <tr><td><strong>Iteration Count</strong></td><td>Ralph loop output</td><td>Approaching max</td><td>At max</td></tr>
            <tr><td><strong>Time Per Task</strong></td><td>Progress log timestamps</td><td>&gt; 10 min</td><td>&gt; 30 min</td></tr>
            <tr><td><strong>Failure Rate</strong></td><td>Test output, git logs</td><td>&gt; 1 consecutive</td><td>&gt; 3 consecutive</td></tr>
            <tr><td><strong>Token Consumption</strong></td><td>Claude HUD, API logs</td><td>&gt; 50% of budget</td><td>&gt; 80% of budget</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Progress Metrics</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Metric</th><th>Source</th><th>How to Track</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Tasks Completed</strong></td><td>prd.json <code>passes: true</code> count</td><td><code>jq '.userStories | map(select(.passes)) | length'</code></td></tr>
            <tr><td><strong>Stories Remaining</strong></td><td>prd.json <code>passes: false</code> count</td><td><code>jq '.userStories | map(select(.passes == false)) | length'</code></td></tr>
            <tr><td><strong>Velocity Trend</strong></td><td>Git log timestamps</td><td>Commits per hour trending</td></tr>
            <tr><td><strong>Blocker Rate</strong></td><td>Progress.txt entries</td><td>Blocked mentions per iteration</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Monitoring Patterns -->
    <section id="monitoring-patterns">
      <h2><span class="b">Mon</span>itoring <span class="b">Pat</span>terns</h2>

      <h3>Dashboard Setup</h3>

      <h4>Minimal Setup (Single Monitor)</h4>
      <div class="ascii-diagram">
┌────────────────────────────────┐
│        Agent + HUD             │
│  [Opus 4.5] ████░░ 45%         │
│                                 │
│  claude "..."                   │
└────────────────────────────────┘</div>

      <h4>Standard Setup (Development)</h4>
      <div class="ascii-diagram">
┌─────────────────────────────────────────────┐
│              Agent Output (main)             │
│  [Opus 4.5] ████████░░ 35% | 1 MCPs | ⏳ 1m │
│  ✓ Read x2 | ✓ Edit x1                       │
├──────────────────────┬──────────────────────┤
│    Test Watcher      │    Progress Log      │
│  ✓ 42 tests pass     │  [Iteration 5]       │
│  ⏱ watching...       │  US-003 complete     │
└──────────────────────┴──────────────────────┘</div>

      <h4>Production Setup (Multi-Agent)</h4>
      <div class="ascii-diagram">
┌──────────────────┬──────────────────┬──────────────────┐
│   Agent 1        │   Agent 2        │   Agent 3        │
│   (Frontend)     │   (Backend)      │   (Docs)         │
│   ████░░ 45%     │   ██████░░ 60%   │   ██░░░░ 20%     │
├──────────────────┴──────────────────┴──────────────────┤
│                    rpai TUI                             │
│   [1] claude-frontend  ██████ running                  │
│   [2] claude-backend   ██████ running                  │
│   [3] claude-docs      ██████ idle                     │
├─────────────────────────────────────────────────────────┤
│   Git Status: 3 branches active | 12 commits today     │
└─────────────────────────────────────────────────────────┘</div>

      <h3>Alert Triggers</h3>

      <h4>Context Alerts</h4>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Condition</th><th>Action</th><th>Automation</th></tr>
          </thead>
          <tbody>
            <tr><td>Context &gt; 60%</td><td>Monitor closely</td><td>Log warning</td></tr>
            <tr><td>Context &gt; 80%</td><td>Compact or prepare for fresh session</td><td>Alert user</td></tr>
            <tr><td>Context &gt; 90%</td><td>Quality compromised</td><td>Force compact or reset</td></tr>
          </tbody>
        </table>
      </div>

      <h4>Failure Alerts</h4>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Condition</th><th>Action</th><th>Automation</th></tr>
          </thead>
          <tbody>
            <tr><td>1 test failure</td><td>Continue, note in progress.txt</td><td>Log</td></tr>
            <tr><td>3 consecutive failures</td><td>Stop and diagnose</td><td>Alert + pause</td></tr>
            <tr><td>Build failure</td><td>Block commit</td><td>Prevent git commit</td></tr>
            <tr><td>Type check failure</td><td>Block commit</td><td>Prevent git commit</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Debugging Agent Issues -->
    <section id="debugging-agent-issues">
      <h2><span class="b">Deb</span>ugging <span class="b">Ag</span>ent Issues</h2>

      <h3>Common Failures</h3>

      <h4>1. Context Exhaustion</h4>
      <p><strong>Symptoms:</strong></p>
      <ul>
        <li>Claude HUD shows 85%+ usage</li>
        <li>Responses become truncated</li>
        <li>Instructions ignored</li>
        <li>Hallucinated file references</li>
        <li>Repetitive statements</li>
      </ul>
      <p><strong>Resolution:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Option 1: Compact
/compact

# Option 2: Fresh session
/reset
# Or simply start new Claude instance

# Option 3: In Ralph loop - let iteration end naturally
# Fresh context on next iteration</code></pre>
      </div>

      <h4>2. Quality Gate Loops</h4>
      <p><strong>Symptoms:</strong></p>
      <ul>
        <li>Same test failing repeatedly</li>
        <li>Identical changes being attempted</li>
        <li>No progress in iterations</li>
        <li>Progress.txt shows repeated attempts at same task</li>
      </ul>
      <p><strong>Resolution:</strong></p>
      <ol>
        <li>Stop the loop (<code>Ctrl+C</code>)</li>
        <li>Analyze the failing test</li>
        <li>Either: Fix manually, provide more guidance in CLAUDE.md, split task, or mark blocked</li>
      </ol>

      <h4>3. Worker Recursion (Multi-Agent)</h4>
      <p><strong>Symptoms:</strong></p>
      <ul>
        <li>Workers spawning workers spawning workers</li>
        <li>Token costs exploding</li>
        <li>No actual progress</li>
        <li>Many subagent entries in HUD</li>
      </ul>
      <p><strong>Resolution:</strong> Add to CLAUDE.md or worker preamble:</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>RULES:
- Do NOT spawn sub-agents
- Complete ONLY the task described
- If task seems too large, STOP and ask for clarification</code></pre>
      </div>

      <h4>4. Coordination Deadlock (Multi-Agent)</h4>
      <p><strong>Symptoms:</strong></p>
      <ul>
        <li>Multiple agents waiting on each other</li>
        <li>No progress across any agent</li>
        <li>Handoff files not being consumed</li>
        <li>Git branches diverging without merges</li>
      </ul>
      <p><strong>Resolution:</strong> Identify the blocking dependency, then either complete manually, re-assign, or remove dependency by restructuring.</p>
    </section>

    <hr class="section-divider">

    <!-- Production Monitoring -->
    <section id="production-monitoring">
      <h2><span class="b">Pro</span>duction <span class="b">Mon</span>itoring</h2>

      <h3>Periodic Health Check Script</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# health-check.sh - Run every 5 minutes via cron

HEALTH_LOG="/tmp/agent-health.log"

echo "=== $(date) ===" >> $HEALTH_LOG

# Check if agent process is running
if pgrep -f "claude" > /dev/null; then
  echo "Agent: RUNNING" >> $HEALTH_LOG
else
  echo "Agent: STOPPED" >> $HEALTH_LOG
  # Alert
  curl -X POST "$SLACK_WEBHOOK" -d '{"text":"Agent process stopped"}'
fi

# Check recent commit activity
LAST_COMMIT=$(git log -1 --format='%ar')
echo "Last commit: $LAST_COMMIT" >> $HEALTH_LOG

# Check remaining tasks
REMAINING=$(cat scripts/ralph/prd.json | jq '.userStories | map(select(.passes == false)) | length')
echo "Remaining tasks: $REMAINING" >> $HEALTH_LOG</code></pre>
      </div>

      <h3>Simple CLI Dashboard</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# dashboard.sh

while true; do
  clear
  echo "╔══════════════════════════════════════════╗"
  echo "║         Agent Dashboard                   ║"
  echo "╠══════════════════════════════════════════╣"

  # Git stats
  COMMITS_TODAY=$(git log --since="midnight" --oneline | wc -l | tr -d ' ')
  LAST_COMMIT=$(git log -1 --format='%ar' 2>/dev/null || echo "none")
  echo "║ Commits today: $COMMITS_TODAY"
  echo "║ Last commit: $LAST_COMMIT"

  # Task stats
  if [ -f scripts/ralph/prd.json ]; then
    TOTAL=$(cat scripts/ralph/prd.json | jq '.userStories | length')
    DONE=$(cat scripts/ralph/prd.json | jq '.userStories | map(select(.passes)) | length')
    echo "║ Tasks: $DONE / $TOTAL complete"
  fi

  echo "╚══════════════════════════════════════════╝"
  sleep 30
done</code></pre>
      </div>

      <h3>Cost Tracking</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Threshold</th><th>Action</th></tr>
          </thead>
          <tbody>
            <tr><td>50% of daily budget</td><td>Log warning</td></tr>
            <tr><td>80% of daily budget</td><td>Alert user</td></tr>
            <tr><td>95% of daily budget</td><td>Consider pausing</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Tool Comparison -->
    <section id="tool-comparison">
      <h2><span class="b">Tool</span> Comparison <span class="b">Mat</span>rix</h2>

      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Tool</th>
              <th>Visibility Level</th>
              <th>Setup Effort</th>
              <th>Best For</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><strong>Claude HUD</strong></td><td>Session-level</td><td>Quick (5 min)</td><td>Single-agent development</td></tr>
            <tr><td><strong>rpai</strong></td><td>Multi-agent</td><td>Quick (Rust install)</td><td>Parallel agents in tmux</td></tr>
            <tr><td><strong>tmux layout</strong></td><td>Terminal-level</td><td>Medium</td><td>Custom monitoring needs</td></tr>
            <tr><td><strong>Git monitoring</strong></td><td>Commit-level</td><td>Low</td><td>All workflows, durability</td></tr>
            <tr><td><strong>Custom scripts</strong></td><td>Any level</td><td>High</td><td>Production, automation</td></tr>
            <tr><td><strong>Progress.txt review</strong></td><td>Semantic</td><td>None</td><td>Understanding agent reasoning</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Checkpoint -->
    <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
      <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Observability Tools</div>
      <p><strong>You should now understand:</strong></p>
      <ul>
        <li>How to install and configure Claude HUD for context monitoring</li>
        <li>How to use rpai for multi-agent tmux management</li>
        <li>How to set up tmux layouts for agent monitoring</li>
        <li>How to use git-based monitoring for durable tracking</li>
      </ul>
      <p><strong>If unclear:</strong> Re-read the tool installation sections, or try installing Claude HUD first (easiest starting point).</p>
    </div>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="b">Trou</span>bleshooting</h2>

      <details class="troubleshoot">
        <summary>Claude HUD Not Displaying</summary>
        <div>
          <p><strong>Symptom:</strong> Installed Claude HUD but statusline is empty or shows errors.</p>
          <p><strong>Cause:</strong> Plugin not properly activated, or terminal doesn't support required features.</p>
          <p><strong>Fix:</strong> Verify plugin installation and run setup command:</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Verify installation
/plugin list

# Re-run setup
/claude-hud:setup

# Check config file exists
cat ~/.claude/plugins/claude-hud/config.json</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>rpai Not Detecting Agents</summary>
        <div>
          <p><strong>Symptom:</strong> <code>rpai scan</code> returns empty, RPAI TUI shows "No sessions"</p>
          <p><strong>Cause:</strong> Agents not running in tmux panes, or rpai not recognizing agent process names.</p>
          <p><strong>Fix:</strong> Ensure agents are in tmux (not separate terminal windows):</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Verify tmux session exists
tmux list-sessions

# Check for agent processes
pgrep -f "claude|cursor|codex"

# Run rpai with verbose output
rpai --debug</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Git Monitoring Shows No Activity</summary>
        <div>
          <p><strong>Symptom:</strong> Monitoring script reports no commits, but agent appears to be working.</p>
          <p><strong>Cause:</strong> Agent not committing changes, or checking wrong branch/repo.</p>
          <p><strong>Fix:</strong> Verify agent is configured to commit:</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Check current directory and branch
pwd
git branch

# Look for uncommitted changes
git status

# Check if agent is set to auto-commit
grep -i "commit" CLAUDE.md</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Alerts Not Sending</summary>
        <div>
          <p><strong>Symptom:</strong> Threshold exceeded but no Slack/desktop notification received.</p>
          <p><strong>Cause:</strong> Webhook URL incorrect, or notification script not running.</p>
          <p><strong>Fix:</strong> Test webhook manually:</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Test Slack webhook
curl -X POST "$SLACK_WEBHOOK" -d '{"text":"Test alert"}'

# Test desktop notification (macOS)
osascript -e 'display notification "Test" with title "Agent Monitor"'

# Check if monitoring script is running
ps aux | grep "monitor|alert"</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Mental Model -->
    <section id="mental-model">
      <h2><span class="b">Men</span>tal <span class="b">Mod</span>el</h2>

      <p>Think of agent observability like monitoring a distributed system:</p>
      <ul>
        <li><strong>Agents are nodes</strong> - Each has health metrics, can fail independently</li>
        <li><strong>Context is memory</strong> - Finite resource that degrades under pressure</li>
        <li><strong>Git is the event log</strong> - Durable record of all meaningful actions</li>
        <li><strong>Progress.txt is the semantic trace</strong> - Why decisions were made</li>
        <li><strong>Claude HUD is the metrics collector</strong> - Real-time visibility</li>
        <li><strong>rpai is the orchestration dashboard</strong> - Multi-node overview</li>
      </ul>

      <p>Without observability, you're running a distributed system blind. With it, you can debug issues in minutes instead of hours, catch problems before they compound, and optimize your agent workflows based on real data.</p>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="compare-orchestration.html">Orchestration Approaches Compared</a> - Compare Ralph, PRD-Ralph, CC Mirror, Gas Town</li>
        <li><a href="compare-cost.html">Cost Optimization Compared</a> - Token strategies and budget management</li>
        <li><a href="mastery-context-management.html">Context Management Mastery</a> - Deep dive on context engineering</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="compare-memory.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Memory Compared</span>
      </a>
      <a href="compare-cost.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">Cost Compared</span>
      </a>
    </nav>

  </div>

  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <script src="../js/search.js"></script>
  <script src="../js/sidebar.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      button.classList.add('copied');
      setTimeout(() => {
        button.textContent = 'Copy';
        button.classList.remove('copied');
      }, 2000);
    }
  </script>
</body>
</html>
