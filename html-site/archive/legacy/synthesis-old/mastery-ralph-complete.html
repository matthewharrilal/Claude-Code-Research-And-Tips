<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Mastery">
  <title>Ralph Wiggum Pattern: Complete Mastery Guide - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
        <button class="filter-btn" data-filter="journeys">Journeys</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="mastery-master.html">Mastery</a>
      <span>/</span>
      <span>Ralph Complete</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;"><strong><span class="b">Ralph</span> Wiggum <span class="b">Pat</span>tern: Complete Mastery Guide</strong> - The definitive reference for implementing Ralph loop orchestration - the pattern that enables "ship while you sleep" autonomous development. Covers philosophy, implementation, variants, failure modes, and real-world case studies.</p>
    </div>

    <h1><span class="b">Ralph</span> Wiggum <span class="b">Pat</span>tern: Complete Mastery Guide</h1>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#core-mental-model">The Core Mental Model</a></li>
        <li><a href="#history">History and Origin</a></li>
        <li><a href="#basic-implementation">The Basic Implementation</a></li>
        <li><a href="#variants">All Ralph Variants</a></li>
        <li><a href="#success-factors">Critical Success Factors</a></li>
        <li><a href="#failure-modes">Common Failure Modes and Fixes</a></li>
        <li><a href="#case-studies">Real Results and Case Studies</a></li>
        <li><a href="#anti-patterns">When NOT to Use Ralph</a></li>
        <li><a href="#combinations">Combinations That Enhance Ralph</a></li>
        <li><a href="#reference">Complete Reference Materials</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- The Core Mental Model -->
    <section id="core-mental-model">
      <h2><span class="b">The</span> Core <span class="b">Men</span>tal Model</h2>

      <h3>What Ralph IS at Its Essence</h3>

      <blockquote>
        <p>"Think of the AI agent as an <strong>eager but somewhat dim junior developer (Ralph)</strong> who never sleeps, happily works on one tiny task at a time, commits often, and tells you when it's truly finished - but needs extremely tight scoping, strong feedback loops, and hard limits to avoid disaster."</p>
        <cite>-- Matt Pocock</cite>
      </blockquote>

      <p>Ralph Wiggum is a <strong>persistence pattern for AI coding agents</strong>. At its absolute core:</p>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>while :; do cat PROMPT.md | claude ; done</code></pre>
      </div>

      <p>Everything else - PRDs, progress files, verification - is scaffolding around this fundamental loop.</p>

      <h3>The Philosophy in Three Principles</h3>

      <ol>
        <li><strong>Fresh Context Beats Accumulated Context</strong>
          <ul>
            <li>Each iteration spawns a NEW Claude instance with NO memory</li>
            <li>Avoids "context rot" (LLMs degrade with token accumulation)</li>
            <li>Memory lives in external artifacts, not the model</li>
          </ul>
        </li>
        <li><strong>Failure Is Data, Not Defeat</strong>
          <ul>
            <li>"Deterministically bad" failures are predictable and informative</li>
            <li>Each failure refines the next attempt</li>
            <li>Persistence + learning = eventual success</li>
          </ul>
        </li>
        <li><strong>Small + Verifiable = Reliable</strong>
          <ul>
            <li>Tasks must fit in one context window</li>
            <li>Every task has explicit, testable acceptance criteria</li>
            <li>No subjective goals, no ambiguous endpoints</li>
          </ul>
        </li>
      </ol>

      <h3>The Kanban vs Multi-Phase Insight</h3>

      <p><strong>Old Way (Multi-Phase Plans):</strong></p>
      <div class="ascii-diagram">
Phase 1 --> Phase 2 --> Phase 3 --> Phase 4</div>
      <p>Problems: Hard to add tasks, rigid, requires human orchestration.</p>

      <p><strong>Ralph Way (Kanban Loop):</strong></p>
      <div class="ascii-diagram">
+-------------------------------+
|  Pick task from board         |
|         |                     |
|         v                     |
|  Complete task                |
|         |                     |
|         v                     |
|  Back to board                |
|         |                     |
|  All done? --> Exit           |
|  Not done? --> Loop           |
+-------------------------------+</div>
      <p>Focus on WHAT it should do at the end, not HOW to get there.</p>
    </section>

    <hr class="section-divider">

    <!-- History and Origin -->
    <section id="history">
      <h2><span class="b">His</span>tory and <span class="b">Ori</span>gin</h2>

      <h3>The Creator: Geoffrey Huntley</h3>

      <p>Ralph Wiggum was pioneered by <strong>Geoffrey Huntley</strong> (ghuntley.com/ralph/). The pattern gets its name from The Simpsons character - the simple-minded child who persists at tasks regardless of obstacles.</p>

      <p><strong>Key philosophical contributions:</strong></p>
      <ul>
        <li><strong>Iteration over perfection:</strong> Don't aim for perfect on first try</li>
        <li><strong>Operator skill matters:</strong> Success depends on writing good prompts, not just having good models</li>
        <li><strong>External memory architecture:</strong> Rely on files, not context windows</li>
      </ul>

      <h3>Community Adoption Timeline</h3>

      <ul>
        <li><strong>Geoffrey Huntley:</strong> Original concept and name</li>
        <li><strong>Matt Pocock (@mattpocockuk):</strong> Viral video demos, 11 tips guide, PRD format standardization</li>
        <li><strong>Ryan Carson (@ryancarson):</strong> Complete implementation guides, Amp integration, compounding runs</li>
        <li><strong>Arvid Kahl (@arvidkahl):</strong> Comprehensive thread documenting variants</li>
        <li><strong>Muratcan Koylan (@koylanai):</strong> Ralph Wiggum Marketer (content generation variant)</li>
        <li><strong>Wes Winder (@weswinder):</strong> Opus 4.5 + Ralph + Playwright stack</li>
      </ul>

      <h3>Official Recognition</h3>

      <p>Anthropic published an official Claude Code plugin:</p>
      <ul>
        <li><strong>Repo:</strong> github.com/anthropics/claude-code/tree/main/plugins/ralph-wiggum</li>
        <li><strong>Commands:</strong> <code>/ralph-loop</code>, <code>/cancel-ralph</code></li>
        <li><strong>Architecture:</strong> Stop hook creates self-referential feedback loop</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- The Basic Implementation -->
    <section id="basic-implementation">
      <h2><span class="b">The</span> Basic <span class="b">Impl</span>ementation</h2>

      <h3>File Structure</h3>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>project/
├── scripts/ralph/           # Or plans/ - naming varies
│   ├── ralph.sh             # The loop script
│   ├── prompt.md            # Instructions for each iteration
│   ├── prd.json             # Task list with user stories
│   └── progress.txt         # Append-only learnings
└── CLAUDE.md                # Optional: Project context</code></pre>
      </div>

      <!-- Checkpoint: Directory Structure -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: After Creating Directory Structure</div>
        <p><strong>Where you are:</strong> You have created the folder structure for Ralph but no files yet.</p>
        <p><strong>Verify your state:</strong></p>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code>ls -la scripts/ralph/</code></pre>
        </div>
        <p><strong>You should see:</strong> An empty directory exists</p>
        <p><strong>If you don't see this:</strong> Run <code>mkdir -p scripts/ralph/</code> from your project root</p>
      </div>

      <h3>ralph.sh - The Core Loop</h3>

      <p><strong>Ryan Carson's Complete Implementation:</strong></p>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
set -e

MAX_ITERATIONS=${1:-10}
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "Starting Ralph"

for i in $(seq 1 $MAX_ITERATIONS); do
  echo "=== Iteration $i ==="

  OUTPUT=$(cat "$SCRIPT_DIR/prompt.md" \
    | claude --dangerously-skip-permissions 2>&1 \
    | tee /dev/stderr) || true

  if echo "$OUTPUT" | grep -q "&lt;promise&gt;COMPLETE&lt;/promise&gt;"; then
    echo "Done!"
    exit 0
  fi

  sleep 2
done

echo "Max iterations reached"
exit 1</code></pre>
      </div>

      <p><strong>Make executable:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>chmod +x scripts/ralph/ralph.sh</code></pre>
      </div>

      <p><strong>Run:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>./scripts/ralph/ralph.sh 25  # max 25 iterations</code></pre>
      </div>

      <!-- Checkpoint: ralph.sh -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: After Creating ralph.sh</div>
        <p><strong>Verify your state:</strong></p>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Check file exists and is executable
ls -la scripts/ralph/ralph.sh

# Quick syntax check
bash -n scripts/ralph/ralph.sh && echo "Syntax OK"</code></pre>
        </div>
        <p><strong>You should see:</strong> <code>-rwxr-xr-x</code> (note the 'x' for executable) and "Syntax OK"</p>
      </div>

      <h3>prompt.md - Agent Instructions</h3>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Ralph Agent Instructions

## Your Task

1. Read `scripts/ralph/prd.json`
2. Read `scripts/ralph/progress.txt` (check Codebase Patterns first)
3. Check you're on the correct branch
4. Pick highest priority story where `passes: false`
5. Implement that ONE story
6. Run typecheck and tests
7. Commit: `feat: [ID] - [Title]`
8. Update prd.json: `passes: true`
9. Append learnings to progress.txt

## Progress Format

APPEND to progress.txt:

---
## [Date] - [Story ID]
- What was implemented
- Files changed
- **Learnings:**
  - Patterns discovered
  - Gotchas encountered

## Stop Condition

If ALL stories pass, reply:
&lt;promise&gt;COMPLETE&lt;/promise&gt;

Otherwise end normally.</code></pre>
      </div>

      <h3>prd.json - Task Tracking</h3>

      <p><strong>Standard Format:</strong></p>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "project": "Project Name",
  "branchName": "ralph/feature-name",
  "description": "Feature description",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add login form",
      "description": "As a user, I need a login form",
      "acceptanceCriteria": [
        "Email/password fields render",
        "Validates email format",
        "Shows error on failure",
        "npm run typecheck passes",
        "npm run test passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    }
  ]
}</code></pre>
      </div>

      <p><strong>Matt Pocock's Simpler Format:</strong></p>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "delete_video_shows_confirmation": {
    "description": "Delete video shows confirmation dialog before deleting",
    "passes": true
  },
  "beats_display": {
    "description": "Beats display as three orange ellipses dots below clip",
    "details": "Add beat to clip, verify 3 orange dots appear",
    "passes": false
  }
}</code></pre>
      </div>

      <!-- Checkpoint: prd.json -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: After Creating prd.json</div>
        <p><strong>Verify your state:</strong></p>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Check valid JSON syntax
cat scripts/ralph/prd.json | jq . > /dev/null && echo "Valid JSON"

# Count user stories
cat scripts/ralph/prd.json | jq '.userStories | length'</code></pre>
        </div>
        <p><strong>You should see:</strong> "Valid JSON" and a number indicating your story count</p>
      </div>

      <h3>progress.txt - External Memory</h3>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Ralph Progress Log
Started: 2026-01-09

## Codebase Patterns
- Migrations: Use IF NOT EXISTS
- Zod: Always use .optional() for nullable
- React: useRef&lt;Timeout | null&gt;(null)

## Key Files
- db/schema.ts
- app/auth/actions.ts

---

## 2026-01-09 10:00 - US-001
- Completed: Login form skeleton
- Files: src/components/LoginForm.tsx
- Learnings: Use Tailwind for form styling</code></pre>
      </div>

      <div class="callout callout-warning">
        <div class="callout-title">Critical Rule</div>
        <p><strong>APPEND only, never UPDATE.</strong> The word "append" in instructions is essential.</p>
      </div>

      <!-- Checkpoint: Complete Setup -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Complete Ralph Setup (Pre-Flight)</div>
        <p><strong>Where you are:</strong> All 4 files exist. You're ready to run Ralph for the first time.</p>
        <p><strong>Pre-flight checklist:</strong></p>
        <ul>
          <li><code>ralph.sh</code> has shebang (<code>#!/bin/bash</code>) and is executable</li>
          <li><code>prompt.md</code> includes the <code>&lt;promise&gt;COMPLETE&lt;/promise&gt;</code> stop condition</li>
          <li><code>prd.json</code> is valid JSON with all <code>passes: false</code></li>
          <li><code>progress.txt</code> exists (can be empty or have header)</li>
          <li>Git branch created for this feature</li>
          <li>Tests can run (<code>npm test</code> or your test command)</li>
        </ul>
        <p><strong>Ready to launch?</strong></p>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code>./scripts/ralph/ralph.sh 25</code></pre>
        </div>
      </div>
    </section>

    <hr class="section-divider">

    <!-- All Ralph Variants -->
    <section id="variants">
      <h2><span class="b">All</span> Ralph <span class="b">Var</span>iants</h2>

      <h3>Basic Ralph</h3>
      <p><strong>What it is:</strong> The foundational loop pattern.</p>
      <p><strong>Use case:</strong> Standard feature development with clear acceptance criteria.</p>
      <p><strong>Actionability:</strong> Medium lift - requires PRD setup + bash scripting.</p>

      <h3>AFK Ralph (Away From Keyboard)</h3>
      <p><strong>What it is:</strong> Full autonomous loop designed to run overnight.</p>
      <p><strong>What makes it different:</strong></p>
      <ul>
        <li>Runs for hours/days without human intervention</li>
        <li>Requires bulletproof feedback loops (tests, typecheck, CI)</li>
        <li>Wake up to completed work</li>
      </ul>

      <blockquote>
        <p>"KISS approach to AI coding that lets you ship while you sleep"</p>
        <cite>-- Matt Pocock</cite>
      </blockquote>

      <h3>HOTL Ralph (Human On The Loop)</h3>
      <p><strong>What it is:</strong> Single-iteration variant with human review between runs.</p>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
# Single iteration with review

claude "Review plans/prd.json and plans/progress.txt.
  Pick ONE feature marked passes: false.
  Implement it.
  Run tests.
  If passing, mark passes: true and commit.
  Append learnings to progress.txt.
  Output what you completed."

# Show diff for review
echo "=== Changes made ==="
git diff HEAD~1 --stat

echo "=== PRD Status ==="
jq '.userStories[] | select(.passes == false) | .title' plans/prd.json

read -p "Continue to next iteration? (y/n) " -n 1 -r
if [[ $REPLY =~ ^[Yy]$ ]]; then
  ./ralph-hotl.sh
fi</code></pre>
      </div>

      <p><strong>When to use:</strong> Security-sensitive code, learning a new codebase, debugging stuck loops.</p>

      <h3>Dr. Ralph</h3>
      <p><strong>Creator:</strong> @MikeEndale</p>
      <p><strong>What it adds:</strong> Multi-phase version with confidence thresholds. Agent reports confidence percentage and only advances when 80%+ confident.</p>

      <h3>Compounding Ralph</h3>
      <p><strong>Creator:</strong> @ryancarson</p>
      <p><strong>What it adds:</strong> Archives PRDs from previous runs so the agent references past successes/failures. Each run makes the next better.</p>

      <blockquote>
        <p>"What's amazing is I can ask it to look at previous runs to learn what worked or didn't work. So every time I run Ralph, it gets better and better."</p>
        <cite>-- Ryan Carson</cite>
      </blockquote>

      <h3>Parallel Ralph</h3>
      <p><strong>What it is:</strong> Multiple Ralph instances running simultaneously on different features/branches.</p>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Spawn parallel Ralph loops in separate worktrees
for feature in auth payments notifications; do
  git worktree add ../wt-$feature $feature-branch
  (cd ../wt-$feature && ./ralph.sh 20) &
done
wait

# Merge results
for feature in auth payments notifications; do
  git merge wt-$feature
done</code></pre>
      </div>

      <h3>Additional Variants</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Variant</th><th>Creator</th><th>Purpose</th></tr>
          </thead>
          <tbody>
            <tr><td>Marathon Ralph</td><td>@stephen_rayner</td><td>Full SDLC integration</td></tr>
            <tr><td>Lisa</td><td>@petruarakiss</td><td>Enhanced logging</td></tr>
            <tr><td>Zeroshot</td><td>@Eivind1384955</td><td>Next gen version</td></tr>
            <tr><td>Ralph Wiggum Marketer</td><td>@koylanai</td><td>Content generation</td></tr>
            <tr><td>Rate-Limited Ralph</td><td>@ghuntley</td><td>Cost/rate management</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Critical Success Factors -->
    <section id="success-factors">
      <h2><span class="b">Crit</span>ical Success <span class="b">Fac</span>tors</h2>

      <h3>1. Task Sizing (THE Most Critical Factor)</h3>

      <div class="callout callout-warning">
        <div class="callout-title">The Golden Rule</div>
        <p>Each task must be completable in ONE iteration (~one context window).</p>
      </div>

      <p><strong>Right-sized tasks:</strong></p>
      <ul>
        <li>Add a database column + migration</li>
        <li>Add a UI component to an existing page</li>
        <li>Update a server action with new logic</li>
        <li>Write tests for one module</li>
        <li>Implement one API endpoint</li>
      </ul>

      <p><strong>Too big (split these):</strong></p>
      <ul>
        <li>"Build the entire dashboard" - Split: schema, queries, UI, filters</li>
        <li>"Add authentication" - Split: schema, middleware, login UI, sessions</li>
        <li>"Refactor the API" - Split: one story per endpoint</li>
      </ul>

      <blockquote>
        <p>"If you can't describe it in 2-3 sentences, it's too big."</p>
        <cite>-- Ryan Carson</cite>
      </blockquote>

      <h3>2. Story Ordering (Dependencies First)</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>1. Schema/database changes (migrations)
2. Server actions / backend logic
3. UI components that use the backend
4. Dashboard/summary views that aggregate</code></pre>
      </div>
      <p><strong>Wrong:</strong> UI component before the schema it depends on.</p>

      <h3>3. Acceptance Criteria (Must Be Verifiable)</h3>

      <p><strong>Good (verifiable):</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>"acceptanceCriteria": [
  "Add investorType column with default 'cold'",
  "Filter dropdown has options: All, Cold, Friend",
  "npm run typecheck passes",
  "npm run test passes"
]</code></pre>
      </div>

      <p><strong>Bad (vague):</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>"acceptanceCriteria": [
  "Works correctly",
  "Good UX",
  "Handles edge cases"
]</code></pre>
      </div>

      <h3>4. Feedback Loops (Non-Negotiable)</h3>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Priority</th><th>Method</th><th>Use Case</th></tr>
          </thead>
          <tbody>
            <tr><td>1</td><td>Type checking</td><td><code>npm run typecheck</code> - Always</td></tr>
            <tr><td>2</td><td>Unit tests</td><td><code>npm test</code> - For logic</td></tr>
            <tr><td>3</td><td>CI green</td><td>Every commit must pass</td></tr>
            <tr><td>4</td><td>Browser automation</td><td>Playwright MCP for UI</td></tr>
            <tr><td>5</td><td>Manual spot-check</td><td>Human review at milestones</td></tr>
          </tbody>
        </table>
      </div>

      <h3>5. Explicit Completion Signals</h3>

      <p><strong>The promise pattern:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>If ALL stories pass, reply:
&lt;promise&gt;COMPLETE&lt;/promise&gt;</code></pre>
      </div>

      <h3>6. Max Iterations (Safety Net)</h3>
      <p><strong>Always set a limit:</strong> Prevents runaway costs and infinite loops.</p>

      <h3>7. Learnings Compound</h3>
      <p><strong>Two places for learnings:</strong></p>
      <ul>
        <li><strong>progress.txt</strong> - Session memory for Ralph iterations</li>
        <li><strong>AGENTS.md</strong> - Permanent docs for humans and future agents</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Common Failure Modes -->
    <section id="failure-modes">
      <h2><span class="b">Com</span>mon Failure <span class="b">Mod</span>es and Fixes</h2>

      <details class="troubleshoot">
        <summary>Stories Too Large</summary>
        <div>
          <p><strong>Symptom:</strong> Context overflow, broken code, agent loses track.</p>
          <p><strong>Diagnosis:</strong> Task takes more than one context window to complete.</p>
          <p><strong>Fix:</strong> Split into smaller stories (2-3 sentence rule).</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code>BAD: "Build entire auth system"

GOOD:
- "Add users table migration"
- "Add auth middleware"
- "Add login form component"
- "Add session management"</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Weak Tests / No Verification</summary>
        <div>
          <p><strong>Symptom:</strong> Errors compound across iterations; future iterations inherit broken code.</p>
          <blockquote>
            <p>"If you don't do this, you're hamstringing future agent runs with bad code, and they'll need to bisect to find bugs. Super nasty."</p>
            <cite>-- Matt Pocock</cite>
          </blockquote>
          <p><strong>Fix:</strong> Require typecheck + tests in EVERY acceptance criteria.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Frontend Without Browser Verification</summary>
        <div>
          <p><strong>Symptom:</strong> UI changes claimed complete but visually broken.</p>
          <p><strong>Fix:</strong> Add Playwright/browser verification:</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code>"Verify at localhost:3000/login using dev-browser skill"</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Progress Overwriting (Not Appending)</summary>
        <div>
          <p><strong>Symptom:</strong> Learnings lost between iterations.</p>
          <p><strong>Fix:</strong> Use the word "APPEND" explicitly in prompt:</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code>APPEND to progress.txt (never update or overwrite):</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Stuck Detection (Same Task Repeating)</summary>
        <div>
          <p><strong>Symptom:</strong> Ralph repeats same task without progress.</p>
          <p><strong>Detection script:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code>STUCK_THRESHOLD=3
LAST_COMMIT=""
STUCK_COUNT=0

while [ $CURRENT_ITERATION -le $MAX_ITERATIONS ]; do
  claude @prompt.md | tee output.txt

  CURRENT_COMMIT=$(git rev-parse HEAD 2>/dev/null)

  if [ "$CURRENT_COMMIT" = "$LAST_COMMIT" ]; then
    STUCK_COUNT=$((STUCK_COUNT + 1))
    if [ $STUCK_COUNT -ge $STUCK_THRESHOLD ]; then
      echo "WARNING: Stuck for $STUCK_COUNT iterations"
      exit 1
    fi
  else
    STUCK_COUNT=0
    LAST_COMMIT=$CURRENT_COMMIT
  fi

  CURRENT_ITERATION=$((CURRENT_ITERATION + 1))
done</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Case Studies -->
    <section id="case-studies">
      <h2><span class="b">Real</span> Results and <span class="b">Case</span> Studies</h2>

      <h3>Case Study 1: Ryan Carson's 14-Iteration Feature</h3>
      <div class="table-responsive">
        <table>
          <tr><td><strong>Project:</strong></td><td>Untangle Legal Agent</td></tr>
          <tr><td><strong>Feature:</strong></td><td>Income Upsert Tool</td></tr>
          <tr><td><strong>Iterations:</strong></td><td>14</td></tr>
          <tr><td><strong>Time:</strong></td><td>~2 hours autonomous</td></tr>
          <tr><td><strong>Cost:</strong></td><td>~$10-15 estimate</td></tr>
        </table>
      </div>
      <p><strong>What was built:</strong> Tool skeleton with Zod schema, category mapping, duplicate detection, database operations, UI components, validation logic.</p>
      <blockquote>
        <p>"Learnings compound. By story 10, Ralph knew our patterns."</p>
      </blockquote>

      <h3>Case Study 2: Matt Pocock's Video Editor</h3>
      <p><strong>Project:</strong> AI Hero Video Editor</p>
      <p><strong>Feature:</strong> Beats display system</p>
      <p><strong>What was built:</strong> BeatIndicator component, three orange dots below clips, tests passing, visual verification via Playwright screenshot.</p>

      <h3>Case Study 3: Molly Cantillon's Jmail</h3>
      <p><strong>Project:</strong> Jmail (Epstein files search)</p>
      <p><strong>Result:</strong> 18M users, built overnight using Ralph loops for document parsing and search index building.</p>
    </section>

    <hr class="section-divider">

    <!-- When NOT to Use Ralph -->
    <section id="anti-patterns">
      <h2><span class="b">When</span> NOT to <span class="b">Use</span> Ralph</h2>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Scenario</th><th>Reason</th><th>Alternative</th></tr>
          </thead>
          <tbody>
            <tr><td>Subjective tasks</td><td>"Make it pretty" has no verifiable completion</td><td>Human design review</td></tr>
            <tr><td>Security-critical code</td><td>Needs human review, not autonomous loops</td><td>HOTL Ralph</td></tr>
            <tr><td>Ambiguous requirements</td><td>"Build something cool" wastes tokens</td><td>Define specs first</td></tr>
            <tr><td>One-shot operations</td><td>Loop overhead not justified</td><td>Single Claude session</td></tr>
            <tr><td>Exploratory work</td><td>No defined end state</td><td>Interactive session</td></tr>
            <tr><td>Legacy code without tests</td><td>No verification = no Ralph</td><td>Add tests first</td></tr>
            <tr><td>Production deployments</td><td>Always review before shipping</td><td>Human deployment</td></tr>
          </tbody>
        </table>
      </div>

      <blockquote>
        <p>"A word of warning that it doesn't take the place of good planning and context engineering phases... why burn tokens on brute force"</p>
        <cite>-- @seltzergenius</cite>
      </blockquote>
    </section>

    <hr class="section-divider">

    <!-- Combinations -->
    <section id="combinations">
      <h2><span class="b">Comb</span>inations That <span class="b">Enh</span>ance Ralph</h2>

      <h3>Ralph + Opus 4.5 + Playwright = "AGI"</h3>
      <p><strong>Source:</strong> @weswinder</p>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Component</th><th>Role</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Opus 4.5</strong></td><td>Strong underlying model for reasoning</td></tr>
            <tr><td><strong>Ralph Wiggum</strong></td><td>Iterative loop that persists through failures</td></tr>
            <tr><td><strong>Playwright</strong></td><td>Browser automation for real-world verification</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Ralph + Git Worktrees (Parallel Execution)</h3>
      <p><strong>Purpose:</strong> True isolation between parallel agents. No file conflicts, shared git history.</p>

      <h3>Ralph + Mobile Notifications</h3>
      <p><strong>Purpose:</strong> Get notified when Ralph needs input or completes. Use hooks to send webhook notifications.</p>

      <h3>Ralph + CC Mirror Orchestration</h3>
      <p><strong>Purpose:</strong> Multi-agent coordination with Ralph as the task executor. Use CC Mirror for task decomposition, Ralph for execution.</p>
    </section>

    <hr class="section-divider">

    <!-- Reference Materials -->
    <section id="reference">
      <h2><span class="b">Comp</span>lete Reference <span class="b">Mat</span>erials</h2>

      <h3>Official Resources</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Resource</th><th>URL</th></tr>
          </thead>
          <tbody>
            <tr><td>Original Ralph</td><td>ghuntley.com/ralph/</td></tr>
            <tr><td>Official Plugin</td><td>github.com/anthropics/claude-code/tree/main/plugins/ralph-wiggum</td></tr>
            <tr><td>Ryan Carson's Ralph</td><td>github.com/snarktank/ralph</td></tr>
            <tr><td>PRD Templates</td><td>github.com/snarktank/ai-dev-tasks</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Cost Estimates</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Iterations</th><th>Tokens (est.)</th><th>Cost @ $15/M</th></tr>
          </thead>
          <tbody>
            <tr><td>10</td><td>30K-150K</td><td>$0.45-$2.25</td></tr>
            <tr><td>25</td><td>75K-375K</td><td>$1.13-$5.63</td></tr>
            <tr><td>50</td><td>150K-750K</td><td>$2.25-$11.25</td></tr>
            <tr><td>100</td><td>300K-1.5M</td><td>$4.50-$22.50</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Actionability Summary</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Approach</th><th>Lift</th><th>Best For</th></tr>
          </thead>
          <tbody>
            <tr><td>Official Plugin</td><td>Quick</td><td>Standard Ralph workflows</td></tr>
            <tr><td>Bash Script</td><td>Quick</td><td>Custom control</td></tr>
            <tr><td>Marathon Ralph</td><td>Medium</td><td>Full SDLC</td></tr>
            <tr><td>Ralph + Playwright</td><td>Medium</td><td>UI features</td></tr>
            <tr><td>Parallel Ralph</td><td>Medium-High</td><td>Multi-feature overnight</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="b">Trou</span>bleshooting</h2>

      <details class="troubleshoot">
        <summary>Error: "ralph.sh: Permission denied"</summary>
        <div>
          <p><strong>Cause:</strong> Script lacks execute permission</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Add execute permission
chmod +x scripts/ralph/ralph.sh

# Or run with bash explicitly
bash scripts/ralph/ralph.sh 10</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Error: "claude: command not found"</summary>
        <div>
          <p><strong>Cause:</strong> Claude Code not installed or not in PATH</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Install Claude Code
npm install -g @anthropic-ai/claude-code

# Verify installation
which claude
claude --version</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Error: "jq: parse error"</summary>
        <div>
          <p><strong>Cause:</strong> Invalid JSON in prd.json</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Validate JSON
cat plans/prd.json | jq .

# Common errors:
# - Trailing commas: {"key": "value",}
# - Missing quotes: {key: "value"}
# - Unclosed braces: {"key": "value"</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Emergency Recovery: Ralph Made Bad Changes</summary>
        <div>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Undo last Ralph commit
git reset --soft HEAD~1

# Or revert to before Ralph run
git log --oneline -20
git reset --hard abc123  # Last known good commit</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- The Bottom Line -->
    <section id="bottom-line">
      <h2><span class="b">The</span> Bottom <span class="b">Lin</span>e</h2>

      <p>Ralph Wiggum is not about making the agent smarter. It is about:</p>

      <ol>
        <li><strong>Working around context limitations</strong> through fresh starts</li>
        <li><strong>Leveraging persistence</strong> through external memory</li>
        <li><strong>Building feedback loops</strong> that catch errors</li>
        <li><strong>Compounding progress</strong> across iterations</li>
        <li><strong>Accepting imperfection</strong> while achieving eventual consistency</li>
      </ol>

      <blockquote>
        <p>"Given excellent upfront specification, we can already achieve meaningful unattended software production in 2026."</p>
      </blockquote>

      <div class="ascii-diagram">
+------------------------------------------+
|        RALPH TRANSFORMATION              |
+------------------------------------------+
| Human Role       | AI Role               |
|------------------|----------------------|
| Product Manager  | Implementation Army  |
| Architect        | Tireless Executor    |
| 25-30 min plan   | 8 hours grinding     |
| Morning review   | Overnight shipping   |
+------------------------------------------+</div>

      <p>Ralph enables "ship while you sleep" workflows. The pattern is simple, powerful, and proven.</p>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="ralph-ecosystem-complete.html">Ralph Ecosystem Complete</a> - All variants with runnable code</li>
        <li><a href="multi-agent-cc-mirror-complete.html">CC Mirror Multi-Agent</a> - Alternative orchestration approach</li>
        <li><a href="compare-orchestration.html">Orchestration Compared</a> - Ralph vs CC Mirror vs Gas Town</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="mastery-master.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Mastery Index</span>
      </a>
      <a href="ralph-ecosystem-complete.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">Ralph Ecosystem</span>
      </a>
    </nav>

  </div>

  <script src="../js/search.js"></script>
  <script src="../js/sidebar.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      button.classList.add('copied');
      setTimeout(() => {
        button.textContent = 'Copy';
        button.classList.remove('copied');
      }, 2000);
    }
  </script>
</body>
</html>
