<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Combinations">
  <title>Higher-Order Combinations: Triple+ Pattern Stacks - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="combinations-master.html">Combinations</a>
      <span>/</span>
      <span>Triple+ Stacks</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;">This is <strong>advanced territory</strong> - stacks of 3+ patterns working together. These are the configurations used by Claude Code power users shipping production code at 5-10x normal velocity. Only read this after mastering individual patterns and pairwise combinations. <strong>Prerequisites:</strong> familiarity with Ralph, Hooks, Subagents, and CC Mirror.</p>
    </div>

    <h1><span class="bionic">Hig</span>her-Order <span class="bionic">Com</span>binations: <span class="bionic">Tri</span>ple+ <span class="bionic">Pat</span>tern <span class="bionic">Sta</span>cks</h1>

    <p class="conversational-lead">
      This <span class="bionic">syn</span>thesis identifies the most powerful multi-pattern combinations from the Claude Code power user community. These are not individual techniques but <strong>integrated stacks</strong> where each component amplifies the others.
    </p>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#unhobbled">The "Unhobbled" Full Stack</a></li>
        <li><a href="#creator-stack">Boris Cherny's Creator Stack</a></li>
        <li><a href="#production-multi-agent">Production Multi-Agent Stack</a></li>
        <li><a href="#compounding-learning">Compounding Learning Stack</a></li>
        <li><a href="#triple-matrix">Triple+ Combination Matrix</a></li>
        <li><a href="#synergy-analysis">Synergy Analysis</a></li>
        <li><a href="#anti-patterns">Anti-Patterns: What NOT to Combine</a></li>
        <li><a href="#implementation-roadmap">Implementation Roadmap</a></li>
        <li><a href="#real-world-examples">Real-World Stack Examples</a></li>
        <li><a href="#metrics">Metrics for Stack Success</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- The "Unhobbled" Full Stack -->
    <section id="unhobbled">
      <h2>The "<span class="bionic">Unh</span>obbled" <span class="bionic">Ful</span>l <span class="bionic">Sta</span>ck</h2>
      <p><strong>Source:</strong> @EricBuess (Twitter/X)</p>

      <p>The complete maximalist setup that removes all limitations and automates everything:</p>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Component</th><th>Function</th><th>Synergy</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>LSP Integration</strong></td><td>Real-time code intelligence, autocomplete, diagnostics</td><td>Provides Claude with IDE-level awareness</td></tr>
            <tr><td><strong>Hooks</strong></td><td>Event-driven automation (format, notify, gate)</td><td>Automates all deterministic operations</td></tr>
            <tr><td><strong>Subagents</strong></td><td>Delegated parallel work with isolated contexts</td><td>Handles complex tasks without polluting main context</td></tr>
            <tr><td><strong>Adversarial Validation</strong></td><td>Counter-agent reviews for quality control</td><td>Catches errors before they compound</td></tr>
            <tr><td><strong>Ralph Wiggum Loops</strong></td><td>File-based state for infinite autonomous work</td><td>Enables multi-hour/day projects</td></tr>
            <tr><td><strong>2-Way Voice (STT/TTS)</strong></td><td>Dictate prompts, hear responses</td><td>Enables mobile/hands-free operation</td></tr>
          </tbody>
        </table>
      </div>

      <h3>What It Unlocks</h3>
      <ul>
        <li><strong>10x productivity</strong> vs vanilla Claude Code</li>
        <li>True "set it and forget it" workflows</li>
        <li>Mobile-first development (code from your couch)</li>
        <li>Multi-day autonomous projects</li>
      </ul>

      <h3>Configuration Example</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "hooks": {
    "PreToolUse": [{
      "matcher": "AskUserQuestion",
      "hooks": [{ "type": "command", "command": "~/.claude/hooks/notify.sh" }]
    }, {
      "matcher": "Bash",
      "hooks": [{ "type": "command", "command": "~/.claude/hooks/security-gate.sh" }]
    }],
    "PostToolUse": [{
      "matcher": "Edit",
      "hooks": [{ "type": "command", "command": "~/.claude/hooks/smart-format.sh" }]
    }],
    "SessionEnd": [{
      "type": "command",
      "command": "~/.claude/hooks/ralph-continue.sh"
    }]
  }
}</code></pre>
      </div>

      <h3>Implementation Order</h3>
      <ol>
        <li>Install hooks (formatting, notifications)</li>
        <li>Set up subagent delegation pattern</li>
        <li>Add adversarial validation layer</li>
        <li>Configure Ralph loops for sustained work</li>
        <li>Add voice (optional but powerful for mobile)</li>
        <li>LSP integration for code intelligence</li>
      </ol>
    </section>

    <hr class="section-divider">

    <!-- Boris Cherny's Creator Stack -->
    <section id="creator-stack">
      <h2><span class="bionic">Bor</span>is <span class="bionic">Che</span>rny's <span class="bionic">Cre</span>ator <span class="bionic">Sta</span>ck</h2>
      <p><strong>Source:</strong> Boris Cherny (Claude Code creator) - Interview & Twitter</p>

      <p>The workflow used by the creator of Claude Code himself to achieve 100% AI-contributed code:</p>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Component</th><th>Function</th><th>Synergy</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>5-10 Parallel Sessions</strong></td><td>Multiple Claude instances working simultaneously</td><td>Maximizes throughput on independent tasks</td></tr>
            <tr><td><strong>Always Opus 4.5 + Extended Thinking</strong></td><td>Best model with deep reasoning</td><td>Quality output reduces iteration</td></tr>
            <tr><td><strong>Shared CLAUDE.md</strong></td><td>Project context shared across all sessions</td><td>Consistent behavior without re-explaining</td></tr>
            <tr><td><strong>Plan Mode -> Auto-Accept</strong></td><td>Planning phase then full autonomy</td><td>Control where needed, speed where safe</td></tr>
            <tr><td><strong>Slash Commands + Subagents</strong></td><td>Custom commands triggering delegated work</td><td>Repeatable complex workflows</td></tr>
            <tr><td><strong>Verification Loops</strong></td><td>Run tests, check output, iterate</td><td>Catches errors before commit</td></tr>
          </tbody>
        </table>
      </div>

      <h3>What It Unlocks</h3>
      <ul>
        <li><strong>100% AI-contributed code</strong> in production applications</li>
        <li>Parallel feature development</li>
        <li>Ship features in hours, not days</li>
        <li>Code quality matches or exceeds human output</li>
      </ul>

      <h3>Key Insight: The Planning Phase</h3>
      <div class="ascii-diagram">
1. Start in PLAN mode (manual approval)
2. Discuss architecture, constraints, patterns
3. Lock in shared understanding in CLAUDE.md
4. Switch to AUTO-ACCEPT mode
5. Let Claude execute with full autonomy
6. Verify via tests and review
      </div>

      <h3>CLAUDE.md Structure for Parallel Sessions</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Project Context
[project description, architecture]

# Current Sprint
[active features being developed]

# Session Assignment
- Session 1: Feature A (branch: feat/a)
- Session 2: Feature B (branch: feat/b)
- Session 3: Bug fixes (branch: fix/bugs)
- Session 4: Tests (branch: test/coverage)
- Session 5: Docs (branch: docs/update)

# Shared Patterns
[code conventions, patterns to follow]

# Verification Checklist
- [ ] All tests pass
- [ ] Linter clean
- [ ] Build succeeds
- [ ] PR ready for review</code></pre>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Production Multi-Agent Stack -->
    <section id="production-multi-agent">
      <h2><span class="bionic">Pro</span>duction <span class="bionic">Mul</span>ti-Agent <span class="bionic">Sta</span>ck</h2>
      <p><strong>Sources:</strong> CC Mirror (@nummanali), Gas Town (@steve_yegge), Community patterns</p>

      <p>Enterprise-scale agentic development for solo operators or small teams:</p>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Component</th><th>Function</th><th>Synergy</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>CC Mirror Orchestration</strong></td><td>Central agent managing worker agents</td><td>Optimal model selection per task</td></tr>
            <tr><td><strong>Tiered Model Selection</strong></td><td>Haiku for errands, Sonnet for work, Opus for thinking</td><td>50-70% cost reduction</td></tr>
            <tr><td><strong>Git Worktrees</strong></td><td>Parallel branches, no context switching</td><td>Each agent works in isolation</td></tr>
            <tr><td><strong>Specialized Workers</strong></td><td>Agents trained for specific task types</td><td>Higher quality, less confusion</td></tr>
            <tr><td><strong>Browser Verification</strong></td><td>Playwright/MCP for UI testing</td><td>Verify changes visually</td></tr>
            <tr><td><strong>Cost Optimization</strong></td><td>Monitor, limit, cache aggressively</td><td>Sustainable at scale</td></tr>
          </tbody>
        </table>
      </div>

      <h3>What It Unlocks</h3>
      <ul>
        <li><strong>Team-scale output as a solo developer</strong></li>
        <li>Sustainable economics (not $500/day)</li>
        <li>Quality control through specialization</li>
        <li>24/7 development capacity</li>
      </ul>

      <h3>CC Mirror Architecture</h3>
      <div class="ascii-diagram">
Orchestrator (Opus/Sonnet)
+-- Research Agent (Haiku) - Gather information
+-- Implementation Agent (Sonnet) - Write code
+-- Test Agent (Sonnet) - Create tests
+-- Review Agent (Opus) - Quality check
+-- Documentation Agent (Haiku) - Update docs
      </div>

      <h3>Worker Preamble Template</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>CONTEXT: You are a WORKER agent, not an orchestrator.

RULES:
- Complete ONLY the task described below
- Use tools directly (Read, Write, Edit, Bash)
- Do NOT spawn sub-agents
- Do NOT call TaskCreate or TaskUpdate
- Report results with absolute file paths
- Ask orchestrator if blocked

TASK:
[Specific task here]</code></pre>
      </div>

      <h3>Git Worktree Setup</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Create worktrees for each agent
git worktree add ../project-agent1 -b agent1/feature-a
git worktree add ../project-agent2 -b agent2/feature-b
git worktree add ../project-agent3 -b agent3/tests

# Each Claude instance runs in its own worktree
# No merge conflicts, no context pollution</code></pre>
      </div>

      <h3>Cost Control Configuration</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "model_selection": {
    "default": "sonnet",
    "research_tasks": "haiku",
    "architecture_decisions": "opus",
    "simple_edits": "haiku"
  },
  "budget": {
    "daily_limit": 50,
    "per_session_limit": 10,
    "alert_threshold": 0.8
  }
}</code></pre>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Compounding Learning Stack -->
    <section id="compounding-learning">
      <h2><span class="bionic">Com</span>pounding <span class="bionic">Lea</span>rning <span class="bionic">Sta</span>ck</h2>
      <p><strong>Sources:</strong> @ryancarson, @ghuntley, @mattpocockuk</p>

      <p>The system that gets smarter with every run:</p>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Component</th><th>Function</th><th>Synergy</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Ralph Loops</strong></td><td>File-based state for infinite work</td><td>Context never lost</td></tr>
            <tr><td><strong>Progress.txt Archives</strong></td><td>Append-only memory of all runs</td><td>Learnings persist</td></tr>
            <tr><td><strong>Parallel Instances (3x)</strong></td><td>Multiple angles of attack</td><td>Faster exploration</td></tr>
            <tr><td><strong>Cross-Run Learning</strong></td><td>Reference previous attempts</td><td>Build on success</td></tr>
            <tr><td><strong>PRD Tracking</strong></td><td>JSON task list with passes: true/false</td><td>Clear success metrics</td></tr>
          </tbody>
        </table>
      </div>

      <h3>What It Unlocks</h3>
      <ul>
        <li><strong>Continuous improvement</strong> across sessions</li>
        <li>Claude learns your codebase over time</li>
        <li>Faster completion on similar future tasks</li>
        <li>Institutional memory without human intervention</li>
      </ul>

      <h3>File Structure for Compounding</h3>
      <div class="code-block">
        <pre><code>plans/
+-- prd.json              # Task list with completion status
+-- progress.txt          # Append-only memory log
+-- archive/
|   +-- run-001-progress.txt
|   +-- run-002-progress.txt
|   +-- learnings.md      # Distilled insights
+-- PROMPT.md             # Static instructions
+-- ralph.sh              # Loop script</code></pre>
      </div>

      <h3>prd.json Format</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
  "project": "Feature X Implementation",
  "started": "2026-01-09T10:00:00Z",
  "tasks": [
    {"id": 1, "description": "Setup database schema", "passes": true},
    {"id": 2, "description": "Implement API endpoints", "passes": true},
    {"id": 3, "description": "Add authentication", "passes": false},
    {"id": 4, "description": "Write integration tests", "passes": false}
  ],
  "dependencies": {
    "3": [1, 2],
    "4": [1, 2, 3]
  }
}</code></pre>
      </div>

      <h3>ralph.sh with Archiving</h3>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>#!/bin/bash
set -e

MAX_ITERATIONS=${1:-50}
RUN_ID=$(date +%Y%m%d_%H%M%S)

for (( i=1; i&lt;=$MAX_ITERATIONS; i++ )); do
  echo "=== Iteration $i / $MAX_ITERATIONS ===" | tee -a plans/progress.txt

  claude "Review plans/prd.json and plans/progress.txt.
    Check plans/archive/learnings.md for previous insights.
    Mark completed PRD items as passes: true.
    Append your progress to progress.txt.
    Make a git commit for completed features.
    Work on ONE task at a time.
    If PRD is complete, output PROMISE COMPLETE HERE." | tee output.txt

  if grep -q "PROMISE COMPLETE HERE" output.txt; then
    echo "=== COMPLETE at iteration $i ===" >> plans/progress.txt
    cp plans/progress.txt "plans/archive/run-$RUN_ID-progress.txt"
    break
  fi
done</code></pre>
      </div>

      <h3>Learnings Extraction Pattern</h3>
      <p>After each successful run, extract insights:</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Learnings from Run $RUN_ID

## What Worked
- [pattern that succeeded]

## What Failed Initially
- [pattern that required iteration]

## Key Insights
- [reusable insight for future runs]

## Code Patterns Discovered
- [specific patterns that work for this codebase]</code></pre>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Checkpoint: Core Triple+ Stacks -->
    <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
      <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Core Triple+ Stacks</div>
      <p><strong>You should now understand:</strong></p>
      <ul>
        <li>The 6 components of the "Unhobbled" stack and their synergies</li>
        <li>Boris Cherny's workflow: 5-10 parallel sessions with shared CLAUDE.md</li>
        <li>How the Production Multi-Agent Stack uses tiered model selection for cost control</li>
        <li>The file structure for the Compounding Learning Stack (prd.json, progress.txt, archive/)</li>
        <li>The difference between additive (1+1=2) and multiplicative (1+1=5) synergies</li>
      </ul>
      <p><strong>If unclear:</strong> Re-read the specific stack section you're unclear on. For the Unhobbled stack, focus on the implementation order. For the Creator Stack, focus on the CLAUDE.md structure for parallel sessions.</p>
    </div>

    <hr class="section-divider">

    <!-- Triple+ Combination Matrix -->
    <section id="triple-matrix">
      <h2><span class="bionic">Tri</span>ple+ <span class="bionic">Com</span>bination <span class="bionic">Mat</span>rix</h2>

      <div class="table-responsive">
        <table>
          <thead>
            <tr>
              <th>Combo Name</th>
              <th>Components</th>
              <th>Unlocks</th>
              <th>Complexity</th>
              <th>Cost</th>
              <th>Audience</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>The Unhobbled</strong></td>
              <td>LSP + Hooks + Subagents + Adversarial + Ralph + Voice</td>
              <td>10x productivity, mobile dev</td>
              <td>High</td>
              <td>High</td>
              <td>Power Users</td>
            </tr>
            <tr>
              <td><strong>Creator Stack</strong></td>
              <td>Parallel sessions + Opus + CLAUDE.md + Plan->Auto + Verification</td>
              <td>100% AI code</td>
              <td>Medium</td>
              <td>High</td>
              <td>Creators</td>
            </tr>
            <tr>
              <td><strong>Production Multi-Agent</strong></td>
              <td>CC Mirror + Tiered models + Worktrees + Specialized workers</td>
              <td>Team output solo</td>
              <td>High</td>
              <td>Medium</td>
              <td>Professionals</td>
            </tr>
            <tr>
              <td><strong>Compounding Learner</strong></td>
              <td>Ralph + Archives + Parallel + Cross-run</td>
              <td>Continuous improvement</td>
              <td>Medium</td>
              <td>Medium</td>
              <td>Long-term projects</td>
            </tr>
            <tr>
              <td><strong>Budget Maximalist</strong></td>
              <td>Haiku army + Caching + Subagent isolation + Batch API</td>
              <td>80% cost reduction</td>
              <td>Medium</td>
              <td>Low</td>
              <td>Cost-conscious</td>
            </tr>
            <tr>
              <td><strong>Mobile Async</strong></td>
              <td>Hooks + Notifications + Ralph + Cloud VM</td>
              <td>Code from anywhere</td>
              <td>Medium</td>
              <td>Medium</td>
              <td>Remote workers</td>
            </tr>
            <tr>
              <td><strong>Security First</strong></td>
              <td>Hooks (gates) + Audit logs + Sandbox + Adversarial</td>
              <td>Enterprise safety</td>
              <td>High</td>
              <td>Medium</td>
              <td>Enterprise</td>
            </tr>
            <tr>
              <td><strong>Speed Demon</strong></td>
              <td>Auto-accept + Parallel + No verification + Haiku</td>
              <td>Fastest iteration</td>
              <td>Low</td>
              <td>Low</td>
              <td>Prototyping</td>
            </tr>
            <tr>
              <td><strong>Quality Obsessed</strong></td>
              <td>Opus only + Adversarial + Tests + Verification loops</td>
              <td>Highest quality</td>
              <td>Medium</td>
              <td>Very High</td>
              <td>Production code</td>
            </tr>
            <tr>
              <td><strong>The Full Stack</strong></td>
              <td>All patterns combined</td>
              <td>Maximum capability</td>
              <td>Very High</td>
              <td>Very High</td>
              <td>True power users</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Synergy Analysis -->
    <section id="synergy-analysis">
      <h2><span class="bionic">Syn</span>ergy <span class="bionic">Ana</span>lysis: <span class="bionic">Why</span> Combinations <span class="bionic">Bea</span>t <span class="bionic">Sin</span>gles</h2>

      <h3>Additive vs Multiplicative Benefits</h3>

      <h4>Single Pattern:</h4>
      <ul>
        <li>Ralph loop alone: 2x productivity</li>
        <li>Hooks alone: 1.5x productivity</li>
        <li>Subagents alone: 2x productivity</li>
      </ul>

      <h4>Combined (Multiplicative):</h4>
      <ul>
        <li>Ralph + Hooks + Subagents: <strong>6-10x productivity</strong> (not 5.5x)</li>
      </ul>

      <h3>Why?</h3>
      <ol>
        <li><strong>Hooks remove friction</strong> that would slow Ralph loops</li>
        <li><strong>Subagents handle complexity</strong> that would break Ralph's simple loop</li>
        <li><strong>Ralph's file-based state</strong> gives subagents persistent memory</li>
        <li><strong>Each pattern enables the others</strong> to work at full capacity</li>
      </ol>

      <h3>The Feedback Loop Effect</h3>
      <div class="ascii-diagram">
More automation (hooks)
    -> Faster iteration
        -> More experiments possible
            -> Better patterns discovered
                -> Encoded into CLAUDE.md
                    -> Claude improves
                        -> More automation possible
      </div>
    </section>

    <hr class="section-divider">

    <!-- Anti-Patterns -->
    <section id="anti-patterns">
      <h2><span class="bionic">Ant</span>i-Patterns: <span class="bionic">Wha</span>t NOT to <span class="bionic">Com</span>bine</h2>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Anti-Pattern</th><th>Components</th><th>Why It Fails</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Opus Everything + No Budget</strong></td><td>Full Opus + Auto-accept + No limits</td><td>$500+/day costs</td></tr>
            <tr><td><strong>Parallel + Shared State</strong></td><td>Multiple agents + Same branch</td><td>Merge conflicts, corruption</td></tr>
            <tr><td><strong>Ralph + No Verification</strong></td><td>Infinite loops + No tests</td><td>Compounds errors</td></tr>
            <tr><td><strong>Mobile + Complex Tasks</strong></td><td>Voice-only + Architecture work</td><td>Needs visual context</td></tr>
            <tr><td><strong>Haiku + Complex Reasoning</strong></td><td>Cheapest model + Hard problems</td><td>Fails, wastes iterations</td></tr>
            <tr><td><strong>Adversarial Without Main</strong></td><td>Review agent + No implementation</td><td>All criticism, no output</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Implementation Roadmap -->
    <section id="implementation-roadmap">
      <h2><span class="bionic">Imp</span>lementation <span class="bionic">Roa</span>dmap: <span class="bionic">Bui</span>lding Up the <span class="bionic">Sta</span>ck</h2>

      <h3>Week 1: Foundation</h3>
      <ul>
        <li>Set up hooks (formatting, notifications)</li>
        <li>Configure CLAUDE.md with project context</li>
        <li>Practice plan mode -> auto-accept workflow</li>
        <li>Monitor costs and set limits</li>
      </ul>

      <h3>Week 2: Parallelization</h3>
      <ul>
        <li>Set up git worktrees</li>
        <li>Run 2-3 parallel sessions</li>
        <li>Implement shared CLAUDE.md pattern</li>
        <li>Add verification loops</li>
      </ul>

      <h3>Week 3: Automation</h3>
      <ul>
        <li>Implement Ralph loops</li>
        <li>Add progress.txt archiving</li>
        <li>Set up subagent delegation</li>
        <li>Configure tiered model selection</li>
      </ul>

      <h3>Week 4: Advanced</h3>
      <ul>
        <li>Add adversarial validation</li>
        <li>Implement CC Mirror pattern (if applicable)</li>
        <li>Set up mobile/async workflow</li>
        <li>Add voice interface (optional)</li>
      </ul>

      <h3>Week 5+: Optimization</h3>
      <ul>
        <li>Analyze costs and optimize model selection</li>
        <li>Refine CLAUDE.md based on learnings</li>
        <li>Extract patterns to slash commands</li>
        <li>Build project-specific automations</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Real-World Stack Examples -->
    <section id="real-world-examples">
      <h2><span class="bionic">Rea</span>l-World <span class="bionic">Sta</span>ck <span class="bionic">Exa</span>mples</h2>

      <h3>Example 1: Solo Founder Building SaaS</h3>
      <p><strong>Stack:</strong> Creator + Compounding + Budget Maximalist</p>
      <ul>
        <li>3 parallel sessions (features, tests, docs)</li>
        <li>Sonnet for implementation, Haiku for research</li>
        <li>Ralph loops for overnight work</li>
        <li>Archives for cross-session learning</li>
        <li><strong>Monthly cost: ~$150-300</strong></li>
      </ul>

      <h3>Example 2: Consultant Shipping Client Projects</h3>
      <p><strong>Stack:</strong> Production Multi-Agent + Quality Obsessed</p>
      <ul>
        <li>CC Mirror orchestration</li>
        <li>Opus for client-facing code</li>
        <li>Adversarial review before delivery</li>
        <li>Git worktrees per client</li>
        <li>Strict verification loops</li>
        <li><strong>Monthly cost: ~$300-500</strong></li>
      </ul>

      <h3>Example 3: Side Project Hobbyist</h3>
      <p><strong>Stack:</strong> Budget Maximalist + Mobile Async</p>
      <ul>
        <li>Haiku-heavy for exploration</li>
        <li>Notifications for async check-ins</li>
        <li>Ralph loops for background work</li>
        <li>Cloud VM for access anywhere</li>
        <li><strong>Monthly cost: ~$30-50</strong></li>
      </ul>

      <h3>Example 4: Enterprise Team Member</h3>
      <p><strong>Stack:</strong> Security First + Production Multi-Agent</p>
      <ul>
        <li>Hook-based security gates</li>
        <li>Audit logging for compliance</li>
        <li>Tiered model selection (approved by finance)</li>
        <li>Sandbox execution</li>
        <li><strong>Monthly cost: Corporate budget</strong></li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Metrics for Stack Success -->
    <section id="metrics">
      <h2><span class="bionic">Met</span>rics for <span class="bionic">Sta</span>ck <span class="bionic">Suc</span>cess</h2>

      <h3>Productivity Metrics</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Metric</th><th>Baseline</th><th>With Stack</th><th>Target</th></tr>
          </thead>
          <tbody>
            <tr><td>Features/week</td><td>2</td><td>6-10</td><td>5x</td></tr>
            <tr><td>Lines of code/day</td><td>200</td><td>1000+</td><td>5x</td></tr>
            <tr><td>Bug fix time</td><td>2 hours</td><td>20 min</td><td>6x</td></tr>
            <tr><td>PR turnaround</td><td>1 day</td><td>2 hours</td><td>12x</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Cost Efficiency Metrics</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Metric</th><th>Unoptimized</th><th>Optimized Stack</th><th>Improvement</th></tr>
          </thead>
          <tbody>
            <tr><td>Cost per feature</td><td>$50</td><td>$15</td><td>70% reduction</td></tr>
            <tr><td>Model efficiency</td><td>100% Opus</td><td>20/60/20 split</td><td>60% savings</td></tr>
            <tr><td>Wasted iterations</td><td>40%</td><td>10%</td><td>75% reduction</td></tr>
            <tr><td>Context resets</td><td>5/day</td><td>1/day</td><td>80% reduction</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Quality Metrics</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Metric</th><th>Without Stack</th><th>With Stack</th><th>Improvement</th></tr>
          </thead>
          <tbody>
            <tr><td>Test coverage</td><td>40%</td><td>80%+</td><td>2x</td></tr>
            <tr><td>Bugs in production</td><td>5/sprint</td><td>1/sprint</td><td>80% reduction</td></tr>
            <tr><td>Code review feedback</td><td>10 comments</td><td>2 comments</td><td>80% reduction</td></tr>
            <tr><td>Refactor frequency</td><td>Monthly</td><td>Rarely</td><td>90% reduction</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="bionic">Tro</span>ubleshooting</h2>

      <details class="troubleshoot">
        <summary>Parallel Sessions Stepping on Each Other</summary>
        <div>
          <p><strong>Symptom:</strong> Running 5 parallel sessions as Boris Cherny recommends, but agents are making conflicting changes to the same files.</p>
          <p><strong>Cause:</strong> Sessions share the codebase but aren't assigned to isolated branches/worktrees.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Always assign each session to its own branch:
              <div class="code-block">
                <pre><code># CLAUDE.md Session Assignment
- Session 1: Feature A (branch: feat/a)
- Session 2: Feature B (branch: feat/b)</code></pre>
              </div>
            </li>
            <li>Use git worktrees for true isolation:
              <div class="code-block">
                <pre><code>git worktree add ../session-1 -b feat/a
git worktree add ../session-2 -b feat/b
# Run each Claude session in its own worktree directory</code></pre>
              </div>
            </li>
            <li>Add file-path guards to each session's instructions:
              <div class="code-block">
                <pre><code>Session 1: ONLY modify files under src/auth/
Session 2: ONLY modify files under src/payments/</code></pre>
              </div>
            </li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Unhobbled Stack Overwhelming Beginners</summary>
        <div>
          <p><strong>Symptom:</strong> Tried to set up the full Unhobbled stack and now nothing works - hooks conflict, subagents fail, Ralph doesn't iterate.</p>
          <p><strong>Cause:</strong> Implementing all components at once without understanding each one individually.</p>
          <p><strong>Fix:</strong></p>
          <p>Follow the implementation order strictly:</p>
          <div class="code-block">
            <pre><code>Week 1: Just Hooks (formatting, notifications)
Week 2: Add subagent delegation
Week 3: Add adversarial validation
Week 4: Configure Ralph loops
Week 5: Add voice (optional)
Week 6: LSP integration</code></pre>
          </div>
          <p>If stuck, strip back to basics:</p>
          <div class="code-block">
            <pre><code># Remove all advanced configuration
rm ~/.claude/settings.json
rm -rf ~/.claude/hooks/
# Start fresh with just one component</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Compounding Learning Stack Not Compounding</summary>
        <div>
          <p><strong>Symptom:</strong> Running Ralph loops with archives, but learnings from previous runs aren't being applied to new iterations.</p>
          <p><strong>Cause:</strong> The prompt doesn't instruct Claude to check archives, or learnings.md is empty/outdated.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Verify the archive check is in your prompt:
              <div class="code-block">
                <pre><code># ralph.sh should include:
claude "Review plans/prd.json and plans/progress.txt.
  Check plans/archive/learnings.md for previous insights.
  ..."</code></pre>
              </div>
            </li>
            <li>After each run, extract learnings (human-in-loop):
              <div class="code-block">
                <pre><code>claude "Review plans/archive/run-*-progress.txt and extract 3-5 key learnings.
  Append to plans/archive/learnings.md"</code></pre>
              </div>
            </li>
            <li>Check that learnings.md has content:
              <div class="code-block">
                <pre><code>cat plans/archive/learnings.md
# Should show patterns, not be empty</code></pre>
              </div>
            </li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Cost Explosion with Production Multi-Agent</summary>
        <div>
          <p><strong>Symptom:</strong> Multi-agent setup is working but costs $200+/day, making it unsustainable.</p>
          <p><strong>Cause:</strong> Opus is being used for everything, or agents are doing unnecessary work.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Implement strict tiered model selection:
              <div class="code-block">
                <pre><code>{
  "model_selection": {
    "research_tasks": "haiku",
    "simple_edits": "haiku",
    "implementation": "sonnet",
    "architecture_decisions": "opus"
  }
}</code></pre>
              </div>
            </li>
            <li>Add task filtering - not everything needs an agent:
              <div class="code-block">
                <pre><code># Before spawning an agent, ask:
- Is this task >10 minutes for a human? -> Agent
- Is this &lt;5 lines of code? -> Direct edit, no agent</code></pre>
              </div>
            </li>
            <li>Set daily budget caps and alerts</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Adversarial Validation Blocking All Progress</summary>
        <div>
          <p><strong>Symptom:</strong> Added adversarial review agents but they keep rejecting implementations, and nothing gets merged.</p>
          <p><strong>Cause:</strong> Adversarial agent is too strict, or there's no escalation path for disagreements.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Calibrate the adversarial agent's threshold:
              <div class="code-block">
                <pre><code># In adversarial agent prompt
Reject ONLY for:
- Security vulnerabilities
- Breaking existing tests
- Clear logic errors

Do NOT reject for:
- Style preferences
- "Could be cleaner"
- Minor performance concerns</code></pre>
              </div>
            </li>
            <li>Add escalation for disagreements:
              <div class="code-block">
                <pre><code>If you reject 3 implementations in a row for the same task:
1. Summarize the core disagreement
2. Ask orchestrator to involve human
3. Do not block further iterations</code></pre>
              </div>
            </li>
            <li>Use "soft" rejection (suggestion) vs "hard" rejection (block)</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Voice Interface Misinterpreting Prompts</summary>
        <div>
          <p><strong>Symptom:</strong> Using STT/TTS for mobile development but Claude frequently misunderstands dictated instructions.</p>
          <p><strong>Cause:</strong> Speech recognition errors compound into confusing prompts, especially with technical terms.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Use code words for common technical terms:
              <div class="code-block">
                <pre><code>"open paren" -> (
"close curly" -> }
"snake case" -> _
"camel case" -> uppercase next letter</code></pre>
              </div>
            </li>
            <li>Configure Claude to confirm before executing</li>
            <li>Keep dictated prompts high-level:
              <div class="code-block">
                <pre><code># Good (voice): "Add error handling to the auth module"
# Bad (voice): "Add try catch with error dot message logging"</code></pre>
              </div>
            </li>
            <li>Use voice for direction, keyboard for precision</li>
          </ol>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Combinations Documents</h3>
      <ul>
        <li><a href="combinations-extensions.html">Extension Combinations</a> - Plugin and MCP combinations</li>
        <li><a href="combinations-matrix.html">Combination Matrix</a> - Quick reference for compatibility</li>
        <li><a href="combinations-pairwise.html">Pairwise Combinations</a> - Two-pattern synergies</li>
        <li><a href="combinations-unexplored.html">Unexplored Territory</a> - Frontier pattern ideas</li>
      </ul>
    </div>

    <!-- Sources -->
    <div style="margin-top: 2rem; padding: 1rem; background: #f9f6f0; border-radius: 8px;">
      <h3>Sources</h3>
      <ol>
        <li>@EricBuess - "Unhobbled" Claude Code philosophy</li>
        <li>Boris Cherny - Claude Code creator workflow</li>
        <li>@steve_yegge - Gas Town multi-agent patterns</li>
        <li>@nummanali - CC Mirror orchestration</li>
        <li>@ryancarson - Ralph compounding patterns</li>
        <li>@ghuntley - Original Ralph concept</li>
        <li>@mattpocockuk - Ralph popularization</li>
        <li>@dabit3 - Mobile/async workflows</li>
        <li>Community patterns from extractions</li>
      </ol>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="combinations-pairwise.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Pairwise Combinations</span>
      </a>
      <a href="combinations-unexplored.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">Unexplored Territory</span>
      </a>
    </nav>

    <!-- Tags -->
    <div style="margin-top: 2rem;">
      <span class="tag">#higher-order</span>
      <span class="tag">#combinations</span>
      <span class="tag">#stacks</span>
      <span class="tag">#synergy</span>
      <span class="tag">#unhobbled</span>
      <span class="tag">#boris-cherny</span>
      <span class="tag">#cc-mirror</span>
      <span class="tag">#ralph</span>
      <span class="tag">#compounding</span>
      <span class="tag">#multi-agent</span>
      <span class="tag">#production</span>
      <span class="tag">#cost-optimization</span>
      <span class="tag">#parallel-sessions</span>
      <span class="tag">#hooks</span>
      <span class="tag">#subagents</span>
      <span class="tag">#adversarial</span>
      <span class="tag">#voice</span>
      <span class="tag">#mobile</span>
      <span class="tag">#enterprise</span>
    </div>
  </div>

  <script src="../js/copy-code.js"></script>
  <script src="../js/search.js"></script>
  <script src="../js/global-nav.js"></script>
</body>
</html>
