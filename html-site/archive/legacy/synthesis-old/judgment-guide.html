<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Master">
  <title>Claude Code Judgment Guide - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="mastery-master.html">Master</a>
      <span>/</span>
      <span>Judgment Guide</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;">This is your <strong>decision companion</strong> when facing ambiguous choices. When you know WHAT you want to do but not WHICH approach to use, consult this guide. It provides decision trees, scenario-based recommendations, and common mistake patterns to help you choose wisely.</p>
    </div>

    <h1><span class="bionic">Cla</span>ude <span class="bionic">Cod</span>e <span class="bionic">Jud</span>gment <span class="bionic">Gui</span>de</h1>

    <p class="conversational-lead">
      <span class="bionic">Dec</span>ision support for selecting the right patterns, tools, and approaches. <strong>Philosophy:</strong> Start simple, add complexity only when simpler approaches demonstrably fail.
    </p>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#decision-trees">Quick Decision Trees</a>
          <ul>
            <li><a href="#orchestration-tree">Which Orchestration Pattern?</a></li>
            <li><a href="#memory-tree">Which Memory Pattern?</a></li>
            <li><a href="#autonomous-tree">When to Go Autonomous?</a></li>
            <li><a href="#model-tree">Which Model?</a></li>
          </ul>
        </li>
        <li><a href="#scenarios">Pattern Selection by Scenario</a></li>
        <li><a href="#mistakes">Common Mistakes and Fixes</a></li>
        <li><a href="#framework">The Judgment Framework</a></li>
        <li><a href="#break-rules">When to Break the Rules</a></li>
        <li><a href="#reference">Quick Reference</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- Quick Decision Trees -->
    <section id="decision-trees">
      <h2><span class="bionic">Qui</span>ck <span class="bionic">Dec</span>ision <span class="bionic">Tre</span>es</h2>

      <div id="orchestration-tree">
        <h3>"Which <span class="bionic">Orc</span>hestration <span class="bionic">Pat</span>tern Should I Use?"</h3>
        <div class="ascii-diagram">
Is this a simple, single task?
|
+-- Yes --> Single interactive session
|
+-- No --> Do you need to walk away (AFK)?
    |
    +-- No --> Multiple distinct domains?
    |   |
    |   +-- Yes --> CC Mirror (hub-and-spoke)
    |   |
    |   +-- No --> Single session with subagents
    |
    +-- Yes --> Can you write clear acceptance criteria?
        |
        +-- No --> Not ready for autonomous (refine requirements first)
        |
        +-- Yes --> Need parallelism across features?
            |
            +-- Yes --> Need deep specialization (10+ agents)?
            |   |
            |   +-- Yes --> Gas Town (agent factory)
            |   |
            |   +-- No --> Parallel Ralph + Git Worktrees
            |
            +-- No --> PRD-driven Ralph loop
        </div>

        <!-- Checkpoint -->
        <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
          <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Orchestration Selection</div>
          <p><strong>After using the decision tree above, you should be able to answer:</strong></p>
          <ul>
            <li>Is my task simple enough for a single session, or does it need structure?</li>
            <li>Do I need to walk away (AFK) or can I stay present?</li>
            <li>If autonomous, can I write clear acceptance criteria?</li>
            <li>If parallel, how many features and how deep the specialization?</li>
          </ul>
          <p><strong>If unclear:</strong> Start with single session. Add complexity only when it demonstrably fails.</p>
        </div>
      </div>

      <div id="memory-tree">
        <h3>"Which <span class="bionic">Mem</span>ory <span class="bionic">Pat</span>tern Should I Use?"</h3>
        <div class="ascii-diagram">
How long does this need to persist?
|
+-- Just this session --> No special setup needed
|
+-- Across sessions in one project --> CLAUDE.md
|   |
|   +-- Team knowledge? --> Git-tracked CLAUDE.md
|   +-- Personal/secrets? --> CLAUDE.local.md (gitignored)
|
+-- Within an autonomous loop --> progress.txt + prd.json + git
|
+-- Across many projects --> Claude-Mem (semantic memory)
|
+-- Across multiple life domains --> Panopticon (isolated directories)
        </div>
      </div>

      <div id="autonomous-tree">
        <h3>"When <span class="bionic">Sho</span>uld I Go <span class="bionic">Aut</span>onomous?"</h3>
        <div class="ascii-diagram">
Can you define "done" in verifiable terms?
|
+-- No --> Stay interactive (refine requirements)
|
+-- Yes --> Do you have test coverage?
    |
    +-- No --> Add tests first, then go autonomous
    |
    +-- Yes --> Can tasks fit in one context window each?
        |
        +-- No --> Split tasks smaller
        |
        +-- Yes --> Is this security-critical code?
            |
            +-- Yes --> Use HOTL Ralph (human on the loop)
            |
            +-- No --> READY FOR RALPH
                |
                +-- Setup: prd.json + ralph.sh + progress.txt
                +-- Run: ./ralph.sh 25
                +-- Go: Sleep / Do something else
        </div>
      </div>

      <div id="model-tree">
        <h3>"What <span class="bionic">Mod</span>el Should This Task Use?"</h3>
        <div class="ascii-diagram">
What type of work is this?
|
+-- Simple lookup, file search, formatting --> Haiku ($0.25/$1.25 per 1M)
|
+-- Implementation, test generation, standard coding --> Sonnet ($3/$15 per 1M)
|
+-- Architecture, complex reasoning, ambiguous decisions --> Opus ($15/$75 per 1M)
|
+-- Security review, critical system design --> Opus (worth the cost)
        </div>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Pattern Selection by Scenario -->
    <section id="scenarios">
      <h2><span class="bionic">Pat</span>tern <span class="bionic">Sel</span>ection by <span class="bionic">Sce</span>nario</h2>

      <h3>Scenario: "Ship a feature overnight"</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Factor</th><th>Recommendation</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Pattern</strong></td><td>PRD-driven Ralph</td></tr>
            <tr><td><strong>Why</strong></td><td>Fresh context each iteration, quality gates, autonomous</td></tr>
            <tr><td><strong>Setup time</strong></td><td>30-60 minutes</td></tr>
            <tr><td><strong>Success rate</strong></td><td>High (with good PRD)</td></tr>
            <tr><td><strong>Prerequisites</strong></td><td>Clear acceptance criteria, test coverage</td></tr>
            <tr><td><strong>Cost</strong></td><td>$10-30 depending on complexity</td></tr>
          </tbody>
        </table>
      </div>
      <p><strong>Quick start:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># 1. Create prd.json with 5-10 atomic stories
# 2. Each story: 2-3 sentence description, verifiable criteria
# 3. Include "npm run typecheck passes" in every story
./scripts/ralph/ralph.sh 25</code></pre>
      </div>

      <h3>Scenario: "Build a complex multi-domain feature"</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Factor</th><th>Recommendation</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Pattern</strong></td><td>CC Mirror (hub-and-spoke)</td></tr>
            <tr><td><strong>Why</strong></td><td>Parallelism, specialization, cost optimization</td></tr>
            <tr><td><strong>Setup time</strong></td><td>1-2 hours</td></tr>
            <tr><td><strong>Success rate</strong></td><td>Medium (coordination overhead)</td></tr>
            <tr><td><strong>Prerequisites</strong></td><td>Comfort with multi-agent mental model</td></tr>
            <tr><td><strong>Cost</strong></td><td>$30-80/day</td></tr>
          </tbody>
        </table>
      </div>
      <p><strong>Architecture:</strong></p>
      <div class="ascii-diagram">
         Orchestrator (YOU DO NOT WRITE CODE)
                     |
     +---------------+---------------+
     |               |               |
  Coder          Tester           Docs
  (Sonnet)       (Sonnet)         (Haiku)
      </div>

      <h3>Scenario: "Parallel features on separate branches"</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Factor</th><th>Recommendation</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Pattern</strong></td><td>Ralph + Git Worktrees</td></tr>
            <tr><td><strong>Why</strong></td><td>True file isolation, shared git history</td></tr>
            <tr><td><strong>Setup time</strong></td><td>30 minutes</td></tr>
            <tr><td><strong>Success rate</strong></td><td>High (no conflicts during work)</td></tr>
            <tr><td><strong>Prerequisites</strong></td><td>Git worktree familiarity</td></tr>
            <tr><td><strong>Cost</strong></td><td>2-3x single Ralph cost</td></tr>
          </tbody>
        </table>
      </div>
      <p><strong>Quick start:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>for feature in auth payments notifications; do
  git worktree add ../wt-$feature $feature-branch
  (cd ../wt-$feature &amp;&amp; ./ralph.sh 20) &amp;
done
wait</code></pre>
      </div>

      <h3>Scenario: "Life automation across multiple domains"</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Factor</th><th>Recommendation</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Pattern</strong></td><td>Panopticon (isolated directories)</td></tr>
            <tr><td><strong>Why</strong></td><td>Complete domain isolation, no cross-contamination</td></tr>
            <tr><td><strong>Setup time</strong></td><td>4-8 hours</td></tr>
            <tr><td><strong>Success rate</strong></td><td>High (simplicity in isolation)</td></tr>
            <tr><td><strong>Prerequisites</strong></td><td>Cron job setup, directory discipline</td></tr>
            <tr><td><strong>Cost</strong></td><td>Variable (depends on activity per domain)</td></tr>
          </tbody>
        </table>
      </div>
      <p><strong>Structure:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>~/nox        # Company work
~/metrics    # Analytics
~/trades     # Finance
~/health     # Wellness
~/writing    # Content</code></pre>
      </div>

      <h3>Scenario: "10+ agents, team-scale output solo"</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Factor</th><th>Recommendation</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Pattern</strong></td><td>Gas Town (agent factory)</td></tr>
            <tr><td><strong>Why</strong></td><td>Self-improving, persistent workers, factory production</td></tr>
            <tr><td><strong>Setup time</strong></td><td>8+ hours</td></tr>
            <tr><td><strong>Success rate</strong></td><td>Variable (requires Stage 7+ experience)</td></tr>
            <tr><td><strong>Prerequisites</strong></td><td>Go runtime, tmux, $50-200/day budget</td></tr>
            <tr><td><strong>Cost</strong></td><td>$50-200/day</td></tr>
          </tbody>
        </table>
      </div>
      <p><strong>Warning signs you're not ready:</strong></p>
      <ul>
        <li>Fewer than 100 hours with multi-agent setups</li>
        <li>Uncomfortable with emergence and chaos</li>
        <li>Need predictable, controlled outcomes</li>
        <li>Budget-constrained</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Common Mistakes and Fixes -->
    <section id="mistakes">
      <h2><span class="bionic">Com</span>mon <span class="bionic">Mis</span>takes and <span class="bionic">Fix</span>es</h2>

      <h3>Mistake: Tasks too large</h3>
      <p><strong>Symptom:</strong> Context overflows, quality degrades, agent loses track</p>
      <p><strong>Diagnosis:</strong> Task takes more than one context window</p>
      <p><strong>Fix:</strong> Apply the 2-3 sentence rule</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>BAD:  "Build the entire authentication system"
GOOD: "Add login form component with email/password fields"</code></pre>
      </div>
      <p><strong>Sweet spot sizing:</strong></p>
      <ul>
        <li>100-500 lines of code change</li>
        <li>1-3 files modified</li>
        <li>15-60 minutes equivalent human time</li>
        <li>Clear "done" definition</li>
      </ul>

      <h3>Mistake: Skipping verification</h3>
      <p><strong>Symptom:</strong> Errors compound, broken code accumulates, future iterations inherit bugs</p>
      <blockquote>
        <p>"If you don't do this, you're hamstringing future agent runs with bad code"</p>
      </blockquote>
      <p><strong>Fix:</strong> Quality gates on EVERY commit</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>"acceptanceCriteria": [
  "Implementation complete",
  "npm run typecheck passes",   // &lt;-- ALWAYS
  "npm run test passes"         // &lt;-- ALWAYS
]</code></pre>
      </div>

      <h3>Mistake: Vague acceptance criteria</h3>
      <p><strong>Symptom:</strong> Agent marks tasks complete prematurely, Claude claims done without proof</p>
      <p><strong>Bad:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>"acceptanceCriteria": ["Works correctly", "Good UX", "Handles edge cases"]</code></pre>
      </div>
      <p><strong>Good:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>"acceptanceCriteria": [
  "Login form renders at /login",
  "Email validation rejects 'notanemail'",
  "Submit button disabled when form invalid",
  "npm run typecheck passes"
]</code></pre>
      </div>

      <h3>Mistake: Context rot in long sessions</h3>
      <p><strong>Symptom:</strong> Quality drops after 60-70% context, Claude forgets earlier decisions</p>
      <p><strong>Fix:</strong> Use fresh context pattern (Ralph)</p>
      <ul>
        <li>Each iteration = new Claude instance</li>
        <li>Memory lives in external files</li>
        <li>No accumulated confusion</li>
      </ul>

      <h3>Mistake: progress.txt overwriting instead of appending</h3>
      <p><strong>Symptom:</strong> Learnings lost between iterations</p>
      <p><strong>Fix:</strong> Use the word "APPEND" explicitly</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>APPEND to progress.txt (never update or overwrite previous entries):</code></pre>
      </div>

      <h3>Mistake: Workers spawning sub-agents</h3>
      <p><strong>Symptom:</strong> Recursion chaos, runaway costs, coordination breakdown</p>
      <p><strong>Fix:</strong> Clear role separation</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>Orchestrator: Can spawn workers via Task tool
Workers: CANNOT spawn sub-agents, use tools directly</code></pre>
      </div>

      <h3>Mistake: UI verification without browser</h3>
      <p><strong>Symptom:</strong> Visual bugs, rendering issues, Claude claims complete but UI broken</p>
      <p><strong>Fix:</strong> Add Playwright verification</p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>"acceptanceCriteria": [
  "Verify at localhost:3000/login using Playwright screenshot"
]</code></pre>
      </div>

      <h3>Mistake: Jumping to complexity too fast</h3>
      <p><strong>Symptom:</strong> Setup overhead exceeds value, debugging difficulty, frustration</p>
      <p><strong>The progression to follow:</strong></p>
      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>Level 0: Single session (master this first)
Level 1: CLAUDE.md + slash commands
Level 2: Subagents + hooks
Level 3: Simple Ralph loops
Level 4: PRD-driven Ralph
Level 5: CC Mirror multi-agent
Level 6: Parallel swarms + worktrees
Level 7: Gas Town factory</code></pre>
      </div>
      <p><strong>Rule:</strong> Master each level before advancing. Don't skip.</p>

      <!-- Checkpoint -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Your Current Level</div>
        <p><strong>Honestly assess where you are:</strong></p>
        <ul>
          <li>Level 0-1: I re-explain context each session, struggle with consistency</li>
          <li>Level 2-3: I use CLAUDE.md, have tried loops, sometimes they work</li>
          <li>Level 4-5: I run PRD-driven Ralph reliably, exploring multi-agent</li>
          <li>Level 6-7: I orchestrate parallel agents, understand factory patterns</li>
        </ul>
        <p><strong>If you selected multiple levels:</strong> You're probably at the lower one. Master it first.</p>
        <p><strong>If unclear:</strong> See <a href="master-playbook.html">MASTER-PLAYBOOK.md</a> Part 2 for detailed level descriptions.</p>
      </div>
    </section>

    <hr class="section-divider">

    <!-- The Judgment Framework -->
    <section id="framework">
      <h2>The <span class="bionic">Jud</span>gment <span class="bionic">Fra</span>mework</h2>

      <h3>Step 1: Assess Complexity</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Complexity</th><th>Indicators</th><th>Typical Pattern</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Simple</strong></td><td>One task, &lt; 30 min, exploratory</td><td>Single session</td></tr>
            <tr><td><strong>Medium</strong></td><td>Multi-part, defined end state</td><td>Ralph loop</td></tr>
            <tr><td><strong>High</strong></td><td>Multi-domain, needs parallelism</td><td>CC Mirror</td></tr>
            <tr><td><strong>Very High</strong></td><td>10+ agents, team-scale</td><td>Gas Town</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Step 2: Check Constraints</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Constraint</th><th>Impact on Pattern Selection</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Budget limited</strong></td><td>Stick to Haiku/Sonnet, avoid Gas Town</td></tr>
            <tr><td><strong>Must walk away</strong></td><td>Need Ralph (autonomous) pattern</td></tr>
            <tr><td><strong>Security-critical</strong></td><td>Use HOTL (human on the loop)</td></tr>
            <tr><td><strong>No test coverage</strong></td><td>Cannot go autonomous safely</td></tr>
            <tr><td><strong>Exploratory work</strong></td><td>Stay interactive, no loops</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Step 3: Select Pattern</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Scenario</th><th>Pattern</th><th>Setup</th><th>Cost/Day</th></tr>
          </thead>
          <tbody>
            <tr><td>Quick task</td><td>Interactive</td><td>0</td><td>$5-10</td></tr>
            <tr><td>Feature overnight</td><td>PRD-Ralph</td><td>30 min</td><td>$10-30</td></tr>
            <tr><td>Multi-domain feature</td><td>CC Mirror</td><td>1-2 hr</td><td>$30-80</td></tr>
            <tr><td>Parallel features</td><td>Ralph + Worktrees</td><td>30 min</td><td>$30-90</td></tr>
            <tr><td>Life automation</td><td>Panopticon</td><td>4-8 hr</td><td>Variable</td></tr>
            <tr><td>Team-scale solo</td><td>Gas Town</td><td>8+ hr</td><td>$50-200</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Step 4: Configure Appropriately</h3>
      <p><strong>For Ralph loops:</strong></p>
      <ul>
        <li>Max iterations: 25 (default reasonable)</li>
        <li>Task size: 2-3 sentence rule</li>
        <li>Always include typecheck in criteria</li>
        <li>Use <code>--dangerously-skip-permissions</code> for unattended</li>
      </ul>
      <p><strong>For multi-agent:</strong></p>
      <ul>
        <li>Clear role boundaries</li>
        <li>Model selection per role (Haiku for lookups, Sonnet for code, Opus for architecture)</li>
        <li>File ownership rules if parallel</li>
      </ul>
      <p><strong>For memory:</strong></p>
      <ul>
        <li>CLAUDE.md for project standards</li>
        <li>progress.txt for session learning (append-only)</li>
        <li>prd.json for task state</li>
        <li>Git for everything else</li>
      </ul>

      <h3>Step 5: Monitor and Adapt</h3>
      <p><strong>Watch for:</strong></p>
      <ul>
        <li>Stuck loops (same commit for 3+ iterations)</li>
        <li>Context warnings (approaching limits)</li>
        <li>Quality degradation (tests failing after passing)</li>
        <li>Cost spikes (unexpected token usage)</li>
      </ul>
      <p><strong>Adapt when:</strong></p>
      <ul>
        <li>Tasks consistently too large: Split further</li>
        <li>Loop always hitting max: Increase max or improve PRD</li>
        <li>Quality dropping: Add verification steps</li>
        <li>Cost too high: Switch to cheaper models for simple tasks</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- When to Break the Rules -->
    <section id="break-rules">
      <h2>When to <span class="bionic">Bre</span>ak the <span class="bionic">Rul</span>es</h2>

      <h3>Exploration Mode</h3>
      <p><strong>Rules to break:</strong> Structured PRD, defined completion, verification gates</p>
      <p><strong>Why:</strong> Discovery needs freedom. You don't know what "done" looks like yet.</p>
      <p><strong>Instead:</strong> Interactive session, let Claude explore, document findings as you go.</p>

      <h3>Prototyping</h3>
      <p><strong>Rules to break:</strong> Test coverage, quality gates, careful task sizing</p>
      <p><strong>Why:</strong> Speed over correctness. Throw it away anyway.</p>
      <p><strong>Instead:</strong> Single session, rapid iteration, accept technical debt.</p>

      <h3>Learning</h3>
      <p><strong>Rules to break:</strong> Autonomous execution, efficiency optimization</p>
      <p><strong>Why:</strong> The goal is understanding, not output.</p>
      <p><strong>Instead:</strong> HOTL (human on the loop), review every step, ask "why" frequently.</p>

      <h3>Debugging Complex Issues</h3>
      <p><strong>Rules to break:</strong> Fresh context per iteration, atomic tasks</p>
      <p><strong>Why:</strong> Context continuity helps trace causation.</p>
      <p><strong>Instead:</strong> Long interactive session, follow the thread, let context accumulate (just know quality will degrade).</p>
    </section>

    <hr class="section-divider">

    <!-- Quick Reference -->
    <section id="reference">
      <h2><span class="bionic">Qui</span>ck <span class="bionic">Ref</span>erence</h2>

      <h3>Pattern Costs</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Pattern</th><th>Setup</th><th>Daily Cost</th><th>Break-even</th></tr>
          </thead>
          <tbody>
            <tr><td>Single session</td><td>0</td><td>$5-20</td><td>Immediate</td></tr>
            <tr><td>CLAUDE.md + commands</td><td>30 min</td><td>$5-20</td><td>1 week</td></tr>
            <tr><td>Ralph loops</td><td>1-2 hr</td><td>$10-50</td><td>1 week</td></tr>
            <tr><td>CC Mirror</td><td>2-4 hr</td><td>$30-80</td><td>2 weeks</td></tr>
            <tr><td>Parallel Ralph</td><td>2-4 hr</td><td>$50-100</td><td>2 weeks</td></tr>
            <tr><td>Panopticon</td><td>8+ hr</td><td>Variable</td><td>1 month</td></tr>
            <tr><td>Gas Town</td><td>1+ day</td><td>$50-200</td><td>2+ months</td></tr>
          </tbody>
        </table>
      </div>

      <h3>The Complexity Ladder</h3>
      <div class="ascii-diagram">
Level 7: Gas Town Factory           [$800+/mo]   &lt;- Team-scale solo
         |
Level 6: Parallel Swarms            [$400-800]   &lt;- Massive parallelization
         |
Level 5: CC Mirror                  [$200-400]   &lt;- Coordinated multi-agent
         |
Level 4: PRD-driven Ralph           [$100-200]   &lt;- Structured autonomous
         |
Level 3: Simple Ralph loops         [$50-100]    &lt;- Basic autonomous
         |
Level 2: Subagents + hooks          [$50-100]    &lt;- Task delegation
         |
Level 1: CLAUDE.md + commands       [$20-50]     &lt;- Consistent behavior
         |
Level 0: Single session             [$20-50]     &lt;- Basic assistance
      </div>
      <p><strong>Mastery time per level:</strong> 1-4 weeks</p>
      <p><strong>Rule:</strong> Don't skip levels. Master each before advancing.</p>

      <h3>Before Going Autonomous Checklist</h3>
      <ul>
        <li>Tasks are atomic (2-3 sentence rule)</li>
        <li>Dependencies ordered by priority</li>
        <li>Acceptance criteria are verifiable (not subjective)</li>
        <li>Tests exist or will be created</li>
        <li>Typecheck included in every story</li>
        <li>Git branch created</li>
        <li>progress.txt initialized</li>
        <li>Max iterations set</li>
        <li>Verification commands work (<code>npm test</code>, etc.)</li>
        <li>Budget for expected iterations calculated</li>
      </ul>
      <p><strong>If any item is missing:</strong> Stay interactive until ready.</p>
    </section>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="bionic">Tro</span>ubleshooting <span class="bionic">Jud</span>gment <span class="bionic">Dec</span>isions</h2>

      <details class="troubleshoot">
        <summary>Chose Wrong Pattern, Now Stuck</summary>
        <div>
          <p><strong>Symptom:</strong> Started with complex pattern (CC Mirror, Gas Town), now drowning in coordination overhead.</p>
          <p><strong>Diagnosis:</strong> You jumped to complexity before mastering simpler approaches.</p>
          <p><strong>Fix:</strong></p>
          <ol>
            <li>Pause the complex setup</li>
            <li>Fall back to PRD-driven Ralph for the current feature</li>
            <li>Complete the feature with simpler approach</li>
            <li>Revisit multi-agent AFTER you've shipped with Ralph 5+ times</li>
          </ol>
          <p><strong>Terminal example - falling back:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Stop the multi-agent chaos
pkill -f "claude"

# Go simple - PRD-driven Ralph
cd ~/project
./scripts/ralph/ralph.sh 25

# Ship the feature, THEN evaluate if you need complexity</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Pattern Works Sometimes, Fails Others</summary>
        <div>
          <p><strong>Symptom:</strong> Same setup succeeds 60% of the time, fails mysteriously other times.</p>
          <p><strong>Diagnosis:</strong> Usually task sizing or acceptance criteria issues.</p>
          <p><strong>Checklist:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code>[ ] Tasks fit in one context window? (check token counts)
[ ] Acceptance criteria are VERIFIABLE? (not "works well")
[ ] Dependencies ordered correctly? (no circular refs)
[ ] Typecheck included in EVERY story? (catches silent breakage)</code></pre>
          </div>
          <p><strong>Fix:</strong> Pick a failing run, examine prd.json and progress.txt, find the vague criterion.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Can't Decide Between Patterns</summary>
        <div>
          <p><strong>Symptom:</strong> Analysis paralysis - Ralph vs CC Mirror vs something else?</p>
          <p><strong>The Universal Escape Hatch:</strong></p>
          <p>When in doubt: <strong>Single interactive session.</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Just start talking to Claude
claude

# Describe what you want to build
# Let Claude help you decompose
# THEN decide if you need automation</code></pre>
          </div>
          <p>Interactive is always available. Complexity is a choice you can make later.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Budget Exploding</summary>
        <div>
          <p><strong>Symptom:</strong> Costs way higher than expected for the output achieved.</p>
          <p><strong>Diagnosis matrix:</strong></p>
          <div class="table-responsive">
            <table>
              <thead>
                <tr><th>If you're using...</th><th>Check...</th></tr>
              </thead>
              <tbody>
                <tr><td>Opus for everything</td><td>Switch to Sonnet for implementation</td></tr>
                <tr><td>Long sessions</td><td>Switch to fresh context (Ralph)</td></tr>
                <tr><td>Multi-agent</td><td>Check for infinite loops</td></tr>
                <tr><td>Gas Town</td><td>You signed up for $50-200/day</td></tr>
              </tbody>
            </table>
          </div>
          <p><strong>Quick fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Add to ralph.sh
MAX_COST=50  # dollars
CURRENT_COST=$(cat ~/.claude/costs.log | tail -1)
if [ "$CURRENT_COST" -gt "$MAX_COST" ]; then
    echo "Budget exceeded!"
    exit 1
fi</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Quality Lower Than Interactive</summary>
        <div>
          <p><strong>Symptom:</strong> Autonomous output is worse than when you work interactively.</p>
          <p><strong>Diagnosis:</strong> Usually one of:</p>
          <ol>
            <li>Tasks too vague (Claude guesses wrong)</li>
            <li>No verification (errors compound)</li>
            <li>Context pollution (long sessions)</li>
          </ol>
          <p><strong>Fix:</strong> Add these to every prd.json story:</p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code>{
  "acceptanceCriteria": [
    "npm run typecheck passes",  // &lt;-- ALWAYS
    "npm run test passes",       // &lt;-- ALWAYS
    "Specific verifiable condition"
  ]
}</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Bottom Line -->
    <section>
      <h2>The <span class="bionic">Bot</span>tom <span class="bionic">Lin</span>e</h2>

      <blockquote>
        <p><strong>The best pattern is the simplest one that meets your needs.</strong></p>
      </blockquote>

      <p>Complexity has costs:</p>
      <ul>
        <li>Setup time</li>
        <li>Debugging difficulty</li>
        <li>Cognitive overhead</li>
        <li>Actual dollars</li>
      </ul>

      <p>Start simple. Add complexity only when the simpler approach demonstrably fails.</p>

      <blockquote>
        <p>"Given excellent upfront specification, we can already achieve meaningful unattended software production in 2026."</p>
      </blockquote>

      <p>The capability is real. The judgment is knowing when and how to deploy it.</p>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Documents</h3>
      <ul>
        <li><a href="master-playbook.html">Master Playbook</a> - Complete guide to orchestration</li>
        <li><a href="staff-engineer-mental-model.html">Staff Engineer Mental Model</a> - Frontier thinking</li>
        <li><a href="architecture-complexity-ladder.html">Complexity Ladder</a> - Visual level progression</li>
        <li><a href="principles-core.html">Core Principles</a> - The 8 principles in depth</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="master-playbook.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Master Playbook</span>
      </a>
      <a href="staff-engineer-mental-model.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">Staff Engineer Mental Model</span>
      </a>
    </nav>

    <!-- Tags -->
    <div style="margin-top: 2rem;">
      <span class="tag">#judgment-guide</span>
      <span class="tag">#decision-trees</span>
      <span class="tag">#pattern-selection</span>
      <span class="tag">#complexity-ladder</span>
      <span class="tag">#anti-patterns</span>
      <span class="tag">#troubleshooting</span>
    </div>
  </div>

  <script src="../js/copy-code.js"></script>
  <script src="../js/search.js"></script>
<script src="../js/global-nav.js"></script>
</body>
</html>
