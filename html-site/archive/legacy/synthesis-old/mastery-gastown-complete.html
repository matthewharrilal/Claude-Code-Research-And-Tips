<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Mastery">
  <title>Gas Town Complete Mastery Guide - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <span>Mastery</span>
      <span>/</span>
      <span>Gas Town Complete</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0;"><strong>Gas Town</strong> is Steve Yegge's <strong>factory-scale multi-agent orchestration</strong> system - Level 7 on the Complexity Ladder. This is for developers managing 10+ Claude instances who want team-scale output. 8 specialized roles, Beads data plane, $50-200/day costs. If you have any doubt whatsoever, you can't use it.</p>
    </div>

    <h1><span style="font-weight: 700;">Gas</span> Town: Complete Factory-Scale Orchestration Guide</h1>

    <p class="conversational-lead">
      Gas Town transforms you from <span style="font-weight: 700;">programmer to Product Manager</span>. You file features, agents build them. This is the definitive reference for factory-scale AI development.
    </p>

    <!-- Warning Box -->
    <div class="callout callout-warning" style="margin-bottom: 2rem;">
      <div class="callout-title">Warning from the Creator</div>
      <blockquote style="margin: 0; padding: 0; border: none;">
        "If you're not at Stage 7, you'll <strong>get your face ripped off</strong> by superintelligent chimpanzees."
        <cite style="display: block; margin-top: 0.5rem; font-size: 0.9em;">-- Steve Yegge</cite>
      </blockquote>
    </div>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#complexity-position">Position on Complexity Ladder</a> - Level 7 requirements</li>
        <li><a href="#core-philosophy">Core Philosophy</a> - Colony over ant, idea compiler</li>
        <li><a href="#8-roles">The 8-Role Hierarchy</a> - Overseer to Crew</li>
        <li><a href="#beads">Beads Data Plane</a> - Git-backed agent memory</li>
        <li><a href="#merge-wall">The Merge Wall Problem</a> - Refinery solution</li>
        <li><a href="#cost-model">Token Economics</a> - $50-200/day budgeting</li>
        <li><a href="#installation">Installation Guide</a> - Prerequisites to first task</li>
        <li><a href="#checkpoints">Checkpoints</a> - Verify your setup</li>
        <li><a href="#troubleshooting">Troubleshooting</a> - Common issues and recovery</li>
        <li><a href="#quick-reference">Quick Reference</a> - Commands at a glance</li>
      </ul>
    </div>

    <hr class="section-divider divider-context">

    <!-- Position Section -->
    <section id="complexity-position">
      <h2><span style="font-weight: 700;">Pos</span>ition on Complexity Ladder</h2>

      <div class="ascii-diagram">
Level 7: Gas Town Factory          &lt;== YOU ARE HERE
         |
         | Factory-scale agent orchestration
         | 20-30 agents, human as Product Manager
         | 8 specialized roles working continuously
         |
Level 6: Parallel Swarms + Worktrees
         |
Level 5: Multi-Agent Orchestration (CC Mirror)
         |
Level 4: PRD-Driven Loops (Full Ralph)
         |
Level 3: Simple Loops (Basic Ralph)
         |
Level 2: Subagents + Hooks
         |
Level 1: CLAUDE.md + Slash Commands
         |
Level 0: Single Interactive Session
      </div>

      <h3>Prerequisites Before Gas Town</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Requirement</th><th>Description</th><th>Why It Matters</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>Stage 7+ Experience</strong></td><td>100+ hours managing 10+ Claude instances</td><td>Gas Town assumes you can juggle complexity</td></tr>
          <tr><td><strong>tmux Proficiency</strong></td><td>Gas Town is tmux-native; no GUI alternative</td><td>Core interface is terminal-based</td></tr>
          <tr><td><strong>Go Runtime</strong></td><td>Go 1.23+ required</td><td>Gas Town and Beads are written in Go</td></tr>
          <tr><td><strong>High Chaos Tolerance</strong></td><td>Accept some bugs, focus on throughput</td><td>Early-stage software with rough edges</td></tr>
          <tr><td><strong>Budget</strong></td><td>$50-200/day for API costs</td><td>Multiple Claude accounts needed</td></tr>
          <tr><td><strong>Git 2.25+</strong></td><td>Required for worktree support</td><td>Agents need isolated workspaces</td></tr>
        </tbody>
      </table>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Core Philosophy Section -->
    <section id="core-philosophy">
      <h2><span style="font-weight: 700;">Cor</span>e Philosophy: Colony Over Ant</h2>

      <blockquote style="border-left: 3px solid #2a7d7d; padding-left: 1rem; margin: 1.5rem 0; font-style: italic; color: #5c4b3a;">
        "Claude Code is the world's biggest fuckin' ant. Everyone is focused on making their ant run longer... when nature prefers colonies."
        <cite style="display: block; margin-top: 0.5rem; font-size: 0.9em;">-- Steve Yegge</cite>
      </blockquote>

      <div class="ascii-diagram">
TRADITIONAL APPROACH                    GAS TOWN APPROACH
==================                    ==================

     One Big Ant                              Ant Colony
         |                                        |
    Make it                                  Build the
    run longer                               factory
         |                                        |
    Context window                           Multiple workers
    limits everything                        share the load
         |                                        |
    You are the                              You are the
    programmer                               Product Manager
         |                                        |
    Sequential                               Parallel
    execution                                execution
      </div>

      <h3>The "Idea Compiler" Concept</h3>
      <blockquote style="border-left: 3px solid #2a7d7d; padding-left: 1rem; margin: 1.5rem 0; font-style: italic; color: #5c4b3a;">
        "Gas Town is an Idea Compiler. You just make up features, design them, file the implementation plans, and sling work around to your polecats and crew."
        <cite style="display: block; margin-top: 0.5rem; font-size: 0.9em;">-- Steve Yegge</cite>
      </blockquote>

      <p><strong>Input:</strong> Your ideas and feature requests<br>
      <strong>Output:</strong> Working code, shipped products</p>

      <p>You're not writing code anymore. <strong>You're managing a factory.</strong></p>

      <h3>The Three Pillars of Gas Town</h3>
      <ol>
        <li><strong>Agent Specialization</strong> - 8 distinct roles with clear responsibilities</li>
        <li><strong>Persistent Memory (Beads)</strong> - Git-backed data plane, agents share context</li>
        <li><strong>Work Distribution (GUPP)</strong> - Work "slung" to hooks, agents check on startup</li>
      </ol>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- 8 Roles Section -->
    <section id="8-roles">
      <h2><span style="font-weight: 700;">The</span> 8-Role Hierarchy Deep Dive</h2>

      <div class="ascii-diagram">
HUMAN LEVEL
+----------------------------------------------------------+
|                     OVERSEER (YOU)                        |
|       Product Manager - Decision Maker - Ultimate Authority|
+----------------------------+-----------------------------+
                             |
TOWN LEVEL (Global - One instance each)
+----------------+  +----------------+  +----------------+
|     MAYOR      |  |     DEACON     |  |      DOGS      |
|   Opus 4.5     |  |     Sonnet     |  |     Sonnet     |
|   Coordination |  |    Monitoring  |  |  Quality Gates |
+-------+--------+  +-------+--------+  +-------+--------+
        |                   |                   |
        +---------+---------+---------+---------+
                  |
RIG LEVEL (Per-Project - Multiple instances)
+----------------+  +----------------+  +----------------+
|    REFINERY    |  |    WITNESS     |  |    POLECAT     |
|   Opus 4.5     |  |     Haiku      |  |     Sonnet     |
|  Merge Queue   |  |   Supervisor   |  |  Named Workers |
+----------------+  +----------------+  +-------+--------+
                                                |
PERSONAL LEVEL
+----------------------------------------------------------+
|                         CREW                              |
|        Long-lived personal agents - Direct to Overseer    |
+----------------------------------------------------------+
      </div>

      <h3>Role Details Matrix</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Role</th><th>Level</th><th>Model</th><th>Function</th><th>Cost/Hour</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>Overseer</strong></td><td>Human</td><td>N/A</td><td>Product Manager, decision maker</td><td>$0</td></tr>
          <tr><td><strong>Mayor</strong></td><td>Town</td><td>Opus 4.5</td><td>Chief coordinator, concierge</td><td>$15-20</td></tr>
          <tr><td><strong>Deacon</strong></td><td>Town</td><td>Sonnet</td><td>Heartbeat, plugin runner, recycling</td><td>$5-8</td></tr>
          <tr><td><strong>Dogs</strong></td><td>Town</td><td>Sonnet</td><td>Quality gates, maintenance</td><td>$5-8</td></tr>
          <tr><td><strong>Refinery</strong></td><td>Rig</td><td>Opus 4.5</td><td>Merge queue, task decomposition</td><td>$15-20</td></tr>
          <tr><td><strong>Witness</strong></td><td>Rig</td><td>Haiku</td><td>Supervise polecats, unstick agents</td><td>$1-3</td></tr>
          <tr><td><strong>Polecat</strong></td><td>Rig</td><td>Sonnet</td><td>Named workers, implementation</td><td>$5-10 each</td></tr>
          <tr><td><strong>Crew</strong></td><td>Personal</td><td>Sonnet/Opus</td><td>Long-lived personal agents</td><td>$5-10 each</td></tr>
        </tbody>
      </table>

      <h3>Key Role Details</h3>

      <details class="troubleshoot" style="border: 1px solid #2a7d7d; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #f0ebe3; padding: 1rem; cursor: pointer; color: #2a7d7d; font-weight: 600;">Mayor - Your Chief of Staff</summary>
        <div style="padding: 1rem;">
          <p><strong>Function:</strong> Your concierge and chief-of-staff. Primary AI interface.</p>
          <p><strong>Commands:</strong></p>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code>gt mayor attach    # Interactive session (recommended)
gt mayor up        # Start mayor
gt mayor status    # Check state
gt mayor down      # Stop mayor</code></pre>
          </div>
          <p><strong>Key Insight:</strong> You technically only need the Mayor. Running with just the Mayor is a good tutorial/intro to Gas Town.</p>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #2a7d7d; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #f0ebe3; padding: 1rem; cursor: pointer; color: #2a7d7d; font-weight: 600;">Refinery - The Merge Queue Manager</summary>
        <div style="padding: 1rem;">
          <p><strong>Function:</strong> Intelligent merge queue manager - the gatekeeper of code integration.</p>
          <p><strong>Responsibilities:</strong></p>
          <ul>
            <li>Merge polecat changes sequentially to main</li>
            <li>Prevent merge conflicts via rebasing</li>
            <li>Resolve conflicts automatically where possible</li>
            <li>Escalate unresolvable conflicts</li>
          </ul>
          <p><strong>Commands:</strong></p>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code>gt refinery up &lt;rig&gt;      # Start for rig
gt refinery status &lt;rig&gt;  # Check status
gt refinery process &lt;rig&gt; # Force process queue
gt refinery resolve &lt;rig&gt; # Manual resolution</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #2a7d7d; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #f0ebe3; padding: 1rem; cursor: pointer; color: #2a7d7d; font-weight: 600;">Polecat - Named Implementation Workers</summary>
        <div style="padding: 1rem;">
          <p><strong>Function:</strong> Ephemeral workers generating pull requests - your implementation army.</p>
          <p><strong>Commands:</strong></p>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code>gt polecat up &lt;rig&gt; alice    # Start named polecat
gt polecat list &lt;rig&gt;        # List all polecats
gt polecat assign alice &lt;task&gt; # Assign task
gt sling &lt;issue&gt; &lt;rig&gt;       # Spawn via sling (preferred)</code></pre>
          </div>
          <p><strong>Naming Convention:</strong> Use human names (alice, bob, carol) for mental model clarity.</p>
          <p><strong>Scaling:</strong> 3-30 polecats per rig depending on task complexity and budget.</p>
        </div>
      </details>

      <div class="callout callout-warning">
        <div class="callout-title">Deacon Warning (v0.3.x)</div>
        <blockquote style="margin: 0; padding: 0; border: none;">
          "Apologies to everyone using Gas Town who is being bitten by the murderous rampaging Deacon who is spree-killing all the other workers while on his patrol."
          <cite style="display: block; margin-top: 0.5rem; font-size: 0.9em;">-- Steve Yegge</cite>
        </blockquote>
        <p style="margin-bottom: 0;"><strong>Run without Deacon until v0.4.0+ for stability.</strong></p>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Beads Section -->
    <section id="beads">
      <h2><span style="font-weight: 700;">Bea</span>ds Data Plane Architecture</h2>

      <blockquote style="border-left: 3px solid #2a7d7d; padding-left: 1rem; margin: 1.5rem 0; font-style: italic; color: #5c4b3a;">
        "Agents suffer from '50 First Dates' syndrome - they wake up with no memory of yesterday."
        <cite style="display: block; margin-top: 0.5rem; font-size: 0.9em;">-- Steve Yegge</cite>
      </blockquote>

      <p><strong>Beads (<code>bd</code>)</strong> is a distributed, git-backed issue tracker designed specifically for AI agents. ~225K lines of Go, 11K+ GitHub stars.</p>

      <h3>Dual-Persistence Model</h3>
      <div class="ascii-diagram">
                              +------------------+
                              |     bd CLI       |
                              |   (User/Agent)   |
                              +--------+---------+
                                       |
               +-----------------------+-----------------------+
               |                                               |
               v                                               v
   +-------------------------+                   +-------------------------+
   |      SQLite DB          |&lt;------sync------&gt;|     JSONL Files         |
   |    (Performance)        |                   |    (Git Truth)          |
   |                         |                   |                         |
   |  - Sub-ms queries       |                   |  - Readable diffs       |
   |  - Complex joins        |                   |  - Merge-friendly       |
   |  - Dependency graphs    |                   |  - Version history      |
   |  .beads/beads.db        |                   |  .beads/issues.jsonl    |
   |  (gitignored)           |                   |  (git-tracked)          |
   +-------------------------+                   +-------------------------+
      </div>

      <h3>Key Beads Commands</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Ready work (no blockers)
bd ready                        # List tasks with zero blockers (actionable NOW)

# Issue management
bd create "Title"               # Create new task
bd show &lt;id&gt;                    # Full task state and history
bd update &lt;id&gt; --status in_progress  # Update status
bd close &lt;id&gt; --reason "Done"   # Close issue

# Dependencies
bd dep add X Y                  # X is blocked by Y
bd dep tree &lt;id&gt;                # Show dependency tree

# Sync
bd sync                         # Pull -&gt; merge -&gt; export -&gt; commit -&gt; push</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-warning">

    <!-- Merge Wall Section -->
    <section id="merge-wall">
      <h2><span style="font-weight: 700;">The</span> Merge Wall Problem</h2>

      <blockquote style="border-left: 3px solid #c97065; padding-left: 1rem; margin: 1.5rem 0; font-style: italic; color: #5c4b3a;">
        "Yegge ran up to a dozen agents working on the same project. 'It worked amazingly up to about 200k LOC, and now they've begun savagely overwriting each other's work rather than try to deal with merge conflicts.'"
        <cite style="display: block; margin-top: 0.5rem; font-size: 0.9em;">-- Steve Yegge</cite>
      </blockquote>

      <h3>Gas Town's Four Solutions</h3>
      <ol>
        <li><strong>The Refinery: Sequential Merge Queue</strong>
          <div class="ascii-diagram">
Alice completes --&gt; Refinery queues --&gt; Rebases --&gt; Merges to main
                           |
Bob completes --&gt; Refinery queues --&gt; Rebases (with Alice's) --&gt; Merges
                           |
Carol completes --&gt; Refinery queues --&gt; Rebases (with Alice + Bob) --&gt; Merges
          </div>
        </li>
        <li><strong>Hooks as Isolation: Git Worktrees</strong> - Each polecat works in its own worktree</li>
        <li><strong>Convoys: Grouped Work Units</strong> - Bundle related work that completes together</li>
        <li><strong>Advisory Reservations via Agent Mail</strong> - Coordination, not locks</li>
      </ol>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Cost Model Section -->
    <section id="cost-model">
      <h2><span style="font-weight: 700;">Tok</span>en Economics and Cost Modeling</h2>

      <h3>Daily Cost Example (8 hours, moderate usage)</h3>
      <div class="ascii-diagram">
Scenario: 1 rig, 5 polecats, 2 crew members

Mayor (Opus):         $18/hr x 8  = $144
Refinery (Opus):      $18/hr x 8  = $144
Dogs (Sonnet):        $7/hr x 8   = $56
Deacon (Sonnet):      $7/hr x 8   = $56
Witness (Haiku):      $2/hr x 8   = $16
Polecats x 5:         $7/hr x 5 x 8 = $280
Crew x 2:             $7/hr x 2 x 8 = $112
                      --------------------
                      Total: ~$808/day
      </div>

      <h3>Cost Tiers</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Usage Level</th><th>Daily Cost</th><th>Monthly Cost</th><th>Configuration</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>Minimal</strong></td><td>$50-100</td><td>$1,500-3,000</td><td>Mayor + 3 polecats</td></tr>
          <tr><td><strong>Moderate</strong></td><td>$100-200</td><td>$3,000-6,000</td><td>Full stack + 5 polecats</td></tr>
          <tr><td><strong>Heavy</strong></td><td>$200-400</td><td>$6,000-12,000</td><td>Full stack + 10 polecats</td></tr>
          <tr><td><strong>Factory-Scale</strong></td><td>$400-1,000</td><td>$12,000-30,000</td><td>Multiple rigs + 20+ polecats</td></tr>
        </tbody>
      </table>

      <blockquote style="border-left: 3px solid #c49052; padding-left: 1rem; margin: 1.5rem 0; font-style: italic; color: #5c4b3a;">
        "If you care about costs, don't use this."
        <cite style="display: block; margin-top: 0.5rem; font-size: 0.9em;">-- Steve Yegge</cite>
      </blockquote>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Installation Section -->
    <section id="installation">
      <h2><span style="font-weight: 700;">Ins</span>tallation Guide</h2>

      <h3>Phase 1: Prerequisites</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Check Go version
go version       # Expected: go1.23.x or higher

# Check tmux
tmux -V          # Expected: tmux 3.x

# Check git
git --version    # Expected: git 2.25+

# Verify Claude Code CLI
claude --version</code></pre>
      </div>

      <h3>Phase 2: Installation</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Install Gas Town
go install github.com/steveyegge/gastown/cmd/gt@latest

# Verify installation
gt version

# Install Beads
go install github.com/steveyegge/beads/cmd/bd@latest

# Verify
bd version

# Initialize workspace
gt install ~/gt --git</code></pre>
      </div>

      <h3>Phase 3: Add First Rig</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Navigate to town
cd ~/gt

# Add a project rig
gt rig add myproject /path/to/your/repo

# Verify
gt rig list</code></pre>
      </div>

      <h3>Phase 4: Start Core Roles</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Terminal 1: Mayor (interactive - your primary interface)
gt mayor attach

# Terminal 2: Infrastructure
gt dogs up

# Terminal 3: Rig-level roles
gt witness up myproject
gt refinery up myproject

# Terminal 4-6: Named workers
gt polecat up myproject alice
gt polecat up myproject bob
gt polecat up myproject carol</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-checkpoint">

    <!-- Checkpoints Section -->
    <section id="checkpoints">
      <h2><span style="font-weight: 700;">Che</span>ckpoints</h2>

      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint 1: Installation Complete</div>
        <p><strong>Verify:</strong></p>
        <div class="code-block" style="background: #fefcf3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <pre style="margin: 0;"><code>gt version   # Should show Gas Town v0.x.x
bd version   # Should show Beads v0.x.x</code></pre>
        </div>
        <p><strong>If missing:</strong> Is Go installed? Is <code>$GOPATH/bin</code> in your PATH?</p>
      </div>

      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint 2: Core Roles Running</div>
        <p><strong>Verify:</strong></p>
        <div class="code-block" style="background: #fefcf3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <pre style="margin: 0;"><code>gt status</code></pre>
        </div>
        <p><strong>You should see:</strong></p>
        <div class="ascii-diagram">
TOWN STATUS:
Mayor:     running (pid: 12345)
Dogs:      running (pid: 12346)

RIG: myproject
Witness:   running (pid: 12347)
Refinery:  running (pid: 12348)
Polecats:  3 active (alice, bob, carol)
        </div>
      </div>

      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint 3: First Work Completed</div>
        <p><strong>Verify:</strong></p>
        <div class="code-block" style="background: #fefcf3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <pre style="margin: 0;"><code>git log --oneline -5
bd list --status closed</code></pre>
        </div>
        <p><strong>Signs of healthy operation:</strong></p>
        <ul>
          <li>At least one issue marked closed in Beads</li>
          <li>Git commit from polecat in history</li>
          <li>No stuck or failed roles in <code>gt status</code></li>
          <li>Inbox has reasonable pending items (not 100+)</li>
        </ul>
      </div>

      <!-- Milestone -->
      <div class="milestone" style="background: linear-gradient(90deg, #6b9b7a 0%, #2a7d7d 100%); color: white; padding: 1rem 1.5rem; border-radius: 8px; text-align: center; margin: 2rem 0;">
        You're now running a factory. Human as Product Manager, agents as engineering team.
      </div>
    </section>

    <hr class="section-divider divider-warning">

    <!-- Troubleshooting Section -->
    <section id="troubleshooting">
      <h2><span style="font-weight: 700;">Tro</span>ubleshooting</h2>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Mayor won't start</summary>
        <div style="padding: 1rem;">
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Check Claude Code CLI is authenticated: <code>claude --version</code></li>
            <li>Check API key is set: <code>echo $ANTHROPIC_API_KEY</code></li>
            <li>Check existing mayor process: <code>ps aux | grep gt.*mayor</code></li>
            <li>Kill stale process: <code>pkill -f "gt.*mayor"</code></li>
            <li>Restart: <code>gt mayor attach</code></li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Polecat stuck in loop</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptoms:</strong> Polecat repeating same task, no commits, high resource usage</p>
          <p><strong>Solutions:</strong></p>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code># Check polecat status
gt polecat status myproject alice

# Kill and restart polecat
gt polecat down myproject alice
gt polecat up myproject alice

# Reassign the issue
gt sling &lt;issue-id&gt; myproject --polecat bob</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Refinery queue blocked</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptoms:</strong> <code>QUEUE: BLOCKED - Merge conflict unresolvable</code></p>
          <p><strong>Solutions:</strong></p>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code># Check what's blocking
gt refinery status myproject --verbose

# Option 1: Skip problematic PR
gt refinery skip myproject &lt;pr-id&gt;

# Option 2: Manual resolution
gt refinery resolve myproject

# Option 3: Nuke and restart queue
gt refinery reset myproject</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">High costs unexpectedly</summary>
        <div style="padding: 1rem;">
          <p><strong>Solutions:</strong></p>
          <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
            <pre style="margin: 0;"><code># Check active agents
gt status

# Kill unnecessary agents
gt crew purge --all
gt polecat down myproject --all

# Set limits in config
gt config set max_polecats 5
gt config set max_crew 2

# Use cheaper models for appropriate roles
gt config set witness_model haiku
gt config set polecat_model sonnet</code></pre>
          </div>
        </div>
      </details>

      <h3>Emergency Recovery</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Complete System Failure
pkill -f "gt\|claude"
tmux kill-server
git status
bd sync --force
bd doctor --fix
./gastown-start.sh --fresh

# Cost Emergency (Runaway Spending)
gt pause --all
gt status
gt town down
gt config set max_polecats 3
gt config set max_crew 1
gt mayor attach  # Careful restart</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Quick Reference Section -->
    <section id="quick-reference">
      <h2><span style="font-weight: 700;">Qui</span>ck Reference Card</h2>

      <h3>Installation</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>go install github.com/steveyegge/gastown/cmd/gt@latest
go install github.com/steveyegge/beads/cmd/bd@latest
gt install ~/gt --git
gt rig add myproject &lt;repo-url&gt;</code></pre>
      </div>

      <h3>Role Management</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Town-level
gt mayor attach           # Interactive (primary)
gt mayor up|down|status
gt dogs up|down|status|bark

# Rig-level
gt witness up|down &lt;rig&gt;
gt refinery up|down &lt;rig&gt;
gt polecat up|down|list &lt;rig&gt; [name]
gt crew spawn|count|purge &lt;rig&gt;</code></pre>
      </div>

      <h3>Work Assignment</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>gt sling &lt;bead-id&gt; &lt;rig&gt;
gt convoy create "name" &lt;ids&gt;
gt inbox
gt inbox respond &lt;id&gt; --approve|--reject</code></pre>
      </div>

      <h3>Beads</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>bd ready                     # List actionable tasks
bd create "Title"            # New task
bd dep add &lt;child&gt; &lt;parent&gt;  # Add dependency
bd show &lt;id&gt;                 # Full state
bd sync                      # Sync to remote</code></pre>
      </div>

      <h3>tmux Navigation</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <pre style="margin: 0; overflow-x: auto;"><code>Ctrl-b n    # Next window
Ctrl-b p    # Previous window
Ctrl-b &lt;N&gt;  # Jump to window N
Ctrl-b z    # Zoom pane
Ctrl-b d    # Detach</code></pre>
      </div>
    </section>

    <hr class="section-divider">

    <!-- The Bottom Line -->
    <blockquote style="border-left: 3px solid #2a7d7d; padding-left: 1rem; margin: 2rem 0; font-style: italic; color: #5c4b3a; font-size: 1.1em;">
      "Build a colony of coding agents, not the world's largest ant."
      <cite style="display: block; margin-top: 0.5rem; font-size: 0.9em;">-- Steve Yegge</cite>
    </blockquote>

    <!-- Related Pages -->
    <div class="related-pages" style="margin-top: 2rem; padding: 1rem; background: #f9f6f0; border-radius: 8px;">
      <h4 style="margin-top: 0;">Related Documents</h4>
      <ul>
        <li><a href="architecture-complexity-ladder.html">Complexity Ladder</a> - Full progression from Level 0-7</li>
        <li><a href="mastery-ccmirror-complete.html">CC Mirror Complete</a> - Level 4-5 orchestration alternative</li>
        <li><a href="mastery-multi-agent.html">Multi-Agent Architecture</a> - All orchestration patterns compared</li>
        <li><a href="compare-orchestration.html">Orchestration Comparison</a> - CC Mirror vs Gas Town vs Ralph</li>
      </ul>
      <h4>External Resources</h4>
      <ul>
        <li><a href="https://github.com/steveyegge/gastown">Gas Town Repository</a> - Installation and docs</li>
        <li><a href="https://github.com/steveyegge/beads">Beads Repository</a> - Agent memory system</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <div class="footer-nav" style="display: flex; justify-content: space-between; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #e0d5c5;">
      <a href="mastery-ccmirror-complete.html">Prev: CC Mirror Complete</a>
      <a href="mastery-multi-agent.html">Next: Multi-Agent Architecture</a>
    </div>

  </div>

  <script src="../js/copy-code.js"></script>
  <script src="../js/search.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      setTimeout(() => button.textContent = 'Copy', 2000);
    }
  </script>
</body>
</html>
