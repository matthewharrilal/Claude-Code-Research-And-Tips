<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Architecture">
  <title>Swarm Topologies: Complete Architecture Guide - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <span>Architecture</span>
      <span>/</span>
      <span>Swarm Topologies</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0.5rem;">This is the <strong><span style="font-weight: 700;">top</span>ology-aware swarms layer</strong> - Level 5-6 on the complexity ladder. You've mastered single agents, loops, and basic multi-agent patterns. Now you're ready to understand how agents structurally coordinate at scale.</p>
      <p style="margin-bottom: 0;"><strong>Prerequisites:</strong> Multi-agent concepts (<a href="mastery-multi-agent.html">mastery-multi-agent</a>), basic Claude Code familiarity, comfort with distributed systems concepts (helpful but not required).</p>
    </div>

    <h1><span style="font-weight: 700;">Swa</span>rm Topologies: Complete Architecture Guide</h1>

    <p class="conversational-lead">
      <span style="font-weight: 700;">Sw</span>arm topologies are the <span style="font-weight: 700;">str</span>uctural patterns that define how <span style="font-weight: 700;">mul</span>tiple AI <span style="font-weight: 700;">ag</span>ents <span style="font-weight: 700;">co</span>ordinate, <span style="font-weight: 700;">com</span>municate, and <span style="font-weight: 700;">col</span>laborate. This synthesis extracts topology patterns from four major frameworks: Claude-Flow v3, CCSwarm, Swarms Framework, and Station NATS.
    </p>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#topologies-catalog">14+ Topologies Catalog</a> - Complete pattern overview</li>
        <li><a href="#sequential">Sequential Workflow</a> - Linear chain execution</li>
        <li><a href="#concurrent">Concurrent Workflow</a> - Full parallelism</li>
        <li><a href="#hierarchical">Hierarchical Swarm</a> - Queen/Director coordination</li>
        <li><a href="#mesh">Mesh Network</a> - Peer-to-peer communication</li>
        <li><a href="#ring">Ring Topology</a> - Circular passing</li>
        <li><a href="#star">Star/Centralized</a> - Hub-spoke pattern</li>
        <li><a href="#hybrid">Hybrid Topology</a> - Multi-pattern combination</li>
        <li><a href="#moa">Mixture-of-Agents</a> - Expert synthesis</li>
        <li><a href="#graphworkflow">GraphWorkflow (DAG)</a> - Dependency graphs</li>
        <li><a href="#forestswarm">ForestSwarm</a> - Semantic routing</li>
        <li><a href="#additional">Additional Topologies</a> - GroupChat, MajorityVoting, AgentRearrange, HeavySwarm</li>
        <li><a href="#ccswarm">CCSwarm Rust Coordination</a> - Type-state patterns</li>
        <li><a href="#nats">NATS Messaging Backbone</a> - Station patterns</li>
        <li><a href="#consensus">Consensus Algorithms</a> - Raft, Byzantine, Gossip</li>
        <li><a href="#selection">When to Use Which</a> - Decision tree</li>
        <li><a href="#mental-models">Mental Models</a> - Factory, Orchestra, Nervous System</li>
        <li><a href="#checkpoints">Checkpoints</a> - Verification steps</li>
        <li><a href="#troubleshooting">Troubleshooting</a> - Common issues</li>
        <li><a href="#integration">Integration Patterns</a> - Combining topologies</li>
        <li><a href="#performance">Performance Comparison</a> - Latency, throughput, cost</li>
      </ul>
    </div>

    <hr class="section-divider divider-context">

    <!-- Topologies Catalog Section -->
    <section id="topologies-catalog">
      <h2><span style="font-weight: 700;">14+</span> Topologies Catalog</h2>

      <p>This matrix provides a quick overview of all topology patterns covered in this guide.</p>

      <div style="overflow-x: auto;">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Topology</th>
              <th>Agent Count</th>
              <th>Parallelism</th>
              <th>Coordination</th>
              <th>Best For</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>1</td><td><a href="#sequential">Sequential</a></td><td>2-10</td><td>None</td><td>Linear chain</td><td>Pipelines, refinement</td></tr>
            <tr><td>2</td><td><a href="#concurrent">Concurrent</a></td><td>2-50</td><td>Full</td><td>Independent</td><td>Speed, parallel analysis</td></tr>
            <tr><td>3</td><td><a href="#hierarchical">Hierarchical</a></td><td>3-100+</td><td>Partial</td><td>Queen/Director</td><td>Enterprise, projects</td></tr>
            <tr><td>4</td><td><a href="#mesh">Mesh</a></td><td>5-20</td><td>Full</td><td>Peer-to-peer</td><td>Distributed workloads</td></tr>
            <tr><td>5</td><td><a href="#ring">Ring</a></td><td>3-30</td><td>Partial</td><td>Circular pass</td><td>Pipeline processing</td></tr>
            <tr><td>6</td><td><a href="#star">Star/Centralized</a></td><td>3-50</td><td>Full</td><td>Hub-spoke</td><td>Simple coordination</td></tr>
            <tr><td>7</td><td><a href="#hybrid">Hybrid</a></td><td>10-200+</td><td>Mixed</td><td>Multi-pattern</td><td>Factory scale</td></tr>
            <tr><td>8</td><td><a href="#moa">Mixture-of-Agents</a></td><td>3-10</td><td>Full</td><td>Aggregator</td><td>Expert synthesis</td></tr>
            <tr><td>9</td><td><a href="#graphworkflow">GraphWorkflow</a></td><td>5-50</td><td>DAG-based</td><td>Edge dependencies</td><td>Complex pipelines</td></tr>
            <tr><td>10</td><td><a href="#forestswarm">ForestSwarm</a></td><td>10-100+</td><td>Dynamic</td><td>Semantic routing</td><td>Large agent pools</td></tr>
            <tr><td>11</td><td><a href="#additional">GroupChat</a></td><td>3-8</td><td>Turn-based</td><td>Conversation</td><td>Discussion, debate</td></tr>
            <tr><td>12</td><td><a href="#additional">MajorityVoting</a></td><td>3-9 (odd)</td><td>Full</td><td>Consensus</td><td>Decision making</td></tr>
            <tr><td>13</td><td><a href="#additional">AgentRearrange</a></td><td>2-20</td><td>Configurable</td><td>Flow syntax</td><td>Dynamic workflows</td></tr>
            <tr><td>14</td><td><a href="#additional">HeavySwarm</a></td><td>5</td><td>Phased</td><td>Protocol-driven</td><td>Deep analysis</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Sequential Workflow Section -->
    <section id="sequential">
      <h2><span style="font-weight: 700;">Top</span>ology 1: Sequential Workflow</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Linear chain where each agent's output becomes the next agent's input.</p>

      <div class="ascii-diagram">
+----------+     +----------+     +----------+     +----------+
|  Agent 1 | --> |  Agent 2 | --> |  Agent 3 | --> |  Result  |
| Research |     |  Writer  |     |  Editor  |     |          |
+----------+     +----------+     +----------+     +----------+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>None - strictly sequential</td></tr>
          <tr><td><strong>Latency</strong></td><td>Sum of all agent latencies</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>2-10</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Single point - any failure stops chain</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>Low - one agent active at a time</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">Do</span>cument processing <span style="font-weight: 700;">pi</span>pelines (research -> write -> edit)</li>
        <li><span style="font-weight: 700;">St</span>ep-by-step analysis <span style="font-weight: 700;">cha</span>ins</li>
        <li><span style="font-weight: 700;">Co</span>ntent refinement <span style="font-weight: 700;">wor</span>kflows</li>
        <li><span style="font-weight: 700;">Qu</span>ality improvement <span style="font-weight: 700;">cha</span>ins (draft -> review -> polish)</li>
      </ul>

      <h3>Implementation (Swarms Framework)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>from swarms import Agent, SequentialWorkflow

researcher = Agent(
    agent_name="Researcher",
    system_prompt="Research the given topic thoroughly.",
    model_name="gpt-4o-mini",
)

writer = Agent(
    agent_name="Writer",
    system_prompt="Write engaging content based on research.",
    model_name="gpt-4o-mini",
)

editor = Agent(
    agent_name="Editor",
    system_prompt="Polish and improve the written content.",
    model_name="gpt-4o-mini",
)

workflow = SequentialWorkflow(
    agents=[researcher, writer, editor],
    max_loops=1,
    team_awareness=True,  # Agents know their position
)

result = workflow.run("Write about quantum computing trends in 2026")</code></pre>
      </div>

      <h3>Implementation (Claude-Flow)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>const coordinator = createUnifiedSwarmCoordinator({
  topology: {
    type: 'ring',  // Sequential in Claude-Flow
    maxAgents: 10,
    domains: ['research', 'writing', 'editing']
  }
});</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Concurrent Workflow Section -->
    <section id="concurrent">
      <h2><span style="font-weight: 700;">Top</span>ology 2: Concurrent Workflow</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Multiple agents work simultaneously on the same or different tasks.</p>

      <div class="ascii-diagram">
              +------------+
          +-->|  Agent 1   |--+
          |   | Market     |  |
          |   +------------+  |
          |                   |
+-------+ |   +------------+  |     +---------+
| Task  |-+-->|  Agent 2   |--+---->| Results |
|       | |   | Financial  |  |     |         |
+-------+ |   +------------+  |     +---------+
          |                   |
          |   +------------+  |
          +-->|  Agent 3   |--+
              | Risk       |
              +------------+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>Full - all agents execute simultaneously</td></tr>
          <tr><td><strong>Latency</strong></td><td>Max of individual agent latencies</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>2-50</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Independent - one failure doesn't stop others</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>High - all agents active simultaneously</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">Pa</span>rallel data <span style="font-weight: 700;">an</span>alysis</li>
        <li><span style="font-weight: 700;">Mul</span>ti-perspective <span style="font-weight: 700;">ev</span>aluation</li>
        <li><span style="font-weight: 700;">Sp</span>eed-critical <span style="font-weight: 700;">pro</span>cessing</li>
        <li><span style="font-weight: 700;">In</span>dependent task <span style="font-weight: 700;">ex</span>ecution</li>
      </ul>

      <h3>Implementation (Swarms Framework)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>from swarms import Agent, ConcurrentWorkflow

market_analyst = Agent(
    agent_name="Market-Analyst",
    system_prompt="Analyze market trends and opportunities.",
    model_name="gpt-4o-mini",
)

financial_analyst = Agent(
    agent_name="Financial-Analyst",
    system_prompt="Evaluate financial metrics and risks.",
    model_name="gpt-4o-mini",
)

risk_analyst = Agent(
    agent_name="Risk-Analyst",
    system_prompt="Assess risks and mitigation strategies.",
    model_name="gpt-4o-mini",
)

concurrent = ConcurrentWorkflow(
    agents=[market_analyst, financial_analyst, risk_analyst],
    max_loops=1,
)

results = concurrent.run("Analyze NVIDIA stock for investment potential")</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Hierarchical Swarm Section -->
    <section id="hierarchical">
      <h2><span style="font-weight: 700;">Top</span>ology 3: Hierarchical Swarm</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Director/Queen agent coordinates specialized workers with feedback loops.</p>

      <div class="ascii-diagram">
                +-------------------+
                |   STRATEGIC QUEEN |
                |     (Planning)    |
                +---------+---------+
                          |
          +---------------+---------------+
          |               |               |
          v               v               v
  +-------+-------+ +-----+-----+ +-------+-------+
  | TACTICAL      | | ADAPTIVE  | |   SECURITY    |
  | QUEEN         | | QUEEN     | |   ARCHITECT   |
  | (Execution)   | | (Learning)| |   (Review)    |
  +-------+-------+ +-----+-----+ +-------+-------+
          |               |               |
+---------+---------+     |     +---------+---------+
|         |         |     |     |         |         |
v         v         v     v     v         v         v
+------+ +------+ +------+ +------+ +------+ +------+ +------+
|Coder1| |Coder2| |Tester| |Analyt| |Review| |Docmtr| |Optim |
+------+ +------+ +------+ +------+ +------+ +------+ +------+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>Partial - workers parallel, coordination serial</td></tr>
          <tr><td><strong>Latency</strong></td><td>Director overhead + max worker latency</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>3-100+</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Director is critical, workers replaceable</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>Medium - workers share through director</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">En</span>terprise development <span style="font-weight: 700;">tea</span>ms</li>
        <li><span style="font-weight: 700;">Pr</span>oject management <span style="font-weight: 700;">wor</span>kflows</li>
        <li><span style="font-weight: 700;">Co</span>mplex task <span style="font-weight: 700;">dec</span>omposition</li>
        <li><span style="font-weight: 700;">Qu</span>ality-controlled <span style="font-weight: 700;">pi</span>pelines</li>
      </ul>

      <h3>Implementation (Claude-Flow v3)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>const coordinator = createUnifiedSwarmCoordinator({
  topology: {
    type: 'hierarchical',
    maxAgents: 100,
    domains: ['queen', 'security', 'core', 'integration', 'support']
  },
  consensus: {
    algorithm: 'raft',
    threshold: 0.66,
    timeout: 5000
  },
  scaling: {
    minAgents: 5,
    maxAgents: 100,
    autoScale: true,
    scaleThreshold: 0.8
  }
});</code></pre>
      </div>

      <h3>Implementation (Swarms Framework)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>from swarms import Agent, HierarchicalSwarm

developer = Agent(
    agent_name="Developer",
    system_prompt="Implement code based on specifications.",
    model_name="gpt-4o-mini",
)

tester = Agent(
    agent_name="Tester",
    system_prompt="Write and run tests for the implementation.",
    model_name="gpt-4o-mini",
)

reviewer = Agent(
    agent_name="Reviewer",
    system_prompt="Review code for quality and best practices.",
    model_name="gpt-4o-mini",
)

swarm = HierarchicalSwarm(
    agents=[developer, tester, reviewer],
    max_loops=3,  # Feedback iterations
    director_model_name="gpt-4o",  # Smarter director
    planning_enabled=True,
    interactive=False,
)

result = swarm.run("Build a REST API for user authentication")</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Mesh Network Section -->
    <section id="mesh">
      <h2><span style="font-weight: 700;">Top</span>ology 4: Mesh Network</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Agents connect directly to each other in a peer-to-peer network.</p>

      <div class="ascii-diagram">
    +----------+
    | Agent A  |
    +----+-----+
        /|\
       / | \
      /  |  \
     /   |   \
    /    |    \
   v     v     v
+------+  +------+  +------+
|Agent B|<->|Agent C|<->|Agent D|
+------+  +------+  +------+
    \        |        /
     \       |       /
      \      |      /
       \     |     /
        v    v    v
        +----------+
        | Agent E  |
        +----------+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>Full - any agent can communicate with any other</td></tr>
          <tr><td><strong>Latency</strong></td><td>Variable - depends on communication pattern</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>5-20</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Resilient - no single point of failure</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>High - maintaining multiple connections</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">Di</span>stributed workloads <span style="font-weight: 700;">wi</span>thout central <span style="font-weight: 700;">co</span>ordinator</li>
        <li><span style="font-weight: 700;">De</span>centralized <span style="font-weight: 700;">de</span>cision making</li>
        <li><span style="font-weight: 700;">Fau</span>lt-tolerant <span style="font-weight: 700;">sy</span>stems</li>
        <li><span style="font-weight: 700;">Pe</span>er review <span style="font-weight: 700;">net</span>works</li>
      </ul>

      <h3>Implementation (Claude-Flow v3)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>const coordinator = createUnifiedSwarmCoordinator({
  topology: {
    type: 'mesh',
    maxAgents: 20,
  },
  consensus: {
    algorithm: 'gossip',  // Best for mesh
    fanout: 3,
    interval: 100,
    convergenceThreshold: 0.99
  }
});</code></pre>
      </div>

      <h3>Implementation (Station NATS)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Each agent is a Station Member in the mesh
lattice:
  mode: member
  station_name: "mesh-node-1"
  nats:
    url: "nats://orchestrator:4222"

# Mesh communication via NATS subjects
# lattice.station.{id}.agent.invoke</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Ring Topology Section -->
    <section id="ring">
      <h2><span style="font-weight: 700;">Top</span>ology 5: Ring Topology</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Agents pass work in a circular pattern.</p>

      <div class="ascii-diagram">
    +----------+
    | Agent 1  |
    +----+-----+
         |
         v
+----------+ | +----------+
| Agent 4  |<--| Agent 2  |
+-----+----+   +----+-----+
      |             |
      v             v
      +-------------+
      |   Agent 3   |
      +-------------+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>Partial - pipeline style</td></tr>
          <tr><td><strong>Latency</strong></td><td>Sum around the ring (if full pass)</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>3-30</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Single break disrupts ring</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>Low - one active handoff at a time</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">Pi</span>peline processing <span style="font-weight: 700;">wi</span>th feedback</li>
        <li><span style="font-weight: 700;">It</span>erative refinement <span style="font-weight: 700;">cy</span>cles</li>
        <li><span style="font-weight: 700;">To</span>ken passing <span style="font-weight: 700;">pro</span>tocols</li>
        <li><span style="font-weight: 700;">Rou</span>nd-robin <span style="font-weight: 700;">di</span>stribution</li>
      </ul>

      <h3>Implementation (Claude-Flow v3)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>const coordinator = createUnifiedSwarmCoordinator({
  topology: {
    type: 'ring',
    maxAgents: 30,
  }
});</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Star/Centralized Section -->
    <section id="star">
      <h2><span style="font-weight: 700;">Top</span>ology 6: Star/Centralized</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Central hub coordinates all spoke agents.</p>

      <div class="ascii-diagram">
              +--------+
              |Agent 1 |
              +---+----+
                  |
    +-------+     |     +-------+
    |Agent 2|<----|---->|Agent 3|
    +-------+     |     +-------+
                  |
          +-------+-------+
          |  CENTRAL HUB  |
          |  (Coordinator)|
          +-------+-------+
                  |
    +-------+     |     +-------+
    |Agent 4|<----|---->|Agent 5|
    +-------+     |     +-------+
                  |
              +---+----+
              |Agent 6 |
              +--------+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>Full - hub coordinates parallel execution</td></tr>
          <tr><td><strong>Latency</strong></td><td>Hub latency + max spoke latency</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>3-50</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Hub is single point of failure</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>Medium - hub manages state</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">Si</span>mple coordination <span style="font-weight: 700;">ne</span>eds</li>
        <li><span style="font-weight: 700;">Ce</span>ntralized logging/<span style="font-weight: 700;">mo</span>nitoring</li>
        <li><span style="font-weight: 700;">Ea</span>sy debugging/<span style="font-weight: 700;">ob</span>servability</li>
        <li><span style="font-weight: 700;">Si</span>ngle-focus <span style="font-weight: 700;">pr</span>ojects</li>
      </ul>

      <h3>Implementation (Claude-Flow v3)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>const coordinator = createUnifiedSwarmCoordinator({
  topology: {
    type: 'centralized',  // Star topology
    maxAgents: 50,
  }
});</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Hybrid Section -->
    <section id="hybrid">
      <h2><span style="font-weight: 700;">Top</span>ology 7: Hybrid</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Combination of multiple topologies for large-scale deployments.</p>

      <div class="ascii-diagram">
+---------------------------------------------------------------+
|                        HYBRID TOPOLOGY                         |
+---------------------------------------------------------------+
|                                                               |
|   +--------------------+      +--------------------+          |
|   | HIERARCHICAL TEAM  |      | HIERARCHICAL TEAM  |          |
|   |     (Backend)      |      |    (Frontend)      |          |
|   |  +----+   +----+   |      |  +----+   +----+   |          |
|   |  |Lead|   |Lead|   |      |  |Lead|   |Lead|   |          |
|   |  +-+--+   +-+--+   |      |  +-+--+   +-+--+   |          |
|   |    |        |      |      |    |        |      |          |
|   |  +-+-+    +-+-+    |      |  +-+-+    +-+-+    |          |
|   |  |W1|W2|  |W3|W4|  |      |  |W5|W6|  |W7|W8|  |          |
|   |  +--+--+  +--+--+  |      |  +--+--+  +--+--+  |          |
|   +--------+---+-------+      +--------+---+-------+          |
|            |   |                       |   |                  |
|            +---+-----------+-----------+---+                  |
|                            |                                  |
|                    +-------+-------+                          |
|                    |  MESH NETWORK |                          |
|                    | (Cross-team)  |                          |
|                    +---------------+                          |
|                                                               |
+---------------------------------------------------------------+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>Mixed - depends on sub-topologies</td></tr>
          <tr><td><strong>Latency</strong></td><td>Varies by path</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>10-200+</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Depends on sub-topology failures</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>High - multiple coordination patterns</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">Fac</span>tory-scale <span style="font-weight: 700;">de</span>ployments</li>
        <li><span style="font-weight: 700;">Mul</span>ti-team <span style="font-weight: 700;">or</span>ganizations</li>
        <li><span style="font-weight: 700;">Com</span>plex enterprise <span style="font-weight: 700;">sy</span>stems</li>
        <li><span style="font-weight: 700;">Lar</span>ge mixed <span style="font-weight: 700;">wor</span>kloads</li>
      </ul>

      <h3>Implementation (Claude-Flow v3)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>const coordinator = createUnifiedSwarmCoordinator({
  topology: {
    type: 'hybrid',
    maxAgents: 200,
    subTopologies: [
      { type: 'hierarchical', domain: 'backend', agents: 50 },
      { type: 'hierarchical', domain: 'frontend', agents: 50 },
      { type: 'mesh', domain: 'coordination', agents: 10 }
    ]
  }
});</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Mixture-of-Agents Section -->
    <section id="moa">
      <h2><span style="font-weight: 700;">Top</span>ology 8: Mixture-of-Agents (MoA)</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Multiple experts work in parallel, then an aggregator synthesizes their outputs.</p>

      <div class="ascii-diagram">
              +----------------+
          +-->| Python Expert  |--+
          |   +----------------+  |
          |                       |
+-------+ |   +----------------+  |     +------------+     +--------+
| Task  |-+-->| Security Expert|--+---->| AGGREGATOR |---->| Result |
|       | |   +----------------+  |     | (Synthesis)|     |        |
+-------+ |                       |     +------------+     +--------+
          |   +----------------+  |
          +-->| Arch Expert    |--+
              +----------------+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>Full for experts, serial for aggregation</td></tr>
          <tr><td><strong>Latency</strong></td><td>Max expert latency + aggregator latency</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>3-10 experts + 1 aggregator</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Expert failures reduce quality, aggregator critical</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>Medium - expert contexts can be discarded</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">Com</span>plex problem <span style="font-weight: 700;">so</span>lving</li>
        <li><span style="font-weight: 700;">Mul</span>ti-domain <span style="font-weight: 700;">ex</span>pertise</li>
        <li><span style="font-weight: 700;">Con</span>sensus building</li>
        <li><span style="font-weight: 700;">Ex</span>pert panel <span style="font-weight: 700;">si</span>mulation</li>
      </ul>

      <h3>Implementation (Swarms Framework)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>from swarms import Agent
from swarms.structs.swarm_router import SwarmRouter, SwarmType

python_expert = Agent(
    agent_name="Python-Expert",
    system_prompt="You are a Python optimization specialist.",
    model_name="gpt-4o-mini",
)

security_expert = Agent(
    agent_name="Security-Expert",
    system_prompt="You are a security and vulnerability specialist.",
    model_name="gpt-4o-mini",
)

architecture_expert = Agent(
    agent_name="Architecture-Expert",
    system_prompt="You are a software architecture specialist.",
    model_name="gpt-4o-mini",
)

aggregator = Agent(
    agent_name="Aggregator",
    system_prompt="Synthesize expert opinions into actionable recommendations.",
    model_name="gpt-4o",  # Smarter for synthesis
)

router = SwarmRouter(
    swarm_type=SwarmType.MixtureOfAgents,
    agents=[python_expert, security_expert, architecture_expert],
    aggregator_agent=aggregator,
)

result = router.run("Review this codebase for production readiness")</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- GraphWorkflow Section -->
    <section id="graphworkflow">
      <h2><span style="font-weight: 700;">Top</span>ology 9: GraphWorkflow (DAG)</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Directed Acyclic Graph for complex dependencies.</p>

      <div class="ascii-diagram">
          +---+
          | A |  (Data Collection)
          +-+-+
           /|\
          / | \
         /  |  \
        v   v   v
     +---+ +---+ +---+
     | B | | C | | D |  (Parallel Analysis)
     +-+-+ +-+-+ +-+-+
       |     |     |
       |     v     |
       |   +---+   |
       +-->| E |<--+  (Synthesis)
           +-+-+
             |
             v
           +---+
           | F |  (Final Report)
           +---+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>DAG-based - parallel where no dependencies</td></tr>
          <tr><td><strong>Latency</strong></td><td>Critical path through DAG</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>5-50</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Dependent nodes blocked by upstream failure</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>Medium - active branch contexts</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">Bu</span>ild system-like <span style="font-weight: 700;">de</span>pendencies</li>
        <li><span style="font-weight: 700;">Com</span>plex data <span style="font-weight: 700;">pi</span>pelines</li>
        <li><span style="font-weight: 700;">Re</span>search workflows <span style="font-weight: 700;">wi</span>th prerequisites</li>
        <li><span style="font-weight: 700;">Co</span>nditional execution <span style="font-weight: 700;">pa</span>ths</li>
      </ul>

      <h3>Implementation (Swarms Framework)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>from swarms import Agent
from swarms.structs.graph_workflow import GraphWorkflow

data_collector = Agent(agent_name="DataCollector", model_name="gpt-4o-mini")
analyzer_1 = Agent(agent_name="Analyzer1", model_name="gpt-4o-mini")
analyzer_2 = Agent(agent_name="Analyzer2", model_name="gpt-4o-mini")
synthesizer = Agent(agent_name="Synthesizer", model_name="gpt-4o")

workflow = GraphWorkflow(backend="networkx")  # or "rustworkx" for performance

# Add nodes
workflow.add_nodes([data_collector, analyzer_1, analyzer_2, synthesizer])

# Add edges (dependencies)
workflow.add_edge(data_collector, analyzer_1)
workflow.add_edge(data_collector, analyzer_2)
workflow.add_edges_to_target([analyzer_1, analyzer_2], synthesizer)

# Compile and execute
workflow.compile()
result = workflow.run("Analyze market trends in AI sector")

# Visualize
workflow.visualize("workflow_diagram.png")</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- ForestSwarm Section -->
    <section id="forestswarm">
      <h2><span style="font-weight: 700;">Top</span>ology 10: ForestSwarm</h2>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Dynamic agent selection using semantic similarity.</p>

      <div class="ascii-diagram">
+----------+      +-----------+      +---------------+      +---------------+
|   Task   | ---> | Embedding | ---> | Tree Selection| ---> | Agent Select  |
+----------+      | [0.2,0.8] |      | "Finance Tree"|      | "Tax Speclist"|
                  +-----------+      +---------------+      +---------------+
                                            |
                                            v
                  +------------------------------------------------+
                  |                    FOREST                       |
                  |  +-------------+  +-------------+  +----------+ |
                  |  |Finance Tree |  | Legal Tree  |  | Tech Tree| |
                  |  | -Tax Agent  |  | -Contract   |  | -Backend | |
                  |  | -Invest Agt |  | -IP Agent   |  | -Frontend| |
                  |  | -Audit Agt  |  | -Comp Agent |  | -DevOps  | |
                  |  +-------------+  +-------------+  +----------+ |
                  +------------------------------------------------+
      </div>

      <h3>Characteristics</h3>
      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>Dynamic - routes to best agent</td></tr>
          <tr><td><strong>Latency</strong></td><td>Routing overhead + selected agent latency</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>10-100+</td></tr>
          <tr><td><strong>Failure mode</strong></td><td>Fallback to next-best agent</td></tr>
          <tr><td><strong>Memory usage</strong></td><td>Low per task - only one agent active</td></tr>
        </tbody>
      </table>

      <h3>Use Cases</h3>
      <ul>
        <li><span style="font-weight: 700;">Lar</span>ge agent pools <span style="font-weight: 700;">wi</span>th specialization</li>
        <li><span style="font-weight: 700;">Dy</span>namic task <span style="font-weight: 700;">rou</span>ting</li>
        <li><span style="font-weight: 700;">Ex</span>pertise matching</li>
        <li><span style="font-weight: 700;">Sc</span>alable specialist <span style="font-weight: 700;">ne</span>tworks</li>
      </ul>

      <h3>Implementation (Swarms Framework)</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>from swarms.structs.forest_swarm import ForestSwarm, Tree, TreeAgent

tax_agent = TreeAgent(
    agent_name="Tax-Specialist",
    system_prompt="You specialize in tax law and compliance.",
    model_name="gpt-4o-mini",
)

investment_agent = TreeAgent(
    agent_name="Investment-Specialist",
    system_prompt="You specialize in investment strategies.",
    model_name="gpt-4o-mini",
)

finance_tree = Tree(
    name="Finance-Tree",
    agents=[tax_agent, investment_agent],
)

forest = ForestSwarm(trees=[finance_tree])

# Task automatically routes to best agent
result = forest.run("What are the tax implications of selling stocks?")</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Additional Topologies Section -->
    <section id="additional">
      <h2><span style="font-weight: 700;">Add</span>itional Topologies</h2>

      <h3>Topology 11: GroupChat</h3>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Conversational collaboration with turn-based discussion.</p>

      <div class="ascii-diagram">
+--------------------------------------------------+
|                   GROUP CHAT                      |
|                                                  |
|   [Manager]: "Let's discuss the architecture"    |
|       |                                          |
|       v                                          |
|   [Backend]: "I suggest microservices..."        |
|       |                                          |
|       v                                          |
|   [Frontend]: "That affects state management..." |
|       |                                          |
|       v                                          |
|   [Security]: "We need auth between services..." |
|       |                                          |
|       v                                          |
|   [Manager]: "Good points, consensus on..."      |
|                                                  |
+--------------------------------------------------+
      </div>

      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>None - turn-based</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>3-8</td></tr>
          <tr><td><strong>Use Cases</strong></td><td>Design discussions, debate, brainstorming</td></tr>
        </tbody>
      </table>

      <hr style="border: none; border-top: 1px solid #e0d5c5; margin: 2rem 0;">

      <h3>Topology 12: MajorityVoting</h3>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Agents vote on outcomes, majority wins.</p>

      <div class="ascii-diagram">
+-------+     +----------+
| Agent |---->|  VOTE 1  |----+
+-------+     +----------+    |
                              |
+-------+     +----------+    |    +-----------+     +--------+
| Agent |---->|  VOTE 2  |----+--->| TALLY     |---->| WINNER |
+-------+     +----------+    |    | (Majority)|     |        |
                              |    +-----------+     +--------+
+-------+     +----------+    |
| Agent |---->|  VOTE 3  |----+
+-------+     +----------+
      </div>

      <table class="comparison-table">
        <tbody>
          <tr><td><strong>Parallelism</strong></td><td>Full - all vote simultaneously</td></tr>
          <tr><td><strong>Best agent count</strong></td><td>3-9 (odd numbers preferred)</td></tr>
          <tr><td><strong>Use Cases</strong></td><td>Decision making, answer verification, quality gates</td></tr>
        </tbody>
      </table>

      <hr style="border: none; border-top: 1px solid #e0d5c5; margin: 2rem 0;">

      <h3>Topology 13: AgentRearrange</h3>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Dynamic flow definition using arrow syntax.</p>

      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>Flow: "researcher -> writer, critic -> editor"

              +------------+
          +-->|   writer   |--+
          |   +------------+  |
+----------+                   |   +----------+
| researcher|-+               +-->|  editor  |
+----------+  |               |   +----------+
          |   +------------+  |
          +-->|   critic   |--+
              +------------+</code></pre>
      </div>

      <p><strong>Syntax Rules:</strong></p>
      <ul>
        <li><code>a -> b</code> = Sequential (a then b)</li>
        <li><code>a, b -> c</code> = Parallel a and b, then c</li>
        <li><code>a -> b, c</code> = a then parallel b and c</li>
      </ul>

      <h4>Implementation</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>from swarms import Agent, AgentRearrange

researcher = Agent(agent_name="researcher", model_name="gpt-4o-mini")
writer = Agent(agent_name="writer", model_name="gpt-4o-mini")
editor = Agent(agent_name="editor", model_name="gpt-4o-mini")
critic = Agent(agent_name="critic", model_name="gpt-4o-mini")

workflow = AgentRearrange(
    agents=[researcher, writer, editor, critic],
    flow="researcher -> writer, critic -> editor",
    team_awareness=True,
)

result = workflow.run("Create a blog post about AI safety")</code></pre>
      </div>

      <hr style="border: none; border-top: 1px solid #e0d5c5; margin: 2rem 0;">

      <h3>Topology 14: HeavySwarm</h3>

      <p><strong><span style="font-weight: 700;">Pat</span>tern:</strong> Five-phase comprehensive analysis protocol.</p>

      <div class="ascii-diagram">
+-------------------------------------------------------------------+
|                        HEAVY SWARM                                 |
+-------------------------------------------------------------------+
|                                                                   |
|  PHASE 1: Task Decomposition                                      |
|  +-------------------------------------------------------+       |
|  | Break complex task into analyzable components         |       |
|  +-------------------------------------------------------+       |
|                            |                                      |
|                            v                                      |
|  PHASE 2: Question Generation                                     |
|  +-------------------------------------------------------+       |
|  | Generate role-specific questions for each component   |       |
|  +-------------------------------------------------------+       |
|                            |                                      |
|                            v                                      |
|  PHASE 3: Parallel Execution                                      |
|  +-------------+  +-------------+  +-------------+  +-----------+ |
|  | Researcher  |  | Analyst     |  | Alternatives|  | Verifier  | |
|  +-------------+  +-------------+  +-------------+  +-----------+ |
|                            |                                      |
|                            v                                      |
|  PHASE 4: Result Collection                                       |
|  +-------------------------------------------------------+       |
|  | Gather all outputs, identify conflicts/consensus      |       |
|  +-------------------------------------------------------+       |
|                            |                                      |
|                            v                                      |
|  PHASE 5: Synthesis                                               |
|  +-------------------------------------------------------+       |
|  | Combine insights into comprehensive recommendation    |       |
|  +-------------------------------------------------------+       |
|                                                                   |
+-------------------------------------------------------------------+
      </div>

      <h4>Implementation</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>from swarms.structs.heavy_swarm import HeavySwarm

swarm = HeavySwarm(
    timeout=300,
    worker_count=4,
    tools=[custom_search, custom_calculator],
)

result = swarm.run("Develop a comprehensive market entry strategy for AI SaaS")</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- CCSwarm Section -->
    <section id="ccswarm">
      <h2><span style="font-weight: 700;">Rus</span>t-Based CCSwarm Coordination</h2>

      <p><span style="font-weight: 700;">CCS</span>warm provides performance-oriented patterns using Rust's type system for compile-time safety.</p>

      <h3>Type-State Pattern</h3>

      <p>The type-state pattern encodes valid state machine transitions in the type system. Invalid sequences become compile errors, not runtime crashes.</p>

      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>// States are types, not runtime values
struct Uninitialized;
struct Configured;
struct Connected;
struct Executing;

struct Agent&lt;State&gt; {
    config: Option&lt;Config&gt;,
    connection: Option&lt;Connection&gt;,
    _state: PhantomData&lt;State&gt;,
}

// Only valid transitions compile
impl Agent&lt;Uninitialized&gt; {
    fn configure(self, config: Config) -> Agent&lt;Configured&gt; {
        Agent {
            config: Some(config),
            connection: None,
            _state: PhantomData,
        }
    }
}

impl Agent&lt;Configured&gt; {
    fn connect(self) -> Agent&lt;Connected&gt; {
        // Connection logic...
    }
}

impl Agent&lt;Connected&gt; {
    fn execute_task(self, task: Task) -> Agent&lt;Executing&gt; {
        // Execution logic...
    }
}

// COMPILE ERROR: No such method on Agent&lt;Uninitialized&gt;
// let agent: Agent&lt;Uninitialized&gt; = Agent::new();
// agent.execute_task(task);  // Won't compile!</code></pre>
      </div>

      <div class="callout callout-success">
        <div class="callout-title">Type-State Benefits</div>
        <ul style="margin-bottom: 0;">
          <li>Zero runtime checks needed for state validation</li>
          <li>Impossible to create invalid state sequences</li>
          <li>IDE autocomplete only shows valid operations</li>
          <li>Refactoring is safe - compiler catches all violations</li>
        </ul>
      </div>

      <h3>Channel-Based Orchestration</h3>

      <p>CCSwarm replaces lock-based coordination with channel-based message passing.</p>

      <div class="ascii-diagram">
Lock-Based (Traditional):
+----------+     +----------+     +----------+
| Agent 1  |     | Agent 2  |     | Agent 3  |
+----+-----+     +----+-----+     +----+-----+
     |               |               |
     +---------------+---------------+
                     |
              +------+------+
              | Shared Lock |  <-- Contention point
              |  (Mutex)    |
              +-------------+

Channel-Based (CCSwarm):
+----------+     +----------+     +----------+
| Agent 1  |     | Agent 2  |     | Agent 3  |
+----+-----+     +----+-----+     +----+-----+
     |               |               |
     v               v               v
   +---+           +---+           +---+
   |ch1|           |ch2|           |ch3|  <-- Independent channels
   +-+-+           +-+-+           +-+-+
     |               |               |
     +---------------+---------------+
                     |
              +------+------+
              | Coordinator |  <-- Receives from all, no locking
              +-------------+
      </div>

      <h3>Performance Characteristics</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Metric</th><th>CCSwarm</th><th>Python Alternatives</th></tr>
        </thead>
        <tbody>
          <tr><td>Memory usage</td><td>~70% reduction</td><td>Baseline</td></tr>
          <tr><td>API cost</td><td>~93% reduction (claimed)</td><td>Variable</td></tr>
          <tr><td>State validation</td><td>Compile-time</td><td>Runtime checks</td></tr>
          <tr><td>Concurrency model</td><td>Lock-free channels</td><td>Often Arc&lt;Mutex&gt;</td></tr>
        </tbody>
      </table>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- NATS Section -->
    <section id="nats">
      <h2><span style="font-weight: 700;">NAT</span>S Messaging Backbone Patterns</h2>

      <p><span style="font-weight: 700;">St</span>ation uses NATS with JetStream for production-grade messaging infrastructure.</p>

      <h3>Lattice Architecture</h3>

      <div class="ascii-diagram">
+------------------------------------------------------------------+
|                         LATTICE MESH                              |
|  +---------------+    +---------------+    +---------------+      |
|  |  Station A    |    |  Station B    |    |  Station C    |      |
|  |  (Security)   |<-->|  (Orchestr.)  |<-->|   (SRE)       |      |
|  |               |    |               |    |               |      |
|  | VulnScanner   |    | Coordinator   |    | K8sHealth     |      |
|  | CVELookup     |    |               |    | LogAnalyzer   |      |
|  | NetworkAudit  |    |               |    | Deployer      |      |
|  +---------------+    +---------------+    +---------------+      |
|          |                   |                   |                 |
|          +-------------------+-------------------+                 |
|                              |                                    |
|                     +--------+--------+                           |
|                     |   NATS Server   |                           |
|                     |   + JetStream   |                           |
|                     +-----------------+                           |
+------------------------------------------------------------------+
      </div>

      <h3>Operating Modes</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Mode</th><th>Command</th><th>Purpose</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>Standalone</strong></td><td><code>stn serve</code></td><td>Default single-station, no mesh</td></tr>
          <tr><td><strong>Orchestrator</strong></td><td><code>stn serve --orchestration</code></td><td>Runs embedded NATS (port 4222)</td></tr>
          <tr><td><strong>Member</strong></td><td><code>stn serve --lattice &lt;url&gt;</code></td><td>Joins orchestrator mesh</td></tr>
        </tbody>
      </table>

      <h3>Subject Hierarchy</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>lattice.
+-- presence.
|   +-- announce        # Station startup
|   +-- heartbeat       # Health signals
|   +-- goodbye         # Graceful shutdown
+-- station.{id}.
|   +-- agent.invoke    # Agent invocation
+-- work.
|   +-- {stationID}.assign  # Work assignment
|   +-- {workID}.response   # Work responses
+-- events.
    +-- StationJoined
    +-- StationLeft
    +-- AgentRegistered
    +-- WorkAssigned
    +-- WorkCompleted</code></pre>
      </div>

      <h3>Message Patterns</h3>

      <h4>Request-Reply Pattern</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>// Publisher (Orchestrator)
client.Request("lattice.station.{id}.agent.invoke", request, timeout)

// Subscriber (Member Station)
client.Subscribe("lattice.station.{myID}.agent.invoke", handler)</code></pre>
      </div>

      <h4>Queue Group Pattern (Load Balancing)</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>// Multiple workers, one receives
client.QueueSubscribe(subject, "agent-workers", handler)</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Consensus Section -->
    <section id="consensus">
      <h2><span style="font-weight: 700;">Con</span>sensus Algorithms</h2>

      <h3>Algorithm Comparison</h3>
      <div style="overflow-x: auto;">
        <table class="comparison-table">
          <thead>
            <tr><th>Algorithm</th><th>Consistency</th><th>Fault Tolerance</th><th>Best For</th><th>Latency</th><th>Throughput</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Raft</strong></td><td>Strong</td><td>f &lt; n/2</td><td>Enterprise default</td><td>15-35ms</td><td>Medium</td></tr>
            <tr><td><strong>Byzantine (PBFT)</strong></td><td>Strong</td><td>f &lt; n/3</td><td>Untrusted environments</td><td>50-100ms</td><td>Low</td></tr>
            <tr><td><strong>Gossip</strong></td><td>Eventual</td><td>f &lt; n/2</td><td>Large swarms (100+)</td><td>10-40ms</td><td>High</td></tr>
            <tr><td><strong>Tendermint</strong></td><td>Strong</td><td>f &lt; n/3</td><td>Blockchain-style</td><td>100-500ms</td><td>Low</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Raft Consensus (Default)</h3>

      <p>Leader-based with strong consistency.</p>

      <div class="ascii-diagram">
+-----------------------------------------------------------+
|                     RAFT CONSENSUS                         |
+-----------------------------------------------------------+
|                                                           |
|   +----------+                                            |
|   |  LEADER  |  <-- Elected via voting                    |
|   | (Queen)  |                                            |
|   +----+-----+                                            |
|        |                                                  |
|        | Heartbeats + Log Replication                     |
|        |                                                  |
|   +----+----+----+----+----+                              |
|   |    |    |    |    |    |                              |
|   v    v    v    v    v    v                              |
| +--+ +--+ +--+ +--+ +--+ +--+                             |
| |F1| |F2| |F3| |F4| |F5| |F6|  Followers                  |
| +--+ +--+ +--+ +--+ +--+ +--+                             |
|                                                           |
|   Leader fails? --> New election                          |
|   Follower fails? --> Continue with majority              |
|                                                           |
+-----------------------------------------------------------+
      </div>

      <h4>Configuration (Claude-Flow)</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>const raftConfig = {
  algorithm: 'raft',
  electionTimeout: 150,      // ms
  heartbeatInterval: 50,     // ms
  logReplication: true
};</code></pre>
      </div>

      <h3>Gossip Protocol</h3>

      <p>Eventual consistency for large swarms.</p>

      <div class="ascii-diagram">
+-----------------------------------------------------------+
|                    GOSSIP PROTOCOL                         |
+-----------------------------------------------------------+
|                                                           |
|  Round 1:  Node A gossips to B, C, D                      |
|            +---+                                          |
|            | A | ----> B, C, D                            |
|            +---+                                          |
|                                                           |
|  Round 2:  B, C, D gossip to their neighbors              |
|            B ----> E, F                                   |
|            C ----> G, H                                   |
|            D ----> I, J                                   |
|                                                           |
|  Round N:  Eventually all nodes converge                  |
|            (Exponential spread)                           |
|                                                           |
|  Convergence: 99%+ agreement                              |
|                                                           |
+-----------------------------------------------------------+
      </div>

      <h4>Configuration (Claude-Flow)</h4>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code>const gossipConfig = {
  algorithm: 'gossip',
  fanout: 3,                 // Number of peers to gossip to
  interval: 100,             // ms between rounds
  convergenceThreshold: 0.99 // 99% agreement
};</code></pre>
      </div>

      <h3>Consensus Selection Guide</h3>

      <div class="ascii-diagram">
+-------------------------------------------------------------------+
|              CONSENSUS ALGORITHM SELECTION                         |
+-------------------------------------------------------------------+
|                                                                   |
|  How many agents?                                                 |
|  +-- < 20: Raft (simple, strong consistency)                      |
|  +-- 20-100: Consider Raft or Gossip based on consistency needs   |
|  +-- > 100: Gossip (eventual consistency, scales well)            |
|                                                                   |
|  Do you need Byzantine tolerance (untrusted agents)?              |
|  +-- Yes: Byzantine/PBFT (higher latency, lower throughput)       |
|  +-- No: Raft or Gossip                                           |
|                                                                   |
|  Is strong consistency required?                                  |
|  +-- Yes: Raft or Byzantine                                       |
|  +-- No: Gossip (faster, scales better)                           |
|                                                                   |
|  Default recommendation: Start with Raft, scale to Gossip         |
|                                                                   |
+-------------------------------------------------------------------+
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Selection Section -->
    <section id="selection">
      <h2><span style="font-weight: 700;">Whe</span>n to Use Which Topology</h2>

      <h3>Decision Tree</h3>

      <div class="ascii-diagram">
+-------------------------------------------------------------------+
|                 TOPOLOGY SELECTION DECISION TREE                   |
+-------------------------------------------------------------------+
|                                                                   |
|  What's your coordination need?                                   |
|                                                                   |
|  Linear dependency (A must complete before B)?                    |
|  +---> SequentialWorkflow                                         |
|                                                                   |
|  Independent parallel work?                                       |
|  +---> ConcurrentWorkflow                                         |
|                                                                   |
|  Boss delegates to workers with feedback?                         |
|  +---> HierarchicalSwarm                                          |
|                                                                   |
|  Experts synthesize opinions?                                     |
|  +---> MixtureOfAgents                                            |
|                                                                   |
|  Complex dependencies (DAG)?                                      |
|  +---> GraphWorkflow                                              |
|                                                                   |
|  Dynamic routing to specialists?                                  |
|  +---> ForestSwarm                                                |
|                                                                   |
|  Peer-to-peer without central coordinator?                        |
|  +---> Mesh                                                       |
|                                                                   |
|  Conversational collaboration?                                    |
|  +---> GroupChat                                                  |
|                                                                   |
|  Voting/consensus needed?                                         |
|  +---> MajorityVoting                                             |
|                                                                   |
|  Don't know? Let the framework decide:                            |
|  +---> SwarmRouter with swarm_type="auto"                         |
|                                                                   |
+-------------------------------------------------------------------+
      </div>

      <h3>Scale-Based Selection</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Agent Count</th><th>Recommended Topologies</th><th>Notes</th></tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>Plain Agent class</td><td>No orchestration needed</td></tr>
          <tr><td>2-5</td><td>Sequential, Concurrent</td><td>Simple coordination</td></tr>
          <tr><td>5-20</td><td>Hierarchical, MoA, Mesh</td><td>Medium complexity</td></tr>
          <tr><td>20-50</td><td>GraphWorkflow, Star</td><td>Structured dependencies</td></tr>
          <tr><td>50-100</td><td>ForestSwarm, Hybrid</td><td>Large agent pools</td></tr>
          <tr><td>100+</td><td>Hybrid with Gossip consensus</td><td>Factory scale</td></tr>
        </tbody>
      </table>

      <h3>Use Case Matrix</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Use Case</th><th>Primary Topology</th><th>Alternative</th><th>Why</th></tr>
        </thead>
        <tbody>
          <tr><td>Document pipeline</td><td>Sequential</td><td>GraphWorkflow</td><td>Linear refinement</td></tr>
          <tr><td>Multi-analyst research</td><td>Concurrent</td><td>MoA</td><td>Parallel perspectives</td></tr>
          <tr><td>Development team</td><td>Hierarchical</td><td>Hybrid</td><td>Manager/worker pattern</td></tr>
          <tr><td>Expert consultation</td><td>MoA</td><td>GroupChat</td><td>Synthesis needed</td></tr>
          <tr><td>Build system</td><td>GraphWorkflow</td><td>Sequential</td><td>Complex dependencies</td></tr>
          <tr><td>Customer routing</td><td>ForestSwarm</td><td>Star</td><td>Semantic matching</td></tr>
          <tr><td>Design review</td><td>GroupChat</td><td>MajorityVoting</td><td>Discussion needed</td></tr>
          <tr><td>Quality gate</td><td>MajorityVoting</td><td>MoA</td><td>Consensus required</td></tr>
          <tr><td>Full audit</td><td>HeavySwarm</td><td>Hierarchical</td><td>Comprehensive analysis</td></tr>
        </tbody>
      </table>
    </section>

    <hr class="section-divider divider-checkpoint">

    <!-- Mental Models Section -->
    <section id="mental-models">
      <h2><span style="font-weight: 700;">Men</span>tal Models</h2>

      <h3>Mental Model 1: The Factory Floor</h3>

      <p>Think of swarm topologies like a manufacturing facility.</p>

      <div class="ascii-diagram">
+-------------------------------------------------------------------+
|                        FACTORY FLOOR MODEL                         |
+-------------------------------------------------------------------+
|                                                                   |
|  SEQUENTIAL = Assembly Line                                       |
|  +-------+     +-------+     +-------+     +-------+              |
|  |Station| --> |Station| --> |Station| --> |Product|              |
|  |   1   |     |   2   |     |   3   |     |       |              |
|  +-------+     +-------+     +-------+     +-------+              |
|  Work flows linearly through stations                             |
|                                                                   |
|  CONCURRENT = Parallel Workstations                               |
|  +-------+  +-------+  +-------+                                  |
|  |Work A |  |Work B |  |Work C |  --> All finish --> Collect      |
|  +-------+  +-------+  +-------+                                  |
|  Independent work, collected at end                               |
|                                                                   |
|  HIERARCHICAL = Management Structure                              |
|         [Factory Manager]                                         |
|              /    \                                               |
|      [Line Lead] [Line Lead]                                      |
|         /  \         /  \                                         |
|     [W1] [W2]    [W3] [W4]                                        |
|  Manager coordinates, workers execute                             |
|                                                                   |
|  MESH = Flexible Manufacturing Cell                               |
|  Any station can send work to any other                           |
|  Self-organizing based on demand                                  |
|                                                                   |
+-------------------------------------------------------------------+
      </div>

      <h3>Mental Model 2: The Orchestra</h3>

      <p>Each topology is a different musical arrangement.</p>

      <div class="ascii-diagram">
+-------------------------------------------------------------------+
|                        ORCHESTRA MODEL                             |
+-------------------------------------------------------------------+
|                                                                   |
|  SEQUENTIAL = Round (Row, Row, Row Your Boat)                     |
|  One section starts, next joins, next joins...                    |
|                                                                   |
|  CONCURRENT = Full Orchestra Tutti                                |
|  All sections play simultaneously                                 |
|                                                                   |
|  HIERARCHICAL = Conductor + Sections                              |
|  Conductor coordinates, section leaders manage players            |
|                                                                   |
|  MIXTURE-OF-AGENTS = Soloists + Orchestra                         |
|  Each soloist plays their part, orchestra combines                |
|                                                                   |
|  GROUPCHAT = Jazz Improvisation                                   |
|  Musicians trade solos, respond to each other                     |
|                                                                   |
+-------------------------------------------------------------------+
      </div>

      <h3>Mental Model 3: The Nervous System</h3>

      <p>Topologies mirror different neural architectures.</p>

      <div class="ascii-diagram">
+-------------------------------------------------------------------+
|                    NERVOUS SYSTEM MODEL                            |
+-------------------------------------------------------------------+
|                                                                   |
|  SEQUENTIAL = Reflex Arc                                          |
|  Stimulus -> Sensory Neuron -> Interneuron -> Motor Neuron        |
|  Direct pathway, predictable response                             |
|                                                                   |
|  HIERARCHICAL = Brain Hierarchy                                   |
|  Cortex (planning) -> Basal Ganglia (coordination) -> Motor       |
|  Higher centers coordinate lower centers                          |
|                                                                   |
|  MESH = Neural Network                                            |
|  Distributed processing, no single control point                  |
|  Emergent behavior from connections                               |
|                                                                   |
|  GOSSIP = Hormone System                                          |
|  Slow broadcast, eventually reaches all cells                     |
|  No direct addressing, chemical signals spread                    |
|                                                                   |
+-------------------------------------------------------------------+
      </div>
    </section>

    <hr class="section-divider divider-checkpoint">

    <!-- Checkpoints Section -->
    <section id="checkpoints">
      <h2><span style="font-weight: 700;">Che</span>ckpoints</h2>

      <!-- Checkpoint 1 -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint 1: After Topology Selection</div>
        <p><strong>Where you are:</strong> You've chosen a topology based on your use case.</p>
        <p><strong>Verify your state:</strong></p>
        <div class="code-block" style="background: #fefcf3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
          <pre style="margin: 0; overflow-x: auto;"><code># For Swarms Framework
from swarms.structs.swarm_router import SwarmType
available_types = [t.value for t in SwarmType]
print(f"Available topologies: {available_types}")</code></pre>
        </div>
        <p><strong>You should see:</strong></p>
        <ul>
          <li>Clear understanding of why your topology fits the use case</li>
          <li>Ability to articulate tradeoffs (latency vs parallelism, etc.)</li>
          <li>Confidence in agent count range</li>
        </ul>
        <p><strong>If unclear:</strong> Review the Decision Tree section. Start with Sequential/Concurrent for simple cases.</p>
      </div>

      <!-- Checkpoint 2 -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint 2: After Agent Configuration</div>
        <p><strong>Where you are:</strong> Agents are defined with roles and capabilities.</p>
        <p><strong>Verify your state:</strong></p>
        <div class="code-block" style="background: #fefcf3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
          <pre style="margin: 0; overflow-x: auto;"><code># Swarms Framework
for agent in agents:
    print(f"Agent: {agent.agent_name}")
    print(f"  Model: {agent.model_name}")
    print(f"  Tools: {len(agent.tools) if agent.tools else 0}")
    print(f"  System Prompt Length: {len(agent.system_prompt)}")</code></pre>
        </div>
        <p><strong>You should see:</strong></p>
        <ul>
          <li>Each agent has distinct role/system prompt</li>
          <li>Model selection matches task complexity</li>
          <li>Tools are assigned appropriately</li>
          <li>No duplicate agent names in pool</li>
        </ul>
      </div>

      <!-- Checkpoint 3 -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint 3: After First Execution</div>
        <p><strong>Where you are:</strong> Your swarm has completed one full task.</p>
        <p><strong>Verify your state:</strong></p>
        <div class="code-block" style="background: #fefcf3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
          <pre style="margin: 0; overflow-x: auto;"><code># Swarms Framework
print(f"Result length: {len(result)}")
print(f"Result preview: {result[:200]}...")

# Check for errors in output
if "error" in result.lower() or "failed" in result.lower():
    print("WARNING: Possible errors in output")</code></pre>
        </div>
        <p><strong>You should see:</strong></p>
        <ul>
          <li>Result is coherent and addresses task</li>
          <li>No agent errors or timeouts</li>
          <li>Execution time reasonable for topology</li>
        </ul>
      </div>

      <!-- Checkpoint 4 -->
      <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
        <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint 4: After Scaling</div>
        <p><strong>Where you are:</strong> Swarm is handling production load.</p>
        <p><strong>Verify your state:</strong></p>
        <div class="code-block" style="background: #fefcf3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
          <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
          <pre style="margin: 0; overflow-x: auto;"><code># Claude-Flow with metrics
npx claude-flow@v3alpha perf diagnose
npx claude-flow@v3alpha swarm status --detailed</code></pre>
        </div>
        <p><strong>You should see:</strong></p>
        <ul>
          <li>Latency within expected range for topology</li>
          <li>Memory usage stable/predictable</li>
          <li>No agent starvation/bottlenecks</li>
          <li>Consensus achieving consistently (if applicable)</li>
        </ul>
      </div>
    </section>

    <hr class="section-divider divider-warning">

    <!-- Troubleshooting Section -->
    <section id="troubleshooting">
      <h2><span style="font-weight: 700;">Tro</span>ubleshooting</h2>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Sequential Workflow: Chain breaks mid-execution</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Agent 1 completes -> Agent 2 fails -> Agent 3 never starts</p>
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Add retry logic per agent: <code>max_loops=3</code></li>
            <li>Implement per-agent fallback with <code>fallback_models</code></li>
            <li>Add checkpointing between agents to resume from failure point</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Concurrent Workflow: Inconsistent results from parallel agents</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Agent 1: "Price is $100", Agent 2: "Price is $150", Agent 3: "Price is $120"</p>
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Add aggregation step with a synthesizer agent</li>
            <li>Use MixtureOfAgents instead for built-in synthesis</li>
            <li>Add MajorityVoting for factual questions</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Hierarchical Swarm: Director bottleneck</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Director overwhelmed with 50+ workers, response times increasing</p>
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Add intermediate leaders: 1 director + 5 team leads + 10 workers each</li>
            <li>Reduce feedback loop frequency: <code>max_loops=2</code></li>
            <li>Switch to Hybrid topology with multiple hierarchies</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Mesh Network: Message storms in large mesh</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> N^2 communication complexity, network congestion</p>
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Use Gossip instead of full mesh: <code>fanout: 3</code></li>
            <li>Add message batching/throttling</li>
            <li>Consider Hierarchical for structured communication</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">Consensus never achieves</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Timeout: could not reach agreement</p>
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Increase timeout: <code>"timeout": 10000</code></li>
            <li>Lower threshold: <code>"threshold": 0.5</code></li>
            <li>Switch algorithm for scale: <code>"algorithm": "gossip"</code></li>
            <li>Check for network partitions or agent failures</li>
          </ol>
        </div>
      </details>

      <details class="troubleshoot" style="border: 1px solid #c97065; border-radius: 8px; margin: 1rem 0;">
        <summary style="background: #fef6f5; padding: 1rem; cursor: pointer; color: #c97065; font-weight: 600;">NATS/Station: Agent not appearing in mesh</summary>
        <div style="padding: 1rem;">
          <p><strong>Symptom:</strong> Agent registered locally but not visible to other stations</p>
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Check station registration: <code>stn lattice status</code></li>
            <li>Verify agent name uniqueness across mesh</li>
            <li>Check presence heartbeat: <code>stn lattice presence</code></li>
            <li>Review conflict detection logs</li>
          </ol>
        </div>
      </details>

      <h3>General Debugging Commands</h3>
      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Claude-Flow diagnostics
npx claude-flow@v3alpha doctor
npx claude-flow@v3alpha perf diagnose
npx claude-flow@v3alpha perf bottlenecks
npx claude-flow@v3alpha logs --level error

# Station diagnostics
stn doctor
stn status
stn lattice status

# CCSwarm diagnostics
ccswarm doctor
ccswarm health --agent &lt;name&gt;
CCSWARM_LOG_LEVEL=debug ccswarm start</code></pre>
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Integration Section -->
    <section id="integration">
      <h2><span style="font-weight: 700;">Int</span>egration Patterns</h2>

      <h3>Pattern 1: Sequential + Concurrent</h3>

      <p><strong>Use case:</strong> Research pipeline with parallel analysis.</p>

      <div class="ascii-diagram">
        +----------------+
        |   Researcher   |  Sequential: Data Collection
        +-------+--------+
                |
    +-----------+-----------+
    |           |           |
    v           v           v
+-------+   +-------+   +-------+
|Analyst|   |Analyst|   |Analyst|  Concurrent: Analysis
|   1   |   |   2   |   |   3   |
+---+---+   +---+---+   +---+---+
    |           |           |
    +-----------+-----------+
                |
                v
        +-------+-------+
        |  Synthesizer  |  Sequential: Synthesis
        +---------------+
      </div>

      <div class="code-block" style="background: #f0ebe3; border-radius: 6px; padding: 1rem; position: relative; font-family: 'SF Mono', Monaco, monospace; margin: 1rem 0;">
        <button class="copy-btn" onclick="copyCode(this)" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2a7d7d; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer;">Copy</button>
        <pre style="margin: 0; overflow-x: auto;"><code># Implementation with AgentRearrange
workflow = AgentRearrange(
    agents=[researcher, analyst1, analyst2, analyst3, synthesizer],
    flow="researcher -> analyst1, analyst2, analyst3 -> synthesizer",
)</code></pre>
      </div>

      <h3>Pattern 2: Hierarchical + MoA</h3>

      <p><strong>Use case:</strong> Expert consultation with management oversight.</p>

      <div class="ascii-diagram">
             +-------------+
             |   Manager   |  Hierarchical: Coordination
             +------+------+
                    |
       +------------+------------+
       |                         |
       v                         v
+------+------+           +------+------+
|Expert Team 1|           |Expert Team 2|  MoA: Each team
|   (MoA)     |           |    (MoA)    |
+------+------+           +------+------+
       |                         |
+------+------+           +------+------+
| Aggregator 1|           | Aggregator 2|
+------+------+           +------+------+
       |                         |
       +------------+------------+
                    |
                    v
             +------+------+
             |Final Synth. |
             +-------------+
      </div>

      <h3>Pattern 3: ForestSwarm + GraphWorkflow</h3>

      <p><strong>Use case:</strong> Dynamic routing with complex dependencies.</p>

      <div class="ascii-diagram">
+-------+     +-------------+     +---------------+
| Task  | --> | ForestSwarm | --> | Best Agent    |
+-------+     | (Routing)   |     | for this task |
              +-------------+     +-------+-------+
                                          |
                                          v
                               +----------+----------+
                               | GraphWorkflow       |
                               | (Agent executes     |
                               |  with dependencies) |
                               +---------------------+
      </div>
    </section>

    <hr class="section-divider divider-procedure">

    <!-- Performance Section -->
    <section id="performance">
      <h2><span style="font-weight: 700;">Per</span>formance Comparison Tables</h2>

      <h3>Latency Comparison</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Topology</th><th>Latency Formula</th><th>Example (3 agents @ 2s each)</th></tr>
        </thead>
        <tbody>
          <tr><td>Sequential</td><td>Sum(all agents)</td><td>6s</td></tr>
          <tr><td>Concurrent</td><td>Max(all agents)</td><td>2s</td></tr>
          <tr><td>Hierarchical</td><td>Director + Max(workers)</td><td>~3s</td></tr>
          <tr><td>MoA</td><td>Max(experts) + Aggregator</td><td>~4s</td></tr>
          <tr><td>GraphWorkflow</td><td>Critical path</td><td>Varies</td></tr>
          <tr><td>Ring</td><td>N * per-hop latency</td><td>~6s (full pass)</td></tr>
        </tbody>
      </table>

      <h3>Throughput Comparison</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Topology</th><th>Tasks/Hour (10 agents)</th><th>Scaling Factor</th></tr>
        </thead>
        <tbody>
          <tr><td>Sequential</td><td>60</td><td>O(1/n)</td></tr>
          <tr><td>Concurrent</td><td>600</td><td>O(n)</td></tr>
          <tr><td>Hierarchical</td><td>300</td><td>O(n/2)</td></tr>
          <tr><td>Mesh</td><td>500</td><td>O(n) with overhead</td></tr>
          <tr><td>ForestSwarm</td><td>550</td><td>O(n) with routing</td></tr>
        </tbody>
      </table>

      <h3>Memory Usage Comparison</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Topology</th><th>Memory Factor</th><th>Notes</th></tr>
        </thead>
        <tbody>
          <tr><td>Sequential</td><td>1x</td><td>One agent active</td></tr>
          <tr><td>Concurrent</td><td>Nx</td><td>All agents active</td></tr>
          <tr><td>Hierarchical</td><td>1.5x</td><td>Director + active workers</td></tr>
          <tr><td>Mesh</td><td>2x</td><td>Connection overhead</td></tr>
          <tr><td>MoA</td><td>Nx + 1</td><td>Experts + aggregator</td></tr>
        </tbody>
      </table>

      <h3>Cost Comparison (API Calls)</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Topology</th><th>API Calls per Task</th><th>Cost Factor</th></tr>
        </thead>
        <tbody>
          <tr><td>Sequential</td><td>N (number of agents)</td><td>1x</td></tr>
          <tr><td>Concurrent</td><td>N</td><td>1x</td></tr>
          <tr><td>Hierarchical</td><td>N + coordination</td><td>1.2x</td></tr>
          <tr><td>MoA</td><td>N + 1 (aggregator)</td><td>1.1x</td></tr>
          <tr><td>MajorityVoting</td><td>N</td><td>1x</td></tr>
          <tr><td>HeavySwarm</td><td>5+ phases</td><td>2-3x</td></tr>
        </tbody>
      </table>
    </section>

    <hr class="section-divider">

    <!-- Source Attribution -->
    <section id="sources">
      <h2><span style="font-weight: 700;">Sou</span>rce Attribution</h2>

      <h3>Primary Sources</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Source</th><th>Framework</th><th>Key Contribution</th></tr>
        </thead>
        <tbody>
          <tr><td>031-claude-flow-enterprise.md</td><td>Claude-Flow v3</td><td>5 topologies, consensus algorithms, 54+ agents</td></tr>
          <tr><td>032-ccswarm-rust.md</td><td>CCSwarm</td><td>Type-state patterns, channel coordination</td></tr>
          <tr><td>035-swarms-framework.md</td><td>Swarms</td><td>14+ topologies, SwarmRouter</td></tr>
          <tr><td>037-station-nats.md</td><td>Station</td><td>NATS messaging backbone, Lattice mesh</td></tr>
        </tbody>
      </table>

      <h3>Framework Details</h3>
      <table class="comparison-table">
        <thead>
          <tr><th>Framework</th><th>Version</th><th>Language</th><th>License</th></tr>
        </thead>
        <tbody>
          <tr><td>Claude-Flow</td><td>3.0.0-alpha.104</td><td>TypeScript</td><td>MIT</td></tr>
          <tr><td>CCSwarm</td><td>0.3.8</td><td>Rust</td><td>MIT</td></tr>
          <tr><td>Swarms</td><td>8.9.0</td><td>Python</td><td>Apache 2.0</td></tr>
          <tr><td>Station</td><td>Latest</td><td>Go</td><td>Apache 2.0</td></tr>
        </tbody>
      </table>
    </section>

    <hr class="section-divider">

    <!-- The Bottom Line -->
    <blockquote style="border-left: 3px solid #2a7d7d; padding-left: 1rem; margin: 2rem 0; font-style: italic; color: #5c4b3a; font-size: 1.1em;">
      "The right topology is the one that matches your coordination pattern. Sequential for pipelines, concurrent for speed, hierarchical for control, mesh for resilience. Master these patterns and you can orchestrate any scale of agent collaboration."
    </blockquote>

    <!-- Milestone -->
    <div class="milestone" style="background: linear-gradient(90deg, #6b9b7a 0%, #2a7d7d 100%); color: white; padding: 1rem 1.5rem; border-radius: 8px; text-align: center; margin: 2rem 0;">
      14+ topologies documented. Start with Sequential or Concurrent. Scale to Hierarchical when you need control. Go Hybrid at factory scale. The patterns are here - now build your swarms.
    </div>

    <!-- Related Pages -->
    <div class="related-pages" style="margin-top: 2rem; padding: 1rem; background: #f9f6f0; border-radius: 8px;">
      <h4 style="margin-top: 0;">Related Architecture Documents</h4>
      <ul>
        <li><a href="architecture-primitives.html">Architecture Primitives</a> - The atomic building blocks</li>
        <li><a href="architecture-composition-rules.html">Composition Rules</a> - How primitives combine</li>
        <li><a href="architecture-domain-isolation.html">Domain Isolation</a> - Running parallel isolated instances</li>
        <li><a href="architecture-complexity-ladder.html">Complexity Ladder</a> - Capability progression (Levels 0-7)</li>
      </ul>
      <h4>Related Mastery Documents</h4>
      <ul>
        <li><a href="mastery-multi-agent.html">Multi-Agent Mastery</a> - Multi-agent patterns overview</li>
        <li><a href="mastery-ralph-complete.html">Ralph Pattern Complete</a> - Integrates with topologies</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <div class="footer-nav" style="display: flex; justify-content: space-between; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #e0d5c5;">
      <a href="architecture-complexity-ladder.html">Prev: Complexity Ladder</a>
      <a href="mastery-multi-agent.html">Next: Multi-Agent Mastery</a>
    </div>

  </div>

  <script src="../js/copy-code.js"></script>
  <script src="../js/search.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      setTimeout(() => button.textContent = 'Copy', 2000);
    }
  </script>
</body>
</html>
