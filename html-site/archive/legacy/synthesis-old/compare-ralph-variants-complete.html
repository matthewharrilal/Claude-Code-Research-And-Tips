<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta data-pagefind-meta="section" content="Synthesis">
  <meta data-pagefind-meta="category" content="Comparisons">
  <title>Complete Ralph Variants Comparison - Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/search.css">
</head>
<body>
  <!-- Search Modal -->
  <div class="search-modal" id="searchModal" aria-hidden="true">
    <div class="search-overlay" onclick="closeSearch()"></div>
    <div class="search-content">
      <div class="search-header">
        <div class="search-input-wrapper">
          <span class="search-icon-input">&#128269;</span>
          <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off" />
          <kbd class="search-kbd">ESC</kbd>
        </div>
      </div>
      <div class="search-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="synthesis">Synthesis</button>
        <button class="filter-btn" data-filter="extractions">Extractions</button>
        <button class="filter-btn" data-filter="journeys">Journeys</button>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-empty"><p>Start typing to search... (Press Cmd+K anytime)</p></div>
      </div>
      <div class="search-footer">
        <span>Up/Down Navigate</span><span>Enter Select</span><span>ESC Close</span>
      </div>
    </div>
  </div>

  <button class="search-trigger" onclick="openSearch()" aria-label="Search" style="float: right; margin-bottom: 1rem;">
    <span class="search-icon">Cmd+K</span>
    <span class="search-text">Search</span>
  </button>

  <div class="wide-container">
    <!-- Breadcrumb Navigation -->
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="synthesis-index.html">Synthesis</a>
      <span>/</span>
      <a href="compare-master.html">Comparisons</a>
      <span>/</span>
      <span>Ralph Variants</span>
    </nav>

    <!-- You Are Here Context Box -->
    <div class="you-are-here" style="background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%); border-left: 4px solid #2a7d7d; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
      <h3 style="color: #2a7d7d; margin-top: 0; font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px;">You Are Here</h3>
      <p style="margin-bottom: 0.5rem;"><strong><span class="b">Com</span>plete <span class="b">Ral</span>ph <span class="b">Var</span>iants <span class="b">Com</span>parison</strong> - From basic loops to multi-agent validation. This document synthesizes ~4,000 lines of extraction documentation into a single decision-making resource.</p>
      <div class="ascii-diagram" style="font-size: 0.85em; margin-top: 1rem;">
CLAUDE CODE ORCHESTRATION PATTERNS
===================================
Level 0: Single session                   <- Entry point
Level 1: CLAUDE.md + context              <- Basic persistence
Level 2: Extended sessions                <- Context engineering
Level 3-4: RALPH VARIANTS                 <- THIS DOCUMENT COVERS
Level 5-6: Multi-agent (CC Mirror)        <- Advanced orchestration
Level 7: Factory-scale (Gas Town)         <- Team-equivalent</div>
    </div>

    <h1><span class="b">Com</span>plete <span class="b">Ral</span>ph <span class="b">Var</span>iants <span class="b">Com</span>parison</h1>

    <!-- Table of Contents -->
    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#executive-summary">Executive Summary</a></li>
        <li><a href="#evolution-story">Evolution Story</a></li>
        <li><a href="#five-variants">The Five Variants</a>
          <ul>
            <li><a href="#original-ralph">Original Ralph</a></li>
            <li><a href="#production-ralph">Production Ralph</a></li>
            <li><a href="#marathon-ralph">Marathon Ralph</a></li>
            <li><a href="#lisa">Lisa (Planning)</a></li>
            <li><a href="#zeroshot">Zeroshot (Multi-Agent)</a></li>
          </ul>
        </li>
        <li><a href="#feature-matrix">Feature Comparison Matrix</a></li>
        <li><a href="#decision-tree">Decision Tree</a></li>
        <li><a href="#cost-complexity">Cost and Complexity Trade-offs</a></li>
        <li><a href="#migration-paths">Migration Paths</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <!-- Executive Summary -->
    <section id="executive-summary">
      <h2><span class="b">Exec</span>utive <span class="b">Sum</span>mary</h2>

      <p><strong>Ralph Wiggum</strong> is not one pattern but a <strong>family</strong> of related patterns for autonomous AI coding. All share the same DNA:</p>

      <blockquote>
        <p><strong>Fresh context iteration with external state persistence</strong></p>
      </blockquote>

      <p>But each variant optimizes for different use cases:</p>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Variant</th><th>Creator</th><th>Focus</th><th>Complexity</th><th>Best For</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Original Ralph</strong></td><td>Geoffrey Huntley</td><td>Foundational loop</td><td>Level 3</td><td>Learning, simple tasks</td></tr>
            <tr><td><strong>Production Ralph</strong></td><td>Ryan Carson</td><td>PRD-driven stories</td><td>Level 3-4</td><td>Feature development</td></tr>
            <tr><td><strong>Marathon Ralph</strong></td><td>Stephen Rayner</td><td>Full SDLC automation</td><td>Level 5</td><td>Complete applications</td></tr>
            <tr><td><strong>Lisa</strong></td><td>BLEN Engineering</td><td>Specification interviews</td><td>Level 3.5</td><td>PRD creation</td></tr>
            <tr><td><strong>Zeroshot</strong></td><td>covibes</td><td>Multi-agent validation</td><td>Level 5-6</td><td>Complex with guarantees</td></tr>
          </tbody>
        </table>
      </div>

      <h3>The Fundamental Insight</h3>

      <blockquote>
        <p>"<span class="b">Fre</span>sh <span class="b">con</span>text <span class="b">bea</span>ts <span class="b">acc</span>umulated <span class="b">con</span>text. <span class="b">Mem</span>ory <span class="b">liv</span>es in <span class="b">fil</span>es, not in the <span class="b">mod</span>el."</p>
        <cite>-- Geoffrey Huntley</cite>
      </blockquote>

      <h3>Quick Decision Matrix</h3>
      <div class="ascii-diagram">
NEED SOMETHING SIMPLE?
    -> Original Ralph

NEED STRUCTURED FEATURE DEVELOPMENT?
    -> Production Ralph

NEED SPECIFICATION HELP FIRST?
    -> Lisa -> then Ralph

NEED FULL SDLC WITH TESTS?
    -> Marathon Ralph

NEED VALIDATION GUARANTEES?
    -> Zeroshot</div>
    </section>

    <hr class="section-divider">

    <!-- Evolution Story -->
    <section id="evolution-story">
      <h2><span class="b">Evol</span>ution <span class="b">Sto</span>ry</h2>

      <h3>The Genealogy of Ralph</h3>
      <div class="ascii-diagram">
                RALPH ECOSYSTEM EVOLUTION

    2024-2025                          2025-2026
    ---------                          ---------

    +------------------------+
    |   GEOFFREY HUNTLEY     |
    |   ghuntley.com/ralph   |
    |                        |
    |   "while :; do cat     |
    |    PROMPT.md | claude  |
    |    ; done"             |
    +-----------+------------+
                |
                |  THE FOUNDATIONAL INSIGHT
                |  - Fresh context beats accumulated
                |  - External memory beats internal
                |  - Iteration beats perfection
                |
        +-------+----------+------------------+
        |                  |                  |
        v                  v                  v
+---------------+  +---------------+  +---------------+
| MATT POCOCK   |  | RYAN CARSON   |  | COMMUNITY     |
| Popularizer   |  | Production    |  | Variants      |
|               |  | Implementation|  |               |
| - Viral video |  |               |  | - Marathon    |
| - 11 tips     |  | - snarktank/  |  | - Lisa        |
| - PRD format  |  |   ralph       |  | - Zeroshot    |
|               |  | - prd.json    |  | - Compounding |
+---------------+  +---------------+  +---------------+
        |                  |                  |
        +------------------+------------------+
                           |
                           v
               +------------------------+
               |   ANTHROPIC OFFICIAL   |
               |   RALPH-WIGGUM PLUGIN  |
               |                        |
               |   /ralph-loop          |
               |   /cancel-ralph        |
               +------------------------+</div>

      <h3>The Context Rot Problem</h3>
      <p>Geoffrey Huntley observed a fundamental problem with extended AI sessions:</p>

      <div class="ascii-diagram">
THE CONTEXT ROT PROBLEM

Session Hour 1:  Quality: ████████████████████ 100%
Session Hour 2:  Quality: ████████████████░░░░  80%
Session Hour 4:  Quality: ██████████████░░░░░░  70%
Session Hour 8:  Quality: ██████████░░░░░░░░░░  50%
Session Hour 12: Quality: ██████░░░░░░░░░░░░░░  30%

Root causes:
- Context windows fill up
- Attention dilutes across tokens
- Lossy internal summarization
- Recency bias dominates
- Original goals become fuzzy</div>

      <p><strong>Huntley's solution:</strong> Instead of fighting context limits, embrace many short sessions with external memory.</p>
      <p>The result: <strong>Fresh context every iteration, peak quality every time.</strong></p>
    </section>

    <hr class="section-divider">

    <!-- The Five Variants -->
    <section id="five-variants">
      <h2><span class="b">The</span> Five <span class="b">Var</span>iants: Deep Dive</h2>

      <!-- Original Ralph -->
      <section id="original-ralph" style="border-left: 4px solid #2a7d7d; padding-left: 1rem; margin: 2rem 0;">
        <h3>Original Ralph (Geoffrey Huntley)</h3>

        <div class="table-responsive">
          <table>
            <tbody>
              <tr><td><strong>Creator</strong></td><td>Geoffrey Huntley</td></tr>
              <tr><td><strong>Source</strong></td><td>ghuntley.com/ralph</td></tr>
              <tr><td><strong>Complexity</strong></td><td>Level 3</td></tr>
              <tr><td><strong>Philosophy</strong></td><td>"Iteration over perfection"</td></tr>
            </tbody>
          </table>
        </div>

        <h4>The Core Pattern</h4>
        <p>At its absolute simplest:</p>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code>while :; do cat PROMPT.md | claude-code ; done</code></pre>
        </div>
        <p><strong>Everything else is scaffolding around this fundamental loop.</strong></p>

        <h4>Architecture</h4>
        <div class="ascii-diagram">
ORIGINAL RALPH FLOW
====================
1. Start with FRESH context (new Claude instance)
           |
2. Read task state from files
   (prd.json, progress.txt, git history)
           |
3. Pick highest priority incomplete task
           |
4. Implement that ONE task
           |
5. Run verification (tests, typecheck)
           |
6. If pass -> commit, update prd.json
   If fail -> log learnings, retry
           |
7. Append to progress.txt
           |
8. Check completion condition
   All done? -> Output COMPLETE -> EXIT
   Not done? -> Loop continues</div>

        <h4>Strengths</h4>
        <ul>
          <li><strong>Minimal setup</strong> - 15 minutes to first run</li>
          <li><strong>Easy to understand</strong> - one bash command at core</li>
          <li><strong>Low overhead</strong> - no external dependencies</li>
          <li><strong>Foundation for all variants</strong> - concepts transfer</li>
        </ul>

        <h4>Weaknesses</h4>
        <ul>
          <li>No structured task format - manual PRD creation</li>
          <li>Limited memory architecture - only progress.txt</li>
          <li>No cross-run learning - each feature starts fresh</li>
          <li>Basic verification - relies on you defining checks</li>
        </ul>

        <h4>Best For</h4>
        <ul>
          <li>Learning Ralph concepts</li>
          <li>Simple, well-defined tasks</li>
          <li>Quick prototypes</li>
          <li>Budget-constrained projects</li>
        </ul>
      </section>

      <!-- Production Ralph -->
      <section id="production-ralph" style="border-left: 4px solid #6b9b7a; padding-left: 1rem; margin: 2rem 0;">
        <h3>Production Ralph (Ryan Carson / snarktank)</h3>

        <div class="table-responsive">
          <table>
            <tbody>
              <tr><td><strong>Creator</strong></td><td>Ryan Carson (@ryancarson)</td></tr>
              <tr><td><strong>Source</strong></td><td>github.com/snarktank/ralph (4.9k stars)</td></tr>
              <tr><td><strong>Complexity</strong></td><td>Level 3-4</td></tr>
              <tr><td><strong>Philosophy</strong></td><td>"Story sizing is THE success factor"</td></tr>
            </tbody>
          </table>
        </div>

        <h4>What Makes It "Production"</h4>
        <div class="table-responsive">
          <table>
            <thead>
              <tr><th>Component</th><th>Purpose</th><th>Production Benefit</th></tr>
            </thead>
            <tbody>
              <tr><td>prd.json</td><td>Structured task format</td><td>Parseable, versionable</td></tr>
              <tr><td>SKILL.md files</td><td>Reusable agent instructions</td><td>Consistent behavior</td></tr>
              <tr><td>progress.txt</td><td>Iteration memory</td><td>Learnings compound</td></tr>
              <tr><td>AGENTS.md</td><td>Long-term patterns</td><td>Institutional knowledge</td></tr>
              <tr><td>Archive system</td><td>Run history</td><td>Cross-run learning</td></tr>
            </tbody>
          </table>
        </div>

        <h4>The prd.json Standard</h4>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code>{
  "project": "MyApp",
  "branchName": "ralph/feature-name-kebab-case",
  "description": "Feature description",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add users table schema",
      "description": "As a developer, I need a users table",
      "acceptanceCriteria": [
        "Users table created with id, email columns",
        "Migration uses IF NOT EXISTS",
        "npm run typecheck passes",
        "npm run test passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    }
  ]
}</code></pre>
        </div>

        <h4>Story Sizing: The Iron Rule</h4>
        <blockquote>
          <p>"<span class="b">Eac</span>h <span class="b">sto</span>ry <span class="b">mus</span>t be <span class="b">com</span>pletable in <span class="b">ONE</span> <span class="b">ite</span>ration (~one <span class="b">con</span>text <span class="b">win</span>dow)."</p>
        </blockquote>

        <p><strong>The 2-3 Sentence Rule:</strong></p>
        <ul>
          <li>If you can't describe it in 2-3 sentences, split it</li>
          <li>If it takes multiple context windows, it's too big</li>
        </ul>

        <h4>Memory Architecture</h4>
        <div class="table-responsive">
          <table>
            <thead>
              <tr><th>Layer</th><th>Location</th><th>Lifespan</th><th>Purpose</th></tr>
            </thead>
            <tbody>
              <tr><td><strong>Long-term</strong></td><td>AGENTS.md</td><td>Permanent</td><td>API patterns, interdependencies</td></tr>
              <tr><td><strong>Short-term</strong></td><td>progress.txt</td><td>Per-feature</td><td>Iteration learnings</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Marathon Ralph -->
      <section id="marathon-ralph" style="border-left: 4px solid #c49052; padding-left: 1rem; margin: 2rem 0;">
        <h3>Marathon Ralph (Stephen Rayner / gruckion)</h3>

        <div class="table-responsive">
          <table>
            <tbody>
              <tr><td><strong>Creator</strong></td><td>Stephen Rayner (@gruckion)</td></tr>
              <tr><td><strong>Source</strong></td><td>github.com/gruckion/marathon-ralph</td></tr>
              <tr><td><strong>Complexity</strong></td><td>Level 5</td></tr>
              <tr><td><strong>Philosophy</strong></td><td>"Spec to tested application"</td></tr>
            </tbody>
          </table>
        </div>

        <h4>SDLC Cycle</h4>
        <div class="ascii-diagram">
MARATHON RALPH SDLC CYCLE

VERIFY -> PLAN -> CODE -> TEST -> QA -> EXIT
   |                                   |
   +----------- REPEAT ---------------+

For EACH Linear issue:</div>

        <div class="table-responsive">
          <table>
            <thead>
              <tr><th>Phase</th><th>Agent</th><th>Purpose</th><th>Model</th></tr>
            </thead>
            <tbody>
              <tr><td>VERIFY</td><td>verify-agent</td><td>Ensure codebase health</td><td>Sonnet</td></tr>
              <tr><td>PLAN</td><td>plan-agent</td><td>Create implementation strategy</td><td>Opus</td></tr>
              <tr><td>CODE</td><td>code-agent</td><td>Implement the feature</td><td>Opus</td></tr>
              <tr><td>TEST</td><td>test-agent</td><td>Write unit + integration tests</td><td>Opus</td></tr>
              <tr><td>QA</td><td>qa-agent</td><td>Write E2E tests (web projects)</td><td>Opus</td></tr>
              <tr><td>EXIT</td><td>exit-agent</td><td>Update Linear, reset state</td><td>Haiku</td></tr>
            </tbody>
          </table>
        </div>

        <h4>Circuit Breaker Pattern</h4>
        <p>Prevents infinite retry loops:</p>
        <div class="table-responsive">
          <table>
            <thead>
              <tr><th>Limit Type</th><th>Default</th><th>Purpose</th></tr>
            </thead>
            <tbody>
              <tr><td>Verify phase attempts</td><td>3</td><td>Don't loop forever on failing tests</td></tr>
              <tr><td>Plan phase attempts</td><td>3</td><td>Recognize planning failures</td></tr>
              <tr><td>Code phase attempts</td><td>3</td><td>Recognize implementation blocks</td></tr>
              <tr><td>Test phase attempts</td><td>5</td><td>More room for test iteration</td></tr>
              <tr><td>Consecutive failures</td><td>5</td><td>Recognize systemic issues</td></tr>
            </tbody>
          </table>
        </div>

        <h4>Key Feature: Linear Integration</h4>
        <p><strong>Linear is required</strong> - Marathon Ralph uses it for project creation, issue decomposition, state persistence, and progress tracking.</p>
      </section>

      <!-- Lisa -->
      <section id="lisa" style="border-left: 4px solid #5c4b3a; padding-left: 1rem; margin: 2rem 0;">
        <h3>Lisa (BLEN Engineering)</h3>

        <div class="table-responsive">
          <table>
            <tbody>
              <tr><td><strong>Creator</strong></td><td>BLEN Engineering (Mike Endale)</td></tr>
              <tr><td><strong>Source</strong></td><td>github.com/blencorp/lisa</td></tr>
              <tr><td><strong>Complexity</strong></td><td>Level 3.5</td></tr>
              <tr><td><strong>Philosophy</strong></td><td>"Lisa plans. Ralph does."</td></tr>
            </tbody>
          </table>
        </div>

        <h4>The Planning Gap Lisa Fills</h4>
        <p>Most Ralph failures trace back to poor specifications:</p>
        <div class="ascii-diagram">
COMMON RALPH FAILURE MODES           LISA PREVENTION
-------------------------            ---------------
Tasks too large                      Interview forces decomposition
Vague acceptance criteria            Systematic criteria extraction
Missing edge cases                   Dedicated edge case questions
Wrong task order                     Implementation phases defined
No verification steps                Built-in verification in output</div>

        <h4>The Interview Workflow</h4>
        <p>Lisa conducts systematic, in-depth interviews (15-30 questions) covering:</p>
        <ul>
          <li><strong>Scope Definition</strong> - Explicit boundaries, MVP vs future, out of scope</li>
          <li><strong>User Stories</strong> - Discrete features, acceptance criteria, verification</li>
          <li><strong>Technical Implementation</strong> - Data models, API endpoints, error handling</li>
          <li><strong>User Experience</strong> - User flows, edge cases, error states</li>
          <li><strong>Trade-offs</strong> - Performance vs features, security vs convenience</li>
          <li><strong>Implementation Phases</strong> - 2-4 incremental steps with verification</li>
        </ul>

        <h4>Output Format</h4>
        <p>Lisa outputs are directly compatible with Production Ralph:</p>
        <ul>
          <li><code>docs/specs/{feature}.json</code> - Machine-readable (Ralph)</li>
          <li><code>docs/specs/{feature}.md</code> - Human-readable spec</li>
          <li><code>docs/specs/{feature}-progress.txt</code> - Phase tracking</li>
        </ul>
      </section>

      <!-- Zeroshot -->
      <section id="zeroshot" style="border-left: 4px solid #c97065; padding-left: 1rem; margin: 2rem 0;">
        <h3>Zeroshot (covibes)</h3>

        <div class="table-responsive">
          <table>
            <tbody>
              <tr><td><strong>Creator</strong></td><td>covibes</td></tr>
              <tr><td><strong>Source</strong></td><td>github.com/covibes/zeroshot</td></tr>
              <tr><td><strong>Complexity</strong></td><td>Level 5-6</td></tr>
              <tr><td><strong>Philosophy</strong></td><td>"Validators can't lie about code they didn't write"</td></tr>
            </tbody>
          </table>
        </div>

        <h4>The Blind Validation Insight</h4>
        <p>Single-agent systems have an inherent conflict of interest:</p>
        <div class="ascii-diagram">
TRADITIONAL RALPH:
Agent writes code -> Agent checks its own work -> Commits
                     |-- BIAS: Knows what it meant to do

ZEROSHOT:
Worker writes code -> Worker loses context access
                   -> Validators check BLIND
                   -> Validators see ONLY files, not history
                   -> Honest assessment without context bias</div>

        <h4>Multi-Agent Topology</h4>
        <div class="ascii-diagram">
                        +-------------------+
                        |    CONDUCTOR      |
                        | (Task Classifier) |
                        +--------+----------+
                                 |
              +------------------+------------------+
              |                                     |
     +--------v---------+               +-----------v----------+
     |     PLANNER      |               |    Direct to Worker  |
     | (Complex tasks)  |               |    (Simple tasks)    |
     +--------+---------+               +-----------+----------+
              |                                     |
              v                                     v
     +--------+---------+               +-----------+----------+
     |      WORKER      |               |       WORKER         |
     +--------+---------+               +-----------+----------+
              |                                     |
   +----------+----------+               +----------+----------+
   |          |          |               |                     |
   v          v          v               v                     v
+------+  +------+  +------+         +------+             +------+
|Valid1|  |Valid2|  |Valid3|         |Valid1|             |Valid2|
+------+  +------+  +------+         +------+             +------+
   |          |          |               |                     |
   +----------+----------+               +----------+----------+
              |                                     |
              v                                     v
        [Consensus?]                          [Consensus?]
              |                                     |
         ACCEPT/REJECT                        ACCEPT/REJECT</div>

        <h4>Complexity-Based Routing</h4>
        <div class="table-responsive">
          <table>
            <thead>
              <tr><th>Complexity</th><th>Resources</th><th>Validators</th></tr>
            </thead>
            <tbody>
              <tr><td>TRIVIAL</td><td>Single file change</td><td>None</td></tr>
              <tr><td>SIMPLE</td><td>Worker</td><td>1 generic</td></tr>
              <tr><td>STANDARD</td><td>Planner + Worker</td><td>2</td></tr>
              <tr><td>CRITICAL</td><td>Senior Planner + Worker</td><td>5 specialized</td></tr>
            </tbody>
          </table>
        </div>

        <h4>Provider Agnosticism</h4>
        <p>Switch AI providers without code changes:</p>
        <div class="code-block">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code>zeroshot providers                    # List available
zeroshot providers set-default codex  # Change default
zeroshot run 123 --provider gemini    # Override per-run</code></pre>
        </div>
        <p><strong>Supported:</strong> Claude, Codex, Gemini, Opencode</p>
      </section>
    </section>

    <hr class="section-divider">

    <!-- Feature Matrix -->
    <section id="feature-matrix">
      <h2><span class="b">Fea</span>ture <span class="b">Com</span>parison <span class="b">Mat</span>rix</h2>

      <h3>Core Capabilities</h3>
      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr><th>Feature</th><th>Original</th><th>Production</th><th>Marathon</th><th>Lisa</th><th>Zeroshot</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Fresh context loop</strong></td><td>Yes</td><td>Yes</td><td>Yes</td><td>N/A</td><td>Yes</td></tr>
            <tr><td><strong>External state</strong></td><td>Files</td><td>prd.json + AGENTS.md</td><td>Linear + JSON</td><td>State files</td><td>SQLite</td></tr>
            <tr><td><strong>Task format</strong></td><td>Free-form</td><td>Structured JSON</td><td>Linear issues</td><td>Interview</td><td>Issue/desc</td></tr>
            <tr><td><strong>Story sizing</strong></td><td>Manual</td><td>Methodology</td><td>Auto-decompose</td><td>Interview</td><td>Conductor</td></tr>
            <tr><td><strong>Verification</strong></td><td>Optional</td><td>In criteria</td><td>Mandatory phases</td><td>Outputs only</td><td>Blind validators</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Memory Architecture</h3>
      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr><th>Feature</th><th>Original</th><th>Production</th><th>Marathon</th><th>Lisa</th><th>Zeroshot</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Short-term</strong></td><td>progress.txt</td><td>progress.txt</td><td>State file</td><td>Interview state</td><td>Message bus</td></tr>
            <tr><td><strong>Long-term</strong></td><td>CLAUDE.md</td><td>AGENTS.md</td><td>Linear history</td><td>Output specs</td><td>SQLite ledger</td></tr>
            <tr><td><strong>Cross-run</strong></td><td>Manual</td><td>Archives</td><td>Linear</td><td>Specs persist</td><td>Cluster history</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Dependencies</h3>
      <div class="table-responsive">
        <table class="comparison-table">
          <thead>
            <tr><th>Feature</th><th>Original</th><th>Production</th><th>Marathon</th><th>Lisa</th><th>Zeroshot</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Claude Code</strong></td><td>Required</td><td>Required</td><td>Required</td><td>Required</td><td>Optional</td></tr>
            <tr><td><strong>External tools</strong></td><td>None</td><td>jq</td><td>Linear MCP</td><td>None</td><td>Node.js, gh</td></tr>
            <tr><td><strong>Provider lock-in</strong></td><td>Claude</td><td>Claude/Amp</td><td>Claude</td><td>Claude</td><td>None</td></tr>
            <tr><td><strong>Setup time</strong></td><td>15 min</td><td>30 min</td><td>1+ hour</td><td>10 min</td><td>30 min</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Decision Tree -->
    <section id="decision-tree">
      <h2><span class="b">Dec</span>ision <span class="b">Tr</span>ee</h2>

      <div class="ascii-diagram">
                    +-------------------------------------+
                    |   DO YOU HAVE A CLEAR SPECIFICATION |
                    |   WITH ACCEPTANCE CRITERIA?          |
                    +-----------------+-------------------+
                                      |
                          +-----------+-----------+
                          |                       |
                         YES                      NO
                          |                       |
                          |                       v
                          |         +-----------------------------+
                          |         |        USE LISA             |
                          |         |  to create the specification|
                          |         +--------------+--------------+
                          |                        |
                          |                        |
                          v                        v
          +---------------------------------------------------+
          |       DO YOU NEED INDEPENDENT VALIDATION?         |
          |       (Multiple agents checking work blindly)      |
          +-------------------------+-------------------------+
                                    |
                        +-----------+-----------+
                        |                       |
                       YES                      NO
                        |                       |
                        v                       |
          +-------------------------+           |
          |     USE ZEROSHOT        |           |
          |  Multi-agent validation |           |
          +-------------------------+           |
                                                |
                                                v
          +---------------------------------------------------+
          |       DO YOU NEED AUTOMATIC TEST GENERATION?      |
          |       (E2E, unit, integration tests created)      |
          +-------------------------+-------------------------+
                                    |
                        +-----------+-----------+
                        |                       |
                       YES                      NO
                        |                       |
                        v                       |
          +-------------------------+           |
          |   USE MARATHON RALPH    |           |
          |   Full SDLC automation  |           |
          |   (requires Linear)     |           |
          +-------------------------+           |
                                                |
                                                v
          +---------------------------------------------------+
          |       IS THIS A MULTI-STORY FEATURE?              |
          |       (More than 3-5 discrete tasks)              |
          +-------------------------+-------------------------+
                                    |
                        +-----------+-----------+
                        |                       |
                       YES                      NO
                        |                       |
                        v                       v
          +-------------------------+  +-------------------------+
          |  USE PRODUCTION RALPH   |  |   USE ORIGINAL RALPH    |
          |  PRD-driven stories     |  |   Simple, minimal loop  |
          +-------------------------+  +-------------------------+</div>

      <h3>Quick Reference Decision Matrix</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Your Situation</th><th>Best Choice</th><th>Why</th></tr>
          </thead>
          <tbody>
            <tr><td>Just learning Ralph</td><td><strong>Original</strong></td><td>Minimal complexity</td></tr>
            <tr><td>Have clear PRD, want execution</td><td><strong>Production</strong></td><td>Story-driven</td></tr>
            <tr><td>Need to create the PRD first</td><td><strong>Lisa -> Production</strong></td><td>Planning + execution</td></tr>
            <tr><td>Building from scratch, need tests</td><td><strong>Marathon</strong></td><td>Full SDLC</td></tr>
            <tr><td>Need validation guarantees</td><td><strong>Zeroshot</strong></td><td>Blind validators</td></tr>
            <tr><td>Cost is primary concern</td><td><strong>Original</strong></td><td>Minimal API usage</td></tr>
            <tr><td>Team environment, need audit</td><td><strong>Zeroshot</strong></td><td>SQLite logging</td></tr>
            <tr><td>Want Linear integration</td><td><strong>Marathon</strong></td><td>Native support</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Cost and Complexity -->
    <section id="cost-complexity">
      <h2><span class="b">Cost</span> and <span class="b">Com</span>plexity Trade-offs</h2>

      <h3>API Cost Comparison</h3>
      <p><strong>Assumptions:</strong> Average feature: 5 user stories, ~5,000 tokens input / ~2,000 tokens output per story, Claude Sonnet</p>

      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Variant</th><th>Stories x Iterations</th><th>Validators</th><th>Estimated API Cost</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Original</strong></td><td>5 x 2</td><td>0</td><td>~$0.50-1.00</td></tr>
            <tr><td><strong>Production</strong></td><td>5 x 2</td><td>0</td><td>~$0.50-1.00</td></tr>
            <tr><td><strong>Marathon</strong></td><td>5 x 6 phases</td><td>0</td><td>~$2.00-4.00</td></tr>
            <tr><td><strong>Lisa</strong></td><td>1 x interview</td><td>0</td><td>~$0.20-0.50</td></tr>
            <tr><td><strong>Zeroshot</strong></td><td>5 x multi-agent</td><td>2-5 per</td><td>~$3.00-8.00</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Total Cost of Ownership (per feature)</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>Variant</th><th>API Cost</th><th>Human Time</th><th>Risk of Rework</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Original</strong></td><td>$</td><td>1-2 hours</td><td>Medium-High</td></tr>
            <tr><td><strong>Production</strong></td><td>$</td><td>2-3 hours</td><td>Low-Medium</td></tr>
            <tr><td><strong>Marathon</strong></td><td>$$</td><td>1 hour</td><td>Low</td></tr>
            <tr><td><strong>Lisa + Production</strong></td><td>$</td><td>2-3 hours</td><td>Low</td></tr>
            <tr><td><strong>Zeroshot</strong></td><td>$$$</td><td>0.5 hours</td><td>Very Low</td></tr>
          </tbody>
        </table>
      </div>

      <h3>The Sweet Spot Analysis</h3>
      <ul>
        <li><strong>For most individual developers:</strong> Lisa + Production Ralph (planning investment reduces execution rework)</li>
        <li><strong>For teams needing guarantees:</strong> Zeroshot (higher cost justified by reduced defect rate)</li>
        <li><strong>For rapid prototyping:</strong> Original Ralph (accept higher rework for faster first-pass)</li>
      </ul>
    </section>

    <hr class="section-divider">

    <!-- Migration Paths -->
    <section id="migration-paths">
      <h2><span class="b">Mig</span>ration <span class="b">Pa</span>ths</h2>

      <h3>Original -> Production</h3>
      <p><strong>When to migrate:</strong> Tasks are getting more complex, you want learning to compound, you're spending time on PRD structure anyway.</p>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Step 1: Convert PROMPT.md to prd.json
{
  "project": "your-project",
  "branchName": "ralph/feature-name",
  "userStories": [
    { "id": "US-001", "title": "Task A", "passes": false },
    { "id": "US-002", "title": "Task B", "passes": false },
    { "id": "US-003", "title": "Task C", "passes": false }
  ]
}

# Step 2: Add AGENTS.md for long-term patterns
echo "# agents.md\n\n## Codebase Patterns" > AGENTS.md

# Step 3: Create archive directory
mkdir -p scripts/ralph/archive</code></pre>
      </div>

      <h3>Any -> Lisa (Planning Enhancement)</h3>
      <p><strong>When to add Lisa:</strong> PRD creation is a bottleneck, requirements are often unclear, want systematic specification.</p>

      <div class="code-block">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Step 1: Install Lisa plugin
/plugin marketplace add blencorp/lisa
/plugin install lisa

# Step 2: Run Lisa interview BEFORE your current workflow
/lisa:plan "Your Feature" --first-principles

# Step 3: Answer interview questions (15-30)

# Step 4: Lisa outputs:
# - docs/specs/your-feature.json  <- Use with Production Ralph
# - docs/specs/your-feature.md    <- Human review

# Step 5: Copy to your Ralph setup
cp docs/specs/your-feature.json scripts/ralph/prd.json

# Step 6: Run your existing Ralph variant
./scripts/ralph/ralph.sh 25</code></pre>
      </div>

      <h3>Migration Decision Matrix</h3>
      <div class="table-responsive">
        <table>
          <thead>
            <tr><th>From</th><th>To</th><th>Difficulty</th><th>Time</th><th>Benefit</th></tr>
          </thead>
          <tbody>
            <tr><td>Original -> Production</td><td>Easy</td><td>1 hour</td><td>Structured tasks</td></tr>
            <tr><td>Original -> Lisa</td><td>Easy</td><td>30 min</td><td>Better specs</td></tr>
            <tr><td>Production -> Marathon</td><td>Medium</td><td>2 hours</td><td>Full SDLC</td></tr>
            <tr><td>Production -> Zeroshot</td><td>Medium</td><td>1 hour</td><td>Validation</td></tr>
            <tr><td>Marathon -> Zeroshot</td><td>Hard</td><td>4+ hours</td><td>Both comprehensive</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Checkpoint -->
    <div class="checkpoint" style="background: #f0ebe3; border-left: 4px solid #6b9b7a; border-radius: 8px; padding: 1.5rem; margin: 2rem 0;">
      <div class="checkpoint-header" style="color: #6b9b7a; font-weight: 600;">Checkpoint: Ralph Variant Selection</div>
      <p><strong>You should now understand:</strong></p>
      <ul>
        <li>The five Ralph variants and their unique characteristics</li>
        <li>The decision tree for selecting the right variant</li>
        <li>Cost and complexity trade-offs between variants</li>
        <li>How to migrate between variants as needs evolve</li>
      </ul>
      <p><strong>If unclear:</strong> Start with Original Ralph (simplest), then upgrade as you hit its limitations.</p>
    </div>

    <hr class="section-divider">

    <!-- Troubleshooting -->
    <section id="troubleshooting">
      <h2><span class="b">Trou</span>bleshooting</h2>

      <details class="troubleshoot">
        <summary>Stories Too Large (All Variants)</summary>
        <div>
          <p><strong>Symptom:</strong> Agent can't complete a story in one iteration, context exhausts mid-task.</p>
          <p><strong>Cause:</strong> Story scope exceeds single context window capacity.</p>
          <p><strong>Fix:</strong> Apply the 2-3 sentence rule - if you can't describe it in 2-3 sentences, split it. Each story should be completable in ~15-30 minutes of agent work.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Linear Authentication Fails (Marathon)</summary>
        <div>
          <p><strong>Symptom:</strong> <code>/marathon-ralph:run</code> fails with authentication error.</p>
          <p><strong>Cause:</strong> Linear MCP not properly configured or OAuth token expired.</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Re-authenticate Linear MCP
/mcp
# Select linear -> Authenticate

# Or check MCP configuration
claude mcp list</code></pre>
          </div>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Validators Always Reject (Zeroshot)</summary>
        <div>
          <p><strong>Symptom:</strong> Validators consistently reject worker output even for simple tasks.</p>
          <p><strong>Cause:</strong> Acceptance criteria too vague, validators can't determine "done".</p>
          <p><strong>Fix:</strong> Make criteria objective and testable. Bad: "Code should be clean". Good: "All functions have docstrings, no lint errors, tests pass".</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>Interview Fatigue (Lisa)</summary>
        <div>
          <p><strong>Symptom:</strong> Answering 15-30 questions feels exhausting, answers become terse.</p>
          <p><strong>Cause:</strong> Too much interview for simple features.</p>
          <p><strong>Fix:</strong> Use <code>/lisa:quick</code> for simple features (fewer questions), or skip Lisa entirely for trivial tasks and use Original Ralph.</p>
        </div>
      </details>

      <details class="troubleshoot">
        <summary>prd.json Parsing Errors (Production)</summary>
        <div>
          <p><strong>Symptom:</strong> Ralph script fails with JSON parse error.</p>
          <p><strong>Cause:</strong> Malformed JSON in prd.json (often from manual editing).</p>
          <p><strong>Fix:</strong></p>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <pre><code># Validate JSON
cat scripts/ralph/prd.json | jq .

# Common issues:
# - Trailing commas after last array element
# - Unescaped quotes in strings
# - Missing quotes around keys</code></pre>
          </div>
        </div>
      </details>
    </section>

    <hr class="section-divider">

    <!-- Related Pages -->
    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="mastery-ralph-complete.html">Ralph Pattern Mastery</a> - Deep dive on Production Ralph</li>
        <li><a href="compare-orchestration.html">Orchestration Compared</a> - Ralph vs CC Mirror vs Gas Town</li>
        <li><a href="../journeys/implementation/ralph-production.html">Ralph Production Journey</a> - Step-by-step setup guide</li>
      </ul>
    </div>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="compare-orchestration.html" class="nav-prev">
        <span class="nav-direction">Previous</span>
        <span class="nav-title">Orchestration Compared</span>
      </a>
      <a href="compare-enterprise-orchestration.html" class="nav-next">
        <span class="nav-direction">Next</span>
        <span class="nav-title">Enterprise Orchestration</span>
      </a>
    </nav>

  </div>

  <nav class="left-nav" id="leftNav">
    <div class="px-4 mb-4">
      <a href="../index.html" class="text-xs font-semibold text-accent hover:text-accent-light uppercase tracking-wider">Claude Code KB</a>
    </div>
    <div class="nav-content"></div>
  </nav>

  <script src="../js/search.js"></script>
  <script src="../js/sidebar.js"></script>
  <script src="../js/global-nav.js"></script>
  <script>
    function copyCode(button) {
      const codeBlock = button.parentElement.querySelector('code');
      navigator.clipboard.writeText(codeBlock.textContent);
      button.textContent = 'Copied!';
      button.classList.add('copied');
      setTimeout(() => {
        button.textContent = 'Copy';
        button.classList.remove('copied');
      }, 2000);
    }
  </script>
</body>
</html>
