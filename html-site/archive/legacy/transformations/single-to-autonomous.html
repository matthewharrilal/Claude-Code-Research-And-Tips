<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Single Session to Autonomous | Transformations | Claude Code Knowledge Base</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .you-are-here {
      background: linear-gradient(135deg, #f0ebe3 0%, #fefcf3 100%);
      border-left: 4px solid #2a7d7d;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    .bionic { font-weight: 700; }
    .checkpoint {
      background: #f0ebe3;
      border-left: 4px solid #6b9b7a;
      border-radius: 8px;
      padding: 1.5rem;
      margin: 2rem 0;
    }
    .checkpoint-header { color: #6b9b7a; font-weight: 600; margin-bottom: 0.5rem; }
    .milestone {
      background: linear-gradient(90deg, #6b9b7a 0%, #2a7d7d 100%);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      text-align: center;
      margin: 2rem 0;
    }
    .before-after-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin: 24px 0;
    }
    @media (max-width: 900px) {
      .before-after-container { grid-template-columns: 1fr; }
    }
    .before-box, .after-box {
      border-radius: 12px;
      padding: 20px;
    }
    .before-box {
      background: #fdf0ef;
      border: 2px solid var(--error);
    }
    .before-box h3 { color: var(--error); margin-top: 0; }
    .after-box {
      background: #eef6f0;
      border: 2px solid var(--success);
    }
    .after-box h3 { color: var(--success); margin-top: 0; }
    .transformation-arrow {
      text-align: center;
      font-size: 2em;
      color: var(--accent);
      margin: 1.5rem 0;
    }
    .copy-btn {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: #2a7d7d;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
      cursor: pointer;
      font-size: 0.8em;
    }
    .copy-btn:hover { background: #3a9d9d; }
    .code-block-wrapper {
      position: relative;
    }
    .context-meter {
      background: var(--code-bg);
      border-radius: 8px;
      padding: 16px;
      margin: 16px 0;
    }
    .context-bar {
      height: 24px;
      background: #e0d5c5;
      border-radius: 4px;
      overflow: hidden;
      margin: 8px 0;
    }
    .context-fill {
      height: 100%;
      transition: width 0.3s;
    }
    .context-fill.good { background: var(--success); }
    .context-fill.warning { background: var(--warning); }
    .context-fill.danger { background: var(--error); }
  </style>
</head>
<body>
  <div class="container">
    <nav class="nav-breadcrumb">
      <a href="../index.html">Home</a>
      <span>/</span>
      <a href="index.html">Transformations</a>
      <span>/</span>
      Single to Autonomous
    </nav>

    <div class="you-are-here">
      <h3 style="margin-top: 0; color: var(--accent);"><span class="bionic">You</span> Are <span class="bionic">Her</span>e</h3>
      <p><strong><span class="bionic">Con</span>text:</strong> You're using Claude Code in single interactive sessions, but hitting the wall: context fills up, quality drops, sessions can't run overnight.</p>
      <p><strong><span class="bionic">Whe</span>re this fits:</strong> This is the foundational transformation from Level 0-2 (single session) to Level 3-4 (autonomous Ralph pattern) on the complexity ladder.</p>
      <p><strong><span class="bionic">Wha</span>t you'll learn:</strong> How to structure work so Claude can complete multi-hour features while you sleep.</p>
    </div>

    <h1><span class="bionic">Sin</span>gle Session to <span class="bionic">Per</span>sistent <span class="bionic">Aut</span>onomous</h1>

    <p class="conversational-lead">
      <strong>The <span class="bionic">Par</span>adigm Shift:</strong> From "human babysitting AI" to "AI working while human sleeps"
    </p>

    <div class="toc">
      <div class="toc-title">Contents</div>
      <ul>
        <li><a href="#the-task">The Task</a></li>
        <li><a href="#before">BEFORE: Single Interactive Session</a></li>
        <li><a href="#decision-point">Decision Point: Is Ralph Right?</a></li>
        <li><a href="#after">AFTER: Persistent Autonomous (Ralph)</a></li>
        <li><a href="#comparison">Side-by-Side Comparison</a></li>
        <li><a href="#when-to-use">When to Use Which</a></li>
        <li><a href="#quick-start">Quick Start</a></li>
      </ul>
    </div>

    <hr class="section-divider">

    <h2 id="the-task">The <span class="bionic">Tas</span>k</h2>

    <p>Build a user authentication feature with:</p>
    <ul>
      <li>Login form component</li>
      <li>Email validation</li>
      <li>Server action for authentication</li>
      <li>Unit tests</li>
    </ul>

    <p>This is a real, multi-part feature that would typically take 1-2 hours of focused development.</p>

    <hr class="section-divider">

    <h2 id="before"><span class="bionic">BEF</span>ORE: Single <span class="bionic">Int</span>eractive Session</h2>

    <div class="before-box" style="margin: 24px 0;">
      <h3>The Approach</h3>
      <p>Start Claude Code, prompt iteratively, manually manage context, stop when tired or context degrades.</p>
    </div>

    <h3>The <span class="bionic">Int</span>eraction</h3>

    <div class="code-block-wrapper">
      <button class="copy-btn" onclick="copyCode(this)">Copy</button>
      <pre><code># Session start
$ claude

You: Build a login form for my Next.js app

Claude: I'll create a login form component...
[Writes LoginForm.tsx with email/password fields]
[500 tokens used]

You: Now add client-side email validation

Claude: I'll add email validation to the form...
[Updates LoginForm.tsx with regex validation]
[1,200 tokens used]

You: Actually, let's use Zod for validation instead

Claude: Good idea. I'll refactor to use Zod...
[Rewrites validation logic, adds schema]
[2,100 tokens used]

You: Now create the server action

Claude: I'll create an auth server action...
[Creates auth/actions.ts]
[3,400 tokens used]

# ... 30 minutes in, context at 40%...

You: Write tests for the login functionality

Claude: I'll create comprehensive tests...
[Writes test file]
[7,500 tokens used]

# 60 minutes in, context at 65%...
# Claude starts forgetting earlier decisions

You: Why did you change the validation back to regex?

Claude: I apologize, let me check what we decided...
[Has lost track of Zod decision]

# 90 minutes in - you're tired, Claude is confused
# Session ends with incomplete, buggy feature</code></pre>
    </div>

    <h3><span class="bionic">Con</span>text Degradation <span class="bionic">Vis</span>ualized</h3>

    <div class="context-meter">
      <p><strong>0-50% Context:</strong> Full capability</p>
      <div class="context-bar"><div class="context-fill good" style="width: 50%;"></div></div>

      <p><strong>50-70% Context:</strong> Slight degradation possible</p>
      <div class="context-bar"><div class="context-fill warning" style="width: 70%;"></div></div>

      <p><strong>70-85% Context:</strong> Noticeable quality loss</p>
      <div class="context-bar"><div class="context-fill warning" style="width: 85%;"></div></div>

      <p><strong>85%+ Context:</strong> Instructions forgotten, contradictions</p>
      <div class="context-bar"><div class="context-fill danger" style="width: 95%;"></div></div>
    </div>

    <h3>The <span class="bionic">Pro</span>blems</h3>

    <table>
      <thead>
        <tr>
          <th>Issue</th>
          <th>Impact</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><strong>Context degradation</strong></td><td>Quality drops after 60-70% context usage</td></tr>
        <tr><td><strong>Human must stay engaged</strong></td><td>90+ minutes of active participation</td></tr>
        <tr><td><strong>No persistence</strong></td><td>Session ends, state lost</td></tr>
        <tr><td><strong>Quality drops over time</strong></td><td>Late-session code worse than early</td></tr>
        <tr><td><strong>Cumulative confusion</strong></td><td>Earlier decisions forgotten</td></tr>
        <tr><td><strong>No recoverability</strong></td><td>Hard to resume where you left off</td></tr>
      </tbody>
    </table>

    <hr class="section-divider">

    <h2 id="decision-point"><span class="bionic">Dec</span>ision Point: Is <span class="bionic">Ral</span>ph Right For This?</h2>

    <div class="decision-point">
      <p><strong>Ask yourself:</strong></p>
      <table>
        <thead>
          <tr><th>Question</th><th>If YES</th><th>If NO</th></tr>
        </thead>
        <tbody>
          <tr><td>Does task have 3+ discrete steps?</td><td>Ralph candidate</td><td>Single session OK</td></tr>
          <tr><td>Will it take > 30 min total?</td><td>Ralph candidate</td><td>Single session OK</td></tr>
          <tr><td>Do you have clear "done" criteria?</td><td>Ralph candidate</td><td>Need more planning</td></tr>
          <tr><td>Can each step be verified programmatically?</td><td>Ralph candidate</td><td>Need manual review</td></tr>
          <tr><td>Are you okay walking away?</td><td>Ralph candidate</td><td>Use HOTL Ralph</td></tr>
        </tbody>
      </table>
    </div>

    <div class="checkpoint">
      <div class="checkpoint-header">Checkpoint: Decision Made</div>
      <p><strong>If choosing Ralph, verify you have:</strong></p>
      <ul>
        <li>Clear feature goal (not exploratory)</li>
        <li>Existing test infrastructure (<code>npm test</code> works)</li>
        <li>Typecheck setup (<code>npm run typecheck</code> works)</li>
        <li>Git repository initialized</li>
      </ul>
    </div>

    <hr class="section-divider">

    <h2 id="after"><span class="bionic">AFT</span>ER: Persistent <span class="bionic">Aut</span>onomous (Ralph Pattern)</h2>

    <div class="after-box" style="margin: 24px 0;">
      <h3>The Approach</h3>
      <ol>
        <li>Create <code>prd.json</code> with small, atomic user stories</li>
        <li>Set up <code>ralph.sh</code> automation script</li>
        <li>Start the loop and walk away</li>
        <li>Wake up to completed feature</li>
      </ol>
    </div>

    <div class="tutorial-block">
      <div class="tutorial-header">Step 1: Create prd.json</div>
      <div class="tutorial-content">
        <p>The task board that Claude reads each iteration:</p>

        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code>{
  "project": "UserAuth",
  "branchName": "feat/user-auth",
  "description": "User authentication with login form, validation, and tests",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create login form component with email/password fields",
      "description": "Basic login form UI with styled inputs",
      "acceptanceCriteria": [
        "LoginForm component exists in components/auth/",
        "Has email input with type='email'",
        "Has password input with type='password'",
        "Has submit button",
        "npm run typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Add Zod schema for login validation",
      "acceptanceCriteria": [
        "loginSchema defined with email and password fields",
        "Email validates format with .email()",
        "Password requires minimum 8 characters",
        "npm run typecheck passes"
      ],
      "priority": 2,
      "passes": false
    }
    // ... more stories
  ]
}</code></pre>
        </div>

        <div class="why-matters">
          <ul>
            <li>Each story is <strong>atomic</strong> (one context window)</li>
            <li>Dependencies are <strong>ordered by priority</strong></li>
            <li>Acceptance criteria are <strong>verifiable</strong></li>
            <li><code>passes: true/false</code> tracks completion state</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <div class="checkpoint-header">Checkpoint: After prd.json Creation</div>
      <p><strong>Verify your state:</strong></p>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Check prd.json exists and is valid
jq . scripts/ralph/prd.json

# Count user stories
jq '.userStories | length' scripts/ralph/prd.json

# Check first story structure
jq '.userStories[0] | keys' scripts/ralph/prd.json</code></pre>
      </div>
      <div class="expected-output">
        <pre>7                  &larr; 7 atomic stories
["acceptanceCriteria", "description", "id", "notes", "passes", "priority", "title"]</pre>
      </div>
    </div>

    <div class="tutorial-block">
      <div class="tutorial-header">Step 2: Create ralph.sh</div>
      <div class="tutorial-content">
        <p>The automation loop that spawns fresh Claude instances:</p>

        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code>#!/bin/bash
set -e

MAX_ITERATIONS=${1:-25}
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/../.." && pwd)"

echo "========================================"
echo "  Ralph - Autonomous Development Loop"
echo "========================================"

cd "$PROJECT_ROOT"

for i in $(seq 1 $MAX_ITERATIONS); do
  echo ""
  echo "  Iteration $i of $MAX_ITERATIONS"
  echo ""

  # Run Claude with fresh context each iteration
  OUTPUT=$(claude --dangerously-skip-permissions &lt;&lt;'PROMPT' 2>&1 | tee /dev/stderr) || true
# Ralph Agent Instructions

## Your Context
You are one iteration in an autonomous development loop.
You have NO memory of previous iterations.
Your memory comes from: git history, prd.json, and progress.txt.

## Your Task
1. Read scripts/ralph/prd.json to see all user stories
2. Read scripts/ralph/progress.txt for learnings
3. Find the highest priority story where passes: false
4. Implement that ONE story completely
5. Run verification: npm run typecheck && npm run test
6. If passing: Commit, update prd.json, append to progress.txt
7. If failing: Fix, retry (up to 3 attempts)

## Stop Condition
If ALL stories have passes: true, output:
&lt;promise&gt;COMPLETE&lt;/promise&gt;
PROMPT

  # Check for completion signal
  if echo "$OUTPUT" | grep -q "&lt;promise&gt;COMPLETE&lt;/promise&gt;"; then
    echo "ALL STORIES COMPLETE!"
    exit 0
  fi

  sleep 2
done</code></pre>
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <div class="checkpoint-header">Checkpoint: After ralph.sh Creation</div>
      <p><strong>Verify your state:</strong></p>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Check script exists and is executable
ls -la scripts/ralph/ralph.sh
chmod +x scripts/ralph/ralph.sh

# Dry run check (won't actually run Claude)
bash -n scripts/ralph/ralph.sh && echo "Syntax OK"</code></pre>
      </div>
      <div class="expected-output">
        <pre>-rwxr-xr-x  scripts/ralph/ralph.sh  &larr; Must be executable
Syntax OK                            &larr; No bash syntax errors</pre>
      </div>
    </div>

    <div class="tutorial-block">
      <div class="tutorial-header">Step 3: Run and Walk Away</div>
      <div class="tutorial-content">
        <div class="code-block-wrapper">
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          <pre><code># Start Ralph with 25 max iterations
./scripts/ralph/ralph.sh 25

# Go to sleep at 11pm
# Wake up at 7am to:
# - 7 commits in git history
# - All tests passing
# - Complete authentication feature</code></pre>
        </div>
      </div>
    </div>

    <h3>What <span class="bionic">Hap</span>pens Under the <span class="bionic">Hoo</span>d</h3>

    <div class="ascii-diagram">
Iteration 1 (2:00 AM)
+-- Fresh Claude instance spawns
+-- Reads: prd.json, progress.txt, CLAUDE.md
+-- Picks: US-001 (highest priority, passes: false)
+-- Implements: LoginForm.tsx
+-- Verifies: npm run typecheck (passes)
+-- Commits: "feat: US-001 - Create login form component"
+-- Updates: prd.json (US-001.passes = true)
+-- Exits (context cleared)

Iteration 2 (2:05 AM)
+-- Fresh Claude instance spawns (NO MEMORY)
+-- Reads: prd.json (sees US-001 done)
+-- Reads: progress.txt (learns about Tailwind/shadcn)
+-- Picks: US-002 (next priority)
+-- Implements: Zod schema
...

Iteration 7 (2:35 AM)
+-- All passes: true!
+-- Outputs: &lt;promise&gt;COMPLETE&lt;/promise&gt;
+-- Script exits with success

You wake up at 7:00 AM to a complete feature.
    </div>

    <div class="milestone">
      Paradigm Shift Achieved: AI works while you sleep
    </div>

    <hr class="section-divider">

    <h2 id="comparison"><span class="bionic">Sid</span>e-by-Side <span class="bionic">Com</span>parison</h2>

    <table class="comparison-table">
      <thead>
        <tr>
          <th>Aspect</th>
          <th>Before (Single Session)</th>
          <th>After (Ralph/Autonomous)</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><strong>Context</strong></td><td>Degrades over 90 min</td><td>Fresh each 5-min iteration</td></tr>
        <tr><td><strong>Human</strong></td><td>Must stay engaged entire time</td><td>Can leave after setup</td></tr>
        <tr><td><strong>Quality</strong></td><td>Drops after 60% context</td><td>Maintained throughout</td></tr>
        <tr><td><strong>Duration</strong></td><td>90 min + human present</td><td>30 min setup + human asleep</td></tr>
        <tr><td><strong>Memory</strong></td><td>Lost when session ends</td><td>Persists in git + files</td></tr>
        <tr><td><strong>Recoverability</strong></td><td>Start over if session dies</td><td>Resume from last commit</td></tr>
        <tr><td><strong>Verification</strong></td><td>Manual after each step</td><td>Automated (typecheck/test)</td></tr>
        <tr><td><strong>Errors</strong></td><td>Compound in context</td><td>Isolated to one iteration</td></tr>
      </tbody>
    </table>

    <h3>The <span class="bionic">Men</span>tal Model Shift</h3>

    <div class="before-after-container">
      <div class="before-box">
        <h4>Before: AI as Pair Programmer</h4>
        <pre style="background: transparent; border: none; padding: 0;">Human &lt;-&gt; AI (continuous)
       |
   Context fills
       |
   Quality drops
       |
  Human frustration</pre>
      </div>
      <div class="after-box">
        <h4>After: AI as Factory Worker</h4>
        <pre style="background: transparent; border: none; padding: 0;">Human -&gt; PRD -&gt; [Iter 1] -&gt; [Iter 2] -&gt; ... -&gt; Complete
                    |           |
                Fresh ctx   Fresh ctx
                    |           |
               Verified    Verified</pre>
      </div>
    </div>

    <hr class="section-divider">

    <h2 id="when-to-use"><span class="bionic">Whe</span>n to Use <span class="bionic">Whi</span>ch</h2>

    <div class="recommendation">
      <p><strong>Use Single Session When:</strong></p>
      <ul>
        <li>Task is small (&lt; 30 minutes)</li>
        <li>Exploratory/discovery work</li>
        <li>You need to guide every decision</li>
        <li>Learning a new codebase together</li>
      </ul>
    </div>

    <div class="recommendation">
      <p><strong>Use Ralph/Autonomous When:</strong></p>
      <ul>
        <li>Feature has multiple discrete parts</li>
        <li>Work can span hours</li>
        <li>You want to sleep/do other things</li>
        <li>Quality must remain consistent</li>
        <li>You have clear acceptance criteria</li>
      </ul>
    </div>

    <hr class="section-divider">

    <h2 id="quick-start"><span class="bionic">Qui</span>ck Start: <span class="bionic">Tra</span>nsform Your <span class="bionic">Wor</span>kflow</h2>

    <div class="tutorial-block">
      <div class="tutorial-header">Transform Any Feature</div>
      <div class="tutorial-content">
        <div class="tutorial-step">
          <div class="tutorial-step-number">1</div>
          <div class="tutorial-step-content">
            <h4>Take your feature request</h4>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">2</div>
          <div class="tutorial-step-content">
            <h4>Break it into 5-10 atomic stories</h4>
            <p>Each should be ~5 min of work</p>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">3</div>
          <div class="tutorial-step-content">
            <h4>Write acceptance criteria for each</h4>
            <p>Must be verifiable (tests, typecheck)</p>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">4</div>
          <div class="tutorial-step-content">
            <h4>Create prd.json with priorities</h4>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">5</div>
          <div class="tutorial-step-content">
            <h4>Set up ralph.sh</h4>
          </div>
        </div>
        <div class="tutorial-step">
          <div class="tutorial-step-number">6</div>
          <div class="tutorial-step-content">
            <h4>Run and walk away</h4>
            <pre style="margin-top: 8px;"><code>./ralph.sh 25</code></pre>
          </div>
        </div>
      </div>
    </div>

    <div class="gotcha-block">
      <p><strong>Common Mistake:</strong> Stories that are too big. If a story takes more than 10 minutes, split it further. Each story should fit comfortably in one fresh context window.</p>
    </div>

    <div class="checkpoint">
      <div class="checkpoint-header">Final Checkpoint: Transformation Complete</div>
      <p><strong>Verify your transformation:</strong></p>
      <div class="code-block-wrapper">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code># Check all stories completed
jq '.userStories | map(select(.passes==false)) | length' scripts/ralph/prd.json
# Should return: 0

# Check commits from overnight run
git log --oneline --since="yesterday" | wc -l
# Should show: 7+ commits

# Check tests still pass
npm test</code></pre>
      </div>
      <p><strong>The transformation is complete when:</strong></p>
      <ul>
        <li>All stories have <code>passes: true</code></li>
        <li>Git history shows clean, atomic commits</li>
        <li>Tests pass (no quality degradation)</li>
        <li>Feature works as specified</li>
        <li>You did something else while it ran</li>
      </ul>
    </div>

    <div class="milestone">
      Congratulations. You've shipped while you slept.
    </div>

    <hr class="section-divider">

    <div class="related-pages">
      <h3>Related Pages</h3>
      <ul>
        <li><a href="../patterns/mastery/ralph-complete.html">Ralph Pattern Complete Guide</a></li>
        <li><a href="../foundations/architecture/complexity-ladder.html">Complexity Ladder (Level 0-7)</a></li>
        <li><a href="manual-to-filesystem.html">Transform: Manual to Filesystem State</a></li>
      </ul>
    </div>

    <div class="footer-nav">
      <a href="index.html">&larr; All Transformations</a>
      <a href="manual-to-filesystem.html">Next: Manual to Filesystem &rarr;</a>
    </div>

  </div>

  <script>
    function copyCode(btn) {
      const pre = btn.parentElement.querySelector('pre');
      const code = pre.querySelector('code') || pre;
      navigator.clipboard.writeText(code.textContent);
      btn.textContent = 'Copied!';
      setTimeout(() => btn.textContent = 'Copy', 2000);
    }
  </script>
  <script src="../js/copy-code.js"></script>
</body>
</html>
