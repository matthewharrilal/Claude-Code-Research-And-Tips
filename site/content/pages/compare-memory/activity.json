{
  "items": [
    {
      "id": "inv-1",
      "type": "inversion",
      "linkedSection": "essence",
      "title": "What if Claude had perfect memory?",
      "content": "<strong>You'd design:</strong> No files at all. Claude remembers everything across sessions.<br>\n          <strong>Why this fails:</strong> Context windows are finite. Sessions end. Models update.<br>\n          <strong>Hidden constraint revealed:</strong> External state is not a workaround - it's the architecture."
    },
    {
      "id": "ana-2",
      "type": "analogy",
      "linkedSection": "essence",
      "title": "Memory Layers = CPU Cache Hierarchy",
      "content": "<strong>L1 Cache</strong> = progress.txt (fast, small, session-local)<br>\n          <strong>L2 Cache</strong> = Git (medium, structured, code-focused)<br>\n          <strong>L3 Cache</strong> = AGENTS.md (slower, larger, curated)<br>\n          <strong>RAM</strong> = Claude-Mem (semantic, vast, external)<br><br>\n          <em>If you've tuned cache hierarchies, you understand memory layers.</em>"
    },
    {
      "id": "min-3",
      "type": "minimal",
      "linkedSection": "essence",
      "title": "Minimal viable memory system",
      "content": "<code style=\"background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;\">echo \"Learned: X\" &gt;&gt; progress.txt</code><br><br>\n          <strong>Essential:</strong> Something persists across sessions.<br>\n          <strong>Everything else:</strong> Refinement for scale and curation."
    },
    {
      "id": "inv-4",
      "type": "invariant",
      "linkedSection": "core",
      "title": "INV-003: External state > internal memory",
      "content": "Ralph, Gas Town, Memory Layers all share this invariant. Files are the memory. Context windows are temporary. The same principle forces the same architectural choice across all patterns."
    },
    {
      "id": "con-5",
      "type": "constraint",
      "linkedSection": "core",
      "title": "One constraint drives the architecture",
      "content": "<strong>ROOT:</strong> Sessions end. Memory is lost.<br>\n          → State must persist externally<br>\n          → Different knowledge needs different persistence<br>\n          → Multiple layers serve different access patterns<br>\n          → Graduation path moves valuable knowledge upward<br>\n          → Curation prevents noise accumulation"
    },
    {
      "id": "grad-6",
      "type": "gradient",
      "linkedSection": "core",
      "title": "How single-layer memory degrades",
      "content": "<strong>100% useful</strong> (0-5KB): All signal, easy to find<br>\n          <strong>90% useful</strong> (5-15KB): Some noise, still searchable<br>\n          <strong>70% useful</strong> (15-30KB): Noise competes with signal<br>\n          <strong>50% useful</strong> (30KB+): Search returns too many results<br>\n          <strong>CLIFF</strong> (100KB+): Agent ignores file entirely<br><br>\n          <em>The gradient is invisible until search stops working.</em>"
    },
    {
      "id": "exp-7",
      "type": "expertise",
      "linkedSection": "approaches",
      "title": "progress.txt depth of understanding",
      "content": "<strong>Beginner:</strong> \"Where do I put learnings?\" → progress.txt<br>\n          <strong>Intermediate:</strong> \"How often to prune?\" → When &gt;20KB or weekly<br>\n          <strong>Advanced:</strong> \"What graduates?\" → Patterns appearing 3+ times<br>\n          <strong>Staff:</strong> \"How to automate?\" → Lint rules + graduation scripts<br>\n          <strong>Expert:</strong> \"Integration with other layers?\" → Auto-populate AGENTS.md"
    },
    {
      "id": "trade-8",
      "type": "tradeoff",
      "linkedSection": "approaches",
      "title": "Git: Discipline vs. Accessibility",
      "content": "<strong>Good commit messages:</strong> Valuable history, but requires discipline<br>\n          <strong>Quick commits:</strong> Easy, but history becomes archaeology<br>\n          <strong>Squash merges:</strong> Clean history, but loses detail<br><br>\n          <em>Heuristic: Conventional commits balance effort/value. \"[DECISION]\" tags enable search.</em>"
    },
    {
      "id": "war-9",
      "type": "warstory",
      "linkedSection": "approaches",
      "title": "Team onboarding with AGENTS.md",
      "content": "New dev joins team. Reads AGENTS.md. Immediately knows: \"Don't use feature X in testing\" and \"API returns 204 not 200 for deletes.\" Days of discovery compressed to 10 minutes. <em>That's the value of curated knowledge.</em>"
    },
    {
      "id": "comp-10",
      "type": "composition",
      "linkedSection": "approaches",
      "title": "AGENTS.md + CLAUDE.md",
      "content": "<strong>Works:</strong> CLAUDE.md = instructions, AGENTS.md = knowledge.<br>\n          <strong>Danger:</strong> Overlap confuses both human and agent. Keep distinct: HOW vs. WHAT.<br>\n          <strong>Recommendation:</strong> CLAUDE.md says \"read AGENTS.md at session start.\""
    },
    {
      "id": "fron-11",
      "type": "frontier",
      "linkedSection": "approaches",
      "title": "UNSOLVED: Optimal embedding model for code",
      "content": "<strong>THE QUESTION:</strong> Which embedding model best captures code semantics for retrieval?<br>\n          <strong>WHY IT'S HARD:</strong> Code has structure that prose embeddings miss. Comments vs. code vs. error messages need different treatment.<br>\n          <strong>CURRENT BEST:</strong> Domain-specific fine-tuning, but expensive."
    },
    {
      "id": "hor-12",
      "type": "horizon",
      "linkedSection": "layered",
      "title": "How judgment on AGENTS.md evolves",
      "content": "<strong>Week 1:</strong> \"AGENTS.md feels like busywork\"<br>\n          <strong>Week 4:</strong> \"Oh, I forgot that gotcha from last month\"<br>\n          <strong>Week 12:</strong> \"AGENTS.md is why I'm not repeating mistakes\"<br>\n          <strong>Month 6:</strong> \"New hires productive in days because of AGENTS.md\"<br><br>\n          <em>Don't judge permanent memory by short-term overhead.</em>"
    },
    {
      "id": "ana-13",
      "type": "analogy",
      "linkedSection": "layered",
      "title": "Memory Layers = Human Memory",
      "content": "<strong>progress.txt</strong> = Working memory (seconds to hours)<br>\n          <strong>Git</strong> = Episodic memory (events in time)<br>\n          <strong>AGENTS.md</strong> = Semantic memory (facts and concepts)<br>\n          <strong>Claude-Mem</strong> = External brain (notes and databases)<br><br>\n          <em>You already know this. You just call it \"taking notes\" vs \"remembering.\"</em>"
    },
    {
      "id": "eff-14",
      "type": "effect",
      "linkedSection": "layered",
      "title": "Compounding at organizational scale",
      "content": "<strong>At 1 dev:</strong> Memory helps that developer<br>\n          <strong>At 5 devs:</strong> Memory helps onboarding and handoffs<br>\n          <strong>At 20 devs:</strong> Memory IS the institutional knowledge<br>\n          <strong>At 100 devs:</strong> Without memory, every team rediscovers everything<br><br>\n          <em>The value scales superlinearly with team size.</em>"
    },
    {
      "id": "vio-15",
      "type": "violation",
      "linkedSection": "migration",
      "title": "If you skip the graduation step",
      "content": "<strong>IF:</strong> You never move patterns from progress.txt to AGENTS.md<br>\n          <strong>THEN:</strong> progress.txt grows unbounded<br>\n          <strong>THEN:</strong> You archive/prune to manage size<br>\n          <strong>THEN:</strong> Valuable patterns are lost in archives<br>\n          <strong>FINALLY:</strong> Agent keeps rediscovering the same patterns<br><br>\n          <em>The fix: \"If it appears 3+ times, it graduates.\"</em>"
    },
    {
      "id": "exp-16",
      "type": "expertise",
      "linkedSection": "migration",
      "title": "Graduation process understanding",
      "content": "<strong>Beginner:</strong> \"What moves up?\" → Patterns proven 3+ times<br>\n          <strong>Intermediate:</strong> \"How often?\" → Weekly review<br>\n          <strong>Advanced:</strong> \"What stays behind?\" → Session-specific context<br>\n          <strong>Staff:</strong> \"How to automate?\" → Scripts counting pattern occurrences<br>\n          <strong>Expert:</strong> \"What about staleness?\" → Quarterly prune of AGENTS.md"
    },
    {
      "id": "inf-17",
      "type": "inflection",
      "linkedSection": "migration",
      "title": "When Claude-Mem becomes worth it",
      "content": "<strong>1-3 projects:</strong> Overkill. AGENTS.md per project is fine.<br>\n          <strong>4-10 projects:</strong> Emerging value. Cross-project patterns appear.<br>\n          <strong>10+ projects:</strong> Clear ROI. Semantic search saves hours.<br><br>\n          <strong>THE INFLECTION:</strong> ~8 active projects<br>\n          <em>Detection: \"I've solved this before somewhere\" - if frequent, you need Claude-Mem.</em>"
    },
    {
      "id": "inv-18",
      "type": "inversion",
      "linkedSection": "gotchas",
      "title": "What if progress.txt never grew?",
      "content": "<strong>You'd design:</strong> No pruning needed. Everything accumulates forever.<br>\n          <strong>Why this fails:</strong> Context windows are finite. 200KB file = wasted tokens.<br>\n          <strong>Hidden constraint:</strong> The pruning requirement IS the signal that layers are needed."
    },
    {
      "id": "vio-19",
      "type": "violation",
      "linkedSection": "gotchas",
      "title": "If you ignore git message discipline",
      "content": "<strong>IF:</strong> All commits are \"fix\" or \"update\"<br>\n          <strong>THEN:</strong> Git log becomes unusable for archaeology<br>\n          <strong>THEN:</strong> \"Why was this changed?\" becomes unanswerable<br>\n          <strong>THEN:</strong> Debugging requires reading all diffs manually<br>\n          <strong>FINALLY:</strong> You've lost free memory capacity<br><br>\n          <em>The fix: Commit messages are documentation. Invest once, read forever.</em>"
    },
    {
      "id": "trade-20",
      "type": "tradeoff",
      "linkedSection": "gotchas",
      "title": "Sync frequency vs. staleness",
      "content": "<strong>Sync often:</strong> Always current, but high maintenance overhead<br>\n          <strong>Sync rarely:</strong> Low effort, but layers diverge<br>\n          <strong>Never sync:</strong> Zero effort, but contradictions accumulate<br><br>\n          <em>Heuristic: Weekly sync is the sweet spot. Monthly is minimum viable.</em>"
    },
    {
      "id": "war-21",
      "type": "warstory",
      "linkedSection": "gotchas",
      "title": "The 500KB progress.txt disaster",
      "content": "Developer ran Ralph for 3 months without pruning. progress.txt hit 500KB. Agent spent 40% of context window just reading history. Quality crashed. Fix: archived to dated file, started fresh. <em>\"Never again. Weekly pruning is non-negotiable.\"</em>"
    },
    {
      "id": "trade-22",
      "type": "tradeoff",
      "linkedSection": "hard",
      "title": "The curation paradox",
      "content": "<strong>THE DILEMMA:</strong><br>\n          - Curate too strictly: Miss valuable patterns<br>\n          - Curate too loosely: Noise drowns signal<br>\n          - No curation: Everything is equally unhelpful<br><br>\n          <strong>WHY NO PERFECT ANSWER:</strong> Value is subjective and context-dependent.<br>\n          <em>Heuristic: \"Would a new team member benefit from this?\" If yes, keep it.</em>"
    },
    {
      "id": "grad-23",
      "type": "gradient",
      "linkedSection": "hard",
      "title": "How AGENTS.md goes stale",
      "content": "<strong>Month 1:</strong> 100% accurate, everything fresh<br>\n          <strong>Month 3:</strong> 90% accurate, minor drift<br>\n          <strong>Month 6:</strong> 75% accurate, some patterns outdated<br>\n          <strong>Month 12:</strong> 50% accurate, major sections misleading<br>\n          <strong>Month 24:</strong> Actively harmful - wrong patterns applied<br><br>\n          <em>Critical: Quarterly review prevents the cliff.</em>"
    },
    {
      "id": "fron-24",
      "type": "frontier",
      "linkedSection": "hard",
      "title": "UNSOLVED: Automatic staleness detection",
      "content": "<strong>THE QUESTION:</strong> Can we detect when AGENTS.md contradicts the current codebase?<br>\n          <strong>WHY IT'S HARD:</strong> Semantic understanding of both code and prose required. Context matters.<br>\n          <strong>CURRENT BEST:</strong> Manual quarterly review. No good automation."
    },
    {
      "id": "hor-25",
      "type": "horizon",
      "linkedSection": "when",
      "title": "When overhead feels worth it",
      "content": "<strong>Day 1:</strong> \"Why am I maintaining 4 memory systems?\"<br>\n          <strong>Week 2:</strong> \"progress.txt saved me from repeating yesterday's mistake\"<br>\n          <strong>Month 2:</strong> \"AGENTS.md is why this codebase is navigable\"<br>\n          <strong>Month 6:</strong> \"Cross-project patterns from Claude-Mem saved a week\"<br><br>\n          <em>Match time horizon to project duration.</em>"
    },
    {
      "id": "alt-26",
      "type": "alternative",
      "linkedSection": "when",
      "title": "If layered memory isn't right",
      "content": "<strong>Very short project?</strong> → Just progress.txt, no curation<br>\n          <strong>Solo disposable code?</strong> → Good git messages only<br>\n          <strong>Highly structured domain?</strong> → Schema-based memory, not files<br>\n          <strong>Real-time system?</strong> → In-memory cache, not files"
    },
    {
      "id": "comp-27",
      "type": "composition",
      "linkedSection": "when",
      "title": "Memory Layers + Ralph Pattern",
      "content": "<strong>Works:</strong> progress.txt is essential to Ralph. Each iteration reads/writes it.<br>\n          <strong>Enhancement:</strong> AGENTS.md pre-loads project knowledge. Claude-Mem provides cross-run patterns.<br>\n          <strong>The synergy:</strong> Layered memory makes Ralph iterations compound instead of repeating."
    },
    {
      "id": "inv-28",
      "type": "invariant",
      "linkedSection": "when",
      "title": "INV-007: Different retention for different knowledge",
      "content": "Memory Layers, Database Design, Cache Strategy all share this invariant. Hot data needs fast access. Cold data can be slow. The same principle forces hierarchical storage everywhere."
    },
    {
      "id": "vio-29",
      "type": "violation",
      "linkedSection": "antipatterns",
      "title": "\"Everything in progress.txt\" cascade",
      "content": "<strong>IF:</strong> You dump everything into progress.txt<br>\n          <strong>THEN:</strong> File becomes unreadable<br>\n          <strong>THEN:</strong> Agent can't find relevant information<br>\n          <strong>THEN:</strong> Agent ignores the file entirely<br>\n          <strong>FINALLY:</strong> You have no memory system at all<br><br>\n          <em>The fix: Layers exist for a reason. Use them.</em>"
    },
    {
      "id": "inv-30",
      "type": "inversion",
      "linkedSection": "antipatterns",
      "title": "What if you used Claude-Mem for a weekend project?",
      "content": "<strong>You'd build:</strong> Vector DB, embeddings, retrieval pipeline.<br>\n          <strong>Why this fails:</strong> Setup takes longer than the project. Maintenance &gt; value.<br>\n          <strong>Hidden constraint:</strong> Infrastructure complexity must scale with project complexity."
    },
    {
      "id": "eff-31",
      "type": "effect",
      "linkedSection": "antipatterns",
      "title": "The \"never prune\" accumulation",
      "content": "<strong>At 10KB:</strong> All signal, fast retrieval<br>\n          <strong>At 50KB:</strong> Some noise, still useful<br>\n          <strong>At 200KB:</strong> More noise than signal<br>\n          <strong>At 1MB:</strong> Context window saturated<br><br>\n          <em>Threshold: Prune before 30KB or suffer exponential degradation.</em>"
    },
    {
      "id": "war-32",
      "type": "warstory",
      "linkedSection": "antipatterns",
      "title": "The empty AGENTS.md regret",
      "content": "Team spent 6 months building feature. progress.txt got pruned weekly. AGENTS.md stayed empty (\"we'll fill it later\"). New dev joins. Spends 2 weeks rediscovering patterns that were in archived progress.txt files. <em>\"We thought we were saving time by not curating. We paid 10x later.\"</em>"
    }
  ]
}