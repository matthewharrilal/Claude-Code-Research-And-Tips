{
  "items": [
    {
      "id": "inv-1",
      "type": "inversion",
      "linkedSection": "essence",
      "title": "What if all domains shared context?",
      "content": "<strong>You'd design:</strong> One Claude instance managing everything, unified memory.<br>\n          <strong>Why this fails:</strong> Context window fills with irrelevant cross-domain noise. Health data pollutes code discussions. Quality degrades everywhere.<br>\n          <strong>Hidden constraint revealed:</strong> Isolation IS the feature, not the limitation."
    },
    {
      "id": "min-2",
      "type": "minimal",
      "linkedSection": "essence",
      "title": "The irreducible core",
      "content": "<code style=\"background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;\">cd ~/domain &amp;&amp; claude</code><br>\n          <strong>Essential:</strong> Separate directory. Separate instance.<br>\n          <strong>Everything else:</strong> CLAUDE.md, handoffs, tmux - all refinement."
    },
    {
      "id": "war-3",
      "type": "warstory",
      "linkedSection": "essence",
      "title": "Molly Cantillon: Personal Panopticon",
      "content": "8 parallel Claude instances managing entire life. Built Jmail (18M users) overnight. \"The violent gap between how blind you were and how obvious everything feels now.\""
    },
    {
      "id": "ana-4",
      "type": "analogy",
      "linkedSection": "core",
      "title": "Domain Isolation = Microservices Architecture",
      "content": "Isolated domains = Independent microservices<br>\n          ~/shared/ handoffs = API contracts between services<br>\n          Domain CLAUDE.md = Service-specific configuration<br>\n          Correlation agent = API gateway / orchestrator<br><br>\n          <em>If you've designed microservices, you already understand domain isolation.</em>"
    },
    {
      "id": "con-5",
      "type": "constraint",
      "linkedSection": "core",
      "title": "One constraint produces SIX decisions",
      "content": "<strong>ROOT:</strong> Context window is finite (200K tokens)<br>\n          → Mixed domains fill context with irrelevant information<br>\n          → Domain isolation keeps context focused<br>\n          → Each domain needs its own directory<br>\n          → Cross-domain sharing needs explicit mechanism<br>\n          → Handoff files create audit trail<br>\n          → Correlation engine enables synthesis without pollution"
    },
    {
      "id": "inv-6",
      "type": "invariant",
      "linkedSection": "core",
      "title": "Domain Isolation shares INV-003 with Ralph",
      "content": "Both patterns: External state &gt; internal memory.<br>\n          Ralph: prd.json, progress.txt persist across iterations.<br>\n          Domains: CLAUDE.md, handoff files persist across sessions.<br>\n          <em>Same principle, different scale.</em>"
    },
    {
      "id": "vio-7",
      "type": "violation",
      "linkedSection": "decisions",
      "title": "If you run one \"master\" Claude",
      "content": "<strong>IF:</strong> Single Claude handles trades, health, code, email<br>\n          <strong>THEN:</strong> Context fills with mixed-domain information<br>\n          <strong>THEN:</strong> Model starts forgetting earlier instructions<br>\n          <strong>THEN:</strong> Health advice influences code suggestions<br>\n          <strong>FINALLY:</strong> All domains get diluted, generic outputs<br><br>\n          <em>The fix: One domain, one instance.</em>"
    },
    {
      "id": "trade-8",
      "type": "tradeoff",
      "linkedSection": "decisions",
      "title": "The Isolation-Coordination Dilemma",
      "content": "<strong>THE DILEMMA:</strong><br>\n          - Strict isolation: Max focus, but miss cross-domain insights<br>\n          - Heavy coordination: Rich synthesis, but context pollution returns<br>\n          - Moderate: Balance, but judgment required<br><br>\n          <strong>HEURISTIC:</strong> Default to isolation. Add coordination explicitly only when needed."
    },
    {
      "id": "exp-9",
      "type": "expertise",
      "linkedSection": "decisions",
      "title": "How deeply do you understand isolation?",
      "content": "<strong>Beginner:</strong> \"How many domains should I have?\" → Start with 3-5<br>\n          <strong>Intermediate:</strong> \"How do domains communicate?\" → Handoff files<br>\n          <strong>Advanced:</strong> \"When is isolation overhead too high?\" → &gt;8 domains<br>\n          <strong>Staff:</strong> \"How does this compose with Ralph?\" → Each domain can run its own Ralph loop<br>\n          <strong>Expert:</strong> \"What's the meta-level?\" → Correlation engine + human review"
    },
    {
      "id": "comp-10",
      "type": "composition",
      "linkedSection": "files",
      "title": "Domain Isolation + Ralph Loop",
      "content": "<strong>Works:</strong> Each domain can run its own Ralph loop for autonomous overnight work.<br>\n          <strong>Pattern:</strong> ~/trades/scripts/ralph/ runs trading analysis Ralph loop.<br>\n          <strong>Danger:</strong> Don't let Ralph cross domain boundaries. Keep prd.json domain-specific."
    },
    {
      "id": "comp-11",
      "type": "composition",
      "linkedSection": "files",
      "title": "Domain Isolation + Git Worktrees",
      "content": "<strong>Works:</strong> When single domain needs parallel work streams, use git worktrees.<br>\n          <strong>Pattern:</strong> ~/nox/ main + ~/nox-feature-auth/ + ~/nox-feature-payments/<br>\n          <strong>Benefit:</strong> Worktrees are isolation WITHIN a domain. Different from cross-domain isolation."
    },
    {
      "id": "hor-12",
      "type": "horizon",
      "linkedSection": "files",
      "title": "How perception of CLAUDE.md evolves",
      "content": "<strong>Day 1:</strong> \"CLAUDE.md feels like overhead\"<br>\n          <strong>Week 1:</strong> \"Wait, the agent keeps doing wrong things!\"<br>\n          <strong>Week 2:</strong> \"CLAUDE.md is why domain agents stay focused\"<br>\n          <strong>Month 1:</strong> \"This is domain-specific institutional memory\"<br><br>\n          <em>Don't judge domain setup by day 1.</em>"
    },
    {
      "id": "eff-13",
      "type": "effect",
      "linkedSection": "path",
      "title": "At 8+ domains, coordination cost exceeds isolation benefit",
      "content": "<strong>Phenomenon:</strong> Handoff file management becomes a job. Context-switching between domains consumes attention. You spend more time on coordination than work.<br>\n          <strong>Threshold:</strong> ~8 domains is the inflection point.<br>\n          <strong>Mitigation:</strong> Consolidate related concerns. Use subagents within domains."
    },
    {
      "id": "ana-14",
      "type": "analogy",
      "linkedSection": "path",
      "title": "Handoff Protocol = Message Queues",
      "content": "~/shared/ directory = Message broker<br>\n          handoff-*.json files = Messages with routing<br>\n          \"from\"/\"to\" fields = Queue routing keys<br>\n          timestamp = Message ordering<br><br>\n          <em>If you've used message queues, you already understand handoffs.</em>"
    },
    {
      "id": "vio-15",
      "type": "violation",
      "linkedSection": "path",
      "title": "If you skip handoff protocol",
      "content": "<strong>IF:</strong> Domains communicate through shared files directly<br>\n          <strong>THEN:</strong> No audit trail of cross-domain communication<br>\n          <strong>THEN:</strong> Can't track where information came from<br>\n          <strong>THEN:</strong> Debug becomes impossible<br>\n          <strong>FINALLY:</strong> Isolation benefits lost, worse than single instance<br><br>\n          <em>The fix: Always use explicit handoff files.</em>"
    },
    {
      "id": "inf-16",
      "type": "inflection",
      "linkedSection": "gotchas",
      "title": "When domain count flips from benefit to burden",
      "content": "<strong>1-3 domains:</strong> Clear benefit (focused context)<br>\n          <strong>4-6 domains:</strong> Optimal range (specialization without overhead)<br>\n          <strong>7-8 domains:</strong> Diminishing returns (coordination effort rises)<br>\n          <strong>9+ domains:</strong> Net negative (overhead exceeds benefit)<br><br>\n          <strong>THE INFLECTION:</strong> ~6-8 domains<br>\n          <em>Detection: Spending more time on coordination than domain work.</em>"
    },
    {
      "id": "grad-17",
      "type": "gradient",
      "linkedSection": "gotchas",
      "title": "How isolation fails gradually",
      "content": "<strong>100% → 90%:</strong> Occasional file access outside domain (no harm)<br>\n          <strong>90% → 70%:</strong> Regular cross-domain reads without handoffs<br>\n          <strong>70% → 50%:</strong> Domains start \"knowing\" about each other implicitly<br>\n          <strong>50% → CLIFF:</strong> Context pollution returns, isolation meaningless<br><br>\n          <em>Critical: The gradient is invisible until you audit file access patterns.</em>"
    },
    {
      "id": "inv-18",
      "type": "inversion",
      "linkedSection": "gotchas",
      "title": "Why does global CLAUDE.md pollute?",
      "content": "<strong>What if ~/.claude/CLAUDE.md was always read?</strong><br>\n          Then every domain inherits global rules. Domain-specific CLAUDE.md overridden.<br><br>\n          <strong>Why this matters:</strong> Global config creates implicit coupling between domains.<br>\n          <em>Hidden constraint: Domain config must be domain-specific.</em>"
    },
    {
      "id": "trade-19",
      "type": "tradeoff",
      "linkedSection": "hard",
      "title": "Over-Isolation vs. Under-Isolation",
      "content": "<strong>THE DILEMMA:</strong><br>\n          - Over-isolated: Silos with no awareness, duplicate work, conflicting decisions<br>\n          - Under-isolated: Context pollution, generic outputs, lost benefits<br><br>\n          <strong>WHY NO PERFECT ANSWER:</strong> Optimal balance depends on your domains and workflow.<br><br>\n          <em>Heuristic: If domains can operate independently for 24 hours, isolation is right.</em>"
    },
    {
      "id": "fron-20",
      "type": "frontier",
      "linkedSection": "hard",
      "title": "UNSOLVED: Optimal correlation frequency",
      "content": "<strong>The question:</strong> How often should the correlation agent synthesize? Daily? Per-change? On-demand?<br>\n          <strong>Why it's hard:</strong> Too frequent = overhead. Too rare = miss emergent patterns.<br>\n          <strong>Current practice:</strong> Daily morning synthesis. No dynamic trigger yet."
    },
    {
      "id": "war-21",
      "type": "warstory",
      "linkedSection": "hard",
      "title": "Molly Cantillon: Goodhart Warning",
      "content": "\"Goodhart says optimize for a metric and you game your way to hollow victory.\"<br><br>\n          WHOOP says recovered but you feel like death. System says productive but life feels empty.<br><br>\n          <em>Lesson: Maintain a meta-level outside the system.</em>"
    },
    {
      "id": "exp-22",
      "type": "expertise",
      "linkedSection": "hard",
      "title": "Understanding the Anthropic trade-off",
      "content": "<strong>Beginner:</strong> \"Is my data private?\" → Between domains, yes. From Anthropic, no.<br>\n          <strong>Intermediate:</strong> \"Can I avoid Anthropic seeing?\" → Not with Claude.<br>\n          <strong>Advanced:</strong> \"Is this acceptable?\" → Depends on your threat model.<br>\n          <strong>Staff:</strong> \"What's the trade-off?\" → Visibility for capability.<br>\n          <strong>Expert:</strong> \"Chosen beats imposed.\" → You opted in; this isn't surveillance."
    },
    {
      "id": "alt-23",
      "type": "alternative",
      "linkedSection": "when",
      "title": "If Domain Isolation isn't right for you",
      "content": "<strong>Single project focus?</strong> → One Claude instance is fine<br>\n          <strong>Need team shared context?</strong> → Shared workspace pattern<br>\n          <strong>Highly interdependent domains?</strong> → Correlation engine as primary<br>\n          <strong>Quick exploration?</strong> → Skip setup overhead"
    },
    {
      "id": "inv-24",
      "type": "inversion",
      "linkedSection": "when",
      "title": "What if domains were highly interdependent?",
      "content": "<strong>You'd design:</strong> Heavy handoff traffic, frequent correlation runs, near-real-time sync.<br>\n          <strong>Why this fails:</strong> At that point, you've recreated a single context with extra steps.<br>\n          <strong>Hidden constraint revealed:</strong> Domain isolation assumes domains can operate independently."
    },
    {
      "id": "hor-25",
      "type": "horizon",
      "linkedSection": "when",
      "title": "How value perception evolves",
      "content": "<strong>Week 1:</strong> \"This feels like a lot of setup\"<br>\n          <strong>Week 2:</strong> \"Wait, my domains are getting really good at their jobs\"<br>\n          <strong>Month 1:</strong> \"I can't imagine going back to one Claude\"<br>\n          <strong>Month 3:</strong> \"This is self-legibility - I understand my life better\"<br><br>\n          <em>Don't judge domain isolation by week 1 overhead.</em>"
    },
    {
      "id": "inv-26",
      "type": "invariant",
      "linkedSection": "when",
      "title": "Domain Isolation shares INV-001 with all patterns",
      "content": "<strong>INV-001:</strong> Context is a constraint, not a resource.<br><br>\n          Ralph: Fresh context per iteration.<br>\n          Gas Town: Specialized agents with focused context.<br>\n          Domain Isolation: Separate context per life domain.<br><br>\n          <em>Same principle at different scales: personal, project, life-system.</em>"
    },
    {
      "id": "eff-27",
      "type": "effect",
      "linkedSection": "when",
      "title": "At month 3, domain expertise compounds",
      "content": "<strong>Phenomenon:</strong> Each domain's CLAUDE.md accumulates learnings. Domain agents \"know\" your patterns, preferences, edge cases.<br>\n          <strong>Implication:</strong> What felt like overhead at week 1 becomes institutional memory.<br>\n          <strong>Threshold:</strong> ~3 months for substantial domain expertise compounding."
    },
    {
      "id": "war-28",
      "type": "warstory",
      "linkedSection": "files",
      "title": "Boris Cherny: Parallel Sessions Workflow",
      "content": "Claude Code creator uses isolated sessions for different work streams. \"I have Claude open in multiple terminals, each with different context.\"<br><br>\n          <em>Even the creator uses domain isolation principles.</em>"
    },
    {
      "id": "fron-29",
      "type": "frontier",
      "linkedSection": "files",
      "title": "UNSOLVED: Automated domain boundary detection",
      "content": "<strong>The question:</strong> Can we automatically detect when context is becoming mixed-domain?<br>\n          <strong>Why it's hard:</strong> Domain boundaries are semantic, not syntactic. \"Health\" and \"productivity\" overlap.<br>\n          <strong>Current practice:</strong> Manual domain design. Human judgment for boundaries."
    },
    {
      "id": "con-30",
      "type": "constraint",
      "linkedSection": "path",
      "title": "Privacy constraint cascades to architecture",
      "content": "<strong>ROOT:</strong> Health data should not mingle with work code<br>\n          → Need separate directories<br>\n          → Need separate Claude instances<br>\n          → Need separate CLAUDE.md rules<br>\n          → Need explicit handoff protocol<br>\n          → Need correlation engine for synthesis<br>\n          <em>Privacy concern → Full Panopticon architecture</em>"
    }
  ]
}