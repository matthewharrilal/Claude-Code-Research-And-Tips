<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SYSTEM: Remote Mac Control — Brain/Tunnel/Body Architecture</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    /* ============================================
       RESET + SOUL CONSTRAINTS
       ============================================ */

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      border-radius: 0; /* SOUL CONSTRAINT — absolute prohibition */
    }

    /* ============================================
       DESIGN TOKENS
       ============================================ */

    :root {
      /* Soul Constraints */
      --border-radius: 0;
      --box-shadow: none;

      /* Primary Colors */
      --color-primary: #E83025;
      --color-background: #FEF9F5;
      --color-text: #1A1A1A;
      --color-text-secondary: #666666;
      --color-border: #E0D5C5;
      --color-border-subtle: #F0EBE3;

      /* Accent Colors */
      --accent-blue: #4A90D9;
      --accent-green: #4A9D6B;
      --accent-coral: #C97065;
      --accent-amber: #D97706;
      --accent-purple: #7C3AED;

      /* Zone Colors — strengthened for cross-viewport differentiation */
      --color-zone-sparse: #FEF9F5;
      --color-zone-dense: #FAFAFA;
      --color-zone-breathing: #F5EFE4;

      /* Typography */
      --font-display: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

      /* Type Scale */
      --type-page: 2.5rem;
      --type-section: 1.625rem;
      --type-subsection: 1.375rem;
      --type-body: 1rem;
      --type-code: 0.875rem;
      --type-meta: 0.75rem;

      /* Spacing Scale */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --space-16: 64px;
      --space-20: 80px;
      --space-24: 96px;

      /* Border Widths */
      --border-structural: 4px;
      --border-accent: 3px;
      --border-micro: 1px;

      /* Syntax Highlighting */
      --syntax-keyword: #E83025;
      --syntax-string: #6B9B7A;
      --syntax-comment: #666666;
      --syntax-function: #4A7C9B;
      --syntax-type: #C97065;
      --syntax-number: #D97706;
      --syntax-punctuation: #E0D5C5;

      /* Solid Offset */
      --offset-x: 4px;
      --offset-y: 4px;
      --offset-color: #1A1A1A;
    }

    /* ============================================
       BASE STYLES
       ============================================ */

    body {
      font-family: var(--font-body);
      font-size: 18px;
      line-height: 1.7;
      color: var(--color-text);
      background: var(--color-background);
    }

    .page-container {
      max-width: 960px;
      margin: 0 auto;
      padding: 0 var(--space-12);
    }

    /* ============================================
       TYPOGRAPHY
       ============================================ */

    h1, h2, h3 {
      font-family: var(--font-display);
      font-weight: 400;
    }

    h1 {
      font-size: var(--type-page);
      margin-bottom: var(--space-6);
    }

    h2 {
      font-size: var(--type-section);
      margin-top: var(--space-8);
      margin-bottom: var(--space-4);
    }

    h3 {
      font-size: var(--type-subsection);
      font-style: italic;
      margin-top: var(--space-6);
      margin-bottom: var(--space-4);
    }

    p {
      margin-bottom: var(--space-4);
    }

    ul, ol {
      margin-bottom: var(--space-4);
      padding-left: var(--space-8);
    }

    li {
      margin-bottom: var(--space-2);
    }

    strong {
      font-weight: 600;
    }

    code {
      font-family: var(--font-mono);
      font-size: var(--type-code);
      background: var(--color-zone-breathing);
      padding: 2px 6px;
      border: 1px solid var(--color-border-subtle);
    }

    /* ============================================
       HEADER + FOOTER (Z-ROOF / Z-FOUND)
       ============================================ */

    header {
      background: var(--color-text);
      color: var(--color-background);
      border-bottom: 3px solid var(--color-primary);
      padding: var(--space-10) 0 var(--space-8) 0;
    }

    header .page-container {
      padding: 0 var(--space-12);
    }

    header h1 {
      margin-bottom: var(--space-3);
    }

    header .subtitle {
      font-size: var(--type-subsection);
      font-style: italic;
      margin-bottom: var(--space-2);
      opacity: 0.85;
    }

    header .meta {
      font-family: var(--font-mono);
      font-size: 0.8125rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      opacity: 0.85;
    }

    footer {
      background: var(--color-text);
      color: var(--color-background);
      border-top: 3px solid var(--color-primary);
      padding: var(--space-12) 0;
      margin-top: var(--space-8);
    }

    footer .page-container {
      padding: 0 var(--space-12);
    }

    footer .footer-title {
      font-family: var(--font-display);
      font-size: var(--type-section);
      margin-bottom: var(--space-3);
    }

    footer .footer-meta {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      opacity: 0.85;
      margin-bottom: var(--space-2);
    }

    footer .footer-provenance {
      font-size: var(--type-code);
      opacity: 0.75;
    }

    /* ============================================
       ZONE BACKGROUNDS
       ============================================ */

    .zone-ext {
      background: var(--color-zone-sparse);
      padding: var(--space-10) 0;
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .zone-lobby {
      background: var(--color-zone-breathing);
      padding: var(--space-8) 0;
      border-left: 4px solid var(--color-border);
      border-top: 1px solid var(--color-border);
      border-bottom: 1px solid var(--color-border);
    }

    .zone-sec {
      background: var(--color-zone-dense);
      padding: var(--space-6) 0;
      border-left: 4px solid var(--color-border);
      border-right: 4px solid var(--color-border);
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .zone-sec-vault {
      background: var(--color-zone-dense);
      padding: var(--space-5) 0;
      border-left: 4px solid var(--color-border);
      border-right: 4px solid var(--color-border);
      border-top: 1px solid var(--color-border);
      border-bottom: 1px solid var(--color-border);
    }

    .zone-ops {
      background: var(--color-zone-breathing);
      padding: var(--space-5) 0;
      border-top: 3px solid var(--color-primary);
      border-bottom: 1px solid var(--color-border-subtle);
    }

    .zone-ops-strategy {
      background: var(--color-zone-breathing);
      padding: var(--space-5) 0;
      border-left: 3px solid var(--color-primary);
      border-top: 1px solid var(--color-border-subtle);
    }

    .zone-all {
      background: var(--color-zone-sparse);
      padding: var(--space-6) 0;
      border-top: 1px solid var(--color-border);
    }

    /* ============================================
       ZONE INDICATORS
       ============================================ */

    .zone-indicator {
      display: flex;
      align-items: baseline;
      gap: var(--space-4);
      padding-bottom: var(--space-4);
      border-bottom: 1px solid var(--color-border);
      margin-bottom: var(--space-5);
    }

    .zone-indicator__level {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
    }

    .zone-indicator__name {
      font-family: var(--font-display);
      font-size: var(--type-subsection);
      font-style: italic;
      color: var(--color-text);
    }

    /* ============================================
       CHECKPOINT DIVIDERS (Transitions)
       ============================================ */

    .checkpoint-bridge {
      margin: 0;
      background: var(--color-text);
      color: var(--color-background);
      padding: var(--space-4) 0;
      border-top: none;
      border-bottom: none;
    }

    .checkpoint-bridge p {
      margin: 0;
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-background);
      font-style: normal;
      opacity: 0.7;
    }

    .checkpoint-security-desk {
      margin: 0;
      border-top: 3px solid var(--color-border);
      border-bottom: 3px solid var(--color-border);
      padding: var(--space-3) 0;
      background: var(--color-zone-breathing);
    }

    .checkpoint-vault-door {
      margin: 0;
      background: var(--color-text);
      border-top: 4px solid var(--color-primary);
      border-bottom: 4px solid var(--color-primary);
      padding: var(--space-4) 0;
    }

    .checkpoint-smooth {
      margin: var(--space-6) 0;
      border-top: 1px solid var(--color-border);
    }

    .checkpoint-label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      margin: 0;
      text-align: center;
    }

    .vault-door-label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: var(--color-background);
      margin: 0;
      text-align: center;
    }

    /* ============================================
       CALLOUTS (2-Zone Component DNA)
       ============================================ */

    .callout {
      margin: var(--space-6) 0;
      padding: var(--space-6);
    }

    .callout--info {
      background: #F5F8FA;
      border-left: 4px solid var(--accent-blue);
    }

    .callout--tip {
      background: #F5FAF5;
      border-left: 4px solid var(--accent-green);
    }

    .callout--gotcha {
      background: #FEF6F5;
      border-left: 4px solid var(--color-primary);
    }

    .callout--essence {
      background: #FEF9F0;
      border-left: 4px solid var(--accent-amber);
    }

    .callout__label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: var(--space-3);
      font-weight: 600;
    }

    .callout__body p:last-child {
      margin-bottom: 0;
    }

    /* ============================================
       CODE BLOCKS
       ============================================ */

    pre {
      background: var(--color-text);
      color: var(--color-background);
      border: 3px solid var(--color-border);
      padding: var(--space-6) var(--space-8);
      margin: var(--space-6) 0;
      overflow-x: auto;
      font-family: var(--font-mono);
      font-size: var(--type-code);
      line-height: 1.5;
    }

    pre code {
      background: transparent;
      border: none;
      padding: 0;
      color: inherit;
    }

    .featured-artifact {
      position: relative;
    }

    .featured-artifact::after {
      content: '';
      position: absolute;
      top: var(--offset-y);
      left: var(--offset-x);
      width: 100%;
      height: 100%;
      background: var(--offset-color);
      z-index: -1;
    }

    /* ============================================
       TABLES
       ============================================ */

    table {
      width: 100%;
      border-collapse: collapse;
      margin: var(--space-6) 0;
    }

    th {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      text-align: left;
      padding: var(--space-3) var(--space-4);
      border-bottom: 3px solid var(--color-border);
      font-weight: 600;
    }

    td {
      padding: var(--space-3) var(--space-4);
      border-bottom: 1px solid var(--color-border-subtle);
    }

    tr:last-child td {
      border-bottom: none;
    }

    /* ============================================
       VERIFICATION STATIONS
       ============================================ */

    .verification-station {
      border-left: 4px solid var(--accent-green);
      padding: var(--space-6);
      margin: var(--space-8) 0;
      background: #F5FAF5;
    }

    .verification-station__header {
      display: flex;
      align-items: baseline;
      gap: var(--space-4);
      margin-bottom: var(--space-4);
    }

    .verification-station__number {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent-green);
      font-weight: 600;
    }

    .verification-station__name {
      font-family: var(--font-display);
      font-size: var(--type-subsection);
      font-style: italic;
    }

    .verification-station__command {
      margin-top: var(--space-4);
    }

    .verification-station__expected {
      font-size: var(--type-body);
      color: var(--color-text-secondary);
      margin-top: var(--space-3);
      padding-top: var(--space-3);
      border-top: 1px solid var(--color-border-subtle);
    }

    /* ============================================
       INTEGRATION WORKSTATIONS
       ============================================ */

    .workstation {
      border: 3px solid var(--color-border);
      margin: var(--space-8) 0;
    }

    .workstation__titlebar {
      display: flex;
      align-items: baseline;
      gap: var(--space-4);
      padding: var(--space-4) var(--space-6);
      border-bottom: 1px solid var(--color-border);
      background: var(--color-text);
      color: var(--color-background);
    }

    .workstation__id {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-background);
      opacity: 0.7;
    }

    .workstation__name {
      font-family: var(--font-display);
      font-size: var(--type-subsection);
      font-style: italic;
      color: var(--color-background);
    }

    .workstation__body {
      padding: var(--space-6);
    }

    /* ============================================
       VISUAL VARIETY: Security Stack + Featured Tables
       ============================================ */

    .security-stack {
      border-left: 4px solid var(--color-primary);
      padding-left: var(--space-6);
      margin: var(--space-6) 0;
    }

    .security-stack pre {
      border-left: 2px solid var(--color-primary);
    }

    .featured-artifact table {
      border: 3px solid var(--color-text);
    }

    .featured-artifact table th {
      background: var(--color-text);
      color: var(--color-background);
      border-bottom: 3px solid var(--color-primary);
    }

    .featured-artifact table td {
      border-bottom: 1px solid var(--color-border);
    }

    /* ============================================
       RHYTHM VARIATION: Tighter headings in later zones
       ============================================ */

    .zone-sec h2,
    .zone-sec-vault h2 {
      margin-top: var(--space-8);
    }

    .zone-sec h3,
    .zone-sec-vault h3 {
      margin-top: var(--space-6);
    }

    .zone-ops h2,
    .zone-ops-strategy h2 {
      margin-top: var(--space-8);
    }

    /* ============================================
       ZONE INDICATOR COLOR PROGRESSION
       ============================================ */

    .zone-ext .zone-indicator {
      border-bottom-color: var(--color-border);
    }

    .zone-lobby .zone-indicator {
      border-bottom-color: var(--accent-blue);
    }

    .zone-sec .zone-indicator {
      border-bottom-color: var(--color-text);
    }

    .zone-ops .zone-indicator {
      border-bottom-color: var(--color-primary);
    }

    /* ============================================
       WIDE VIEWPORT (1200px+)
       Make 960px column feel intentional
       ============================================ */

    @media (min-width: 1200px) {
      body {
        font-size: 19px;
      }

      h1 {
        font-size: 2.75rem;
      }

      /* Modest vertical padding increase — 130% of base, not 200%+ */
      .zone-ext {
        padding: var(--space-12) 0;
      }

      .zone-lobby {
        padding: var(--space-10) 0;
      }

      .zone-sec {
        padding: var(--space-8) 0;
      }

      .zone-sec-vault {
        padding: var(--space-6) 0;
      }

      .zone-ops {
        padding: var(--space-6) 0;
      }

      .zone-ops-strategy {
        padding: var(--space-6) 0;
      }

      .zone-all {
        padding: var(--space-8) 0;
      }

      /* Header: more assertive at wide viewport */
      header .meta {
        letter-spacing: 0.15em;
      }

      /* Checkpoint transitions: more prominent at wide viewports */
      .checkpoint-security-desk {
        border-top-width: 4px;
        padding: var(--space-4) 0;
      }

      .checkpoint-vault-door {
        border-top-width: 5px;
        padding: var(--space-5) 0;
      }

      .checkpoint-bridge {
        border-top: 2px solid rgba(255,255,255,0.1);
        border-bottom: 2px solid rgba(255,255,255,0.1);
      }

      /* Zone side accents — activate flanking space */
      .zone-ext {
        position: relative;
      }

      .zone-ext::before {
        content: '';
        position: absolute;
        left: calc(50% - 520px);
        top: var(--space-12);
        bottom: var(--space-12);
        width: 3px;
        background: var(--color-border);
      }

      .zone-lobby {
        position: relative;
      }

      .zone-lobby::after {
        content: '';
        position: absolute;
        right: calc(50% - 520px);
        top: var(--space-10);
        bottom: var(--space-10);
        width: 3px;
        background: var(--color-border);
      }

      .zone-sec {
        position: relative;
      }

      .zone-sec::before {
        content: '';
        position: absolute;
        left: calc(50% - 520px);
        top: var(--space-8);
        bottom: var(--space-8);
        width: 4px;
        background: var(--color-border);
      }

      .zone-sec-vault {
        position: relative;
      }

      .zone-sec-vault::after {
        content: '';
        position: absolute;
        right: calc(50% - 520px);
        top: var(--space-8);
        bottom: var(--space-8);
        width: 3px;
        background: var(--color-primary);
        opacity: 0.3;
      }

      .zone-ops {
        position: relative;
      }

      .zone-ops::before {
        content: '';
        position: absolute;
        left: calc(50% - 520px);
        top: var(--space-8);
        bottom: var(--space-8);
        width: 3px;
        background: var(--color-border);
      }

      .zone-all {
        position: relative;
      }

      .zone-all::after {
        content: '';
        position: absolute;
        right: calc(50% - 520px);
        top: var(--space-8);
        bottom: var(--space-8);
        width: 3px;
        background: var(--color-border);
      }
    }

    /* ============================================
       EXTRA-WIDE VIEWPORT (1600px+)
       Activate flanking space with zone accents
       ============================================ */

    @media (min-width: 1600px) {
      .page-container {
        padding: 0 var(--space-16);
      }

      .zone-indicator {
        margin-bottom: var(--space-10);
      }

      .featured-artifact {
        margin: var(--space-10) 0;
      }

      .workstation {
        margin: var(--space-12) 0;
      }

      .verification-station {
        margin: var(--space-10) 0;
      }
    }

    /* ============================================
       NARROW VIEWPORT (max-width: 768px)
       ============================================ */

    @media (max-width: 768px) {
      body {
        font-size: 16px;
      }

      .page-container {
        padding: 0 var(--space-6);
      }

      h1 {
        font-size: 2rem;
      }

      h2 {
        font-size: 1.5rem;
        margin-top: var(--space-6);
        margin-bottom: var(--space-3);
      }

      h3 {
        font-size: 1.25rem;
        margin-top: var(--space-5);
      }

      .zone-ext,
      .zone-lobby,
      .zone-sec,
      .zone-sec-vault,
      .zone-ops,
      .zone-ops-strategy,
      .zone-all {
        padding: var(--space-8) 0;
      }

      /* Tables: horizontal scroll wrapper */
      table {
        display: block;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      thead, tbody, tr {
        display: table;
        width: 100%;
        table-layout: fixed;
      }

      /* Code blocks: prevent horizontal blowout */
      pre {
        font-size: 0.8rem;
        padding: var(--space-4) var(--space-6);
        white-space: pre-wrap;
        word-break: break-word;
      }

      /* Callouts: tighter padding */
      .callout {
        padding: var(--space-4);
      }

      /* Workstations: tighter */
      .workstation__body {
        padding: var(--space-4);
      }

      .workstation__titlebar {
        padding: var(--space-3) var(--space-4);
      }

      /* Checkpoint transitions: less vertical space */
      .checkpoint-bridge {
        margin: var(--space-4) 0;
        padding: var(--space-3) 0;
      }

      .checkpoint-security-desk,
      .checkpoint-vault-door {
        margin: var(--space-5) 0;
        padding: var(--space-3) 0;
      }

      .checkpoint-smooth {
        margin: var(--space-4) 0;
      }

      /* Zone side borders: reduce on mobile */
      .zone-lobby {
        border-left-width: 3px;
      }

      .zone-sec,
      .zone-sec-vault {
        border-left-width: 3px;
        border-right-width: 3px;
      }

      /* Header/footer: less padding */
      header {
        padding: var(--space-8) 0 var(--space-6) 0;
      }

      footer {
        padding: var(--space-8) 0;
        margin-top: var(--space-6);
      }
    }

    /* ============================================
       EXTRA-NARROW VIEWPORT (max-width: 480px)
       Prevent overflow on phones
       ============================================ */

    @media (max-width: 480px) {
      body {
        font-size: 15px;
      }

      .page-container {
        padding: 0 var(--space-4);
      }

      h1 {
        font-size: 1.75rem;
      }

      h2 {
        font-size: 1.375rem;
      }

      h3 {
        font-size: 1.125rem;
      }

      /* ASCII diagrams: must scroll horizontally */
      pre {
        white-space: pre;
        word-break: normal;
        overflow-x: auto;
        font-size: 0.7rem;
        line-height: 1.4;
      }

      /* Zone indicators: stack vertically */
      .zone-indicator {
        flex-direction: column;
        gap: var(--space-2);
      }

      /* Workstation titlebar: stack */
      .workstation__titlebar {
        flex-direction: column;
        gap: var(--space-2);
      }

      /* Verification station header: stack */
      .verification-station__header {
        flex-direction: column;
        gap: var(--space-2);
      }

      /* Tables: allow natural overflow with scroll */
      table {
        font-size: 0.8rem;
      }

      th, td {
        padding: var(--space-2) var(--space-3);
      }
    }
  </style>
</head>
<body>

  <!-- ============================================
       HEADER (Z-ROOF)
       ============================================ -->

  <header>
    <div class="page-container">
      <h1>SYSTEM: Remote Mac Control</h1>
      <div class="subtitle">Brain/Tunnel/Body Architecture for AI-Powered Mac Orchestration</div>
      <div class="meta">v1.0.0 • 285+ Stars • MIT License</div>
    </div>
  </header>

  <!-- ============================================
       ZONE 1: EXTERIOR (Z-EXT)
       ============================================ -->

  <section class="zone-ext">
    <div class="page-container">
      <div class="zone-indicator">
        <span class="zone-indicator__level">ZONE 1 OF 4</span>
        <span class="zone-indicator__name">EXTERIOR</span>
      </div>

      <div class="callout callout--info">
        <div class="callout__label">You Are Here</div>
        <div class="callout__body">
          <p><strong>Context:</strong> You're exploring infrastructure patterns for AI agent systems. SYSTEM represents a novel approach: separating the AI "brain" (Claude running on Cloudflare) from the execution "body" (your Mac). This is the Brain/Tunnel/Body architecture pattern.</p>
          <p><strong>Why This Matters Now:</strong> Remote execution enables Claude to control your Mac from anywhere. The tunnel pattern solves the "how do I give AI access to my computer safely" problem. This architecture directly enables Remote Ralph, Distributed Gas Town, and Multi-Mac Orchestration.</p>
        </div>
      </div>

      <h2>What This Is</h2>
      <p><strong>SYSTEM</strong> is a self-hosted AI assistant that enables remote control of macOS through natural language commands. Created by <a href="https://github.com/ygwyg/system">ygwyg</a>, it's an MIT-licensed project with 285+ GitHub stars.</p>

      <p><strong>Core Capability:</strong> Tell Claude "play some jazz music" from your phone, and your home Mac starts playing Apple Music.</p>

      <h3>Key Features</h3>
      <table>
        <thead>
          <tr>
            <th>Feature</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Music Control</strong></td>
            <td>Play, pause, skip, search Apple Music via natural language</td>
          </tr>
          <tr>
            <td><strong>Calendar/Reminders</strong></td>
            <td>Query events, create reminders, manage scheduling</td>
          </tr>
          <tr>
            <td><strong>Notes</strong></td>
            <td>Create and search Apple Notes</td>
          </tr>
          <tr>
            <td><strong>System Control</strong></td>
            <td>Volume, display settings, notifications, clipboard</td>
          </tr>
          <tr>
            <td><strong>File Management</strong></td>
            <td>Browse, open, organize files via Finder</td>
          </tr>
          <tr>
            <td><strong>Apple Shortcuts</strong></td>
            <td>Execute any Shortcut you've created</td>
          </tr>
          <tr>
            <td><strong>Raycast Extensions</strong></td>
            <td>Dynamically discover and invoke Raycast commands</td>
          </tr>
          <tr>
            <td><strong>Shell Commands</strong></td>
            <td>Execute allowlisted shell commands safely</td>
          </tr>
          <tr>
            <td><strong>Screenshots</strong></td>
            <td>Capture and analyze screen content with Claude Vision</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- ============================================
       TRANSITION: Entry Gate (BRIDGE)
       ============================================ -->

  <div class="checkpoint-bridge">
    <div class="page-container">
      <p>Entering the Architecture — Understanding the Three-Layer Separation</p>
    </div>
  </div>

  <!-- ============================================
       ZONE 2: LOBBY (Z-LOBBY)
       ============================================ -->

  <section class="zone-lobby">
    <div class="page-container">
      <div class="zone-indicator">
        <span class="zone-indicator__level">ZONE 2 OF 4</span>
        <span class="zone-indicator__name">LOBBY</span>
      </div>

      <h2>Why It Matters: The Brain/Tunnel/Body Architecture</h2>
      <p>SYSTEM introduces a <strong>distributed execution model</strong> that solves fundamental problems in AI agent design.</p>

      <h3>The Problem</h3>
      <p>Traditional AI agents face a dilemma:</p>
      <ul>
        <li><strong>Local execution:</strong> Fast and secure, but tied to one machine</li>
        <li><strong>Cloud execution:</strong> Accessible anywhere, but can't touch your local resources</li>
      </ul>

      <h3>The Solution: Three-Layer Separation</h3>

      <div class="featured-artifact">
        <pre><code>┌─────────────────────────────────────────────────────────────────┐
│                      B R A I N                                   │
│                  (Cloudflare Worker)                            │
│                                                                  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────┐  │
│  │  Claude AI   │  │  Scheduling  │  │  State Management    │  │
│  │  integration │  │    engine    │  │  (Durable Objects)   │  │
│  └──────────────┘  └──────────────┘  └──────────────────────┘  │
│                                                                  │
│                        ↓  HTTPS  ↓                              │
└─────────────────────────────────────────────────────────────────┘
                              │
                              │ Bearer Token Auth
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                     T U N N E L                                  │
│                    (HTTP Bridge)                                │
│                                                                  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────┐  │
│  │   Auth &     │  │    Rate      │  │     Request          │  │
│  │  validation  │  │   limiting   │  │     routing          │  │
│  └──────────────┘  └──────────────┘  └──────────────────────┘  │
│                                                                  │
│                        ↓  Local  ↓                              │
└─────────────────────────────────────────────────────────────────┘
                              │
                              │ Tool Execution
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                      B O D Y                                     │
│                    (macOS System)                               │
│                                                                  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────┐  │
│  │  AppleScript │  │    Shell     │  │     Raycast          │  │
│  │   executor   │  │   commands   │  │    extensions        │  │
│  └──────────────┘  └──────────────┘  └──────────────────────┘  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘</code></pre>
      </div>

      <h3>Why This Architecture Matters</h3>

      <p><strong>1. Security Through Separation</strong></p>
      <ul>
        <li>The Brain (Claude) never has direct system access</li>
        <li>All commands flow through authenticated, rate-limited, allowlisted channels</li>
        <li>The Tunnel validates every request before execution</li>
      </ul>

      <p><strong>2. Scalability</strong></p>
      <ul>
        <li>One Brain can control multiple Bodies (Macs)</li>
        <li>Multiple Brains can share one Body (multi-user scenarios)</li>
        <li>The Tunnel handles routing and authorization</li>
      </ul>

      <p><strong>3. Reliability</strong></p>
      <ul>
        <li>Brain failure doesn't affect Body operation</li>
        <li>Body restart doesn't lose Brain state</li>
        <li>Tunnel can buffer during disconnections</li>
      </ul>

      <p><strong>4. Flexibility</strong></p>
      <ul>
        <li>Replace Brain with different AI providers</li>
        <li>Add new Body capabilities without Brain changes</li>
        <li>Tunnel can transform protocols between layers</li>
      </ul>
    </div>
  </section>

  <!-- ============================================
       TRANSITION: Security Desk (BREATHING)
       ============================================ -->

  <div class="checkpoint-security-desk">
    <div class="page-container">
      <p class="checkpoint-label">CLEARANCE CHECKPOINT — Entering Secured Technical Wing</p>
    </div>
  </div>

  <!-- ============================================
       ZONE 3A: SECURED WING - Architecture Deep Dive (Z-SEC)
       ============================================ -->

  <section class="zone-sec">
    <div class="page-container">
      <div class="zone-indicator">
        <span class="zone-indicator__level">ZONE 3 OF 4</span>
        <span class="zone-indicator__name">SECURED WING</span>
      </div>

      <h2>Architecture Deep Dive</h2>

      <h3>Component 1: The Agent (Brain)</h3>
      <p><strong>Technology:</strong> Cloudflare Workers with Durable Objects</p>
      <p>The Agent handles all AI reasoning and state management:</p>

      <pre><code>// Two-model strategy for efficiency
const INTENT_CLASSIFIER = "claude-3-5-haiku-20241022";   // Fast
const REASONING_ENGINE = "claude-3-5-sonnet-20241022";   // Smart

// Classification categories
const INTENT_CATEGORIES = [
  "messages_read", "messages_send", "music", "system",
  "calendar", "reminders", "files", "shortcuts",
  "browser", "raycast", "notes", "other"
];</code></pre>

      <p><strong>Key Capabilities:</strong></p>

      <p><strong>1. Intent Classification</strong></p>
      <ul>
        <li>Fast Haiku model categorizes user requests</li>
        <li>Reduces tool set sent to reasoning model</li>
        <li>Example: "play some music" → <code>music</code> category → only music tools exposed</li>
      </ul>

      <p><strong>2. Multi-Conversation State</strong></p>
      <pre><code>interface AgentState {
  conversations: Map&lt;string, {
    messages: Message[];
    pendingActions: PendingAction[];
  }&gt;;
  schedules: Schedule[];
  preferences: UserPreferences;
}</code></pre>

      <p><strong>3. Scheduling Engine</strong></p>
      <ul>
        <li>Parses natural language: "in 30 minutes", "every day at 9am"</li>
        <li>Supports cron syntax: <code>0 9 * * 1-5</code></li>
        <li>Actions execute asynchronously, results broadcast via WebSocket</li>
      </ul>

      <p><strong>4. Human-in-the-Loop</strong></p>
      <ul>
        <li>Sensitive actions (sending messages) require confirmation</li>
        <li>Pending actions stored until user approves</li>
        <li>Regex-based approval: <code>/^(yes|yeah|yep|sure|ok|do it)/i</code></li>
      </ul>

      <div class="checkpoint-smooth"></div>

      <h3>Component 2: The Bridge (Tunnel)</h3>
      <p><strong>Technology:</strong> Express.js HTTP server running locally</p>
      <p>The Bridge translates AI requests into system actions:</p>

      <pre><code>// Security middleware stack
app.use(json({ limit: '100kb' }));           // Payload limits
app.use(securityHeaders());                   // XSS, clickjacking protection
app.use(rateLimiter({ max: 60, window: 60 })); // 60 req/min
app.use(authenticate(BRIDGE_AUTH_TOKEN));     // Token validation</code></pre>

      <p><strong>Endpoints:</strong></p>
      <table>
        <thead>
          <tr>
            <th>Endpoint</th>
            <th>Method</th>
            <th>Auth</th>
            <th>Purpose</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>/health</code></td>
            <td>GET</td>
            <td>No</td>
            <td>Connectivity check</td>
          </tr>
          <tr>
            <td><code>/tools</code></td>
            <td>GET</td>
            <td>Yes</td>
            <td>List available tools with schemas</td>
          </tr>
          <tr>
            <td><code>/execute</code></td>
            <td>POST</td>
            <td>Yes</td>
            <td>Run single tool with arguments</td>
          </tr>
          <tr>
            <td><code>/batch</code></td>
            <td>POST</td>
            <td>Yes</td>
            <td>Execute up to 10 tools sequentially</td>
          </tr>
          <tr>
            <td><code>/logs</code></td>
            <td>GET</td>
            <td>Yes</td>
            <td>Retrieve execution audit trail</td>
          </tr>
        </tbody>
      </table>

      <div class="checkpoint-smooth"></div>

      <h3>Component 3: The Tools (Body)</h3>
      <p><strong>Technology:</strong> TypeScript modules wrapping AppleScript, shell commands, and URL schemes</p>
      <p>SYSTEM provides 60+ tools organized by domain:</p>

      <p><strong>Core Tools:</strong></p>
      <pre><code>// AppleScript execution with safety
const runAppleScript = async (script: string): Promise&lt;string&gt; =&gt; {
  // Block dangerous patterns
  const BLOCKED_PATTERNS = [
    /do shell script/i,      // Shell escape
    /keychain/i,             // Credential access
    /delete every/i,         // Mass deletion
    /rm -rf/i                // Recursive delete
  ];

  for (const pattern of BLOCKED_PATTERNS) {
    if (pattern.test(script)) {
      throw new Error("Script contains blocked pattern");
    }
  }

  return execCommand('osascript', ['-e', script]);
};</code></pre>
    </div>
  </section>

  <!-- ============================================
       ZONE 3B: SECURED WING - Installation & Setup (Z-SEC)
       ============================================ -->

  <section class="zone-sec">
    <div class="page-container">
      <h2>Installation and Setup</h2>

      <h3>Option 1: Desktop App (Recommended)</h3>
      <ol>
        <li><strong>Download</strong> SYSTEM.app from <a href="https://github.com/ygwyg/system/releases">GitHub Releases</a></li>
        <li><strong>Move</strong> to Applications folder</li>
        <li><strong>Launch</strong> and follow guided setup:
          <ul>
            <li>Enter Anthropic API key</li>
            <li>Configure permissions (Accessibility, Screen Recording, Automation)</li>
            <li>The app handles Bridge deployment automatically</li>
          </ul>
        </li>
        <li><strong>Access</strong> via menu bar icon or web interface</li>
      </ol>

      <h3>Option 2: CLI Installation</h3>
      <p><strong>Prerequisites:</strong></p>
      <ul>
        <li>macOS</li>
        <li>Node.js 18+</li>
        <li>Anthropic API key</li>
      </ul>

      <p><strong>Step 1: Clone and Install</strong></p>
      <pre><code>git clone https://github.com/ygwyg/system.git
cd system
npm install</code></pre>

      <p><strong>Step 2: Run Setup Wizard</strong></p>
      <pre><code>npm run setup</code></pre>

      <p>This interactive wizard configures:</p>
      <ul>
        <li>Anthropic API credentials</li>
        <li>Bridge authentication token</li>
        <li>Cloudflare Worker deployment</li>
        <li>macOS permissions</li>
      </ul>

      <p><strong>Step 3: Start Everything</strong></p>
      <pre><code>npm start</code></pre>

      <h3>Configuration Options</h3>

      <p><strong>Environment Variables:</strong></p>
      <table>
        <thead>
          <tr>
            <th>Variable</th>
            <th>Description</th>
            <th>Default</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>BRIDGE_AUTH_TOKEN</code></td>
            <td>Secure authentication token</td>
            <td>(required)</td>
          </tr>
          <tr>
            <td><code>HOST</code></td>
            <td>Bind address</td>
            <td>127.0.0.1</td>
          </tr>
          <tr>
            <td><code>PORT</code></td>
            <td>Server port</td>
            <td>3456</td>
          </tr>
          <tr>
            <td><code>LOG_LEVEL</code></td>
            <td>Logging verbosity</td>
            <td>info</td>
          </tr>
        </tbody>
      </table>

      <h3>macOS Permissions</h3>
      <p>SYSTEM requires three permissions:</p>
      <ol>
        <li><strong>Accessibility</strong> — Purpose: Keyboard/mouse control, window management. Grant: System Preferences → Security & Privacy → Accessibility</li>
        <li><strong>Screen Recording</strong> — Purpose: Screenshot capture for Vision analysis. Grant: System Preferences → Security & Privacy → Screen Recording</li>
        <li><strong>Automation</strong> — Purpose: Control third-party apps (Finder, Safari, Notes, Calendar). Grant: Prompted on first use, or System Preferences → Security & Privacy → Automation</li>
      </ol>
    </div>
  </section>

  <!-- ============================================
       ZONE 3C: SECURED WING - Security (Z-SEC-VAULT)
       ============================================ -->

  <section class="zone-sec-vault">
    <div class="page-container">
      <h2>Security Considerations</h2>

      <h3>Threat Model</h3>
      <p><strong>What SYSTEM Protects Against:</strong></p>
      <table>
        <thead>
          <tr>
            <th>Threat</th>
            <th>Mitigation</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Unauthorized access</td>
            <td>Bearer token authentication, timing-safe comparison</td>
          </tr>
          <tr>
            <td>Injection attacks</td>
            <td>AppleScript pattern blocking, shell command allowlisting</td>
          </tr>
          <tr>
            <td>Rate-based attacks</td>
            <td>60 req/min limit with IP tracking</td>
          </tr>
          <tr>
            <td>Data exfiltration</td>
            <td>Localhost-only binding by default</td>
          </tr>
          <tr>
            <td>Session hijacking</td>
            <td>Automatic token generation, no session cookies</td>
          </tr>
          <tr>
            <td>Credential logging</td>
            <td>Sensitive parameters sanitized before audit log</td>
          </tr>
        </tbody>
      </table>

      <div class="callout callout--gotcha">
        <div class="callout__label">What SYSTEM Does NOT Protect Against</div>
        <div class="callout__body">
          <table>
            <thead>
              <tr>
                <th>Threat</th>
                <th>Why</th>
                <th>Mitigation</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Compromised API key</td>
                <td>Attacker gains full access</td>
                <td>Rotate keys regularly, use Cloudflare Access</td>
              </tr>
              <tr>
                <td>Malicious prompts</td>
                <td>Claude might be tricked</td>
                <td>Human-in-the-loop for sensitive actions</td>
              </tr>
              <tr>
                <td>Physical access</td>
                <td>Local attacker can bypass</td>
                <td>Standard macOS security practices</td>
              </tr>
              <tr>
                <td>Network sniffing</td>
                <td>HTTPS protects transit</td>
                <td>Ensure BRIDGE_URL uses HTTPS in production</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <h3>Security Layers</h3>

      <div class="security-stack">
      <p><strong>Layer 1: Authentication</strong></p>
      <pre><code>// Constant-time comparison prevents timing attacks
const authenticate = (token: string) =&gt; (req, res, next) =&gt; {
  const provided = req.headers.authorization?.replace('Bearer ', '');
  if (!provided || !timingSafeEqual(Buffer.from(provided), Buffer.from(token))) {
    return res.status(401).json({ error: 'Unauthorized' });
  }
  next();
};</code></pre>

      <p><strong>Layer 2: Command Filtering</strong></p>
      <pre><code>// Shell commands must be in allowlist
const SAFE_SHELL_COMMANDS = ['ls', 'pwd', 'date', 'whoami', 'echo'];

const shell_execute = async ({ command, args }) =&gt; {
  if (!SAFE_SHELL_COMMANDS.includes(command)) {
    throw new Error(`Shell command blocked: ${command}`);
  }
  return execCommand(command, args);
};</code></pre>

      <p><strong>Layer 3: AppleScript Sanitization</strong></p>
      <pre><code>// Block dangerous patterns before execution
const BLOCKED_PATTERNS = [
  /do shell script/i,        // Shell escape attempt
  /keychain/i,               // Credential access
  /delete every/i,           // Mass deletion
  /system events.*keystroke/i, // Keystroke injection
];</code></pre>

      <p><strong>Layer 4: Rate Limiting</strong></p>
      <pre><code>const rateLimiter = rateLimit({
  windowMs: 60 * 1000,  // 1 minute
  max: 60,              // 60 requests per window
  standardHeaders: true,
  legacyHeaders: false,
});</code></pre>
      </div>

      <h3>Hardening Recommendations</h3>
      <p><strong>For Production Use:</strong></p>
      <ol>
        <li><strong>Use Cloudflare Tunnel</strong> instead of port forwarding: <code>cloudflared tunnel --url http://localhost:3456</code></li>
        <li><strong>Enable Cloudflare Access</strong> for Zero Trust authentication (Add SSO/2FA before requests reach the Worker, configure allowed email domains)</li>
        <li><strong>Rotate Tokens Regularly</strong>: Generate new token with <code>openssl rand -hex 32</code>, then update both Agent and Bridge with <code>npx wrangler secret put BRIDGE_AUTH_TOKEN</code></li>
        <li><strong>Monitor Audit Logs</strong>: <code>curl -H "Authorization: Bearer $TOKEN" http://localhost:3456/logs</code></li>
        <li><strong>Restrict Shell Allowlist</strong>: Default is <code>['ls', 'pwd', 'date', 'whoami']</code>. Add only what you need. Never add: <code>rm</code>, <code>mv</code>, <code>curl</code>, <code>wget</code>, <code>eval</code></li>
      </ol>
    </div>
  </section>

  <!-- ============================================
       TRANSITION: Vault Door (BREATHING)
       ============================================ -->

  <div class="checkpoint-vault-door">
    <div class="page-container">
      <p class="vault-door-label">VAULT ACCESS — Operations Center</p>
    </div>
  </div>

  <!-- ============================================
       ZONE 4A: OPERATIONS CENTER - Integration Patterns (Z-OPS)
       ============================================ -->

  <section class="zone-ops">
    <div class="page-container">
      <div class="zone-indicator">
        <span class="zone-indicator__level">ZONE 4 OF 4</span>
        <span class="zone-indicator__name">OPERATIONS CENTER</span>
      </div>

      <h2>Integration Patterns</h2>

      <div class="workstation">
        <div class="workstation__titlebar">
          <span class="workstation__id">WS-01</span>
          <span class="workstation__name">Ralph Integration</span>
        </div>
        <div class="workstation__body">
          <p><strong>Use Case:</strong> Run Ralph loops on a remote Mac while monitoring from anywhere.</p>

          <p><strong>Why This Matters:</strong></p>
          <ul>
            <li>Keep your development machine free while Ralph runs heavy tasks</li>
            <li>Monitor progress from your phone</li>
            <li>Multiple Macs can run parallel Ralph instances</li>
          </ul>

          <p><strong>Configuration Example:</strong></p>
          <ol>
            <li><strong>On Build Mac - Create Ralph Shortcut:</strong> In Apple Shortcuts, create "Start Ralph": Run Shell Script: <code>cd /path/to/project && while :; do cat PROMPT.md | claude --print ; done</code></li>
            <li><strong>On Build Mac - Start SYSTEM Bridge:</strong> <code>cd /path/to/system/src/bridge && npm start</code></li>
            <li><strong>From Anywhere - Trigger via SYSTEM:</strong> "Run the Start Ralph shortcut"</li>
            <li><strong>Monitor Progress:</strong> "Take a screenshot of the terminal"</li>
          </ol>

          <p><strong>Advanced: Ralph with Scheduled Checkpoints</strong></p>
          <pre><code>"Every 30 minutes, take a screenshot and describe what Ralph is working on"</code></pre>
        </div>
      </div>

      <div class="workstation">
        <div class="workstation__titlebar">
          <span class="workstation__id">WS-02</span>
          <span class="workstation__name">Gas Town Integration</span>
        </div>
        <div class="workstation__body">
          <p><strong>Use Case:</strong> Distributed agent factory with Brain on server, Bodies on multiple Macs.</p>

          <p><strong>Why This Matters:</strong></p>
          <ul>
            <li>Gas Town's Mayor can orchestrate across machines</li>
            <li>Each Mac becomes a specialized "Department" (Design Mac, Dev Mac, etc.)</li>
            <li>True distributed computing for complex projects</li>
          </ul>

          <p><strong>Configuration Example:</strong></p>
          <ol>
            <li><strong>Deploy Multiple Bridges:</strong>
              <pre><code># On Dev Mac
BRIDGE_AUTH_TOKEN=dev-token PORT=3456 npm start

# On Design Mac
BRIDGE_AUTH_TOKEN=design-token PORT=3456 npm start

# On Build Mac
BRIDGE_AUTH_TOKEN=build-token PORT=3456 npm start</code></pre>
            </li>
            <li><strong>Configure Worker with Multiple Bridges:</strong>
              <pre><code>// In Cloudflare Worker environment
const BRIDGES = {
  dev: { url: 'https://dev.tunnel.io', token: env.DEV_TOKEN },
  design: { url: 'https://design.tunnel.io', token: env.DESIGN_TOKEN },
  build: { url: 'https://build.tunnel.io', token: env.BUILD_TOKEN },
};</code></pre>
            </li>
          </ol>
        </div>
      </div>

      <div class="workstation">
        <div class="workstation__titlebar">
          <span class="workstation__id">WS-03</span>
          <span class="workstation__name">CC-Mirror Integration</span>
        </div>
        <div class="workstation__body">
          <p><strong>Use Case:</strong> Remote multi-model orchestration with provider diversity.</p>

          <p><strong>Why This Matters:</strong></p>
          <ul>
            <li>CC-Mirror enables multiple AI providers (Anthropic, OpenAI, Google)</li>
            <li>SYSTEM provides the execution layer for any model's decisions</li>
            <li>Combine Claude's reasoning with GPT-4's coding with Gemini's analysis</li>
          </ul>
        </div>
      </div>

      <h3>Combination Matrix</h3>

      <div class="featured-artifact">
        <table>
          <thead>
            <tr>
              <th>SYSTEM +</th>
              <th>Use Case</th>
              <th>Complexity</th>
              <th>Value</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Ralph</strong></td>
              <td>Remote Ralph loops</td>
              <td>Medium</td>
              <td>High</td>
              <td>Monitor from anywhere, free up local machine</td>
            </tr>
            <tr>
              <td><strong>Gas Town</strong></td>
              <td>Distributed agent factory</td>
              <td>High</td>
              <td>Very High</td>
              <td>Multiple Macs = parallel departments</td>
            </tr>
            <tr>
              <td><strong>CC-Mirror</strong></td>
              <td>Multi-provider orchestration</td>
              <td>High</td>
              <td>High</td>
              <td>Best model for each task, unified execution</td>
            </tr>
            <tr>
              <td><strong>Ralph + Gas Town</strong></td>
              <td>Distributed Ralph at scale</td>
              <td>Very High</td>
              <td>Extreme</td>
              <td>N Macs running coordinated Ralph loops</td>
            </tr>
            <tr>
              <td><strong>All Three</strong></td>
              <td>Full autonomous factory</td>
              <td>Expert</td>
              <td>Maximum</td>
              <td>Multi-model, multi-machine, continuous iteration</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- ============================================
       ZONE 4B: OPERATIONS CENTER - Mental Models (Z-OPS-STRATEGY)
       ============================================ -->

  <section class="zone-ops-strategy">
    <div class="page-container">
      <h2>Mental Models</h2>

      <h3>Model 1: The Remote Desktop Paradigm Shift</h3>

      <p><strong>Traditional Remote Desktop:</strong></p>
      <ul>
        <li>Human looks at screen, decides what to do</li>
        <li>Human moves mouse, types commands</li>
        <li>High latency, requires attention</li>
      </ul>

      <p><strong>SYSTEM Paradigm:</strong></p>
      <ul>
        <li>AI "looks" at screen (Vision)</li>
        <li>AI decides and executes</li>
        <li>Low latency, autonomous operation</li>
      </ul>

      <div class="callout callout--essence">
        <div class="callout__label">Key Insight</div>
        <div class="callout__body">
          <p>SYSTEM isn't remote desktop for AI — it's giving AI its own hands.</p>
        </div>
      </div>

      <h3>Model 2: The Trust Boundary Diagram</h3>

      <pre><code>┌─────────────────────────────────────────────────────────────────┐
│                  U N T R U S T E D   Z O N E                   │
│                                                                  │
│    Internet ──────► User Input ──────► Malicious Prompts        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                 S E M I - T R U S T E D   Z O N E              │
│                                                                  │
│    Cloudflare Worker ──► Claude AI ──► Tool Selection           │
│                                                                  │
│    [Human-in-the-loop confirmation for sensitive actions]       │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                   T R U S T E D   Z O N E                      │
│                                                                  │
│    Bridge Server ──► Validation ──► Allowlisted Execution       │
│                                                                  │
│    [Pattern blocking, rate limiting, audit logging]             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    S Y S T E M   Z O N E                       │
│                                                                  │
│    macOS ──► AppleScript ──► Shell ──► Applications             │
│                                                                  │
│    [OS-level permissions, sandboxing]                           │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘</code></pre>

      <h3>Model 3: The Capability Expansion Pattern</h3>

      <pre><code>Level 0: Claude alone
         └── Can only generate text

Level 1: Claude + Local MCP
         └── Can read/write local files
         └── Can run local commands

Level 2: Claude + SYSTEM
         └── Can control Mac remotely
         └── Can schedule future actions
         └── Can maintain state across sessions

Level 3: Claude + SYSTEM + Multiple Macs
         └── Can distribute work
         └── Can parallelize tasks
         └── Can specialize machines

Level 4: Claude + SYSTEM + Gas Town + CC-Mirror
         └── Multi-model reasoning
         └── Factory-scale production
         └── Autonomous operation</code></pre>

      <h3>Model 4: The Scheduling State Machine</h3>

      <pre><code>          ┌──────────────────────────────────────┐
          │                                      │
          ▼                                      │
     ┌─────────┐     ┌─────────┐     ┌─────────┐│
     │ PENDING │────►│ RUNNING │────►│COMPLETE ││
     └─────────┘     └─────────┘     └─────────┘│
          │               │               │      │
          │               │               │      │
          │               ▼               │      │
          │          ┌─────────┐          │      │
          │          │ FAILED  │          │      │
          │          └─────────┘          │      │
          │               │               │      │
          └───────────────┴───────────────┴──────┘
                          │
                    (if recurring)</code></pre>
    </div>
  </section>

  <!-- ============================================
       TRANSITION: Utility Bridge (BRIDGE)
       ============================================ -->

  <div class="checkpoint-bridge">
    <div class="page-container">
      <p>Verification & Emergency Protocols — Facility-Wide Access</p>
    </div>
  </div>

  <!-- ============================================
       ZONE 5: FACILITY-WIDE (Z-ALL)
       ============================================ -->

  <section class="zone-all">
    <div class="page-container">
      <h2>Checkpoints</h2>

      <div class="verification-station">
        <div class="verification-station__header">
          <span class="verification-station__number">CHECK 01</span>
          <span class="verification-station__name">Bridge Running</span>
        </div>
        <div class="verification-station__command">
          <pre><code>curl http://localhost:3456/health</code></pre>
        </div>
        <div class="verification-station__expected">
          Expected: <code>{"status": "ok", "version": "1.0.0"}</code>
        </div>
      </div>

      <div class="verification-station">
        <div class="verification-station__header">
          <span class="verification-station__number">CHECK 02</span>
          <span class="verification-station__name">Authentication Working</span>
        </div>
        <div class="verification-station__command">
          <pre><code>curl -H "Authorization: Bearer YOUR_TOKEN" http://localhost:3456/tools</code></pre>
        </div>
        <div class="verification-station__expected">
          Expected: JSON array of tools with schemas
        </div>
      </div>

      <div class="verification-station">
        <div class="verification-station__header">
          <span class="verification-station__number">CHECK 03</span>
          <span class="verification-station__name">Tool Execution</span>
        </div>
        <div class="verification-station__command">
          <pre><code>curl -X POST \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"tool": "notify", "args": {"title": "Test", "message": "Hello"}}' \
  http://localhost:3456/execute</code></pre>
        </div>
        <div class="verification-station__expected">
          Expected: <code>{"success": true, "result": "Notification displayed"}</code> AND a macOS notification appears
        </div>
      </div>

      <div class="verification-station">
        <div class="verification-station__header">
          <span class="verification-station__number">CHECK 04</span>
          <span class="verification-station__name">Agent Deployment</span>
        </div>
        <div class="verification-station__command">
          <pre><code>curl -X POST \
  -H "Authorization: Bearer YOUR_API_SECRET" \
  -H "Content-Type: application/json" \
  -d '{"message": "What time is it?"}' \
  https://your-worker.workers.dev/agents/system-agent/chat</code></pre>
        </div>
        <div class="verification-station__expected">
          Expected: <code>{"response": "The current time is...", "actions": []}</code>
        </div>
      </div>

      <div class="verification-station">
        <div class="verification-station__header">
          <span class="verification-station__number">CHECK 05</span>
          <span class="verification-station__name">End-to-End Flow</span>
        </div>
        <div class="verification-station__command">
          <pre><code>curl -X POST \
  -H "Authorization: Bearer YOUR_API_SECRET" \
  -H "Content-Type: application/json" \
  -d '{"message": "Show me a notification that says Hello World"}' \
  https://your-worker.workers.dev/agents/system-agent/chat</code></pre>
        </div>
        <div class="verification-station__expected">
          Expected: Response acknowledges the request AND macOS notification appears with "Hello World"
        </div>
      </div>

      <h2>Troubleshooting</h2>

      <div class="callout callout--tip">
        <div class="callout__label">Common Issue 1</div>
        <div class="callout__body">
          <p><strong>"Connection refused" to Bridge</strong></p>
          <p>Error: <code>connect ECONNREFUSED 127.0.0.1:3456</code></p>
          <p><strong>Causes:</strong> Bridge not running, wrong port, HOST bound to different interface</p>
          <p><strong>Solutions:</strong></p>
          <pre><code># Start Bridge
cd src/bridge && npm start

# Check what's listening
lsof -i :3456

# If deploying remotely, ensure HOST=0.0.0.0
HOST=0.0.0.0 npm start</code></pre>
        </div>
      </div>

      <div class="callout callout--tip">
        <div class="callout__label">Common Issue 2</div>
        <div class="callout__body">
          <p><strong>"Unauthorized" from Bridge</strong></p>
          <p>Response: <code>{"error": "Unauthorized"}</code></p>
          <p><strong>Causes:</strong> Token mismatch, missing "Bearer " prefix, whitespace in token</p>
          <p><strong>Solutions:</strong></p>
          <pre><code># Verify token
echo $BRIDGE_AUTH_TOKEN | xxd  # Check for hidden characters

# Test with explicit token
curl -H "Authorization: Bearer exact-token-here" http://localhost:3456/tools</code></pre>
        </div>
      </div>

      <div class="callout callout--tip">
        <div class="callout__label">Common Issue 3</div>
        <div class="callout__body">
          <p><strong>"Permission denied" for Accessibility</strong></p>
          <p>Error: <code>Not authorized to send Apple events</code></p>
          <p><strong>Causes:</strong> macOS permissions not granted, wrong app authorized</p>
          <p><strong>Solutions:</strong></p>
          <ol>
            <li>Open System Preferences → Security & Privacy → Privacy</li>
            <li>Select Accessibility</li>
            <li>Add the correct application: for CLI use <code>/usr/local/bin/node</code> or your terminal app; for Desktop use SYSTEM.app</li>
            <li>Restart Bridge after granting</li>
          </ol>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================================
       FOOTER (Z-FOUND)
       ============================================ -->

  <footer>
    <div class="page-container">
      <div class="footer-title">SYSTEM: Remote Mac Control</div>
      <div class="footer-meta">4 trust zones | 14 mechanisms | Ceiling tier</div>
      <div class="footer-meta">Brain/Tunnel/Body Architecture • Cloudflare Workers • Express.js • macOS Automation</div>
      <div class="footer-provenance">Built with KortAI Design System • Ceiling-tier composition • Secure facility metaphor • 2026-02-16</div>
    </div>
  </footer>

</body>
</html>
