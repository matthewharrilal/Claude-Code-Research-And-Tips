<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Steve Yegge and Gas Town — Dispatch Center</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* ============================================
       DISPATCH CENTER — CSS VOCABULARY (REFINED x2)
       Metaphor: Operations Room / Dispatch Center
       Content: Steve Yegge's Gas Town
       Fix 1: Dark zone variation + breathing interludes
       Fix 2: Three-tier code blocks + TOC navigation
       ============================================ */

    /* --- RESET & SOUL CONSTRAINTS --- */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      border-radius: 0;
      box-shadow: none;
    }

    /* --- DISPATCH CENTER TOKENS --- */
    :root {
      /* Soul constraints */
      --border-radius: 0;

      /* Dispatch Center palette */
      --dispatch-cream: #FEF9F5;
      --dispatch-dense: #FFFFFF;
      --dispatch-earthy: #FAF5ED;
      --dispatch-bedrock: #1A1A1A;
      --dispatch-text: #1A1A1A;
      --dispatch-text-secondary: #666666;
      --dispatch-border: #E0D5C5;
      --dispatch-border-subtle: #F0EBE3;
      --dispatch-red: #E83025;
      --dispatch-blue: #4A90D9;
      --dispatch-green: #4A9D6B;
      --dispatch-amber: #D97706;
      --dispatch-purple: #7C3AED;
      --dispatch-coral: #C97065;

      /* Interlude background — warm parchment, distinct from cream and earthy */
      --dispatch-interlude: #F5EDE0;

      /* Code block tier backgrounds */
      --code-light-bg: #F5F0E8;
      --code-diagram-bg: #EDE6D8;
      --code-diagram-text: #2A2520;

      /* Callout backgrounds */
      --bg-info: #F5F9FE;
      --bg-tip: #F2F9F4;
      --bg-warning: #FEF6F5;
      --bg-challenge: #FFFBF2;
      --bg-essence: #F8F5FE;

      /* Dark-adapted callout backgrounds (for zones dense with code blocks) */
      --bg-info-strong: #EBF2FC;
      --bg-tip-strong: #E8F5EC;
      --bg-warning-strong: #FDECE9;
      --bg-challenge-strong: #FFF5E0;

      /* Typography */
      --font-display: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

      /* Spacing scale (4px base) */
      --sp-1: 4px;
      --sp-2: 8px;
      --sp-3: 12px;
      --sp-4: 16px;
      --sp-5: 20px;
      --sp-6: 24px;
      --sp-8: 32px;
      --sp-10: 40px;
      --sp-12: 48px;
      --sp-16: 64px;
      --sp-20: 80px;
    }

    /* --- BASE TYPOGRAPHY --- */
    body {
      font-family: var(--font-body);
      font-size: 16px;
      line-height: 1.7;
      color: var(--dispatch-text);
      background: var(--dispatch-cream);
      -webkit-font-smoothing: antialiased;
    }

    h1, h2, h3, h4 {
      line-height: 1.3;
    }

    h1 {
      font-family: var(--font-display);
      font-size: 40px;
      font-style: italic;
      letter-spacing: -0.02em;
      color: var(--dispatch-text);
    }

    h2 {
      font-family: var(--font-display);
      font-size: 28px;
      font-style: italic;
      letter-spacing: -0.015em;
      color: var(--dispatch-text);
      margin-bottom: var(--sp-6);
    }

    h3 {
      font-family: var(--font-display);
      font-size: 20px;
      font-style: italic;
      letter-spacing: -0.01em;
      color: var(--dispatch-text);
      margin-bottom: var(--sp-4);
    }

    h4 {
      font-family: var(--font-body);
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      color: var(--dispatch-text-secondary);
      margin-bottom: var(--sp-3);
    }

    p {
      margin-bottom: var(--sp-4);
    }

    a {
      color: var(--dispatch-blue);
      text-decoration: none;
      border-bottom: 1px solid transparent;
      transition: border-color 0.3s ease;
    }

    a:hover {
      border-bottom-color: var(--dispatch-blue);
    }

    strong {
      font-weight: 600;
    }

    /* --- SELECTION & FOCUS --- */
    ::selection {
      background: var(--dispatch-red);
      color: var(--dispatch-cream);
    }

    *:focus-visible {
      outline: 3px solid var(--dispatch-red);
      outline-offset: 2px;
    }

    /* --- SKIP LINK --- */
    .skip-link {
      position: absolute;
      top: -100%;
      left: 0;
      background: var(--dispatch-red);
      color: var(--dispatch-cream);
      padding: 8px 16px;
      z-index: 1000;
      font-family: var(--font-body);
      font-size: 14px;
      text-decoration: none;
      border: none;
    }
    .skip-link:focus { top: 0; }

    /* --- CONTAINER --- */
    .dispatch-container {
      max-width: 960px;
      margin: 0 auto;
      padding: 0 var(--sp-6);
    }

    /* --- HEADER: Dark command bar --- */
    .page-header {
      background: var(--dispatch-bedrock);
      border-bottom: 3px solid var(--dispatch-red);
      padding: var(--sp-6) 0;
    }

    .page-header .dispatch-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: var(--sp-3);
    }

    .header-id {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--dispatch-red);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      white-space: nowrap;
    }

    .header-meta {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--dispatch-text-secondary);
      letter-spacing: 0.05em;
    }

    /* ===========================================================
       Z1: BRIEFING ROOM — Warm, authoritative, orienting
       Background: cream (#FEF9F5), Spacing: 64-80px generous
       Typography: Instrument Serif display, Inter body
       =========================================================== */
    .z1-briefing {
      background: var(--dispatch-cream);
      padding: var(--sp-20) 0 var(--sp-16) 0;
    }

    /* Zone label — tightened proximity to title */
    .z1-briefing .section-indicator {
      margin-bottom: var(--sp-2);
      padding-bottom: 0;
      border-bottom: none;
    }

    .z1-briefing h1 {
      margin-bottom: var(--sp-6);
    }

    .page-subtitle {
      font-family: var(--font-body);
      font-size: 18px;
      color: var(--dispatch-text-secondary);
      max-width: 600px;
      margin-bottom: var(--sp-12);
      line-height: 1.6;
    }

    /* Drop cap on first orientation paragraph */
    .dropcap::first-letter {
      font-family: var(--font-display);
      font-size: 3.5em;
      line-height: 0.85;
      float: left;
      margin: 0 0.1em 0 0;
      font-weight: normal;
      color: var(--dispatch-text);
    }

    /* Complexity Ladder diagram */
    .ladder-diagram {
      background: var(--dispatch-dense);
      border: 1px solid var(--dispatch-border);
      border-left: 4px solid var(--dispatch-blue);
      padding: var(--sp-6) var(--sp-8);
      margin: var(--sp-8) 0;
      overflow-x: auto;
    }

    .ladder-diagram .section-label {
      font-family: var(--font-mono);
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--dispatch-blue);
      margin-bottom: var(--sp-3);
    }

    .ladder-diagram pre {
      background: none;
      color: var(--dispatch-text);
      border: none;
      padding: 0;
      margin: 0;
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.6;
    }

    /* --- CALLOUT SYSTEM --- */
    .callout {
      border-left: 4px solid var(--dispatch-blue);
      background: var(--bg-info);
      padding: var(--sp-6) var(--sp-5) 28px var(--sp-5);
      margin-bottom: var(--sp-6);
    }

    .callout-label {
      font-family: var(--font-body);
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: var(--sp-3);
    }

    .callout--info {
      border-left-color: var(--dispatch-blue);
      background: var(--bg-info);
    }
    .callout--info .callout-label { color: var(--dispatch-blue); }

    .callout--warning {
      border-left-color: var(--dispatch-red);
      background: var(--bg-warning);
    }
    .callout--warning .callout-label { color: var(--dispatch-red); }

    .callout--caution {
      border-left-color: var(--dispatch-amber);
      background: var(--bg-challenge);
    }
    .callout--caution .callout-label { color: var(--dispatch-amber); }

    .callout--tip {
      border-left-color: var(--dispatch-green);
      background: var(--bg-tip);
    }
    .callout--tip .callout-label { color: var(--dispatch-green); }

    .callout--essence {
      border-left-color: var(--dispatch-purple);
      background: var(--bg-essence);
    }
    .callout--essence .callout-label { color: var(--dispatch-purple); }
    .callout--essence .callout-body {
      font-family: var(--font-display);
      font-size: 18px;
      font-style: italic;
      line-height: 1.5;
    }

    /* DEEPENED: Callout variants for dense-code contexts
       Stronger backgrounds, heavier border presence */
    .callout--dense-context {
      border-left-width: 4px;
      padding: var(--sp-6) var(--sp-6) var(--sp-6) var(--sp-6);
      margin: var(--sp-6) 0 var(--sp-8) 0;
    }
    .callout--dense-context.callout--warning {
      background: var(--bg-warning-strong);
    }
    .callout--dense-context.callout--tip {
      background: var(--bg-tip-strong);
    }
    .callout--dense-context.callout--info {
      background: var(--bg-info-strong);
    }
    .callout--dense-context.callout--caution {
      background: var(--bg-challenge-strong);
    }

    .callout-body {
      font-size: 16px;
      line-height: 1.7;
      color: var(--dispatch-text);
    }

    .callout-body ul,
    .callout-body ol {
      padding-left: var(--sp-5);
      margin-top: var(--sp-2);
    }

    .callout-body li {
      margin-bottom: var(--sp-2);
      font-size: 15px;
    }

    /* Stats bar for credential metrics */
    .stats-bar {
      display: flex;
      gap: var(--sp-6);
      flex-wrap: wrap;
      margin: var(--sp-8) 0;
    }

    .stats-bar__segment {
      flex: 1;
      min-width: 140px;
      padding: var(--sp-4);
      text-align: center;
      border: 1px solid var(--dispatch-border);
      background: var(--dispatch-dense);
    }

    .stats-bar__label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--dispatch-text-secondary);
      margin-bottom: var(--sp-1);
    }

    .stats-bar__value {
      font-size: 18px;
      font-weight: 600;
      color: var(--dispatch-text);
    }

    /* Data tables */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: var(--sp-8);
    }

    th {
      font-family: var(--font-body);
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      text-align: left;
      padding: var(--sp-3) var(--sp-4);
      border-bottom: 3px solid var(--dispatch-border);
      color: var(--dispatch-text-secondary);
    }

    td {
      padding: var(--sp-3) var(--sp-4);
      border-bottom: 1px solid var(--dispatch-border);
      font-size: 14px;
      line-height: 1.6;
      vertical-align: top;
    }

    tr:last-child td {
      border-bottom: none;
    }

    /* Inline code */
    p code, li code, td code {
      background: var(--dispatch-border-subtle);
      padding: 2px 6px;
      font-family: var(--font-mono);
      font-size: 14px;
      border: 1px solid var(--dispatch-border);
    }

    /* Section indicator */
    .section-indicator {
      font-family: var(--font-mono);
      font-size: 12px;
      font-weight: 500;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--dispatch-text-secondary);
      margin-bottom: var(--sp-4);
      padding-bottom: var(--sp-2);
      border-bottom: 1px solid var(--dispatch-border-subtle);
    }

    /* Bulleted lists */
    ul, ol {
      padding-left: var(--sp-5);
      margin-bottom: var(--sp-4);
    }

    li {
      margin-bottom: var(--sp-2);
      line-height: 1.7;
    }

    li::marker {
      color: var(--dispatch-text-secondary);
    }

    /* ===========================================================
       Z2: SITUATION BOARD — Paradigm shift lands here
       Background: #FFFFFF dense, Spacing: 48-64px tightening
       Typography: Instrument Serif headings, core quote at max
       =========================================================== */
    .z2-situation {
      background: var(--dispatch-dense);
      padding: var(--sp-16) 0;
      border-top: 4px solid var(--dispatch-red);
    }

    /* The signal flare — core insight quote */
    .signal-flare {
      border-left: 4px solid var(--dispatch-red);
      padding: var(--sp-10) var(--sp-8);
      margin: var(--sp-10) 0;
      background: var(--bg-warning);
    }

    .signal-flare blockquote {
      font-family: var(--font-display);
      font-size: 24px;
      font-style: italic;
      line-height: 1.4;
      color: var(--dispatch-text);
      max-width: 55ch;
    }

    .signal-flare cite {
      display: block;
      font-family: var(--font-mono);
      font-size: 12px;
      font-style: normal;
      color: var(--dispatch-text-secondary);
      margin-top: var(--sp-3);
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    /* ASCII diagram containers */
    .ascii-diagram {
      background: var(--dispatch-bedrock);
      color: var(--dispatch-cream);
      border: 3px solid var(--dispatch-border);
      padding: var(--sp-6) var(--sp-8);
      margin: var(--sp-8) 0;
      overflow-x: auto;
    }

    .ascii-diagram pre {
      background: none;
      color: var(--dispatch-cream);
      border: none;
      padding: 0;
      margin: 0;
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.5;
    }

    .ascii-label {
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--dispatch-red);
      margin-bottom: var(--sp-3);
    }

    /* Standard pullquotes (radio transmissions) */
    .radio-transmission {
      border-left: 4px solid var(--dispatch-red);
      padding: var(--sp-6) var(--sp-6);
      margin: var(--sp-6) 0;
      background: var(--dispatch-cream);
    }

    .radio-transmission blockquote {
      font-family: var(--font-display);
      font-size: 18px;
      font-style: italic;
      line-height: 1.5;
      color: var(--dispatch-text);
    }

    .radio-transmission cite {
      display: block;
      font-family: var(--font-mono);
      font-size: 12px;
      font-style: normal;
      color: var(--dispatch-text-secondary);
      margin-top: var(--sp-2);
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    /* ===========================================================
       Z3: TACTICAL MAP — Dense, architectural, sustained
       Background: #FAF5ED earthy, Spacing: 32-48px dense
       Typography: Inter body, JetBrains Mono code, h3 italic 20px
       =========================================================== */
    .z3-tactical {
      background: var(--dispatch-earthy);
      padding: var(--sp-12) 0;
      border-top: 4px solid var(--dispatch-amber);
    }

    /* AMPLIFIED: ASCII diagrams in Z3 get a subtle red left-border accent
       making the tactical map's dark consoles feel OWNED by this section */
    .z3-tactical .ascii-diagram {
      border-left: 3px solid var(--dispatch-red);
    }

    /* Bento grid for role hierarchy */
    .bento-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--sp-6);
      margin: var(--sp-8) 0;
    }

    .bento-cell {
      border: 3px solid var(--dispatch-border);
      padding: var(--sp-6);
      background: var(--dispatch-dense);
    }

    .bento-cell--primary {
      grid-column: 1 / -1;
    }

    .bento-cell--wide {
      grid-column: 1 / -1;
    }

    .bento-cell__label {
      font-family: var(--font-mono);
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--dispatch-text-secondary);
      margin-bottom: var(--sp-4);
      padding-bottom: var(--sp-2);
      border-bottom: 1px solid var(--dispatch-border-subtle);
    }

    .bento-cell__title {
      font-family: var(--font-display);
      font-size: 20px;
      font-style: italic;
      margin-bottom: var(--sp-3);
    }

    .bento-cell p {
      font-size: 15px;
      margin-bottom: var(--sp-3);
    }

    .bento-cell ul {
      padding-left: var(--sp-5);
      margin-bottom: var(--sp-3);
    }

    .bento-cell li {
      font-size: 14px;
      margin-bottom: var(--sp-1);
    }

    .bento-cell pre {
      background: var(--dispatch-bedrock);
      color: var(--dispatch-cream);
      border: 3px solid var(--dispatch-border);
      padding: var(--sp-4);
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.5;
      overflow-x: auto;
      margin-top: var(--sp-3);
      margin-bottom: 0;
    }

    .model-rec {
      font-family: var(--font-mono);
      font-size: 12px;
      color: var(--dispatch-text-secondary);
      margin-top: var(--sp-3);
      padding-top: var(--sp-2);
      border-top: 1px solid var(--dispatch-border-subtle);
    }

    .model-rec strong {
      color: var(--dispatch-amber);
    }

    /* Role tier labels */
    .tier-label {
      display: inline-block;
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 2px 8px;
      border: 1px solid;
      margin-bottom: var(--sp-4);
    }

    .tier-label--town {
      color: var(--dispatch-red);
      border-color: var(--dispatch-red);
    }

    .tier-label--rig {
      color: var(--dispatch-amber);
      border-color: var(--dispatch-amber);
    }

    .tier-label--human {
      color: var(--dispatch-blue);
      border-color: var(--dispatch-blue);
    }

    /* Memory model layers */
    .memory-layers {
      margin: var(--sp-8) 0;
    }

    .memory-layer {
      padding: var(--sp-5) var(--sp-6);
      margin-bottom: 0;
      border-left: 4px solid;
    }

    .memory-layer--hot {
      background: var(--dispatch-dense);
      border-left-color: var(--dispatch-red);
    }

    .memory-layer--warm {
      background: var(--dispatch-cream);
      border-left-color: var(--dispatch-amber);
    }

    .memory-layer--cold {
      background: var(--dispatch-earthy);
      border-left-color: var(--dispatch-text-secondary);
    }

    .memory-layer__label {
      font-family: var(--font-mono);
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: var(--sp-2);
    }

    .memory-layer--hot .memory-layer__label { color: var(--dispatch-red); }
    .memory-layer--warm .memory-layer__label { color: var(--dispatch-amber); }
    .memory-layer--cold .memory-layer__label { color: var(--dispatch-text-secondary); }

    .memory-layer ul {
      padding-left: var(--sp-5);
      margin: 0;
    }

    .memory-layer li {
      font-size: 14px;
      margin-bottom: var(--sp-1);
    }

    /* ===========================================================
       INTERLUDE: Light breathing moments INSIDE the dark corridor
       These are the "lanterns between chambers" the Weaver called for.
       Warm parchment background, centered serif text, generous space.
       =========================================================== */
    .interlude {
      background: var(--dispatch-interlude);
      padding: var(--sp-10) 0;
      border-top: 1px solid var(--dispatch-border);
      border-bottom: 1px solid var(--dispatch-border);
    }

    .interlude .dispatch-container {
      max-width: 680px;
    }

    .interlude__marker {
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--dispatch-text-secondary);
      margin-bottom: var(--sp-3);
      text-align: center;
    }

    .interlude__text {
      font-family: var(--font-display);
      font-size: 18px;
      font-style: italic;
      line-height: 1.6;
      color: var(--dispatch-text);
      text-align: center;
      max-width: 55ch;
      margin: 0 auto;
    }

    .interlude__text p {
      margin-bottom: var(--sp-3);
    }

    .interlude__text p:last-child {
      margin-bottom: 0;
    }

    /* ===========================================================
       Z4: COMMAND CONSOLE — Operational, pulsing code/prose
       Background: Dark code zones within cream prose flow
       Typography: JetBrains Mono dominates, Inter for principles
       =========================================================== */
    .z4-command {
      background: var(--dispatch-cream);
      padding: var(--sp-12) 0;
      border-top: 4px solid var(--dispatch-blue);
    }

    /* AMPLIFIED: Z4 code blocks get amber left-border accent
       making the command console's code feel like a distinct station */
    .z4-command pre {
      border-left: 3px solid var(--dispatch-amber);
    }

    .z4-command .code-snippet {
      border-left: 3px solid var(--dispatch-amber);
    }

    /* Code blocks */
    pre {
      background: var(--dispatch-bedrock);
      color: var(--dispatch-cream);
      border: 3px solid var(--dispatch-border);
      padding: var(--sp-6) var(--sp-8);
      font-family: var(--font-mono);
      font-size: 14px;
      line-height: 1.5;
      overflow-x: auto;
      margin-bottom: var(--sp-8);
    }

    pre code {
      background: none;
      border: none;
      padding: 0;
      font-size: inherit;
      color: inherit;
    }

    /* Code snippet with header */
    .code-snippet {
      background: var(--dispatch-bedrock);
      margin-bottom: var(--sp-6);
    }

    .code-snippet__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--sp-2) var(--sp-4);
      background: var(--dispatch-bedrock);
      border-bottom: 1px solid var(--dispatch-border);
    }

    .code-snippet__filename {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--dispatch-text-secondary);
    }

    .code-snippet__content {
      padding: var(--sp-4);
      font-family: var(--font-mono);
      font-size: 14px;
      line-height: 1.5;
      color: var(--dispatch-cream);
      overflow-x: auto;
      white-space: pre;
    }

    /* Syntax highlighting */
    .kw { color: var(--dispatch-red); }
    .str { color: #6B9B7A; }
    .cmt { color: var(--dispatch-text-secondary); }
    .fn { color: #4A7C9B; }
    .var { color: var(--dispatch-coral); }

    /* Principle cards in Z4 */
    .principle {
      border-left: 4px solid var(--dispatch-amber);
      padding: var(--sp-6) var(--sp-6);
      margin: var(--sp-8) 0;
      background: var(--bg-challenge);
    }

    .principle__title {
      font-family: var(--font-display);
      font-size: 20px;
      font-style: italic;
      margin-bottom: var(--sp-3);
    }

    .principle blockquote {
      font-family: var(--font-display);
      font-size: 17px;
      font-style: italic;
      line-height: 1.5;
      color: var(--dispatch-text);
      margin-bottom: var(--sp-3);
      padding-left: var(--sp-4);
      border-left: 1px solid var(--dispatch-border);
    }

    /* Checklist styling */
    .checklist {
      list-style: none;
      padding-left: 0;
    }

    .checklist li {
      padding-left: var(--sp-6);
      position: relative;
      font-size: 15px;
    }

    .checklist li::before {
      content: '';
      position: absolute;
      left: 0;
      top: 6px;
      width: 16px;
      height: 16px;
      border: 1px solid var(--dispatch-border);
      background: var(--dispatch-dense);
    }

    /* Troubleshooting entries — bordered cards with alternating accents */
    .trouble-entry {
      margin-bottom: var(--sp-6);
      padding: var(--sp-5) var(--sp-5) var(--sp-5) var(--sp-6);
      border-left: 3px solid var(--dispatch-red);
      background: var(--dispatch-dense);
      border-bottom: none;
    }

    /* Alternate: entries at child 3,5,7 (odd) get red, entries at 4,6,8 (even) get amber */
    .trouble-entry:nth-child(even) {
      border-left-color: var(--dispatch-amber);
    }

    .trouble-entry:last-child {
      margin-bottom: 0;
    }

    .trouble-entry h4 {
      color: var(--dispatch-red);
      margin-bottom: var(--sp-2);
    }

    .trouble-entry:nth-child(even) h4 {
      color: var(--dispatch-amber);
    }

    .trouble-symptom {
      font-size: 15px;
      color: var(--dispatch-text-secondary);
      margin-bottom: var(--sp-2);
    }

    /* ===========================================================
       Z5: DISPATCH LOG — Evaluative, resolving, reference
       Background: warm sand, distinct from Z1/Z4 cream
       Typography: Inter 14-16px, Mono for headers
       =========================================================== */
    .z5-dispatch {
      background: #F7F2EA;
      padding: var(--sp-16) 0 var(--sp-12) 0;
      border-top: 4px solid var(--dispatch-green);
    }

    /* Quote gallery — warm accent zone, distinct from surrounding sections */
    .quote-gallery {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--sp-6);
      margin: var(--sp-8) 0;
      background: #F0E8D8;
      padding: var(--sp-8);
      border-top: 3px solid var(--dispatch-border);
      border-bottom: 3px solid var(--dispatch-border);
    }

    .quote-card {
      border: 1px solid var(--dispatch-border);
      border-left: 4px solid var(--dispatch-red);
      padding: var(--sp-5) var(--sp-5);
      background: #FAF6EF;
    }

    .quote-card:nth-child(even) {
      border-left-color: var(--dispatch-amber);
    }

    .quote-card blockquote {
      font-family: var(--font-display);
      font-size: 16px;
      font-style: italic;
      line-height: 1.5;
      color: var(--dispatch-text);
    }

    .quote-card__theme {
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--dispatch-text-secondary);
      margin-bottom: var(--sp-2);
    }

    /* Comparison section — alternating accent borders to break monotony */
    .comparison-block {
      background: var(--dispatch-dense);
      border: 1px solid var(--dispatch-border);
      border-left: 4px solid var(--dispatch-green);
      padding: var(--sp-6);
      margin-bottom: var(--sp-8);
    }

    .comparison-block + .comparison-block {
      border-left-color: var(--dispatch-blue);
    }

    .comparison-block + .comparison-block + .comparison-block {
      border-left-color: var(--dispatch-purple);
    }

    .comparison-block h3 {
      margin-bottom: var(--sp-4);
    }

    .comparison-verdict {
      font-size: 14px;
      color: var(--dispatch-text-secondary);
      padding-top: var(--sp-3);
      border-top: 1px solid var(--dispatch-border-subtle);
      margin-top: var(--sp-4);
    }

    /* Sources list — compact, reference-register feel */
    .sources-list {
      list-style: none;
      padding-left: 0;
      background: var(--dispatch-dense);
      border: 1px solid var(--dispatch-border);
      border-left: 3px solid var(--dispatch-text-secondary);
      padding: var(--sp-4) var(--sp-5);
    }

    .sources-list li {
      padding: var(--sp-2) 0;
      border-bottom: 1px solid var(--dispatch-border-subtle);
      font-size: 14px;
    }

    .sources-list li:last-child {
      border-bottom: none;
    }

    .source-type {
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--dispatch-text-secondary);
      margin-right: var(--sp-2);
    }

    /* --- FOOTER --- */
    .page-footer {
      background: var(--dispatch-bedrock);
      border-top: 4px solid var(--dispatch-red);
      padding: var(--sp-10) 0 var(--sp-8) 0;
    }

    .page-footer .dispatch-container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: var(--sp-6);
    }

    .footer-section {
      font-size: 12px;
      color: var(--dispatch-text-secondary);
    }

    .footer-section strong {
      display: block;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--sp-1);
      color: var(--dispatch-cream);
      font-weight: 500;
    }

    .footer-closing {
      font-family: var(--font-display);
      font-style: italic;
      font-size: 18px;
      color: var(--dispatch-cream);
      max-width: 400px;
      padding-top: var(--sp-4);
      border-top: 1px solid #333333;
    }

    /* --- BREATHING ZONE (between major sections) --- */
    .breathing-zone {
      background: var(--dispatch-earthy);
      padding: var(--sp-12) 0;
      border-top: 3px solid var(--dispatch-border);
      border-bottom: 3px solid var(--dispatch-border);
    }

    .breathing-zone .dispatch-container {
      text-align: center;
    }

    .breathing-zone blockquote {
      font-family: var(--font-display);
      font-size: 22px;
      font-style: italic;
      line-height: 1.5;
      color: var(--dispatch-text);
      max-width: 50ch;
      margin: 0 auto;
    }

    .breathing-zone cite {
      display: block;
      font-family: var(--font-mono);
      font-size: 12px;
      font-style: normal;
      color: var(--dispatch-text-secondary);
      margin-top: var(--sp-3);
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    /* ===========================================================
       CODE BLOCK TIERS — Three visual registers for code
       LIGHT: Short CLI commands (1-6 lines). Warm background.
       MEDIUM: ASCII conceptual diagrams. Warm parchment, studied.
       DARK: Substantial scripts/workflows. Full dark console.
       =========================================================== */

    /* LIGHT TIER: Quick command references — NOT full dark blocks */
    .code-light {
      background: var(--code-light-bg);
      color: var(--dispatch-text);
      border: 1px solid var(--dispatch-border);
      border-left: 3px solid var(--dispatch-blue);
      padding: var(--sp-4) var(--sp-6);
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.6;
      overflow-x: auto;
      margin-bottom: var(--sp-6);
      white-space: pre;
    }

    .code-light code {
      background: none;
      border: none;
      padding: 0;
      font-size: inherit;
      color: inherit;
    }

    .code-light .cmt { color: #8B7D6B; }
    .code-light .str { color: #6B7D4A; }
    .code-light .kw { color: #B8462E; }
    .code-light .fn { color: #4A6B7D; }

    /* Zone-specific accent colors for light code blocks */
    .z3-tactical .code-light { border-left-color: var(--dispatch-red); }
    .z4-command .code-light { border-left-color: var(--dispatch-amber); }
    .z5-dispatch .code-light { border-left-color: var(--dispatch-green); }

    /* MEDIUM TIER: ASCII diagrams — warm, studied, NOT executable */
    .diagram-block {
      background: var(--code-diagram-bg);
      color: var(--code-diagram-text);
      border: 1px solid var(--dispatch-border);
      border-top: 3px solid var(--dispatch-border);
      padding: var(--sp-6) var(--sp-8);
      margin: var(--sp-8) 0;
      overflow-x: auto;
    }

    .diagram-block pre {
      background: none;
      color: var(--code-diagram-text);
      border: none;
      padding: 0;
      margin: 0;
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.5;
    }

    .diagram-label {
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #8B7D6B;
      margin-bottom: var(--sp-3);
    }

    /* Zone-specific diagram accents */
    .z2-situation .diagram-block { border-top-color: var(--dispatch-red); }
    .z3-tactical .diagram-block { border-top-color: var(--dispatch-red); }
    .z5-dispatch .diagram-block { border-top-color: var(--dispatch-green); }

    /* Bento-cell code blocks: use LIGHT treatment */
    .bento-cell .code-light {
      margin-top: var(--sp-3);
      margin-bottom: 0;
      padding: var(--sp-3) var(--sp-4);
      border-left-width: 3px;
    }

    /* --- TABLE OF CONTENTS --- */
    .toc {
      margin: var(--sp-8) 0;
      padding: var(--sp-6);
      background: var(--dispatch-dense);
      border: 1px solid var(--dispatch-border);
      border-left: 3px solid var(--dispatch-text-secondary);
    }

    .toc__title {
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--dispatch-text-secondary);
      margin-bottom: var(--sp-4);
    }

    .toc__list {
      list-style: none;
      padding-left: 0;
      margin-bottom: 0;
      columns: 2;
      column-gap: var(--sp-8);
    }

    .toc__list li {
      margin-bottom: var(--sp-2);
      font-size: 14px;
      break-inside: avoid;
    }

    .toc__list a {
      color: var(--dispatch-text);
      border-bottom: 1px solid var(--dispatch-border-subtle);
    }

    .toc__list a:hover {
      border-bottom-color: var(--dispatch-blue);
      color: var(--dispatch-blue);
    }

    .toc__zone {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--dispatch-text-secondary);
      margin-right: var(--sp-1);
    }

    /* --- RESPONSIVE: 1024px --- */
    @media (max-width: 1024px) {
      h1 { font-size: 34px; }
      h2 { font-size: 24px; }
      .signal-flare blockquote { font-size: 21px; }
      .z1-briefing { padding: var(--sp-16) 0 var(--sp-12) 0; }
    }

    /* --- RESPONSIVE: 768px --- */
    @media (max-width: 768px) {
      h1 { font-size: 28px; }
      h2 { font-size: 22px; }
      h3 { font-size: 18px; }

      .page-header .dispatch-container {
        flex-direction: column;
        align-items: flex-start;
      }

      .header-meta {
        font-size: 10px;
      }

      .z1-briefing { padding: var(--sp-12) 0 var(--sp-8) 0; }
      .z2-situation { padding: var(--sp-8) 0; }
      .z3-tactical { padding: var(--sp-8) 0; }
      .z4-command { padding: var(--sp-8) 0; }
      .z5-dispatch { padding: var(--sp-8) 0; }

      .signal-flare {
        padding: var(--sp-6) var(--sp-5);
      }

      .signal-flare blockquote { font-size: 19px; }

      .bento-grid {
        grid-template-columns: 1fr;
      }

      .quote-gallery {
        grid-template-columns: 1fr;
      }

      .stats-bar {
        flex-direction: column;
      }

      .stats-bar__segment {
        min-width: unset;
      }

      pre {
        padding: var(--sp-4);
        font-size: 13px;
      }

      .code-light {
        padding: var(--sp-3) var(--sp-4);
        font-size: 12px;
      }

      .diagram-block {
        padding: var(--sp-4);
      }

      .toc__list {
        columns: 1;
      }

      .page-footer .dispatch-container {
        flex-direction: column;
      }

      .dispatch-container {
        padding: 0 var(--sp-4);
      }

      .breathing-zone blockquote {
        font-size: 19px;
      }

      .interlude__text {
        font-size: 16px;
      }

      table {
        display: block;
        overflow-x: auto;
      }
    }

    /* --- REDUCED MOTION --- */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>
<body>

  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- ============================================================
       HEADER: Dark command bar
       ============================================================ -->
  <header class="page-header" role="banner">
    <div class="dispatch-container">
      <span class="header-id">KortAI / Deep Extraction</span>
      <span class="header-meta">Steve Yegge &middot; Gas Town &middot; Level 7 Architecture</span>
    </div>
  </header>

  <main id="main-content" role="main">

    <!-- ============================================================
         Z1: BRIEFING ROOM — You Are Here + Who is Yegge
         ============================================================ -->
    <section class="z1-briefing" aria-label="Briefing Room">
      <div class="dispatch-container">

        <div class="section-indicator">Z1 &mdash; Briefing Room</div>

        <h1>Steve Yegge and Gas Town</h1>
        <p class="page-subtitle">The agent factory architect building team-scale productivity for solo developers.</p>

        <!-- Table of Contents -->
        <nav class="toc" aria-label="Table of contents">
          <div class="toc__title">Document Map</div>
          <ul class="toc__list">
            <li><span class="toc__zone">Z1</span> <a href="#you-are-here">You Are Here</a></li>
            <li><span class="toc__zone">Z1</span> <a href="#who-is-yegge">Who is Steve Yegge?</a></li>
            <li><span class="toc__zone">Z2</span> <a href="#gas-town-model">The Gas Town Mental Model</a></li>
            <li><span class="toc__zone">Z3</span> <a href="#eight-roles">The 8 Roles Architecture</a></li>
            <li><span class="toc__zone">Z3</span> <a href="#beads-memory">Beads: The Memory System</a></li>
            <li><span class="toc__zone">Z3</span> <a href="#six-waves">The 6 Waves of AI</a></li>
            <li><span class="toc__zone">Z4</span> <a href="#core-principles">Core Principles</a></li>
            <li><span class="toc__zone">Z4</span> <a href="#implementation">Implementation Guide</a></li>
            <li><span class="toc__zone">Z4</span> <a href="#checkpoints">Checkpoints and Verification</a></li>
            <li><span class="toc__zone">Z4</span> <a href="#troubleshooting">Troubleshooting</a></li>
            <li><span class="toc__zone">Z5</span> <a href="#when-to-use">When to Use Gas Town</a></li>
            <li><span class="toc__zone">Z5</span> <a href="#quotes">Quotes and Key Statements</a></li>
            <li><span class="toc__zone">Z5</span> <a href="#comparisons">Comparison with Other Patterns</a></li>
            <li><span class="toc__zone">Z5</span> <a href="#sources">Sources</a></li>
          </ul>
        </nav>

        <!-- You Are Here -->
        <h2 id="you-are-here">You Are Here</h2>

        <div class="ladder-diagram">
          <div class="section-label">The Complexity Ladder</div>
          <pre>Level 7: Gas Town Factory          &lt;-- YOU ARE LEARNING THIS
         |
Level 6: Parallel Swarms + Worktrees
         |
Level 5: Multi-Agent Orchestration (CC Mirror)
         |
Level 4: PRD-Driven Loops (Full Ralph)
         |
Level 3: Simple Loops (Basic Ralph)
         |
Level 2: Subagents + Hooks
         |
Level 1: CLAUDE.md + Slash Commands
         |
Level 0: Single Interactive Session</pre>
        </div>

        <p class="dropcap">You are a developer who has mastered Levels 0 through 6 on the complexity ladder. You have run five or more Claude Code instances simultaneously, shipped features overnight with Ralph loops, and felt the limits of sequential processing. You have hit the Merge Wall with multiple agents. This document takes you to Level 7.</p>

        <div class="callout callout--info">
          <div class="callout-label">After This Document</div>
          <div class="callout-body">
            <ul>
              <li>Understand the factory-scale agent architecture</li>
              <li>Know when Gas Town is appropriate (and when it is overkill)</li>
              <li>Be able to install and configure a basic Gas Town setup</li>
              <li>Understand the 8 roles and how they coordinate</li>
              <li>Comprehend how Beads provides memory across agent colonies</li>
            </ul>
          </div>
        </div>

        <div class="callout callout--caution">
          <div class="callout-label">Prerequisites</div>
          <div class="callout-body">
            <ul>
              <li>Stage 7+ on Yegge's 8-Stage Dev Evolution</li>
              <li>Comfort with chaos and imperfection</li>
              <li>Go language runtime installed</li>
              <li>tmux proficiency (mandatory)</li>
              <li>Budget: $50&ndash;200/day for API costs</li>
              <li>100+ hours experience with multi-agent setups</li>
            </ul>
          </div>
        </div>

        <!-- Who is Steve Yegge? -->
        <h2 id="who-is-yegge">Who is Steve Yegge?</h2>

        <h3>Professional Background</h3>

        <p>Steve Yegge is a 40-year software development veteran whose career provides unique credibility for building Gas Town:</p>

        <table>
          <thead>
            <tr>
              <th>Company</th>
              <th>Role</th>
              <th>Relevance</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Amazon</strong></td>
              <td>Early employee</td>
              <td>Built internal tools at scale</td>
            </tr>
            <tr>
              <td><strong>Google</strong></td>
              <td>Senior Engineer</td>
              <td>Famous for "Stevey's Blog Rants," internal platforms</td>
            </tr>
            <tr>
              <td><strong>Sourcegraph</strong></td>
              <td>Senior role</td>
              <td>Code intelligence, developer tooling</td>
            </tr>
            <tr>
              <td><strong>Current</strong></td>
              <td>Full-time AI dev advocate</td>
              <td>Building the future of agent-assisted dev</td>
            </tr>
          </tbody>
        </table>

        <div class="stats-bar">
          <div class="stats-bar__segment">
            <div class="stats-bar__label">Lines Vibe-Coded</div>
            <div class="stats-bar__value">~1M</div>
          </div>
          <div class="stats-bar__segment">
            <div class="stats-bar__label">Beads Codebase</div>
            <div class="stats-bar__value">225K LOC</div>
          </div>
          <div class="stats-bar__segment">
            <div class="stats-bar__label">Career Span</div>
            <div class="stats-bar__value">40 Years</div>
          </div>
          <div class="stats-bar__segment">
            <div class="stats-bar__label">Validation</div>
            <div class="stats-bar__value">Recursive</div>
          </div>
        </div>

        <h3>Why His Opinion Matters</h3>
        <ul>
          <li><strong>~1 million lines vibe-coded in 2025</strong> &mdash; Not theory, practice</li>
          <li><strong>Built Beads (225K lines of Go)</strong> &mdash; Proof of concept at scale</li>
          <li><strong>Built Gas Town using Gas Town</strong> &mdash; Recursive validation</li>
          <li><strong>Transparent about limitations</strong> &mdash; Warns about chaos, costs, maturity</li>
          <li><strong>Decades of platform engineering</strong> &mdash; Knows what scales and what breaks</li>
        </ul>

        <h3>The "Vibe Coding" Pioneer</h3>

        <p>Steve did not just adopt AI-assisted development &mdash; he pioneered "vibe coding" as a philosophy:</p>

        <div class="radio-transmission">
          <blockquote>"Work becomes fluid, an uncountable that you sling around freely, like slopping shiny fish into wooden barrels at the docks."</blockquote>
          <cite>Steve Yegge</cite>
        </div>

        <p><strong>Vibe coding principles:</strong></p>
        <ul>
          <li>Describe what you want (the "vibe")</li>
          <li>AI generates the code</li>
          <li>You never read the code directly</li>
          <li>Judge by outcomes, not implementation</li>
          <li>Accept some bugs, focus on throughput</li>
        </ul>

        <h3>Public Presence</h3>
        <ul>
          <li><strong>Twitter/X:</strong> @steve_yegge (primary announcements)</li>
          <li><strong>Medium:</strong> steve-yegge.medium.com (deep philosophical pieces)</li>
          <li><strong>GitHub:</strong> github.com/steveyegge (Gas Town, Beads, MCP Agent Mail)</li>
          <li><strong>Podcasts:</strong> Changelog, O'Reilly Radar</li>
        </ul>

      </div>
    </section>

    <!-- ============================================================
         Z2: SITUATION BOARD — The Gas Town Mental Model
         ============================================================ -->
    <section class="z2-situation" aria-label="Situation Board">
      <div class="dispatch-container">

        <div class="section-indicator">Z2 &mdash; Situation Board</div>

        <h2 id="gas-town-model">The Gas Town Mental Model</h2>

        <h3>The Core Insight</h3>

        <!-- SIGNAL FLARE: The paradigm-shifting quote -->
        <div class="signal-flare">
          <blockquote>"Claude Code is the world's biggest fuckin' ant. Everyone is focused on making their ant run longer... when nature prefers colonies."</blockquote>
          <cite>Steve Yegge</cite>
        </div>

        <p>This is the fundamental shift Gas Town represents. Not a bigger ant, but a colony. Not a longer context window, but a factory of workers with shared memory.</p>

        <div class="diagram-block">
          <div class="diagram-label">Paradigm Shift</div>
          <pre>TRADITIONAL APPROACH                 GAS TOWN APPROACH
━━━━━━━━━━━━━━━━━━━━                ━━━━━━━━━━━━━━━━━━━

     One Big Ant                     Ant Colony
         |                               |
    Make it                        Build the
    run longer                     factory
         |                               |
    Context window               Multiple workers
    limits everything            share the load
         |                               |
    You are the                  You are the
    programmer                   Product Manager</pre>
        </div>

        <h3>The Factory Metaphor</h3>

        <p>Gas Town is not an agent &mdash; it is a <strong>factory for agents</strong>:</p>

        <table>
          <thead>
            <tr>
              <th>Traditional Dev</th>
              <th>Gas Town</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>You write code</td>
              <td>You file features</td>
            </tr>
            <tr>
              <td>You debug</td>
              <td>Agents debug</td>
            </tr>
            <tr>
              <td>You are the implementer</td>
              <td>You are the PM</td>
            </tr>
            <tr>
              <td>Single context window</td>
              <td>Many workers, shared memory</td>
            </tr>
            <tr>
              <td>Session ends, context lost</td>
              <td>Workers persist, memory survives</td>
            </tr>
          </tbody>
        </table>

        <h3>The "Idea Compiler"</h3>

        <div class="radio-transmission">
          <blockquote>"Gas Town is an Idea Compiler. You just make up features, design them, file the implementation plans, and sling work around to your polecats and crew."</blockquote>
          <cite>Steve Yegge</cite>
        </div>

        <p><strong>Input:</strong> Your ideas and feature requests.<br>
        <strong>Output:</strong> Working code, shipped products.</p>

        <p>You are not writing code anymore. You are managing a factory.</p>

        <h3>Why "Gas Town"?</h3>

        <p>The Mad Max: Fury Road reference is not accidental:</p>

        <ul>
          <li><strong>Post-apocalyptic resourcefulness</strong> &mdash; Work with chaos, not against it</li>
          <li><strong>Clear role hierarchy</strong> &mdash; Mayor, Deacon, Dogs, Workers</li>
          <li><strong>Survival-focused</strong> &mdash; Throughput over perfection</li>
          <li><strong>Community-built</strong> &mdash; Everyone contributes to the economy</li>
        </ul>

      </div>
    </section>

    <!-- ============================================================
         BREATHING ZONE: Quiet transition before tactical density
         ============================================================ -->
    <div class="breathing-zone" role="separator" aria-label="Transition">
      <div class="dispatch-container">
        <blockquote>"You're not a programmer anymore. You're the head chef of a kitchen with AI robotic sous chefs."</blockquote>
        <cite>Steve Yegge</cite>
      </div>
    </div>

    <!-- ============================================================
         Z3: TACTICAL MAP — 8 Roles + Beads + 6 Waves
         ============================================================ -->
    <section class="z3-tactical" aria-label="Tactical Map">
      <div class="dispatch-container">

        <div class="section-indicator">Z3 &mdash; Tactical Map</div>

        <h2 id="eight-roles">The 8 Roles Architecture</h2>

        <h3>Hierarchy Overview</h3>

        <div class="diagram-block">
          <div class="diagram-label">Gas Town Role Hierarchy</div>
          <pre>  TOWN LEVEL (Global - One instance each)
  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐
  │     MAYOR      │  │     DEACON     │  │      DOGS      │
  │  Coordination  │  │   Monitoring   │  │  Quality Gates │
  │  across rigs   │  │  &amp; handshakes  │  │  &amp; watchdogs   │
  └────────────────┘  └────────────────┘  └────────────────┘
          │                    │                    │
          └────────────────────┼────────────────────┘
                               │
                               ▼
  RIG LEVEL (Per-Project - Multiple instances)
  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐
  │    REFINERY    │  │    WITNESS     │  │    POLECAT     │
  │ Decomposes big │  │  Observes all  │  │ Named workers  │
  │ tasks → small  │  │ rig activity   │  │ (persistent)   │
  └────────────────┘  └────────────────┘  └────────────────┘
                                                  │
                                                  ▼
                                          ┌────────────────┐
                                          │      CREW      │
                                          │   Ephemeral    │
                                          │ burst workers  │
                                          └────────────────┘

  HUMAN LEVEL
  ┌──────────────────────────────────────────────────────────┐
  │                    OVERSEER (YOU)                          │
  │       Product Manager · Decision Maker · Human Boss       │
  │                Has inbox, sends/receives mail              │
  └──────────────────────────────────────────────────────────┘</pre>
        </div>

        <h3>Role Deep Dives</h3>

        <!-- Town-Level Roles (wider cells for hierarchy encoding) -->
        <span class="tier-label tier-label--town">Town Level</span>

        <div class="bento-grid">
          <!-- Mayor: primary cell (largest, most complex role) -->
          <div class="bento-cell bento-cell--primary">
            <div class="bento-cell__label">Role 1 of 8</div>
            <div class="bento-cell__title">Mayor &mdash; Town-Level Coordination</div>
            <p>Chief coordinator &mdash; your concierge and chief-of-staff. Receives high-level directives from Overseer, routes work to appropriate rigs, manages cross-rig coordination, and handles town-level decisions. The primary AI coordinator for the entire town.</p>
            <div class="code-light">gt mayor up        # Start mayor
gt mayor status    # Check mayor state
gt mayor down      # Stop mayor</div>
            <div class="model-rec"><strong>Opus 4.5</strong> &mdash; Complex coordination requires top-tier reasoning</div>
          </div>

          <!-- Deacon -->
          <div class="bento-cell">
            <div class="bento-cell__label">Role 2 of 8</div>
            <div class="bento-cell__title">Deacon &mdash; Monitoring</div>
            <p>Health monitoring and agent coordination. Monitors agent health across the town, handles agent-to-agent handshakes, reports anomalies to Mayor, tracks work progress, manages handoff protocols and worker recycling.</p>
            <div class="code-light">gt deacon up       # Start deacon
gt deacon status   # View state</div>
            <div class="model-rec"><strong>Haiku</strong> &mdash; Simple health checks</div>
          </div>

          <!-- Dogs -->
          <div class="bento-cell">
            <div class="bento-cell__label">Role 3 of 8</div>
            <div class="bento-cell__title">Dogs &mdash; Quality Gates</div>
            <p>Quality assurance and safety gates. Reviews work before acceptance, enforces quality standards, guards against regressions, can reject/rollback work, handles stale branch cleanup.</p>
            <div class="code-light">gt dogs up         # Start dogs
gt dogs bark       # Trigger check</div>
            <div class="model-rec"><strong>Sonnet</strong> &mdash; Quality review reasoning</div>
          </div>
        </div>

        <!-- Rig-Level Roles -->
        <span class="tier-label tier-label--rig">Rig Level</span>

        <div class="bento-grid">
          <!-- Refinery -->
          <div class="bento-cell bento-cell--primary">
            <div class="bento-cell__label">Role 4 of 8</div>
            <div class="bento-cell__title">Refinery &mdash; Task Decomposition</div>
            <p>Breaks down large tasks into agent-sized work. Receives feature requests from Mayor, decomposes into smaller atomic tasks, assigns to Polecats or Crew, tracks decomposition progress, manages the merge queue with sequential rebasing.</p>
            <div class="code-light">gt refinery up &lt;rig&gt;           # Start refinery for rig
gt refinery decompose &lt;task&gt;   # Trigger decomposition</div>
            <div class="model-rec"><strong>Opus 4.5</strong> &mdash; Task decomposition is architecturally complex</div>
          </div>

          <!-- Polecat -->
          <div class="bento-cell">
            <div class="bento-cell__label">Role 5 of 8</div>
            <div class="bento-cell__title">Polecat &mdash; Named Workers</div>
            <p>Named, persistent agent workers with specializations. Execute assigned tasks, maintain context across sessions, specialize in rig-specific knowledge, report completion to Refinery.</p>
            <div class="code-light">gt polecat up &lt;rig&gt; alice
gt polecat list &lt;rig&gt;
gt polecat assign alice &lt;task&gt;</div>
            <div class="model-rec"><strong>Sonnet</strong> &mdash; Main workhorse</div>
          </div>

          <!-- Witness -->
          <div class="bento-cell">
            <div class="bento-cell__label">Role 6 of 8</div>
            <div class="bento-cell__title">Witness &mdash; Per-Rig Observer</div>
            <p>Observes and records all rig activity. Watches work in assigned rig, records history and context, provides state to new workers, reports anomalies to Deacon, unsticks drifting agents.</p>
            <div class="code-light">gt witness up &lt;rig&gt;
gt witness report</div>
            <div class="model-rec"><strong>Haiku</strong> &mdash; Observation logging</div>
          </div>
        </div>

        <div class="bento-grid">
          <!-- Crew -->
          <div class="bento-cell">
            <div class="bento-cell__label">Role 7 of 8</div>
            <div class="bento-cell__title">Crew &mdash; Ephemeral Workers</div>
            <p>Short-lived, task-specific burst workers. No persistent state. Cheap and disposable. Used for parallel bursts. Spawn, complete, disappear.</p>
            <div class="code-light">gt crew spawn &lt;rig&gt; --task "fix this bug"
gt crew count &lt;rig&gt;
gt crew purge &lt;rig&gt;</div>
            <div class="model-rec"><strong>Haiku</strong> &mdash; Simple, isolated tasks</div>
          </div>

          <!-- Overseer -->
          <div class="bento-cell">
            <div class="bento-cell__label">Role 8 of 8</div>
            <div class="bento-cell__title">Overseer &mdash; You</div>
            <p>Product Manager and decision maker. Define features and priorities, review inbox decisions, approve major changes, provide human judgment. You have an identity in the system with your own inbox &mdash; you can send and receive town mail.</p>
            <div class="model-rec"><strong>Human</strong> &mdash; The boss</div>
          </div>
        </div>

        <h3>Role Communication Flow</h3>

        <div class="diagram-block">
          <div class="diagram-label">Communication Flow</div>
          <pre>[Overseer: YOU]
     │
     │ "Build user authentication"
     ▼
[Mayor] ──────────────────────────────────────┐
     │                                          │
     │ routes to rig                            │ status reports
     ▼                                          │
[Refinery] ─────────────────────┐              │
     │                           │              │
     │ decomposes into:          │ progress     │
     │ - task 1: DB schema       │              │
     │ - task 2: API routes      │              │
     │ - task 3: Frontend forms  │              │
     ▼                           ▼              │
[Polecat: alice] ◄──────── [Witness] ─────────┘
[Polecat: bob]     observes    │
[Crew: temp-1]                 │
     │                         │
     │ on anomaly              │
     ▼                         │
[Dogs] ← quality check ────────┘
     │
     │ if passes
     ▼
[Complete]</pre>
        </div>

      </div>
    </section>

    <!-- ============================================================
         INTERLUDE 1: Between Roles and Memory System
         The reader has absorbed the 8 roles. Reorient before Beads.
         ============================================================ -->
    <div class="interlude" role="separator" aria-label="Transition to Memory System">
      <div class="dispatch-container">
        <div class="interlude__marker">Shifting Stations</div>
        <div class="interlude__text">
          <p>You now know who works in the factory. Eight roles, three tiers, one hierarchy. But a factory without memory is a factory where every shift starts from zero. Next: the system that gives your agents a past.</p>
        </div>
      </div>
    </div>

    <!-- ============================================================
         Z3 continued: Beads Memory System + 6 Waves
         Same zone, new station — earthy background continues
         ============================================================ -->
    <section class="z3-tactical" aria-label="Tactical Map — Memory and Evolution">
      <div class="dispatch-container">

        <!-- Beads: The Memory System -->
        <h2 id="beads-memory">Beads: The Memory System</h2>

        <h3>The "50 First Dates" Problem</h3>

        <div class="radio-transmission">
          <blockquote>"Agents suffer from '50 First Dates' syndrome &mdash; they wake up with no memory of yesterday."</blockquote>
          <cite>Steve Yegge</cite>
        </div>

        <p>Every new Claude session starts fresh. This is the fundamental problem Beads solves.</p>

        <h3>Why Markdown Plans Fail at Scale</h3>

        <table>
          <thead>
            <tr>
              <th>Problem</th>
              <th>Consequence</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Not queryable</td>
              <td>Agents must parse dozens of files to reconstruct work graph</td>
            </tr>
            <tr>
              <td>No dependency tracking</td>
              <td>Agents cannot compute which tasks are unblocked</td>
            </tr>
            <tr>
              <td>Conflict-prone</td>
              <td>Multiple agents editing same files</td>
            </tr>
            <tr>
              <td>Implicit task stacks</td>
              <td>"Intelligent wandering" without clear direction</td>
            </tr>
          </tbody>
        </table>

        <h3>What Beads Does</h3>

        <p><strong>Beads</strong> (github.com/steveyegge/beads) is a ~225K line Go project providing:</p>

        <ul>
          <li><strong>Git-backed storage:</strong> All state persisted in git</li>
          <li><strong>Universal context:</strong> Shared context across all agents</li>
          <li><strong>Memory management:</strong> Agents can read/write context</li>
          <li><strong>Hash-based IDs:</strong> (e.g., <code>bd-a1b2</code>) prevent merge conflicts</li>
          <li><strong>Dependency tracking:</strong> Explicit links between tasks</li>
          <li><strong>Memory decay:</strong> Compaction summarizes old closed tasks</li>
        </ul>

        <h3>Beads Architecture</h3>

        <div class="diagram-block">
          <div class="diagram-label">Beads Data Plane</div>
          <pre>┌─────────────────────────────────────────────────────────────┐
│                       GAS TOWN                               │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐             │
│  │   Mayor    │  │   Polecat  │  │    Crew    │             │
│  └─────┬──────┘  └──────┬─────┘  └──────┬─────┘             │
│        │                │               │                    │
│        └────────────────┼───────────────┘                    │
│                         │                                    │
│                   ┌─────▼─────┐                             │
│                   │   BEADS   │                             │
│                   │ Data Plane│                             │
│                   └─────┬─────┘                             │
│                         │                                    │
└─────────────────────────┼────────────────────────────────────┘
                          │
                          ▼
                   ┌─────────────┐
                   │    Git      │
                   │ Repository  │
                   └─────────────┘</pre>
        </div>

        <h3>Memory Model</h3>

        <div class="memory-layers">
          <div class="memory-layer memory-layer--hot">
            <div class="memory-layer__label">Layer 1: Hot Context (RAM-cached)</div>
            <ul>
              <li>Current task state</li>
              <li>Last N interactions</li>
              <li>Active file references</li>
            </ul>
          </div>
          <div class="memory-layer memory-layer--warm">
            <div class="memory-layer__label">Layer 2: Warm Context (SQLite + Git index)</div>
            <ul>
              <li>Recent commit history</li>
              <li>Cross-agent message log</li>
              <li>Rig state snapshots</li>
            </ul>
          </div>
          <div class="memory-layer memory-layer--cold">
            <div class="memory-layer__label">Layer 3: Cold Context (Git history)</div>
            <ul>
              <li>Full project history</li>
              <li>Previous run outcomes</li>
              <li>Archived decisions</li>
            </ul>
          </div>
        </div>

        <p><strong>Retrieval:</strong> Hot &rarr; Warm &rarr; Cold (only query cold if needed)</p>

        <h3>Key Beads Commands</h3>

        <div class="code-light">bd ready           # List tasks with zero blockers (what can be done NOW)
bd create "Title"  # Create new task
bd dep add X Y     # X is blocked by Y
bd show &lt;id&gt;       # Full task state and history</div>

        <h3>Why Git as Database?</h3>

        <div class="radio-transmission">
          <blockquote>"Git as database provides durable, diffable, auditable storage with zero infrastructure."</blockquote>
          <cite>Steve Yegge</cite>
        </div>

        <ul>
          <li><strong>Survives crashes:</strong> Everything is committed</li>
          <li><strong>Audit trail:</strong> Full history of all agent actions</li>
          <li><strong>Recovery:</strong> Roll back to any point in time</li>
          <li><strong>Sharing:</strong> Multiple agents share the same store</li>
          <li><strong>No heavyweight message bus required</strong></li>
        </ul>

        <!-- The 6 Waves of AI -->
        <h2 id="six-waves">The 6 Waves of AI</h2>

        <p>Steve frames the evolution of AI-assisted development as six overlapping waves:</p>

        <table>
          <thead>
            <tr>
              <th>Wave</th>
              <th>Era</th>
              <th>Description</th>
              <th>Productivity</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>Pre-2022</td>
              <td>Traditional manual coding</td>
              <td>Baseline</td>
            </tr>
            <tr>
              <td>2</td>
              <td>2023</td>
              <td>Completions-based (Copilot-style)</td>
              <td>~2x</td>
            </tr>
            <tr>
              <td>3</td>
              <td>2024</td>
              <td>Chat-based (CHOP)</td>
              <td>~5x</td>
            </tr>
            <tr>
              <td>4</td>
              <td>2025 H1</td>
              <td>Coding agents (Claude Code, Amp, Codex)</td>
              <td>~10x</td>
            </tr>
            <tr>
              <td>5</td>
              <td>2025 H2</td>
              <td>Agent clusters (multi-agent parallel)</td>
              <td>~25x</td>
            </tr>
            <tr>
              <td><strong>6</strong></td>
              <td><strong>2026+</strong></td>
              <td><strong>Agent fleets (AI supervisors managing swarms)</strong></td>
              <td><strong>~50x+</strong></td>
            </tr>
          </tbody>
        </table>

        <p><strong>Gas Town is Wave 6 infrastructure.</strong></p>

        <h3>The 8 Stages of Dev Evolution</h3>

        <table>
          <thead>
            <tr>
              <th>Stage</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>1</td><td>Zero/near-zero AI</td></tr>
            <tr><td>2</td><td>Agent in IDE, permissions on</td></tr>
            <tr><td>3</td><td>Agent in IDE, YOLO mode</td></tr>
            <tr><td>4</td><td>Agent fills screen, code is just diffs</td></tr>
            <tr><td>5</td><td>CLI single agent, YOLO</td></tr>
            <tr><td>6</td><td>CLI multi-agent (3&ndash;5 parallel)</td></tr>
            <tr><td>7</td><td>10+ agents, hand-managed</td></tr>
            <tr><td><strong>8</strong></td><td><strong>Building your own orchestrator</strong></td></tr>
          </tbody>
        </table>

        <div class="callout callout--warning callout--dense-context">
          <div class="callout-label">Critical Warning</div>
          <div class="callout-body">
            <p>"If you're not at Stage 7, you'll get your face ripped off by superintelligent chimpanzees."</p>
            <p>Gas Town is for Stage 7+ developers. If you are not there yet, go back to Ralph loops.</p>
          </div>
        </div>

      </div>
    </section>

    <!-- ============================================================
         INTERLUDE 2: The pivot from UNDERSTANDING to DOING
         The reader has absorbed architecture. Now comes the philosophy
         and operations. This is the turning point the brief called for.
         ============================================================ -->
    <div class="interlude" role="separator" aria-label="Transition to Operations">
      <div class="dispatch-container">
        <div class="interlude__marker">Entering the Command Console</div>
        <div class="interlude__text">
          <p>You understand the factory: its roles, its memory, its place in the evolution of AI-assisted development. What follows is how it thinks and how you operate it. The briefing is over. Here are your orders.</p>
        </div>
      </div>
    </div>

    <!-- ============================================================
         Z4: COMMAND CONSOLE — Principles + Implementation + Ops
         ============================================================ -->
    <section class="z4-command" aria-label="Command Console">
      <div class="dispatch-container">

        <div class="section-indicator">Z4 &mdash; Command Console</div>

        <h2 id="core-principles">Core Principles</h2>

        <!-- GUPP -->
        <div class="principle">
          <div class="principle__title">GUPP: The Universal Propulsion Principle</div>
          <blockquote>"If there is work on your hook, YOU MUST RUN IT."</blockquote>
          <p>This solves the fundamental problem that "Claude Code ends." Work is "slung" to agent hooks (persistent git worktrees). When an agent starts, it checks its hook. If work exists, execution is immediate &mdash; no confirmation, no waiting. Work survives crashes and restarts.</p>
          <p><strong>The Gupp Nudge:</strong> Claude Code is "so miserably polite" that GUPP does not always work. Gas Town implements a "Gupp Nudge" &mdash; agents get a startup poke with <code>gt nudge</code> roughly 30&ndash;60 seconds after starting.</p>
        </div>

        <!-- Zero Framework Cognition -->
        <div class="principle">
          <div class="principle__title">Zero Framework Cognition</div>
          <blockquote>"Claude makes all decisions. The orchestrator executes."</blockquote>
          <p>All decisions delegated to AI. No heuristics, regex, or parsing in the orchestrator. The framework provides infrastructure, not intelligence.</p>
        </div>

        <!-- Agents as Cattle -->
        <div class="principle">
          <div class="principle__title">Agents as Cattle, Not Pets</div>
          <p>Kubernetes thinking applied to agents:</p>
          <ul>
            <li>Individual sessions are ephemeral</li>
            <li>The work graph is persistent</li>
            <li>The agent is not the session</li>
            <li>The agent is a Bead (identity with a global address)</li>
          </ul>
        </div>

        <!-- Nondeterministic Idempotence -->
        <div class="principle">
          <div class="principle__title">Nondeterministic Idempotence</div>
          <p>Workflows can be interrupted and resumed at any time. The path is fully nondeterministic &mdash; different runs take different routes. The workflow eventually finishes as long as you keep throwing agents at it. Agents may make mistakes but self-correct because acceptance criteria are well-specified. The system is resilient to individual component failures.</p>
        </div>

        <!-- Token Spend -->
        <div class="principle">
          <div class="principle__title">Token Spend as Health Metric</div>
          <blockquote>"Token spend per developer per unit time is the new health metric that best represents how well your company is doing with AI."</blockquote>
          <p><strong>The math:</strong></p>
          <ul>
            <li>Agent cost: ~$10&ndash;12 per operating hour</li>
            <li>Recommended daily developer LLM budget: $100&ndash;300</li>
            <li>Yegge's personal spend: ~$300/day, ~$80,000/year</li>
            <li>Gas Town workshops generate 12,000 LOC/day per developer</li>
          </ul>
        </div>

        <!-- Talk to the Plan -->
        <div class="principle">
          <div class="principle__title">Talk to the Plan, Not the Agent</div>
          <p>Because agents have limited context windows and experience "amnesia," maintain persistent readable plans in files. Both you and agents reference these plans. <strong>"Land the Plane" pattern:</strong> At session end, clean up git, update issues, spit out prompt for next session.</p>
        </div>

        <!-- Implementation Guide -->
        <h2 id="implementation">Implementation Guide</h2>

        <h3>Prerequisites Checklist</h3>

        <p>Before installing Gas Town, verify:</p>

        <ul class="checklist">
          <li><strong>Go 1.21+</strong> installed (<code>go version</code>)</li>
          <li><strong>tmux</strong> installed and proficient (<code>tmux -V</code>)</li>
          <li><strong>Multiple Claude accounts</strong> for parallel agents</li>
          <li><strong>Stage 7+ experience</strong> (100+ hours multi-agent)</li>
          <li><strong>High chaos tolerance</strong> (some bugs, some lost work)</li>
          <li><strong>Budget:</strong> $50&ndash;200/day</li>
        </ul>

        <h3>Installation</h3>

        <div class="code-light"><span class="cmt"># Step 1: Install Gas Town</span>
go install github.com/steveyegge/gastown/cmd/gt@latest

<span class="cmt"># Step 2: Verify installation</span>
gt version

<span class="cmt"># Step 3: Initialize your town (creates ~/.gt)</span>
gt init</div>

        <div class="callout callout--tip callout--dense-context">
          <div class="callout-label">Checkpoint</div>
          <div class="callout-body">
            <p>You should see <code>Town initialized at ~/.gt</code></p>
          </div>
        </div>

        <h3>Adding Your First Rig</h3>

        <div class="code-light"><span class="cmt"># Add a project rig</span>
gt rig add /path/to/your/project

<span class="cmt"># Verify</span>
gt rig list</div>

        <h3>Starting the Core Roles</h3>

        <p>Recommended startup sequence:</p>

        <pre><code><span class="cmt"># 1. Start town-level roles first</span>
gt mayor up
gt deacon up
gt dogs up

<span class="cmt"># 2. Start rig-level infrastructure</span>
gt witness up my-project
gt refinery up my-project

<span class="cmt"># 3. Start named workers</span>
gt polecat up my-project alice
gt polecat up my-project bob
gt polecat up my-project carol</code></pre>

        <div class="callout callout--tip callout--dense-context">
          <div class="callout-label">Checkpoint</div>
          <div class="callout-body">
            <p><code>gt status</code> should show all roles running.</p>
          </div>
        </div>

        <h3>tmux Workflow</h3>

        <p>Gas Town is tmux-native. Understand this structure:</p>

        <div class="diagram-block">
          <div class="diagram-label">tmux Session Layout</div>
          <pre>┌─────────────────────────────────────────────────────────────┐
│  tmux session: gastown                                       │
├────────────────────┬────────────────────┬───────────────────┤
│                    │                    │                   │
│  Window: mayor     │  Window: alice     │  Window: bob      │
│  ┌──────────────┐  │  ┌──────────────┐  │  ┌─────────────┐ │
│  │  Mayor       │  │  │  Polecat     │  │  │  Polecat    │ │
│  │  Agent       │  │  │  Alice       │  │  │  Bob        │ │
│  └──────────────┘  │  └──────────────┘  │  └─────────────┘ │
├────────────────────┴────────────────────┴───────────────────┤
│  Window: overview                                            │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ rpai - Agent Status Monitor                             ││
│  └─────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────┘</pre>
        </div>

        <h3>Startup Script</h3>

        <div class="code-snippet">
          <div class="code-snippet__header">
            <span class="code-snippet__filename">gastown-start.sh</span>
          </div>
          <div class="code-snippet__content"><span class="cmt">#!/bin/bash</span>
SESSION=<span class="str">"gastown"</span>

<span class="cmt"># Kill existing session if requested</span>
<span class="kw">if</span> [ <span class="str">"$1"</span> = <span class="str">"--fresh"</span> ]; <span class="kw">then</span>
  tmux kill-session -t $SESSION 2>/dev/null
<span class="kw">fi</span>

<span class="cmt"># Create session</span>
tmux new-session -d -s $SESSION -n <span class="str">'overview'</span>

<span class="cmt"># Infrastructure windows</span>
tmux new-window -t $SESSION -n <span class="str">'mayor'</span>
tmux new-window -t $SESSION -n <span class="str">'infra'</span>
tmux split-window -h -t $SESSION:infra

<span class="cmt"># Per-rig windows</span>
<span class="kw">for</span> RIG <span class="kw">in</span> project1 project2; <span class="kw">do</span>
  tmux new-window -t $SESSION -n <span class="str">"rig-$RIG"</span>
  tmux split-window -h -t <span class="str">"rig-$RIG"</span>
<span class="kw">done</span>

<span class="cmt"># Polecat windows</span>
<span class="kw">for</span> POLECAT <span class="kw">in</span> alice bob carol; <span class="kw">do</span>
  tmux new-window -t $SESSION -n <span class="str">"$POLECAT"</span>
<span class="kw">done</span>

<span class="cmt"># Inbox window</span>
tmux new-window -t $SESSION -n <span class="str">'inbox'</span>

<span class="cmt"># Start roles</span>
tmux send-keys -t $SESSION:mayor <span class="str">'gt mayor up'</span> C-m
tmux send-keys -t $SESSION:infra.0 <span class="str">'gt deacon up'</span> C-m
tmux send-keys -t $SESSION:infra.1 <span class="str">'gt dogs up'</span> C-m
tmux send-keys -t $SESSION:rig-project1.0 <span class="str">'gt witness up project1'</span> C-m
tmux send-keys -t $SESSION:rig-project1.1 <span class="str">'gt refinery up project1'</span> C-m
tmux send-keys -t $SESSION:alice <span class="str">'gt polecat up project1 alice'</span> C-m
tmux send-keys -t $SESSION:bob <span class="str">'gt polecat up project1 bob'</span> C-m
tmux send-keys -t $SESSION:inbox <span class="str">'watch -n 5 gt inbox'</span> C-m

<span class="cmt"># Attach</span>
tmux select-window -t $SESSION:overview
tmux attach -t $SESSION</div>
        </div>

        <h3>Typical Daily Workflow</h3>

        <pre><code><span class="cmt"># Morning: Start town</span>
./gastown-start.sh

<span class="cmt"># Review overnight status</span>
gt status
gt inbox

<span class="cmt"># File new feature</span>
gt inbox send my-project <span class="str">"Build user authentication"</span>

<span class="cmt"># Refinery decomposes, assigns to polecats</span>
<span class="cmt"># You review pending decisions</span>
gt inbox respond 5 --approve
gt inbox respond 7 --approve

<span class="cmt"># Monitor throughout day (switch tmux windows)</span>
<span class="cmt"># Dogs run quality checks automatically</span>

<span class="cmt"># Evening: Review completed work</span>
gt inbox review
gt approve 12 15 18

<span class="cmt"># End of day (polecats persist, crew killed)</span>
gt crew purge my-project</code></pre>

        <!-- Checkpoints and Verification -->
        <h2 id="checkpoints">Checkpoints and Verification</h2>

        <h3>Post-Installation Checkpoints</h3>

        <table>
          <thead>
            <tr>
              <th>Step</th>
              <th>Command</th>
              <th>Expected Output</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Go installed</td>
              <td><code>go version</code></td>
              <td><code>go version go1.21+</code></td>
            </tr>
            <tr>
              <td>gt installed</td>
              <td><code>gt version</code></td>
              <td>Version number</td>
            </tr>
            <tr>
              <td>Town initialized</td>
              <td><code>gt status</code></td>
              <td>Shows town state</td>
            </tr>
            <tr>
              <td>Rig added</td>
              <td><code>gt rig list</code></td>
              <td>Shows your project</td>
            </tr>
            <tr>
              <td>Mayor running</td>
              <td><code>gt mayor status</code></td>
              <td><code>running</code></td>
            </tr>
          </tbody>
        </table>

        <h3>Health Checks</h3>

        <div class="code-light"><span class="cmt"># Check all role status</span>
gt status

<span class="cmt"># Check specific rig</span>
gt rig status my-project

<span class="cmt"># View agent health</span>
gt deacon report</div>

        <p><strong>Healthy state indicators:</strong></p>
        <ul>
          <li>All roles show <code>running</code></li>
          <li>Deacon reports no anomalies</li>
          <li>Inbox has reasonable pending items (not 100+)</li>
          <li>Polecats are progressing on tasks</li>
        </ul>

        <h3>Quality Verification</h3>

        <div class="code-light"><span class="cmt"># Trigger Dogs quality check</span>
gt dogs bark

<span class="cmt"># Review what passed/failed</span>
gt dogs report</div>

      </div>
    </section>

    <!-- ============================================================
         INTERLUDE 3: Between Implementation and Troubleshooting
         The reader has installed and configured. Now comes recovery.
         ============================================================ -->
    <div class="interlude" role="separator" aria-label="Transition to Troubleshooting">
      <div class="dispatch-container">
        <div class="interlude__marker">When Things Go Wrong</div>
        <div class="interlude__text">
          <p>Your factory is running. The agents are working. But this is a system built on chaos tolerance, not chaos prevention. What follows is the field manual for when the machinery jams.</p>
        </div>
      </div>
    </div>

    <!-- ============================================================
         Z4 continued: Troubleshooting (separated for breathing room)
         ============================================================ -->
    <section class="z4-command" aria-label="Command Console — Troubleshooting">
      <div class="dispatch-container">

        <h2 id="troubleshooting">Troubleshooting</h2>

        <h3>Common Failures and Recovery</h3>

        <div class="trouble-entry">
          <h4>1. Context Collapse</h4>
          <p class="trouble-symptom"><strong>Symptom:</strong> Agents stop making sense, circular reasoning</p>
          <p><strong>Cause:</strong> Beads state corruption or no auto-compact</p>
          <div class="code-light">gt town reset --soft   <span class="cmt"># Keep config, clear state</span>
gt beads sync --force  <span class="cmt"># Force context resync</span></div>
        </div>

        <div class="trouble-entry">
          <h4>2. Race Conditions / Merge Conflicts</h4>
          <p class="trouble-symptom"><strong>Symptom:</strong> Conflicting commits, overwritten work</p>
          <p><strong>Cause:</strong> Multiple Polecats editing same files</p>
          <p><strong>Recovery:</strong> Use git worktrees for file isolation, implement file ownership rules, use the Refinery's merge queue.</p>
          <div class="code-light">git status
gt refinery resolve my-project</div>
        </div>

        <div class="trouble-entry">
          <h4>3. Runaway Crew</h4>
          <p class="trouble-symptom"><strong>Symptom:</strong> Cost spike, dozens of Crew spawned unexpectedly</p>
          <p><strong>Cause:</strong> Refinery misconfiguration or task explosion</p>
          <div class="code-light">gt crew purge --all
gt config set crew.max_per_rig 5
gt config set crew.idle_timeout 15</div>
        </div>

        <div class="trouble-entry">
          <h4>4. Mayor Deadlock</h4>
          <p class="trouble-symptom"><strong>Symptom:</strong> No work getting assigned, town seems stuck</p>
          <p><strong>Cause:</strong> Mayor waiting for human decision</p>
          <div class="code-light">gt inbox
gt inbox respond &lt;id&gt; --approve
gt inbox respond &lt;id&gt; --reject</div>
        </div>

        <div class="trouble-entry">
          <h4>5. Beads Desync</h4>
          <p class="trouble-symptom"><strong>Symptom:</strong> Agents have stale context, working on old state</p>
          <p><strong>Cause:</strong> Git conflicts in Beads repo</p>
          <div class="code-light">gt beads sync --force
gt beads reset</div>
        </div>

        <div class="trouble-entry">
          <h4>6. Agent Won't Start</h4>
          <p class="trouble-symptom"><strong>Symptom:</strong> <code>gt polecat up</code> returns error</p>
          <p><strong>Cause:</strong> Claude account issue, rate limiting, or config problem</p>
          <div class="code-light">gt config list
gt config set polecat.alice.account secondary
claude --version</div>
        </div>

        <h3>Recovery Command Reference</h3>

        <pre><code><span class="cmt"># Soft reset (keep config)</span>
gt town reset --soft

<span class="cmt"># Hard reset (full reinstall)</span>
gt town reset --hard

<span class="cmt"># Kill all agents</span>
gt town down

<span class="cmt"># Restart specific role</span>
gt polecat down my-project alice
gt polecat up my-project alice

<span class="cmt"># Force Beads sync</span>
gt beads sync --force

<span class="cmt"># Clear inbox backlog</span>
gt inbox clear --all

<span class="cmt"># Emergency cost stop</span>
gt pause --all   <span class="cmt"># Pause all work</span>
gt resume --all  <span class="cmt"># Resume when ready</span></code></pre>

      </div>
    </section>

    <!-- ============================================================
         Z5: DISPATCH LOG — When to Use + Quotes + Comparisons + Sources
         ============================================================ -->
    <section class="z5-dispatch" aria-label="Dispatch Log">
      <div class="dispatch-container">

        <div class="section-indicator">Z5 &mdash; Dispatch Log</div>

        <h2 id="when-to-use">When to Use Gas Town</h2>

        <div class="bento-grid">
          <div class="bento-cell">
            <div class="bento-cell__label">Use Gas Town When</div>
            <ul>
              <li>You are at Stage 7+ (10+ agents, comfortable with chaos)</li>
              <li>Budget is not a concern ($50&ndash;200/day)</li>
              <li>You want <strong>team-scale output</strong> as a solo developer</li>
              <li>You have clear product vision but need implementation velocity</li>
              <li>You are comfortable with imperfection</li>
              <li>You have tmux proficiency</li>
              <li>You understand the PM &rarr; engineering team mental model</li>
            </ul>
          </div>
          <div class="bento-cell">
            <div class="bento-cell__label">Do Not Use Gas Town When</div>
            <ul>
              <li>You are below Stage 6 on the dev evolution scale</li>
              <li>Budget is constrained</li>
              <li>You need polish and stability</li>
              <li>You need predictable, controlled outcomes</li>
              <li>You are not comfortable with chaos</li>
              <li>The project is simple enough for Ralph loops</li>
              <li>You have not mastered Levels 0&ndash;6</li>
            </ul>
          </div>
        </div>

        <h3>Decision Matrix</h3>

        <div class="diagram-block">
          <div class="diagram-label">Which Orchestrator?</div>
          <pre>START HERE
    │
    ▼
Are you Stage 7+? ──No──► Use Ralph Wiggum or CC Mirror
    │
   Yes
    │
    ▼
Is cost a concern? ──Yes──► Use CC Mirror + Parallel Ralph
    │
    No
    │
    ▼
Need 24/7 autonomous? ──Yes──► Consider Infinite Orchestra
    │
    No
    │
    ▼
Want maximum throughput + control?
    │
   Yes ──► GAS TOWN</pre>
        </div>

        <!-- Quotes and Key Statements -->
        <h2 id="quotes">Quotes and Key Statements</h2>

        <div class="quote-gallery">
          <div class="quote-card">
            <div class="quote-card__theme">Core Philosophy</div>
            <blockquote>"Claude Code is the world's biggest fuckin' ant. Everyone is focused on making their ant run longer... when nature prefers colonies."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Core Philosophy</div>
            <blockquote>"Gas Town is an Idea Compiler. You just make up features, design them, file the implementation plans, and sling work around to your polecats and crew."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Vibe Coding</div>
            <blockquote>"Work becomes fluid, an uncountable that you sling around freely, like slopping shiny fish into wooden barrels at the docks."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Expectations</div>
            <blockquote>"Some bugs fixed 2&ndash;3 times. Some fixes get lost. Focus: THROUGHPUT, not perfection."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Prerequisites</div>
            <blockquote>"If you're not at Stage 7, you'll get your face ripped off by superintelligent chimpanzees."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Prerequisites</div>
            <blockquote>"If you have any doubt whatsoever, then you can't use it."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Maturity</div>
            <blockquote>"Code is 3 weeks old &mdash; smuggled 400 miles upriver in my ass."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Maturity</div>
            <blockquote>"100% vibe-coded &mdash; I have never looked at the code myself."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Cost</div>
            <blockquote>"If you care about costs, don't use this."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Cost</div>
            <blockquote>"Expensive as hell &mdash; multiple Claude accounts needed."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Language</div>
            <blockquote>"Go is just... good. It's boring. You can always understand it!"</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Language</div>
            <blockquote>"TypeScript: 1/3 to 1/2 of diffs are type wrestling."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Agents</div>
            <blockquote>"That's you, Human. As the Overseer, you have an identity in the system, and your own inbox, and you can send and receive town mail."</blockquote>
          </div>
          <div class="quote-card">
            <div class="quote-card__theme">Agents</div>
            <blockquote>"Build a colony of coding agents, not the world's largest ant."</blockquote>
          </div>
        </div>

        <!-- Comparisons -->
        <h2 id="comparisons">Comparison with Other Patterns</h2>

        <div class="comparison-block">
          <h3>Gas Town vs Ralph Wiggum</h3>
          <table>
            <thead>
              <tr>
                <th>Aspect</th>
                <th>Ralph Wiggum</th>
                <th>Gas Town</th>
              </tr>
            </thead>
            <tbody>
              <tr><td><strong>Model</strong></td><td>Single agent, retry loop</td><td>Multi-agent factory</td></tr>
              <tr><td><strong>Complexity</strong></td><td>Bash script</td><td>Full system</td></tr>
              <tr><td><strong>Persistence</strong></td><td>Via git/progress.txt</td><td>Beads data plane</td></tr>
              <tr><td><strong>Parallelism</strong></td><td>None (sequential)</td><td>Native (many agents)</td></tr>
              <tr><td><strong>Roles</strong></td><td>None</td><td>8 specialized roles</td></tr>
              <tr><td><strong>Setup</strong></td><td>Minutes</td><td>Hours/days</td></tr>
              <tr><td><strong>Cost</strong></td><td>Single agent</td><td>Multiple accounts</td></tr>
              <tr><td><strong>Use Case</strong></td><td>Well-defined features</td><td>Complex systems, ongoing dev</td></tr>
            </tbody>
          </table>
          <div class="comparison-verdict">
            <strong>When to use Ralph:</strong> Single feature, clear completion criteria, budget-conscious.<br>
            <strong>When to use Gas Town:</strong> Building entire products, team-scale output needed.
          </div>
        </div>

        <div class="comparison-block">
          <h3>Gas Town vs CC Mirror</h3>
          <table>
            <thead>
              <tr>
                <th>Aspect</th>
                <th>CC Mirror</th>
                <th>Gas Town</th>
              </tr>
            </thead>
            <tbody>
              <tr><td><strong>Model</strong></td><td>Task-based DAG</td><td>Agent factory</td></tr>
              <tr><td><strong>Complexity</strong></td><td>Medium</td><td>High</td></tr>
              <tr><td><strong>Setup</strong></td><td>npx command</td><td>Go install + config</td></tr>
              <tr><td><strong>Dependencies</strong></td><td>TaskCreate/BlockedBy</td><td>Beads + Agent Mail</td></tr>
              <tr><td><strong>Parallelism</strong></td><td>Auto-scheduled</td><td>Explicit workers</td></tr>
              <tr><td><strong>Roles</strong></td><td>None (generic agents)</td><td>8 specialized</td></tr>
              <tr><td><strong>Persistence</strong></td><td>Built-in tasks</td><td>Git via Beads</td></tr>
              <tr><td><strong>Cost</strong></td><td>Single variant</td><td>Multiple accounts</td></tr>
            </tbody>
          </table>
          <div class="comparison-verdict">
            <strong>nummanali's take:</strong> "Simplicity covers 80% with zero effort &mdash; mass-market ease. Gas Town for remaining 20%."<br>
            <strong>When to use CC Mirror:</strong> Most projects, getting started with multi-agent.<br>
            <strong>When to use Gas Town:</strong> Stage 7+ scale, maximum throughput.
          </div>
        </div>

        <div class="comparison-block">
          <h3>Gas Town vs Infinite Orchestra</h3>
          <table>
            <thead>
              <tr>
                <th>Aspect</th>
                <th>Orchestra</th>
                <th>Gas Town</th>
              </tr>
            </thead>
            <tbody>
              <tr><td><strong>Model</strong></td><td>Self-improving</td><td>Production factory</td></tr>
              <tr><td><strong>Environment</strong></td><td>Docker container</td><td>tmux + local</td></tr>
              <tr><td><strong>Autonomy</strong></td><td>High (improves itself)</td><td>Human-directed</td></tr>
              <tr><td><strong>Parallelism</strong></td><td>Sequential (for now)</td><td>Native parallel</td></tr>
              <tr><td><strong>Roles</strong></td><td>Profiles (coder, arch)</td><td>8 fixed roles</td></tr>
              <tr><td><strong>Persistence</strong></td><td>Neo4j optional</td><td>Beads</td></tr>
              <tr><td><strong>24/7</strong></td><td>Yes (designed for)</td><td>Yes (tmux)</td></tr>
            </tbody>
          </table>
          <div class="comparison-verdict">
            <strong>When to use Orchestra:</strong> Experimental, self-evolving systems.<br>
            <strong>When to use Gas Town:</strong> Production development, human oversight.
          </div>
        </div>

        <h3>Pattern Comparison Summary</h3>

        <div class="diagram-block">
          <div class="diagram-label">Orchestrator Spectrum</div>
          <pre>SIMPLE ◄─────────────────────────────────────────────► COMPLEX

[Ralph Wiggum]    [CC Mirror]    [Orchestra]    [Gas Town]
     │                │              │              │
 Single agent     Multi-agent    Self-improving  Agent factory
 Retry loop       Task-based     Docker-based    Role-based
 Bash script      Native CC      Specialized     Full system
 $10-30/day       $30-80/day     $50-100/day    $50-200/day</pre>
        </div>

        <!-- Sources -->
        <h2 id="sources">Sources</h2>

        <h3>Primary Sources</h3>

        <h4>Blog Posts</h4>
        <ul class="sources-list">
          <li><span class="source-type">Blog</span> <a href="https://steve-yegge.medium.com/welcome-to-gas-town-4f25ee16dd04">Welcome to Gas Town</a> &mdash; Full philosophical context and architecture</li>
          <li><span class="source-type">Blog</span> <a href="https://steve-yegge.medium.com/the-future-of-coding-agents-e9451a84207c">The Future of Coding Agents</a> &mdash; Agent evolution thesis</li>
          <li><span class="source-type">Blog</span> <a href="https://steve-yegge.medium.com/beads-best-practices-2db636b9760c">Beads Best Practices</a> &mdash; Memory system deep dive</li>
          <li><span class="source-type">Blog</span> <a href="https://sourcegraph.com/blog/revenge-of-the-junior-developer">Revenge of the Junior Developer</a> &mdash; Wave framework</li>
          <li><span class="source-type">Blog</span> <a href="https://sourcegraph.com/blog/the-brute-squad">The Brute Squad</a> &mdash; Multi-agent philosophy</li>
        </ul>

        <h4>GitHub Repositories</h4>
        <ul class="sources-list">
          <li><span class="source-type">Repo</span> <a href="https://github.com/steveyegge/gastown">steveyegge/gastown</a> &mdash; Multi-agent workspace manager</li>
          <li><span class="source-type">Repo</span> <a href="https://github.com/steveyegge/beads">steveyegge/beads</a> &mdash; Agent memory system (~225K lines Go)</li>
          <li><span class="source-type">Repo</span> <a href="https://github.com/steveyegge/mcp_agent_mail">steveyegge/mcp_agent_mail</a> &mdash; Inter-agent communication</li>
          <li><span class="source-type">Repo</span> <a href="https://github.com/steveyegge/vc">steveyegge/vc</a> &mdash; AI-orchestrated coding agent colony</li>
          <li><span class="source-type">Repo</span> <a href="https://github.com/steveyegge/efrit">steveyegge/efrit</a> &mdash; Native elisp coding agent for Emacs</li>
        </ul>

        <h4>Podcasts &amp; Interviews</h4>
        <ul class="sources-list">
          <li><span class="source-type">Podcast</span> <a href="https://changelog.com/friends/96">Changelog: Adventures in Babysitting Coding Agents</a></li>
          <li><span class="source-type">Podcast</span> <a href="https://www.oreilly.com/radar/podcast/generative-ai-in-the-real-world-vibe-coding-with-steve-yegge/">O'Reilly: Vibe Coding with Steve Yegge</a></li>
        </ul>

        <h4>Community Extensions</h4>
        <table>
          <thead>
            <tr>
              <th>Extension</th>
              <th>Author</th>
              <th>Purpose</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><strong>GTGUI</strong></td><td>@TRIBE-INC</td><td>Age of Empires style GUI for Gas Town</td></tr>
            <tr><td><strong>Roughneck</strong></td><td>@mjtechguy</td><td>Run multiple Gas Towns simultaneously</td></tr>
            <tr><td><strong>Station</strong></td><td>@Esteban_Puerta9</td><td>Nats-based alternative architecture</td></tr>
            <tr><td><strong>Tutorial Skill</strong></td><td>@nummanali</td><td>Claude Code skill for learning Gas Town</td></tr>
          </tbody>
        </table>

        <h4>Installation</h4>
        <div class="code-light"><span class="cmt"># GTGUI</span>
git clone https://github.com/TRIBE-INC/gtgui

<span class="cmt"># Roughneck</span>
git clone https://github.com/mjtechguy/roughneck

<span class="cmt"># Tutorial skill</span>
/plugin marketplace add numman-ali/n-skills
/plugin install gastown@numman-ali/n-skills</div>

        <h4>Books</h4>
        <ul class="sources-list">
          <li><span class="source-type">Book</span> <a href="https://itrevolution.com">Vibe Coding</a> by Steve Yegge and Gene Kim</li>
        </ul>

        <!-- Quick Reference -->
        <h2>Quick Reference</h2>

        <h3>Installation Commands</h3>
        <div class="code-light">go install github.com/steveyegge/gastown/cmd/gt@latest
gt init
gt rig add /path/to/repo</div>

        <h3>Role Management</h3>
        <div class="code-light"><span class="cmt"># Town-level</span>
gt mayor up|down|status
gt deacon up|down|status
gt dogs up|down|status|bark

<span class="cmt"># Rig-level</span>
gt witness up|down &lt;rig&gt;
gt refinery up|down &lt;rig&gt;
gt polecat up|down|list &lt;rig&gt; [name]
gt crew spawn|count|purge &lt;rig&gt;</div>

        <h3>Inbox</h3>
        <div class="code-light">gt inbox                       <span class="cmt"># View pending</span>
gt inbox respond &lt;id&gt; --approve|--reject
gt inbox clear</div>

        <h3>Town Management</h3>
        <div class="code-light">gt status                      <span class="cmt"># Town-wide status</span>
gt town down                   <span class="cmt"># Stop all agents</span>
gt town reset --soft|--hard    <span class="cmt"># Reset state</span>
gt config set|get|list         <span class="cmt"># Configuration</span></div>

        <h3>Beads</h3>
        <div class="code-light">gt beads sync --force
gt beads reset
bd ready
bd create <span class="str">"Task title"</span>
bd dep add &lt;child&gt; &lt;parent&gt;</div>

        <h3>Cost Estimation</h3>

        <div class="diagram-block">
          <div class="diagram-label">Role-Based Cost Per Hour</div>
          <pre>Mayor (Opus):      $15-20/hour
Refinery (Opus):   $15-20/hour
Dogs (Sonnet):     $5-8/hour
Polecats (Sonnet): $5-10/hour each
Witness (Haiku):   $1-3/hour
Deacon (Haiku):    $1-2/hour
Crew (Haiku):      $0.50-2/hour each

Example daily cost:
━━━━━━━━━━━━━━━━━━
1 Mayor + 1 Deacon + 1 Dogs + 2 Rigs + 3 Polecats + 5 Crew
= $18 + $1.5 + $7 + $40 + $22.5 + $5
= ~$94/hour (rough estimate)

8 hours = ~$752/day (heavy usage)
Conservative usage = $50-100/day</pre>
        </div>

      </div>
    </section>

  </main>

  <!-- ============================================================
       FOOTER: Dark bookend
       ============================================================ -->
  <footer class="page-footer" role="contentinfo">
    <div class="dispatch-container">
      <div class="footer-section">
        <strong>Document</strong>
        Steve Yegge &middot; Gas Town &middot; Complete Extraction
      </div>
      <div class="footer-section">
        <strong>Sources</strong>
        6 primary documents &middot; 28+ cross-references
      </div>
      <div class="footer-closing">
        "Build a colony of coding agents, not the world's largest ant."
      </div>
    </div>
  </footer>

</body>
</html>
