# Pipeline V2 — DEFINITIVE Architecture Diagram

**MASTER REFERENCE** — This is the canonical ASCII visualization of Pipeline V2,
superseding both the original PV2 diagram (977 lines) and the diagram-updater's
version (Report 71, 1,341 lines).

**Generated:** 2026-02-19
**Source:** 35+ Opus investigation reports (compositional-intelligence corpus),
original PV2 diagram (24-agent team), 14 key structural/metacognitive reports
**Integrates:** Reports 67 (revised architecture), 68 (transition table), 69
(enriched TC), 70 (experiments), 72 (recipe vs brief), 73 (gate runner), 74
(bridging tissue), 83 (5-layer stack), 84 (builder telescope+microscope), 85
(recipe ceiling), 86 (intelligence hierarchy), 87 (inherent vs bolted), 93
(separation of concerns), 96 (diagram representation)
**Directives:** ALWAYS FLAGSHIP | ALWAYS REMEDIATION-STYLE | FIRE AND FORGET

---

```
+=====================================================================================+
|                                                                                       |
|       PIPELINE V2 — DEFINITIVE ARCHITECTURE (Post-Compositional Intelligence)        |
|       ===================================================================            |
|                                                                                       |
|    Directive: ALWAYS FLAGSHIP | ALWAYS REMEDIATION-STYLE | FIRE AND FORGET           |
|    Evidence:  35+ Opus agents, 14 structural reports, 5-layer stack traced,          |
|              11 boundary crossings mapped, 3 experiments designed, 7 gaps fixed       |
|    Mandate:   CODIFY, EXPERIMENT, BUILD — stop analyzing                             |
|                                                                                       |
+=====================================================================================+


=======================================================================================
  SECTION 0: COMPOSITIONAL INTELLIGENCE HEATMAP
  (Approach 1 from Report 96 — makes compression loss VISIBLE)
=======================================================================================

  The 5-layer compositional stack (Report 83/86) must survive from TC planner
  through builder to final output. This heatmap shows WHERE each layer is
  PRESENT, COMPRESSED, or ABSENT at each pipeline stage.

  LEGEND:  [#####] FULL   [#### ] HIGH   [###  ] MODERATE
           [##   ] LOW    [#    ] MINIMAL  [     ] ABSENT
           [?    ] DEPENDS ON BUILDER (no structural enforcement)

                      L1:Percep  L2:Scales  L3:Channels  L4:Multi-Co  L5:Anti-Scale
  STAGE               Thresholds (5 zoom)   (6 CSS grp)  (>=3 shift)  (density*R*SC)
  ==============      ========== ========== ============ ============ =============

  Content.md          [     ]    [     ]    [     ]      [     ]      [     ]
                      (raw content, no CI yet)

  TC Planner          [#####]    [#####]    [#### ]      [###  ]      [##   ]
  (Wave 0)            thresholds 5-row      6 named      coherence    density*
                      as numbers fractal     channels     rule stated  restraint
                                 echo table specified                  referenced

  Handoff artifacts   [#####]    [#### ]    [###  ]      [###  ]      [#    ]
  (_build-plan.md     hex values fractal    mechanism    transition   semantic
   + transition       survive    echo tbl   deployment   table binds  direction
   table)             losslessly PRESENT*   per-category channels     declared

  Handoff Gate        [#####]    [###  ]    [##   ]      [##   ]      [#    ]
  (Wave 0.9)          bg delta   echo tbl   mech count   tbl row      direction
                      checked    VALIDATED* per-cat      >=3 cols     present?
                      as number             checked      validated    (binary)

  Builder Input       [#####]    [###  ]    [###  ]      [###  ]      [#    ]
  (7 files)           recipe     echo tbl   catalog +    transition   telescope
                      + plan     in plan    deployment   table is     comments
                      values                plan         build ref    carry WHY

  CSS/HTML Output     [#### ]    [?    ]    [??   ]      [?    ]      [     ]
  (Wave 1)            computed   depends    depends      depends      not
                      styles     on builder on builder   on builder   encoded

  Gate Runner         [#####]    [#    ]    [##   ]      [###  ]      [     ]
  (SC-01..15)         SC-09/10   no scale   SC-09 bg     SC-13 *NEW*  no gate
                      SC-11/12   gate yet   SC-11 type   counts >=3   (evaluative,
                                 (GAP)      SC-15 sub-p  at boundary  not binary)

  PA Auditors         [     ]    [###  ]    [###  ]      [#### ]      [###  ]
  (9 fresh eyes)      no numbers perceptual perceptual   "DESIGNED"   "density x
                      (correct)  judgment   judgment     = implicit   restraint"
                                                         multi-co     implicit

  ===============================================================================
  KEY INSIGHT: The ORIGINAL PV2 had L2-L5 draining to ABSENT by the builder.
  The UPDATED PV2 (with transition table + fractal echo table + telescope
  comments) preserves L2-L4 at MODERATE through the builder, and enables
  L4 to be VERIFIED programmatically (SC-13). L5 remains evaluative — it
  may be permanently un-encodable in a pipeline.

  WHAT CHANGED (heatmap improvements from original PV2):
  - L2 (Scales): [     ] -> [###  ] at builder (fractal echo table)
  - L4 (Multi-Coherence): [#    ] -> [###  ] at builder (transition table)
  - L4 (Multi-Coherence): [     ] -> [###  ] at gate runner (SC-13)
  ===============================================================================


=======================================================================================
  SECTION 1: 5-LAYER COMPOSITIONAL STACK (Reports 83, 86)
  (Sidebar — the intelligence hierarchy that PV2 must preserve)
=======================================================================================

  ┌─────────────────────────────────────────────────────────────────────────────┐
  │                                                                             │
  │   L5: ANTI-SCALE MODEL (governing principle)                               │
  │       Richness = semantic density x restraint x spatial confidence          │
  │       EVALUATES quality of everything below.                               │
  │       PA-05 correspondence: Enables 4/4 (DESIGNED)                         │
  │       Enforcement: PERCEPTUAL ONLY (Report 86: un-encodable as binary)    │
  │       Status: ABSENT from pipeline artifacts (Report 13/83)               │
  │       FIX: PA compositional questions + telescope comments carry intent   │
  │                    |                                                        │
  │   L4: MULTI-COHERENCE (binding rule)                                       │
  │       >= 3 channels shift together at each boundary in same direction      │
  │       COORDINATES the channels below.                                      │
  │       PA-05 correspondence: Enables 3/4 (COMPOSED)                         │
  │       Enforcement: SC-13 (counts shifts) + PA (judges direction)          │
  │       Status: Now PLANNED (transition table), VERIFIED (SC-13) *NEW*      │
  │       FIX: Transition table makes multi-coherence a data problem          │
  │                    |                                                        │
  │   L3: CHANNELS (6 CSS property groups)                                     │
  │       Chromatic | Typographic | Spatial | Structural | Behavioral | Material│
  │       These are the INSTRUMENTS that express the pattern.                  │
  │       PA-05 correspondence: Enables 2.5/4 (STYLED+)                       │
  │       Enforcement: SC-09 (chromatic), SC-11 (typographic), SC-15 (border) │
  │       Status: 3/6 channels have programmatic gates; 3/6 are PA-only       │
  │       NOTE: Behavioral + Material channels remain un-gated (Reports 10/11)│
  │                    |                                                        │
  │   L2: SCALES (5 zoom levels)                                               │
  │       Navigation | Page | Section | Component | Character                  │
  │       These are the STAGES where the pattern appears.                      │
  │       PA-05 correspondence: Enables 2/4 (STYLED)                           │
  │       Enforcement: Fractal echo table (handoff gate validates presence)   │
  │       Status: Now PLANNED (fractal echo table) *NEW*; no post-build gate  │
  │       GAP: No programmatic gate checks whether pattern appears at 4+ scales│
  │                    |                                                        │
  │   L1: PERCEPTION THRESHOLDS (floor)                                        │
  │       >= 15 RGB bg | >= 2px font | >= 0.03em spacing | <= 108px stacking  │
  │       These prevent INVISIBILITY.                                          │
  │       PA-05 correspondence: Prevents 1.5/4 (FLAT)                          │
  │       Enforcement: SC-09, SC-10, SC-11 (all binary, all programmatic)     │
  │       Status: FULLY EMBEDDED — the model for all other layers             │
  │                                                                             │
  └─────────────────────────────────────────────────────────────────────────────┘

  INHERENT vs BOLTED-ON classification (Report 87):

  ┌──────────────────────┬──────────┬────────────────────────────────────────┐
  │ Feature              │ Category │ Why                                    │
  ├──────────────────────┼──────────┼────────────────────────────────────────┤
  │ TC planner invocation│ INHERENT │ Builder needs _build-plan.md to start  │
  │ Content as input     │ INHERENT │ /build-page requires file argument     │
  │ Transition table     │ INHERENT*│ *If handoff gate rejects its absence   │
  │ Fractal echo table   │ INHERENT*│ *If handoff gate rejects its absence   │
  │ Perception thresholds│ BOLTED   │ Post-hoc gate (SC-09+); builder CAN   │
  │                      │          │   produce invisible styling, gate      │
  │                      │          │   catches it after 90-150 min build    │
  │ Recipe phases        │ BOLTED   │ Nothing prevents builder writing CSS   │
  │                      │          │   in one pass, skipping checkpoints    │
  │ Soul constraints     │ BOLTED   │ Post-hoc verification (SC-02)          │
  │ Metaphor validation  │ BOLTED   │ Quality gate, not structural dep.     │
  │ Multi-coherence      │ BOLTED   │ SC-13 is post-hoc; builder CAN       │
  │                      │          │   produce incoherent shifts            │
  │ Accessibility        │ BOLTED   │ Recipe Phase 7; page renders without  │
  │ Fix cycle            │ BOLTED   │ Quality loop; output exists without   │
  │ PA audit             │ BOLTED   │ Quality check; output exists without  │
  └──────────────────────┴──────────┴────────────────────────────────────────┘

  *INHERENT requires handoff gate to STRUCTURALLY require these artifacts.
  Report 87 design: handoff gate checks YAML keys exist in build plan.
  Without those keys, builder's recipe template has unfilled slots =
  builder cannot execute Phase 3 = structural dependency chain.

  MAKING MORE FEATURES INHERENT (Report 87, Pattern 1):
  Template HTML with required slots. Soul constraints are PRE-FILLED in the
  template (not text instructions). Builder fills {{ZONE_1_BG}} from
  transition table — slot is empty until filled = structural enforcement.
  This moves soul from BOLTED (text: "don't use border-radius") to
  INHERENT (template: `border-radius: 0` already in <style>).


=======================================================================================
  SECTION 2: USER ENTRY POINT
=======================================================================================

    USER TYPES:
    ┌─────────────────────────────────────────────┐
    │  /build-page path/to/content.md             │
    └──────────────────────┬──────────────────────┘
                           │
                           ▼
    ┌─────────────────────────────────────────────────────────────────────────┐
    │  A single slash command. The user's ONLY interaction with the pipeline. │
    │  Input = any existing markdown file in the project.                     │
    │  Every page gets MAXIMUM intensity: full TC, Opus builder, 9 PAs.     │
    │  No tier routing. Single path = single set of thresholds.              │
    │  User walks away and comes back in 2-4 hours.                          │
    │                                                                        │
    │  The orchestrator (~205 lines) reads content.md, invokes enriched TC,  │
    │  validates the build plan, spawns Opus builder with recipe, runs       │
    │  programmatic gates + perceptual audit, fixes issues up to 3x, then   │
    │  deposits output.html + _pa-report.md + _build-log.md.               │
    └─────────────────────────────────────────────────────────────────────────┘
                           │
                           │  Orchestrator reads content.md
                           │  Invokes enriched TC skill (~660 lines)
                           ▼

=======================================================================================
  WAVE 0: CONTENT ANALYSIS + COMPOSITIONAL PLANNING
  (Enriched TC Planner, Opus, ~30-60 min)
=======================================================================================

  ┌───────────────────────────────────────────────────────────────────────────┐
  │                  ENRICHED /tension-composition                            │
  │                  Phases 0 -> 3.5 ONLY (Report 93: planning, NOT building)│
  │                  ~660 lines (was 1,878 — 66% reduction)                  │
  │                  WHAT CHANGED: 624 lines builder content REMOVED          │
  │                  (Report 69/93: CSS lookups, guardrails, HTML output)    │
  │                  ADDED: Phase 4 output spec (transition table +          │
  │                  fractal echo table + structured build plan)             │
  └───────────────────────────────────────────────────────────────────────────┘
                           │
         ┌─────────────────┼─────────────────┐
         ▼                 ▼                 ▼
    ┌──────────┐    ┌──────────────┐   ┌──────────────┐
    │ Phase 0  │    │  Phase 1     │   │  Phase 2     │
    │ Content  │───>│  Multi-Axis  │──>│  Tension     │
    │ Analysis │    │  Questioning │   │  Derivation  │
    │          │    │  (9+ axes)   │   │  + Addition  │
    │ No tier  │    │  718 lines   │   │  Test        │
    │ routing. │    │  invocational│   │              │
    │ Always   │    │  (the core   │   │  (binary:    │
    │ full.    │    │  engine)     │   │  tension Y/N)│
    └──────────┘    └──────────────┘   └──────┬───────┘
                                              │
                                    ┌─────────┴─────────┐
                                    │  ADDITION TEST    │
                                    │  (Binary Gate)    │
                                    └────┬─────────┬────┘
                              TENSION    │         │  NO TENSION
                              EXISTS     │         │  (low-complexity)
                                         ▼         ▼
                                    ┌─────────┐  ┌──────────┐
                                    │ Phase 3 │  │ FLAT     │
                                    │ Metaphor│  │ MODE     │
                                    │ Collapse│  │ (zones + │
                                    └────┬────┘  │ recipe,  │
                                         │       │ no       │
                                         ▼       │ metaphor)│
                                    ┌─────────┐  └────┬─────┘
                                    │Phase 3.5│       │
                                    │ Lock-In │       │
                                    │  Gate   │       │
                                    └────┬────┘       │
                                         │            │
                                         └──────┬─────┘
                                                │
                                                ▼
                              ┌──────────────────────────────────┐
                              │  PHASE 4: BUILD PLAN OUTPUT      │
                              │  (NEW — replaces old Phase 4+)   │
                              │                                  │
                              │  TC produces THREE artifacts:    │
                              │                                  │
                              │  A. _build-plan.md (STRUCTURED)  │
                              │     YAML-parseable (Report 15)   │
                              │     zones, sections, mechanisms, │
                              │     semantic direction, nav-scale│
                              │                                  │
                              │  B. TRANSITION TABLE (Report 68) │
                              │     Per-boundary x 6-channel     │
                              │     Exact CSS before/after       │
                              │     Semantic direction labels    │
                              │     Pre-computed deltas          │
                              │     RULE: >= 3 channels shift    │
                              │     at every row                 │
                              │                                  │
                              │  C. FRACTAL ECHO TABLE (Rpt 83)  │
                              │     5-row: Nav/Page/Section/     │
                              │     Component/Character          │
                              │     Pattern expression per scale │
                              │     Primary + secondary CSS      │
                              │     Same direction all 5 rows    │
                              └──────────────────────────────────┘

    ┌─────────────────────────────────────────────────────────────────────────┐
    │  SEPARATION OF CONCERNS (Report 93):                                   │
    │                                                                        │
    │  TC answers ONE question: "What visual form does this content need?"  │
    │  TC does NOT: write CSS, specify pixel values, verify output, judge   │
    │  compositional quality, or route between tiers.                        │
    │                                                                        │
    │  WHAT CHANGED from original PV2:                                       │
    │  - TC scope: 1,878 -> ~660 lines (-66%). Builder content REMOVED.    │
    │  - TC gains structured output format (YAML build plan)                │
    │  - TC gains transition table generation (per-boundary channel spec)   │
    │  - TC gains fractal echo table (5-scale pattern verification)        │
    │  - Operational density: 37% -> 68% (invocational / total lines)      │
    │                                                                        │
    │  INTELLIGENCE AT THIS STAGE (from heatmap):                           │
    │  L1: FULL (thresholds stated as numbers)                              │
    │  L2: FULL (fractal echo table with 5 rows)                           │
    │  L3: HIGH (6 channels named, 5 deployed in transition table)         │
    │  L4: MODERATE (transition table binds channels per boundary)         │
    │  L5: LOW (semantic direction declared; anti-scale referenced)        │
    │                                                                        │
    │  TIME: ~30-60 minutes (autonomous)                                     │
    └─────────────────────────────────────────────────────────────────────────┘

    BOUNDARY CROSSING 3 (Report 74): TC -> artifacts
    ┌───────────────────────────────────────────────────────────────────────┐
    │ WHAT CROSSES: _build-plan.md + transition table + fractal echo table │
    │ INTELLIGENCE PRESERVED: L1 (numbers), L2 (5-row table), L3 (channel │
    │   deployment), L4 (per-boundary binding with direction labels)       │
    │ INTELLIGENCE LOST: L5 (evaluative, cannot cross as data), reasoning │
    │   chain (WHY each mechanism), runner-up metaphors                    │
    │ COMPRESSION: ~4:1 (TC reasoning -> structured artifacts)            │
    │ TYPE: CONSTRUCTIVE (intentional; planning granularity -> build data) │
    │ FIX vs ORIGINAL: Structured YAML + transition table DOUBLES intel   │
    │   survival (~35% -> ~70% at this boundary)                          │
    └───────────────────────────────────────────────────────────────────────┘
                                                │
                                                ▼

=======================================================================================
  WAVE 0.5: METAPHOR VALIDATION  (Fresh-Eyes Opus, ~5-10 min)
=======================================================================================

                                    ┌──────────────────────┐
                                    │  Fresh-Eyes Opus      │
                                    │  Agent                │
                                    │                       │
                                    │  Reads: ONLY the      │
                                    │  metaphor description │
                                    │  from _build-plan.md  │
                                    │                       │
                                    │  Does NOT read:       │
                                    │  - Content markdown   │
                                    │  - Tension derivation │
                                    │  - Transition table   │
                                    │  - Fractal echo table │
                                    └──────────┬────────────┘
                                               │
                                    ┌──────────┴────────────┐
                                    │  BINARY GATE:         │
                                    │  STRUCTURAL?          │
                                    │  (suggests CSS forms) │
                                    │    YES = PASS         │
                                    │    NO  = FAIL ->      │
                                    │    TC revision or     │
                                    │    FLAT mode          │
                                    └───────────────────────┘

    ┌─────────────────────────────────────────────────────────────────────────┐
    │  UNCHANGED from original PV2. Fresh-eyes validates metaphor quality.  │
    │  Reports 10/11 note behavioral/material channel implications are NOT  │
    │  checked here (by design: fresh-eyes = zero context). Gaps addressed  │
    │  downstream by transition table (Wave 0.9) and gates (Wave 2).       │
    │                                                                        │
    │  INHERENT vs BOLTED (Report 87): BOLTED. Pipeline CAN skip this      │
    │  step (bug, timeout) and builder still receives plan. The metaphor    │
    │  validation is a QUALITY CHECK, not a DEPENDENCY.                     │
    │                                                                        │
    │  TIME: ~5-10 minutes (autonomous)                                      │
    └─────────────────────────────────────────────────────────────────────────┘
                                               │
                                               ▼

=======================================================================================
  WAVE 0.9: HANDOFF VALIDATION GATE  (Programmatic, ~1-2 min)
=======================================================================================

                              ┌──────────────────────────────────┐
                              │  HANDOFF GATE (EXPANDED)          │
                              │  8 binary checks (was 5)         │
                              │                                   │
                              │  ORIGINAL 5:                      │
                              │  [1] Zone count 2-5?              │
                              │  [2] BG colors >= 15 RGB delta?   │
                              │  [3] >= 2 grid layouts?           │
                              │  [4] Per-category mechs?          │
                              │      (S/T/M/B/R: 1+ each)       │
                              │  [5] >= 3 transition types?       │
                              │                                   │
                              │  NEW (from investigation):        │
                              │  [6] Transition table present?    │
                              │      >= N-1 rows for N zones,     │
                              │      each row >= 3 channel shifts │
                              │      (Reports 68, 12, 83)        │
                              │  [7] Fractal echo table present?  │
                              │      5 rows, consistent direction │
                              │      (Report 83)                  │
                              │  [8] Semantic direction declared? │
                              │      (Reports 06, 07, 08)        │
                              │                                   │
                              │  FORMAT: YAML parsing (Report 15) │
                              │  Not text-reading — programmatic  │
                              │                                   │
                              │  ALL must PASS.                   │
                              │  Any FAIL -> return to TC.        │
                              └──────────────┬───────────────────┘
                                             │
                                        ALL 8 PASS
                                             │
                                             ▼

    ┌─────────────────────────────────────────────────────────────────────────┐
    │  WHY CHECKS 6-8 MATTER:                                               │
    │                                                                        │
    │  CHECK 6 (Transition Table): THE key new artifact. Makes multi-       │
    │    coherence a PLANNING requirement, not a post-build hope.           │
    │    Report 68: transitions bound as YAML data = lossless propagation.  │
    │    MAKES INHERENT: Builder recipe has {{transition_table}} slots.     │
    │    Without the table, slots are empty, builder cannot execute Phase 3.│
    │                                                                        │
    │  CHECK 7 (Fractal Echo Table): Ensures pattern operates at 5 scales. │
    │    Report 83: scale coverage was the FIRST intelligence loss.         │
    │    Without the table, builder has no scale-specific guidance.         │
    │    MAKES INHERENT: Recipe Phase references echo table per-scale.     │
    │                                                                        │
    │  CHECK 8 (Semantic Direction): Gives all channels a shared compass.  │
    │    Without it, SC-09 passes with random color wandering, SC-11       │
    │    passes with static typography, SC-10 passes with uniform spacing. │
    │    Report 74: highest-leverage single fix (boundary 3).              │
    │                                                                        │
    │  INTELLIGENCE AT THIS STAGE (from heatmap):                           │
    │  L1: FULL  (bg delta check)                                           │
    │  L2: MODERATE (echo table validated structurally)                     │
    │  L3: LOW  (mechanism count only, not quality)                         │
    │  L4: LOW  (transition table structure, not semantic direction quality)│
    │  L5: MINIMAL (direction present? binary)                              │
    │                                                                        │
    │  TIME: ~1-2 minutes (programmatic YAML parsing)                       │
    └─────────────────────────────────────────────────────────────────────────┘

    BOUNDARY CROSSING 5 (Report 74): Validated plan -> Builder
    ┌───────────────────────────────────────────────────────────────────────┐
    │ WHAT CROSSES (7 files — was 6):                                      │
    │  1. Structured _build-plan.md (YAML: zones, sections, mechanisms)   │
    │  2. _transition-table.md (per-boundary channel shifts) *NEW*        │
    │  3. operational-recipe.md (~650 lines, telescope+microscope format) │
    │  4. tokens.css (design tokens)                                       │
    │  5. prohibitions.md (soul constraints)                               │
    │  6. merged-components.css (component library)                        │
    │  7. mechanism-catalog.md (FULL — all 18 mechanisms)                  │
    │                                                                      │
    │ INTELLIGENCE PRESERVED: L1 (recipe values), L2 (fractal echo table  │
    │   in build plan), L3 (catalog + deployment plan), L4 (transition    │
    │   table with pre-computed shifts + direction labels)                  │
    │ INTELLIGENCE LOST: L5 (evaluative, not operational)                  │
    │                                                                      │
    │ TOTAL BUILDER INPUT: ~1,450 lines (was 75 lines in master prompt!)  │
    │ vs original PV2: ~1,150 lines (+300 for transition table + YAML)    │
    │ COGNITIVE LOAD: DECREASED despite +300 lines because information    │
    │   is pre-merged (no mental cross-referencing of separate documents) │
    │                                                                      │
    │ TELESCOPE+MICROSCOPE FORMAT (Reports 84, 22):                       │
    │   Every recipe phase contains:                                       │
    │     /* WHY: This phase creates zone differentiation.     */ TELESCOPE│
    │     Phase 3: Set zone backgrounds from transition table.    RECIPE  │
    │     Zone 1: background: {{transition_table.Z1.bg.after}}; MICROSCOPE│
    │   The builder reads WHY before WHAT before HOW — inline.            │
    └───────────────────────────────────────────────────────────────────────┘
                                             │
                                             ▼

=======================================================================================
  WAVE 1: BUILD EXECUTION  (Single Opus Builder, ~90-150 min)
=======================================================================================

  ┌─────────────────────────────────────────────────────────────────────────┐
  │                       OPUS BUILDER                                      │
  │                       Reads 7 files                                     │
  │                       Executes 9-phase recipe                           │
  │                       Telescope+microscope at every phase               │
  └─────────────────────────────────────────────────────────────────────────┘

  ======================================================================
  EXPERIMENT BRANCH: 3 Approaches Pending Validation (Report 70/72/85)
  ======================================================================

  ┌──────────────────────────────────────────────────────────────────────┐
  │  PATH A: RECIPE (9-Phase Sequential) — CURRENT DEFAULT              │
  │  Evidence FOR: Middle experiment (4/4), Remediation (+1.0)          │
  │  Ceiling: 3/4 complex content, 4/4 simple content (Report 85)      │
  │                                                                      │
  │  Recipe template (~300 lines) merged with build-plan instance       │
  │  (~200-400 lines). Template has {{SLOTS}} filled by TC output.     │
  │  Each phase: WHY (telescope) + WHAT (recipe) + HOW (microscope).   │
  │  5 planner approval checkpoints (Phases 0, 1, 3, 4, 8).           │
  │                                                                      │
  │  RECIPE CEILING (Report 85): The recipe reliably produces           │
  │  COMPOSED (3/4). DESIGNED (4/4) requires 4 irreducible capabilities:│
  │    1. Content-form resonance (form EMERGES from meaning)           │
  │    2. Proportional intelligence (knowing S3 needs 40% more weight) │
  │    3. Creative surprise (the unexpected-yet-perfect decision)      │
  │    4. Compositional memory (earlier decisions inform later ones)    │
  │  Recipe encodes 2 and 4 partially. Convention encodes none but     │
  │  ENABLES all four through builder creative freedom.                 │
  └──────────────────────────────────────────────────────────────────────┘

  ┌──────────────────────────────────────────────────────────────────────┐
  │  PATH B: PRINCIPLES BRIEF (~100 lines) — EXPERIMENTAL               │
  │  Evidence FOR: CD-006 (39/40) without recipe or pipeline            │
  │  The contrarian's thesis (Reports 29, 30)                           │
  │                                                                      │
  │  Builder receives: soul + thresholds + transition table + brief.   │
  │  Brief says: "Build a page that makes every visual decision serve  │
  │  the content's semantic direction." No mandatory phases.            │
  │  REQUIRES EXPERIMENT to validate. Not default.                     │
  └──────────────────────────────────────────────────────────────────────┘

  ┌──────────────────────────────────────────────────────────────────────┐
  │  PATH C: HYBRID (Recipe Phases 0-4 + Convention Phases 5-8)         │
  │  Evidence FOR: Remediation's telescope+microscope pattern           │
  │  Reports 72, 84: recipe for STRUCTURAL foundation, convention for  │
  │  COMPOSITIONAL richness. "Guardrails on the highway, no GPS."      │
  └──────────────────────────────────────────────────────────────────────┘

  ======================================================================

  9-PHASE SEQUENTIAL BUILD (Path A — default):

  ┌──────────────────────────────────────────────────────────────────────┐
  │                                                                      │
  │   PHASE 0: Content Analysis + Zone Architecture                      │
  │   ┌──────────────────────────────────────────────────────────────┐   │
  │   │  Read structured _build-plan.md (YAML).                      │   │
  │   │  Read _transition-table.md.                                  │   │
  │   │  Read fractal echo table.                                    │   │
  │   │  ABSORB semantic direction declaration.                      │   │
  │   │  Self-test: "Am I about to build or about to plan?"         │   │
  │   │  > Planner approval checkpoint                               │   │
  │   └──────────────────────────────────────────────────────────────┘   │
  │       Builder absorbs STRUCTURED plan + transition table +          │
  │       fractal echo table. Semantic direction governs all phases.    │
  │                          |                                           │
  │                          v                                           │
  │   PHASE 1: HTML Skeleton                                             │
  │   ┌──────────────────────────────────────────────────────────────┐   │
  │   │  Semantic markup. Component library (>=10/26 classes).       │   │
  │   │  Grid layouts (>= 2). ARIA landmarks (>= 3). Skip link.    │   │
  │   │  Navigation-scale chrome from build plan (header, footer,   │   │
  │   │  TOC) — Report 01: nav-scale was the first intelligence loss│   │
  │   │  > Planner approval checkpoint                               │   │
  │   └──────────────────────────────────────────────────────────────┘   │
  │                          |                                           │
  │                          v                                           │
  │   PHASE 2: CSS Reset + Soul + Base Typography                        │
  │   ┌──────────────────────────────────────────────────────────────┐   │
  │   │  * { border-radius: 0; box-shadow: none; }                   │   │
  │   │  Container: max-width 960px, margin: 0 auto.                 │   │
  │   │  Base: 16-18px, line-height 1.7+, R >= G >= B palette.      │   │
  │   │  Soul enforced FIRST, before creative work.                  │   │
  │   └──────────────────────────────────────────────────────────────┘   │
  │                          |                                           │
  │                          v                                           │
  │   PHASE 3: Zone Backgrounds                                          │
  │   ┌──────────────────────────────────────────────────────────────┐   │
  │   │  Apply backgrounds FROM TRANSITION TABLE (pre-computed).     │   │
  │   │  Each zone's hex value is in the table with delta + direction│   │
  │   │  Builder APPLIES, not DERIVES.                               │   │
  │   │  "Can you SEE the zone boundaries without borders?"         │   │
  │   │  > Planner approval checkpoint                               │   │
  │   └──────────────────────────────────────────────────────────────┘   │
  │                          |                                           │
  │                          v                                           │
  │   PHASE 4: Structural Borders + Dividers + Transitions               │
  │   ┌──────────────────────────────────────────────────────────────┐   │
  │   │  Read TRANSITION TABLE for per-boundary border specs.        │   │
  │   │  Transition TYPE per boundary (HARD_CUT / SPACING_SHIFT /   │   │
  │   │  CHECKPOINT) with semantic REASON from build plan.           │   │
  │   │  Border-left on callouts (4px solid). Section dividers.     │   │
  │   │  >= 3 transition types across the page.                     │   │
  │   │  > Planner approval checkpoint                               │   │
  │   └──────────────────────────────────────────────────────────────┘   │
  │                          |                                           │
  │                          v                                           │
  │   PHASE 5: Typography Zones                                          │
  │   ┌──────────────────────────────────────────────────────────────┐   │
  │   │  3-zone arc: display (28-36px) / body (16-18px) / detail    │   │
  │   │  (13-14px). Read TRANSITION TABLE for per-section shifts.   │   │
  │   │  Section-level variation (Report 07): Zone 2's body at 15px/│   │
  │   │  1.65 lh vs Zone 1's at 18px/1.8 lh — NOT just page-level. │   │
  │   │  >= 2px delta between typographic zones.                    │   │
  │   │  >= 0.03em letter-spacing between zones.                    │   │
  │   └──────────────────────────────────────────────────────────────┘   │
  │                          |                                           │
  │                          v                                           │
  │   PHASE 6: Element-Level Richness                                    │
  │   ┌──────────────────────────────────────────────────────────────┐   │
  │   │  3-TYPE CHARACTER TAXONOMY (Report 05):                      │   │
  │   │  Type A (INTERACTIVE, always): ::selection, a:hover, :focus  │   │
  │   │  Type B (SEMANTIC, when needed): inline-code bg, ::first-let│   │
  │   │  Type C (ATMOSPHERIC, sparingly): letter-spacing >= 0.03em  │   │
  │   │  ANTI-TYPE (NEVER): letter-spacing < 0.03em, lh micro-shift│   │
  │   │                                                              │   │
  │   │  FRACTAL ECHO: read echo table for component-scale pattern. │   │
  │   │  Components mirror page-level direction at smaller scale.    │   │
  │   └──────────────────────────────────────────────────────────────┘   │
  │                          |                                           │
  │                          v                                           │
  │   PHASE 7: Accessibility                                             │
  │   ┌──────────────────────────────────────────────────────────────┐   │
  │   │  Skip link, ARIA landmarks >= 3, focus styles (2px outline). │   │
  │   │  Reduced motion: @media (prefers-reduced-motion).            │   │
  │   │  Responsive: 768px + 1024px breakpoints.                    │   │
  │   │  Print: @media print. Target: WCAG 2.1 AA.                  │   │
  │   └──────────────────────────────────────────────────────────────┘   │
  │                          |                                           │
  │                          v                                           │
  │   PHASE 8: Verification + Cascade Value Table                        │
  │   ┌──────────────────────────────────────────────────────────────┐   │
  │   │  A-D: Self-checks (zones, typography, borders, soul)         │   │
  │   │  E. CASCADE VALUE TABLE (REQUIRED):                          │   │
  │   │     Compare ACTUAL computed CSS against TRANSITION TABLE.    │   │
  │   │     For each boundary: does actual match plan?               │   │
  │   │     >= 3 channels shifting per boundary (multi-coherence)?   │   │
  │   │     Direction matches semantic declaration?                   │   │
  │   │  F. PERCEPTION SELF-CHECK (Report 22):                       │   │
  │   │     "Can I SEE every zone boundary without a color picker?" │   │
  │   │     "Is typography visibly different between zones?"         │   │
  │   │     "Do borders exist on structural elements?"               │   │
  │   │  > Planner approval checkpoint (FINAL)                       │   │
  │   └──────────────────────────────────────────────────────────────┘   │
  │                                                                      │
  └──────────────────────────────────────────────────────────────────────┘

    ┌─────────────────────────────────────────────────────────────────────────┐
    │  WHY SINGLE OPUS BUILDER:                                              │
    │  - Remediation PROVED: PA-05 1.5 -> 2.5 (+1.0)                       │
    │  - Opus complies AND creates beyond constraints (Report 85)           │
    │  - Sonnet complies meticulously but produces flat output              │
    │  - Single builder = zero contention, full context, compositional memory│
    │  - Builder visibility: ~1,450 lines (was 75 lines = 13.4%)           │
    │  - Guardrail:playbook ratio inverted from 7.9:1 to ~0.5:1            │
    │                                                                        │
    │  INTELLIGENCE AT THIS STAGE (from heatmap):                           │
    │  L1: FULL (recipe values + thresholds file)                           │
    │  L2: MODERATE (fractal echo table in build plan)                      │
    │  L3: MODERATE (catalog + deployment plan + transition table)          │
    │  L4: MODERATE (transition table = build-time reference)              │
    │  L5: MINIMAL (telescope comments carry intent; not operational)       │
    │                                                                        │
    │  CONVENTION ESCALATION PATH (Report 85):                              │
    │  For users wanting 4/4, the recipe can be REPLACED with a principles │
    │  brief after experiments validate Path B. The escalation: Recipe      │
    │  reliably 3/4, Convention potentially 4/4 but riskier (could be 2/4).│
    │  The user chooses their risk tolerance. Pipeline supports both.       │
    │                                                                        │
    │  TIME: ~90-150 minutes (autonomous)                                    │
    └─────────────────────────────────────────────────────────────────────────┘
                                             │
                                             │  output.html + cascade value table
                                             ▼

=======================================================================================
  WAVE 2: DUAL-LAYER VERIFICATION  (~30-45 min)
=======================================================================================

  ┌─────────────────────────────────────────────────────────────────────────┐
  │  LAYER 1: PROGRAMMATIC GATES  (gate-runner.js, ~400 lines)            │
  │  ─────────────────────────────────────────────────────────────────────  │
  │                                                                         │
  │  15 binary checks. ALL BLOCKING. (was 12 — 3 NEW)                     │
  │                                                                         │
  │  ┌────────┬───────────────────────────────┬────────────────────────┐   │
  │  │  Gate  │  What It Checks               │  Threshold             │   │
  │  ├────────┼───────────────────────────────┼────────────────────────┤   │
  │  │ SC-01  │  Container width              │  940-960px             │   │
  │  │ SC-02  │  Soul properties              │  border-radius: 0     │   │
  │  │        │                               │  box-shadow: none      │   │
  │  │ SC-03  │  Font trinity                 │  Only 3 allowed fonts  │   │
  │  │ SC-04  │  Warm palette                 │  R >= G >= B           │   │
  │  │ SC-05  │  No pure extremes             │  No #000 or #FFF       │   │
  │  │ SC-06  │  ARIA landmarks               │  >= 3                  │   │
  │  │ SC-07  │  Skip link                    │  Present               │   │
  │  │ SC-08  │  Component library            │  >= 3 library classes  │   │
  │  │ SC-09  │  Background delta             │  >= 15 RGB adjacent    │   │
  │  │ SC-10  │  Stacked gap                  │  <= 108px total        │   │
  │  │ SC-11  │  Typography zones             │  >= 2px delta          │   │
  │  │ SC-12  │  Zone count                   │  2-5 zones             │   │
  │  │        │                               │                        │   │
  │  │ SC-13  │  Multi-coherence  *NEW*       │  >= 3 of 6 channels    │   │
  │  │ (Rpt73)│  at section boundaries        │  shift at each boundary│   │
  │  │        │  (bg, font-size, font-weight, │  (Report 12/83)        │   │
  │  │        │  letter-spacing, border-left,  │                        │   │
  │  │        │  margin)                       │                        │   │
  │  │        │  NOTE: checks EXISTENCE of     │                        │   │
  │  │        │  shifts, not SEMANTIC DIRECTION │                        │   │
  │  │        │                               │                        │   │
  │  │ SC-14  │  Sub-perceptual prevention    │  No letter-spacing     │   │
  │  │ (Rpt73)│  *NEW*                        │  < 0.02em; no bg delta │   │
  │  │        │                               │  1-14 within a zone    │   │
  │  │        │                               │                        │   │
  │  │ SC-15  │  Border presence *NEW*        │  >= 1 border-left      │   │
  │  │ (Rpt73)│                               │  >= 3px OR >= 2 <hr>   │   │
  │  └────────┴───────────────────────────────┴────────────────────────┘   │
  │                                                                         │
  │  GATE CLASSIFICATION (Report 73):                                       │
  │  - 10 BINARY THRESHOLD gates (SC-01..12 minus SC-03/08): ~95% conf.  │
  │  - 3 STRUCTURAL PRESENCE gates (SC-03, SC-08, SC-15): ~90% conf.     │
  │  - 2 COMPOSITIONAL gates (SC-13, SC-14): ~70% conf.                  │
  │    (Composition not fully reducible to measurement)                    │
  │                                                                         │
  │  FIX RECIPE GENERATION (Report 71):                                    │
  │  When a gate FAILS, gate-runner.js generates ACTIONABLE fix recipe:   │
  │    { gate: "SC-09", status: "FAIL",                                   │
  │      measured: { zones: ["#FEF9F5","#FEFAF6"], delta: 3 },           │
  │      fix: "Darken zone 2 to at least #EFE9E0 (+15 delta)" }         │
  │  Fix recipes flow to Wave 3 builder.                                   │
  │                                                                         │
  │  INTELLIGENCE AT THIS STAGE (from heatmap):                            │
  │  L1: FULL (SC-09/10/11/12 — deterministic)                            │
  │  L2: MINIMAL (no scale coverage gate — GAP)                            │
  │  L3: LOW (SC-09 chromatic, SC-11 typographic, SC-15 structural)       │
  │  L4: MODERATE (SC-13 counts multi-channel shifts — NEW)               │
  │  L5: ABSENT (evaluative, not binary — by design)                      │
  │                                                                         │
  └─────────────────────────────────────────────────────────────────────────┘
                                             │
                                             │  All 15 gates PASS
                                             ▼
  ┌─────────────────────────────────────────────────────────────────────────┐
  │  LAYER 2: PERCEPTUAL AUDIT  (Mode 4 — 9 Fresh-Eyes Opus Auditors)    │
  │  ─────────────────────────────────────────────────────────────────────  │
  │                                                                         │
  │  STEP 1: Team lead pre-captures ALL screenshots                        │
  │  ┌──────────────────────────────────────────────────────────────┐      │
  │  │  Cold look at 1440px + 768px                                  │      │
  │  │  Full scroll-through at both viewports                        │      │
  │  │  Disable animations: animation: none !important               │      │
  │  │  Wait for document.fonts.ready                                │      │
  │  │  Save ~36-102 screenshots to ephemeral/                       │      │
  │  └──────────────────────────────────────────────────────────────┘      │
  │                                                                         │
  │  STEP 2: 9 independent Opus auditors IN PARALLEL                       │
  │  ┌──────────────────────────────────────────────────────────────┐      │
  │  │  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐                        │      │
  │  │  │PA1 │ │PA2 │ │PA3 │ │PA4 │ │PA5 │                        │      │
  │  │  └──┬─┘ └──┬─┘ └──┬─┘ └──┬─┘ └──┬─┘                        │      │
  │  │  ┌────┐ ┌────┐ ┌────┐ ┌────┐                                │      │
  │  │  │PA6 │ │PA7 │ │PA8 │ │PA9 │                                │      │
  │  │  └──┬─┘ └──┬─┘ └──┬─┘ └──┬─┘                                │      │
  │  │  Each: screenshots only, ZERO build context                   │      │
  │  │  Assigned questions from 48+ question set                     │      │
  │  └──────────────────────────────────────────────────────────────┘      │
  │                                                                         │
  │  COMPOSITIONAL PA QUESTIONS (Report 71, new additions):                │
  │  - "Do you sense a DIRECTION as you scroll?"                          │
  │  - "At each section boundary, do >= 3 visual properties change?"     │
  │  - "Does the page feel like it has WEIGHT/SUBSTANCE or flat/thin?"   │
  │  - "Can you identify the pattern WITHOUT reading labels?"            │
  │                                                                         │
  │  STEP 3: PA Weaver synthesizes -> PA-05 score + top-3 issues          │
  │                                                                         │
  │  INTELLIGENCE AT THIS STAGE:                                           │
  │  L1: N/A (no numbers — correct; PA evaluates perception)              │
  │  L2: MODERATE (perceptual scale coverage judgment)                    │
  │  L3: MODERATE (perceptual channel richness judgment)                  │
  │  L4: HIGH ("DESIGNED" = implicit multi-coherence)                     │
  │  L5: MODERATE ("density x restraint x spatial confidence" = implicit) │
  │                                                                         │
  │  THE 70/30 BOUNDARY (Report 73):                                       │
  │  Programmatic gates catch ~70% of defects (thresholds, soul, structure)│
  │  PA catches the ~30% requiring perceptual judgment (direction,        │
  │  coherence quality, material atmosphere, fractal self-similarity)     │
  │  Together: comprehensive coverage. Neither alone is sufficient.       │
  │                                                                         │
  └─────────────────────────────────────────────────────────────────────────┘
                                             │
                                             │  PA-05 score + top-3 issues
                                             │  + gate fix recipes
                                             ▼

=======================================================================================
  WAVE 3: FIX INTEGRATION  (max 3 cycles, ~30-60 min)
=======================================================================================

                              ┌──────────────────────┐
                              │   DECISION MATRIX     │
                              └──────────┬────────────┘
                                         │
                         ┌───────────────┼───────────────┐
                         │               │               │
                         ▼               ▼               ▼
              ┌──────────────┐  ┌──────────────┐  ┌──────────────┐
              │ ALL PASS +   │  │ GATES PASS + │  │ ANY FAIL     │
              │ PA-05 >= 3/4 │  │ PA-05 < 3/4  │  │ AFTER 3      │
              │              │  │              │  │ CYCLES       │
              │   +========+ │  │  ┌────────┐  │  │  ┌────────┐  │
              │   | SHIP   | │  │  │ FIX    │  │  │  │ESCALATE│  │
              │   |        | │  │  │ CYCLE  │  │  │  │TO USER │  │
              │   +========+ │  │  └───┬────┘  │  │  └────────┘  │
              └──────────────┘  │      │       │  └──────────────┘
                                │      ▼       │
                                │ Builder gets:│
                                │ 1. Gate fix  │
                                │    RECIPES   │
                                │ 2. PA top-3  │
                                │    issues    │
                                │ 3. Transition│
                                │    table as  │
                                │    TARGET    │
                                │      │       │
                                │      ▼       │
                                │  Quick 2-PA  │
                                │  re-check    │
                                │      │       │
                                │  Still < 3/4?│
                                │  Cycle <= 3? │
                                │      │       │
                                │   ┌──┴──┐    │
                                │   │LOOP │    │
                                │   └─────┘    │
                                └──────────────┘

    ┌─────────────────────────────────────────────────────────────────────────┐
    │  WHAT CHANGED from original PV2:                                       │
    │                                                                        │
    │  1. GATE-GENERATED FIX RECIPES: Builder receives ACTIONABLE CSS:      │
    │     "Darken zone 2 to #EFE9E0 (+15 delta)" not just "SC-09: FAIL"   │
    │                                                                        │
    │  2. PA CHANNEL-SPECIFIC GUIDANCE: Top-3 issues are COMPOSITIONAL:    │
    │     "Multi-coherence insufficient at S3->S4: add typographic shift"  │
    │     Not generic: "improve richness"                                   │
    │                                                                        │
    │  3. TRANSITION TABLE AS FIX TARGET: Builder re-reads the transition   │
    │     table. Plan vs Actual from Phase 8 shows WHERE build deviated.   │
    │     This gives TELESCOPE (what's wrong) + MICROSCOPE (CSS to change) │
    │     + COMPASS (transition table = where to aim).                      │
    │                                                                        │
    │  KILL CRITERIA:                                                        │
    │  - 3 consecutive builds PA-05 < 3/4 -> recipe failure, investigate   │
    │  - Build exceeds 6 hours -> timeout, escalate                        │
    │  - Builder produces < 500 lines HTML -> structural failure           │
    │                                                                        │
    │  TIME: ~30-60 minutes per fix cycle (autonomous)                       │
    └─────────────────────────────────────────────────────────────────────────┘
                                             │
                                             │  SHIP or ESCALATE
                                             ▼

=======================================================================================
  OUTPUT
=======================================================================================

    ┌─────────────────────────────────────────────────────────────────────────┐
    │  Four files at deterministic paths (was 3 — 1 NEW):                   │
    │                                                                        │
    │  path/to/output.html                                                   │
    │  |-- 700-1500 lines CSS, 500-1000 lines HTML                         │
    │  |-- Full WCAG 2.1 AA, Responsive (768px + 1024px), Print styles     │
    │  |-- Expected PA-05: >= 3/4 (COMPOSED or DESIGNED)                   │
    │                                                                        │
    │  path/to/_pa-report.md                                                 │
    │  |-- All 48+ PA questions answered (including compositional)          │
    │  |-- PA-05 score + convergent findings (6+ auditors agree)           │
    │                                                                        │
    │  path/to/_build-log.md                                                 │
    │  |-- TC output, gate results (15 PASS/FAIL), timing                  │
    │  |-- Cascade value table (actual vs planned from transition table)    │
    │                                                                        │
    │  path/to/_transition-table.md  *NEW*                                   │
    │  |-- TC's per-boundary channel shift plan                             │
    │  |-- Builder's actual computed values at each boundary                │
    │  |-- Delta between planned and actual                                 │
    │  |-- Multi-coherence verification (>= 3 channels per boundary)       │
    └─────────────────────────────────────────────────────────────────────────┘


=======================================================================================
  SECTION 3: COMPLETE FLOW — BIRD'S EYE VIEW
=======================================================================================

  /build-page content.md
         |
         v
  +------------------+   WAVE 0: Enriched TC Planner (Opus)
  | Tension          |   30-60 min. Phases 0-3.5 only (~660 lines skill)
  | Composition      |   NEW OUTPUTS: structured _build-plan.md (YAML)
  | (content -> plan |            + transition table (per-boundary channels)
  |  + transition    |            + fractal echo table (5-scale coverage)
  |  table + fractal |   INTELLIGENCE: L1 FULL, L2 FULL, L3 HIGH,
  |  echo table)     |                 L4 MODERATE, L5 LOW
  +--------+---------+
           |
           v
  +------------------+   WAVE 0.5: Fresh-Eyes Metaphor Check
  | Metaphor         |   5-10 min. Binary: STRUCTURAL / ANNOUNCED
  | Validation       |   BOLTED ON (quality gate, not dependency)
  | (prevents waste) |   INTELLIGENCE: unchanged from original PV2
  +--------+---------+
           |
           v
  +------------------+   WAVE 0.9: Handoff Gate (EXPANDED)
  | 8 Binary Checks  |   ~1-2 min (was 5 checks). YAML parsing.
  | (YAML-parseable) |   NEW: transition table check, fractal echo check,
  |                  |   semantic direction check
  |                  |   INTELLIGENCE: L1 FULL, L2 MOD, L3 LOW, L4 LOW, L5 MIN
  +--------+---------+
           |
           v
  +------------------+   WAVE 1: Opus Builder
  | 9-Phase Recipe   |   90-150 min. 7 input files (was 6).
  | OR               |   Telescope+microscope format. Template merging.
  | Principles Brief |   Transition table as build-time reference.
  | OR               |   EXPERIMENT: Path A (Recipe) / B (Brief) / C (Hybrid)
  | Hybrid           |   INTELLIGENCE: L1 FULL, L2 MOD, L3 MOD, L4 MOD, L5 MIN
  +--------+---------+
           |
           v
  +------------------+   WAVE 2: Dual Verification (EXPANDED)
  | 15 Programmatic  |   30-45 min. 3 NEW gates:
  | Gates (was 12)   |     SC-13 multi-coherence, SC-14 sub-perceptual,
  | +                |     SC-15 border presence
  | 9 PA Auditors    |   Compositional PA questions. Fix recipes on FAIL.
  | (with comp. Qs)  |   INTELLIGENCE: L1 FULL, L4 MOD (SC-13), PA catches L2-5
  +--------+---------+
           |
           v
  +------------------+   WAVE 3: Fix Integration (ENHANCED)
  | Top-3 Fix Loop   |   30-60 min (max 3 cycles)
  | gate fix recipes |   Gate fix recipes + PA channel guidance +
  | + PA guidance    |   transition table as target reference
  | + transition tbl |   Until PA-05 >= 3/4 or escalate
  +--------+---------+
           |
           v
  +------------------+
  |   OUTPUT         |   output.html + _pa-report.md + _build-log.md
  |   (4 files)      |   + _transition-table.md (planned vs actual)
  +------------------+


=======================================================================================
  SECTION 4: NEW ARTIFACTS — What This Investigation Introduced
=======================================================================================

  ┌─────────────────────────────────────────────────────────────────────────┐
  │                                                                         │
  │  1. TRANSITION TABLE (_transition-table.md)  [Report 68]               │
  │     Generated by: TC planner (Phase 4)                                 │
  │     Consumed by: Handoff gate (0.9), Builder (Wave 1), Gate runner     │
  │       (SC-13), Fix loop (Wave 3), PA weaver (comparison)              │
  │     Format: YAML — per-boundary x 6-channel specification             │
  │     Columns: chromatic (bg delta), typographic (font-size, weight,    │
  │       letter-spacing), spatial (padding), structural (border-left),   │
  │       behavioral (planned), material (emergent)                        │
  │     Constraint: >= 3 columns change at every row                      │
  │     Annotation: semantic direction labels per column per boundary     │
  │     Lossless propagation: TC writes hex -> builder reads hex ->       │
  │       builder writes CSS -> gate reads computed -> same value at      │
  │       every stage                                                      │
  │     Source reports: 02, 03, 06, 07, 08, 09, 12, 17, 18, 68          │
  │                                                                         │
  │  2. FRACTAL ECHO TABLE (embedded in _build-plan.md)  [Report 83]      │
  │     Generated by: TC planner (Phase 4)                                 │
  │     Consumed by: Handoff gate (0.9 check #7), Builder (Phases 0, 6)  │
  │     Format: 5-row table (Navigation/Page/Section/Component/Character) │
  │     Columns: Scale | Pattern Expression | Primary CSS | Secondary CSS │
  │     Constraint: Pattern Direction CONSISTENT across all 5 rows        │
  │     If planner cannot write same direction at every scale, metaphor   │
  │       is not fractal -> fall back to FLAT mode                         │
  │     Source reports: 01-05, 14, 83                                      │
  │                                                                         │
  │  3. STRUCTURED BUILD PLAN (YAML _build-plan.md)  [Reports 15, 67]     │
  │     Generated by: TC planner (Phase 4)                                 │
  │     Consumed by: Handoff gate (YAML parsing), Builder (Phase 0)       │
  │     Format: YAML with zones, sections, mechanisms, transitions,       │
  │       semantic direction, navigation-scale specification               │
  │     Key fields: zone_count, sections[].zone, mechanisms.spatial[],    │
  │       transitions[].channels_shifting, semantic_direction             │
  │     Why: Text-based handoff is unparseable. YAML enables programmatic │
  │       validation = skimming-proof                                      │
  │                                                                         │
  │  4. ENRICHED TC SKILL (~660 lines)  [Reports 69, 93]                   │
  │     Changed from: 1,878 lines (mixed planner+builder content)         │
  │     Changed to: ~660 lines (planner-only: Phases 0-3.5 + output spec)│
  │     Removed: 624 lines builder content (CSS lookups, guardrails, HTML)│
  │     Added: Structured output spec, transition table protocol, fractal │
  │       echo table format, channel-map deliverable                       │
  │     Operational density: 37% -> 68%                                    │
  │                                                                         │
  │  5. GATE-RUNNER.JS (~400 lines)  [Report 73]                           │
  │     15 binary gates via Playwright getComputedStyle                    │
  │     SC-01 through SC-15 (was 12, +3 NEW)                              │
  │     NEW: SC-13 (multi-coherence), SC-14 (sub-perceptual), SC-15      │
  │       (border presence)                                                 │
  │     NEW: Fix recipe generation on every FAIL                          │
  │     Classification: 10 binary threshold, 3 structural presence,       │
  │       2 compositional (~70% confidence)                                │
  │                                                                         │
  │  6. PERCEPTION-THRESHOLDS.MD (~80 lines)  [Unchanged from orig PV2]    │
  │     Now enforced by SC-09/10/11 + SC-13/14/15                         │
  │                                                                         │
  └─────────────────────────────────────────────────────────────────────────┘


=======================================================================================
  SECTION 5: EXPERIMENT BRANCH — 3 Tests Before Codifying (Report 70)
=======================================================================================

  The investigation surfaced an unresolved confound: recipe format, perception
  thresholds, and builder model changed simultaneously between experiments.
  3 experiments isolate each variable. Same content (RESEARCH-SYNTHESIS.md),
  same metrics (Mode 4 PA, SC-01..15, mechanism count, CSS lines, timing).

  ┌─────────────────────────────────────────────────────────────────────────┐
  │                                                                         │
  │  EXPERIMENT A: "The CD-006 Replication"                                │
  │  Opus + Minimal Prompt (42 lines: soul + thresholds + "build this")   │
  │  NO recipe, NO pipeline, NO multi-agent orchestration.                │
  │  Tests: Is Opus + constraints sufficient? Is the pipeline necessary?  │
  │  If PA-05 >= 3/4: Pipeline adds no value over 42 lines.             │
  │  If PA-05 < 2/4: Recipe/pipeline essential.                          │
  │  Cost: ~4-6 hours.                                                     │
  │  WHERE IT PLUGS INTO PV2: Replaces Wave 0 + Wave 1 entirely.        │
  │  Waves 2-3 (gates + PA + fix loop) still run.                        │
  │                                                                         │
  │  EXPERIMENT B: "The Recipe Test"                                        │
  │  Opus + Full PV2 Recipe (~650 lines) + transition table + TC plan.   │
  │  The current PV2 default path with ALL investigation improvements.    │
  │  Tests: Does the enriched pipeline with transition table reach 3/4?  │
  │  If PA-05 >= 3/4: Pipeline works. Codify as default.                │
  │  Cost: ~4-6 hours.                                                     │
  │  WHERE IT PLUGS INTO PV2: Full pipeline execution (all waves).       │
  │                                                                         │
  │  EXPERIMENT C: "The Principles Brief"                                   │
  │  Opus + soul + thresholds + transition table + 100-line brief.       │
  │  NO recipe phases. Builder composes freely within constraints.        │
  │  Tests: Does minimal guidance + transition table outperform recipe?  │
  │  If PA-05 >= 3/4: Simpler path wins. Reduce pipeline complexity.    │
  │  Cost: ~4-6 hours.                                                     │
  │  WHERE IT PLUGS INTO PV2: Wave 0 produces transition table (same).  │
  │  Wave 1 uses brief instead of recipe. Waves 2-3 identical.          │
  │                                                                         │
  │  DECISION: Run all 3. Compare PA-05. Winner becomes default.          │
  │  Loser approaches remain as escalation paths (Report 85: recipe       │
  │  ceiling is VARIABLE, so different content may need different paths). │
  │                                                                         │
  └─────────────────────────────────────────────────────────────────────────┘


=======================================================================================
  SECTION 6: COMPARISON TABLES
=======================================================================================

  Table 1: Master Prompt -> Original PV2 -> Updated PV2

  ┌────────────────────┬───────────────────┬──────────────────┬─────────────────────┐
  │    DIMENSION       │  MASTER PROMPT    │  ORIGINAL PV2    │  UPDATED PV2        │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Builder input      │ 75 lines (13.4%)  │ ~1,150 lines     │ ~1,450 lines        │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Format             │ Checklist         │ Recipe           │ Recipe (telescope+  │
  │                    │ (judgment verbs)  │ (action verbs)   │ microscope) OR Brief│
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Instruction type   │ Checklist         │ Recipe           │ Recipe OR Convention│
  │ (Report 85)        │ (what NOT to do)  │ (what TO do)     │ (what to ACHIEVE)   │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Intelligence levels│ 1 (thresholds)    │ 1-2 (thresholds  │ 4 (thresholds +    │
  │ enforced           │                   │ + partial scales) │ scales + channels + │
  │                    │                   │                  │ multi-coherence)     │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Key new artifact   │ (none)            │ (none)           │ Transition table +  │
  │                    │                   │                  │ Fractal echo table   │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Build plan format  │ N/A               │ Prose markdown   │ YAML (parseable)    │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Handoff checks     │ 0                 │ 5 (text-based)   │ 8 (YAML programmatic│
  │                    │                   │                  │ + transition tbl +   │
  │                    │                   │                  │ echo tbl + direction)│
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Programmatic gates │ 0                 │ 12 (SC-01..12)   │ 15 (+ SC-13/14/15) │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Multi-coherence    │ Zero in 963 lines │ Phase 8 self-    │ PLANNED (transition │
  │                    │                   │ check only       │ table) + VALIDATED  │
  │                    │                   │                  │ (gate 0.9) + VERIFIED│
  │                    │                   │                  │ (SC-13)             │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Verification       │ Self-assessment   │ 12 gates + 9 PA  │ 15 gates + 9 PA    │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Communication      │ Zero messages     │ File-bus + 5     │ File-bus + 5        │
  │                    │                   │ checkpoints      │ checkpoints         │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Builder model      │ Sonnet            │ Opus (always)    │ Opus (always)       │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Guardrail:playbook │ 7.9:1             │ ~0.5:1           │ ~0.3:1              │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ TC skill size      │ N/A               │ 1,878 lines      │ ~660 lines (-66%)   │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Quality floor      │ PA-05: 1.5/4      │ PA-05: >= 3/4   │ PA-05: >= 3/4      │
  │                    │ (measured)         │ (projected)      │ (projected)         │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ User interaction   │ Manual orch.      │ Fire and forget  │ Fire and forget     │
  ├────────────────────┼───────────────────┼──────────────────┼─────────────────────┤
  │ Output files       │ 1 (HTML)          │ 3                │ 4 (+ transition tbl)│
  └────────────────────┴───────────────────┴──────────────────┴─────────────────────┘

  Table 2: Original PV2 -> Updated PV2 (delta summary)

  ┌─────────────────────────────┬──────────────────┬─────────────────────┐
  │    CHANGED                  │  ORIGINAL PV2    │  UPDATED PV2        │
  ├─────────────────────────────┼──────────────────┼─────────────────────┤
  │ TC skill size               │ 1,878 lines      │ ~660 lines (-66%)   │
  │ TC operational density      │ 37%              │ 68%                 │
  │ Key new artifacts           │ (none)           │ 2 (transition table │
  │                             │                  │ + fractal echo table)│
  │ Build plan format           │ Prose            │ YAML (structured)   │
  │ Handoff checks              │ 5 (text)         │ 8 (YAML parsing)    │
  │ Programmatic gates          │ 12               │ 15 (+3 new)         │
  │ Gate runner size            │ ~300 lines       │ ~400 lines          │
  │ Builder input files         │ 6                │ 7 (+transition table│
  │ Builder input volume        │ ~1,150 lines     │ ~1,450 lines        │
  │ Builder cognitive load      │ Higher (2 docs   │ Lower (pre-merged   │
  │                             │  to cross-ref)   │  telescope+micro)   │
  │ Recipe format               │ 9-phase seq.     │ 9-phase telescope+  │
  │                             │                  │  microscope + slots  │
  │ Multi-coherence lifecycle   │ Phase 8 only     │ PLAN -> VALIDATE -> │
  │                             │                  │ EXECUTE -> VERIFY   │
  │ Fix cycle input             │ PA top-3         │ PA top-3 + gate fix │
  │                             │                  │ recipes + trans. tbl│
  │ PA questions                │ 48               │ 48+ (compositional) │
  │ Output files                │ 3                │ 4                   │
  │ Experiment branch           │ None (recipe)    │ 3 paths (A/B/C)     │
  │ Permanent lines to write    │ ~1,605           │ ~1,905 (+300)       │
  │ Inherent features           │ 2-3              │ 4-5 (with slot deps)│
  └─────────────────────────────┴──────────────────┴─────────────────────┘


=======================================================================================
  SECTION 7: KNOWN GAPS — What the Investigation Found But Did NOT Fully Solve
=======================================================================================

  GAP 1: Anti-Scale Model Not Operational (L5, Report 13/83/86)
  |-- "Richness = semantic density x restraint x spatial confidence"
  |-- Appears in ZERO builder-visible artifacts as operational guidance
  |-- The model is EVALUATIVE but not OPERATIONAL
  |-- Mitigation: PA catches it implicitly; may be permanently un-encodable
  |-- Status: ACCEPTED (L5 is the PA's domain, not the pipeline's)

  GAP 2: Behavioral Channel Unplanned (Report 10)
  |-- TC treats behavioral as spatial rhythm, not interactive behavior
  |-- No hover speed, transition character, or animation philosophy planned
  |-- Mitigation: Recipe Phase 6 Type A interactive CSS covers the basics
  |-- Status: PARTIAL FIX (planning gap remains; execution gap addressed)

  GAP 3: Material Channel Phantom (Report 11)
  |-- "Material" named in 6-channel taxonomy but zero operational spec
  |-- Mitigation: Material may emerge from L4 multi-coherence
  |-- Status: ACCEPTED (emergent property, not independently controllable)

  GAP 4: Scale Coverage Gate Missing (Report 83)
  |-- Fractal echo table is PLANNED and VALIDATED at handoff but NOT
  |   VERIFIED post-build (no SC-XX checks if pattern appears at 4+ scales)
  |-- Mitigation: PA compositional question "Can you identify the pattern
  |   WITHOUT labels?" catches announced-not-structural patterns
  |-- Status: OPEN (may need future SC-16 for scale coverage)

  GAP 5: Component-Level Metaphor Expression (Report 04)
  |-- Components parameterized for COLOR but not STRUCTURE
  |-- A callout in "geological strata" looks identical to one in "river delta"
  |-- Mitigation: Phase 6 + Opus creative judgment
  |-- Status: PARTIAL (requires component CSS custom properties)

  GAP 6: Recipe Ceiling at 3/4 (Reports 27, 29, 30, 85)
  |-- Recipe reliably produces COMPOSED (3/4)
  |-- DESIGNED (4/4) requires 4 irreducible capabilities beyond recipes
  |-- CD-006 achieved 39/40 without recipes
  |-- Mitigation: Experiment Branch (Path B: Principles Brief)
  |-- Status: EXPERIMENT REQUIRED (3 tests designed, Report 70)

  GAP 7: N=2 Content Generalizability
  |-- Evidence base = 2 experiments on 1 content type (RESEARCH-SYNTHESIS)
  |-- Untested: API docs, tutorials, changelogs, migration guides
  |-- Mitigation: Build on 5+ content types, track PA-05 per type
  |-- Status: OPEN (addressed by running experiments on diverse content)


=======================================================================================
  SECTION 8: PERMANENT FILE ARCHITECTURE — What Must Be Written
=======================================================================================

  4 NEW FILES (~1,355 lines total):

  ~/.claude/skills/build-page/SKILL.md .................. ~205 lines
  |  The orchestrator. Fire-and-forget entry point.
  |  Handles YAML build plan parsing. 8-check handoff gate.
  |  Single path (ALWAYS FLAGSHIP). No tier routing.

  design-system/compositional-core/operational-recipe.md . ~650 lines
  |  THE recipe. Telescope+microscope format. 9 sequential phases.
  |  Template slots for build-plan-specific values.
  |  Transition table references at each phase.
  |  Character taxonomy (3 types + anti-type).
  |  Cascade value table as Phase 8 deliverable.

  design-system/compositional-core/perception-thresholds.md ~80 lines
  |  Canonical threshold table + 6-channel definitions.
  |  Backgrounds >= 15 RGB. Font-size >= 2px. Letter-spacing >= 0.03em.
  |  Stacked gap <= 108px.

  design-system/compositional-core/gate-runner.js ........ ~400 lines
     15 binary gates via Playwright getComputedStyle.
     SC-01 through SC-15. All BLOCKING under ALWAYS FLAGSHIP.
     Fix recipe generation on every FAIL.

  8 EDITS TO EXISTING FILES (~370 lines):

  TC SKILL.md ......... Scope to Phases 0-3.5 + output spec (~660 lines)
  PA SKILL.md ......... +compositional questions, perception thresholds
  CLAUDE.md (core) .... Builder CSS recipes, agent comms, Opus builder
  semantic-rules.md ... S-09 stacking at 108px
  tokens.css .......... S-09 stacking at 108px

  TOTAL: ~1,725 permanent lines to write + 370 edits.
  vs. 900,000+ lines of analysis that produced them.


=======================================================================================
  SECTION 9: NEXT STEP — THE UNANIMOUS VERDICT
=======================================================================================

  +=====================================================================+
  |                                                                       |
  |          C O D I F Y ,   E X P E R I M E N T ,   B U I L D          |
  |                                                                       |
  |   1. Write 4 files + 8 edits (~1,725 + 370 lines)  [CODIFY]        |
  |   2. Run 3 experiments (A: minimal, B: recipe,      [EXPERIMENT]    |
  |      C: brief) — same content, same metrics                         |
  |   3. Winner becomes default build path               [BUILD]        |
  |   4. Run /build-page on diverse content              [VALIDATE]     |
  |   5. Measure PA-05, validate end-to-end              [SHIP]         |
  |                                                                       |
  |   30+ agents say: don't assume the recipe wins.                      |
  |   Test it. Then codify the winner.                                   |
  |   Gate 6 demands it. The contrarian demands it.                      |
  |   This diagram demands it.                                           |
  |                                                                       |
  +=====================================================================+
```
