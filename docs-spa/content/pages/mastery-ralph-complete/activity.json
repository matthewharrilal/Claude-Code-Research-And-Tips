{
  "items": [
    {
      "id": "inv-1",
      "type": "inversion",
      "linkedSection": "essence",
      "title": "What if context DIDN'T degrade?",
      "content": "<strong>You'd design:</strong> One long session per feature, no external files, no restarts.<br>\n          <strong>Why this fails:</strong> 80K token context rot is transformer physics, not a bug.<br>\n          <strong>Hidden constraint revealed:</strong> Ralph IS the constraint made visible."
    },
    {
      "id": "min-2",
      "type": "minimal",
      "linkedSection": "essence",
      "title": "The irreducible core",
      "content": "<code style=\"background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;\">while :; do cat PROMPT.md | claude; done</code><br>\n          <strong>Essential:</strong> The loop. Fresh context.<br>\n          <strong>Everything else:</strong> Refinement for reliability."
    },
    {
      "id": "war-3",
      "type": "warstory",
      "linkedSection": "essence",
      "title": "Ryan Carson: 14 iterations, ~$10-15",
      "content": "Untangle Legal Agent. 6 user stories, ran overnight. \"Learnings compound. By story 10, Ralph knew our patterns.\""
    },
    {
      "id": "grad-4",
      "type": "gradient",
      "linkedSection": "core",
      "title": "How context degrades (invisibly)",
      "content": "<strong>100% → 90%</strong> (40-60K): Subtle drift, you won't notice<br>\n          <strong>90% → 70%</strong> (60-80K): Repetition, compression<br>\n          <strong>70% → 50%</strong> (80-100K): Instructions forgotten<br>\n          <strong>50% → CLIFF</strong> (100K+): Hallucinations, amnesia<br><br>\n          <em>Critical: The gradient is invisible until the cliff.</em>"
    },
    {
      "id": "ana-5",
      "type": "analogy",
      "linkedSection": "core",
      "title": "Ralph = Stateless Web Servers",
      "content": "HTTP stateless → Fresh context per iteration<br>\n          Database → prd.json, progress.txt, git<br>\n          Session cookie → Files read at iteration start<br>\n          Horizontal scaling → Parallel Ralph loops<br><br>\n          <em>If you've designed stateless services, you already understand Ralph.</em>"
    },
    {
      "id": "inv-6",
      "type": "invariant",
      "linkedSection": "core",
      "title": "INV-003: External state > internal memory",
      "content": "<strong>Shared by:</strong> Ralph, Gas Town, CC Mirror<br>\n          <strong>Why this matters:</strong> The same principle forces the same architectural choice across patterns. If you understand this invariant, you understand all three."
    },
    {
      "id": "eff-7",
      "type": "effect",
      "linkedSection": "core",
      "title": "Learnings compound exponentially",
      "content": "At iteration 50+, the patterns in progress.txt enable tasks that would have failed at iteration 5. The agent builds codebase-specific intuition that no single session could develop."
    },
    {
      "id": "con-8",
      "type": "constraint",
      "linkedSection": "decisions",
      "title": "One constraint → FIVE decisions",
      "content": "<strong>ROOT:</strong> Context finite (200K) → Quality degrades as context fills<br>\n          → Fresh context beats extended sessions<br>\n          → State must persist externally (files)<br>\n          → Each iteration must be self-contained<br>\n          → Tasks must complete in one context window<br>\n          → Verification must be automatable"
    },
    {
      "id": "vio-9",
      "type": "violation",
      "linkedSection": "decisions",
      "title": "If you rely on \"Claude remembering\"",
      "content": "<strong>IF:</strong> You rely on memory instead of files<br>\n          <strong>THEN:</strong> Next iteration has no knowledge of previous<br>\n          <strong>THEN:</strong> Same mistakes repeated<br>\n          <strong>THEN:</strong> No velocity increase over time<br>\n          <strong>FINALLY:</strong> Iteration 20 is as slow as iteration 1<br><br>\n          <em>The fix: \"If it's not in a file, it doesn't exist.\"</em>"
    },
    {
      "id": "trade-10",
      "type": "tradeoff",
      "linkedSection": "decisions",
      "title": "The Task Size Dilemma",
      "content": "- <strong>Very small:</strong> Safe, but spawn overhead dominates<br>\n          - <strong>Medium:</strong> Balanced, but judgment required<br>\n          - <strong>Large:</strong> Efficient, but context collapse risk<br><br>\n          <em>Heuristic: If task description &gt; code change, you've decomposed too far.</em>"
    },
    {
      "id": "inv-11",
      "type": "inversion",
      "linkedSection": "decisions",
      "title": "What if verification wasn't required?",
      "content": "<strong>You'd design:</strong> Trust Claude's claim of completion.<br>\n          <strong>Why this fails:</strong> \"Claude's tendency to mark features complete without proper testing\" (Anthropic docs).<br>\n          <strong>Hidden constraint:</strong> LLMs are overconfident. Verification is the check on hallucinated completion."
    },
    {
      "id": "con-12",
      "type": "constraint",
      "linkedSection": "decisions",
      "title": "Small tasks → cascading architecture",
      "content": "<strong>ROOT:</strong> Tasks must fit in one context window<br>\n          → PRD must decompose features<br>\n          → Each story needs acceptance criteria<br>\n          → Dependencies must be ordered<br>\n          → Schema before backend before frontend<br>\n          → Progress must be trackable per-story"
    },
    {
      "id": "exp-13",
      "type": "expertise",
      "linkedSection": "files",
      "title": "How deep is your understanding?",
      "content": "<strong>Beginner:</strong> \"What files do I need?\" → The 4 files<br>\n          <strong>Intermediate:</strong> \"Why these files?\" → Each serves ONE purpose<br>\n          <strong>Advanced:</strong> \"What's minimal?\" → Just loop + prompt<br>\n          <strong>Staff:</strong> \"When add more?\" → Dr. Ralph, HOTL gates<br>\n          <strong>Expert:</strong> \"Cross-pattern?\" → prd.json = Gas Town inbox"
    },
    {
      "id": "ana-14",
      "type": "analogy",
      "linkedSection": "files",
      "title": "Ralph files = Gas Town components",
      "content": "<strong>YOU</strong> = The Mayor (orchestrator)<br>\n          <strong>prd.json</strong> = The Inbox (work queue)<br>\n          <strong>progress.txt</strong> = The Refinery (persistent memory)<br>\n          <strong>Each Claude iteration</strong> = A Polecat (stateless worker)"
    },
    {
      "id": "comp-15",
      "type": "composition",
      "linkedSection": "files",
      "title": "Ralph + Playwright",
      "content": "<strong>Works:</strong> Visual verification catches UI bugs.<br>\n          <strong>Danger:</strong> Browser context consumes tokens. Put Playwright in subagents to protect main context."
    },
    {
      "id": "comp-16",
      "type": "composition",
      "linkedSection": "files",
      "title": "Ralph + Mobile Notifications",
      "content": "<strong>Works:</strong> Get notified via hooks when Ralph needs input or completes.<br>\n          <strong>Setup:</strong> PreToolUse hook on AskUserQuestion, POST to Poke webhook.<br>\n          <strong>Benefit:</strong> True \"ship while you sleep\" - Ralph wakes you only when needed."
    },
    {
      "id": "hor-17",
      "type": "horizon",
      "linkedSection": "path",
      "title": "How judgment evolves with iterations",
      "content": "<strong>Iteration 3:</strong> \"progress.txt feels like overhead\"<br>\n          <strong>Iteration 8:</strong> \"Claude is repeating solved mistakes!\"<br>\n          <strong>Iteration 15:</strong> \"progress.txt is why late iterations are FASTER\"<br>\n          <strong>Iteration 30:</strong> \"This is institutional memory\"<br><br>\n          <em>Don't judge Ralph by iteration 2.</em>"
    },
    {
      "id": "vio-18",
      "type": "violation",
      "linkedSection": "path",
      "title": "If you skip tests (Step 7)",
      "content": "<strong>IF:</strong> Skip \"run typecheck and tests\"<br>\n          <strong>THEN:</strong> Claude marks tasks done without verification<br>\n          <strong>THEN:</strong> Broken code enters git<br>\n          <strong>THEN:</strong> Future iterations inherit broken foundation<br>\n          <strong>FINALLY:</strong> Morning reveals 20 bad commits<br><br>\n          <em>One unverified task at iteration 5 → 15 iterations on broken foundation</em>"
    },
    {
      "id": "eff-19",
      "type": "effect",
      "linkedSection": "path",
      "title": "Git history as debugging tool",
      "content": "At iteration 20+, the commit-per-story pattern enables <code>git bisect</code> to find exactly which story broke something. Without atomic commits, debugging overnight failures is a nightmare."
    },
    {
      "id": "hor-20",
      "type": "horizon",
      "linkedSection": "variants",
      "title": "Variant progression over project lifecycle",
      "content": "<strong>Week 1:</strong> HOTL Ralph - learning codebase patterns<br>\n          <strong>Week 2:</strong> Basic Ralph - patterns established<br>\n          <strong>Week 4:</strong> AFK Ralph - high test coverage<br>\n          <strong>Week 8:</strong> Compounding Ralph - institutional memory<br>\n          <strong>Week 12:</strong> Parallel Ralph - multiple features overnight"
    },
    {
      "id": "trade-21",
      "type": "tradeoff",
      "linkedSection": "variants",
      "title": "Automation Level = Risk Level",
      "content": "<strong>HOTL Ralph</strong> = Pair programming (human reviews each step)<br>\n          <strong>Semi-Auto</strong> = Code review (human reviews every N steps)<br>\n          <strong>AFK Ralph</strong> = CI/CD pipeline (fully automated with tests)<br><br>\n          <em>Match automation level to risk level. Security-critical? Stay at HOTL.</em>"
    },
    {
      "id": "inf-22",
      "type": "inflection",
      "linkedSection": "gotchas",
      "title": "When progress.txt flips from help to hurt",
      "content": "<strong>0-10KB:</strong> Pure benefit (learnings compound)<br>\n          <strong>10-20KB:</strong> Diminishing returns (more to read)<br>\n          <strong>20-30KB:</strong> Neutral (reading cost = thinking benefit)<br>\n          <strong>30KB+:</strong> Net negative (context wasted on history)<br><br>\n          <strong>THE INFLECTION:</strong> ~20KB<br>\n          <em>Detection: Late iterations worse than early? Check file size.</em>"
    },
    {
      "id": "inv-23",
      "type": "inversion",
      "linkedSection": "gotchas",
      "title": "Why CAPS for \"APPEND\"?",
      "content": "<strong>What if \"update\" meant \"append\"?</strong><br>\n          Then you wouldn't need CAPS. But models interpret \"update\" as \"replace\" by default.<br><br>\n          <strong>Why CAPS matters:</strong> Models pay attention to formatting emphasis. \"append\" gets ignored. \"APPEND\" gets followed.<br>\n          <em>Hidden constraint: Model instruction following has quirks. The workaround IS the interface.</em>"
    },
    {
      "id": "fron-24",
      "type": "frontier",
      "linkedSection": "gotchas",
      "title": "UNSOLVED: Optimal compaction window",
      "content": "When should progress.txt be compacted? After N iterations? After K bytes? Optimal varies by project. No automation yet. Current practice: manual compaction when quality degrades."
    },
    {
      "id": "grad-25",
      "type": "gradient",
      "linkedSection": "gotchas",
      "title": "How stuck loops degrade",
      "content": "<strong>Iteration 1 fail:</strong> Normal - Claude trying things<br>\n          <strong>Iteration 2 fail:</strong> Concerning - same task<br>\n          <strong>Iteration 3 fail:</strong> Stuck - task may be impossible<br>\n          <strong>Iteration 4+ fail:</strong> Burning tokens - manual intervention needed<br><br>\n          <em>Add stuck detection: exit if same git HEAD for 3 iterations.</em>"
    },
    {
      "id": "trade-26",
      "type": "tradeoff",
      "linkedSection": "hard",
      "title": "Context Rot vs. Memory Loss",
      "content": "<strong>THE DILEMMA:</strong><br>\n          - Extended session: Rich context, but quality degrades at 80K<br>\n          - Fresh context: Peak quality, but must reconstruct state<br><br>\n          <strong>WHY NO PERFECT ANSWER:</strong><br>\n          progress.txt is lossy - you choose what to write. Each iteration \"forgets\" 90% of the prior.<br><br>\n          <em>Accept that fresh &gt; rot. Invest in better hygiene, not longer sessions.</em>"
    },
    {
      "id": "exp-27",
      "type": "expertise",
      "linkedSection": "hard",
      "title": "Task Decomposition Understanding",
      "content": "<strong>Beginner:</strong> \"How small should tasks be?\" → Fit in one context<br>\n          <strong>Intermediate:</strong> \"What's too small?\" → When description &gt; code change<br>\n          <strong>Advanced:</strong> \"How do I improve?\" → Review progress.txt after runs<br>\n          <strong>Staff:</strong> \"Is there a formula?\" → No. It's a skill, not a formula.<br>\n          <strong>Expert:</strong> \"Invisible errors?\" → Tasks with hidden dependencies"
    },
    {
      "id": "war-28",
      "type": "warstory",
      "linkedSection": "hard",
      "title": "Molly Cantillon: Jmail, 18M users",
      "content": "Built overnight with Ralph loops. Parsed Epstein files documents using overnight runs. Built search index autonomously. Deployed to production next morning. Proof that Ralph works for production systems at scale."
    },
    {
      "id": "inv-29",
      "type": "inversion",
      "linkedSection": "when",
      "title": "What if you used Ralph for \"make it pretty\"?",
      "content": "- No acceptance criteria → no verification → false \"done\"<br>\n          - Claude claims complete → you disagree → frustration<br>\n          - Overnight run produces 10 \"improvements\" you hate<br><br>\n          <strong>Why this fails:</strong> Ralph requires VERIFIABLE completion.<br>\n          <em>\"Pretty\" is not verifiable. \"Passes Lighthouse score 90\" is.</em>"
    },
    {
      "id": "ana-30",
      "type": "analogy",
      "linkedSection": "when",
      "title": "Ralph = Night Shift Manufacturing",
      "content": "Factory supervisor = You (sets up the PRD)<br>\n          Night shift workers = Claude iterations (follow instructions)<br>\n          Quality control = Tests (verify each piece)<br>\n          Morning inspection = Review commits<br><br>\n          <em>If you've managed manufacturing, you understand the Ralph workflow.</em>"
    },
    {
      "id": "alt-31",
      "type": "alternative",
      "linkedSection": "when",
      "title": "If Ralph isn't right for your use case",
      "content": "<strong>Need parallelism?</strong> → CC Mirror<br>\n          <strong>Need human review gates?</strong> → HOTL Ralph<br>\n          <strong>Need content, not code?</strong> → Ralph Wiggum Marketer<br>\n          <strong>Need debugging?</strong> → Single Claude session<br>\n          <strong>Need multi-agent coordination?</strong> → Gas Town"
    },
    {
      "id": "inv-32",
      "type": "invariant",
      "linkedSection": "resources",
      "title": "INV-001: Fresh context > extended sessions",
      "content": "<strong>Shared by:</strong> Ralph, Boris's vanilla workflow, Auto-Handoff patterns<br>\n          <strong>Why this matters:</strong> Every long-running AI workflow eventually rediscovers this principle. It's not optional - it's transformer physics."
    },
    {
      "id": "war-33",
      "type": "warstory",
      "linkedSection": "resources",
      "title": "Matt Pocock: Video Editor Beats Feature",
      "content": "AI Hero Video Editor. \"The beats display as three orange ellipses dots below clip.\" Claude used Playwright to verify the UI actually rendered correctly. Visual verification in acceptance criteria caught bugs tests missed."
    }
  ]
}