{
  "items": [
    {
      "id": "inv-1",
      "type": "inversion",
      "linkedSection": "essence",
      "title": "What if there was no deployment choice?",
      "content": "<strong>You'd have:</strong> One-size-fits-all infrastructure. Either too locked down (slow iteration) or too permissive (security nightmare).<br>\n          <strong>Why this fails:</strong> Risk profiles vary wildly. Prototyping needs speed. Production needs isolation.<br>\n          <strong>Hidden constraint:</strong> The deployment taxonomy exists because trust varies by context."
    },
    {
      "id": "min-2",
      "type": "minimal",
      "linkedSection": "essence",
      "title": "The simplest deployment",
      "content": "<code style=\"background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;\">claude</code><br>\n          <strong>That's it.</strong> Direct CLI on your machine.<br>\n          Everything else is adding isolation, persistence, or scale."
    },
    {
      "id": "war-3",
      "type": "warstory",
      "linkedSection": "essence",
      "title": "dabit3: Full development from phone",
      "content": "Cloud VM at $7/day, Termius + Tailscale, 6 parallel Claude windows in tmux. \"Phone buzzes when agent needs input. Respond via Termius. Kick off next task while walking.\""
    },
    {
      "id": "grad-4",
      "type": "gradient",
      "linkedSection": "core",
      "title": "How isolation levels fail",
      "content": "<strong>No isolation (local CLI):</strong> Fast setup, but one <code>rm -rf</code> = disaster<br>\n          <strong>Process isolation:</strong> Limits scope, but still shares filesystem<br>\n          <strong>Container:</strong> Strong isolation, but UID/permission gotchas<br>\n          <strong>VM:</strong> Maximum isolation, but slow startup and overhead<br><br>\n          <em>Each level trades convenience for safety. Know where you are.</em>"
    },
    {
      "id": "ana-5",
      "type": "analogy",
      "linkedSection": "core",
      "title": "Deployment Spectrum = Trust Levels",
      "content": "Local CLI = Trusting yourself with sudo<br>\n          Container = Trusting a contractor with keys<br>\n          VM = Trusting a contractor in a monitored workspace<br>\n          Cloud Sandbox = Trusting a contractor via security camera<br><br>\n          <em>Match isolation to how much you trust the agent's judgment.</em>"
    },
    {
      "id": "con-6",
      "type": "constraint",
      "linkedSection": "core",
      "title": "From \"bash access\" to full taxonomy",
      "content": "<strong>ROOT:</strong> Claude Code has full bash access<br>\n          --&gt; Can run ANY command, including destructive ones<br>\n          --&gt; Need isolation for unsupervised work<br>\n          --&gt; Multiple isolation levels (process, container, VM)<br>\n          --&gt; Need persistence for long-running work<br>\n          --&gt; tmux, mosh, session recovery patterns"
    },
    {
      "id": "trade-7",
      "type": "tradeoff",
      "linkedSection": "decisions",
      "title": "The Isolation Dilemma",
      "content": "<strong>THE DILEMMA:</strong><br>\n          - <strong>No isolation:</strong> Fast, but risky<br>\n          - <strong>Container:</strong> Good balance, but setup overhead<br>\n          - <strong>Full VM:</strong> Maximum safety, but expensive and slow<br><br>\n          <strong>HEURISTIC:</strong> Use least isolation that lets you sleep at night."
    },
    {
      "id": "vio-8",
      "type": "violation",
      "linkedSection": "decisions",
      "title": "If you run YOLO on your main machine",
      "content": "<strong>IF:</strong> Use --dangerously-skip-permissions on main machine<br>\n          <strong>THEN:</strong> Agent runs any command without approval<br>\n          <strong>THEN:</strong> One bad command (rm -rf, git force push) executes<br>\n          <strong>THEN:</strong> Hours of work lost, or worse<br>\n          <strong>FINALLY:</strong> Morning reveals destruction<br><br>\n          <em>YOLO is for containers and VMs only. Never your main machine.</em>"
    },
    {
      "id": "exp-9",
      "type": "expertise",
      "linkedSection": "decisions",
      "title": "Deployment understanding depth",
      "content": "<strong>Beginner:</strong> \"How do I run Claude Code?\" --&gt; Just type <code>claude</code><br>\n          <strong>Intermediate:</strong> \"How do I run overnight?\" --&gt; tmux + Ralph loop<br>\n          <strong>Advanced:</strong> \"How do I isolate?\" --&gt; Docker with security opts<br>\n          <strong>Staff:</strong> \"How do I scale?\" --&gt; Cloudflare Workers + Durable Objects<br>\n          <strong>Expert:</strong> \"How do I compose?\" --&gt; Multi-agent orchestration infra"
    },
    {
      "id": "inv-10",
      "type": "invariant",
      "linkedSection": "patterns",
      "title": "All patterns share INV-003: External State",
      "content": "Local CLI, Cloud VM, Docker, Serverless -- all rely on external state (filesystem, git, database) rather than in-memory state. This is the same invariant that makes Ralph work."
    },
    {
      "id": "comp-11",
      "type": "composition",
      "linkedSection": "patterns",
      "title": "Docker + Git Worktrees",
      "content": "<strong>WORKS:</strong> Yes, excellently<br>\n          <strong>WHY:</strong> Each worktree in its own container = full isolation + no branch conflicts<br>\n          <strong>THE WIN:</strong> Scale agents horizontally without fear<br>\n          <strong>SETUP:</strong> One docker-compose with replicas mapping to worktrees"
    },
    {
      "id": "comp-12",
      "type": "composition",
      "linkedSection": "patterns",
      "title": "Cloudflare Workers + Skills",
      "content": "<strong>WORKS:</strong> Yes, this is the production pattern<br>\n          <strong>WHY:</strong> Skills developed locally, deployed unchanged to Workers<br>\n          <strong>THE WIN:</strong> Same code runs in dev and prod<br>\n          <strong>DANGER:</strong> Free tier has 10ms CPU limit. Use paid for agents."
    },
    {
      "id": "war-13",
      "type": "warstory",
      "linkedSection": "patterns",
      "title": "0xSero: Self-improving Docker Orchestra",
      "content": "\"Set goal to 'improve itself' and it added Docker containerization to protect the host machine.\" The agent learned isolation was necessary for self-improvement."
    },
    {
      "id": "war-14",
      "type": "warstory",
      "linkedSection": "patterns",
      "title": "@burcs: System - Mac as API via Cloudflare",
      "content": "Cloudflare Worker brain controlling local Mac body via tunnel. Can play music, send texts, create Linear issues, run Shortcuts. Zero exposed ports, full local machine control."
    },
    {
      "id": "hor-15",
      "type": "horizon",
      "linkedSection": "patterns",
      "title": "How infrastructure needs evolve",
      "content": "<strong>Day 1:</strong> \"Local CLI is fine\"<br>\n          <strong>Week 1:</strong> \"I need tmux for persistence\"<br>\n          <strong>Month 1:</strong> \"I need a VM for mobile access\"<br>\n          <strong>Month 3:</strong> \"I need containers for overnight work\"<br>\n          <strong>Month 6:</strong> \"I need orchestration for multi-agent\"<br><br>\n          <em>Your infrastructure will evolve. Plan for it.</em>"
    },
    {
      "id": "ana-16",
      "type": "analogy",
      "linkedSection": "path",
      "title": "Decision Tree = Security Audit",
      "content": "The deployment decision tree is essentially a security audit:<br>\n          - What can go wrong?<br>\n          - What's the blast radius?<br>\n          - What's the recovery path?<br><br>\n          <em>If you've done security reviews, you already understand this.</em>"
    },
    {
      "id": "inv-17",
      "type": "inversion",
      "linkedSection": "path",
      "title": "What if you always used maximum isolation?",
      "content": "<strong>You'd get:</strong> Maximum safety, but 10x setup time for every task<br>\n          <strong>Why this fails:</strong> Simple prototyping doesn't need VM overhead<br>\n          <strong>Hidden constraint:</strong> Iteration speed matters. Over-isolation kills velocity."
    },
    {
      "id": "inf-18",
      "type": "inflection",
      "linkedSection": "path",
      "title": "When to upgrade your deployment",
      "content": "<strong>Local --&gt; Cloud VM:</strong> When you need mobile access<br>\n          <strong>Interactive --&gt; Containers:</strong> When you run overnight<br>\n          <strong>Single --&gt; Multi-agent:</strong> When parallel work needed<br>\n          <strong>Self-hosted --&gt; Serverless:</strong> When you need scale<br><br>\n          <strong>DETECTION:</strong> Friction in your workflow = time to upgrade"
    },
    {
      "id": "vio-19",
      "type": "violation",
      "linkedSection": "gotchas",
      "title": "If you skip tmux for remote work",
      "content": "<strong>IF:</strong> SSH directly without tmux<br>\n          <strong>THEN:</strong> Network blip disconnects session<br>\n          <strong>THEN:</strong> Running Claude process orphaned or killed<br>\n          <strong>THEN:</strong> Mid-task work lost, state inconsistent<br>\n          <strong>FINALLY:</strong> Manual cleanup and restart required<br><br>\n          <em>Always use tmux for remote Claude sessions.</em>"
    },
    {
      "id": "eff-20",
      "type": "effect",
      "linkedSection": "gotchas",
      "title": "UID mismatch compounds over time",
      "content": "At first: \"Permission denied on one file\"<br>\n          After 10 runs: \"Half my files have wrong ownership\"<br>\n          After 50 runs: \"I need to chown -R my entire project\"<br><br>\n          <strong>THRESHOLD:</strong> Fix UID mismatch on first occurrence, not later"
    },
    {
      "id": "fron-21",
      "type": "frontier",
      "linkedSection": "gotchas",
      "title": "UNSOLVED: Automatic recovery from session drops",
      "content": "<strong>THE QUESTION:</strong> Can agents automatically recover from disconnection?<br>\n          <strong>WHY IT'S HARD:</strong> Need to detect partial state, resume without duplication, handle concurrent writes<br>\n          <strong>CURRENT:</strong> Manual tmux reconnection. No automation yet."
    },
    {
      "id": "exp-22",
      "type": "expertise",
      "linkedSection": "gotchas",
      "title": "Troubleshooting deployment issues",
      "content": "<strong>Beginner:</strong> \"It doesn't work\" --&gt; Check API key is set<br>\n          <strong>Intermediate:</strong> \"Permission denied\" --&gt; Check UID/GID<br>\n          <strong>Advanced:</strong> \"Intermittent failures\" --&gt; Check network, SSH config<br>\n          <strong>Staff:</strong> \"Performance issues\" --&gt; Check container limits, cold starts<br>\n          <strong>Expert:</strong> \"Scale problems\" --&gt; Check Durable Object limits, queue depths"
    },
    {
      "id": "trade-23",
      "type": "tradeoff",
      "linkedSection": "hard",
      "title": "The Cost-Availability Dilemma",
      "content": "<strong>THE DILEMMA:</strong><br>\n          - <strong>Always-on VM:</strong> Available but costs $48-210/mo<br>\n          - <strong>Stop when idle:</strong> Cheap but breaks mobile workflow<br>\n          - <strong>Serverless:</strong> Pay-per-use but has limits<br>\n          - <strong>Home Mac:</strong> Free but depends on home internet<br><br>\n          <strong>HEURISTIC:</strong> Hourly billing + iOS Shortcuts to start/stop"
    },
    {
      "id": "grad-24",
      "type": "gradient",
      "linkedSection": "hard",
      "title": "How security posture degrades",
      "content": "<strong>100%:</strong> Fresh setup, all controls in place<br>\n          <strong>90%:</strong> \"Just this once\" skip a permission check<br>\n          <strong>70%:</strong> YOLO mode becomes default for convenience<br>\n          <strong>50%:</strong> Security controls feel like overhead<br>\n          <strong>CLIFF:</strong> One destructive command, no isolation<br><br>\n          <em>Security hygiene degrades invisibly. Audit periodically.</em>"
    },
    {
      "id": "con-25",
      "type": "constraint",
      "linkedSection": "hard",
      "title": "From \"portability\" to vendor lock-in",
      "content": "<strong>ROOT:</strong> Want optimal performance<br>\n          --&gt; Use provider-specific features (Durable Objects, Lambda@Edge)<br>\n          --&gt; Code becomes provider-dependent<br>\n          --&gt; Migration requires rewrite<br>\n          --&gt; Stuck with one provider<br>\n          --&gt; Pricing changes hit hard"
    },
    {
      "id": "alt-26",
      "type": "alternative",
      "linkedSection": "when",
      "title": "If these patterns don't fit",
      "content": "<strong>Need browser automation?</strong> --&gt; Browserbase or Playwright MCP<br>\n          <strong>Need multi-agent coordination?</strong> --&gt; CC Mirror or Gas Town<br>\n          <strong>Need enterprise SSO?</strong> --&gt; Cloudflare Zero Trust + Workers<br>\n          <strong>Need GPU compute?</strong> --&gt; Modal, RunPod, or dedicated instance"
    },
    {
      "id": "inv-27",
      "type": "invariant",
      "linkedSection": "when",
      "title": "All deployments share verification need",
      "content": "Local, remote, containerized, serverless -- all need verification loops (tests, typecheck) to catch agent mistakes. Deployment pattern changes, verification invariant remains."
    },
    {
      "id": "ana-28",
      "type": "analogy",
      "linkedSection": "when",
      "title": "Deployment Selection = Car Selection",
      "content": "Local CLI = Walking (simple, no overhead, limited range)<br>\n          Cloud VM = Personal car (flexible, maintenance required)<br>\n          Docker = Rental car (standardized, disposable)<br>\n          Serverless = Taxi (pay-per-use, no ownership)<br><br>\n          <em>Match the vehicle to the journey.</em>"
    },
    {
      "id": "war-29",
      "type": "warstory",
      "linkedSection": "when",
      "title": "Molly Cantillon: Personal Panopticon",
      "content": "8 parallel Claude instances, each in its own directory: ~/nox (company), ~/trades (finance), ~/health (wellness), etc. \"Reverse the data asymmetry that institutions have over you.\""
    },
    {
      "id": "hor-30",
      "type": "horizon",
      "linkedSection": "when",
      "title": "How deployment preferences evolve",
      "content": "<strong>Beginner:</strong> \"Just give me the simplest\" (local CLI)<br>\n          <strong>3 months:</strong> \"I need this to work overnight\" (Ralph + containers)<br>\n          <strong>6 months:</strong> \"I need this from anywhere\" (cloud VM + mobile)<br>\n          <strong>1 year:</strong> \"I need this at scale\" (serverless + orchestration)<br><br>\n          <em>Start simple. Complexity finds you.</em>"
    }
  ]
}