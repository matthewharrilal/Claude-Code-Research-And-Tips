<!--
═══════════════════════════════════════════════════════════════════════════════
INLINE THREADING HEADER — Phase 2B
File: docs-spa/content/pages/reference-cost-economics/content.html
Tier: C | Batch: 13 | Generated: 2026-02-06

1. WHY THIS EXISTS
Rendered HTML content page for the reference-cost-economics synthesis document.

3. STATUS
ACTIVE

5. BUILT ON
Extracted from synthesis/reference-cost-economics.md by content extraction scripts.

8. CONSUMED BY
docs-spa/app/(docs)/synthesis/reference-cost-economics/page.tsx renders this content via dangerouslySetInnerHTML.

═══════════════════════════════════════════════════════════════════════════════
END INLINE THREADING HEADER
═══════════════════════════════════════════════════════════════════════════════
-->

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">Model selection, caching, and context management determine 80% of your Claude Code costs.</div>
        </div>
      </section>

      <!-- Section 2: CORE ABSTRACTION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Core Abstraction
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"Output tokens cost 5x input tokens. Caching cuts input by 90%. Model selection cuts both by 80%."</div>

          <div class="core-code">
            <button class="copy-btn" onclick="copyCode(this, 'Cost = (Input_Tokens * Input_Price) + (Output_Tokens * Output_Price)')">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <code>Cost = (Input_Tokens * Input_Price) + (Output_Tokens * Output_Price)</code>
          </div>

          <div class="core-anchor">Three levers: model, caching, context. Master these and costs become predictable.</div>
        </div>

        <p class="text-text-secondary mb-6">
          Claude Code costs are driven by <strong>tokens</strong>. Input tokens (what you send) cost less than output tokens (what Claude generates). But the real insight is that most input tokens are repeated context that can be cached, and most tasks don't require the most expensive model.
        </p>

        <div class="highlight-box">
          <strong>The 60-80% Savings Formula:</strong> "Haiku for setup, Sonnet for builds, Opus for reviews." Apply this consistently and you've cut costs by 60-80% without losing quality where it matters.
        </div>

        <p class="text-text-secondary mb-6">
          Anthropic's official stats: Average developer costs <strong>$6/day</strong>. 90th percentile: <strong>&lt;$12/day</strong>. Team average: <strong>$100-200/developer/month</strong>. If you're above these numbers, you're doing something wrong.
        </p>
      </section>

      <!-- Section 3: DESIGN DECISIONS -->
      <section id="why-model-selection" data-activity="decisions">
        <h2 class="section-title">
          <span class="section-number">3</span>
          Design Decisions
        </h2>

        <div class="decision-box">
          <div class="decision-why">WHY MODEL SELECTION?</div>
          <div class="decision-reasoning">
            Opus 4.5 costs 5x Haiku 4.5 for input and 5x for output. But Opus isn't 5x better at routine tasks. The quality difference only matters for complex reasoning, architectural decisions, and final reviews.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Use Haiku ($1/$5 per 1M) for: code review, linting, documentation, simple queries.<br>
              Use Sonnet ($3/$15 per 1M) for: daily development, debugging, implementation.<br>
              Use Opus ($5/$25 per 1M) for: complex refactoring, architecture decisions, critical reviews.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-caching">
          <div class="decision-why">WHY CACHING?</div>
          <div class="decision-reasoning">
            Cache reads cost 0.1x base price. If your system prompt or CLAUDE.md is 10K tokens and you make 50 requests, caching saves $1.35 per session with Sonnet. That's $27/month for one developer.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Structure prompts with static content first. Reuse system prompts across sessions. Batch similar queries together. Use 1-hour cache for long workflows. Target 30:1+ cache read:write ratio.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-subscription">
          <div class="decision-why">WHY SUBSCRIPTION VS API?</div>
          <div class="decision-reasoning">
            At Anthropic's reported $6/day average, API costs ~$180/month. Max 20x ($200/month) becomes economical for heavy users. But subscriptions hide usage data, making optimization harder.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Predictable high-volume = Subscription (Max 5x or 20x).<br>
              Variable/bursty usage = API pay-per-token.<br>
              Need fine-grained model control = API.<br>
              Multi-agent orchestration = Max 20x or API with separate keys.
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: PRICING TABLES -->
      <section id="pricing" data-activity="pricing">
        <h2 class="section-title">
          <span class="section-number">4</span>
          Pricing Tables
        </h2>

        <h3 class="font-semibold text-lg mb-4">Model Pricing (January 2026)</h3>

        <table class="data-table">
          <thead>
            <tr>
              <th>Model</th>
              <th>Input (per 1M)</th>
              <th>Output (per 1M)</th>
              <th>Context</th>
              <th>Best For</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Claude Haiku 4.5</strong></td>
              <td>$1.00</td>
              <td>$5.00</td>
              <td>200K</td>
              <td>Speed, volume, simple tasks</td>
            </tr>
            <tr>
              <td><strong>Claude Haiku 3.5</strong></td>
              <td>$0.80</td>
              <td>$4.00</td>
              <td>200K</td>
              <td>Budget batch processing</td>
            </tr>
            <tr>
              <td><strong>Claude Haiku 3</strong></td>
              <td>$0.25</td>
              <td>$1.25</td>
              <td>200K</td>
              <td>Lowest cost option</td>
            </tr>
            <tr>
              <td><strong>Claude Sonnet 4.5</strong></td>
              <td>$3.00</td>
              <td>$15.00</td>
              <td>200K (1M beta)</td>
              <td>Daily development work</td>
            </tr>
            <tr>
              <td><strong>Claude Sonnet 4</strong></td>
              <td>$3.00</td>
              <td>$15.00</td>
              <td>200K (1M beta)</td>
              <td>General-purpose coding</td>
            </tr>
            <tr>
              <td><strong>Claude Opus 4.5</strong></td>
              <td>$5.00</td>
              <td>$25.00</td>
              <td>200K</td>
              <td>Complex reasoning, critical tasks</td>
            </tr>
            <tr>
              <td><strong>Claude Opus 4.1</strong></td>
              <td>$15.00</td>
              <td>$75.00</td>
              <td>200K</td>
              <td>Legacy (higher cost)</td>
            </tr>
          </tbody>
        </table>

        <div class="highlight-box mb-6">
          <strong>Key Insight:</strong> Opus 4.5 represents a <strong>67% price reduction</strong> from Opus 4.1 ($5/$25 vs $15/$75) while maintaining flagship capabilities.
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="caching-pricing">Prompt Caching Pricing</h3>

        <table class="data-table">
          <thead>
            <tr>
              <th>Cache Operation</th>
              <th>Multiplier</th>
              <th>Opus 4.5</th>
              <th>Sonnet 4.5</th>
              <th>Haiku 4.5</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Base Input</td>
              <td>1.0x</td>
              <td>$5.00/MTok</td>
              <td>$3.00/MTok</td>
              <td>$1.00/MTok</td>
            </tr>
            <tr>
              <td>5-min Cache Write</td>
              <td>1.25x</td>
              <td>$6.25/MTok</td>
              <td>$3.75/MTok</td>
              <td>$1.25/MTok</td>
            </tr>
            <tr>
              <td>1-hour Cache Write</td>
              <td>2.0x</td>
              <td>$10.00/MTok</td>
              <td>$6.00/MTok</td>
              <td>$2.00/MTok</td>
            </tr>
            <tr>
              <td>Cache Read/Refresh</td>
              <td>0.1x</td>
              <td>$0.50/MTok</td>
              <td>$0.30/MTok</td>
              <td>$0.10/MTok</td>
            </tr>
          </tbody>
        </table>

        <div class="formula-box">
          <strong>Caching Savings Example (Sonnet 4.5):</strong><br>
          First request:  3,500 tokens x $3.75/M = $0.013 (cache write)<br>
          Next 4 requests: 3,500 tokens x $0.30/M = $0.001 each (cache read)<br>
          Total: $0.017<br><br>
          Without caching: 5 x 3,500 x $3.00/M = $0.053<br>
          <strong>Savings: 68%</strong>
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="subscription-pricing">Subscription Plans</h3>

        <table class="data-table">
          <thead>
            <tr>
              <th>Plan</th>
              <th>Monthly Cost</th>
              <th>Usage vs Pro</th>
              <th>Target User</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Free</strong></td>
              <td>$0</td>
              <td>Baseline</td>
              <td>Evaluation</td>
            </tr>
            <tr>
              <td><strong>Pro</strong></td>
              <td>$20</td>
              <td>5x Free</td>
              <td>Regular developers</td>
            </tr>
            <tr>
              <td><strong>Max 5x</strong></td>
              <td>$100</td>
              <td>5x Pro (25x Free)</td>
              <td>Power users</td>
            </tr>
            <tr>
              <td><strong>Max 20x</strong></td>
              <td>$200</td>
              <td>20x Pro (100x Free)</td>
              <td>Heavy automation</td>
            </tr>
            <tr>
              <td><strong>Team</strong></td>
              <td>$30/user/month</td>
              <td>5-seat minimum</td>
              <td>Pooled usage</td>
            </tr>
            <tr>
              <td><strong>Enterprise</strong></td>
              <td>Custom</td>
              <td>Custom limits</td>
              <td>Dedicated support</td>
            </tr>
          </tbody>
        </table>

        <div class="checkpoint-box">
          <div class="checkpoint-title">
            <i data-lucide="check-circle" class="w-4 h-4"></i>
            Checkpoint: Pricing Fundamentals
          </div>
          <div class="checkpoint-item">Current model pricing (Haiku &lt; Sonnet &lt; Opus)</div>
          <div class="checkpoint-item">Prompt caching savings (up to 90% on cached content)</div>
          <div class="checkpoint-item">Batch API discount (50% off)</div>
          <div class="checkpoint-item">Subscription tiers and when each makes sense</div>
        </div>
      </section>

      <!-- Section 5: PATTERN COSTS -->
      <section id="patterns" data-activity="patterns">
        <h2 class="section-title">
          <span class="section-number">5</span>
          Pattern Cost Analysis
        </h2>

        <p class="text-text-secondary mb-6">
          Different patterns have dramatically different cost profiles. Understanding these helps you budget and choose the right approach.
        </p>

        <h3 class="font-semibold text-lg mb-4">Single Session Costs</h3>

        <table class="data-table">
          <thead>
            <tr>
              <th>Session Type</th>
              <th>Token Range</th>
              <th>Cost Range (Sonnet 4.5)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Quick question</td>
              <td>1K-5K</td>
              <td>$0.01-$0.08</td>
            </tr>
            <tr>
              <td>Bug fix session</td>
              <td>10K-30K</td>
              <td>$0.15-$0.50</td>
            </tr>
            <tr>
              <td>Feature implementation</td>
              <td>50K-100K</td>
              <td>$0.75-$1.80</td>
            </tr>
            <tr>
              <td>Heavy refactoring</td>
              <td>100K-200K</td>
              <td>$1.80-$3.60</td>
            </tr>
          </tbody>
        </table>

        <h3 class="font-semibold text-lg mb-4 mt-8">Ralph Loop Costs</h3>

        <table class="data-table">
          <thead>
            <tr>
              <th>Loop Configuration</th>
              <th>Per Iteration</th>
              <th>10 Iterations</th>
              <th>50 Iterations</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Small codebase, focused task</td>
              <td>$0.50-$2</td>
              <td>$5-$20</td>
              <td>$25-$100</td>
            </tr>
            <tr>
              <td>Medium codebase, complex task</td>
              <td>$2-$5</td>
              <td>$20-$50</td>
              <td>$100-$250</td>
            </tr>
            <tr>
              <td>Large codebase, autonomous</td>
              <td>$5-$15</td>
              <td>$50-$150</td>
              <td>$250-$750</td>
            </tr>
          </tbody>
        </table>

        <h3 class="font-semibold text-lg mb-4 mt-8">Multi-Agent Orchestration Costs</h3>

        <table class="data-table">
          <thead>
            <tr>
              <th>Architecture</th>
              <th>Agents</th>
              <th>Per-Session</th>
              <th>Daily Estimate</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Basic orchestrator + 2 workers</td>
              <td>3</td>
              <td>$3-$10</td>
              <td>$15-$50</td>
            </tr>
            <tr>
              <td>Task router + specialists</td>
              <td>4-6</td>
              <td>$10-$30</td>
              <td>$50-$150</td>
            </tr>
            <tr>
              <td>Full Gas Town (Mayor, Deacon, Dogs)</td>
              <td>5-10+</td>
              <td>$30-$100</td>
              <td>$150-$500</td>
            </tr>
            <tr>
              <td>Personal Panopticon (8 domains)</td>
              <td>8+</td>
              <td>$20-$80</td>
              <td>$100-$400</td>
            </tr>
          </tbody>
        </table>

        <div class="highlight-box">
          <strong>Token Savings Techniques:</strong><br>
          - Multi-agent Ralph loop claims <strong>95% token savings</strong> through efficient coordination<br>
          - Claude-Flow reports <strong>32.3% token reduction</strong> through context management<br>
          - Programmatic tool calling: <strong>37% reduction</strong> by keeping intermediate results out of context
        </div>
      </section>

      <!-- Section 6: GOTCHAS -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Gotchas
        </h2>

        <p class="text-text-secondary mb-6">
          Real cost surprises you'll hit, with concrete numbers and fixes:
        </p>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Unexpected cost spike
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Daily cost jumped from $5 to $50+. Budget consumed unexpectedly fast.</div>
          <div class="gotcha-detail"><strong>Common Causes:</strong></div>
          <div class="gotcha-detail">1. Runaway Ralph loop - No iteration limit, ran overnight</div>
          <div class="gotcha-detail">2. Large file reads - Reading entire codebases into context</div>
          <div class="gotcha-detail">3. Wrong model selection - Using Opus for simple tasks</div>
          <div class="gotcha-detail">4. Cache invalidation - Same prompts re-cached repeatedly</div>
          <div class="gotcha-detail"><strong>Prevention:</strong> Set MAX_ITERATIONS on all loops. Use <code>/context</code> to monitor. Set workspace spending limits.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Hit rate limit unexpectedly
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> "Rate limit exceeded" errors. Session pauses mid-work.</div>
          <div class="gotcha-detail"><strong>Common Causes:</strong></div>
          <div class="gotcha-detail">1. Parallel agents without coordination</div>
          <div class="gotcha-detail">2. Rapid successive requests without delays</div>
          <div class="gotcha-detail">3. Token burst from large file operations</div>
          <div class="gotcha-detail">4. Shared API key across team</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Add <code>sleep 5</code> between iterations. Stagger parallel agents with random delays. Use separate API keys per developer.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Cost unpredictable between sessions
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Same task costs $0.50 one day, $5.00 the next. No pattern.</div>
          <div class="gotcha-detail"><strong>Common Causes:</strong></div>
          <div class="gotcha-detail">1. Context size variation - Different starting conditions</div>
          <div class="gotcha-detail">2. Cache efficiency - Cold cache vs warm cache</div>
          <div class="gotcha-detail">3. Model drift - Claude taking different approaches</div>
          <div class="gotcha-detail">4. Retry loops - Hidden failures triggering retries</div>
          <div class="gotcha-detail"><strong>Tracking:</strong> Log <code>/context</code> at start, <code>/cost</code> at end. Track correlation over time.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Subscription doesn't match usage pattern
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Pro subscription but hitting 5-hour limits. Max subscription feels wasted.</div>
          <div class="gotcha-detail"><strong>Decision Framework:</strong></div>
          <div class="gotcha-detail">&lt;2 hours/day: Pro ($20)</div>
          <div class="gotcha-detail">2-4 hours bursts: Pro + API hybrid</div>
          <div class="gotcha-detail">4-8 hours steady: Team or Max ($100-200)</div>
          <div class="gotcha-detail">Heavy automation: API direct</div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          These are fundamental tensions in cost management, not bugs to fix:
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            The Productivity Paradox
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Individual developer gains don't automatically translate to organizational gains.</div>
          <div class="hard-detail"><strong>The numbers:</strong> +98% PR throughput, but +91% review time. +21% tasks completed, but delivery velocity "largely unchanged."</div>
          <div class="hard-detail"><strong>Root cause:</strong> Bottleneck shifts from production to review. Teams generate more code but create downstream pressure.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Track quality metrics alongside quantity. Factor review time into ROI calculations. Don't optimize for metrics that shift the bottleneck.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Cost vs. Quality Trade-off
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Cheaper models make more mistakes. But mistakes waste developer time, which is more expensive than tokens.</div>
          <div class="hard-detail"><strong>The dilemma:</strong> Use Haiku and save $4/session but spend 30 minutes fixing its mistakes? Or use Opus and spend the $4 but get it right first time?</div>
          <div class="hard-detail"><strong>Mitigation:</strong> The answer varies by task. Match model to task complexity. "Haiku for setup, Sonnet for builds, Opus for reviews" is the heuristic.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            ROI Measurement Timeline
          </div>
          <div class="hard-detail"><strong>The tension:</strong> ROI takes 6 months to measure meaningfully, but budgets are set quarterly.</div>
          <div class="hard-detail"><strong>The phases:</strong> 2-4 weeks learning curve (productivity drop), 2-3 months pattern stabilization, 6 months ROI confidence.</div>
          <div class="hard-detail"><strong>Warning:</strong> Short-term measurements during learning curves produce misleading negative results. Don't cut costs during the learning phase.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Hidden Token Consumers
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Tools like Playwright MCP, Computer Use, and extended thinking burn tokens invisibly.</div>
          <div class="hard-detail"><strong>The numbers:</strong> Computer Use adds 735 tokens + screenshots per action. Text Editor adds 700 tokens overhead. Web Search costs $10 per 1,000 searches.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Use community monitoring tools (CC Usage, ccusage.com). Anthropic hides subscription usage stats, so external tracking is essential.</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO USE -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Use / When Not
        </h2>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              USE SUBSCRIPTION WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Predictable daily usage (4+ hours)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Don't need fine-grained model control</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Team pooled usage makes sense</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Want simplified billing</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Usage would exceed $100-200/month API</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              USE API INSTEAD WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Variable/bursty usage patterns</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Need model selection per task</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Need Batch API (50% discount)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Need transparent usage tracking</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Multi-agent orchestration (separate keys)</span>
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4">Quick Reference: Daily Cost Expectations</h3>

        <table class="data-table">
          <thead>
            <tr>
              <th>User Type</th>
              <th>Daily Cost</th>
              <th>Monthly Cost</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Light user</td>
              <td>$1-$3</td>
              <td>$20-$60</td>
            </tr>
            <tr>
              <td>Moderate user</td>
              <td>$3-$6</td>
              <td>$60-$120</td>
            </tr>
            <tr>
              <td>Power user</td>
              <td>$6-$12</td>
              <td>$120-$250</td>
            </tr>
            <tr>
              <td>Heavy automation</td>
              <td>$12-$30+</td>
              <td>$250-$600+</td>
            </tr>
          </tbody>
        </table>

        <h3 class="font-semibold text-lg mb-4 mt-8">Emergency Cost Control</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># STOP: Kill all running Claude processes immediately</span>
pkill -f <span class="string">"claude"</span>
ps aux | grep claude  <span class="comment"># Verify none running</span>

<span class="comment"># ASSESS: Check what got spent (in a new Claude session)</span>
/cost

<span class="comment"># PREVENT: For Ralph loops, always use:</span>
<span class="variable">MAX_ITERATIONS</span>=<span class="number">10</span>  <span class="comment"># Never unlimited</span>

<span class="comment"># LIMIT: Set workspace limits in Claude Console</span>
<span class="comment"># console.anthropic.com -&gt; Workspaces -&gt; Spending Limits</span>

<span class="comment"># BUDGET: Set daily limits in CLAUDE.md:</span>
<span class="comment">## Cost Guardrails</span>
<span class="comment">- Maximum session cost: $5</span>
<span class="comment">- Check /cost every 30 minutes</span>
<span class="comment">- If &gt;60% of daily budget, switch to Haiku</span></pre>
        </div>

        <div class="checkpoint-box">
          <div class="checkpoint-title">
            <i data-lucide="check-circle" class="w-4 h-4"></i>
            Optimization Checklist
          </div>
          <div class="checkpoint-item">Using appropriate model for task complexity</div>
          <div class="checkpoint-item">Leveraging prompt caching for repeated contexts</div>
          <div class="checkpoint-item">Resetting context before degradation</div>
          <div class="checkpoint-item">Batch processing non-urgent large jobs</div>
          <div class="checkpoint-item">Monitoring with <code>/cost</code> command</div>
          <div class="checkpoint-item">Tracking cache efficiency ratio (target 30:1+)</div>
        </div>
      </section>

    