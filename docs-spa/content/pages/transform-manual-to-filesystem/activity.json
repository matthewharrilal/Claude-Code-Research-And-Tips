{
  "items": [
    {
      "id": "inv-1",
      "type": "inversion",
      "linkedSection": "essence",
      "title": "What if human memory were infinite?",
      "content": "<strong>You'd design:</strong> Keep everything in your head. No files. No overhead.<br>\n          <strong>Why this fails:</strong> Your brain is limited. Context windows are finite. Sessions end.<br>\n          <strong>Hidden constraint revealed:</strong> Filesystem state compensates for biological and technological memory limits."
    },
    {
      "id": "min-2",
      "type": "minimal",
      "linkedSection": "essence",
      "title": "The irreducible core",
      "content": "One file: <code style=\"background: #f4f4f5; padding: 2px 6px; border-radius: 4px; font-size: 12px;\">AGENTS.md</code><br>\n          <strong>Essential:</strong> Persistent patterns that survive sessions.<br>\n          <strong>Everything else:</strong> Refinement for different state lifecycles."
    },
    {
      "id": "inv-3",
      "type": "invariant",
      "linkedSection": "essence",
      "title": "INV-2: External state over internal memory",
      "content": "This transformation IS the invariant made concrete. Ralph, Gas Town, CC Mirror all require external state. This document teaches you how to build it."
    },
    {
      "id": "ana-4",
      "type": "analogy",
      "linkedSection": "core",
      "title": "Filesystem State = Database for Humans",
      "content": "Your brain = Application memory (fast, volatile)<br>\n          progress.txt = Session storage (survives page refresh)<br>\n          prd.json = Relational DB (structured, queryable)<br>\n          AGENTS.md = Knowledge graph (permanent, cross-session)<br><br>\n          <em>If you've built apps with persistent storage, you understand this transformation.</em>"
    },
    {
      "id": "grad-5",
      "type": "gradient",
      "linkedSection": "core",
      "title": "How knowledge loss compounds",
      "content": "<strong>Session 1:</strong> Discover bcrypt needs 12 rounds (the hard way)<br>\n          <strong>Session 2:</strong> Forget, use default 10 rounds<br>\n          <strong>Session 3:</strong> Debug production auth issues<br>\n          <strong>Session 4:</strong> Rediscover bcrypt needs 12 rounds<br><br>\n          <em>Without persistence, you're running in circles.</em>"
    },
    {
      "id": "eff-6",
      "type": "effect",
      "linkedSection": "core",
      "title": "Compounding returns over time",
      "content": "Session 1: Learn A, write to AGENTS.md<br>\n          Session 2: Read A, learn B, write B<br>\n          Session 3: Read A+B, learn C<br>\n          Session N: Know A through N-1, highly effective<br><br>\n          <strong>Each session more productive than the last.</strong>"
    },
    {
      "id": "war-7",
      "type": "warstory",
      "linkedSection": "core",
      "title": "Matt Pocock: \"Files carry state between sessions\"",
      "content": "This is the Ralph mindset origin. Matt discovered that treating files as the source of truth (not Claude's memory) enabled overnight autonomous development."
    },
    {
      "id": "con-8",
      "type": "constraint",
      "linkedSection": "decisions",
      "title": "One constraint, FIVE decisions",
      "content": "<strong>ROOT:</strong> Context windows are finite and ephemeral<br>\n          -&gt; State must persist externally<br>\n          -&gt; Multiple state files for different lifecycles<br>\n          -&gt; Append-only for session logs<br>\n          -&gt; Commit state with code<br>\n          -&gt; Read state at session start"
    },
    {
      "id": "vio-9",
      "type": "violation",
      "linkedSection": "decisions",
      "title": "If you don't update state files",
      "content": "<strong>IF:</strong> Skip updating prd.json at session end<br>\n          <strong>THEN:</strong> Next session reads stale task states<br>\n          <strong>THEN:</strong> Claude works on completed tasks or misses blockers<br>\n          <strong>THEN:</strong> Wasted work compounds<br>\n          <strong>FINALLY:</strong> State diverges from reality, files become useless<br><br>\n          <em>The fix: Make updates mandatory, not optional.</em>"
    },
    {
      "id": "trade-10",
      "type": "tradeoff",
      "linkedSection": "decisions",
      "title": "Write Everything vs Write Selectively",
      "content": "<strong>Write everything:</strong> Nothing lost, but files bloat<br>\n          <strong>Write selectively:</strong> Clean files, but might miss something<br>\n          <strong>Middle ground:</strong> Write liberally, prune periodically<br><br>\n          <em>Heuristic: Default to writing (recoverable). Prune on schedule.</em>"
    },
    {
      "id": "exp-11",
      "type": "expertise",
      "linkedSection": "decisions",
      "title": "Understanding the three-file structure",
      "content": "<strong>Beginner:</strong> \"Why not one file?\" -&gt; Different lifecycles<br>\n          <strong>Intermediate:</strong> \"Which file for what?\" -&gt; Session vs permanent<br>\n          <strong>Advanced:</strong> \"When to archive?\" -&gt; 20KB threshold<br>\n          <strong>Staff:</strong> \"How to onboard others?\" -&gt; ONBOARDING.md<br>\n          <strong>Expert:</strong> \"Cross-pattern state?\" -&gt; prd.json = Gas Town inbox"
    },
    {
      "id": "comp-12",
      "type": "composition",
      "linkedSection": "files",
      "title": "Filesystem State + Git",
      "content": "<strong>Works:</strong> Extremely well. State files are version-controlled. History becomes memory.<br>\n          <strong>The benefit:</strong> <code>git log</code> shows the story. <code>git blame</code> explains why.<br>\n          <strong>Recommendation:</strong> Always commit state files with code. Never separately."
    },
    {
      "id": "ana-13",
      "type": "analogy",
      "linkedSection": "files",
      "title": "These files appear in every pattern",
      "content": "<strong>progress.txt</strong> = Ralph's learning log<br>\n          <strong>prd.json</strong> = Ralph's task board = Gas Town's inbox<br>\n          <strong>AGENTS.md</strong> = Permanent patterns = CC Mirror's shared memory<br><br>\n          <em>Master this structure once, use it everywhere.</em>"
    },
    {
      "id": "inv-14",
      "type": "inversion",
      "linkedSection": "files",
      "title": "What if all state were in one file?",
      "content": "<strong>You'd design:</strong> state.md with everything in sections<br>\n          <strong>Why this fails:</strong> Different lifecycles need different handling. Session logs need archiving. Task states need machine-readability. Patterns need permanence.<br>\n          <strong>Hidden constraint revealed:</strong> State separation IS lifecycle management."
    },
    {
      "id": "fron-15",
      "type": "frontier",
      "linkedSection": "files",
      "title": "UNSOLVED: Automatic pattern extraction",
      "content": "<strong>The question:</strong> Can Claude automatically identify which progress.txt entries should graduate to AGENTS.md?<br>\n          <strong>Why it's hard:</strong> Requires judgment about permanence vs transience.<br>\n          <strong>Current practice:</strong> Manual review. Human decides what's permanent."
    },
    {
      "id": "hor-16",
      "type": "horizon",
      "linkedSection": "path",
      "title": "How perception changes over sessions",
      "content": "<strong>Session 1:</strong> \"Writing to files feels like overhead\"<br>\n          <strong>Session 3:</strong> \"Wait, I remember discovering this before...\"<br>\n          <strong>Session 5:</strong> \"The files knew what I forgot\"<br>\n          <strong>Session 10:</strong> \"I can't imagine working without this\"<br><br>\n          <em>Don't judge filesystem state by session 1.</em>"
    },
    {
      "id": "vio-17",
      "type": "violation",
      "linkedSection": "path",
      "title": "If Claude doesn't read state at start",
      "content": "<strong>IF:</strong> Session starts without reading state files<br>\n          <strong>THEN:</strong> Claude has no context, asks basic questions<br>\n          <strong>THEN:</strong> You re-explain everything manually<br>\n          <strong>THEN:</strong> You're back to manual context<br>\n          <strong>FINALLY:</strong> State files exist but provide no value<br><br>\n          <em>The fix: CLAUDE.md must mandate reading state files FIRST.</em>"
    },
    {
      "id": "war-18",
      "type": "warstory",
      "linkedSection": "path",
      "title": "Boris Cherny: \"Fresh context beats extended sessions\"",
      "content": "The Claude Code creator discovered that starting fresh with state files produces better results than trying to maintain long sessions. This is why the read-work-write cycle works."
    },
    {
      "id": "inf-19",
      "type": "inflection",
      "linkedSection": "path",
      "title": "When state files become essential",
      "content": "<strong>1 session:</strong> Overhead (not worth it)<br>\n          <strong>2-3 sessions:</strong> Break-even (slight benefit)<br>\n          <strong>5+ sessions:</strong> Essential (can't work without)<br>\n          <strong>10+ sessions:</strong> Institutional (defines how you work)<br><br>\n          <strong>THE INFLECTION:</strong> ~3 sessions<br>\n          <em>If you expect &lt;3 sessions, skip state files.</em>"
    },
    {
      "id": "grad-20",
      "type": "gradient",
      "linkedSection": "gotchas",
      "title": "How progress.txt bloat degrades quality",
      "content": "<strong>0-10KB:</strong> Pure benefit (all learnings useful)<br>\n          <strong>10-20KB:</strong> Diminishing returns (some noise)<br>\n          <strong>20-30KB:</strong> Neutral (reading cost = benefit)<br>\n          <strong>30KB+:</strong> Net negative (context wasted on history)<br><br>\n          <em>Critical: The degradation is invisible until quality drops.</em>"
    },
    {
      "id": "trade-21",
      "type": "tradeoff",
      "linkedSection": "gotchas",
      "title": "Archive Early vs Archive Late",
      "content": "<strong>Archive early:</strong> Clean files, but might lose useful history<br>\n          <strong>Archive late:</strong> Complete history, but bloated files<br>\n          <strong>The dilemma:</strong> No perfect timing. Varies by project.<br><br>\n          <em>Heuristic: Archive when file &gt; 20KB OR when quality drops.</em>"
    },
    {
      "id": "eff-22",
      "type": "effect",
      "linkedSection": "gotchas",
      "title": "JSON corruption cascades",
      "content": "One invalid comma in prd.json -&gt; Claude can't read task state -&gt; Claude doesn't know what to work on -&gt; Wasted session -&gt; Manual recovery required.<br><br>\n          <strong>Prevention beats cure:</strong> Add JSON validation to pre-commit hooks."
    },
    {
      "id": "exp-23",
      "type": "expertise",
      "linkedSection": "gotchas",
      "title": "Debugging state file issues",
      "content": "<strong>Beginner:</strong> \"Files exist but Claude ignores them\" -&gt; Check CLAUDE.md instructions<br>\n          <strong>Intermediate:</strong> \"State is stale\" -&gt; Check session-end discipline<br>\n          <strong>Advanced:</strong> \"Files are bloated\" -&gt; Archive strategy<br>\n          <strong>Staff:</strong> \"Conflicting patterns\" -&gt; Periodic review process<br>\n          <strong>Expert:</strong> \"State/code divergence\" -&gt; Commit together, always"
    },
    {
      "id": "trade-24",
      "type": "tradeoff",
      "linkedSection": "hard",
      "title": "Persistence vs Privacy",
      "content": "<strong>Full persistence:</strong> Everything captured, nothing lost<br>\n          <strong>Selective persistence:</strong> Only non-sensitive, but gaps<br>\n          <strong>The dilemma:</strong> State files create artifacts. Some work is confidential.<br><br>\n          <em>Heuristic: Don't use filesystem state for highly confidential work. Or use encrypted state files.</em>"
    },
    {
      "id": "con-25",
      "type": "constraint",
      "linkedSection": "hard",
      "title": "Why state file hygiene is hard",
      "content": "<strong>ROOT:</strong> Maintenance is boring<br>\n          -&gt; Hygiene gets skipped<br>\n          -&gt; Files drift from reality<br>\n          -&gt; Trust in files decreases<br>\n          -&gt; People stop reading them<br>\n          -&gt; Files become useless<br><br>\n          <em>Discipline compounds. So does neglect.</em>"
    },
    {
      "id": "war-26",
      "type": "warstory",
      "linkedSection": "hard",
      "title": "Ryan Carson: Task decomposition learning curve",
      "content": "\"First few Ralph runs, my tasks were too big. Iteration would time out mid-task. Learned to decompose by reviewing failed progress.txt entries. Now my tasks fit in one context window.\"<br><br>\n          <em>The state files taught him task sizing.</em>"
    },
    {
      "id": "inv-27",
      "type": "inversion",
      "linkedSection": "when",
      "title": "What if you used state files for a one-off script?",
      "content": "<strong>You'd have:</strong> 3 state files for a 20-line script<br>\n          <strong>Why this fails:</strong> Setup overhead exceeds benefit. You'll never return to update them.<br>\n          <strong>Hidden constraint revealed:</strong> Filesystem state has minimum viable project size."
    },
    {
      "id": "alt-28",
      "type": "alternative",
      "linkedSection": "when",
      "title": "If filesystem state isn't right for you",
      "content": "<strong>Single session work?</strong> -&gt; Manual context is fine<br>\n          <strong>Learning/exploration?</strong> -&gt; No state needed<br>\n          <strong>Team collaboration?</strong> -&gt; Add ONBOARDING.md<br>\n          <strong>Autonomous development?</strong> -&gt; This is the prerequisite for Ralph"
    },
    {
      "id": "hor-29",
      "type": "horizon",
      "linkedSection": "when",
      "title": "When to start using filesystem state",
      "content": "<strong>Day 1:</strong> \"Too much setup for this small project\"<br>\n          <strong>Day 3:</strong> \"Wait, this project is bigger than I thought\"<br>\n          <strong>Day 5:</strong> \"I wish I had started with state files\"<br>\n          <strong>Day 7:</strong> \"Retrofitting state files to existing project\"<br><br>\n          <em>Heuristic: If you might need &gt;3 sessions, start with state files.</em>"
    }
  ]
}