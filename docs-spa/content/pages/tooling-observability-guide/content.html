

      <!-- Section 1: ESSENCE -->
      <section id="essence" data-activity="essence">
        <div class="essence-box">
          <div class="essence-label">Essence (15 words)</div>
          <div class="essence-text">Observability transforms the invisible agent control plane into actionable, color-coded displays enabling real-time intervention.</div>
        </div>
      </section>

      <!-- Section 2: CORE ABSTRACTION + IMPLEMENTATION -->
      <section id="core-abstraction" data-activity="core">
        <h2 class="section-title">
          <span class="section-number">2</span>
          The Core Abstraction
        </h2>

        <div class="core-abstraction">
          <div class="core-philosophy">"Agents are black boxes by default. Observability is the glass wall that makes their work visible."</div>

          <div class="core-code">
            <button class="copy-btn" onclick="copyCode(this, 'VISIBILITY = f(context%, tools, agents, progress, git)')">
              <i data-lucide="copy" class="w-3 h-3"></i>
              Copy
            </button>
            <code>VISIBILITY = f(context%, tools, agents, progress, git)</code>
          </div>

          <div class="core-anchor">That's the fundamental equation. Everything else is rendering.</div>
        </div>

        <p class="text-text-secondary mb-6">
          Agent systems operate as opaque processes that consume tokens, make decisions, and produce outputs with minimal visibility into their internal reasoning. Unlike traditional software where you can set breakpoints and step through code, AI agents require external instrumentation.
        </p>

        <div class="diagram-container">
                    POWER PLANT CONTROL ROOM
    +---------------------------------------------------+
    |                                                     |
    |  o o o    Reactor Core         [===========]       |
    |  * * o    Temperature: 342C    [NOMINAL   ]       |
    |  o * o    Pressure: 15.2 MPa   [WARNING   ]       |
    |           Coolant Flow: 98%    [NOMINAL   ]       |
    |                                                     |
    +---------------------------------------------------+
                            |
                    CLAUDE CODE OBSERVABILITY
    +---------------------------------------------------+
    |                                                     |
    |  G G Y   Agent Health         ||||||||..        |
    |  Context: 72%                    [CAUTION  ]       |
    |  Tools Running: 2                [NORMAL   ]       |
    |  Task Progress: 4/7              [ON TRACK ]       |
    |                                                     |
    +---------------------------------------------------+
        </div>

        <p class="text-text-secondary mb-6">
          The Control Room mental model: you don't watch every gauge constantly. Color coding draws attention to problems. Trends matter more than absolute values. Alarms exist so you can look away.
        </p>
      </section>

      <!-- Section 3: DESIGN DECISIONS -->
      <section id="why-real-time" data-activity="decisions">
        <h2 class="section-title">
          <span class="section-number">3</span>
          Design Decisions
        </h2>

        <div class="decision-box">
          <div class="decision-why">WHY REAL-TIME MONITORING?</div>
          <div class="decision-reasoning">
            Context degrades invisibly. Quality drops without warning. By the time you notice problems in output, the damage is compounded across multiple iterations. Real-time visibility enables intervention before compound failure.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Glance at context percentage every few minutes. Yellow (70%+) means monitor closely. Red (85%+) means act now. The cost of checking is seconds; the cost of not checking is hours of wasted work.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-color-coding">
          <div class="decision-why">WHY COLOR CODING?</div>
          <div class="decision-reasoning">
            Humans process colors pre-attentively (before conscious thought). A red dot in a sea of green pops out instantly. Numbers require parsing. When monitoring 10+ agents, color is the only way to scan for problems in sub-second time.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Trust the colors. Green means continue. Yellow means prepare to act. Red means act now. Train yourself to respond to colors, not to read every number. This scales; reading numbers doesn't.
            </div>
          </div>
        </div>

        <div class="decision-box" id="why-layered">
          <div class="decision-why">WHY LAYERED TOOLS?</div>
          <div class="decision-reasoning">
            Different agent counts require different visibility strategies. A single session needs Claude HUD (terminal statusline). Five parallel agents need tmux splits. Ten+ agents need Gas Town GUI (RTS-style spatial view). One tool cannot serve all scales.
          </div>
          <div class="decision-implication">
            <div class="decision-implication-label">What this means for you</div>
            <div class="text-text-secondary text-sm">
              Match tool to agent count. 1-3 agents: HUD + tmux. 5-10 agents: Add rpai. 10+ agents: Use Gas Town GUI. Over-tooling wastes setup time; under-tooling causes cognitive overload.
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4: TOOL STRUCTURE -->
      <section id="tool-structure" data-activity="tools">
        <h2 class="section-title">
          <span class="section-number">4</span>
          The Tool Structure
        </h2>

        <div class="diagram-container">
                    Claude Code Observability Stack

    +-------------------------------------------------------------+
    |                   VISIBILITY LAYER                           |
    |                                                              |
    |   Terminal-Based              Browser-Based                  |
    |   +------------+              +------------+                |
    |   | Claude HUD |              | Gas Town   |                |
    |   |            |              |   GUI      |                |
    |   | * Context% |              | * RTS Map  |                |
    |   | * Tools    |              | * Units    |                |
    |   | * Agents   |              | * Commands |                |
    |   | * Todos    |              | * Minimap  |                |
    |   +-----+------+              +-----+------+                |
    |         |                           |                        |
    |         v                           v                        |
    |   +-----------------------------------------------------+   |
    |   |                ORCHESTRATION LAYER                   |   |
    |   |                                                      |   |
    |   |    Ralph Loops    CC-Mirror    Gas Town Backend      |   |
    |   |                                                      |   |
    |   +-----------------------------------------------------+   |
    |                              |                               |
    |                              v                               |
    |   +-----------------------------------------------------+   |
    |   |                  EXECUTION LAYER                     |   |
    |   |                                                      |   |
    |   |      Claude Code Sessions (1 to N parallel)          |   |
    |   |                                                      |   |
    |   +-----------------------------------------------------+   |
    +-------------------------------------------------------------+
        </div>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="claude-hud">Claude HUD - Terminal Session Visibility</h3>

        <p class="text-text-secondary mb-4">
          A plugin that renders real-time session data in your terminal statusline. The most direct solution for Claude Code visibility.
        </p>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Installation</span>
/plugin marketplace add jarrodwatts/claude-hud
/plugin install claude-hud
/claude-hud:setup</pre>
        </div>

        <p class="text-text-secondary mb-4">Sample output:</p>

        <div class="code-block">
          <pre>[Opus 4.5] <span class="string">||||||||..</span> 35% | 1 MCPs | <span class="variable">5m</span>
<span class="string">V</span> Read x2 | <span class="string">V</span> Edit x1 | <span class="variable">o</span> Bash: npm run build
<span class="comment">* Implementing auth middleware | 1/4 complete</span></pre>
        </div>

        <table class="tool-table">
          <thead>
            <tr>
              <th>Context Level</th>
              <th>Color</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>0-69%</td>
              <td><span class="color-indicator green">Green</span></td>
              <td>Safe operating zone, continue working</td>
            </tr>
            <tr>
              <td>70-84%</td>
              <td><span class="color-indicator yellow">Yellow</span></td>
              <td>Monitor closely, consider compacting soon</td>
            </tr>
            <tr>
              <td>85-100%</td>
              <td><span class="color-indicator red">Red</span></td>
              <td>Quality degrading, compact or wrap up now</td>
            </tr>
          </tbody>
        </table>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="gas-town-gui">Gas Town GUI - RTS Factory Interface</h3>

        <p class="text-text-secondary mb-4">
          A browser-based graphical interface that transforms Gas Town's multi-agent orchestration into an interactive Real-Time Strategy game experience. Built with Phaser 3, it renders your agent factory as an isometric map.
        </p>

        <div class="diagram-container">
+----------------------------------------------------------------------------+
| D 45,234 | [] 12 | [_] 3 | MY GAS TOWN                          [-][o][x] |
+----------------------------------------------------------------------------+
|                                                                            |
|                    oooo                                                     |
|                   o####o         &lt;- Town Hall                                |
|                    oooo                                                     |
|                                                                            |
|        [G]           [G]           [R]          &lt;- Units (polecats)        |
|      [Alice]       [Bob]       [Carol]                                      |
|                                                                            |
|   ooo                              ooo                                    |
|  o===o  &lt;- Refinery                o...o  &lt;- Oil Rig                        |
|   ooo                              ooo                                    |
|                                                                            |
|                 [G]            [B]                                         |
|               [Dave]        [Eve]                                           |
|                           (idle)                                           |
|                                                                            |
+----------------------------------------------------------------------------+
| Selected: Carol (Polecat)                         +--------------------+ |
| Status: ERROR - TypeScript check failed           | . .   .    [Assign]| |
| Task: US-007 Implement checkout flow              |   . o .    [Logs  ]| |
| Time: 23m 45s                                     | .     . .  [Stop  ]| |
|                                                   |   +-+      [Mail  ]| |
|                                                   |   +-+              | |
|                                                   +--------------------+ |
+----------------------------------------------------------------------------+
        </div>

        <table class="tool-table">
          <thead>
            <tr>
              <th>Color</th>
              <th>Status</th>
              <th>Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="color-indicator blue">Blue</span></td>
              <td>Idle</td>
              <td>Waiting for assignment, ready for work</td>
            </tr>
            <tr>
              <td><span class="color-indicator green">Green</span></td>
              <td>Working</td>
              <td>Processing a task, monitor progress</td>
            </tr>
            <tr>
              <td><span class="color-indicator red">Red</span></td>
              <td>Error</td>
              <td>Stuck or failed, needs investigation</td>
            </tr>
          </tbody>
        </table>

        <h3 class="font-semibold text-lg mb-4 mt-8" id="git-monitoring">Git-Based Monitoring - Durable State</h3>

        <p class="text-text-secondary mb-4">
          Git history provides the most durable form of agent observability. Changes persist across sessions and agent resets.
        </p>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Commit frequency (agent velocity)</span>
git log --oneline --since="1 hour ago" | wc -l

<span class="comment"># What changed in last iteration</span>
git diff HEAD~1

<span class="comment"># Recent activity</span>
git log --oneline -10

<span class="comment"># Uncommitted changes</span>
git status --short</pre>
        </div>
      </section>

      <!-- Section 5: PATH OF A METRIC -->
      <section id="path" data-activity="path">
        <h2 class="section-title">
          <span class="section-number">5</span>
          The Path of a Metric
        </h2>

        <p class="text-text-secondary mb-6">
          Follow a context percentage reading through the observability stack:
        </p>

        <div class="path-container">
          <div class="path-step">
            <div class="path-number">1</div>
            <div class="path-content">Claude Code runtime tracks token usage in session state</div>
          </div>
          <div class="path-step">
            <div class="path-number">2</div>
            <div class="path-content">Runtime emits JSON payload via stdin every ~300ms</div>
          </div>
          <div class="path-step">
            <div class="path-number">3</div>
            <div class="path-content">Claude HUD plugin receives and parses the payload</div>
          </div>
          <div class="path-step">
            <div class="path-number">4</div>
            <div class="path-content">Render engine calculates percentage: <code>(input + cache) / max_context</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">5</div>
            <div class="path-content">Color thresholds applied: 0-69% green, 70-84% yellow, 85%+ red</div>
          </div>
          <div class="path-step">
            <div class="path-number">6</div>
            <div class="path-content">Statusline updates with bar: <code>||||||||.. 35%</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">7</div>
            <div class="path-content">At 85%+, token breakdown appears: <code>Input: 145,234 / 200,000</code></div>
          </div>
          <div class="path-step">
            <div class="path-number">8</div>
            <div class="path-content">You glance at color, not number. Red triggers intervention.</div>
          </div>
          <div class="path-step">
            <div class="path-number">9</div>
            <div class="path-content">Intervention: <code>/compact</code> or fresh session or let Ralph iterate</div>
          </div>
          <div class="path-step">
            <div class="path-number">10</div>
            <div class="path-content">Next poll (300ms later) shows updated state</div>
          </div>
        </div>
      </section>

      <!-- Section 6: GOTCHAS -->
      <section id="gotchas" data-activity="gotchas">
        <h2 class="section-title">
          <span class="section-number">6</span>
          Gotchas
        </h2>

        <p class="text-text-secondary mb-6">
          Real problems you'll hit with observability tools, with concrete thresholds and fixes:
        </p>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            HUD not appearing in terminal
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Installed Claude HUD but statusline is empty or shows errors</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Plugin not properly activated, or terminal doesn't support ANSI colors</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Run <code>/claude-hud:setup</code> again. Check terminal: <code>echo -e "\e[32mGreen\e[0m"</code></div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Colors showing wrong thresholds
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Context bar shows yellow at 40% when it should be green</div>
          <div class="gotcha-detail"><strong>Cause:</strong> HUD calculates against full context window, you may have CLAUDE.md consuming tokens</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Check config counts in HUD. Large CLAUDE.md files reduce effective context.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Gas Town GUI units not updating
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Colors stay stale, new agents don't appear on map</div>
          <div class="gotcha-detail"><strong>Polling interval:</strong> 3 seconds. Wait one full cycle before diagnosing.</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Check browser console for API errors. Verify Gas Town backend: <code>curl http://localhost:8080/api/status</code></div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Information overload at scale
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Too much data, can't focus on what matters with 10+ agents</div>
          <div class="gotcha-detail"><strong>Cause:</strong> All features enabled, not tuned for workflow</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Use Gas Town GUI minimap for overview. Click only on red dots. Trust color abstraction.</div>
        </div>

        <div class="gotcha-box">
          <div class="gotcha-title">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            Missed critical alert overnight
          </div>
          <div class="gotcha-detail"><strong>Symptom:</strong> Agent was stuck for hours, no notification received</div>
          <div class="gotcha-detail"><strong>Cause:</strong> Alert webhook not configured or not working</div>
          <div class="gotcha-detail"><strong>Fix:</strong> Test alerts BEFORE every overnight run: <code>curl -X POST $WEBHOOK_URL -d '{"text":"test"}'</code></div>
        </div>
      </section>

      <!-- Section 7: WHAT'S HARD -->
      <section id="hard" data-activity="hard">
        <h2 class="section-title">
          <span class="section-number">7</span>
          What's Hard
        </h2>

        <p class="text-text-secondary mb-6">
          Fundamental tensions in agent observability with no perfect solutions:
        </p>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Cognitive Load vs. Visibility Depth
          </div>
          <div class="hard-detail"><strong>The tension:</strong> More metrics mean more information, but also more cognitive load. At some point, observability becomes the work instead of enabling the work.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> You spend more time watching dashboards than reviewing agent output. You feel anxious when not monitoring.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Use color coding as primary signal. Only drill into numbers when colors indicate problems. Trust the abstraction layer.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Polling Latency vs. Real-Time
          </div>
          <div class="hard-detail"><strong>The tension:</strong> HUD polls every 300ms. GUI polls every 3 seconds. This is near-real-time, not actual real-time. Rapid tool sequences may appear batched.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> You see a completed state but missed the in-progress phase. Debugging fast failures is difficult.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Focus on trends over snapshots. For detailed debugging, use terminal logs. Accept that some granularity is lost.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Tool Overhead vs. Agent Simplicity
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Every monitoring tool adds setup time, maintenance burden, and potential failure points. The simplest system has no observability. The most observable system is complex.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> You spend 30 minutes setting up monitoring for a 10-minute task. Monitoring tools break and require debugging.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Scale tools to task duration. 10-minute task: just watch terminal. 2-hour task: add HUD. Overnight: full stack with alerts.</div>
        </div>

        <div class="hard-box">
          <div class="hard-title">
            <i data-lucide="flame" class="w-4 h-4"></i>
            Silent Failure Detection
          </div>
          <div class="hard-detail"><strong>The tension:</strong> Agents can appear green (working) while making no actual progress. Analysis paralysis, waiting for dependencies, or infinite planning loops produce no visible failures.</div>
          <div class="hard-detail"><strong>Symptoms:</strong> Agent has been "working" for 30 minutes with no commits. Output looks active but nothing is shipping.</div>
          <div class="hard-detail"><strong>Mitigation:</strong> Track commits, not just agent status. No commits in 10+ minutes = investigate. Add "stuck detection" to Ralph loops.</div>
        </div>
      </section>

      <!-- Section 8: WHEN TO USE -->
      <section id="when" data-activity="when">
        <h2 class="section-title">
          <span class="section-number">8</span>
          When to Use Which Tool
        </h2>

        <table class="tool-table mb-8">
          <thead>
            <tr>
              <th>Scenario</th>
              <th>Terminal Logs</th>
              <th>Claude HUD</th>
              <th>Gas Town GUI</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Single session, focused work</td>
              <td><span class="color-indicator green">Best</span></td>
              <td><span class="color-indicator green">Good</span></td>
              <td>Overkill</td>
            </tr>
            <tr>
              <td>Single session, need context awareness</td>
              <td>OK</td>
              <td><span class="color-indicator green">Best</span></td>
              <td>Overkill</td>
            </tr>
            <tr>
              <td>2-3 parallel agents</td>
              <td>OK</td>
              <td><span class="color-indicator green">Best</span></td>
              <td>OK</td>
            </tr>
            <tr>
              <td>5-10 parallel agents</td>
              <td>Difficult</td>
              <td>Limited</td>
              <td><span class="color-indicator green">Best</span></td>
            </tr>
            <tr>
              <td>10+ agents (factory)</td>
              <td>Impossible</td>
              <td>Limited</td>
              <td><span class="color-indicator green">Best</span></td>
            </tr>
            <tr>
              <td>Overnight unattended</td>
              <td>Need logging</td>
              <td>Need logging</td>
              <td><span class="color-indicator green">Best + alerts</span></td>
            </tr>
            <tr>
              <td>Debugging specific failure</td>
              <td><span class="color-indicator green">Best</span></td>
              <td>Helpful</td>
              <td>Context only</td>
            </tr>
          </tbody>
        </table>

        <div class="when-grid">
          <div class="when-use">
            <div class="when-title">
              <i data-lucide="check" class="w-5 h-5"></i>
              USE OBSERVABILITY WHEN
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Tasks run longer than 30 minutes (context rot becomes likely)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Running multiple agents in parallel (coordination failures invisible)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Overnight or unattended runs (can't manually watch output)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Cost-sensitive work (token consumption must stay in budget)</span>
            </div>
            <div class="when-item">
              <i data-lucide="check" class="w-4 h-4 flex-shrink-0"></i>
              <span>Complex multi-step tasks (failure in step 3 affects step 7)</span>
            </div>
          </div>

          <div class="when-not">
            <div class="when-title">
              <i data-lucide="x" class="w-5 h-5"></i>
              SKIP OBSERVABILITY WHEN
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Quick 5-minute tasks (setup time exceeds task time)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Interactive pair programming (you're watching anyway)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Exploratory debugging (need raw terminal output)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>Learning new patterns (complexity hinders understanding)</span>
            </div>
            <div class="when-item">
              <i data-lucide="x" class="w-4 h-4 flex-shrink-0"></i>
              <span>One-off tasks with no repeatability needs</span>
            </div>
          </div>
        </div>

        <h3 class="font-semibold text-lg mb-4">Quick Reference: Installation Commands</h3>

        <div class="code-block">
          <button class="copy-btn" onclick="copyCodeBlock(this)">
            <i data-lucide="copy" class="w-3 h-3"></i>
            Copy
          </button>
          <pre><span class="comment"># Claude HUD (terminal statusline)</span>
/plugin marketplace add jarrodwatts/claude-hud
/plugin install claude-hud
/claude-hud:setup

<span class="comment"># rpai (tmux multi-agent manager)</span>
cargo install rpai
rpai  <span class="comment"># run in any tmux session</span>

<span class="comment"># Gas Town GUI (browser RTS interface)</span>
cd gtgui &amp;&amp; npm install
npm run dev  <span class="comment"># development with hot reload</span></pre>
        </div>
      </section>

    