# 05 — COMPLETE ROADMAP: CD Through Full Migration

**Document:** Full timeline with phase breakdown, effort estimates, and the freeze line guarantee — UPDATED with two-track architecture and perceptual guardrails
**Scope:** Every step from CD initiation to full design system adoption
**Sources:** _SOURCE-BRIEF.md (Sections 9-10), 09-complete-roadmap.md (569 lines), 10-MIGRATION-SYNTHESIS.md (780 lines), pipeline-evolution research (5 files, 3,200 lines)

---

## THE DESTINATION IN ONE PARAGRAPH

The KortAI design system moves from validated research to fully adopted documentation through 9 phases spanning approximately **100-195 hours** across **12-22 sessions**. The first 7 phases (CD through Playbook Refinement) complete the design system, build migration infrastructure for TWO execution tracks, and validate both tracks through pilot testing. A non-negotiable freeze line then locks the system permanently. The final phase migrates all 75+ documentation pages using Track 1 (assembly, 45-90 min/page) for ~40-50% of pages and Track 2 (composition, 3-5 hrs/page) for ~50-60% of pages. Track 2 is THE critical bottleneck — genuine tension resolution through metaphor-driven composition cannot be parallelized like mechanical assembly. Every page will look different because different content types produce different attention topologies through the 3-way equivalence (AD-F-023). The result: 75 siblings who share DNA but have distinct faces.

---

## THE MASTER ROADMAP TABLE

| Phase | Name | Hours | Sessions | What It Produces |
|-------|------|-------|----------|------------------|
| A | **CD (Combination Dimension)** | 4-5 | 1-2 | 6 explorations, 15-25 CD-F findings, ACCUMULATED-IDENTITY-v3 (terminal), completeness gate, Track 1+2 validation |
| B | **Content Analysis + Track Classification** | 4-6 | 1 | 75-page inventory with Track 1 vs Track 2 classification, tension pre-screening, tentative metaphor candidates |
| C | **Component + Pattern Base Extraction** | 6-10 | 1-2 | ~400 lines Tier 1+2 CSS, compositional strategy library (~900 lines prose), pattern recognition guide |
| D | **Extraction Validation Pass** | 1-2 | 1 | 2-3 test pages validating extraction sufficiency, gap documentation, confidence report |
| E | **Migration Playbook v2** | 4-5 | 1 | Complete dual-track process: Track 1 assembly path + Track 2 composition path with tension-composition skill integration |
| F | **Pilot Migration** | 3-5 | 1 | 2-3 validated pages spanning both tracks, process proof, timing data (CRITICAL: Track 2 per-page estimate) |
| G | **Playbook Refinement** | 1-2 | 1 | Updated process incorporating pilot learnings, refined time estimates for BOTH tracks |
| | **FREEZE LINE** | | | Design system locked permanently |
| H | **Migration Track 1 (Assembly)** | 22-60 | 3-6 | 30-40 pages @ 45-90 min, mechanical assembly, parallelizable (6 agents simultaneously) |
| I | **Migration Track 2 (Composition)** | 105-225 | 9-19 | 35-45 pages @ 3-5 hrs, creative tension resolution, sequential bottleneck (2-3 agents max) |
| | **TOTAL** | **~150-325** | **16-31** | Complete design system adoption with dual-track migration |

---

## VISUAL FLOW

```
YOU ARE HERE
     |
     v
PHASE A: CD (Combination Dimension)                    ~4-5 hours
  |  6 explorations testing pattern combinations
  |  CD-006 = real-content pilot (validates both Track 1+2)
  |  15-25 CD-F findings (combination rules)
  |  ACCUMULATED-IDENTITY-v3 (TERMINAL -- no v4)
  |  HANDOFF-CD-TO-MIGRATION (includes Track classification decision tree)
  |  Completeness Gate: Track 1 AND Track 2 validated
  |
  v
PHASE B: Content Analysis + Track Classification      ~4-6 hours [MOVED FROM F]
  |  Inventory all 75+ docs-spa pages
  |  Classify Track 1 (assembly) vs Track 2 (composition)
  |  Pre-screen tension via Addition Test + BECAUSE test
  |  Assign tentative metaphor candidates for Track 2 pages
  |  Output guides Component Extraction priorities
  |
  |  [CRITICAL REORDERING: Analysis BEFORE Extraction]
  v
PHASE C: Component + Pattern Base Extraction          ~6-10 hours [SCOPE REDUCED]
  |  Extract ~400 lines Tier 1+2 CSS (atoms + molecules)
  |  Document Tier 3 compositional strategies as PROSE
  |  Geological stratification, narrative crescendo, hub-spoke, etc.
  |  NOT a "printing press" — an alphabet + vocabulary
  |  [Token fix: 30 min, can run in parallel]
  |
  v
PHASE D: Extraction Validation Pass                   ~1-2 hours [NEW PHASE]
  |  Build 1 Track 1 page using library alone (test assembly)
  |  Build 1 Track 2 page using library + pipeline (test composition)
  |  Document gaps, verify sufficiency BEFORE playbook
  |
  v
PHASE E: Migration Playbook v2                        ~4-5 hours [EXPANDED]
  |  Track 1 execution path (mechanical assembly, existing spec)
  |  Track 2 execution path (tension-composition skill invocation)
  |  Perceptual guardrails (940px min, 16px label gap, 32px padding, 40% compression)
  |  Builder warnings (W-DEADZONE, W-OVERLABEL, W-MONOTONY, W-RESPONSIVE, W-STATS, W-IMPLICIT)
  |  Escalation protocols for metaphor failure modes
  |
  v
PHASE F: Pilot Migration                              ~3-5 hours [MUST TEST TRACK 2]
  |  2-3 real pages migrated end-to-end
  |  MUST include 1+ Track 2 page (composition validation)
  |  Process validation: does tension-composition skill work?
  |  Timing data: CRITICAL for Track 2 estimate (3-5 hrs?)
  |  Edge cases discovered
  |
  v
PHASE G: Playbook Refinement                          ~1-2 hours
  |  Playbook v2.1 with pilot learnings (both tracks)
  |  Updated time estimates based on actual Track 2 data
  |  Refined escalation protocol
  |
  v
========= NON-NEGOTIABLE FREEZE LINE =========
  |  Design system is FROZEN below this line.
  |  No new tokens. No new patterns.
  |  No soul changes. No convention spec additions.
  |  Track 2 composes Tier 3 FRESH per page but uses
  |  FROZEN Tier 1+2 vocabulary and FROZEN reasoning.
  v
PHASE H: Migration Track 1 (Assembly)                ~22-60 hours
  |  30-40 pages @ 45-90 minutes each
  |  Mechanical assembly using Tier 1+2 CSS library
  |  Deterministic lookup: content type → pattern triple
  |  Parallelizable (6 agents, 6 pages simultaneously)
  |  Weaver: standard progress tracking
  |
  v
PHASE I: Migration Track 2 (Composition)            ~105-225 hours [BOTTLENECK]
  |  35-45 pages @ 3-5 hours each
  |  Tension-composition skill invocation (6-phase pipeline)
  |  Multi-axis questioning → tension derivation → metaphor collapse
  |  Compositional layout generation with perceptual guardrails
  |  Sequential processing (creative capacity bottleneck)
  |  2-3 concurrent agents maximum (quality constraint)
  |  Weaver: CRITICAL (metaphor reuse, cross-page consistency)
  |
  v
DONE -- Full design system adoption achieved
```

---

## PHASE-BY-PHASE BREAKDOWN

### Phase A: CD (Combination Dimension) -- 4-5 hours

**Status:** PENDING. Fully planned. HANDOFF-AD-TO-CD exists and is complete.
**Team:** ~18-20 agents
**Dependency:** HANDOFF-AD-TO-CD.md (exists)

**What it produces:**
- 6 HTML explorations (CD-001 through CD-006) testing pattern combinations
- CD-006 uses REAL documentation content — the insurance policy that proves the system handles actual pages AND validates both Track 1 and Track 2 pathways
- 15-25 CD-F findings (combination rules validated empirically)
- CD-CONVENTION-SPEC.md (FINAL convention spec — extends AD sections 1-16, adds 17-20, no further sections)
- CD-RESEARCH-GATE.md (R-5 evaluation — 39 findings, ~75-80% currently unapplied)
- ACCUMULATED-IDENTITY-v3 (TERMINAL identity document — there is no v4)
- HANDOFF-CD-TO-MIGRATION.md with **Track classification decision tree** (NEW)
- Validated/extended transition grammar (5x5 matrix from AD)
- Completeness Gate passed

**Completeness Gate (all must be YES before CD declares done):**
- Every component used in at least one CD exploration
- Every R-5 combination rule validated, extended, or explicitly deferred
- Density tolerance table complete (no "unknown" entries)
- Transition grammar covers all pattern boundaries
- CD-006 pilot migration completed without requiring design system updates
- **Track 1 pathway validated** (clean pattern mappings work)
- **Track 2 pathway validated** (at least 1 exploration demonstrates tension-composition approach)
- Known limitations documented with migration workarounds

**What inherits into CD (mandatory consumed):**
- 84 prior findings: 21 COMP-F, 18 DD-F, 17 OD-F, 28 AD-F
- 20 documented patterns
- R-5 Combination Theory (39 findings)
- 27 R-2 findings (~67% applied during AD)
- Accumulated Identity v2
- 5 soul pieces, 4 combination rules, 3-way equivalence (AD-F-023)

---

### Phase B: Content Analysis + Track Classification -- 4-6 hours [MOVED FROM F, EXPANDED]

**Status:** NOT STARTED. No page inventory exists.
**Team:** ~3-5 agents (including dedicated Tension Analyst)
**Dependency:** Phase A (needs CD's pattern vocabulary and Track classification decision tree)

**CRITICAL CHANGE:** This phase MOVED from Phase F (after extraction) to Phase B (before extraction). Classification drives what gets built.

**What it produces:**
- Complete inventory of all 75+ docs-spa pages
- Per-page content type classification (tutorial, reference, getting started, conceptual, hybrid, etc.)
- **Per-page Track 1 vs Track 2 classification:**
  - Track 1: Content with clean pattern mappings (tutorial → CRESCENDO + F-Pattern)
  - Track 2: Content with genuine tension requiring metaphor resolution
  - Decision heuristic: Addition Test ("Can existing components fulfill reader need?") + BECAUSE test ("Is this content-driven?")
- **Tension pre-screening for Track 2 candidates:**
  - FEEL tension (warmth vs austerity)
  - RECONCILE tension (challenge vs verdict)
  - NAVIGATE tension (free choice vs decisive ranking)
  - BECOME tension (identity transformation)
  - Richness scores (genuine tension ≥ 8)
- **Tentative metaphor candidates for Track 2 pages** (feeds Phase C documentation priorities)
- Per-page migration complexity estimate (1=simple token swap, 2=moderate, 3=major)
- Migration priority ranking (suggested order)
- **Extraction guidance:** "60 pages are tutorials → prioritize F-Pattern + CRESCENDO components. 3 pages are confidence-based → ensure geological strata mechanisms documented."

**Why this is critical:** You cannot extract components before knowing what content needs. Content Analysis IS the tension-composition pipeline's Phase 0 (Content Assessment). Must happen FIRST.

**Content classification is deterministic from the accumulated identity:**

| Content Type | Track | Organization | Density | Axis | Feels Like |
|---|---|---|---|---|---|
| "How do I do X?" (steps) | 1 | Task-Based | ISLANDS + BOOKENDS | Bento Grid | Recipe cards on counter |
| "How does X work?" (progressive) | 1 | Narrative | CRESCENDO | F-Pattern | A well-paced article |
| "What is X?" (Q&A) | 1 | Conversational | PULSE + TIDAL | Z-Pattern | Interview transcript |
| "Should I use X?" (evaluation) | 2 | Confidence-Based | GEOLOGICAL | Spiral | Geological cross-section |
| "What's available?" (map) | 1-2 | Spatial | WAVE + ISLANDS | Choreography | Museum floor plan |
| Multiple of above (tension) | 2 | Creative | ALL (FRACTAL) | Compound | Magazine feature |

**Overlap potential:** Classification can partially overlap with Phase A (CD) since it only needs pattern vocabulary, not implementation templates.

---

### Phase C: Component + Pattern Base Extraction -- 6-10 hours [RENAMED, SCOPE REDUCED]

**Status:** NOT STARTED. Not previously planned in any document.
**Team:** ~6-10 agents across 2 sessions
**Dependency:** Phase B (needs Track classification + extraction guidance)

**CRITICAL CHANGE:** Scope reduced from "printing press" to "alphabet + vocabulary." Component-evolution synthesis proves only ~400 lines (60-70% of any file) is extractable.

**What it produces:**

**1. Tier 1+2 Component Library (~400 lines CSS):**
- Tier 1 tokens (~80 lines) — colors, spacing, typography
- Tier 2 callouts (~50 lines) — quote, warning, info, success callouts
- Tier 2 code blocks (~40 lines)
- Tier 2 header/footer/table (~70 lines)
- Tier 2.5 patterns (~160 lines) — solid-offset, scroll-witness, drop-cap, confidence borders, bento grid

**2. Compositional Strategy Library (~900 lines prose documentation):**
- 6+ documented strategies from high-richness explorations:
  - OD-004 Geological Strata (richness: 18, FEEL tension)
  - DD-006 Fractal Self-Similarity (unifying principle)
  - AD-005 Choreography (hub-spoke with transitions)
  - AD-004 Spiral Confidence (geological + radial)
  - AD-006 Compound (multi-pattern sequencing)
  - OD-002 Narrative Crescendo
- Format per entry:
  ```markdown
  ## Strategy: Geological Strata
  **Tension resolved:** Warmth/safety vs austerity/sharpness
  **Metaphor:** Geological layering — angular strata communicate depth while feeling reassuring
  **Mechanisms used:**
  - Border-weight gradient (4px/3px/1px) encodes confidence
  - Background darkening with depth
  - Spatial compression (padding decreases 80px → 32px)
  **When to use:** Content has layered confidence levels
  **Isomorphism count:** 6 independent mappings
  **Perceptual risk:** LOW (structural gradients, not textual labels)
  ```

**What it does NOT produce:**
- Full layout templates for every pattern combination (NOT achievable)
- New design decisions (all patterns come from validated explorations)
- Full React component library (that remains the existing docs-spa component library's job)

**Why this matters for the freeze guarantee:** Without extraction, migration agents must read ~15,000 lines of provenance documentation to understand what to build. With extraction, Track 1 follows recipes and applies templates. Track 2 uses Tier 1+2 vocabulary + composes Tier 3 fresh from metaphor using prose strategy guides.

**Token fix (30 minutes):** Fix 3-4 known contradictions in design-system/src/styles/tokens.css against T1 authority. Can run in parallel with this phase.

---

### Phase D: Extraction Validation Pass -- 1-2 hours [NEW PHASE]

**Status:** NEW. Not in original plan.
**Team:** ~2-3 agents
**Dependency:** Phase C (needs extracted components to test)

**WHY THIS EXISTS:** Without validation, the playbook assumes extraction is complete when it's only 60-70%. Better to discover gaps on 2 test pages than 75 production pages.

**What it produces:**

1. **Build 1 Track 1 page using library alone:**
   - Tutorial or reference page (tests Tier 1+2 sufficiency)
   - Should work perfectly with extracted base
   - Documents what works

2. **Build 1 Track 2 page using library + tension-composition skill:**
   - Conceptual or onboarding page (tests Tier 3 composition)
   - Exposes gaps in prose strategy documentation
   - Documents what requires fresh composition

3. **Extraction validation report:**
   - What Tier 1+2 CSS handles successfully
   - What Tier 3 gaps exist
   - Which metaphor families work with extracted base
   - Which require extensive fresh composition
   - Confidence level: "Track 1 works. Track 2 needs X, Y, Z documented."

**Pass/fail criteria:**
- Track 1 page ships without requiring NEW Tier 1+2 CSS
- Track 2 page ships using library + fresh Tier 3 composition
- All gaps documented with workarounds

---

### Phase E: Migration Playbook v2 -- 4-5 hours [EXPANDED]

**Status:** PARTIAL. A 265-line CSS-only migration guide exists but covers approximately 10% of what is needed.
**Team:** ~3-4 agents
**Dependency:** Phase C (pattern library) + Phase D (validation results)

**CRITICAL EXPANSION:** Original playbook described uniform 6-phase process. Updated playbook splits into TWO execution paths.

**What it produces:**

1. **Migration Execution Spec** — comprehensive spec for the one-time migration project (~1,600 lines), comparable to the Master AD Execution Spec. Team structure, task decomposition, quality gates, per-phase instructions for BOTH tracks.

2. **Ingestion Operational Spec** — lightweight single-agent spec for processing new pages on an ongoing basis (~50-100 lines). Derivative of #1, stripped to what one agent needs to handle a single page cold.

**The Execution Spec includes TWO TRACKS:**

### Track 1 (Assembly) — 45-90 minutes per page

**Phase 1: Page Analysis** (12 min)
- 5-dimensional classification
- Addition Test = YES → Track 1

**Phase 2: Pattern Selection** (8 min)
- Deterministic lookup: content type → pattern triple
- Example: Tutorial → CRESCENDO → F-Pattern

**Phase 3: Composition Design** (18 min)
- Mechanical component selection from Tier 2 library
- Apply velocity/temperature/weight rules
- Verify transition grammar

**Phase 4: Build** (28 min)
- Load Tier 1+2 CSS from library
- Construct HTML using Tier 2 components
- Verify guardrails (940px container, 32px padding, etc.)

**Phase 5: Perceptual Audit** (12 min)
- PA-01 through PA-28 (48-question perceptual-auditing skill)
- 7-gate protocol at 1440px + 768px

**Phase 6: Documentation** (7 min)
- Consumption Receipt (standard template)

### Track 2 (Composition) — 3-5 hours per page

**Phase 1: Page Analysis + Tension Pre-Screen** (18 min)
- Same 5-dimensional classification
- Addition Test = NO → Track 2
- BECAUSE test passes
- Richness score ≥ 8

**Phase 2: Partial Pattern Selection** (12 min)
- Density pattern identified
- Axis pattern DEFERRED to Phase 3 (metaphor determines axis)

**Phase 3: Tension-Composition Pipeline** (150 min) ← **THE BOTTLENECK**
- Phase 0: Content assessment (5 min)
- Phase 1: Multi-axis questioning, 4-14 axes (25 min)
- Phase 2: Tension derivation, Addition+BECAUSE tests (30 min)
- Phase 3: Metaphor collapse, 3-5 candidates scored (45 min)
  - Tension resolution score
  - Structural isomorphism count (≥ 4)
  - Perceptual risk assessment (≤ 2)
  - Perceptual cost assessment
  - Composite selection
- Phase 4: Compositional layout generation (35 min)
  - Extract 5-category physical properties
  - Translation grammar (property → CSS)
  - Coherence check (5 rules)
  - Pacing prediction
  - **Guardrail enforcement (Phase 4.0):**
    - 940px min container (65% viewport)
    - 16px label-to-heading gap
    - 32px padding floor
    - 40% compression ratio
- Phase 5: Output (10 min)

**Phase 4: Build** (35 min)
- Load Tier 1+2 CSS from library
- Apply Tier 3 generated CSS (zone wrappers, spatial metaphor)
- Verify guardrails + soul compliance
- **Builder warnings applied:**
  - W-DEADZONE: "Max breathing zone 48px. Transitions = CHANGING STATE not EMPTY SPACE"
  - W-OVERLABEL: "Use STRUCTURAL GRADIENTS (graduated backgrounds), not TEXT LABELS ('MAIN STREET')"
  - W-MONOTONY: "Grid cells need visual hierarchy variation, not uniform cards"
  - W-RESPONSIVE: "Test 768px AND 1440px. Metaphor must preserve under collapse."
  - W-STATS: "Metadata strips weak at 768px. Limit to 3 items or stack vertically."
  - W-IMPLICIT: "Reader should FEEL metaphor without READING about it"

**Phase 5: Perceptual Audit** (18 min)
- PA-01 through PA-48 (Tier 3 deep-dive)
- Metaphor-awareness questions:
  - PA-42: Does composition feel IMPLICIT or EXPLICIT?
  - PA-43: Do transitions change STATE or fill SPACE?
  - PA-44: Is metaphor vocabulary structural or textual?

**Phase 6: Documentation** (12 min)
- Consumption Receipt (enhanced)
- Metaphor Record (tension, metaphor, isomorphism table)

**Escalation protocol for metaphor failure modes:**
- Monopoly (only 1 candidate) → relax constraints, search again
- Inflation (8+ candidates) → apply isomorphism count filter
- Forcing (no candidate resolves all tensions) → accept partial resolution
- Decay (metaphor weakens during build) → select next-best candidate

---

### Phase F: Pilot Migration -- 3-5 hours [MUST INCLUDE TRACK 2]

**Status:** NOT STARTED. No pilot concept exists in any document.
**Team:** ~4-6 agents (2-3 page teams: Analyst + Builder + Auditor per page)
**Dependency:** Phase E (playbook) + Phase B (content analysis identifies which pages to pilot)

**CRITICAL REQUIREMENT:** Pilot MUST include at least 1 Track 2 page. Original plan assumed uniform pages. Updated plan recognizes Track 2 as the bottleneck and the risk.

**What it produces:**
- 2-3 fully migrated pages spanning both tracks:
  - **1+ Track 1 page:** Tutorial or reference (tests extracted base, mechanical assembly)
  - **1+ Track 2 page:** Conceptual or onboarding (tests tension-composition invocation, perceptual guardrails)
  - Optional: 1 hybrid page (tests transition grammar between tracks)
- Validated migration process: does the dual-track playbook actually work end-to-end?
- **Timing data: CRITICAL for Phase H+I estimates** — how long does Track 2 ACTUALLY take? (3 hours? 5 hours?)
- Discovered edge cases and playbook gaps
- First MIG-F findings (migration-specific discoveries)
- **Track 2 pilot validation report:**
  - Did multi-axis questioning produce useful tension table?
  - Did metaphor collapse select appropriate metaphor?
  - Did perceptual guardrails prevent visual compromise?
  - Did the process actually work end-to-end?

**Why 2-3 pages specifically:**
- 1 page is too few — cannot distinguish page-specific issues from systemic ones
- 5+ pages starts to feel like "just do the migration" without the benefit of a controlled test
- 2-3 pages covering different tracks provides enough signal to validate the process across the variety spectrum

**Team structure:** The 3-agent separation (Analyst, Builder, Auditor) breaks continuation bias — the same mechanism that made the Two-Instance pattern effective throughout prior phases.

---

### Phase G: Playbook Refinement -- 1-2 hours

**Status:** NOT STARTED.
**Team:** ~1 agent
**Dependency:** Phase F (pilot results)

**What it produces:**
- Playbook v2.1 incorporating every pilot learning (both tracks)
- **Updated time estimates based on actual migration effort:**
  - Track 1: confirmed at 45-90 min? Adjusted?
  - Track 2: confirmed at 3-5 hrs? Was it actually 4-7 hrs?
- Refined escalation protocol based on actual edge cases encountered
- Updated verification checklist if pilot revealed gaps
- Ingestion Operational Spec finalized (derivative of battle-tested playbook)

This is the last phase where the design system can change. After this, the freeze line activates.

---

## THE FREEZE LINE

### The User's Non-Negotiable

> "Once we start migrating actual documentation pages, I don't want to have to update the design system or anything like it. I want all this work, all these layerings, all these weeks of work to be what it is."

This is not a suggestion. It is the architectural spine of the entire roadmap. Every phase before the freeze line is load-bearing infrastructure that makes this guarantee achievable.

### Why This Works (UPDATED FOR TWO-TRACK REALITY)

Three structural reasons make the freeze guarantee viable rather than aspirational:

**Reason 1: The intermediate phases build the bridge.** By migration start, the team has:
- Extracted Tier 1+2 components (~400 lines locked CSS)
- Documented Tier 3 compositional strategies (6+ prose patterns)
- A complete content inventory with Track 1 vs Track 2 classification
- A tested dual-track playbook
- 2-3 pilot pages proving BOTH tracks work
- Perceptual guardrails proven to prevent visual compromise

The gap between "design research" and "migrated page" has been systematically closed before migration begins.

**Reason 2: The accumulated identity gives REASONING, not just rules.** When rules do not cover a case, reasoning still does. ACCUMULATED-IDENTITY-v3 is designed so agents can make NEW decisions consistent with prior ones because the system teaches HOW TO THINK about design, not just WHAT TO DO. This is the escape valve that prevents edge cases from forcing design system updates.

**Reason 3: Track 2 composes Tier 3 fresh per page, but uses FROZEN vocabulary.** The tension-composition pipeline generates NEW Tier 3 CSS for each Track 2 page (zone wrappers, spatial metaphor, CSS custom property overrides). This is NOT breaking the freeze — it's APPLYING the frozen Tier 1+2 vocabulary through the frozen tension-composition reasoning framework. The metaphor changes; the alphabet does not.

### What Is Frozen vs. What Can Evolve

**FROZEN (cannot change after Phase G):**
- Token values (colors, spacing, typography, geometry)
- Soul pieces (5, bounded): sharp edges, archivist serif, warm palette, no shadows, generous whitespace
- Pattern definitions (all density, organizational, axis, and combination patterns)
- Finding IDs and their meanings (84+ DD/OD/AD findings + 15-25 CD findings)
- Convention spec (all sections, including CD additions)
- Anti-pattern registry
- Transition grammar (5x5 matrix, validated/extended by CD)
- Fractal scale model (5 scales, bounded)
- ACCUMULATED-IDENTITY-v3
- **Tier 1+2 CSS library (~400 lines)**
- **Perceptual guardrails (940px, 16px, 32px, 40%)**
- **Tension-composition pipeline phases 0-5**
- **Builder warnings (W-DEADZONE, W-OVERLABEL, etc.)**

**NOT FROZEN (can evolve during migration):**
- Implementation details (CSS class names, HTML structures, component internals)
- Playbook wording and examples
- Page classifications (a page can be re-classified if content analysis was wrong)
- Migration priority order
- Verification checklists (can add items, not remove)
- Application notes (new documented uses of existing patterns)
- Provenance documentation format
- **Tier 3 CSS (generated fresh per Track 2 page from frozen vocabulary)**
- **Metaphor selection for Track 2 pages (uses frozen selection process)**

The distinction: **WHAT the system says** is frozen. **HOW we implement and document what the system says** can evolve. **WHICH metaphor resolves a specific page's tension** is determined by the frozen pipeline applied to fresh content.

### When Migration Discovers a Genuine Gap

Three scenarios, in order of likelihood:

**Scenario 1 (Most Likely): Content does not perfectly fit a pattern.**
Resolution: Use the escalation protocol from the playbook. Apply closest match + document the imperfection. The design system is a framework for reasoning, not a template for every possible page.

**Scenario 2 (Possible): A combination was never tested.**
Resolution: Use CD's combination rules + the accumulated identity's reasoning framework to derive the answer. The system teaches how to think, so new decisions remain consistent with prior ones. This IS the system working as intended.

**Scenario 3 (Track 2 Specific): Metaphor collapse produces mediocre candidate.**
Resolution: Apply perceptual guardrails (940px, 16px, 32px, 40%). Apply builder warnings (W-DEADZONE, W-OVERLABEL, etc.). If still mediocre, select next-best candidate from metaphor collapse ranking. If all candidates fail perceptual audit, escalate to "Forcing" protocol (accept partial tension resolution). Do not update the design system.

**Scenario 4 (Unlikely): A genuine contradiction in the system.**
Resolution: Document the contradiction. Apply the rule from the highest-authority source (soul > findings > patterns > convention spec). File the contradiction as KNOWN-ISSUE in provenance. Do not update the design system.

None of these scenarios require updating the system. They all work WITHIN what exists.

---

## PHASE H+I: FULL MIGRATION (SPLIT INTO TWO TRACKS)

### Phase H: Migration Track 1 (Assembly) -- 22-60 hours

**Status:** NOT STARTED.
**Team:** ~6-8 agents per session (parallelizable), 3-6 sessions
**Dependency:** Phase G (refined playbook)
**Estimated pages:** 30-40 pages (40-50% of total)

**What it produces:**
- 30-40 pages migrated using deterministic assembly
- Content types: tutorials, task sequences, pure reference, Q&A
- Per-page provenance documentation (Consumption Receipt citing applied findings)
- Soul compliance: 0 violations
- Pattern fidelity verified per page
- MIG-F findings documenting per-page discoveries

**Execution model:**
- **Parallelizable:** 6 agents, 6 pages simultaneously
- **Timeline:** 45-90 minutes per page
- **Agent model:** Sonnet 4.5 (cost-effective for deterministic work)
- **Weaver role:** Standard progress tracking, updates RESEARCH-ACTIVE.md

**Team topology:**
```
[Lead]
  ├── Page Team 1 (Analyst + Builder + Auditor) [Page 1]
  ├── Page Team 2 (Analyst + Builder + Auditor) [Page 2]
  ├── Page Team 3 (Analyst + Builder + Auditor) [Page 3]
  ├── Page Team 4 (Analyst + Builder + Auditor) [Page 4]
  ├── Page Team 5 (Analyst + Builder + Auditor) [Page 5]
  ├── Page Team 6 (Analyst + Builder + Auditor) [Page 6]
  └── Weaver (tracks progress, cross-references findings)
```

**Session structure:**
- Session 1: 6-8 pages
- Session 2: 6-8 pages
- Session 3: 6-8 pages
- Session 4+: Remaining pages (if > 30 total)

### Phase I: Migration Track 2 (Composition) -- 105-225 hours [THE BOTTLENECK]

**Status:** NOT STARTED.
**Team:** ~2-3 creative agents per session (sequential bottleneck), 9-19 sessions
**Dependency:** Phase G (refined playbook)
**Estimated pages:** 35-45 pages (50-60% of total)

**What it produces:**
- 35-45 pages migrated using tension-composition pipeline
- Content types: conceptual, onboarding, philosophy, evaluation, hybrid
- Enhanced provenance documentation (Consumption Receipt + Metaphor Record)
- Metaphor Record per page: tension table, metaphor selection rationale, isomorphism table
- Soul compliance: 0 violations
- Perceptual guardrails verified: 940px, 16px, 32px, 40%
- Pattern fidelity + metaphor coherence verified per page
- MIG-F findings + compositional strategy discoveries

**Execution model:**
- **Sequential processing:** 2-3 agents maximum (creative capacity bottleneck)
- **Timeline:** 3-5 hours per page
- **Agent model:** Opus 4.6 (required for creative composition)
- **Weaver role:** CRITICAL for Track 2
  - Cross-page metaphor reuse detection
  - Tension pattern recognition
  - "Page 12 has similar tension to Page 8 → reuse metaphor strategy"
  - Metaphor diversity enforcement (prevents fatigue)

**Team topology:**
```
[Lead]
  ├── Tension Analyst (Phase 0-2, ~30 min, Sonnet)
  ├── Metaphor Selector (Phase 3, ~45 min, Opus) [blocks: Builder]
  ├── Compositional Builder (Phase 4, ~2-3 hrs, Opus) [blocks: Auditor]
  ├── Perceptual Auditor (Phase 5, ~30 min, Opus w/ Playwright)
  └── Weaver (tracks metaphor usage, enforces diversity)
```

**Why sequential not parallel:** The Metaphor Selector needs the Tension Analyst's tension table. The Builder needs the Metaphor Selector's metaphor + isomorphism table. The Auditor needs the Builder's completed layout. This is a PIPELINE not a parallelizable batch.

**Session structure (THE CRITICAL VARIABLE):**
- 2 agents × 3-5 hours = ~2 pages per 5-hour session
- 3 agents × 3-5 hours = ~3 pages per 5-hour session (risk: quality degradation)
- At 35-45 pages total: **9-19 sessions minimum**

**Estimated split (OPEN QUESTION):**
- **Phase architect estimate:** 15-20% Track 2 (10-15 pages) → 30-75 hours
- **Impact assessor estimate:** 50-60% Track 2 (35-45 pages) → 105-225 hours
- **Actual split determined in Phase B Content Analysis**

### Combined Timeline Scenarios

| Track 2 % | Track 2 Pages | Track 2 Hours | Track 1 Pages | Track 1 Hours | Total Migration Hours |
|-----------|---------------|---------------|---------------|---------------|-----------------------|
| **20%** | 15 | 45-75 | 60 | 45-90 | **90-165** |
| **40%** | 30 | 90-150 | 45 | 34-68 | **124-218** |
| **50%** | 38 | 114-190 | 37 | 28-56 | **142-246** |
| **60%** | 45 | 135-225 | 30 | 23-45 | **158-270** |

**THE critical insight:** Track 2 percentage is THE biggest variable in the entire roadmap. Phase B Content Analysis settles this.

---

## THE VARIETY EXPECTATION

The user explicitly expects every page to look different. This is not an aesthetic preference — it is an architectural consequence.

Three forces prevent uniform output:

**Force 1: Content classification is the entry point.** Different content types enter through different doors and never converge. A tutorial gets CRESCENDO (building momentum); a reference gets ISLANDS (discrete lookup). They can no more look alike than a river can look like a lake.

**Force 2: Track 2 composes Tier 3 fresh per page.** Even pages with similar tensions get DIFFERENT metaphors because metaphor collapse considers the specific content's unique structural properties. Geological strata for one confidence-based page, spiral descent for another — both resolve layered confidence, both look completely different.

**Force 3: Fractal self-similarity looks DIFFERENT per pattern.** F-Pattern "sparse" = generous 64px padding and large headings. Bento Grid "sparse" = empty grid cells and wide gaps. Same principle, visually different at every scale.

What stays constant (the family DNA): border-radius: 0, box-shadow: none, warm cream background, Sanrok red accent, Instrument Serif for wisdom, Inter for body, JetBrains Mono for code, callout family DNA, fractal self-similarity.

What varies (the individual personality): organizational structure, density rhythm, axis geometry, component selection, spacing trajectory, reading flow direction, typography compression, section transitions, **and for Track 2 pages: Tier 3 spatial metaphor, zone wrappers, CSS custom property overrides.**

The result is comparable to The Economist magazine: feature spreads, data visualizations, short columns, photo essays — every article looks different, but they all unmistakably belong to the same publication.

---

## THE DOCUMENTATION REQUIREMENT

The user requires heavy documentation so that no future Claude instance or human operates from inference. Everything explicit, everything organized, everything navigable.

This requirement is satisfied by the pipeline's own structure:

- **CD produces** ACCUMULATED-IDENTITY-v3 (the terminal reasoning document) + Convention Spec + pattern selection guide + Track classification decision tree
- **Component Extraction produces** Tier 1+2 library (~400 lines CSS) + Compositional Strategy Library (~900 lines prose)
- **Content Analysis produces** per-page Track classification cards + tension pre-screening results
- **Migration Playbook produces** dual-track process specifications (Track 1 assembly + Track 2 composition)
- **Pilot Migration produces** worked examples for BOTH tracks (the most powerful form of documentation)
- **Each migrated page produces** a Consumption Receipt (Track 1) or Consumption Receipt + Metaphor Record (Track 2)

By migration's end, every design decision across every page is traceable back to:
- A finding ID (DD-F, OD-F, AD-F, CD-F)
- A pattern definition (CRESCENDO, ISLANDS, etc.)
- A reasoning step in the accumulated identity
- **For Track 2 pages:** A tension table, metaphor selection rationale, and isomorphism table

No inference. No "the previous agent probably meant X." Explicit provenance for every choice.

---

## CRITICAL PATH AND PARALLELIZATION

### The Critical Path (Sequential)

```
CD → Analysis → Extraction → Validation → Playbook → Pilot → Refinement → [FREEZE] → Track 2 Migration
```

**Track 2 is the critical path.** Even though Track 1 may start first, Track 2's 105-225 hours dominates the timeline.

### What Can Be Parallelized

1. **Token fix** (30 min) can happen ANY time before migration
2. **Content Analysis** can partially overlap with CD (classification needs pattern vocabulary, not implementation)
3. **Track 1 and Track 2 migration can run simultaneously** — different agents, different skills, no resource contention IF:
   - Track 1 agents never invoke tension-composition skill
   - Track 2 agents don't block Track 1 agents' file access
   - Weaver coordinates across both tracks (single Weaver for entire session)
4. **Tooling** (if built) can happen in parallel with anything after the pilot
5. **Training** (if needed) can happen in parallel with anything after the pattern library

### Realistic Session Breakdown

| Session | Phases | Wall Time | What Happens |
|---------|--------|-----------|--------------|
| 1 | CD Phase 0-1 (conventions + first 3 explorations) | ~4 hours | |
| 2 | CD Phase 1-4 (remaining explorations + audit + synthesis) | ~4-5 hours | |
| 3 | Content Analysis + Track Classification | ~6 hours | **CRITICAL: Determines Track 2 %** |
| 4 | Component + Pattern Base Extraction | ~5-6 hours | |
| 5 | Extraction Validation | ~2 hours | |
| 6 | Playbook v2 (both tracks) | ~6-8 hours | |
| 7 | Pilot Migration (MUST test Track 2) | ~5-8 hours | **CRITICAL: Track 2 timing data** |
| 8 | Refinement | ~1-2 hours | |
| | **FREEZE LINE** | | |
| 9-14 | Track 1 Migration (batches) | ~22-60 hours (3-6 sessions) | Parallelizable |
| 15-31 | Track 2 Migration (sequential) | ~105-225 hours (9-19 sessions) | **BOTTLENECK** |
| **TOTAL** | **16-31 sessions** | **~150-325 hours** | |

### Timeline Scenarios

| Scenario | Track 2 % | Pre-Freeze | Track 1 | Track 2 | Total Hours | Sessions | Calendar Time |
|----------|-----------|------------|---------|---------|-------------|----------|---------------|
| **Optimistic** | 20% | 21-33 | 45-90 | 45-75 | **~150** | 16 | 4-5 weeks |
| **Realistic** | 50% | 21-33 | 28-56 | 114-190 | **~220** | 22 | 5-7 weeks |
| **Pessimistic** | 60% | 21-33 | 23-45 | 135-225 | **~280** | 27 | 7-9 weeks |

**What drives variance:**
- **Track 2 percentage** (THE critical variable — 20% vs 60% changes timeline 2x)
- Track 2 per-page execution efficiency (3 hours vs 5 hours)
- How many Track 2 pages can run concurrently (2 vs 3 agents)
- Pilot results (clean pilot = fast progression; problematic pilot = more preparation)

---

## RISK FACTORS AND DEPENDENCIES

### Dependencies Between Phases

| Phase | Depends On | What It Needs From Predecessor |
|-------|-----------|-------------------------------|
| B (Analysis) | A (CD) | Pattern vocabulary, Track classification decision tree |
| C (Extraction) | B (Analysis) | Track classification, extraction guidance |
| D (Validation) | C (Extraction) | Extracted Tier 1+2 library to test |
| E (Playbook) | C + D | Tier 1+2 library + validation results + compositional strategies |
| F (Pilot) | E + B | Dual-track playbook + which pages to pilot |
| G (Refinement) | F | Pilot results, edge cases, **Track 2 timing data** |
| H (Track 1) | G | Battle-tested playbook v2.1 |
| I (Track 2) | G | Battle-tested playbook v2.1 + perceptual guardrails |

### Risk Register

| Risk | Severity | Probability | Mitigation |
|------|----------|-------------|-----------|
| **Pipeline produces mediocre metaphors** | MEDIUM | HIGH (40%) | Perceptual risk assessment (R1), guardrails (940px, 16px, 32px, 40%), builder warnings |
| **Track 2 takes longer than estimated** | HIGH | HIGH (50%) | Weaver reuses metaphor strategies; pilot provides real timing data; front-load Track 2 in pilot |
| **Track classification wrong** | MEDIUM | MODERATE (20-30%) | Phase 5 audit catches false negatives (Track 1 page that needed Track 2); Tension Gate catches false positives |
| **Component library insufficient** | LOW | LOW (5-10%) | Validation pass (Phase D) catches gaps before playbook; escalation protocol for edge cases |
| **Metaphor fatigue** | MEDIUM | MODERATE (30-40%) | Weaver enforces diversity; compositional strategy library documents 10+ metaphor families |
| **Track 2 % is 60% not 20%** | HIGH | MODERATE (40%) | Phase B Content Analysis settles this early; adjust timeline expectations immediately |

**Risk 1: Pipeline Produces Mediocre Metaphors**

**What happens:** The tension-composition pipeline selects a metaphor with high richness score but HIGH perceptual risk. The builder produces a layout with dead zones, monotonous grids, or over-labeling.

**Impact:** The page ships but ranks in the bottom half of quality distribution. Tension-test showed 40% of layouts were "YES WITH RESERVATIONS" pre-enrichment.

**Mitigation:**
- R1: Perceptual Risk Assessment (Phase 3.5E) — 4-question risk scoring
- R3: Pacing Prediction Heuristic (Phase 4.2B) — catches dead zone/monotony patterns
- Perceptual guardrails (Phase 4.0) — 940px, 16px, 32px, 40% (non-negotiable)
- Builder warnings (R6) — W-DEADZONE, W-OVERLABEL, W-MONOTONY, W-RESPONSIVE, W-STATS, W-IMPLICIT

**Risk 2: Track 2 Takes Too Long**

**What happens:** Track 2 pages actually take 5-7 hours each, not 3-5 hours. At 45 pages, that's 225-315 hours instead of 105-225 hours.

**Impact:** Timeline expands 50-100%. Calendar time increases from 5-7 weeks to 7-10 weeks.

**Mitigation:**
- Pilot (Phase F) provides REAL Track 2 timing data before committing to full migration
- Weaver reuses metaphor strategies across similar tensions (reduces per-page time on later pages)
- Consider "Track 1.5" classification for pages with light tension treatment (border of Track 1/2)
- Parallel 2-3 Track 2 agents carefully (quality constraint)

**Risk 3: Track 2 Is 50-60% Not 15-20%**

**What happens:** Impact assessor estimate is correct, phase architect estimate is wrong. Track 2 is the majority, not the minority.

**Impact:** Timeline nearly doubles (from ~150 hours to ~280 hours at 60% Track 2).

**Mitigation:**
- Phase B Content Analysis settles this in the FIRST post-freeze session
- Adjust timeline expectations immediately
- Communicate revised estimate to user based on actual classification data

---

## OPEN QUESTIONS

### Q1: Is Track 2 15-20% (phase architect) or 50-60% (impact assessor)?

**Answer:** Phase B Content Analysis will settle this definitively. THE critical variable in the entire roadmap.

**If 20%:** ~150 total hours, 16 sessions, 4-5 weeks
**If 60%:** ~280 total hours, 27 sessions, 7-9 weeks

### Q2: Can Track 2 be parallelized with 2-3 concurrent creative agents without quality loss?

**Answer:** Pilot Migration (Phase F) tests this. Tension-test data suggests 2 concurrent is safe, 3+ risks creative quality degradation.

### Q3: Does the Weaver's metaphor reuse strategy significantly reduce Track 2 per-page time on later pages?

**Answer:** Pilot Migration tests this. If Page 2 has similar tension to Page 1, does reusing the metaphor family save 30-60 minutes?

### Q4: What's the cost model at Opus rates for 35-45 Track 2 pages at 3-5 hours each?

**Answer:** Pilot Migration provides real cost data. Track 2 requires Opus 4.6 (creative judgment). At 105-225 hours Opus time, cost implications are significant.

### Q5: Could "Track 1.5" (light tension treatment) reduce the Track 2 queue?

**Answer:** Some pages may have LIGHT tension (richness 4-7) that doesn't justify full 3-5 hour composition but needs more than mechanical assembly. Could these use abbreviated tension pipeline (skip metaphor collapse, apply one of 6 documented strategies directly)? Potentially reduces borderline Track 2 pages from 5 hours to 90 minutes.

---

## WHAT SUCCESS LOOKS LIKE

When the roadmap is complete:

1. **Every documentation page expresses its content's natural attention topology.** Tutorials build (CRESCENDO). References cluster (ISLANDS). Guides layer (GEOLOGICAL). Conceptual pages resolve tension through metaphor (Track 2 composition). No two pages that serve different purposes look the same.

2. **Every page is soul-compliant.** Zero border-radius. Zero box-shadow. Zero drop-shadow. Warm cream backgrounds. Serif accents on wisdom content. Sharp, editorial, confident.

3. **Every page has provenance.** Track 1 pages have Consumption Receipts. Track 2 pages have Consumption Receipts + Metaphor Records documenting tension tables, metaphor selection rationale, and isomorphism tables. Traceable back to research IDs.

4. **The design system is frozen and complete.** No pending updates. No known gaps without documented workarounds. ACCUMULATED-IDENTITY-v3 is the terminal reasoning document. Tier 1+2 CSS library is locked. Tier 3 compositions use frozen vocabulary through frozen reasoning.

5. **New content enters the same dual-track pipeline.** The Ingestion Operational Spec (~50-100 lines) tells a single agent how to classify Track 1 vs Track 2, then execute the appropriate pathway using the frozen system. The pipeline is not separate software — it is an agent with the right context.

6. **The accumulated intelligence compounds.** MIG-F findings from 75 pages of migration create a reference library. Track 2's Metaphor Records create a metaphor reuse catalog. Page 76 is faster and better than page 1 because the system's demonstrated capabilities expand while its rules stay fixed.

The design system becomes what it was always meant to be: a transferable reasoning model. Load the accumulated identity, the convention spec, the Tier 1+2 library, the compositional strategy library, and the dual-track playbook — and any agent BECOMES the design system. Not following rules mechanically, but thinking in KortAI.

---

*Document produced for POST-CD-PIPELINE. Sources: _SOURCE-BRIEF.md Sections 9-10, 09-complete-roadmap.md (569 lines), 10-MIGRATION-SYNTHESIS.md (780 lines), pipeline-evolution-research/ (5 files, 3,200 lines). Updated 2026-02-13 to reflect two-track architecture, perceptual guardrails, and tension-composition skill integration.*
