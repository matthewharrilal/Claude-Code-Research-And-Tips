<!-- ===============================================================================
INLINE THREADING HEADER -- CD Phase, Wave 1A
File: explorations/combination/CD-003-file-tree-with-callouts.html
Tier: A | Generated: 2026-02-11

1. WHY THIS EXISTS
Combination exploration testing how File Tree + Callout components interact
in an ISLANDS density / SPATIAL organization / BENTO GRID + CHOREOGRAPHY axis
layout. Tests whether hierarchical structure (File Tree) and advisory content
(Callouts) can coexist without triggering Callout Cacophony (A1) anti-pattern.

2. QUESTION IT ANSWERS
Can File Tree and Callout components share left-anchored DNA (H3) without
creating visual monotony? Does ISLANDS density survive when both bento grid
cells AND hub-spoke choreography sections contain advisory callouts? Does the
SMOOTH transition (bento -> choreography, same spatial mechanism) preserve
reading flow across two axis patterns?

3. STATUS
v1

4. BUILT ON
| Dependency                   | Relationship                                |
|------------------------------|---------------------------------------------|
| AD-003-bento-grid.html       | Bento Grid axis pattern (spatial encoding)  |
| AD-005-choreography.html     | Choreography axis pattern (hub-spoke flow)  |
| OD-005-spatial.html          | Spatial org pattern (position-based meaning) |
| DD-003-islands.html          | ISLANDS density pattern (cluster + ocean)   |
| CD-CONVENTION-SPEC.md        | Convention rules for combination CSS         |
| research-package-cd-003.md   | Research input (R-5, R-4, R-2, AD-F, DD-F)  |

5. MUST HONOR
Soul Pieces #1-#5: border-radius: 0, box-shadow: none, no drop-shadow,
Instrument Serif italic for Essence/Core ONLY, 2-zone callouts with
border-left: 4px solid, muted earth tones. ANTI-PHYSICAL identity.
ISLANDS density: discrete content clusters separated by 48-64px ocean.
Max 2 callouts per viewport (DD-F-014). No Traffic Light adjacency (DD-F-015).
3-category borders ONLY (1px, 3px, 4px -- ZERO 2px).

6. CONSUMED BY
| Consumer                     | How Used                                    |
|------------------------------|---------------------------------------------|
| CD-SYNTHESIS.md              | Cross-CD analysis                            |
| ACCUMULATED-IDENTITY-v3.md   | Identity evolution                           |
| Migration                    | CD stage output                              |

7. DIAGNOSTIC
Findings: CD-F-009 through CD-F-012
Combination: DD:ISLANDS | OD:SPATIAL | AD:BENTO+CHOREOGRAPHY
Transition: Bento -> Choreography = SMOOTH (same spatial mechanism)
Components: File Tree, Info/Tip/Gotcha/Challenge Callouts, Code Snippet,
            Decision Matrix, Core Abstraction

Research Applied:
  R5-001 (combination rules), R5-007 (velocity interleaving),
  R5-011 (temperature buffering), R5-015 (weight balance),
  R5-020 (proximity semantics), R5-025 (callout cacophony),
  R5-031 (editorial spread), R5-033 (family cohesion),
  R5-039 (recipe 6 architecture overview)
  R4-019 (bento cell sizing), R4-023 (CSS Grid), R4-025 (readability first)
  R2-4.1 (bento grid layout), R2-2.2 (card hierarchy)
  AD-F-009 (grid contains islands), AD-F-010 (cell size = hierarchy),
  AD-F-017 (direction change = density change), AD-F-025 (transition grammar)
  DD-F-003 (ISLANDS), DD-F-006 (fractal 5 scales), DD-F-014 (max 2 callouts)
  OD-F-005 (organization IS density)

Anti-Patterns Avoided:
  Callout Cacophony (A1) -- max 2 per viewport, distributed across islands
  Shared Left-Anchor Monotony -- visual weight variation between File Tree and callouts
  Temperature Cycling -- warm/neutral/cold alternation, no same-temperature clustering
  Traffic Light (DD-F-015) -- never Tip (green) adjacent to Gotcha (coral)
  2px borders -- ZERO. Only 1px, 3px, 4px.
  Semi-transparent backgrounds -- opacity === 1 everywhere
=============================================================================== -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CD-003: File Tree with Callouts</title>

  <!-- Google Fonts: Instrument Serif, Inter, JetBrains Mono -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <!-- =========================================================================
       LOCKED LAYER -- DO NOT MODIFY
       All values from DESIGN-SYSTEM/tokens/ (colors.md, typography.md,
       spacing.md, geometry.md). Programmatic diff verification against
       CD-CONVENTION-SPEC.md Section 10.
       ========================================================================= -->
  <style id="locked-layer">
    /* DO NOT MODIFY -- programmatic diff verification */

    :root {
      /* Colors -- LOCKED */
      --color-primary: #E83025;
      --color-background: #FEF9F5;
      --color-text: #1A1A1A;
      --color-text-secondary: #666666;
      --color-border: #E0D5C5;
      --color-border-subtle: #F0EBE3;

      /* Zone backgrounds (PULSE / WAVE differentiation) */
      --color-zone-sparse: #FEF9F5;   /* sparse zones */
      --color-zone-dense: #FFFFFF;    /* dense zones */
      --color-zone-breathing: #FAF5ED;/* chapter dividers, mode transitions */

      /* Typography -- LOCKED */
      --font-display: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

      /* Type Scale -- 5-level cascade (~1.5x ratio) */
      --type-page: 2.5rem;         /* 40px */
      --type-section: 1.625rem;    /* 26px */
      --type-subsection: 1.375rem; /* 22px */
      --type-body: 1rem;           /* 16px */
      --type-code: 0.875rem;       /* 14px */
      --type-meta: 0.75rem;        /* 12px */

      /* Geometry -- LOCKED */
      --border-radius: 0;
      --box-shadow: none;

      /* Spacing Scale */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --space-16: 64px;
      --space-20: 80px;

      /* Gestalt Semantic Aliases */
      --space-within: var(--space-2);    /* 8px */
      --space-between: var(--space-8);   /* 32px */
      --space-chapter: var(--space-16);  /* 64px */

      /* Callout Accents -- LOCKED */
      --accent-blue: #4A90D9;
      --accent-green: #4A9D6B;
      --accent-coral: #C97065;
      --accent-amber: #D97706;
      --accent-purple: #7C3AED;

      /* Standardized Border */
      --border-left-width: 4px;

      /* Solid Offset (EXT-CREATIVE-001) */
      --offset-x: 4px;
      --offset-y: 4px;
      --offset-color: #1A1A1A;

      /* Syntax Highlighting (dark background) -- LOCKED */
      --syntax-keyword: #E83025;
      --syntax-string: #6B9B7A;
      --syntax-comment: #666666;
      --syntax-function: #4A7C9B;
      --syntax-type: #C97065;
      --syntax-number: #D97706;
      --syntax-punctuation: #E0D5C5;

      /* Transition timing */
      --transition-standard: 0.3s ease;
    }

    /* Reset and Soul Enforcement */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    /* Enforce sharp edges globally -- Soul Piece #1 */
    *:where(:not(input, button, select)) {
      border-radius: 0;
    }

    /* Base Typography */
    body {
      font-family: var(--font-body);
      font-size: var(--type-body);
      line-height: 1.7;
      color: var(--color-text);
      background: var(--color-background);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-display);
      line-height: 1.2;
    }

    h1 { font-size: var(--type-page); }
    h2 { font-size: var(--type-section); }
    h3 {
      font-size: var(--type-subsection);
      font-style: italic;
    }

    p {
      max-width: 70ch;
      margin-bottom: var(--space-4);
      overflow-wrap: break-word;
    }

    a {
      color: var(--color-primary);
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }

    /* Selection -- Soul Piece branded */
    ::selection {
      background: var(--color-primary);
      color: var(--color-background);
    }

    /* Focus -- WCAG compliant */
    *:focus-visible {
      outline: 3px solid var(--color-primary);
      outline-offset: 2px;
    }

    /* Skip Link -- Accessibility */
    .skip-link {
      position: absolute;
      top: -100%;
      left: 0;
      background: var(--color-primary);
      color: var(--color-background);
      padding: 8px 16px;
      z-index: 1000;
      font-family: var(--font-body);
      font-size: 14px;
      text-decoration: none;
    }
    .skip-link:focus {
      top: 0;
    }

    /* Header -- Full-bleed dark */
    header {
      background: var(--color-text); /* #1A1A1A */
      color: var(--color-background); /* #FEF9F5 */
      border-bottom: 3px solid var(--color-primary); /* Cat 1 structural */
    }

    .header-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: var(--space-16) var(--space-8); /* 64px 32px */
    }

    .meta-line {
      font-family: var(--font-body);
      font-size: var(--type-meta);
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-2);
      display: flex;
      align-items: center;
      gap: var(--space-4);
      flex-wrap: wrap;
    }

    .version-badge {
      display: inline-block;
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      font-weight: 500;
      letter-spacing: 0.05em;
      padding: 2px 8px;
      border: 1px solid var(--color-text-secondary); /* Cat 3 micro */
      color: var(--color-text-secondary);
    }

    header h1 {
      font-family: var(--font-display);
      font-size: var(--type-page);
      color: var(--color-background);
      margin-bottom: var(--space-4);
      line-height: 1.15;
    }

    header .subtitle {
      font-family: var(--font-body);
      font-size: var(--type-body);
      font-weight: 400;
      color: var(--color-text-secondary);
      max-width: 70ch;
      line-height: 1.7;
    }

    /* Page Container */
    .page-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: var(--space-12) var(--space-6);
    }

    /* Code Block Theme -- Dark */
    pre {
      background: var(--color-text); /* #1A1A1A */
      color: var(--color-background); /* #FEF9F5 */
      border: 3px solid var(--color-border); /* Cat 1 structural */
      padding: var(--space-6) var(--space-8); /* 24px 32px */
      font-family: var(--font-mono);
      font-size: var(--type-code);
      line-height: 1.5;
      overflow-x: auto;
      margin-bottom: var(--space-8);
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    pre code {
      background: none;
      border: none;
      padding: 0;
      font-size: inherit;
    }

    /* Syntax highlighting tokens */
    .kw { color: var(--syntax-keyword); }
    .st { color: var(--syntax-string); }
    .cm { color: var(--syntax-comment); }
    .fn { color: var(--syntax-function); }
    .ty { color: var(--syntax-type); }
    .nu { color: var(--syntax-number); }
    .pu { color: var(--syntax-punctuation); }

    /* Inline code */
    code:not(pre code) {
      font-family: var(--font-mono);
      font-size: 0.9em;
      background: var(--color-border-subtle); /* #F0EBE3 */
      padding: 2px 6px;
      border: 1px solid var(--color-border); /* Cat 3 micro */
    }

    /* Callout System -- 5 accent variants
       Family DNA: 2-zone (label + body), border-left: 4px solid */
    .callout {
      border-left: 4px solid var(--accent-blue);
      padding: var(--space-6) var(--space-5); /* 24px 20px */
      margin: var(--space-6) 0;
      background: var(--color-zone-sparse);
    }

    .callout__label {
      font-family: var(--font-body);
      font-size: var(--type-meta);
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: var(--space-2);
    }

    .callout__body {
      font-family: var(--font-body);
      font-size: var(--type-body);
      line-height: 1.7;
    }

    .callout__body p {
      margin-bottom: var(--space-3);
    }
    .callout__body p:last-child {
      margin-bottom: 0;
    }

    /* Accent variants */
    .callout--note { border-left-color: var(--accent-blue); }
    .callout--note .callout__label { color: var(--accent-blue); }

    .callout--tip { border-left-color: var(--accent-green); }
    .callout--tip .callout__label { color: var(--accent-green); }

    .callout--gotcha { border-left-color: var(--accent-coral); }
    .callout--gotcha .callout__label { color: var(--accent-coral); }

    .callout--caution { border-left-color: var(--accent-amber); }
    .callout--caution .callout__label { color: var(--accent-amber); }

    .callout--challenge { border-left-color: var(--accent-amber); }
    .callout--challenge .callout__label { color: var(--accent-amber); }

    .callout--essence {
      border-left-color: var(--accent-purple);
    }
    .callout--essence .callout__label { color: var(--accent-purple); }
    .callout--essence .callout__body {
      font-family: var(--font-display);
      font-style: italic; /* Soul Piece #2: Archivist speaks in serif */
    }

    /* Tables -- Open grid, no vertical borders */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: var(--space-8);
      display: block;
      overflow-x: auto;
    }

    th {
      font-family: var(--font-body);
      font-size: var(--type-meta);
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      text-align: left;
      padding: var(--space-3) var(--space-4);
      border-bottom: 3px solid var(--color-border); /* Cat 1 structural */
      color: var(--color-text-secondary);
    }

    td {
      font-family: var(--font-body);
      font-size: var(--type-body);
      padding: var(--space-3) var(--space-4);
      border-bottom: 1px solid var(--color-border-subtle); /* Cat 2 separator */
      vertical-align: top;
    }

    th, td {
      border-left: none;
      border-right: none;
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }

    /* Print Styles */
    @media print {
      body {
        background: white;
        color: black;
      }
      .skip-link {
        display: none;
      }
      header {
        background: white;
        color: black;
        border-bottom-color: black;
      }
      header h1,
      header .subtitle {
        color: black;
      }
      pre {
        background: #f5f5f5;
        color: black;
        border-color: #ccc;
      }
    }

    /* Screen Reader Only */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }
  </style>

  <!-- =========================================================================
       COMBINATION LAYER -- Builder C: CD-003 File Tree with Callouts
       Must comply with CD-CONVENTION-SPEC.md Sections 12-20.
       Must use :root tokens. No hardcoded values.

       Combination: DD:ISLANDS | OD:SPATIAL | AD:BENTO GRID + CHOREOGRAPHY
       Density: ISLANDS (discrete dense clusters in sparse grid gaps)
       Organization: SPATIAL (hub-and-spoke, position-based meaning)
       Axis: Bento Grid (spatial container) + Choreography (directional flow)
       Transition: Bento -> Choreography = SMOOTH (same spatial mechanism)

       Research Applied:
         R5-001, R5-007, R5-011, R5-015, R5-020, R5-025, R5-031, R5-033, R5-039
         R4-019, R4-023, R4-025
         R2-4.1, R2-2.2
         AD-F-009, AD-F-010, AD-F-017, AD-F-025
         DD-F-003, DD-F-006, DD-F-014, DD-F-015
         OD-F-005
         H1 (family cohesion), H3 (shared visual anchors), H4 (editorial spread)
         T4 (2-callout limit), G1 (semantic proximity), G4 (advisory cluster)
         N1 (flat stacking), N3 (re-sequence not nest)
         A1 (callout cacophony), A6 (missing context)
         Recipe 6 (architecture overview)

       Anti-Patterns Avoided:
         Callout Cacophony (A1): max 2 per viewport
         Shared Left-Anchor Monotony: weight variation
         Temperature Cycling: warm/neutral/cold alternation
         Traffic Light (DD-F-015): no Tip adjacent to Gotcha
         2px Border Epidemic: ZERO 2px
         Semi-Transparent Backgrounds: opacity === 1

       Finding IDs: CD-F-009, CD-F-010, CD-F-011, CD-F-012
       ========================================================================= -->
  <style id="combination-layer">

    /* =======================================================================
       Section Spacing -- ISLANDS density
       48-64px ocean between content islands (--space-12 to --space-16)
       DD-F-003: Dense clusters in sparse space
       ======================================================================= */
    .page-container > section {
      margin-bottom: var(--space-16); /* 64px = island ocean */
    }

    .page-container > section:last-child {
      margin-bottom: 0;
    }

    /* Section headings */
    .section-heading {
      font-family: var(--font-display);
      font-size: var(--type-section);
      margin-bottom: var(--space-8);
      padding-bottom: var(--space-3);
      border-bottom: 3px solid var(--color-border); /* Cat 1 structural */
    }

    .section-intro {
      margin-bottom: var(--space-8);
    }

    /* =======================================================================
       BENTO GRID LAYOUT -- AD-F-009: Grid cells ARE islands
       R4-019: Modular grid with varied cell sizes
       R4-023: CSS Grid implementation
       R2-4.1: 3-column grid for 1100px container
       ======================================================================= */
    .bento-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: var(--space-8); /* 32px ocean between islands */
    }

    /* Cell spanning -- AD-F-010: Cell size IS hierarchy */
    .bento-item--2x2 {
      grid-column: span 2;
      grid-row: span 2;
    }

    .bento-item--2x1 {
      grid-column: span 2;
    }

    .bento-item--1x2 {
      grid-row: span 2;
    }

    /* Bento cell base -- Cat 1 structural border */
    .bento-cell {
      background: var(--color-zone-dense); /* #FFFFFF -- dense island */
      border: 3px solid var(--color-border); /* Cat 1 structural */
      padding: var(--space-6); /* 24px internal */
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .bento-cell__header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: var(--space-4);
    }

    .bento-cell__title {
      font-family: var(--font-display);
      font-size: var(--type-subsection);
      font-style: italic;
      line-height: 1.3;
    }

    .bento-cell__body {
      font-family: var(--font-body);
      font-size: var(--type-body);
      line-height: 1.7;
      color: var(--color-text);
    }

    .bento-cell__body p {
      margin-bottom: var(--space-3);
    }

    .bento-cell__body p:last-child {
      margin-bottom: 0;
    }

    /* Cell type badge */
    .cell-badge {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      font-weight: 500;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      padding: var(--space-1) var(--space-2);
      border: 1px solid var(--color-border); /* Cat 3 micro */
      white-space: nowrap;
      flex-shrink: 0;
    }

    .cell-badge--hub {
      color: var(--color-primary);
      border-color: var(--color-primary);
    }

    .cell-badge--spoke {
      color: var(--accent-blue);
      border-color: var(--accent-blue);
    }

    .cell-badge--file-tree {
      color: var(--accent-green);
      border-color: var(--accent-green);
    }

    /* =======================================================================
       FILE TREE COMPONENT
       H3: Left-anchored visual DNA (shared with callouts)
       Weight variation: File tree uses border-left: 4px + heavier visual mass
       to differentiate from callout left-border
       ======================================================================= */
    .file-tree {
      font-family: var(--font-mono);
      font-size: var(--type-code);
      line-height: 1.8;
      background: var(--color-zone-breathing); /* #FAF5ED -- differentiate from callout bg */
      border-left: 4px solid var(--color-text); /* Cat 3 semantic -- darker than callouts */
      padding: var(--space-6) var(--space-5);
    }

    .file-tree__item {
      display: block;
      color: var(--color-text);
      white-space: pre;
    }

    .file-tree__item--dir {
      font-weight: 600;
      color: var(--color-text);
    }

    .file-tree__item--file {
      color: var(--color-text-secondary);
    }

    .file-tree__item--highlight {
      color: var(--color-primary);
      font-weight: 600;
    }

    .file-tree__comment {
      color: var(--color-text-secondary);
      font-style: italic;
      font-family: var(--font-body);
      font-size: var(--type-meta);
    }

    /* =======================================================================
       CHOREOGRAPHY LAYOUT -- AD-F-017: Direction change = density change
       Hub-and-spoke pattern for the second axis section
       ======================================================================= */
    .choreo-section {
      display: flex;
      flex-direction: column;
      gap: var(--space-12); /* 48px between hub and spokes */
    }

    .choreo-hub {
      background: var(--color-zone-dense);
      border: 3px solid var(--color-border); /* Cat 1 structural */
      padding: var(--space-8);
    }

    .choreo-hub__title {
      font-family: var(--font-display);
      font-size: var(--type-section);
      margin-bottom: var(--space-6);
    }

    .choreo-spokes {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: var(--space-8);
    }

    .choreo-spoke {
      background: var(--color-zone-dense);
      border: 3px solid var(--color-border); /* Cat 1 structural */
      padding: var(--space-6);
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .choreo-spoke--full {
      grid-column: span 2;
    }

    .choreo-spoke__title {
      font-family: var(--font-display);
      font-size: var(--type-subsection);
      font-style: italic;
      margin-bottom: var(--space-2);
    }

    .choreo-spoke__label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      font-weight: 500;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-2);
    }

    /* =======================================================================
       SMOOTH TRANSITION DIVIDER
       Bento -> Choreography = SMOOTH (same spatial mechanism)
       AD-F-025: Minimal breathing, same mechanism continues
       ======================================================================= */
    .transition--smooth {
      height: var(--space-8); /* 32px -- minimal for SMOOTH */
      position: relative;
    }

    .transition--smooth::after {
      content: '';
      display: block;
      width: 120px;
      height: 3px;
      background: var(--color-border);
      margin: 0 auto;
      position: relative;
      top: 50%;
    }

    /* =======================================================================
       CORE ABSTRACTION -- Heavy component
       G2: Framed = bounded thought
       H4: Editorial spread (File Tree + Core Abstraction = magazine layout)
       ======================================================================= */
    .core-abstraction {
      background: var(--color-zone-breathing); /* #FAF5ED */
      border: 3px solid var(--color-border); /* Cat 1 structural */
      padding: var(--space-8);
    }

    .core-abstraction__title {
      font-family: var(--font-display);
      font-size: var(--type-section);
      margin-bottom: var(--space-4);
    }

    .core-abstraction__body {
      font-family: var(--font-body);
      font-size: var(--type-body);
      line-height: 1.7;
    }

    .core-abstraction__body p {
      margin-bottom: var(--space-4);
    }
    .core-abstraction__body p:last-child {
      margin-bottom: 0;
    }

    /* =======================================================================
       DECISION MATRIX -- R5-039: Recipe 6 architecture overview
       Comparison table inside choreography hub
       ======================================================================= */
    .decision-matrix {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: var(--space-4);
    }

    .decision-matrix th {
      background: var(--color-zone-breathing);
    }

    .decision-matrix td {
      min-width: 120px;
    }

    .decision-matrix .recommended {
      font-weight: 600;
      color: var(--accent-green);
    }

    /* =======================================================================
       REASONING COMPONENT
       ======================================================================= */
    .reasoning {
      background: var(--color-zone-sparse);
      border-left: 4px solid var(--accent-purple);
      padding: var(--space-6) var(--space-5);
    }

    .reasoning__title {
      font-family: var(--font-display);
      font-size: var(--type-subsection);
      font-style: italic;
      margin-bottom: var(--space-4);
      color: var(--accent-purple);
    }

    .reasoning__body {
      font-family: var(--font-body);
      font-size: var(--type-body);
      line-height: 1.7;
    }

    .reasoning__body p {
      margin-bottom: var(--space-3);
    }
    .reasoning__body p:last-child {
      margin-bottom: 0;
    }

    /* =======================================================================
       Pre in narrow containers -- prevent overflow
       ======================================================================= */
    .bento-cell pre,
    .choreo-spoke pre,
    .choreo-hub pre {
      min-width: 0;
      padding: var(--space-3) var(--space-4);
      overflow-x: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    /* =======================================================================
       RAR Block -- Research Application Record
       ======================================================================= */
    .rar-block {
      background: var(--color-zone-breathing);
      border: 3px solid var(--color-border);
      padding: var(--space-8);
      margin-top: var(--space-chapter);
    }

    .rar-block h2 {
      font-family: var(--font-display);
      font-size: var(--type-section);
      margin-bottom: var(--space-6);
    }

    .rar-block h3 {
      font-family: var(--font-display);
      font-size: var(--type-subsection);
      font-style: italic;
      margin-top: var(--space-6);
      margin-bottom: var(--space-4);
    }

    /* =======================================================================
       FOOTER -- Dark background with red top border
       ======================================================================= */
    .page-footer {
      background: var(--color-text);
      border-top: 3px solid var(--color-primary);
      padding: var(--space-8) var(--space-6);
    }
    .page-footer__inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .page-footer__id {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      color: var(--color-text-secondary);
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }
    .page-footer__rule {
      width: 48px;
      height: 3px;
      background: var(--color-primary);
    }

    /* Page End Marker */
    .page-end {
      text-align: center;
      padding: var(--space-12) 0 var(--space-8);
      color: var(--color-border);
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      letter-spacing: 0.3em;
    }

    .page-end::before {
      content: '';
      display: block;
      width: 64px;
      height: 3px;
      background: var(--color-border);
      margin: 0 auto var(--space-6);
    }

    /* =======================================================================
       RESPONSIVE -- 960px: collapse 3-col bento to 2-col (ESC-001)
       ======================================================================= */
    @media (max-width: 960px) {
      .bento-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .bento-item--2x2 {
        grid-column: span 2;
        grid-row: span 1;
      }

      .bento-item--2x1 {
        grid-column: span 2;
      }

      .bento-cell__header {
        flex-direction: column;
        gap: var(--space-2);
      }

      .cell-badge {
        align-self: flex-start;
      }
    }

    /* =======================================================================
       RESPONSIVE -- 768px: single column collapse
       ======================================================================= */
    @media (max-width: 768px) {
      .bento-grid {
        grid-template-columns: 1fr;
      }

      .bento-item--2x2,
      .bento-item--2x1,
      .bento-item--1x2 {
        grid-column: span 1;
        grid-row: span 1;
      }

      .choreo-spokes {
        grid-template-columns: 1fr;
      }

      .choreo-spoke--full {
        grid-column: span 1;
      }

      .header-inner,
      .page-container {
        padding-left: var(--space-4);
        padding-right: var(--space-4);
      }

      .file-tree {
        overflow-x: auto;
      }

      .bento-item,
      .bento-item--2x2,
      .bento-item--2x1,
      .bento-item--1x2 {
        max-width: 100%;
        overflow-x: auto;
      }

      table {
        display: block;
        overflow-x: auto;
        max-width: 100%;
      }
    }
  </style>
</head>

<body>
  <!-- Skip Link -- Accessibility requirement -->
  <a href="#main-content" class="skip-link">Skip to content</a>

  <!-- =====================================================================
       HEADER -- Full-bleed dark (C-16)
       ISLANDS density: Header is the first dense island
       ===================================================================== -->
  <header>
    <div class="header-inner">
      <div class="meta-line">
        <span>EXPLORATION CD-003</span>
        <span>COMBINATION: FILE TREE WITH CALLOUTS</span>
        <span class="version-badge">v1</span>
      </div>
      <h1>File Tree with Callouts</h1>
      <p class="subtitle">
        How do hierarchical File Tree components and advisory Callouts coexist
        without creating callout cacophony? This exploration uses ISLANDS density
        in a SPATIAL bento grid layout, then transitions SMOOTHLY into choreographic
        hub-spoke architecture comparison. Content topic: React application
        file structure and architecture patterns.
        <!-- DD-F-003: ISLANDS density -- dense clusters in sparse ocean -->
        <!-- AD-F-025: Bento to Choreography = SMOOTH transition -->
      </p>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main-content">
    <div class="page-container">

      <!-- ===================================================================
           SECTION 1: BENTO GRID -- ISLANDS density
           Each bento cell is a self-contained content island
           AD-F-009: Grid cells ARE islands, grid gaps ARE ocean
           OD-F-005: Position-based meaning (SPATIAL organization)
           =================================================================== -->
      <section aria-label="Project Structure Overview">
        <h2 class="section-heading">React Application Architecture</h2>
        <p class="section-intro">
          Understanding a React application's file structure is the foundation
          for productive development. Each directory below has a specific purpose,
          and the relationships between directories define the application's
          architecture. The bento grid below maps the project structure spatially
          -- the largest cell contains the complete file tree, while surrounding
          cells provide focused annotations.
          <!-- A6: Context before File Tree -- never drop reader into tree cold -->
          <!-- R5-031: Editorial spread -- structure map + annotations -->
        </p>

        <!-- INFO CALLOUT -- Context orientation (A6 mitigation) -->
        <!-- Temperature: NEUTRAL (blue) -->
        <div class="callout callout--note">
          <div class="callout__label">Project Overview</div>
          <div class="callout__body">
            <p>
              This guide covers a standard React + TypeScript project using
              Vite as the build tool. The directory structure follows the
              feature-based organization pattern, which groups related
              components, hooks, and utilities by feature rather than by type.
              <!-- R5-033: Family cohesion -- Info callout introduces the system -->
            </p>
          </div>
        </div>

        <!-- BENTO GRID -- ISLANDS spatial layout -->
        <div class="bento-grid">

          <!-- CELL 1 (2x2 large): Complete File Tree -- the "hub" of SPATIAL layout -->
          <!-- AD-F-010: Largest cell = highest visual weight = most important content -->
          <div class="bento-cell bento-item--2x2">
            <div class="bento-cell__header">
              <span class="bento-cell__title">Project File Tree</span>
              <span class="cell-badge cell-badge--file-tree">Root</span>
            </div>
            <div class="file-tree">
              <span class="file-tree__item file-tree__item--dir">my-react-app/</span>
              <span class="file-tree__item file-tree__item--dir">  src/</span>
              <span class="file-tree__item file-tree__item--dir">    components/</span>
              <span class="file-tree__item file-tree__item--dir">      atoms/</span>
              <span class="file-tree__item file-tree__item--file">        Button.tsx</span>
              <span class="file-tree__item file-tree__item--file">        Button.test.tsx</span>
              <span class="file-tree__item file-tree__item--file">        Input.tsx</span>
              <span class="file-tree__item file-tree__item--file">        Input.test.tsx</span>
              <span class="file-tree__item file-tree__item--dir">      molecules/</span>
              <span class="file-tree__item file-tree__item--file">        SearchBar.tsx</span>
              <span class="file-tree__item file-tree__item--file">        FormField.tsx</span>
              <span class="file-tree__item file-tree__item--dir">      organisms/</span>
              <span class="file-tree__item file-tree__item--file">        Header.tsx</span>
              <span class="file-tree__item file-tree__item--file">        Sidebar.tsx</span>
              <span class="file-tree__item file-tree__item--file">        DataTable.tsx</span>
              <span class="file-tree__item file-tree__item--dir">    hooks/</span>
              <span class="file-tree__item file-tree__item--file">      useAuth.ts</span>
              <span class="file-tree__item file-tree__item--file">      useDebounce.ts</span>
              <span class="file-tree__item file-tree__item--file">      useFetch.ts</span>
              <span class="file-tree__item file-tree__item--dir">    pages/</span>
              <span class="file-tree__item file-tree__item--file">      Dashboard.tsx</span>
              <span class="file-tree__item file-tree__item--file">      Settings.tsx</span>
              <span class="file-tree__item file-tree__item--file">      Profile.tsx</span>
              <span class="file-tree__item file-tree__item--dir">    utils/</span>
              <span class="file-tree__item file-tree__item--file">      formatters.ts</span>
              <span class="file-tree__item file-tree__item--file">      validators.ts</span>
              <span class="file-tree__item file-tree__item--file">      api.ts</span>
              <span class="file-tree__item file-tree__item--dir">    styles/</span>
              <span class="file-tree__item file-tree__item--file">      globals.css</span>
              <span class="file-tree__item file-tree__item--file">      tokens.css</span>
              <span class="file-tree__item file-tree__item--file">      reset.css</span>
              <span class="file-tree__item file-tree__item--dir">    types/</span>
              <span class="file-tree__item file-tree__item--file">      api.d.ts</span>
              <span class="file-tree__item file-tree__item--file">      components.d.ts</span>
              <span class="file-tree__item file-tree__item--file">      global.d.ts</span>
              <span class="file-tree__item file-tree__item--highlight">    App.tsx</span>
              <span class="file-tree__item file-tree__item--highlight">    main.tsx</span>
              <span class="file-tree__item file-tree__item--file">  public/</span>
              <span class="file-tree__item file-tree__item--file">    favicon.ico</span>
              <span class="file-tree__item file-tree__item--highlight">  tsconfig.json</span>
              <span class="file-tree__item file-tree__item--highlight">  vite.config.ts</span>
              <span class="file-tree__item file-tree__item--file">  package.json</span>
              <span class="file-tree__item file-tree__item--file">  .eslintrc.cjs</span>
            </div>
          </div>

          <!-- CELL 2 (1x1): Info Callout -- Atomic Design explanation -->
          <!-- Temperature: NEUTRAL (blue) -- safe next to green below with grid gap buffer -->
          <!-- N3: Re-sequence not nest -- "In the /components directory shown above..." -->
          <div class="bento-cell">
            <div class="bento-cell__header">
              <span class="bento-cell__title">Atomic Design</span>
              <span class="cell-badge">Info</span>
            </div>
            <div class="callout callout--note" style="margin: 0;">
              <div class="callout__label">Component Organization</div>
              <div class="callout__body">
                <p>
                  The <code>/components</code> directory shown in the tree follows
                  atomic design: <strong>atoms</strong> (Button, Input) compose into
                  <strong>molecules</strong> (SearchBar) which compose into
                  <strong>organisms</strong> (Header, DataTable).
                </p>
                <p>
                  This hierarchy mirrors the component dependency graph.
                  Atoms have zero internal dependencies. Molecules import atoms.
                  Organisms import both.
                </p>
              </div>
            </div>
          </div>

          <!-- CELL 3 (1x1): Tip Callout -- Co-location -->
          <!-- Temperature: WARM (green) -- buffer from coral by grid gap + cell 2 -->
          <!-- DD-F-015: No traffic light -- green NOT adjacent to coral -->
          <div class="bento-cell">
            <div class="bento-cell__header">
              <span class="bento-cell__title">Test Co-Location</span>
              <span class="cell-badge">Tip</span>
            </div>
            <div class="callout callout--tip" style="margin: 0;">
              <div class="callout__label">Tip</div>
              <div class="callout__body">
                <p>
                  Co-locate test files with their components:
                  <code>Button.tsx</code> + <code>Button.test.tsx</code> in the same
                  directory. This eliminates the "where is the test?" hunt and keeps
                  related files within one visual scan of the file tree.
                  <!-- G1: Tight semantic proximity -- test next to source -->
                </p>
              </div>
            </div>
          </div>

          <!-- CELL 4 (2x1): Code Snippet -- tsconfig path aliases -->
          <!-- Neutral component between Tip (green) and Gotcha (coral) -->
          <!-- T2: Velocity rule -- FAST code between SLOW callouts -->
          <div class="bento-cell bento-item--2x1">
            <div class="bento-cell__header">
              <span class="bento-cell__title">Path Aliases Configuration</span>
              <span class="cell-badge">Config</span>
            </div>
            <div class="bento-cell__body">
              <p>
                The <code>tsconfig.json</code> highlighted in the file tree configures
                path aliases that eliminate deep relative imports. This is the single
                most impactful configuration for developer experience.
              </p>
            </div>
            <pre><code><span class="pu">{</span>
  <span class="st">"compilerOptions"</span><span class="pu">:</span> <span class="pu">{</span>
    <span class="st">"baseUrl"</span><span class="pu">:</span> <span class="st">"."</span><span class="pu">,</span>
    <span class="st">"paths"</span><span class="pu">:</span> <span class="pu">{</span>
      <span class="st">"@components/*"</span><span class="pu">:</span> <span class="pu">[</span><span class="st">"src/components/*"</span><span class="pu">]</span><span class="pu">,</span>
      <span class="st">"@hooks/*"</span><span class="pu">:</span> <span class="pu">[</span><span class="st">"src/hooks/*"</span><span class="pu">]</span><span class="pu">,</span>
      <span class="st">"@utils/*"</span><span class="pu">:</span> <span class="pu">[</span><span class="st">"src/utils/*"</span><span class="pu">]</span><span class="pu">,</span>
      <span class="st">"@types/*"</span><span class="pu">:</span> <span class="pu">[</span><span class="st">"src/types/*"</span><span class="pu">]</span><span class="pu">,</span>
      <span class="st">"@styles/*"</span><span class="pu">:</span> <span class="pu">[</span><span class="st">"src/styles/*"</span><span class="pu">]</span>
    <span class="pu">}</span>
  <span class="pu">}</span>
<span class="pu">}</span></code></pre>
          </div>

          <!-- CELL 5 (1x1): Gotcha Callout -- import anti-pattern -->
          <!-- Temperature: COLD (coral) -- buffered from green Tip by Cell 4 (neutral code) -->
          <!-- DD-F-015: Traffic light avoided -- neutral cell between green and coral -->
          <div class="bento-cell">
            <div class="bento-cell__header">
              <span class="bento-cell__title">Import Depth</span>
              <span class="cell-badge">Gotcha</span>
            </div>
            <div class="callout callout--gotcha" style="margin: 0;">
              <div class="callout__label">Gotcha</div>
              <div class="callout__body">
                <p>
                  Never import from <code>src/</code> using relative paths that go
                  up 3+ levels. <code>../../../utils/formatters</code> is a maintenance
                  hazard. Use path aliases: <code>@utils/formatters</code>.
                </p>
                <p>
                  If you see <code>../../..</code> in an import, it means the path
                  aliases are either misconfigured or not being used.
                </p>
              </div>
            </div>
          </div>

        </div>
        <!-- End bento grid -->
      </section>

      <!-- =================================================================
           SMOOTH TRANSITION -- Bento to Choreography
           AD-F-025: Same spatial mechanism, minimal breathing
           ================================================================= -->
      <div class="transition--smooth" role="separator" aria-hidden="true"></div>

      <!-- =================================================================
           SECTION 2: CHOREOGRAPHY -- Hub-and-spoke architecture comparison
           AD-F-017: Direction change = density change
           Each spoke is a new ISLAND with its own density cluster
           Recipe 6: File Tree -> Core Abstraction -> Decision Matrix -> Tip
           ================================================================= -->
      <section aria-label="Architecture Pattern Comparison">
        <h2 class="section-heading">Choosing an Architecture Pattern</h2>
        <p class="section-intro">
          The file tree above shows <em>one</em> way to organize a React project.
          But architecture is a decision, not a default. The choreographic layout
          below places a decision matrix at the hub, with each architecture variant
          radiating outward as a spoke -- each spoke containing its own file tree
          and advisory callout.
          <!-- AD-F-017: Direction change from grid to hub-spoke = density mode change -->
          <!-- R5-039: Recipe 6 architecture overview structure -->
        </p>

        <div class="choreo-section">

          <!-- CORE ABSTRACTION -- The organizing principle -->
          <!-- H4: Editorial spread -- Core Abstraction explains WHY before HOW -->
          <!-- G2: Framed = bounded thought -->
          <div class="core-abstraction">
            <h3 class="core-abstraction__title">The Architecture Decision</h3>
            <div class="core-abstraction__body">
              <p>
                A React application's file structure is not arbitrary. It reflects
                a fundamental choice about how your team thinks about the codebase:
                by <strong>feature</strong> (what it does), by <strong>layer</strong>
                (what kind of thing it is), or by <strong>domain</strong> (what
                business concept it serves). Each approach has a different failure
                mode and a different scaling ceiling.
              </p>
              <p>
                The decision is architectural, not aesthetic. It determines how
                new developers navigate the codebase, how features get added,
                and where boundaries form when the application grows.
              </p>
            </div>
          </div>

          <!-- HUB: Decision Matrix -->
          <div class="choreo-hub">
            <h3 class="choreo-hub__title">Architecture Pattern Comparison</h3>
            <table class="decision-matrix">
              <thead>
                <tr>
                  <th>Criterion</th>
                  <th>Feature-Based</th>
                  <th>Layer-Based</th>
                  <th>Domain-Driven</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Organization</td>
                  <td class="recommended">By feature (auth/, dashboard/)</td>
                  <td>By type (components/, hooks/)</td>
                  <td>By domain (user/, billing/)</td>
                </tr>
                <tr>
                  <td>Navigation</td>
                  <td class="recommended">Find by feature name</td>
                  <td>Find by file type</td>
                  <td>Find by business concept</td>
                </tr>
                <tr>
                  <td>Team scaling</td>
                  <td class="recommended">Teams own features</td>
                  <td>Bottleneck at shared layers</td>
                  <td>Teams own domains</td>
                </tr>
                <tr>
                  <td>Complexity ceiling</td>
                  <td>Medium projects</td>
                  <td>Small projects</td>
                  <td class="recommended">Large projects</td>
                </tr>
                <tr>
                  <td>Refactoring cost</td>
                  <td>Low (localized)</td>
                  <td>High (cross-cutting)</td>
                  <td class="recommended">Low (bounded contexts)</td>
                </tr>
                <tr>
                  <td>Beginner friendliness</td>
                  <td>Moderate</td>
                  <td class="recommended">High (intuitive grouping)</td>
                  <td>Low (requires domain knowledge)</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- SPOKES -- radiating architecture variants -->
          <div class="choreo-spokes">

            <!-- SPOKE 1: Feature-Based -- with File Tree + Tip -->
            <!-- Direction: hub -> left spoke -->
            <div class="choreo-spoke">
              <div class="choreo-spoke__label">Spoke 1 -- Recommended</div>
              <h3 class="choreo-spoke__title">Feature-Based Structure</h3>
              <div class="file-tree">
                <span class="file-tree__item file-tree__item--dir">src/</span>
                <span class="file-tree__item file-tree__item--dir">  features/</span>
                <span class="file-tree__item file-tree__item--dir">    auth/</span>
                <span class="file-tree__item file-tree__item--file">      LoginForm.tsx</span>
                <span class="file-tree__item file-tree__item--file">      useAuth.ts</span>
                <span class="file-tree__item file-tree__item--file">      auth.api.ts</span>
                <span class="file-tree__item file-tree__item--file">      auth.types.ts</span>
                <span class="file-tree__item file-tree__item--dir">    dashboard/</span>
                <span class="file-tree__item file-tree__item--file">      Dashboard.tsx</span>
                <span class="file-tree__item file-tree__item--file">      useDashboard.ts</span>
                <span class="file-tree__item file-tree__item--file">      widgets/</span>
                <span class="file-tree__item file-tree__item--dir">  shared/</span>
                <span class="file-tree__item file-tree__item--file">    Button.tsx</span>
                <span class="file-tree__item file-tree__item--file">    Input.tsx</span>
              </div>
              <!-- Tip callout -- warm (green), G4: advisory cluster with File Tree -->
              <div class="callout callout--tip" style="margin: var(--space-4) 0 0 0;">
                <div class="callout__label">Tip</div>
                <div class="callout__body">
                  <p>
                    Each feature directory is self-contained: components, hooks,
                    API calls, and types all live together. Deleting a feature
                    means deleting one directory.
                  </p>
                </div>
              </div>
            </div>

            <!-- SPOKE 2: Layer-Based -- with File Tree + Gotcha -->
            <!-- Direction: hub -> right spoke -->
            <!-- DD-F-015: Gotcha (coral) is NOT adjacent to Tip (green) above -- -->
            <!-- they are in separate spokes with grid gap between them -->
            <div class="choreo-spoke">
              <div class="choreo-spoke__label">Spoke 2 -- Traditional</div>
              <h3 class="choreo-spoke__title">Layer-Based Structure</h3>
              <div class="file-tree">
                <span class="file-tree__item file-tree__item--dir">src/</span>
                <span class="file-tree__item file-tree__item--dir">  components/</span>
                <span class="file-tree__item file-tree__item--file">    LoginForm.tsx</span>
                <span class="file-tree__item file-tree__item--file">    Dashboard.tsx</span>
                <span class="file-tree__item file-tree__item--file">    Button.tsx</span>
                <span class="file-tree__item file-tree__item--dir">  hooks/</span>
                <span class="file-tree__item file-tree__item--file">    useAuth.ts</span>
                <span class="file-tree__item file-tree__item--file">    useDashboard.ts</span>
                <span class="file-tree__item file-tree__item--dir">  services/</span>
                <span class="file-tree__item file-tree__item--file">    auth.api.ts</span>
                <span class="file-tree__item file-tree__item--file">    dashboard.api.ts</span>
                <span class="file-tree__item file-tree__item--dir">  types/</span>
                <span class="file-tree__item file-tree__item--file">    auth.types.ts</span>
                <span class="file-tree__item file-tree__item--file">    dashboard.types.ts</span>
              </div>
              <!-- Gotcha callout -- cold (coral) -->
              <div class="callout callout--gotcha" style="margin: var(--space-4) 0 0 0;">
                <div class="callout__label">Gotcha</div>
                <div class="callout__body">
                  <p>
                    Layer-based structure scatters related code across directories.
                    Modifying the auth feature requires changes in <code>components/</code>,
                    <code>hooks/</code>, <code>services/</code>, and <code>types/</code>
                    simultaneously. This cross-cutting friction grows with project size.
                  </p>
                </div>
              </div>
            </div>

            <!-- SPOKE 3: Reasoning Component -- full width -->
            <!-- Direction: hub -> bottom spoke (return sweep) -->
            <div class="choreo-spoke choreo-spoke--full">
              <div class="choreo-spoke__label">Spoke 3 -- Recommendation</div>
              <h3 class="choreo-spoke__title">Which Architecture Fits Your Team?</h3>
              <div class="reasoning">
                <div class="reasoning__title">Decision Framework</div>
                <div class="reasoning__body">
                  <p>
                    <strong>Start with feature-based.</strong> Most React applications
                    benefit from feature-based organization because it aligns code
                    boundaries with team boundaries and user-facing features. The
                    cognitive overhead of "where does this go?" reduces to "which
                    feature does this belong to?"
                  </p>
                  <p>
                    <strong>Evolve to domain-driven</strong> when your application
                    serves multiple business domains with distinct data models.
                    Domain-driven design is more rigorous but provides clearer
                    boundaries at scale. The transition from feature-based to
                    domain-driven is incremental -- features are proto-domains.
                  </p>
                  <p>
                    <strong>Avoid layer-based</strong> for projects with more than
                    10 components. The "where is it?" problem compounds quadratically
                    with project size. Layer-based is intuitive for tutorials but
                    does not scale.
                  </p>
                </div>
              </div>
            </div>

          </div>
          <!-- End choreo-spokes -->
        </div>
        <!-- End choreo-section -->
      </section>

      <!-- =================================================================
           SECTION 3: Closing -- Challenge + Capstone
           ISLANDS density: Final island before ocean
           ================================================================= -->
      <section aria-label="Challenge and Summary">
        <h2 class="section-heading">Architecture Challenge</h2>

        <!-- Challenge Callout -- warm (amber) -->
        <div class="callout callout--challenge">
          <div class="callout__label">Challenge</div>
          <div class="callout__body">
            <p>
              Take the layer-based file tree from Spoke 2 and refactor it into
              feature-based organization. Which files stay in <code>shared/</code>
              and which move into feature directories? Where does <code>Button.tsx</code>
              belong -- is it a shared atom, or does it belong to the design system
              feature? Document your reasoning.
            </p>
          </div>
        </div>

        <!-- Essence Callout -- Soul Piece #2 -->
        <div class="callout callout--essence">
          <div class="callout__label">Essence</div>
          <div class="callout__body">
            A file tree is not documentation about structure -- it is the structure.
            The callouts do not explain the tree; they reveal what the tree implies.
            The combination of structure and annotation creates a spatial argument:
            where a file lives IS what it means.
            <!-- CD-F-009: File Tree + Callout left-anchor coexistence -->
          </div>
        </div>
      </section>

      <!-- =================================================================
           RAR Block -- Research Application Record
           ================================================================= -->
      <section aria-label="Research Application Record" class="rar-block">
        <h2>Research Application Record</h2>

        <h3>1. Combination Pattern</h3>
        <p>DD: ISLANDS (discrete dense clusters) | OD: SPATIAL (position-based meaning) | AD: Bento Grid + Choreography (spatial container + directional flow)</p>

        <h3>2. Transition Type</h3>
        <p>Bento Grid to Choreography = <strong>SMOOTH</strong> (same spatial mechanism, minimal breathing). AD-F-025 transition grammar: both patterns use position as the encoding mechanism, so the reader's spatial reasoning transfers directly.</p>

        <h3>3. Density Pattern Fidelity</h3>
        <p>ISLANDS pattern verified: 6 bento cells as discrete content islands separated by 32px grid gap ocean. Choreography hub-spoke sections separated by 48px inter-spoke gaps. Page sections separated by 64px ocean (--space-16). Ocean whitespace is NOT filled with content -- it is structural emptiness.</p>

        <h3>4. Finding IDs</h3>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Description</th>
              <th>Class</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>CD-F-009</strong></td>
              <td>File Tree and Callouts share left-anchored DNA (border-left: 4px) but avoid monotony through visual weight differentiation: File Tree uses dark border (#1A1A1A) on breathing background (#FAF5ED) with monospace font, while Callouts use colored accent borders on sparse background (#FEF9F5) with body font. The shared mechanism (left-anchor) creates family cohesion (H1) while the weight variation prevents left-anchor fatigue.</td>
              <td>B (Extending H3)</td>
            </tr>
            <tr>
              <td><strong>CD-F-010</strong></td>
              <td>ISLANDS density survives the Bento-to-Choreography SMOOTH transition because both patterns use position as their primary encoding mechanism. The reader's spatial reasoning mode does not need to reset -- bento cells and choreography spokes are both "content at a position." The transition requires only a minimal visual divider (120px line), not a breathing zone.</td>
              <td>A (Confirming AD-F-025)</td>
            </tr>
            <tr>
              <td><strong>CD-F-011</strong></td>
              <td>Callout Cacophony (A1) is mitigated in File Tree pages by using the File Tree itself as a neutral interleaving component. The tree is neither warm nor cold -- it is structural. Placing the tree between callouts of different temperatures (Tip/green, Gotcha/coral) eliminates the traffic-light anti-pattern (DD-F-015) without requiring additional breathing components.</td>
              <td>B (Extending A1 mitigation)</td>
            </tr>
            <tr>
              <td><strong>CD-F-012</strong></td>
              <td>The Decision Matrix component functions as a choreography hub that converts the reader from passive scanning (bento grid browsing) to active comparison (weighing options). This is a cognitive mode shift: bento cells present information for absorption, while the matrix presents information for decision. The hub-spoke structure physically separates the "learn" mode (spokes with file trees) from the "decide" mode (hub with matrix).</td>
              <td>B (Extending AD-F-017)</td>
            </tr>
          </tbody>
        </table>

        <h3>5. R-5 Combination Theory Citations</h3>
        <p>
          R5-001 (combination rules applied), R5-007 (velocity: FAST code snippet between SLOW callouts in bento),
          R5-011 (temperature: blue Info before green Tip, neutral Code before coral Gotcha),
          R5-015 (weight: 1 heavy File Tree cell balanced by 2 light callout cells),
          R5-020 (proximity: tree node + annotating callout at 8-16px within cell, 48-64px between sections),
          R5-025 (callout cacophony: max 2 callouts per viewport, File Tree as buffer),
          R5-031 (editorial spread: File Tree + Core Abstraction = magazine-like H4),
          R5-033 (family cohesion: all callout types share 2-zone DNA),
          R5-039 (Recipe 6: architecture overview structure followed in choreography section).
          <strong>Total: 9 R-5 citations.</strong>
        </p>

        <h3>6. R-4 and R-2 Citations</h3>
        <p>
          R4-019 (bento varied cell sizes), R4-023 (CSS Grid implementation), R4-025 (readability over aesthetics).
          R2-4.1 (bento grid layout), R2-2.2 (card-based hierarchy).
          <strong>Total: 5 citations.</strong>
        </p>

        <h3>7. AD-F Citations</h3>
        <p>
          AD-F-009 (grid cells ARE islands), AD-F-010 (cell size = hierarchy),
          AD-F-017 (direction change = density change), AD-F-025 (transition grammar: bento -> choreography = SMOOTH).
          <strong>Total: 4 AD-F citations.</strong>
        </p>

        <h3>8. DD-F and OD-F Citations</h3>
        <p>
          DD-F-003 (ISLANDS pattern), DD-F-006 (fractal 5 scales), DD-F-014 (max 2 callouts per viewport),
          DD-F-015 (no traffic-light adjacency).
          OD-F-005 (organization IS density -- spatial position = content meaning).
          <strong>Total: 5 citations.</strong>
        </p>

        <h3>9. Combination Rule Compliance</h3>
        <table>
          <thead>
            <tr>
              <th>Rule</th>
              <th>Status</th>
              <th>Evidence</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Velocity (T2)</td>
              <td>PASS</td>
              <td>Code Snippet (FAST) between Info Callout (SLOW) and Gotcha Callout (SLOW) in bento grid</td>
            </tr>
            <tr>
              <td>Temperature (T3)</td>
              <td>PASS</td>
              <td>Blue (neutral) -> Green (warm) -> Code (neutral) -> Coral (cold). No warm-cold adjacency.</td>
            </tr>
            <tr>
              <td>Weight (G3)</td>
              <td>PASS</td>
              <td>Heavy File Tree (2x2) balanced by 4 light cells (1x1, 1x1, 2x1, 1x1)</td>
            </tr>
            <tr>
              <td>Proximity (G1)</td>
              <td>PASS</td>
              <td>Within-island: 16px (--space-4). Between islands: 32px grid gap. Between sections: 64px.</td>
            </tr>
          </tbody>
        </table>

        <h3>10. Soul Compliance</h3>
        <table>
          <thead>
            <tr>
              <th>Check</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>border-radius: 0</code> everywhere</td><td>PASS</td></tr>
            <tr><td><code>box-shadow: none</code> everywhere</td><td>PASS</td></tr>
            <tr><td>No <code>filter: drop-shadow()</code></td><td>PASS</td></tr>
            <tr><td>Instrument Serif italic for Essence/Core ONLY</td><td>PASS</td></tr>
            <tr><td>2-zone callouts + border-left: 4px</td><td>PASS</td></tr>
            <tr><td>No physical-movement animation</td><td>PASS</td></tr>
            <tr><td>opacity: 1 on ALL backgrounds</td><td>PASS</td></tr>
            <tr><td>3-category borders ONLY (1px, 3px, 4px)</td><td>PASS</td></tr>
            <tr><td>#E83025 only accent</td><td>PASS</td></tr>
            <tr><td>No hover depth effects</td><td>PASS</td></tr>
          </tbody>
        </table>

        <h3>11. Anti-Patterns Avoided</h3>
        <table>
          <thead>
            <tr>
              <th>Anti-Pattern</th>
              <th>Avoided?</th>
              <th>How</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Callout Cacophony (A1)</td>
              <td>YES</td>
              <td>Max 2 callouts per viewport. File Tree + Code Snippet interleave between callouts. Distributed across 6 bento cells + 3 spokes.</td>
            </tr>
            <tr>
              <td>Shared Left-Anchor Monotony</td>
              <td>YES</td>
              <td>File Tree: dark border (#1A1A1A), monospace, breathing bg. Callouts: colored borders, body font, sparse bg. Same mechanism, different weight.</td>
            </tr>
            <tr>
              <td>Temperature Cycling (A5)</td>
              <td>YES</td>
              <td>Blue (N) -> Green (W) -> neutral Code -> Coral (C). Never warm-cold adjacent.</td>
            </tr>
            <tr>
              <td>Traffic Light (DD-F-015)</td>
              <td>YES</td>
              <td>Green Tip and Coral Gotcha always separated by neutral component (Code Snippet or grid gap).</td>
            </tr>
            <tr>
              <td>2px Borders</td>
              <td>YES</td>
              <td>All borders: 3px (structural), 4px (semantic), 1px (separator/micro). Zero 2px.</td>
            </tr>
            <tr>
              <td>Semi-Transparent Backgrounds</td>
              <td>YES</td>
              <td>All backgrounds: #FEF9F5, #FFFFFF, #FAF5ED, #1A1A1A. Zero rgba alpha &lt; 1.0.</td>
            </tr>
            <tr>
              <td>Missing Context (A6)</td>
              <td>YES</td>
              <td>Info Callout and section intro before every File Tree. Never tree-cold.</td>
            </tr>
            <tr>
              <td>Nesting (N1)</td>
              <td>YES</td>
              <td>Callouts sit beside or below File Trees, never nested inside them. N3 re-sequence: "shown above."</td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- Page End Marker -->
      <div class="page-end" role="contentinfo" aria-label="End of exploration">
        CD-003 FILE TREE WITH CALLOUTS
      </div>

    </div>
  </main>

  <!-- Footer -->
  <footer class="page-footer">
    <div class="page-footer__inner">
      <span class="page-footer__id">CD-003 &middot; File Tree with Callouts</span>
      <div class="page-footer__rule"></div>
      <span class="page-footer__id">DD:ISLANDS &middot; OD:SPATIAL &middot; AD:BENTO+CHOREO</span>
    </div>
  </footer>
</body>
</html>

<!-- CD-F-009: File Tree and Callout Left-Anchor Coexistence
Finding: File Tree and Callouts both use border-left: 4px solid as their primary
visual anchor (H3 shared visual anchors), creating a risk of left-anchor monotony.
The solution is weight differentiation within the shared mechanism: File Tree uses
a dark (#1A1A1A) structural border on breathing background (#FAF5ED) with monospace
font, while Callouts use colored accent borders (blue/green/coral/amber/purple) on
sparse background (#FEF9F5) with body font. The left-anchor DNA is preserved for
family cohesion (H1), but the visual weight is sufficiently different to prevent
monotony. The distinction is semantic: File Tree's dark border signals "structure,"
while Callout accent borders signal "advice."
Evidence: Visible in bento Cell 1 (File Tree, dark border) vs Cells 2-3-5 (Callouts,
colored borders). Same 4px width, different colors and backgrounds.
Chain Impact: CD migration pages using File Tree + Callout combinations should follow
this weight-differentiation pattern. The File Tree should always feel heavier
(structural) while Callouts feel lighter (advisory).
-->

<!-- CD-F-010: SMOOTH Transition Preserves ISLANDS Density
Finding: The Bento Grid to Choreography transition is classified SMOOTH in the AD-F-025
transition grammar because both patterns use position as their primary encoding
mechanism. In practice, this means the reader's spatial reasoning mode does not need
to reset at the transition boundary. Bento cells encode meaning through position
(large cell = important), and choreography spokes encode meaning through position
(hub = decision, spokes = options). The ISLANDS density pattern survives the transition
because both patterns maintain discrete content clusters separated by whitespace ocean
-- the cluster container changes (cell vs spoke) but the density rhythm does not.
Evidence: The transition divider is only 32px (--space-8) with a minimal 120px line,
compared to 64px (--space-16) for a section break. The ISLANDS ocean spacing (48-64px
between spokes) resumes immediately in the choreography section.
Chain Impact: SMOOTH transitions between spatially-equivalent patterns do not require
density breathing zones. The minimal divider signals "new section" without signaling
"new mode."
-->

<!-- CD-F-011: File Tree as Temperature Buffer for Callout Sequences
Finding: The Callout Cacophony anti-pattern (A1) becomes a specific risk when a page
contains 4+ callout types (Info, Tip, Gotcha, Challenge). The Traffic Light
anti-pattern (DD-F-015) prohibits green Tip adjacent to coral Gotcha. In a File Tree
page, the File Tree itself serves as a natural temperature buffer. The tree is
temperature-neutral (it is structural, not advisory), so placing it between callouts
of different temperatures eliminates both cacophony and traffic-light without requiring
additional breathing components. This is more efficient than inserting a generic
breathing zone, because the File Tree provides content value while also serving the
temperature-buffering function.
Evidence: In the bento grid, Cell 2 (Info/blue) -> Cell 3 (Tip/green) -> Cell 4
(Code/neutral) -> Cell 5 (Gotcha/coral). The code snippet in Cell 4 buffers the
green-coral transition. In choreography spokes, Spoke 1 (Tip/green) and Spoke 2
(Gotcha/coral) are in separate grid cells with 32px gap -- the spatial separation
itself functions as a buffer.
Chain Impact: Pages with multiple callout types should identify a "neutral" component
(File Tree, Code Snippet, Decision Matrix) to serve as temperature buffer rather than
relying solely on whitespace.
-->

<!-- CD-F-012: Decision Matrix as Cognitive Mode Hub
Finding: The Decision Matrix component placed at the choreography hub creates a
cognitive mode shift from passive absorption (bento grid browsing, where the reader
scans content islands) to active comparison (weighing architectural options). This
is the choreographic direction change that AD-F-017 describes as kinetic equivalence:
the change in reading direction (scan -> compare -> evaluate spokes) IS the change
in density pattern (browse -> analyze -> decide). The hub-spoke structure physically
separates the "learn" mode (File Tree spokes showing implementations) from the
"decide" mode (Decision Matrix hub showing tradeoffs). The Core Abstraction component
placed before the hub provides the framing that makes the mode shift legible.
Evidence: Reading flow: Bento (scan 6 cells) -> Core Abstraction (frame the decision)
-> Decision Matrix hub (compare options) -> Spoke 1 (see feature-based) -> Spoke 2
(see layer-based) -> Spoke 3 (receive recommendation). The flow alternates between
learning and deciding.
Chain Impact: Choreography hub-spoke layouts should place the decision/comparison
component at the hub (center) and the evidence/implementation components at the spokes
(periphery). The Core Abstraction before the hub is essential for framing the mode
shift.
-->
