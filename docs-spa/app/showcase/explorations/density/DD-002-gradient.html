<!-- ═══════════════════════════════════════════════════════════════════════
     INLINE THREADING HEADER — Phase 2B
     File: docs-spa/app/showcase/explorations/density/DD-002-gradient.html
     Tier: A | Batch: 3 | Generated: 2026-02-06
     ═══════════════════════════════════════════════════════════════════════

1. WHY THIS EXISTS
     ─────────────────────────────────────────────────────────────────────
     DD-002-gradient.html is the second density exploration, implementing
     the CRESCENDO pattern — progressive density increase from light to
     dense. It validates that documentation content can open with generous
     whitespace and gradually compress toward higher information density,
     guiding the reader's eye and stamina through an intentional ramp.

     DD-002 sits in the DD lesson chain: it inherits corrections from
     DD-001 (standardized borders, no traffic-light palette) and its own
     lessons feed forward into DD-003. PIPELINE-BACKBONE.md cites this
     file as the "gold standard" density exploration.

     Exploration finding DD-F-002 was generated from this artifact.

2. THE QUESTION IT ANSWERS
     ─────────────────────────────────────────────────────────────────────
     Can documentation pages use a CRESCENDO density model — starting
     sparse and progressively tightening — without sacrificing readability
     or soul compliance? Does gradual density increase improve onboarding
     and progressive learning experiences?

     Answer: YES. Score 35/40. Second-highest DD tier. The CRESCENDO
     pattern is validated and cataloged in density-patterns.md. Best
     suited for onboarding flows, progressive learning, and any content
     where the reader should be eased in before encountering dense
     reference material.

3. STATUS
     ─────────────────────────────────────────────────────────────────────
     | Field              | Value                                       |
     |--------------------|---------------------------------------------|
     | Status             | COMPLETE — INCLUDE                          |
     | Score              | 35/40                                       |
     | Soul Compliance    | 100%                                        |
     | Pattern            | CRESCENDO (progressive density increase)    |
     | Lines              | 767                                         |
     | Blast Radius       | MEDIUM (~6-8 inbound references)            |
     | Lesson Chain       | DD-001 → DD-002 → DD-003                   |
     | Finding Generated  | DD-F-002                                    |
     | Threading Ready    | YES — no gaps                               |

4. SOUL ALIGNMENT — TOKEN VERIFICATION
     ─────────────────────────────────────────────────────────────────────
     All values locked to DESIGN-TOKEN-SUMMARY.md.
     Original line numbers (before header insertion — shift ~90 lines):

     | Token               | Value                    | Line | Locked |
     |---------------------|--------------------------|------|--------|
     | --color-primary     | #E83025                  |   20 | YES    |
     | --color-background  | #FEF9F5                  |   21 | YES    |
     | --color-text        | #1A1A1A                  |   22 | YES    |
     | --color-text-second | #666666                  |   23 | YES    |
     | --color-border      | #E0D5C5                  |   24 | YES    |
     | --color-border-sub  | #F0EBE3                  |   25 | YES    |
     | --font-display      | 'Instrument Serif',...   |   28 | YES    |
     | --font-body         | 'Inter', system-ui,...   |   29 | YES    |
     | --font-mono         | 'JetBrains Mono',...     |   30 | YES    |
     | --border-radius     | 0                        |   33 | YES    |
     | --box-shadow        | none                     |   34 | YES    |

     CSS comment at line 16 (original): "DD-001 LESSONS APPLIED:
     Standardized borders, no traffic-light"
     :root block: lines 18-57 (original)

     Soul compliance: 100% — all 5 pieces verified.

5. BUILT ON (PROVENANCE)
     ─────────────────────────────────────────────────────────────────────
     | Source                       | Role                | Key Values  |
     |------------------------------|---------------------|-------------|
     | R3-004                       | Research finding    | Progressive |
     |                              | (CRESCENDO)         | density     |
     |                              |                     | increase    |
     |                              |                     | pattern     |
     |                              |                     | definition  |
     | R3-012                       | Research finding    | Density     |
     |                              |                     | variation   |
     |                              |                     | techniques  |
     | DD-001-breathing.html        | Predecessor         | Lesson:     |
     |                              | (lesson chain)      | standardize |
     |                              |                     | borders, no |
     |                              |                     | traffic-    |
     |                              |                     | light       |
     | DESIGN-TOKEN-SUMMARY.md      | Locked token source | Complete    |
     |                              |                     | :root block |

     Primary source: design-extraction/component-system/
       perceptual-audit-v2/synthesis/DESIGN-TOKEN-SUMMARY.md
     | COMPREHENSIVE-AUDIT-SPECIFICATION.md | Comprehensive     | Code block  |
     |                              | hierarchical audit fix  | colors,     |
     |                              |                         | skip-link,  |
     |                              |                         | focus-visible|

6. MUST HONOR (CONSTRAINTS)
     ─────────────────────────────────────────────────────────────────────
     H1: DD-001 lessons applied — standardized borders (4px left),
         no traffic-light color palette. CSS comment at line 16
         (original) documents this.
     H2: Soul compliance — all 5 pieces with locked CSS values.
         border-radius: 0, box-shadow: none, correct fonts/colors.
     H3: CRESCENDO progressive density — content MUST genuinely
         increase in information density from first section to last.
         This is the pattern's core validation criterion.
     H4: Lesson chain integrity — DD-002 lessons feed into DD-003.
         Modifying DD-002 may invalidate DD-003 assumptions.

7. FINDING GENERATED
     ─────────────────────────────────────────────────────────────────────
     | Finding  | Name                | Defined In                      |
     |----------|---------------------|---------------------------------|
     | DD-F-002 | CRESCENDO pattern   | DD-outbound-findings.md         |
     |          | validation          |                                 |

     DD-F-002 proves that progressive density increase is a viable
     documentation pattern. The CRESCENDO model starts with generous
     whitespace for orientation and ramps toward dense reference
     material, maintaining readability throughout.

8. CONSUMED BY (DOWNSTREAM)
     ─────────────────────────────────────────────────────────────────────
     | Consumer                          | What It Takes                |
     |-----------------------------------|------------------------------|
     | DD-outbound-findings.md           | Extracts DD-F-002 CRESCENDO  |
     | density-patterns.md               | CRESCENDO pattern, 35/40     |
     | PATTERN-INDEX.md                  | Lists CRESCENDO in selection |
     | RETROACTIVE-AUDIT-DD-001-006.md   | Cross-matrix audit entry     |
     | DD-REAUDIT-PERCEPTUAL-SYNTHESIS   | Perceptual scoring reference |
     | RESEARCH-ACTIVE.md                | Tracks R3-004 as APPLIED     |
     | PIPELINE-BACKBONE.md              | Cites as "gold standard"     |
     | OD-002-narrative.html             | Primary CRESCENDO source — narrative arc (sparse→dense) validates DD-F-002 CRESCENDO pattern |
     | OD-004-confidence.html            | Secondary CRESCENDO source — confidence stratification (established→exploratory) creates CRESCENDO density gradient |
     | OD-006-creative.html              | Emergent synthesis — uses DD-002 CRESCENDO as page-level pattern (prologue sparse → discoveries build → synthesis dense → coda sparse) |

     Blast radius: MEDIUM. Edits here ripple to ~6-8 downstream
     consumers. Score changes require updates to density-patterns.md,
     RETROACTIVE-AUDIT, and DD-REAUDIT-PERCEPTUAL-SYNTHESIS.

9. RESEARCH DEBT
     ─────────────────────────────────────────────────────────────────────
     D1: PIPELINE-BACKBONE.md cites "34/40" but actual score is 35/40.
         Score discrepancy has not been resolved. Low severity but
         creates confusion for consumers reading BACKBONE first.
     D2: R3-012 application is not specifically annotated in the HTML,
         unlike R3-004. No CSS comment or inline annotation traces
         where R3-012 influenced the implementation.
     D3: DD-001 lesson integration is documented in CSS comment but
         the individual lessons are not independently cataloged.
         No LESSONS.md or structured lesson registry exists.
     D4: No progressive density measurement tool exists. Nothing
         programmatically verifies that content actually increases
         in density from first section to last.
     D5: CRESCENDO pattern could benefit from min/max density contrast
         specification — how sparse is "sparse" and how dense is
         "dense" in measurable terms?

10. DIAGNOSTIC QUESTIONS
     ─────────────────────────────────────────────────────────────────────
     Q1: Does the :root block match DESIGN-TOKEN-SUMMARY.md exactly?
         → Verify lines 18-57 (original) against source of truth.
     Q2: Is DD-F-002 defined in DD-outbound-findings.md?
         → Confirm finding exists and references this file.
     Q3: Does the CSS comment cite DD-001 lessons?
         → Line 16 (original): "DD-001 LESSONS APPLIED" — verify
            lesson chain integrity is intact.
     Q4: Does density-patterns.md cite 35/40 as this file's score?
         → Check for score consistency (note: BACKBONE says 34/40).
     Q5: Does content visibly increase in information density from
         first section to last?
         → Open in browser. First section should be airy/spacious.
            Final section should be noticeably denser. This is the
            CRESCENDO validation criterion.

     ═══════════════════════════════════════════════════════════════════════ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DD-002: Density Gradient</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    /* ═══════════════════════════════════════════════════════════════════════════
       LOCKED DESIGN TOKENS — From DESIGN-TOKEN-SUMMARY.md
       DD-001 LESSONS APPLIED: Standardized borders, no traffic-light
       ═══════════════════════════════════════════════════════════════════════════ */
    :root {
      /* Colors */
      --color-primary: #E83025;
      --color-background: #FEF9F5;
      --color-text: #1A1A1A;
      --color-text-secondary: #666666;
      --color-border: #E0D5C5;
      --color-border-subtle: #F0EBE3;

      /* Typography */
      --font-display: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

      /* Geometry — LOCKED */
      --border-radius: 0;
      --box-shadow: none;

      /* Spacing */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --space-16: 64px;
      --space-20: 80px;

      /* Callout Accents */
      --accent-blue: #4A90D9;
      --accent-green: #4A9D6B;
      --accent-amber: #D97706;
      --accent-purple: #7C3AED;

      /* STANDARDIZED BORDER — Lesson from DD-001 */
      --border-left-width: 4px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-body);
      background: var(--color-background);
      color: var(--color-text);
      line-height: 1.7;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       EXPLORATION HEADER
       ═══════════════════════════════════════════════════════════════════════════ */
    .exploration-header {
      border-bottom: 3px solid var(--color-primary);
      padding: var(--space-6);
      background: white;
      margin-bottom: var(--space-16);
    }

    .exploration-id {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--color-primary);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: var(--space-2);
    }

    .exploration-title {
      font-family: var(--font-display);
      font-size: 32px;
      font-style: italic;
      margin-bottom: var(--space-3);
    }

    .exploration-hypothesis {
      font-size: 14px;
      color: var(--color-text-secondary);
      max-width: 600px;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       PAGE CONTAINER
       ═══════════════════════════════════════════════════════════════════════════ */
    .page-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 var(--space-6);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       CRESCENDO DENSITY SECTIONS
       Pattern: SPARSE → MEDIUM → DENSE (gradual build)
       Research Basis: R-3 CRESCENDO pattern, Progressive Disclosure
       ═══════════════════════════════════════════════════════════════════════════ */

    /* SPARSE: Maximum breathing room, single focus */
    .section-sparse {
      padding: var(--space-20) var(--space-6);
      margin-bottom: var(--space-12);
    }

    /* MEDIUM: Moderate density, 2-3 elements */
    .section-medium {
      padding: var(--space-12) var(--space-6);
      margin-bottom: var(--space-10);
    }

    /* DENSE: Information-rich, multiple components */
    .section-dense {
      padding: var(--space-6);
      margin-bottom: var(--space-8);
    }

    /* Density level indicator */
    .density-indicator {
      font-family: var(--font-mono);
      font-size: 10px;
      color: var(--color-border);
      text-transform: uppercase;
      letter-spacing: 0.2em;
      margin-bottom: var(--space-4);
      display: flex;
      align-items: center;
      gap: var(--space-2);
    }

    .density-bar {
      height: 4px;
      background: var(--color-border);
    }

    .density-bar--sparse { width: 20px; }
    .density-bar--medium { width: 40px; }
    .density-bar--dense { width: 80px; }

    /* ═══════════════════════════════════════════════════════════════════════════
       COMPONENT STYLES — Standardized from DD-001 Lessons
       ═══════════════════════════════════════════════════════════════════════════ */

    /* HEADINGS */
    h2 {
      font-family: var(--font-display);
      font-size: 28px;
      font-style: italic;
      margin-bottom: var(--space-4);
    }

    h3 {
      font-family: var(--font-display);
      font-size: 20px;
      margin-bottom: var(--space-3);
    }

    h4 {
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-3);
    }

    p {
      margin-bottom: var(--space-4);
      max-width: 65ch;
    }

    /* ESSENCE CALLOUT — STANDARDIZED 4px border */
    .callout-essence {
      border-left: var(--border-left-width) solid var(--accent-amber);
      background: rgba(217, 119, 6, 0.05);
      padding: var(--space-6) var(--space-5);
      margin-bottom: var(--space-8);
    }

    .callout-essence__label {
      font-family: var(--font-body);
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent-amber);
      margin-bottom: var(--space-3);
    }

    .callout-essence__content {
      font-family: var(--font-display);
      font-size: 18px;
      font-style: italic;
      line-height: 1.7;
      color: var(--color-text);
    }

    /* INFO CALLOUT — STANDARDIZED 4px border */
    .callout-info {
      border-left: var(--border-left-width) solid var(--accent-blue);
      background: rgba(74, 144, 217, 0.05);
      padding: var(--space-5) var(--space-5);
      margin-bottom: var(--space-6);
    }

    .callout-info__label {
      font-family: var(--font-body);
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent-blue);
      margin-bottom: var(--space-2);
    }

    .callout-info__content {
      font-size: 14px;
    }

    /* TIP CALLOUT — STANDARDIZED 4px border */
    .callout-tip {
      border-left: var(--border-left-width) solid var(--accent-green);
      background: rgba(74, 157, 107, 0.05);
      padding: var(--space-5) var(--space-5);
      margin-bottom: var(--space-6);
    }

    .callout-tip__label {
      font-family: var(--font-body);
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent-green);
      margin-bottom: var(--space-2);
    }

    .callout-tip__content {
      font-size: 14px;
    }

    /* CHALLENGE CALLOUT — Using purple instead of red to avoid traffic-light */
    .callout-challenge {
      border-left: var(--border-left-width) solid var(--accent-purple);
      background: rgba(124, 58, 237, 0.05);
      padding: var(--space-5) var(--space-5);
      margin-bottom: var(--space-6);
    }

    .callout-challenge__label {
      font-family: var(--font-body);
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent-purple);
      margin-bottom: var(--space-2);
    }

    .callout-challenge__content {
      font-size: 14px;
    }

    /* DD-BACKPORT: Code block colors aligned to convention palette */
    .code-snippet {
      background: #1A1A1A;
      margin-bottom: var(--space-6);
    }

    .code-snippet__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-2) var(--space-4);
      background: #1A1A1A;
      border-bottom: 1px solid var(--color-border);
    }

    .code-snippet__filename {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      color: var(--color-text-secondary);
    }

    .code-snippet__copy {
      font-family: var(--font-body);
      font-size: 11px;
      color: var(--color-primary);
      padding: var(--space-1) var(--space-2);
      border: 1px solid var(--color-primary);
      background: transparent;
      cursor: pointer;
    }

    .code-snippet__content {
      padding: var(--space-4);
      font-family: var(--font-mono);
      font-size: var(--type-code);
      line-height: 1.5;
      color: #FAFAF5;
      overflow-x: auto;
    }

    .code-snippet__content .comment { color: #666666; }
    .code-snippet__content .keyword { color: #E83025; }
    .code-snippet__content .string { color: #6B9B7A; }
    .code-snippet__content .function { color: #4A7C9B; }
    .code-snippet__content .variable { color: #C97065; }

    /* FILE TREE — STANDARDIZED 4px border */
    .file-tree {
      border: 1px solid var(--color-border-subtle);
      border-left: var(--border-left-width) solid var(--accent-blue);
      padding: var(--space-4);
      margin-bottom: var(--space-6);
    }

    .file-tree__label {
      font-family: var(--font-body);
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent-blue);
      margin-bottom: var(--space-3);
    }

    .file-tree__content {
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.7;
      white-space: pre;
    }

    .file-tree__content .folder { color: var(--accent-blue); }
    .file-tree__content .file { color: var(--color-text); }

    /* DENSE COMPARISON GRID — Improved from DD-001 */
    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-4);
      margin-bottom: var(--space-6);
    }

    @media (max-width: 768px) {
      .comparison-grid {
        grid-template-columns: 1fr;
      }
    }

    .comparison-card {
      border: 1px solid var(--color-border-subtle);
      border-left: var(--border-left-width) solid var(--color-border);
      padding: var(--space-4);
    }

    .comparison-card__title {
      font-family: var(--font-display);
      font-size: 16px;
      font-style: italic;
      margin-bottom: var(--space-2);
    }

    .comparison-card__content {
      font-size: 13px;
      color: var(--color-text-secondary);
    }

    /* DECISION MATRIX — With proper left accent */
    .decision-matrix {
      border-left: var(--border-left-width) solid var(--color-primary);
      margin-bottom: var(--space-6);
    }

    .decision-matrix__header {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: var(--space-4);
      padding: var(--space-3) var(--space-4);
      background: rgba(232, 48, 37, 0.05);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .decision-matrix__row {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: var(--space-4);
      padding: var(--space-3) var(--space-4);
      border-bottom: 1px solid var(--color-border-subtle);
      font-size: 14px;
    }

    .decision-matrix__row:last-child {
      border-bottom: none;
    }

    /* TASK LIST */
    .task-list {
      border: 1px solid var(--color-border-subtle);
      border-left: var(--border-left-width) solid var(--color-primary);
      padding: var(--space-4);
      margin-bottom: var(--space-6);
    }

    .task-list__title {
      font-family: var(--font-display);
      font-size: 16px;
      font-style: italic;
      margin-bottom: var(--space-3);
    }

    .task-list__item {
      display: flex;
      align-items: flex-start;
      gap: var(--space-2);
      padding: var(--space-2) 0;
      border-bottom: 1px solid var(--color-border-subtle);
      font-size: 14px;
    }

    .task-list__item:last-child {
      border-bottom: none;
    }

    .task-list__checkbox {
      width: 16px;
      height: 16px;
      border: 2px solid var(--color-primary);
      margin-top: 2px;
      flex-shrink: 0;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       CRESCENDO PATTERN DEMONSTRATION
       Stage 1: SPARSE (Setup) → Stage 2: MEDIUM (Build) → Stage 3: DENSE (Payoff)
       ═══════════════════════════════════════════════════════════════════════════ */

    /* DD-BACKPORT: Accessibility — skip-link, focus-visible, reduced-motion per Convention Spec Section 12 */
    .skip-link {
      position: absolute; top: -100%; left: 0;
      background: var(--color-primary); color: var(--color-background);
      padding: 8px 16px; z-index: 1000;
      font-family: var(--font-body); font-size: 14px; text-decoration: none;
    }
    .skip-link:focus { top: 0; }
    *:focus-visible { outline: 3px solid var(--color-primary); outline-offset: 2px; }
    ::selection { background: var(--color-primary); color: var(--color-background); }
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- EXPLORATION HEADER -->
  <header class="exploration-header">
    <div class="exploration-id">DD-002 — Density Exploration</div>
    <h1 class="exploration-title">Density Gradient</h1>
    <p class="exploration-hypothesis">
      <strong>Hypothesis:</strong> Information density should build gradually from sparse to dense
      (CRESCENDO pattern), creating natural onboarding that respects cognitive load.
      Applying R-3 Progressive Disclosure research.
    </p>
  </header>

  <main id="main-content" class="page-container">

    <!-- ═══════════════════════════════════════════════════════════════════════
         STAGE 1: SPARSE — The Setup (Click Depth 0)
         Maximum breathing room, single concept, welcoming entry
         ═══════════════════════════════════════════════════════════════════════ -->
    <section class="section-sparse">
      <div class="density-indicator">
        <span class="density-bar density-bar--sparse"></span>
        Sparse — Setup
      </div>

      <h2>State Management Fundamentals</h2>
      <p>
        Every application faces the same challenge: keeping track of what's happening.
        State management is how we solve that challenge systematically.
      </p>

      <div class="callout-essence">
        <div class="callout-essence__label">Essence</div>
        <div class="callout-essence__content">
          "State" is just a fancy word for "the current situation." Good state management
          means the application always knows the current situation and can respond to changes predictably.
        </div>
      </div>
    </section>


    <!-- ═══════════════════════════════════════════════════════════════════════
         STAGE 2: MEDIUM — The Build (Click Depth 1)
         Moderate density, introducing concepts, 2-3 components
         ═══════════════════════════════════════════════════════════════════════ -->
    <section class="section-medium">
      <div class="density-indicator">
        <span class="density-bar density-bar--medium"></span>
        Medium — Building Understanding
      </div>

      <h3>Types of State</h3>
      <p>
        Not all state is created equal. Understanding the different types helps you choose
        the right tool for each situation.
      </p>

      <div class="comparison-grid">
        <div class="comparison-card">
          <div class="comparison-card__title">Local State</div>
          <div class="comparison-card__content">
            Lives inside a single component. Example: whether a dropdown is open.
            Best for: UI state that doesn't need to be shared.
          </div>
        </div>
        <div class="comparison-card">
          <div class="comparison-card__title">Shared State</div>
          <div class="comparison-card__content">
            Accessed by multiple components. Example: current user information.
            Best for: Data that multiple parts of the app need.
          </div>
        </div>
      </div>

      <div class="callout-info">
        <div class="callout-info__label">Note</div>
        <div class="callout-info__content">
          Start with local state. Only "lift" state up when you actually need to share it.
          Premature abstraction is the root of most complexity problems.
        </div>
      </div>
    </section>


    <!-- ═══════════════════════════════════════════════════════════════════════
         STAGE 3: MEDIUM-DENSE — Deepening (Click Depth 1.5)
         More detail, introducing implementation patterns
         ═══════════════════════════════════════════════════════════════════════ -->
    <section class="section-medium">
      <div class="density-indicator">
        <span class="density-bar density-bar--medium"></span>
        <span class="density-bar density-bar--sparse"></span>
        Medium-Dense — Implementation Patterns
      </div>

      <h3>Choosing Your Approach</h3>

      <div class="decision-matrix">
        <div class="decision-matrix__header">
          <span>Approach</span>
          <span>Complexity</span>
          <span>Scale</span>
          <span>Best For</span>
        </div>
        <div class="decision-matrix__row">
          <span>useState/useReducer</span>
          <span>Low</span>
          <span>Small</span>
          <span>Component state</span>
        </div>
        <div class="decision-matrix__row">
          <span>Context API</span>
          <span>Medium</span>
          <span>Medium</span>
          <span>Theme, auth</span>
        </div>
        <div class="decision-matrix__row">
          <span>Zustand/Jotai</span>
          <span>Low</span>
          <span>Any</span>
          <span>Simple global</span>
        </div>
        <div class="decision-matrix__row">
          <span>Redux Toolkit</span>
          <span>High</span>
          <span>Large</span>
          <span>Complex apps</span>
        </div>
      </div>

      <div class="callout-tip">
        <div class="callout-tip__label">Tip</div>
        <div class="callout-tip__content">
          If you're unsure, start with Zustand. It has the simplest API with the most flexibility.
          You can always migrate to Redux later if you need its ecosystem.
        </div>
      </div>
    </section>


    <!-- ═══════════════════════════════════════════════════════════════════════
         STAGE 4: DENSE — The Payoff (Click Depth 2)
         Full implementation details, code, reference material
         ═══════════════════════════════════════════════════════════════════════ -->
    <section class="section-dense">
      <div class="density-indicator">
        <span class="density-bar density-bar--dense"></span>
        Dense — Full Implementation
      </div>

      <h3>Implementing with Zustand</h3>

      <div class="file-tree">
        <div class="file-tree__label">Project Structure</div>
        <div class="file-tree__content"><span class="folder">src/</span>
├── <span class="folder">stores/</span>
│   ├── <span class="file">useAuthStore.ts</span>     <span style="color: #888"># User authentication</span>
│   ├── <span class="file">useUIStore.ts</span>       <span style="color: #888"># UI state (modals, etc)</span>
│   └── <span class="file">useDataStore.ts</span>     <span style="color: #888"># Application data</span>
├── <span class="folder">hooks/</span>
│   └── <span class="file">useStore.ts</span>         <span style="color: #888"># Store selectors</span>
└── <span class="folder">components/</span>
    └── <span class="file">AuthProvider.tsx</span>    <span style="color: #888"># Initialization</span></div>
      </div>

      <div class="code-snippet">
        <div class="code-snippet__header">
          <span class="code-snippet__filename">stores/useAuthStore.ts</span>
          <button class="code-snippet__copy">Copy</button>
        </div>
        <div class="code-snippet__content">
<span class="keyword">import</span> { <span class="variable">create</span> } <span class="keyword">from</span> <span class="string">'zustand'</span>;
<span class="keyword">import</span> { <span class="variable">persist</span> } <span class="keyword">from</span> <span class="string">'zustand/middleware'</span>;

<span class="keyword">interface</span> <span class="variable">AuthState</span> {
  <span class="variable">user</span>: <span class="variable">User</span> | <span class="keyword">null</span>;
  <span class="variable">isAuthenticated</span>: <span class="keyword">boolean</span>;
  <span class="function">login</span>: (<span class="variable">user</span>: <span class="variable">User</span>) => <span class="keyword">void</span>;
  <span class="function">logout</span>: () => <span class="keyword">void</span>;
}

<span class="keyword">export const</span> <span class="variable">useAuthStore</span> = <span class="function">create</span>&lt;<span class="variable">AuthState</span>&gt;()(
  <span class="function">persist</span>(
    (<span class="variable">set</span>) => ({
      <span class="variable">user</span>: <span class="keyword">null</span>,
      <span class="variable">isAuthenticated</span>: <span class="keyword">false</span>,

      <span class="function">login</span>: (<span class="variable">user</span>) => <span class="function">set</span>({
        <span class="variable">user</span>,
        <span class="variable">isAuthenticated</span>: <span class="keyword">true</span>
      }),

      <span class="function">logout</span>: () => <span class="function">set</span>({
        <span class="variable">user</span>: <span class="keyword">null</span>,
        <span class="variable">isAuthenticated</span>: <span class="keyword">false</span>
      }),
    }),
    { <span class="variable">name</span>: <span class="string">'auth-storage'</span> }
  )
);
        </div>
      </div>

      <div class="code-snippet">
        <div class="code-snippet__header">
          <span class="code-snippet__filename">components/UserMenu.tsx</span>
          <button class="code-snippet__copy">Copy</button>
        </div>
        <div class="code-snippet__content">
<span class="keyword">import</span> { <span class="variable">useAuthStore</span> } <span class="keyword">from</span> <span class="string">'@/stores/useAuthStore'</span>;

<span class="keyword">export function</span> <span class="function">UserMenu</span>() {
  <span class="comment">// Only re-renders when user changes</span>
  <span class="keyword">const</span> <span class="variable">user</span> = <span class="function">useAuthStore</span>((<span class="variable">state</span>) => <span class="variable">state</span>.<span class="variable">user</span>);
  <span class="keyword">const</span> <span class="variable">logout</span> = <span class="function">useAuthStore</span>((<span class="variable">state</span>) => <span class="variable">state</span>.<span class="variable">logout</span>);

  <span class="keyword">if</span> (!<span class="variable">user</span>) <span class="keyword">return null</span>;

  <span class="keyword">return</span> (
    &lt;<span class="variable">div</span>&gt;
      &lt;<span class="variable">span</span>&gt;{<span class="variable">user</span>.<span class="variable">name</span>}&lt;/<span class="variable">span</span>&gt;
      &lt;<span class="variable">button</span> <span class="variable">onClick</span>={<span class="variable">logout</span>}&gt;Sign out&lt;/<span class="variable">button</span>&gt;
    &lt;/<span class="variable">div</span>&gt;
  );
}
        </div>
      </div>

      <div class="task-list">
        <div class="task-list__title">Implementation Checklist</div>
        <div class="task-list__item">
          <div class="task-list__checkbox"></div>
          <span>Create store with typed interface</span>
        </div>
        <div class="task-list__item">
          <div class="task-list__checkbox"></div>
          <span>Add persist middleware for localStorage</span>
        </div>
        <div class="task-list__item">
          <div class="task-list__checkbox"></div>
          <span>Use selectors to prevent unnecessary re-renders</span>
        </div>
        <div class="task-list__item">
          <div class="task-list__checkbox"></div>
          <span>Test with React DevTools</span>
        </div>
      </div>

      <div class="callout-challenge">
        <div class="callout-challenge__label">Challenge</div>
        <div class="callout-challenge__content">
          Try adding a "theme" to your store that persists user preference between sessions.
          Consider: should theme live in the auth store or its own UI store?
        </div>
      </div>
    </section>


    <!-- ═══════════════════════════════════════════════════════════════════════
         RESOLUTION — Sparse closing (pay density debt)
         ═══════════════════════════════════════════════════════════════════════ -->
    <section class="section-sparse">
      <div class="density-indicator">
        <span class="density-bar density-bar--sparse"></span>
        Resolution — Key Takeaway
      </div>

      <h2>The Gradient Principle</h2>

      <div class="callout-essence">
        <div class="callout-essence__label">Key Insight</div>
        <div class="callout-essence__content">
          You've just experienced a density gradient: from simple concept to full implementation.
          This pattern respects how humans learn — building mental models layer by layer,
          never overwhelming with details before context is established.
        </div>
      </div>
    </section>

  </main>

  <!--
    ═══════════════════════════════════════════════════════════════════════════
    CRESCENDO PATTERN SUMMARY
    ═══════════════════════════════════════════════════════════════════════════

    Stage 1 (SPARSE):    80px padding, 2 components, philosophy/essence only
    Stage 2 (MEDIUM):    48px padding, 3-4 components, building concepts
    Stage 3 (MED-DENSE): 48px padding, 4-5 components, decision framework
    Stage 4 (DENSE):     24px padding, 7+ components, full implementation
    Resolution (SPARSE): 80px padding, 2 components, consolidate/breathe

    Pattern: ░░░░████████████████████░░░░
    This is R-3's CRESCENDO pattern with a resolution exhale.

    DD-001 LESSONS APPLIED:
    - All left borders standardized to 4px
    - No traffic-light (green/red adjacent) — used purple for Challenge
    - Stronger breathing recovery at end (sparse resolution section)
    - Better visual cohesion in dense section (unified file tree + code + checklist)
    ═══════════════════════════════════════════════════════════════════════════
  -->

</body>
</html>
