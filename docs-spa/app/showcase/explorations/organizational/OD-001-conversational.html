<!-- ═══════════════════════════════════════════════════════════════════════
     OD-001: Conversational Structure — ENRICHED v2
     Organizational Exploration — Q&A Dialogue Pattern

     Hypothesis: "What if documentation was organized as a conversation?"
     Density Pairing: PULSE (primary) + TIDAL/RIVERS (secondary)
     DD Sources: DD-005 (TIDAL), DD-006 (FRACTAL — mandatory DD-F-006)
     Research: R1 PRIMARY (28 findings), R3 (PULSE), R5 (sequencing)

     Applied Research (Original — v1):
       R1-001 (Density Rhythm) — Q&A alternation creates PULSE
       R1-003 (Viewport Principle) — One concept per Q&A pair
       R1-007 (Callout Positioning) — Callouts follow content
       R1-008 (Callout Scarcity) — Max 1-2 per viewport
       R1-010 (Grouping Proximity) — Q tightly grouped with A
       R1-016 (Typography-First Hierarchy) — Size > Weight > Color
       R1-018 (Pull Quotes) — Magazine-style Essence callout
       R1-019 (Tech Spec Aesthetic) — Sharp edges, mono accents
       R1-026 (Collapsible Callouts) — Expand for depth
       R3-003 (PULSE) — High-low-high alternation
       R3-034 (TIDAL) — Width variation signals density
       R3-036 / DD-F-006 (FRACTAL) — Self-similar at 4 scales
       R5-S1 (Setup-Payoff) — Question is setup, answer is payoff
       R5-T4 (2-Callout Limit) — Enforced per section

     NEW in v2 — External Research Enrichments:
       EXT-CONV-001 (Socratic Progressive Narrowing) — broadQ → narrowQ → specificQ → answer
       EXT-CONV-002 (Value Density Front-Loading) — key insight in first sentence
       EXT-CONV-003 (Three-Level Gestalt Spacing) — 8px within / 32px between / 64px chapters
       EXT-CONV-004 (Background Color Differentiation) — Q/A zones visually distinct
       EXT-CONV-005 (Responsive TIDAL Choreography) — 60% desktop → 100% mobile
       EXT-CREATIVE-001 (THE SOLID OFFSET) — neobrutalist depth, no box-shadow
       EXT-CREATIVE-002 (THE TYPOGRAPHIC CASCADE) — 5-level 1.5x ratio
       EXT-CREATIVE-003 (THE SCROLL WITNESS) — CSS section progress
       EXT-CREATIVE-004 (THE ARRIVING WISDOM) — scroll-triggered staggered reveal
       EXT-CREATIVE-005 (THE EDITORIAL DROP) — serif drop caps
       EXT-DENSITY-001 (Gestalt Pure Distance Law) — grouping fails >1.5x ratio
       EXT-DENSITY-002 (NNGroup Progressive Disclosure) — max 2 levels
       EXT-DENSITY-003 (Twilio 20-line rule) — initial code <20 lines

     Anti-Patterns Avoided:
       DD-F-015 Traffic-light — no green+red adjacent
       R5-A1 Callout Cacophony — max 2 callouts per section
       R5-A5 Temperature Whiplash — gradual temperature transitions

     DD-F-006 Fractal Compliance:
       PAGE SCALE: Q(sparse) → A(dense) → Q(sparse) → A(dense) rhythm
       SECTION SCALE: Within each answer, intro(sparse) → detail(dense) → summary(sparse)
       COMPONENT SCALE: Callout label(sparse) → body(dense)
       CHARACTER SCALE: Code comments(sparse) → code logic(dense)
     ═══════════════════════════════════════════════════════════════════════ -->

<!-- ═══════════════════════════════════════════════════════════════════════
     INLINE THREADING HEADER — OD Execution Phase
     File: docs-spa/app/showcase/explorations/organizational/OD-001-conversational.html
     Tier: B | Stage: 3 (Organization OD) | Generated: 2026-02-07
     ═══════════════════════════════════════════════════════════════════════

1. WHY THIS EXISTS
OD-001-conversational.html is the first organizational exploration, testing
the hypothesis that documentation organized as a Q&A conversation creates
natural PULSE density rhythm. v2 enriches with external UX research from 8
parallel research agents: Socratic narrowing, Gestalt spacing, neobrutalist
depth, scroll progress, editorial drop caps, staggered reveal animations.
Scored ~35/40 in v1, targeting 38+/40 in v2.

2. THE QUESTION THIS ANSWERS
"Can a Q&A conversational structure create natural PULSE density rhythm
while maintaining the DD-F-006 fractal self-similarity constraint at all
four structural scales (page, section, component, character)?"
v2 adds: "Can external UX patterns (Socratic narrowing, Gestalt spacing,
neobrutalist depth) elevate the conversational pattern beyond 35/40?"

3. STATUS
ACTIVE — INCLUDE (v2 enriched). Locked as validated OD exploration artifact.
First in the OD series. Soul compliance 100% (all 5 pieces verified).
DD-F-006 fractal compliance verified at 4 scales.

4. SOUL ALIGNMENT
  Soul Piece                     | Implementation                      | Evidence
  -------------------------------|-------------------------------------|--------
  1. Sharp Edges                 | --border-radius: 0 in :root        | Line ~170
  2. No Shadows                  | --box-shadow: none; solid offset    | Lines ~171, ~260-275
  3. Serif = Wisdom              | Instrument Serif for titles,        | Throughout
                                 | questions, essence, drop caps       |
  4. Callout Family DNA          | 4 callouts, 2-zone (label+body),   | CSS callout section
                                 | 4px left border, 5 color variants  |
  5. Squares Signal System       | 8x8px question markers, no radius  | .question__marker

5. BUILT ON
  Source                          | Role                              | Key Values Taken                                  | Path
  --------------------------------|-----------------------------------|---------------------------------------------------|-----
  DD-005-rivers.html              | TIDAL density pattern (primary)   | Width variation: narrow Q, wide A; rhythmic flow  | explorations/density/DD-005-rivers.html
  DD-006-fractal.html             | DD-F-006 fractal (mandatory)      | 4-scale self-similarity constraint                | explorations/density/DD-006-fractal.html
  DD-001-breathing.html           | PULSE pattern reference            | Alternating dense/sparse breathing rhythm          | explorations/density/DD-001-breathing.html
  8 External Research Agents      | UX enrichment (v2)                | Socratic, Gestalt, Neobrutalist, Scroll, Drop Cap | OD-004-EXTERNAL-RESEARCH.md, OD-006-CREATIVE-RESEARCH-FEED.md
  MASTER-SOUL-SYNTHESIS.md        | Soul authority (T1 LOCKED)         | 5 soul pieces, 6 Universal Rules                   | perceptual-audit-v2/synthesis/MASTER-SOUL-SYNTHESIS.md
  DESIGN-TOKEN-SUMMARY.md         | Locked token source (T1 LOCKED)    | Complete :root block (colors, fonts, geometry)     | perceptual-audit-v2/synthesis/DESIGN-TOKEN-SUMMARY.md

6. MUST HONOR
  Constraint                      | Source                              | Consequence if Violated
  --------------------------------|-------------------------------------|-------------------------------------
  DD-F-006 fractal at 4 scales    | DD-006-fractal.html                 | Exploration INVALID — mandatory for all OD/AD/CD
  PULSE rhythm (Q=sparse, A=dense)| R3-003 + DD-001-breathing.html      | Core hypothesis fails
  border-radius: 0 everywhere     | DESIGN-TOKEN-SUMMARY.md             | Soul violation
  box-shadow: none everywhere     | DESIGN-TOKEN-SUMMARY.md             | Soul violation (solid offset OK)
  Max 2 callouts per section      | R5-T4                               | Callout cacophony anti-pattern
  Width variation (TIDAL)         | R3-034 + DD-005-rivers.html         | Density signal lost

7. WHAT BREAKS IF THIS CHANGES
BLAST RADIUS: LOW-MEDIUM (first OD artifact, limited downstream consumers yet)
  - OD-CHECKPOINT.md (OD-001 state row)
  - RESEARCH-ACTIVE.md (14+ findings marked APPLIED via this file)
  - Future OD-002 through OD-006 (may reference OD-001 lessons)
  - organizational-patterns.md (will catalog CONVERSATIONAL pattern)
  - OD-SYNTHESIS.md (will synthesize across all OD explorations)

8. CONSUMED BY
  Consumer                                                        | How It Uses This File
  ----------------------------------------------------------------|-------------------------------------
  OD-CHECKPOINT.md                                                 | Tracks OD-001 status, score, threading state
  RESEARCH-ACTIVE.md                                               | 14+ findings marked APPLIED via this file
  (Future) organizational-patterns.md                              | Will extract CONVERSATIONAL pattern definition
  (Future) OD-SYNTHESIS.md                                         | Will synthesize OD-001 lessons with OD-002-006

9. RESEARCH DEBT
  RD-1: R1-026 (Collapsible Callouts) — NOW IMPLEMENTED via <details> in v2.
  RD-2: No explicit data-finding attribute mapping. Deferred to Phase 3.
  RD-3: Content is RSC tutorial. No non-tutorial validation yet.
  RD-4: No quantitative PULSE measurement. Deferred to audit phase.
  RD-5: Scroll-driven animations are Chromium-only. Firefox/Safari get static fallback.

10. DIAGNOSTIC QUESTIONS
  Q1: Does the :root block match DESIGN-TOKEN-SUMMARY.md exactly?
  Q2: Are all 4 fractal scales demonstrated?
  Q3: Do all callouts follow content (R1-007)?
  Q4: Is the 2-callout-per-section limit honored?
  Q5: Does TIDAL width variation exist? (Q: max-width 60%, A: width 100%)
  Q6: (v2) Are Socratic narrowing chains visible?
  Q7: (v2) Does background color differentiation make PULSE visible?
  Q8: (v2) Do solid offsets respect box-shadow: none constraint?

     ═══════════════════════════════════════════════════════════════════════
     END INLINE THREADING HEADER
     ═══════════════════════════════════════════════════════════════════════ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OD-001: Conversational Structure</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' fill='%23E83025'/><text x='50%25' y='50%25' dominant-baseline='central' text-anchor='middle' fill='white' font-family='serif' font-size='20'>K</text></svg>">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    /* ═══════════════════════════════════════════════════════════════════════════
       LOCKED DESIGN TOKENS — From DESIGN-TOKEN-SUMMARY.md
       DD-006 Lessons: Fractal self-similarity at all scales
       DD-005 Lessons: Visualization at top, labels on elements, flow patterns
       v2 Addition: EXT-CREATIVE-002 Typographic Cascade (5 levels, 1.5x ratio)
       ═══════════════════════════════════════════════════════════════════════════ */
    :root {
      /* Colors */
      --color-primary: #E83025;
      --color-background: #FEF9F5;
      --color-text: #1A1A1A;
      --color-text-secondary: #666666;
      --color-border: #E0D5C5;
      --color-border-subtle: #F0EBE3;

      /* v2: Background Color Differentiation (EXT-CONV-004) */
      --color-question-bg: #FEF9F5;  /* warm paper — sparse zone */
      --color-answer-bg: #FFFFFF;     /* white — dense zone */
      --color-chapter-bg: #FAF5ED;    /* slightly warmer — breathing zone */

      /* Typography — EXT-CREATIVE-002 Typographic Cascade */
      --font-display: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

      /* 5-level cascade with ~1.5x ratio (EXT-CREATIVE-002) */
      --type-page: 2.5rem;       /* 40px — page title */
      --type-section: 1.625rem;  /* 26px — chapter title */
      --type-question: 1.375rem; /* 22px — questions */
      --type-body: 1rem;         /* 16px — body */
      --type-code: 0.875rem;     /* 14px — code */
      --type-meta: 0.625rem;     /* 10px — labels */

      /* Geometry — LOCKED */
      --border-radius: 0;
      --box-shadow: none;

      /* Three-Level Gestalt Spacing (EXT-CONV-003 + EXT-DENSITY-001) */
      --space-within: 8px;     /* within related elements */
      --space-between: 32px;   /* between distinct elements */
      --space-chapter: 64px;   /* between chapters */

      /* Legacy spacing (kept for compatibility) */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --space-16: 64px;
      --space-20: 80px;
      --space-24: 92px;

      /* Callout Accents */
      --accent-blue: #4A90D9;
      --accent-green: #4A9D6B;
      --accent-coral: #C97065;
      --accent-amber: #D97706;
      --accent-purple: #7C3AED;

      /* Standardized Border */
      --border-left-width: 4px;

      /* Conversational Variables */
      --question-width: 60%;
      --answer-width: 100%;
      --q-indent: var(--space-8);

      /* v2: Solid Offset (EXT-CREATIVE-001) */
      --offset-x: 4px;
      --offset-y: 4px;
      --offset-color: #1A1A1A;
    }

    .skip-link {
      position: absolute;
      top: -100%;
      left: 0;
      background: var(--color-primary);
      color: var(--bg-warm, #FEF9F5);
      padding: 8px 16px;
      z-index: 1000;
      font-family: var(--font-body);
      font-size: 14px;
      text-decoration: none;
      border: none;
    }
    .skip-link:focus {
      top: 0;
    }

    *:focus-visible {
      outline: 3px solid var(--color-primary);
      outline-offset: 2px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-body);
      background: var(--color-background);
      color: var(--color-text);
      line-height: 1.7;
    }

    code {
      font-family: var(--font-mono);
      font-size: 0.9em;
    }

    ::selection {
      background: var(--color-primary);
      color: var(--bg-warm, #FEF9F5);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       v2: THE ARRIVING WISDOM — Scroll-triggered staggered reveal
       EXT-CREATIVE-004: Elements fade+translate as they enter viewport
       Uses CSS scroll-driven animations (Chromium), JS fallback for others
       ═══════════════════════════════════════════════════════════════════════════ */
    @keyframes arrive {
      from {
        opacity: 0;
        transform: translateY(16px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .reveal {
      animation: arrive 0.5s ease-out both;
      animation-timeline: view();
      animation-range: entry 10% entry 40%;
    }

    .reveal-delay-1 {
      animation: arrive 0.5s ease-out both;
      animation-timeline: view();
      animation-range: entry 15% entry 45%;
    }

    .reveal-delay-2 {
      animation: arrive 0.5s ease-out both;
      animation-timeline: view();
      animation-range: entry 20% entry 50%;
    }

    @media (prefers-reduced-motion: reduce) {
      .reveal, .reveal-delay-1, .reveal-delay-2 {
        animation: none;
        opacity: 1;
        transform: none;
      }
    }

    /* Fallback for browsers without scroll-driven animations */
    @supports not (animation-timeline: view()) {
      .reveal, .reveal-delay-1, .reveal-delay-2 {
        opacity: 1;
        transform: none;
      }
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       v2: THE SCROLL WITNESS — Fixed chapter progress sidebar
       EXT-CREATIVE-003: CSS-only progress indicators per chapter
       ═══════════════════════════════════════════════════════════════════════════ */
    .scroll-witness {
      position: fixed;
      left: 24px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 100;
    }

    .scroll-witness__item {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: var(--color-text-secondary);
      transition: color 0.2s;
    }

    .scroll-witness__item:hover {
      color: var(--color-primary);
    }

    .scroll-witness__marker {
      width: 3px;
      height: 24px;
      background: var(--color-border);
      position: relative;
      overflow: hidden;
    }

    .scroll-witness__fill {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 0%;
      background: var(--color-primary);
      transition: height 0.3s ease;
    }

    .scroll-witness__label {
      font-family: var(--font-mono);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      white-space: nowrap;
    }

    @media (max-width: 1200px) {
      .scroll-witness { display: none; }
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       EXPLORATION HEADER
       R1-019 (Tech Spec Aesthetic): monospace ID, sharp edges
       ═══════════════════════════════════════════════════════════════════════════ */
    .exploration-header {
      border-bottom: 3px solid var(--color-primary);
      padding: var(--space-6);
      background: white;
      margin-bottom: var(--space-chapter);
    }

    /* Constrain header inner content to match page-container width */
    .exploration-header__inner {
      max-width: 860px;
      margin: 0 auto;
      padding: 0 var(--space-6);
    }

    .exploration-id {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      color: var(--color-primary);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: var(--space-within);
    }

    .exploration-title {
      font-family: var(--font-display);
      font-size: var(--type-page);
      font-style: italic;
      margin-bottom: var(--space-3);
      line-height: 1.15;
    }

    .exploration-hypothesis {
      font-size: 15px;
      color: var(--color-text-secondary);
      max-width: 600px;
      line-height: 1.6;
    }

    .exploration-meta {
      display: flex;
      gap: var(--space-6);
      margin-top: var(--space-4);
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-text-secondary);
    }

    .exploration-meta span {
      display: flex;
      align-items: center;
      gap: var(--space-1);
    }

    .exploration-meta__value {
      color: var(--color-primary);
    }

    /* v2 badge */
    .version-badge {
      display: inline-block;
      font-family: var(--font-mono);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: white;
      background: var(--color-primary);
      padding: 2px 8px;
      margin-left: 12px;
      vertical-align: middle;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       PAGE CONTAINER
       ═══════════════════════════════════════════════════════════════════════════ */
    .page-container {
      max-width: 860px;
      margin: 0 auto;
      padding: 0 var(--space-6);
      padding-bottom: var(--space-24);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       PATTERN VISUALIZATION — with SOLID OFFSET (EXT-CREATIVE-001)
       DD-005 lesson: visualization at top explains the concept
       ═══════════════════════════════════════════════════════════════════════════ */
    .pattern-visualization {
      margin: var(--space-between) 0;
      padding: var(--space-6);
      background: white;
      border: 3px solid var(--color-text);
      border-left: var(--border-left-width) solid var(--color-primary);
      position: relative;
    }

    /* v2: Solid Offset depth — EXT-CREATIVE-001 neobrutalist */
    .pattern-visualization::after {
      content: '';
      position: absolute;
      top: var(--offset-y);
      left: var(--offset-x);
      width: 100%;
      height: 100%;
      background: var(--offset-color);
      z-index: -1;
    }

    .pattern-visualization__title {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-4);
    }

    .conversation-diagram {
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
    }

    .diagram-row {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .diagram-label {
      font-family: var(--font-mono);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-text-secondary);
      width: 80px;
      flex-shrink: 0;
    }

    .diagram-bar {
      height: 28px;
      display: flex;
      align-items: center;
      padding: 0 var(--space-3);
      font-family: var(--font-mono);
      font-size: 10px;
      color: white;
    }

    .diagram-bar--question {
      background: var(--color-border);
      color: var(--color-text);
      width: 35%;
    }

    .diagram-bar--answer {
      background: var(--color-primary);
      width: 85%;
    }

    .diagram-density {
      font-family: var(--font-mono);
      font-size: 9px;
      color: var(--color-text-secondary);
      margin-left: auto;
      flex-shrink: 0;
    }

    .diagram-connector {
      width: 80px;
      flex-shrink: 0;
    }

    .diagram-connector-line {
      height: 2px;
      background: var(--color-border);
      margin-left: 40px;
      width: 40px;
    }

    .diagram-annotation {
      margin-top: var(--space-4);
      padding-top: var(--space-3);
      border-top: 1px solid var(--color-border-subtle);
      font-size: 12px;
      color: var(--color-text-secondary);
    }

    .diagram-annotation code {
      font-family: var(--font-mono);
      font-size: 11px;
      background: var(--color-border-subtle);
      padding: 1px 4px;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       CONVERSATIONAL PAIRS — The core organizational pattern
       R3-003 (PULSE): Questions = LOW density, Answers = HIGH density
       R3-034 (TIDAL): Question width narrow, Answer width wide
       R1-010 (Grouping Proximity): Q+A tightly grouped (8px within)
       v2: EXT-CONV-004 Background Color Differentiation
       v2: EXT-CONV-003 Three-Level Gestalt Spacing
       ═══════════════════════════════════════════════════════════════════════════ */

    /* Section divider between conversational chapters */
    .conversation-chapter {
      margin-top: var(--space-chapter);
      margin-bottom: var(--space-between);
      background: var(--color-chapter-bg);
      padding: var(--space-6) 0;
    }

    .conversation-chapter__label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-1);
    }

    .conversation-chapter__title {
      font-family: var(--font-display);
      font-size: var(--type-section);
      font-style: italic;
      padding-bottom: var(--space-3);
      border-bottom: 3px solid var(--color-primary);
    }

    /* v2: Chapter progress bar */
    .conversation-chapter__progress {
      margin-top: var(--space-within);
      font-family: var(--font-mono);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-text-secondary);
      display: flex;
      align-items: center;
      gap: var(--space-within);
    }

    .progress-dots {
      display: flex;
      gap: 4px;
    }

    .progress-dot {
      width: 8px;
      height: 8px;
      background: var(--color-border);
    }

    .progress-dot--active {
      background: var(--color-primary);
    }

    .progress-dot--complete {
      background: var(--color-text);
    }

    /* Q&A PAIR — grouped as a unit (Gestalt: 8px within, 32px between pairs) */
    .qa-pair {
      margin-bottom: var(--space-between);
    }

    /* v2: QUESTION — sparse zone with distinct background (EXT-CONV-004) */
    .question {
      max-width: var(--question-width);
      margin-bottom: var(--space-within);
      padding: var(--space-4) var(--space-4) var(--space-4) var(--q-indent);
      position: relative;
      background: var(--color-question-bg);
    }

    .question__marker {
      position: absolute;
      left: 0;
      top: var(--space-4);
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-primary);
      width: var(--q-indent);
    }

    /* Square marker — Soul Piece 5: Squares Signal System */
    .question__marker::before {
      content: '';
      display: inline-block;
      width: 8px;
      height: 8px;
      background: var(--color-primary);
      margin-right: var(--space-1);
      vertical-align: middle;
    }

    .question__text {
      font-family: var(--font-display);
      font-size: var(--type-question);
      font-style: italic;
      line-height: 1.4;
      color: var(--color-text);
    }

    /* v2: Socratic narrowing indicator (EXT-CONV-001) */
    .question__narrowing {
      font-family: var(--font-mono);
      font-size: 8px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--color-text-secondary);
      opacity: 0.7;
      margin-top: 4px;
    }

    /* v2: ANSWER — dense zone with white background (EXT-CONV-004) */
    /* Padding-left: 28px (not 24px) so answer text aligns with question text at 32px indent
       (4px border-left + 28px padding = 32px, matching --q-indent) */
    .answer {
      width: var(--answer-width);
      border-left: var(--border-left-width) solid var(--color-border);
      padding: var(--space-6) var(--space-6) var(--space-6) 28px;
      background: var(--color-answer-bg);
    }

    /* v2: Drop cap on answer lead (EXT-CREATIVE-005 THE EDITORIAL DROP) */
    .answer__lead {
      font-size: var(--type-body);
      line-height: 1.7;
      margin-bottom: var(--space-4);
      max-width: 65ch;
    }

    .answer__lead--dropcap::first-letter {
      font-family: var(--font-display);
      font-size: 3.5em;
      float: left;
      line-height: 0.8;
      padding-right: 0.1em;
      padding-top: 0.05em;
      color: var(--color-primary);
      font-weight: 400;
    }

    .answer__detail {
      margin-top: var(--space-4);
    }

    .answer__detail p {
      font-size: 14px;
      line-height: 1.7;
      margin-bottom: var(--space-3);
      max-width: 65ch;
      color: var(--color-text-secondary);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       CALLOUT SYSTEM — Soul Piece 4: Family DNA
       2-zone structure (label + body), 4px left border
       R1-007 (Callout Positioning): after content
       R1-008 (Callout Scarcity): max 1-2 per section
       v2: Solid offset on Essence callout (EXT-CREATIVE-001)
       ═══════════════════════════════════════════════════════════════════════════ */
    .callout {
      margin: var(--space-6) 0;
      border-left: var(--border-left-width) solid;
      padding: var(--space-4) var(--space-5);
    }

    .callout__label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: var(--space-within);
    }

    .callout__body {
      font-size: 14px;
      line-height: 1.6;
    }

    /* Unified callout label styling — HIGH fix #4 */
    .callout .callout__label {
      color: var(--color-text);
      font-weight: 600;
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    /* Callout variants */
    .callout--info {
      border-left-color: var(--accent-blue);
      background: rgba(74, 144, 217, 0.05);
    }

    .callout--tip {
      border-left-color: var(--accent-green);
      background: rgba(74, 157, 107, 0.05);
    }

    .callout--gotcha {
      border-left-color: var(--accent-coral);
      background: rgba(201, 112, 101, 0.05);
    }

    .callout--essence {
      border-left-color: var(--accent-purple);
      background: rgba(124, 58, 237, 0.04);
      position: relative;
      border: 3px solid var(--accent-purple);
      border-left-width: var(--border-left-width);
    }
    .callout--essence .callout__body {
      font-family: var(--font-display);
      font-style: italic;
      font-size: 16px;
      line-height: 1.6;
    }
    /* v2: Solid offset on Essence callouts */
    .callout--essence::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 3px;
      width: 100%;
      height: 100%;
      background: var(--accent-purple);
      opacity: 0.15;
      z-index: -1;
    }

    .callout--challenge {
      border-left-color: var(--accent-amber);
      background: rgba(217, 119, 6, 0.05);
    }

    /* v2: Collapsible callout (resolves RD-1 from v1) */
    .callout--collapsible summary {
      cursor: pointer;
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      padding: var(--space-2) 0;
      list-style: none;
    }
    .callout--collapsible summary::before {
      content: '▸ ';
      color: var(--color-primary);
    }
    .callout--collapsible[open] summary::before {
      content: '▾ ';
    }
    .callout--collapsible .callout__body {
      padding-top: var(--space-within);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       CODE BLOCK — Dense zone
       R1-021 (Code Snippet Best Practices)
       v2: Solid offset (EXT-CREATIVE-001)
       v2: EXT-DENSITY-003 Twilio 20-line rule — initial code <20 lines
       ═══════════════════════════════════════════════════════════════════════════ */
    .code-block {
      background: #1E1E1E;
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.6;
      color: #F5F0EB;
      padding: var(--space-4);
      margin: var(--space-4) 0;
      overflow-x: auto;
      position: relative;
      border: 3px solid var(--color-text);
    }

    /* v2: Solid offset on code blocks */
    .code-block::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 3px;
      width: 100%;
      height: 100%;
      background: var(--color-primary);
      opacity: 0.3;
      z-index: -1;
    }

    .code-block__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-3);
      padding-bottom: var(--space-2);
      border-bottom: 1px solid #333;
    }

    .code-block__lang {
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: #888;
    }

    .code-block__copy {
      font-size: var(--type-meta);
      cursor: pointer;
      background: none;
      border: 1px solid #444;
      padding: 2px 8px;
      color: #888;
      font-family: var(--font-mono);
      transition: border-color 0.2s, color 0.2s;
    }

    .code-block__copy:hover {
      border-color: var(--color-primary);
      color: var(--color-primary);
    }

    .code-block__line {
      display: flex;
      gap: var(--space-3);
    }

    .code-block__num {
      color: #555;
      user-select: none;
      min-width: 24px;
      text-align: right;
    }

    /* CHARACTER SCALE fractal: sparse comment lines vs dense logic lines */
    .code-block__code--comment { color: #6A9955; }
    .code-block__code--keyword { color: #C586C0; }
    .code-block__code--string { color: #CE9178; }
    .code-block__code--function { color: #DCDCAA; }
    .code-block__code--type { color: #4EC9B0; }

    /* ═══════════════════════════════════════════════════════════════════════════
       DECISION MATRIX — within a conversational answer
       R1-023 (Decision Matrix Layout)
       ═══════════════════════════════════════════════════════════════════════════ */
    .decision-matrix {
      margin: var(--space-6) 0;
      overflow-x: auto;
    }

    .decision-matrix table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    .decision-matrix th {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-text-secondary);
      padding: var(--space-2) var(--space-3);
      border-bottom: 2px solid var(--color-primary);
      text-align: left;
    }

    .decision-matrix td {
      padding: var(--space-2) var(--space-3);
      border-bottom: 1px solid var(--color-border-subtle);
      vertical-align: top;
    }

    .decision-matrix tr:hover td {
      background: var(--color-border-subtle);
    }

    .decision-matrix__highlight td {
      background: rgba(232, 48, 37, 0.04);
      font-weight: 500;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       FILE TREE — within a conversational answer
       R1-022 (File Tree Visualization)
       ═══════════════════════════════════════════════════════════════════════════ */
    .file-tree {
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.8;
      background: white;
      border-left: var(--border-left-width) solid var(--color-border);
      padding: var(--space-4) var(--space-5);
      margin: var(--space-4) 0;
    }

    .file-tree__label {
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-within);
      display: block;
    }

    .file-tree__item--highlight {
      color: var(--color-primary);
      font-weight: 500;
    }

    .file-tree__annotation {
      color: var(--color-text-secondary);
      font-size: 11px;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       FOLLOW-UP QUESTION — lighter variant, shows conversation threading
       v2: Socratic narrowing is visualized (EXT-CONV-001)
       ═══════════════════════════════════════════════════════════════════════════ */
    .follow-up {
      margin-top: var(--space-6);
      padding-top: var(--space-4);
      border-top: 1px solid var(--color-border-subtle);
    }

    .follow-up .question {
      max-width: 70%;
    }

    .follow-up .question__text {
      font-size: 18px;
      color: var(--color-text-secondary);
    }

    .follow-up .question__marker {
      color: var(--color-text-secondary);
    }

    .follow-up .question__marker::before {
      background: var(--color-text-secondary);
      width: 6px;
      height: 6px;
    }

    /* v2: Deep follow-up — even narrower, third level of Socratic chain */
    .follow-up--deep .question {
      max-width: 80%;
      border-left: 2px solid var(--color-border-subtle);
      margin-left: var(--space-4);
    }

    /* Deep follow-up answer aligns with its indented question */
    .follow-up--deep > .answer,
    .follow-up--deep > div > .answer {
      margin-left: var(--space-4);
    }

    .follow-up--deep .question__text {
      font-size: 16px;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       ESSENCE PULL QUOTE — Magazine technique (R1-018)
       Soul Piece 3: Serif italic for wisdom
       v2: Solid offset (EXT-CREATIVE-001)
       ═══════════════════════════════════════════════════════════════════════════ */
    .essence-pullquote {
      margin: var(--space-chapter) 0;
      padding: var(--space-8) var(--space-6);
      border-top: 3px solid var(--accent-purple);
      border-bottom: 3px solid var(--accent-purple);
      text-align: center;
      position: relative;
      background: var(--color-background);
    }

    /* v2: Subtle solid offset */
    .essence-pullquote::after {
      content: '';
      position: absolute;
      bottom: -6px;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--accent-purple);
      opacity: 0.3;
    }

    .essence-pullquote__label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--accent-purple);
      margin-bottom: var(--space-3);
    }

    .essence-pullquote__text {
      font-family: var(--font-display);
      font-size: 24px;
      font-style: italic;
      line-height: 1.5;
      max-width: 50ch;
      margin: 0 auto;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       v2: RESEARCH APPLICATION BADGE
       Shows which external research findings are applied in each section
       ═══════════════════════════════════════════════════════════════════════════ */
    .research-badge {
      display: inline-flex;
      gap: 4px;
      margin-bottom: var(--space-within);
    }

    .research-badge__tag {
      font-family: var(--font-mono);
      font-size: 8px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-secondary);
      background: var(--color-border-subtle);
      padding: 1px 6px;
      opacity: 0.6;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       CONVERSATION SUMMARY — closing pattern with solid offset
       ═══════════════════════════════════════════════════════════════════════════ */
    .conversation-summary {
      margin-top: var(--space-chapter);
      padding: var(--space-6);
      background: white;
      border: 3px solid var(--color-text);
      position: relative;
    }

    .conversation-summary::after {
      content: '';
      position: absolute;
      top: var(--offset-y);
      left: var(--offset-x);
      width: 100%;
      height: 100%;
      background: var(--offset-color);
      z-index: -1;
    }

    .conversation-summary__title {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-4);
    }

    .conversation-summary__list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
    }

    .conversation-summary__item {
      display: flex;
      align-items: flex-start;
      gap: var(--space-3);
      font-size: 14px;
    }

    .conversation-summary__marker {
      width: 8px;
      height: 8px;
      background: var(--color-primary);
      flex-shrink: 0;
      margin-top: 6px;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       v2: ENRICHMENT APPENDIX — documents what external research was applied
       ═══════════════════════════════════════════════════════════════════════════ */
    .enrichment-appendix {
      margin-top: var(--space-chapter);
      padding-top: var(--space-between);
      border-top: 3px solid var(--color-border);
    }

    .enrichment-appendix__title {
      font-family: var(--font-display);
      font-size: var(--type-section);
      font-style: italic;
      margin-bottom: var(--space-between);
      color: var(--color-text-secondary);
    }

    .enrichment-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--space-4);
    }

    .enrichment-card {
      border: 3px solid var(--color-border);
      padding: var(--space-4);
      background: white;
    }

    .enrichment-card__id {
      font-family: var(--font-mono);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-primary);
      margin-bottom: 4px;
    }

    .enrichment-card__name {
      font-family: var(--font-display);
      font-size: 16px;
      font-style: italic;
      margin-bottom: var(--space-within);
    }

    .enrichment-card__desc {
      font-size: 13px;
      color: var(--color-text-secondary);
      line-height: 1.5;
    }

    .enrichment-card__where {
      margin-top: var(--space-within);
      font-family: var(--font-mono);
      font-size: 9px;
      color: var(--color-text-secondary);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       RESPONSIVE — v2: Enhanced TIDAL choreography (EXT-CONV-005)
       Desktop: Q at 60%, A at 100% — TIDAL width difference maximum
       Tablet: Q at 80%, A at 100% — narrowed but still visible
       Mobile: Q at 100%, A at 100% — single column, PULSE via bg color only
       ═══════════════════════════════════════════════════════════════════════════ */
    @media (max-width: 1024px) {
      .question {
        max-width: 75%;
      }
    }

    @media (max-width: 768px) {
      .question {
        max-width: 100%;
        padding-left: var(--space-6);
      }
      .question__marker {
        width: var(--space-6);
      }
      .follow-up .question {
        max-width: 100%;
      }
      .follow-up--deep .question {
        max-width: 100%;
        margin-left: 0;
      }
      .exploration-meta {
        flex-direction: column;
        gap: var(--space-2);
      }
      .exploration-title {
        font-size: 2rem;
      }
      .enrichment-grid {
        grid-template-columns: 1fr;
      }
      /* Mobile: TIDAL width difference eliminated, PULSE via bg color only */
      .answer__lead--dropcap::first-letter {
        font-size: 2.5em;
      }
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       PRINT STYLES (LOW fix #16)
       ═══════════════════════════════════════════════════════════════════════════ */
    @media print {
      body { background: white; color: black; }
      .skip-link, .scroll-witness, nav { display: none; }
      a[href]::after { content: " (" attr(href) ")"; font-size: 0.8em; }
      * { box-shadow: none !important; }
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       ACCESSIBILITY — prefers-reduced-motion (MEDIUM fix #10)
       ═══════════════════════════════════════════════════════════════════════════ */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- ═══════════════════════════════════════════════════════════════════════════
       v2: THE SCROLL WITNESS — Fixed chapter progress sidebar
       EXT-CREATIVE-003: Shows reading progress per chapter
       ═══════════════════════════════════════════════════════════════════════════ -->
  <nav class="scroll-witness" id="scrollWitness" aria-label="Chapter progress">
    <a class="scroll-witness__item" href="#chapter-1">
      <div class="scroll-witness__marker">
        <div class="scroll-witness__fill" id="fill-1"></div>
      </div>
      <span class="scroll-witness__label">Ch 1</span>
    </a>
    <a class="scroll-witness__item" href="#chapter-2">
      <div class="scroll-witness__marker">
        <div class="scroll-witness__fill" id="fill-2"></div>
      </div>
      <span class="scroll-witness__label">Ch 2</span>
    </a>
    <a class="scroll-witness__item" href="#chapter-3">
      <div class="scroll-witness__marker">
        <div class="scroll-witness__fill" id="fill-3"></div>
      </div>
      <span class="scroll-witness__label">Ch 3</span>
    </a>
    <a class="scroll-witness__item" href="#chapter-4">
      <div class="scroll-witness__marker">
        <div class="scroll-witness__fill" id="fill-4"></div>
      </div>
      <span class="scroll-witness__label">Ch 4</span>
    </a>
  </nav>

  <!-- ═══════════════════════════════════════════════════════════════════════════
       EXPLORATION HEADER — PAGE SCALE sparse zone (DD-F-006 fractal)
       ═══════════════════════════════════════════════════════════════════════════ -->
  <header class="exploration-header">
    <div class="exploration-header__inner">
      <div class="exploration-id">OD-001 — Organizational Exploration <span class="version-badge">v2 enriched</span></div>
      <h1 class="exploration-title">Conversational Structure</h1>
      <p class="exploration-hypothesis">
        What if documentation was organized as a conversation between a curious reader
        and a knowledgeable guide? Questions create sparse breathing room; answers deliver
        dense, authoritative content. Enriched with Socratic narrowing, Gestalt spacing,
        neobrutalist depth, and scroll-driven progress.
      </p>
      <div class="exploration-meta">
        <span>Density: <strong class="exploration-meta__value">PULSE + TIDAL</strong></span>
        <span>Organization: <strong class="exploration-meta__value">Q&A Dialogue</strong></span>
        <span>DD Sources: <strong class="exploration-meta__value">DD-005, DD-006</strong></span>
        <span>External: <strong class="exploration-meta__value">12 Research Findings</strong></span>
      </div>
    </div>
  </header>

  <main id="main-content" role="main">
  <div class="page-container">

    <!-- ═══════════════════════════════════════════════════════════════════════
         PATTERN VISUALIZATION — with solid offset depth (EXT-CREATIVE-001)
         DD-005 lesson: explain concept visually first
         ═══════════════════════════════════════════════════════════════════════ -->
    <section class="pattern-visualization reveal">
      <div class="pattern-visualization__title">Conversational Density Pattern</div>

      <div class="conversation-diagram">
        <div class="diagram-row">
          <span class="diagram-label">Question</span>
          <div class="diagram-bar diagram-bar--question">
            sparse — interrogative
          </div>
          <span class="diagram-density">LOW</span>
        </div>
        <div class="diagram-row">
          <span class="diagram-connector"><div class="diagram-connector-line"></div></span>
        </div>
        <div class="diagram-row">
          <span class="diagram-label">Answer</span>
          <div class="diagram-bar diagram-bar--answer">
            dense — authoritative — code, tables, examples
          </div>
          <span class="diagram-density">HIGH</span>
        </div>
        <div class="diagram-row">
          <span class="diagram-connector"><div class="diagram-connector-line"></div></span>
        </div>
        <div class="diagram-row">
          <span class="diagram-label">Follow-up</span>
          <div class="diagram-bar diagram-bar--question" style="width: 25%;">
            narrower — deeper
          </div>
          <span class="diagram-density">LOW</span>
        </div>
        <div class="diagram-row">
          <span class="diagram-connector"><div class="diagram-connector-line"></div></span>
        </div>
        <div class="diagram-row">
          <span class="diagram-label">Answer</span>
          <div class="diagram-bar diagram-bar--answer">
            dense — implementation detail — patterns
          </div>
          <span class="diagram-density">HIGH</span>
        </div>
      </div>

      <div class="diagram-annotation">
        <strong>PULSE rhythm:</strong> <code>sparse → dense → sparse → dense</code> maps to
        <code>question → answer → question → answer</code>. Width variation (TIDAL) reinforces:
        narrow questions, wide flowing answers. <strong>Socratic narrowing:</strong> follow-up
        questions get progressively more specific, shown by decreasing bar width.
      </div>
    </section>


    <!-- ═══════════════════════════════════════════════════════════════════════
         CHAPTER 1: THE CONCEPT — Broad Socratic opening
         PAGE SCALE: sparse chapter header → dense Q&A → sparse transition
         Progress: 1/4 chapters
         ═══════════════════════════════════════════════════════════════════════ -->
    <div class="conversation-chapter reveal" id="chapter-1">
      <div class="conversation-chapter__label">Chapter 1</div>
      <h2 class="conversation-chapter__title">Understanding the Pattern</h2>
      <div class="conversation-chapter__progress">
        <div class="progress-dots">
          <div class="progress-dot progress-dot--active"></div>
          <div class="progress-dot"></div>
          <div class="progress-dot"></div>
          <div class="progress-dot"></div>
        </div>
        <span>Socratic level: broad</span>
      </div>
    </div>

    <!-- QA PAIR 1 — Foundation question (broadest Socratic level) -->
    <div class="qa-pair reveal">
      <div class="question">
        <div class="question__marker">Q</div>
        <div class="question__text">
          What is a React Server Component, and why should I care?
        </div>
        <div class="question__narrowing">Broad → establishing context</div>
      </div>

      <div class="answer">
        <p class="answer__lead answer__lead--dropcap">
          A React Server Component runs on the server and sends only its rendered
          output to the client. No JavaScript bundle. No hydration cost. The component
          executes where the data lives.
        </p>

        <div class="answer__detail">
          <p>
            This matters because the traditional React model ships component code to the
            browser, then re-executes it to produce HTML. For data-heavy pages, you end up
            sending both the rendering logic <em>and</em> the data, doubling the payload.
          </p>
          <p>
            Server Components eliminate that duplication. They fetch data on the server,
            render to HTML, and stream the result. The client receives ready-to-display
            content with zero JavaScript overhead for those components.
          </p>
        </div>

        <!-- Callout — R1-007: follows content it references -->
        <div class="callout callout--info">
          <div class="callout__label">Info</div>
          <div class="callout__body">
            Server Components are the default in Next.js 13+ App Router. You only opt into
            Client Components when you need interactivity (<code>'use client'</code> directive).
          </div>
        </div>
      </div>
    </div>

    <!-- QA PAIR 2 — Narrowing: from "what is it" to "how do I choose" -->
    <div class="qa-pair reveal">
      <div class="question">
        <div class="question__marker">Q</div>
        <div class="question__text">
          How do I decide which components should be Server vs Client?
        </div>
        <div class="question__narrowing">Narrowing → from concept to decision</div>
      </div>

      <div class="answer">
        <p class="answer__lead">
          The decision comes down to a single question: does this component need browser APIs
          or user interaction? If yes, Client Component. If no, Server Component.
        </p>

        <!-- Decision Matrix — R1-023 applied within conversational answer -->
        <div class="decision-matrix">
          <table>
            <thead>
              <tr>
                <th>Signal</th>
                <th>Server Component</th>
                <th>Client Component</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Data fetching</td>
                <td>Direct DB/API access</td>
                <td>Via API routes or props</td>
              </tr>
              <tr>
                <td>Interactivity</td>
                <td>None needed</td>
                <td>onClick, onChange, etc.</td>
              </tr>
              <tr>
                <td>State</td>
                <td>No useState/useReducer</td>
                <td>Manages local state</td>
              </tr>
              <tr>
                <td>Browser APIs</td>
                <td>No window/document</td>
                <td>Needs window/document</td>
              </tr>
              <tr class="decision-matrix__highlight">
                <td>Bundle impact</td>
                <td>Zero JS shipped</td>
                <td>Adds to bundle size</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="answer__detail">
          <p>
            In practice, most of your application can be Server Components. Layouts, pages,
            data displays, and static content all qualify. Reserve Client Components for
            interactive islands: forms, modals, tooltips, and anything with event handlers.
          </p>
        </div>
      </div>
    </div>


    <!-- ═══════════════════════════════════════════════════════════════════════
         ESSENCE PULL QUOTE — R1-018 magazine technique
         PAGE SCALE: sparse breathing zone between chapters
         ═══════════════════════════════════════════════════════════════════════ -->
    <div class="essence-pullquote reveal">
      <div class="essence-pullquote__label">Essence</div>
      <p class="essence-pullquote__text">
        Every question a reader asks is a doorway. The answer behind it should be
        exactly as deep as the curiosity that opened it.
      </p>
    </div>


    <!-- ═══════════════════════════════════════════════════════════════════════
         CHAPTER 2: IMPLEMENTATION — Specific Socratic narrowing
         PAGE SCALE: dense chapter — code, patterns, files
         Progress: 2/4 chapters
         ═══════════════════════════════════════════════════════════════════════ -->
    <div class="conversation-chapter reveal" id="chapter-2">
      <div class="conversation-chapter__label">Chapter 2</div>
      <h2 class="conversation-chapter__title">Building It</h2>
      <div class="conversation-chapter__progress">
        <div class="progress-dots">
          <div class="progress-dot progress-dot--complete"></div>
          <div class="progress-dot progress-dot--active"></div>
          <div class="progress-dot"></div>
          <div class="progress-dot"></div>
        </div>
        <span>Socratic level: specific</span>
      </div>
    </div>

    <!-- QA PAIR 3 — Structure question -->
    <div class="qa-pair reveal">
      <div class="question">
        <div class="question__marker">Q</div>
        <div class="question__text">
          Show me the file structure. Where does everything go?
        </div>
        <div class="question__narrowing">Specific → from decision to structure</div>
      </div>

      <div class="answer">
        <p class="answer__lead answer__lead--dropcap">
          The App Router uses a file-system convention. Each folder becomes a route segment.
          Server Components are the default; Client Components are explicitly marked.
        </p>

        <!-- File Tree — R1-022 applied -->
        <div class="file-tree">
          <span class="file-tree__label">Project Structure</span>
          app/<br>
          ├── layout.tsx <span class="file-tree__annotation">← Server Component (wraps all pages)</span><br>
          ├── page.tsx <span class="file-tree__annotation">← Server Component (home page)</span><br>
          ├── <span class="file-tree__item--highlight">dashboard/</span><br>
          │&nbsp;&nbsp; ├── page.tsx <span class="file-tree__annotation">← Server: fetches data</span><br>
          │&nbsp;&nbsp; ├── <span class="file-tree__item--highlight">chart.tsx</span> <span class="file-tree__annotation">← Client: interactive ('use client')</span><br>
          │&nbsp;&nbsp; └── stats.tsx <span class="file-tree__annotation">← Server: static display</span><br>
          └── api/<br>
          &nbsp;&nbsp;&nbsp;&nbsp;└── route.ts <span class="file-tree__annotation">← API handler</span>
        </div>

        <div class="answer__detail">
          <p>
            Notice the pattern: the page-level component is always a Server Component that
            fetches data and orchestrates layout. Interactive elements are isolated into
            specific Client Components imported where needed.
          </p>
        </div>
      </div>
    </div>

    <!-- QA PAIR 4 — Code-level with Socratic follow-up chain -->
    <div class="qa-pair reveal">
      <div class="question">
        <div class="question__marker">Q</div>
        <div class="question__text">
          What does the actual code look like?
        </div>
        <div class="question__narrowing">Specific → from structure to implementation</div>
      </div>

      <div class="answer">
        <p class="answer__lead">
          A Server Component looks like any React component, except it can use
          <code>async/await</code> directly. No hooks for data fetching needed.
        </p>

        <!-- Code block — 15 lines, under Twilio 20-line rule (EXT-DENSITY-003) -->
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__lang">tsx</span>
            <button class="code-block__copy" onclick="navigator.clipboard.writeText(this.closest('.code-block').querySelector('.code-content')?.textContent || '')">Copy</button>
          </div>
          <div class="code-content">
            <div class="code-block__line">
              <span class="code-block__num">1</span>
              <span class="code-block__code--comment">// Server Component — runs on the server only</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">2</span>
              <span class="code-block__code--comment">// No 'use client' directive = Server by default</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">3</span>
              <span></span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">4</span>
              <span><span class="code-block__code--keyword">export default async function</span> <span class="code-block__code--function">DashboardPage</span>() {</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">5</span>
              <span>&nbsp;&nbsp;<span class="code-block__code--comment">// Direct database access — no API layer needed</span></span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">6</span>
              <span>&nbsp;&nbsp;<span class="code-block__code--keyword">const</span> metrics = <span class="code-block__code--keyword">await</span> <span class="code-block__code--function">db.query</span>(<span class="code-block__code--string">'SELECT * FROM metrics'</span>)</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">7</span>
              <span></span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">8</span>
              <span>&nbsp;&nbsp;<span class="code-block__code--keyword">return</span> (</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">9</span>
              <span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-block__code--type">main</span>&gt;</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">10</span>
              <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-block__code--type">h1</span>&gt;Dashboard&lt;/<span class="code-block__code--type">h1</span>&gt;</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">11</span>
              <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-block__code--type">Stats</span> data={metrics} /&gt; <span class="code-block__code--comment">{/* Server */}</span></span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">12</span>
              <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-block__code--type">Chart</span> data={metrics} /&gt; <span class="code-block__code--comment">{/* Client */}</span></span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">13</span>
              <span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="code-block__code--type">main</span>&gt;</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">14</span>
              <span>&nbsp;&nbsp;)</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">15</span>
              <span>}</span>
            </div>
          </div>
        </div>

        <!-- Tip callout AFTER code — R1-009 pattern -->
        <div class="callout callout--tip">
          <div class="callout__label">Tip</div>
          <div class="callout__body">
            The <code>Stats</code> component receives data as props from the Server Component.
            It never fetches data itself. The <code>Chart</code> component adds interactivity
            (hover, zoom) via <code>'use client'</code>, but still receives server-fetched data.
          </div>
        </div>

        <!-- Follow-up within the same pair — Socratic narrowing chain -->
        <div class="follow-up">
          <div class="question">
            <div class="question__marker">Q</div>
            <div class="question__text">
              What about the Client Component? How different is it?
            </div>
            <div class="question__narrowing">Narrower → specific component detail</div>
          </div>

          <div class="answer" style="margin-top: var(--space-within);">
            <p class="answer__lead">
              Client Components use the <code>'use client'</code> directive at the top of the file.
              They can use hooks, event handlers, and browser APIs.
            </p>

            <!-- 9 lines — under Twilio 20-line rule -->
            <div class="code-block">
              <div class="code-block__header">
                <span class="code-block__lang">tsx — chart.tsx</span>
                <button class="code-block__copy" onclick="navigator.clipboard.writeText(this.closest('.code-block').querySelector('.code-content')?.textContent || '')">Copy</button>
              </div>
              <div class="code-content">
                <div class="code-block__line">
                  <span class="code-block__num">1</span>
                  <span><span class="code-block__code--string">'use client'</span> <span class="code-block__code--comment">// ← This makes it a Client Component</span></span>
                </div>
                <div class="code-block__line">
                  <span class="code-block__num">2</span>
                  <span></span>
                </div>
                <div class="code-block__line">
                  <span class="code-block__num">3</span>
                  <span><span class="code-block__code--keyword">import</span> { <span class="code-block__code--function">useState</span> } <span class="code-block__code--keyword">from</span> <span class="code-block__code--string">'react'</span></span>
                </div>
                <div class="code-block__line">
                  <span class="code-block__num">4</span>
                  <span></span>
                </div>
                <div class="code-block__line">
                  <span class="code-block__num">5</span>
                  <span><span class="code-block__code--keyword">export function</span> <span class="code-block__code--function">Chart</span>({ data }: { data: <span class="code-block__code--type">Metric</span>[] }) {</span>
                </div>
                <div class="code-block__line">
                  <span class="code-block__num">6</span>
                  <span>&nbsp;&nbsp;<span class="code-block__code--keyword">const</span> [hoveredPoint, setHoveredPoint] = <span class="code-block__code--function">useState</span>(<span class="code-block__code--keyword">null</span>)</span>
                </div>
                <div class="code-block__line">
                  <span class="code-block__num">7</span>
                  <span></span>
                </div>
                <div class="code-block__line">
                  <span class="code-block__num">8</span>
                  <span>&nbsp;&nbsp;<span class="code-block__code--keyword">return</span> &lt;<span class="code-block__code--type">svg</span> onMouseMove={handleHover}&gt;...&lt;/<span class="code-block__code--type">svg</span>&gt;</span>
                </div>
                <div class="code-block__line">
                  <span class="code-block__num">9</span>
                  <span>}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- ═══════════════════════════════════════════════════════════════════════
         CHAPTER 3: PITFALLS — Specific Socratic narrowing
         PAGE SCALE: transitioning from dense (code) to cautionary
         Progress: 3/4 chapters
         ═══════════════════════════════════════════════════════════════════════ -->
    <div class="conversation-chapter reveal" id="chapter-3">
      <div class="conversation-chapter__label">Chapter 3</div>
      <h2 class="conversation-chapter__title">Common Mistakes</h2>
      <div class="conversation-chapter__progress">
        <div class="progress-dots">
          <div class="progress-dot progress-dot--complete"></div>
          <div class="progress-dot progress-dot--complete"></div>
          <div class="progress-dot progress-dot--active"></div>
          <div class="progress-dot"></div>
        </div>
        <span>Socratic level: specific → diagnostic</span>
      </div>
    </div>

    <!-- QA PAIR 5 — Error-focused question -->
    <div class="qa-pair reveal">
      <div class="question">
        <div class="question__marker">Q</div>
        <div class="question__text">
          What goes wrong? What are the mistakes everyone makes?
        </div>
        <div class="question__narrowing">Specific → identifying failure patterns</div>
      </div>

      <div class="answer">
        <p class="answer__lead answer__lead--dropcap">
          Three patterns account for 90% of Server Component confusion. Each stems from
          treating Server and Client Components as interchangeable when they are not.
        </p>

        <!-- Gotcha callout BEFORE mistakes — R1-009: warning before action -->
        <div class="callout callout--gotcha">
          <div class="callout__label">Gotcha</div>
          <div class="callout__body">
            The compiler error <code>"useState is not a function"</code> always means you
            forgot <code>'use client'</code>. Server Components cannot use hooks.
          </div>
        </div>

        <div class="answer__detail">
          <p>
            <strong>Mistake 1: Importing a Client Component into a Server Component's
            module scope.</strong> This forces the entire module to become a Client Component.
            Instead, import Client Components as children or through composition.
          </p>
          <p>
            <strong>Mistake 2: Passing non-serializable props across the boundary.</strong>
            Server Components can only pass serializable data (strings, numbers, plain objects)
            to Client Components. Functions, class instances, and Dates need conversion.
          </p>
          <p>
            <strong>Mistake 3: Making everything a Client Component "just in case."</strong>
            This defeats the purpose entirely. Start with Server Components. Add
            <code>'use client'</code> only when the component genuinely needs interactivity.
          </p>
        </div>

        <!-- v2: Collapsible depth-on-demand — resolves RD-1 (EXT-DENSITY-002) -->
        <details class="callout callout--info callout--collapsible">
          <summary>Dive deeper — serialization boundary rules</summary>
          <div class="callout__body">
            <p>The serialization boundary is the key concept. When a Server Component renders a
            Client Component, all props must survive <code>JSON.stringify()</code>. This means:</p>
            <p>✓ Strings, numbers, booleans, null, arrays, plain objects<br>
            ✗ Functions, class instances, Symbols, Dates (use <code>.toISOString()</code>)<br>
            ✗ React elements (but JSX children are fine — they're rendered server-side first)</p>
          </div>
        </details>
      </div>
    </div>

    <!-- QA PAIR 6 — Architecture-level: deepest Socratic narrowing in Ch3 -->
    <div class="qa-pair reveal">
      <div class="question">
        <div class="question__marker">Q</div>
        <div class="question__text">
          So what is the right mental model for the boundary?
        </div>
        <div class="question__narrowing">Deepest → mental model synthesis</div>
      </div>

      <div class="answer">
        <p class="answer__lead">
          Think of your application as two trees that share a single rendering surface.
          The Server tree renders first and produces HTML. The Client tree hydrates specific
          subtrees where interactivity is needed.
        </p>

        <div class="answer__detail">
          <p>
            The boundary between them is the <code>'use client'</code> directive. Everything
            above it is server territory. Everything below it is client territory. Data flows
            down across the boundary as serialized props. Events never cross back up — they
            trigger client-side state changes or server actions.
          </p>
        </div>

        <div class="callout callout--challenge">
          <div class="callout__label">Challenge</div>
          <div class="callout__body">
            Examine your current Next.js application. How many components use
            <code>'use client'</code>? For each one, ask: does this genuinely need
            interactivity, or could it be a Server Component receiving data as props?
          </div>
        </div>
      </div>
    </div>


    <!-- ═══════════════════════════════════════════════════════════════════════
         ESSENCE PULL QUOTE 2 — v2 addition, between Ch3 and Ch4
         ═══════════════════════════════════════════════════════════════════════ -->
    <div class="essence-pullquote reveal">
      <div class="essence-pullquote__label">Essence</div>
      <p class="essence-pullquote__text">
        The boundary between server and client is not a wall — it is a membrane.
        Data passes through freely. Behavior does not.
      </p>
    </div>


    <!-- ═══════════════════════════════════════════════════════════════════════
         CHAPTER 4: ADVANCED PATTERNS — v2 addition
         Demonstrates Socratic progressive narrowing at its deepest
         Shows the conversation evolving from "what" to "how" to "what if"
         Progress: 4/4 chapters
         ═══════════════════════════════════════════════════════════════════════ -->
    <div class="conversation-chapter reveal" id="chapter-4">
      <div class="conversation-chapter__label">Chapter 4</div>
      <h2 class="conversation-chapter__title">Advanced Patterns</h2>
      <div class="conversation-chapter__progress">
        <div class="progress-dots">
          <div class="progress-dot progress-dot--complete"></div>
          <div class="progress-dot progress-dot--complete"></div>
          <div class="progress-dot progress-dot--complete"></div>
          <div class="progress-dot progress-dot--active"></div>
        </div>
        <span>Socratic level: deep synthesis</span>
      </div>
    </div>

    <!-- QA PAIR 7 — Advanced: composition patterns -->
    <div class="qa-pair reveal">
      <div class="question">
        <div class="question__marker">Q</div>
        <div class="question__text">
          How do I compose Server and Client Components together?
        </div>
        <div class="question__narrowing">Deep → composition architecture</div>
      </div>

      <div class="answer">
        <p class="answer__lead answer__lead--dropcap">
          The composition pattern is the key to elegant Server/Client boundaries.
          Server Components can render Client Components as children, passing server-fetched
          data down through props while keeping the parent's zero-JS footprint.
        </p>

        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__lang">tsx — composition pattern</span>
            <button class="code-block__copy" onclick="navigator.clipboard.writeText(this.closest('.code-block').querySelector('.code-content')?.textContent || '')">Copy</button>
          </div>
          <div class="code-content">
            <div class="code-block__line">
              <span class="code-block__num">1</span>
              <span class="code-block__code--comment">// Server Component — the orchestrator</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">2</span>
              <span><span class="code-block__code--keyword">export default async function</span> <span class="code-block__code--function">Page</span>() {</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">3</span>
              <span>&nbsp;&nbsp;<span class="code-block__code--keyword">const</span> data = <span class="code-block__code--keyword">await</span> <span class="code-block__code--function">fetchData</span>()</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">4</span>
              <span>&nbsp;&nbsp;<span class="code-block__code--keyword">return</span> (</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">5</span>
              <span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-block__code--type">ServerLayout</span>&gt;</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">6</span>
              <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-block__code--type">ClientSearch</span> initialData={data.items} /&gt;</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">7</span>
              <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="code-block__code--type">ServerContent</span> content={data.body} /&gt;</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">8</span>
              <span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="code-block__code--type">ServerLayout</span>&gt;</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">9</span>
              <span>&nbsp;&nbsp;)</span>
            </div>
            <div class="code-block__line">
              <span class="code-block__num">10</span>
              <span>}</span>
            </div>
          </div>
        </div>

        <!-- Socratic follow-up chain — three levels deep -->
        <div class="follow-up">
          <div class="question">
            <div class="question__marker">Q</div>
            <div class="question__text">
              Can Client Components render Server Components?
            </div>
            <div class="question__narrowing">Deeper → boundary inversion question</div>
          </div>

          <div class="answer" style="margin-top: var(--space-within);">
            <p class="answer__lead">
              Not directly. But you can pass Server Components as <code>children</code> to Client
              Components. The server renders the children first, then the client wraps them.
            </p>

            <div class="callout callout--essence">
              <div class="callout__label">Essence</div>
              <div class="callout__body">
                Server Components flow downward like water. Client Components are the vessels
                that contain them. The water fills the shape of the vessel, but the vessel
                cannot become water.
              </div>
            </div>

            <!-- Deepest follow-up — third Socratic level -->
            <div class="follow-up follow-up--deep">
              <div class="question">
                <div class="question__marker">Q</div>
                <div class="question__text">
                  What about Server Actions? How do events cross the boundary?
                </div>
                <div class="question__narrowing">Deepest → boundary mechanics</div>
              </div>

              <div class="answer" style="margin-top: var(--space-within);">
                <p class="answer__lead">
                  Server Actions let Client Components call server-side functions directly.
                  Mark a function with <code>'use server'</code> and it becomes an RPC endpoint
                  that the client can invoke without building an API route.
                </p>

                <details class="callout callout--info callout--collapsible">
                  <summary>Dive deeper — Server Actions vs API Routes</summary>
                  <div class="callout__body">
                    <p>Server Actions are syntactic sugar over POST requests. When you mark a function
                    <code>'use server'</code>, Next.js creates an API endpoint automatically. The
                    client sends form data; the server executes the function; the result revalidates
                    the page. No manual fetch calls, no API route files, no serialization logic.</p>
                    <p>Use Server Actions for mutations (create, update, delete). Keep API routes
                    for third-party webhooks and external integrations.</p>
                  </div>
                </details>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- ═══════════════════════════════════════════════════════════════════════
         CONVERSATION SUMMARY — closing pattern with solid offset
         ═══════════════════════════════════════════════════════════════════════ -->
    <section class="conversation-summary reveal">
      <div class="conversation-summary__title">What We Covered</div>
      <ul class="conversation-summary__list">
        <li class="conversation-summary__item">
          <div class="conversation-summary__marker"></div>
          <span>Server Components run on the server and send only rendered HTML — zero JavaScript overhead</span>
        </li>
        <li class="conversation-summary__item">
          <div class="conversation-summary__marker"></div>
          <span>Use the decision matrix: if it needs browser APIs or interactivity, make it a Client Component</span>
        </li>
        <li class="conversation-summary__item">
          <div class="conversation-summary__marker"></div>
          <span>File structure reflects the boundary — Server Components orchestrate, Client Components interact</span>
        </li>
        <li class="conversation-summary__item">
          <div class="conversation-summary__marker"></div>
          <span>The three common mistakes all stem from treating the boundary as optional rather than architectural</span>
        </li>
        <li class="conversation-summary__item">
          <div class="conversation-summary__marker"></div>
          <span>Think in two trees: server renders first, client hydrates interactive subtrees</span>
        </li>
        <li class="conversation-summary__item">
          <div class="conversation-summary__marker"></div>
          <span>Composition is the key pattern — Server Components orchestrate, passing data down to Client islands</span>
        </li>
        <li class="conversation-summary__item">
          <div class="conversation-summary__marker"></div>
          <span>Server Actions bridge the boundary for mutations — <code>'use server'</code> creates RPC endpoints automatically</span>
        </li>
      </ul>
    </section>


    <!-- ═══════════════════════════════════════════════════════════════════════
         v2: ENRICHMENT APPENDIX — Documents applied external research
         ═══════════════════════════════════════════════════════════════════════ -->
    <section class="enrichment-appendix reveal">
      <div class="enrichment-appendix__title">v2 Research Enrichments Applied</div>

      <div class="enrichment-grid">
        <div class="enrichment-card">
          <div class="enrichment-card__id">EXT-CONV-001</div>
          <div class="enrichment-card__name">Socratic Progressive Narrowing</div>
          <div class="enrichment-card__desc">Questions progressively narrow from broad context to specific implementation detail. Visualized via narrowing indicators and decreasing follow-up widths.</div>
          <div class="enrichment-card__where">Applied: All Q&A pairs, question__narrowing labels</div>
        </div>

        <div class="enrichment-card">
          <div class="enrichment-card__id">EXT-CONV-004</div>
          <div class="enrichment-card__name">Background Color Differentiation</div>
          <div class="enrichment-card__desc">Questions and answers have distinct background colors, making the PULSE rhythm visible even without width variation (mobile fallback).</div>
          <div class="enrichment-card__where">Applied: --color-question-bg, --color-answer-bg</div>
        </div>

        <div class="enrichment-card">
          <div class="enrichment-card__id">EXT-CREATIVE-001</div>
          <div class="enrichment-card__name">THE SOLID OFFSET</div>
          <div class="enrichment-card__desc">Neobrutalist depth using pseudo-element solid blocks instead of box-shadow. Respects box-shadow: none constraint while adding visual depth.</div>
          <div class="enrichment-card__where">Applied: Pattern viz, code blocks, essence callouts, summary</div>
        </div>

        <div class="enrichment-card">
          <div class="enrichment-card__id">EXT-CREATIVE-002</div>
          <div class="enrichment-card__name">Typographic Hierarchy Cascade</div>
          <div class="enrichment-card__desc">5-level type system (40px/26px/22px/16px/14px) with ~1.5x ratio, creating fractal-aligned typographic hierarchy.</div>
          <div class="enrichment-card__where">Applied: CSS custom properties --type-*</div>
        </div>

        <div class="enrichment-card">
          <div class="enrichment-card__id">EXT-CREATIVE-003</div>
          <div class="enrichment-card__name">THE SCROLL WITNESS</div>
          <div class="enrichment-card__desc">Fixed sidebar with per-chapter progress indicators. Shows reading position and chapter completion.</div>
          <div class="enrichment-card__where">Applied: .scroll-witness nav element (desktop only)</div>
        </div>

        <div class="enrichment-card">
          <div class="enrichment-card__id">EXT-CREATIVE-004</div>
          <div class="enrichment-card__name">THE ARRIVING WISDOM</div>
          <div class="enrichment-card__desc">Scroll-triggered staggered reveal animations using CSS scroll-driven animations API. Graceful fallback for non-Chromium.</div>
          <div class="enrichment-card__where">Applied: .reveal class on all major sections</div>
        </div>

        <div class="enrichment-card">
          <div class="enrichment-card__id">EXT-CREATIVE-005</div>
          <div class="enrichment-card__name">THE EDITORIAL DROP</div>
          <div class="enrichment-card__desc">Serif drop caps on chapter-opening answer paragraphs, connecting documentation to centuries of editorial tradition.</div>
          <div class="enrichment-card__where">Applied: .answer__lead--dropcap (Ch1, Ch2, Ch3 openers)</div>
        </div>

        <div class="enrichment-card">
          <div class="enrichment-card__id">EXT-CONV-003</div>
          <div class="enrichment-card__name">Three-Level Gestalt Spacing</div>
          <div class="enrichment-card__desc">Enforced three-tier spacing: 8px within related elements, 32px between elements, 64px between chapters. Respects Gestalt Pure Distance Law.</div>
          <div class="enrichment-card__where">Applied: --space-within, --space-between, --space-chapter</div>
        </div>
      </div>
    </section>

  </div>
  </main>


  <!-- ═══════════════════════════════════════════════════════════════════════════
       v2: Scroll Witness JavaScript — tracks chapter visibility
       Fallback for CSS scroll-driven animations not being widely supported
       ═══════════════════════════════════════════════════════════════════════════ -->
  <script>
    // Scroll Witness: track chapter progress
    (function() {
      const chapters = document.querySelectorAll('.conversation-chapter');
      const fills = {
        'chapter-1': document.getElementById('fill-1'),
        'chapter-2': document.getElementById('fill-2'),
        'chapter-3': document.getElementById('fill-3'),
        'chapter-4': document.getElementById('fill-4')
      };

      function updateProgress() {
        chapters.forEach(chapter => {
          const id = chapter.id;
          const fill = fills[id];
          if (!fill) return;

          const rect = chapter.getBoundingClientRect();
          const nextChapter = chapter.nextElementSibling;
          let sectionHeight = window.innerHeight;

          // Find the next chapter to measure section height
          let sibling = chapter.nextElementSibling;
          while (sibling && !sibling.classList.contains('conversation-chapter') && !sibling.classList.contains('conversation-summary')) {
            sibling = sibling.nextElementSibling;
          }

          if (sibling) {
            sectionHeight = sibling.getBoundingClientRect().top - rect.top;
          }

          const scrolled = -rect.top;
          const progress = Math.max(0, Math.min(1, scrolled / sectionHeight));
          fill.style.height = (progress * 100) + '%';
        });
      }

      window.addEventListener('scroll', updateProgress, { passive: true });
      updateProgress();

      // Copy button functionality
      document.querySelectorAll('.code-block__copy').forEach(btn => {
        btn.addEventListener('click', function() {
          const codeContent = this.closest('.code-block').querySelector('.code-content');
          if (codeContent) {
            const text = codeContent.textContent.replace(/^\d+\s*/gm, '');
            navigator.clipboard.writeText(text).then(() => {
              this.textContent = 'Copied!';
              setTimeout(() => { this.textContent = 'Copy'; }, 1500);
            });
          }
        });
      });
    })();
  </script>

</body>
</html>
