<!-- Score: Innovation: 9 | Utility: 9 | Soul: 9 | Execution: 8 | Total: 35/40 -->
<!-- Iteration 2 — self-critique applied: varied island templates, progressive complexity, collapsible islands, dark header, dark code blocks, zone tokens, 3-cat border system, back bookend decompression -->
<!-- Applied EXT-TASK-005: Dependency lines in archipelago map (square arrowheads) -->
<!-- Applied EXT-TASK-007: Complexity indicators via accent color + weight differentiation -->
<!-- Applied EXT-TASK-008: Duration badges in JetBrains Mono per island header -->
<!-- Applied EXT-TASK-010: ID attributes on all island headers for URL fragment navigation -->
<!-- Applied EXT-TASK-013: 4 island layout templates (Standard, Split-annotation, Dense-inline, Showcase-code-first) -->
<!-- Applied EXT-TASK-014: Progressive complexity gradient (3 steps beginner -> 4 steps advanced) -->
<!-- Applied EXT-TASK-015: 4-level spacing hierarchy (micro 4px, step 8px, island 16-24px, sea 80px+) -->
<!-- Applied EXT-TASK-016: Dark header as archipelago map with complexity-coded tiles -->
<!-- Applied EXT-TASK-017: Back BOOKEND as 3-beat cognitive decompression (verify, reflect, next) -->
<!-- Applied EXT-TASK-018: Collapsible islands via <details>, Task 1 expanded by default -->
<!-- Applied EXT-TASK-019: Zone tokens (--color-zone-sparse, --color-zone-dense, --color-zone-breathing) -->
<!-- Applied OD-F-005: Organization IS Density — zone tokens embody this at CSS level -->
<!-- Applied OD-F-AP-001: 3-category border system, zero 2px borders -->
<!-- Applied OD-F-007: 48px+ spacing between mode transitions -->

<!-- ═══════════════════════════════════════════════════════════════════════
     OD-003: Task-Based Structure — ISLANDS + BOOKENDS
     Organizational Exploration — Discrete Task Cluster Pattern

     Hypothesis: "What if documentation was organized around discrete tasks —
     self-contained procedural clusters — rather than linear narrative flow?"
     Density Pairing: ISLANDS (primary) + BOOKENDS (secondary)
     DD Sources: DD-003 (ISLANDS, 32/40), DD-006 (FRACTAL — mandatory)
     Research: EXT-TASK-001 through EXT-TASK-019

     Applied Research:
       EXT-TASK-001 through EXT-TASK-019 (19 findings applied)
       R1-001, R1-003, R1-007, R1-008, R1-016, R1-019
       R3-047, DD-F-003, DD-F-006

     Anti-Patterns Avoided:
       DD-F-015 Traffic-light — no green+red adjacent callouts
       DD-F-016 Border inconsistency — standardized per 3-cat system
       DD-F-017 Uniform density — varied per ISLANDS + progressive complexity
       DD-F-018 Fighting the pattern — sparse stays sparse, islands stay dense
       R5-A1 Callout Cacophony — max 2 callouts per section

     DD-F-006 Fractal Compliance:
       PAGE SCALE: Dark header map (dense) -> Task islands in sparse sea -> Verification (dense)
       SECTION SCALE: Within each island, prereqs(dense) -> steps(moderate) -> checkpoint(dense)
       COMPONENT SCALE: Callout label(sparse) -> body(dense)
       CHARACTER SCALE: Code comments(sparse) -> code logic(dense)
     ═══════════════════════════════════════════════════════════════════════ -->

<!-- ═══════════════════════════════════════════════════════════════════════
     INLINE THREADING HEADER — OD Execution Phase
     File: docs-spa/app/showcase/explorations/organizational/OD-003-task-based.html
     Tier: B | Stage: 3 (Organization OD) | Generated: 2026-02-07
     ═══════════════════════════════════════════════════════════════════════

1. WHY THIS EXISTS
OD-003-task-based.html is the third organizational exploration, testing the
hypothesis that documentation organized as discrete, self-contained task
clusters (ISLANDS) with dense orientation front and dense verification back
(BOOKENDS) creates superior procedural comprehension.

2. THE QUESTION THIS ANSWERS
"Can a task-based organizational structure create natural ISLANDS density rhythm
while maintaining DD-F-006 fractal self-similarity at four structural scales?"

3. STATUS
ACTIVE — INCLUDE (v3 re-enriched, Wave 5 audit PASS). ~35/40. Soul compliance 100%.
Wave 5: Core soul PASS (calibration plants removed). OD-AP-003 FAIL (4 rgba). Standards 13/17.
5 builder discoveries, 522 lines changed. Structural monotony ADDRESSED.

4. SOUL ALIGNMENT
  1. Sharp Edges: border-radius: 0 in :root
  2. No Shadows: box-shadow: none; solid offset only
  3. Serif = Wisdom: Instrument Serif for titles, essence
  4. Callout Family DNA: 2-zone, 4px left border, color variants
  5. Squares Signal System: square step markers, task numbers

5. BUILT ON
  DD-003-islands.html, DD-006-fractal.html, OD-001, OD-002,
  MASTER-SOUL-SYNTHESIS.md, DESIGN-TOKEN-SUMMARY.md

6. MUST HONOR
  DD-F-006 fractal at 4 scales, ISLANDS density, BOOKENDS,
  border-radius: 0, box-shadow: none, max 2 callouts/section, 80px+ between islands

7. WHAT BREAKS IF THIS CHANGES
  OD-CHECKPOINT.md, RESEARCH-ACTIVE.md, organizational-patterns.md, OD-SYNTHESIS.md

8. CONSUMED BY
  OD-CHECKPOINT.md, RESEARCH-ACTIVE.md, organizational-patterns.md, OD-SYNTHESIS.md
  builder-2a (v3 re-enrichment), scribe-2 (provenance chain update)

     ═══════════════════════════════════════════════════════════════════════
     END INLINE THREADING HEADER
     ═══════════════════════════════════════════════════════════════════════ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OD-003: Task-Based Structure</title>

  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' fill='%23E83025'/><text x='50%25' y='50%25' dominant-baseline='central' text-anchor='middle' fill='white' font-family='serif' font-size='20'>K</text></svg>">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    /* ═══════════════════════════════════════════════════════════════════
       LOCKED DESIGN TOKENS — OD-CONVENTION-SPEC.md Section 10
       ═══════════════════════════════════════════════════════════════════ */
    :root {
      --color-primary: #E83025;
      --color-background: #FEF9F5;
      --color-text: #1A1A1A;
      --color-text-secondary: #666666;
      --color-border: #E0D5C5;
      --color-border-subtle: #F0EBE3;

      /* Applied EXT-TASK-019: Zone tokens embody OD-F-005 */
      --color-zone-sparse: #FEF9F5;
      --color-zone-dense: #FFFFFF;
      --color-zone-breathing: #FAF5ED;
      --color-zone-emphasis: rgba(232,48,37,0.03);

      --font-display: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

      --type-page: 2.5rem;
      --type-section: 1.625rem;
      --type-subsection: 1.375rem;
      --type-body: 1rem;
      --type-code: 0.875rem;
      --type-meta: 0.75rem;

      --border-radius: 0;
      --box-shadow: none;

      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --space-16: 64px;
      --space-20: 80px;

      --space-within: var(--space-2);
      --space-between: var(--space-8);
      --space-chapter: var(--space-16);

      --accent-blue: #4A90D9;
      --accent-green: #4A9D6B;
      --accent-coral: #C97065;
      --accent-amber: #D97706;
      --accent-purple: #7C3AED;

      --border-left-width: 4px;
      --offset-x: 4px;
      --offset-y: 4px;
      --offset-color: #1A1A1A;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: var(--font-body);
      background: var(--color-background);
      color: var(--color-text);
      line-height: 1.7;
      font-size: var(--type-body);
    }

    /* Scroll reveal — Chromium only */
    .reveal {
      animation: arrive 0.5s ease-out both;
      animation-timeline: view();
      animation-range: entry 10% entry 40%;
    }
    @keyframes arrive {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: none; }
    }
    @supports not (animation-timeline: view()) {
      .reveal { opacity: 1; transform: none; }
    }

    /* ═══════════════════════════════════════════════════════════════════
       HEADER — Applied EXT-TASK-016: Dark header + archipelago map
       Convention spec Section 4: Full-bleed dark
       ═══════════════════════════════════════════════════════════════════ */
    .exploration-header {
      background: var(--color-text);
      border-bottom: 3px solid var(--color-primary);
      padding: var(--space-16) var(--space-8);
    }
    .exploration-header__inner {
      max-width: 860px;
      margin: 0 auto;
    }
    .exploration-id {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      color: var(--color-text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: var(--space-2);
    }
    .exploration-title {
      font-family: var(--font-display);
      font-size: var(--type-page);
      font-style: italic;
      color: var(--color-background);
      margin-bottom: var(--space-4);
    }
    .exploration-hypothesis {
      font-size: 15px;
      color: var(--color-text-secondary);
      max-width: 70ch;
      line-height: 1.6;
      margin-bottom: var(--space-8);
    }

    /* Archipelago map — miniature ISLANDS fractal echo */
    .archipelago-map {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: var(--space-2);
      margin-top: var(--space-8);
    }
    @media (max-width: 640px) {
      .archipelago-map { grid-template-columns: repeat(3, 1fr); }
    }
    .archipelago-tile {
      padding: var(--space-3) var(--space-2);
      text-align: center;
      border: 3px solid var(--color-border);
    }
    .archipelago-tile__number {
      font-family: var(--font-mono);
      font-size: 18px;
      font-weight: 600;
      color: var(--color-background);
      display: block;
      margin-bottom: var(--space-1);
    }
    .archipelago-tile__label {
      font-family: var(--font-mono);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-text-secondary);
      display: block;
    }
    .archipelago-tile__duration {
      font-family: var(--font-mono);
      font-size: 9px;
      color: var(--color-text-secondary);
      display: block;
      margin-top: var(--space-1);
    }
    .archipelago-tile--beginner { border-color: var(--accent-green); }
    .archipelago-tile--intermediate { border-color: var(--color-primary); }
    .archipelago-tile--advanced { border-color: var(--accent-purple); }

    .exploration-meta {
      display: flex;
      gap: var(--space-6);
      margin-top: var(--space-6);
      font-family: var(--font-mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-text-secondary);
      flex-wrap: wrap;
    }
    .exploration-meta span { display: flex; align-items: center; gap: var(--space-1); }
    .exploration-meta__value { color: var(--color-primary); }

    /* Page container */
    .page-container {
      max-width: 860px;
      margin: 0 auto;
      padding: 0 var(--space-6);
      padding-bottom: var(--space-20);
    }

    /* ═══════════════════════════════════════════════════════════════════
       BOOKEND FRONT — Dense orientation
       ═══════════════════════════════════════════════════════════════════ */
    .bookend-front {
      background: var(--color-zone-dense);
      border-left: var(--border-left-width) solid var(--color-primary);
      padding: var(--space-8);
      margin-top: var(--space-12);
      margin-bottom: var(--space-10);
    }
    .bookend-front__label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-primary);
      margin-bottom: var(--space-5);
    }
    .bookend-front__title {
      font-family: var(--font-display);
      font-style: italic;
      font-size: var(--type-section);
      margin-bottom: var(--space-6);
    }
    .bookend-front__description {
      color: var(--color-text-secondary);
      font-size: 15px;
      line-height: 1.7;
      margin-bottom: var(--space-8);
      max-width: 640px;
    }
    .task-overview {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-6);
      margin-bottom: var(--space-8);
    }
    @media (max-width: 640px) { .task-overview { grid-template-columns: 1fr; } }
    .task-overview__item { display: flex; gap: var(--space-3); align-items: flex-start; }
    .task-overview__marker {
      width: 10px; height: 10px; min-width: 10px;
      background: var(--color-border); margin-top: 6px;
    }
    .task-overview__text { font-size: 14px; }
    .task-overview__text strong { font-weight: 600; display: block; margin-bottom: 2px; }
    .task-overview__text span { color: var(--color-text-secondary); font-size: 13px; }

    .bookend-meta {
      display: flex; gap: var(--space-8);
      padding-top: var(--space-5);
      border-top: 3px solid var(--color-border);
      flex-wrap: wrap;
    }
    .bookend-meta__item { display: flex; flex-direction: column; gap: 2px; }
    .bookend-meta__label {
      font-family: var(--font-mono); font-size: 9px;
      text-transform: uppercase; letter-spacing: 0.12em;
      color: var(--color-text-secondary);
    }
    .bookend-meta__value { font-weight: 600; font-size: 14px; }

    /* ═══════════════════════════════════════════════════════════════════
       SPARSE SEA — Applied EXT-TASK-015: Level 4 (80px+)
       ═══════════════════════════════════════════════════════════════════ */
    .sparse-sea { height: var(--space-20); position: relative; }
    .sparse-sea--large { height: 96px; }

    /* ═══════════════════════════════════════════════════════════════════
       TASK ISLAND — Collapsible via <details> (EXT-TASK-018)
       ═══════════════════════════════════════════════════════════════════ */
    .task-island {
      background: var(--color-zone-dense);
      border: 3px solid var(--color-border);
      border-left: var(--border-left-width) solid var(--color-primary);
      position: relative;
    }
    .task-island[open] { background: var(--color-zone-emphasis); }
    .task-island--beginner { border-left-color: var(--accent-green); }
    .task-island--intermediate { border-left-color: var(--color-primary); }
    .task-island--advanced { border-left-color: var(--accent-purple); }
    .task-island--featured {
      box-shadow: none;
      outline: 4px solid var(--color-text);
      outline-offset: 4px;
    }
    .task-island > summary {
      display: flex; align-items: flex-start; gap: var(--space-5);
      padding: var(--space-6) var(--space-8);
      cursor: pointer; list-style: none;
    }
    .task-island > summary::-webkit-details-marker { display: none; }
    .task-island > summary::marker { display: none; content: ''; }

    .task-island__number {
      width: 48px; height: 48px; min-width: 48px;
      display: flex; align-items: center; justify-content: center;
      font-family: var(--font-mono); font-size: 20px; font-weight: 600;
      border: 3px solid var(--color-primary);
      color: var(--color-primary);
      background: var(--color-background);
    }
    .task-island--beginner .task-island__number { border-color: var(--accent-green); color: var(--accent-green); }
    .task-island--intermediate .task-island__number { border-color: var(--color-primary); color: var(--color-primary); }
    .task-island--advanced .task-island__number { border-color: var(--accent-purple); color: var(--accent-purple); }

    .task-island__title-block { flex: 1; }
    .task-island__label {
      font-family: var(--font-mono); font-size: var(--type-meta);
      text-transform: uppercase; letter-spacing: 0.15em;
      color: var(--color-text-secondary); margin-bottom: var(--space-1);
    }
    .task-island__title {
      font-family: var(--font-display); font-style: italic;
      font-size: var(--type-subsection); line-height: 1.3;
    }
    .task-island__meta { display: flex; gap: var(--space-4); margin-top: var(--space-2); align-items: center; }
    .task-duration {
      font-family: var(--font-mono); font-size: var(--type-meta);
      color: var(--color-text-secondary);
      border: 3px solid var(--color-border);
      padding: var(--space-1) var(--space-2);
    }
    .task-complexity {
      font-family: var(--font-mono); font-size: 10px;
      text-transform: uppercase; letter-spacing: 0.08em;
      padding: var(--space-1) var(--space-2);
    }
    .task-complexity--beginner { color: var(--accent-green); border: 1px solid var(--accent-green); }
    .task-complexity--intermediate { color: var(--color-primary); border: 1px solid var(--color-primary); }
    .task-complexity--advanced { color: var(--accent-purple); border: 1px solid var(--accent-purple); }

    .task-island__toggle {
      font-family: var(--font-mono); font-size: 16px; font-weight: 600;
      color: var(--color-text-secondary);
      width: 24px; height: 24px;
      display: flex; align-items: center; justify-content: center;
      border: 3px solid var(--color-border);
      flex-shrink: 0; margin-top: var(--space-3);
    }
    .task-island[open] .task-island__toggle::after { content: '\2212'; }
    .task-island:not([open]) .task-island__toggle::after { content: '+'; }

    .task-island__body { padding: 0 var(--space-8) var(--space-8); }

    /* ═══════════════════════════════════════════════════════════════════
       CALLOUT SYSTEM — Soul Piece 4: Family DNA
       ═══════════════════════════════════════════════════════════════════ */
    .callout {
      border-left: var(--border-left-width) solid var(--color-border);
      background: var(--color-border-subtle);
      margin: var(--space-6) 0;
    }
    .callout__label {
      font-family: var(--font-mono); font-size: var(--type-meta);
      font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em;
      padding: var(--space-3) var(--space-5);
      border-bottom: 1px solid var(--color-border);
      color: var(--color-text);
    }
    .callout__body {
      padding: var(--space-4) var(--space-5);
      font-size: 14px; line-height: 1.7;
    }
    .callout__body p + p { margin-top: var(--space-3); }
    .callout__body code {
      font-family: var(--font-mono); font-size: var(--type-code);
      background: rgba(0,0,0,0.04); padding: 1px 5px;
    }
    .callout--essence { border-left-color: var(--color-primary); }
    .callout--essence .callout__body { font-family: var(--font-display); font-style: italic; font-size: 15px; line-height: 1.6; }
    .callout--prereq { border-left-color: var(--color-primary); background: #FEF5F4; }
    .callout--tip { border-left-color: var(--accent-green); }
    .callout--checkpoint { border-left-color: var(--accent-green); background: #F4FAF6; }
    .callout--warning { border-left-color: var(--accent-amber); }
    .callout--gotcha { border-left-color: var(--accent-coral); }
    .callout--note { border-left-color: var(--accent-blue); }

    /* ═══════════════════════════════════════════════════════════════════
       TASK STEPS — Square markers (Soul Piece 5)
       ═══════════════════════════════════════════════════════════════════ */
    .task-steps { list-style: none; counter-reset: task-step; }
    .task-step {
      display: flex; gap: var(--space-5);
      margin-bottom: var(--space-8); position: relative;
    }
    .task-step:not(:last-child)::after {
      content: ''; position: absolute; left: 15px; top: 36px;
      bottom: calc(var(--space-8) * -1 + 4px);
      width: 1px; background: var(--color-border);
    }
    .task-step__marker {
      counter-increment: task-step;
      width: 32px; height: 32px; min-width: 32px;
      display: flex; align-items: center; justify-content: center;
      font-family: var(--font-mono); font-size: 13px; font-weight: 600;
      border: 3px solid var(--color-border);
      background: white; color: var(--color-text-secondary);
      position: relative; z-index: 1;
    }
    .task-step__marker::before { content: counter(task-step); }
    .task-step__content { flex: 1; padding-top: 4px; }
    .task-step__title { font-weight: 600; font-size: 15px; margin-bottom: var(--space-3); }
    .task-step__description {
      font-size: 14px; color: var(--color-text-secondary);
      margin-bottom: var(--space-4); line-height: 1.7;
    }

    /* ═══════════════════════════════════════════════════════════════════
       CODE BLOCKS — Convention spec Section 3: Dark theme
       ═══════════════════════════════════════════════════════════════════ */
    .code-block {
      background: var(--color-text);
      color: var(--color-background);
      border: 3px solid var(--color-border);
      padding: var(--space-6) var(--space-8);
      font-family: var(--font-mono);
      font-size: var(--type-code);
      line-height: 1.5;
      overflow-x: auto;
      margin: var(--space-4) 0;
      position: relative;
    }
    .code-block__label {
      font-family: var(--font-mono); font-size: 9px;
      text-transform: uppercase; letter-spacing: 0.12em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-3); padding-bottom: var(--space-2);
      border-bottom: 1px solid rgba(224,213,197,0.3);
    }
    .code-block pre { white-space: pre; overflow-x: auto; }
    .code-block code { font-family: var(--font-mono); font-size: var(--type-code); color: var(--color-background); }
    .code-keyword { color: var(--color-primary); }
    .code-string { color: #6B9B7A; }
    .code-comment { color: var(--color-text-secondary); font-style: italic; }
    .code-function { color: #4A7C9B; }
    .code-type { color: var(--accent-coral); }
    .code-number { color: var(--accent-amber); }

    /* ═══════════════════════════════════════════════════════════════════
       TROUBLESHOOTING — EXT-TASK-012
       ═══════════════════════════════════════════════════════════════════ */
    .troubleshoot { border: 3px solid var(--accent-coral); margin: var(--space-6) 0; }
    .troubleshoot summary {
      background: #FEF6F5; padding: var(--space-4) var(--space-5);
      cursor: pointer; font-family: var(--font-mono);
      font-size: var(--type-meta); font-weight: 500;
      color: var(--accent-coral); text-transform: uppercase;
      letter-spacing: 0.06em; list-style: none;
      display: flex; align-items: center; gap: var(--space-3);
    }
    .troubleshoot summary::-webkit-details-marker { display: none; }
    .troubleshoot summary::before {
      content: '+'; font-size: 16px; font-weight: 600;
      width: 20px; height: 20px;
      display: flex; align-items: center; justify-content: center;
      border: 3px solid var(--accent-coral); flex-shrink: 0;
    }
    .troubleshoot[open] summary::before { content: '\2212'; }
    .troubleshoot__body {
      padding: var(--space-5); font-size: 14px; line-height: 1.7;
      border-top: 1px solid var(--accent-coral);
    }
    .troubleshoot__body p + p { margin-top: var(--space-3); }
    .troubleshoot__body code {
      font-family: var(--font-mono); font-size: var(--type-code);
      background: rgba(0,0,0,0.04); padding: 1px 5px;
    }

    /* ═══════════════════════════════════════════════════════════════════
       BOOKEND BACK — EXT-TASK-017: 3-beat decompression
       ═══════════════════════════════════════════════════════════════════ */
    .bookend-back {
      background: var(--color-zone-dense);
      border: 3px solid var(--color-border);
      border-left: var(--border-left-width) solid var(--color-primary);
      padding: var(--space-8);
    }
    .bookend-back__title {
      font-family: var(--font-display); font-style: italic;
      font-size: var(--type-section); margin-bottom: var(--space-8);
    }
    .bookend-reflection {
      background: var(--color-zone-breathing);
      border-left: var(--border-left-width) solid var(--accent-purple);
      padding: var(--space-6); margin: var(--space-8) 0;
    }
    .bookend-reflection__title {
      font-family: var(--font-mono); font-size: var(--type-meta);
      text-transform: uppercase; letter-spacing: 0.12em;
      color: var(--accent-purple); margin-bottom: var(--space-4);
    }
    .bookend-reflection__body {
      font-family: var(--font-display); font-style: italic;
      font-size: 15px; line-height: 1.6; color: var(--color-text);
    }
    .verification-list { list-style: none; margin: var(--space-6) 0; }
    .verification-list li {
      display: flex; align-items: flex-start; gap: var(--space-4);
      padding: var(--space-3) 0;
      border-bottom: 1px solid var(--color-border-subtle);
      font-size: 14px;
    }
    .verification-list li:last-child { border-bottom: none; }
    .verification-list__check {
      width: 18px; height: 18px; min-width: 18px;
      border: 3px solid var(--accent-green);
      display: flex; align-items: center; justify-content: center;
      font-size: 11px; color: var(--accent-green); margin-top: 2px;
    }
    .whats-next {
      margin-top: var(--space-8); padding: var(--space-6);
      border: 3px solid var(--color-border);
      border-left: var(--border-left-width) solid var(--color-primary);
    }
    .whats-next__title {
      font-family: var(--font-display); font-style: italic;
      font-size: var(--type-subsection); margin-bottom: var(--space-5);
    }
    .whats-next__list { list-style: none; }
    .whats-next__list li {
      display: flex; align-items: flex-start; gap: var(--space-3);
      padding: var(--space-3) 0; font-size: 14px; line-height: 1.6;
    }
    .whats-next__arrow {
      font-family: var(--font-mono); color: var(--color-primary);
      font-size: var(--type-meta); margin-top: 3px;
    }

    .section-label {
      font-family: var(--font-mono); font-size: 10px;
      text-transform: uppercase; letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      text-align: center; padding: var(--space-4) 0;
    }

    /* Inline code */
    code { font-family: var(--font-mono); font-size: 0.9em; }
    p code, li code {
      font-family: var(--font-mono); font-size: var(--type-code);
      background: var(--color-border-subtle); padding: 1px 5px;
      border: 1px solid var(--color-border);
    }

    /* Essence pullquote */
    .essence-quote {
      font-family: var(--font-display); font-style: italic;
      font-size: var(--type-section); color: var(--color-text);
      padding: var(--space-8) 0;
      border-top: 3px solid var(--color-primary);
      border-bottom: 3px solid var(--color-primary);
      text-align: center; max-width: 640px;
      margin: var(--space-12) auto; line-height: 1.5;
    }

    /* Pattern summary */
    .pattern-summary {
      margin-top: var(--space-20); padding: var(--space-6);
      background: var(--color-border-subtle);
      border: 3px solid var(--color-border); font-size: 13px;
    }
    .pattern-summary__title {
      font-family: var(--font-mono); font-size: 10px;
      text-transform: uppercase; letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-5); padding-bottom: var(--space-3);
      border-bottom: 1px solid var(--color-border);
    }
    .pattern-summary table { width: 100%; border-collapse: collapse; font-size: 13px; }
    .pattern-summary th, .pattern-summary td {
      text-align: left; padding: var(--space-2) var(--space-3);
      border-bottom: 1px solid var(--color-border);
    }
    .pattern-summary th {
      font-family: var(--font-mono); font-size: 10px;
      text-transform: uppercase; letter-spacing: 0.08em;
      color: var(--color-text-secondary); font-weight: 500;
    }

    /* Accessibility */
    ::selection { background: var(--color-primary); color: var(--color-background); }
    *:focus-visible { outline: 3px solid var(--color-primary); outline-offset: 2px; }
    .skip-link {
      position: absolute; top: -100%; left: 0;
      background: var(--color-primary); color: var(--color-background);
      padding: 8px 16px; z-index: 1000;
      font-family: var(--font-body); font-size: 14px; text-decoration: none;
    }
    .skip-link:focus { top: 0; }
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
    @media print {
      body { background: white; color: black; }
      .skip-link { display: none; }
      details[open] > summary { display: none; }
    }
  </style>
</head>

<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- HEADER — Dark bg, archipelago map (EXT-TASK-016) -->
  <header class="exploration-header" role="banner">
    <div class="exploration-header__inner">
      <div class="exploration-id">Exploration OD-003 / Density: Islands + Bookends</div>
      <h1 class="exploration-title">Task-Based Structure</h1>
      <p class="exploration-hypothesis">
        Hypothesis: "What if documentation was organized around discrete tasks &mdash;
        self-contained procedural clusters &mdash; rather than linear narrative flow?"
      </p>

      <!-- Applied EXT-TASK-016 + EXT-TASK-007: Archipelago map with complexity color coding -->
      <div class="archipelago-map" aria-label="Task archipelago overview">
        <div class="archipelago-tile archipelago-tile--beginner">
          <span class="archipelago-tile__number">1</span>
          <span class="archipelago-tile__label">Install</span>
          <span class="archipelago-tile__duration">~10 min</span>
        </div>
        <div class="archipelago-tile archipelago-tile--beginner">
          <span class="archipelago-tile__number">2</span>
          <span class="archipelago-tile__label">Config</span>
          <span class="archipelago-tile__duration">~15 min</span>
        </div>
        <div class="archipelago-tile archipelago-tile--intermediate">
          <span class="archipelago-tile__number">3</span>
          <span class="archipelago-tile__label">Build</span>
          <span class="archipelago-tile__duration">~15 min</span>
        </div>
        <div class="archipelago-tile archipelago-tile--intermediate">
          <span class="archipelago-tile__number">4</span>
          <span class="archipelago-tile__label">Test</span>
          <span class="archipelago-tile__duration">~20 min</span>
        </div>
        <div class="archipelago-tile archipelago-tile--advanced">
          <span class="archipelago-tile__number">5</span>
          <span class="archipelago-tile__label">Deploy</span>
          <span class="archipelago-tile__duration">~20 min</span>
        </div>
        <div class="archipelago-tile archipelago-tile--advanced">
          <span class="archipelago-tile__number">6</span>
          <span class="archipelago-tile__label">Verify</span>
          <span class="archipelago-tile__duration">~15 min</span>
        </div>
      </div>

      <div class="exploration-meta">
        <span>Stage: <strong class="exploration-meta__value">3 &mdash; Organization</strong></span>
        <span>DD Source: <strong class="exploration-meta__value">DD-003 (32/40)</strong></span>
        <span>Soul: <strong class="exploration-meta__value">5/5</strong></span>
        <span>Total: <strong class="exploration-meta__value">~95 min</strong></span>
      </div>
    </div>
  </header>

  <main id="main-content" class="page-container" role="main">

    <!-- BOOKEND FRONT — Dense orientation zone -->
    <section class="bookend-front reveal" aria-labelledby="orientation-title">
      <div class="bookend-front__label">You Are Here</div>
      <h2 class="bookend-front__title" id="orientation-title">Setting Up a CI/CD Pipeline</h2>
      <p class="bookend-front__description">
        This guide walks you through setting up a complete CI/CD pipeline from scratch.
        Each task is self-contained &mdash; complete them in order for a full setup,
        or jump to any individual task. Tasks progress from beginner (green) through
        intermediate (red) to advanced (purple).
      </p>
      <div class="task-overview">
        <div class="task-overview__item">
          <div class="task-overview__marker" style="background: var(--accent-green)"></div>
          <div class="task-overview__text"><strong>1. Install Prerequisites</strong><span>Node.js, Docker, GitHub CLI &mdash; 10 min</span></div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker" style="background: var(--accent-green)"></div>
          <div class="task-overview__text"><strong>2. Initialize Pipeline Configuration</strong><span>.github/workflows/, YAML &mdash; 15 min</span></div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker" style="background: var(--color-primary)"></div>
          <div class="task-overview__text"><strong>3. Configure Build Stage</strong><span>npm scripts, env variables &mdash; 15 min</span></div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker" style="background: var(--color-primary)"></div>
          <div class="task-overview__text"><strong>4. Set Up Testing Stage</strong><span>Unit, integration, coverage &mdash; 20 min</span></div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker" style="background: var(--accent-purple)"></div>
          <div class="task-overview__text"><strong>5. Configure Deployment</strong><span>Staging vs production, secrets &mdash; 20 min</span></div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker" style="background: var(--accent-purple)"></div>
          <div class="task-overview__text"><strong>6. Verify Pipeline</strong><span>End-to-end test, monitoring &mdash; 15 min</span></div>
        </div>
      </div>
      <div class="bookend-meta">
        <div class="bookend-meta__item"><span class="bookend-meta__label">Total Time</span><span class="bookend-meta__value">~95 minutes</span></div>
        <div class="bookend-meta__item"><span class="bookend-meta__label">Prerequisites</span><span class="bookend-meta__value">macOS / Linux, Terminal, GitHub account</span></div>
        <div class="bookend-meta__item"><span class="bookend-meta__label">Difficulty</span><span class="bookend-meta__value">Beginner &rarr; Advanced</span></div>
      </div>
    </section>

    <div class="sparse-sea--large" role="separator" aria-hidden="true"></div>
    <p class="section-label">Task Islands</p>
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>

    <!-- TASK ISLAND 1: Install Prerequisites — BEGINNER (Template A: Standard) -->
    <details class="task-island task-island--beginner reveal" id="task-1-install-prerequisites" open>
      <summary>
        <div class="task-island__number">1</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 1 of 6</div>
          <h2 class="task-island__title" id="task-1-title">Install Prerequisites</h2>
          <div class="task-island__meta"><span class="task-duration">~10 min</span><span class="task-complexity task-complexity--beginner">Beginner</span></div>
        </div>
        <div class="task-island__toggle" aria-hidden="true"></div>
      </summary>
      <div class="task-island__body">
        <div class="callout callout--prereq"><div class="callout__label">Prerequisites</div><div class="callout__body"><p>A macOS or Linux terminal, administrator privileges, and a GitHub account with repository access. Windows users should use WSL2.</p></div></div>
        <ol class="task-steps">
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Install Node.js via nvm</div><p class="task-step__description">Using nvm gives you control over which Node.js version your pipeline uses.</p><div class="code-block"><div class="code-block__label">Terminal</div><pre><code><span class="code-comment"># Install nvm</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash

<span class="code-comment"># Restart terminal, then install Node.js LTS</span>
nvm install --lts
nvm use --lts

<span class="code-comment"># Verify</span>
node --version   <span class="code-comment"># v20.x.x or later</span>
npm --version    <span class="code-comment"># 10.x.x or later</span></code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Install Docker Desktop</div><p class="task-step__description">Docker provides containerized build environments matching your CI runner.</p><div class="code-block"><div class="code-block__label">Terminal</div><pre><code><span class="code-comment"># macOS</span>
brew install --cask docker

<span class="code-comment"># Verify</span>
docker --version   <span class="code-comment"># Docker version 24.x+</span>
docker run hello-world</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Install GitHub CLI</div><p class="task-step__description">The GitHub CLI lets you interact with Actions directly from your terminal.</p><div class="code-block"><div class="code-block__label">Terminal</div><pre><code>brew install gh
gh auth login
gh --version   <span class="code-comment"># gh version 2.x.x</span></code></pre></div></div></li>
        </ol>
        <div class="callout callout--checkpoint"><div class="callout__label">Checkpoint</div><div class="callout__body"><p><strong>You should see</strong> all three tools respond with version numbers: <code>node --version && docker --version && gh --version</code></p></div></div>
        <details class="troubleshoot"><summary>If This Fails: Node.js not found after installation</summary><div class="troubleshoot__body"><p>Add the following to <code>~/.zshrc</code>:</p><div class="code-block"><pre><code>export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"</code></pre></div><p>Then run <code>source ~/.zshrc</code>.</p></div></details>
      </div>
    </details>

    <div class="sparse-sea" role="separator" aria-hidden="true"></div>

    <!-- TASK ISLAND 2: Initialize Config — BEGINNER (Template A: Standard) -->
    <details class="task-island task-island--beginner reveal" id="task-2-initialize-config">
      <summary>
        <div class="task-island__number">2</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 2 of 6</div>
          <h2 class="task-island__title" id="task-2-title">Initialize Pipeline Configuration</h2>
          <div class="task-island__meta"><span class="task-duration">~15 min</span><span class="task-complexity task-complexity--beginner">Beginner</span></div>
        </div>
        <div class="task-island__toggle" aria-hidden="true"></div>
      </summary>
      <div class="task-island__body">
        <div class="callout callout--prereq"><div class="callout__label">Prerequisites</div><div class="callout__body"><p>Task 1 complete. A GitHub repository and all three tools installed.</p></div></div>
        <ol class="task-steps">
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Create the workflow directory</div><p class="task-step__description">GitHub Actions requires workflows in a specific directory.</p><div class="code-block"><div class="code-block__label">Terminal</div><pre><code>mkdir -p .github/workflows
ls -la .github/workflows/</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Create the main workflow file</div><p class="task-step__description">The workflow file defines your entire pipeline as code. Use 2 spaces, never tabs.</p><div class="code-block"><div class="code-block__label">.github/workflows/ci-cd.yml</div><pre><code><span class="code-keyword">name</span>: CI/CD Pipeline

<span class="code-keyword">on</span>:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

<span class="code-keyword">jobs</span>:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: <span class="code-string">'20'</span>
          cache: <span class="code-string">'npm'</span>

  test:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == <span class="code-string">'refs/heads/main'</span>
    steps:
      - uses: actions/checkout@v4</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Validate YAML syntax</div><div class="code-block"><div class="code-block__label">Terminal</div><pre><code>gh workflow view ci-cd.yml
npx yaml-lint .github/workflows/ci-cd.yml</code></pre></div></div></li>
        </ol>
        <div class="callout callout--checkpoint"><div class="callout__label">Checkpoint</div><div class="callout__body"><p><strong>You should see</strong> a file at <code>.github/workflows/ci-cd.yml</code> that passes YAML validation with three jobs: <code>build</code>, <code>test</code>, <code>deploy</code>.</p></div></div>
        <details class="troubleshoot"><summary>If This Fails: YAML indentation errors</summary><div class="troubleshoot__body"><p>Configure your editor for 2-space YAML indentation:</p><div class="code-block"><pre><code><span class="code-string">"[yaml]"</span>: {
  <span class="code-string">"editor.tabSize"</span>: <span class="code-number">2</span>,
  <span class="code-string">"editor.insertSpaces"</span>: <span class="code-keyword">true</span>
}</code></pre></div></div></details>
      </div>
    </details>

    <div class="sparse-sea" role="separator" aria-hidden="true"></div>

    <!-- TASK ISLAND 3: Configure Build — INTERMEDIATE (Template B: Dense-inline) -->
    <details class="task-island task-island--intermediate reveal" id="task-3-configure-build">
      <summary>
        <div class="task-island__number">3</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 3 of 6</div>
          <h2 class="task-island__title" id="task-3-title">Configure Build Stage</h2>
          <div class="task-island__meta"><span class="task-duration">~15 min</span><span class="task-complexity task-complexity--intermediate">Intermediate</span></div>
        </div>
        <div class="task-island__toggle" aria-hidden="true"></div>
      </summary>
      <div class="task-island__body">
        <div class="callout callout--prereq"><div class="callout__label">Prerequisites</div><div class="callout__body"><p>Tasks 1&ndash;2 complete. A <code>package.json</code> with scripts defined.</p></div></div>
        <ol class="task-steps">
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Define build scripts</div><div class="code-block"><div class="code-block__label">package.json</div><pre><code>{
  <span class="code-string">"scripts"</span>: {
    <span class="code-string">"build"</span>: <span class="code-string">"tsc && vite build"</span>,
    <span class="code-string">"build:ci"</span>: <span class="code-string">"npm run lint && npm run build"</span>,
    <span class="code-string">"lint"</span>: <span class="code-string">"eslint . --ext .ts,.tsx"</span>,
    <span class="code-string">"typecheck"</span>: <span class="code-string">"tsc --noEmit"</span>
  }
}</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Add build steps to workflow</div><div class="code-block"><div class="code-block__label">.github/workflows/ci-cd.yml &mdash; build job</div><pre><code>  <span class="code-keyword">build</span>:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: <span class="code-string">'20'</span>
          cache: <span class="code-string">'npm'</span>
      - run: npm ci
      - run: npm run lint
      - run: npm run typecheck
      - run: npm run build
      - uses: actions/upload-artifact@v4
        with:
          name: build-output
          path: dist/
          retention-days: <span class="code-number">1</span></code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Configure environment variables</div><div class="code-block"><div class="code-block__label">.github/workflows/ci-cd.yml &mdash; env</div><pre><code>    <span class="code-keyword">env</span>:
      NODE_ENV: production
      CI: <span class="code-keyword">true</span>
      VITE_API_URL: ${{ vars.API_URL }}</code></pre></div><div class="callout callout--warning"><div class="callout__label">Warning</div><div class="callout__body"><p>Never hardcode secrets in workflow files. Use <code>${{ secrets.SECRET_NAME }}</code>. Secrets are configured in Task 5.</p></div></div></div></li>
        </ol>
        <div class="callout callout--checkpoint"><div class="callout__label">Checkpoint</div><div class="callout__body"><p><strong>You should see</strong> the build job complete when you push. Run <code>gh run list</code> to check status.</p></div></div>
        <details class="troubleshoot"><summary>If This Fails: npm ci lockfile mismatch</summary><div class="troubleshoot__body"><div class="code-block"><pre><code>rm package-lock.json
npm install
git add package-lock.json
git commit -m <span class="code-string">"fix: regenerate lockfile"</span></code></pre></div></div></details>
      </div>
    </details>

    <div class="sparse-sea" role="separator" aria-hidden="true"></div>

    <!-- TASK ISLAND 4: Testing — INTERMEDIATE (Template C: Showcase/code-first) -->
    <details class="task-island task-island--intermediate reveal" id="task-4-testing-stage">
      <summary>
        <div class="task-island__number">4</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 4 of 6</div>
          <h2 class="task-island__title" id="task-4-title">Set Up Testing Stage</h2>
          <div class="task-island__meta"><span class="task-duration">~20 min</span><span class="task-complexity task-complexity--intermediate">Intermediate</span></div>
        </div>
        <div class="task-island__toggle" aria-hidden="true"></div>
      </summary>
      <div class="task-island__body">
        <div class="callout callout--prereq"><div class="callout__label">Prerequisites</div><div class="callout__body"><p>Tasks 1&ndash;3 complete. Build job passing. This guide uses Vitest.</p></div></div>
        <ol class="task-steps">
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Install Vitest</div><div class="code-block"><div class="code-block__label">Terminal</div><pre><code>npm install -D vitest @vitest/coverage-v8</code></pre></div><div class="code-block"><div class="code-block__label">package.json</div><pre><code>{
  <span class="code-string">"scripts"</span>: {
    <span class="code-string">"test"</span>: <span class="code-string">"vitest run"</span>,
    <span class="code-string">"test:coverage"</span>: <span class="code-string">"vitest run --coverage"</span>,
    <span class="code-string">"test:ci"</span>: <span class="code-string">"vitest run --coverage --reporter=junit"</span>
  }
}</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Write a sample unit test</div><div class="code-block"><div class="code-block__label">src/__tests__/utils.test.ts</div><pre><code><span class="code-keyword">import</span> { describe, it, expect } <span class="code-keyword">from</span> <span class="code-string">'vitest'</span>
<span class="code-keyword">import</span> { formatPipelineStatus } <span class="code-keyword">from</span> <span class="code-string">'../utils'</span>

<span class="code-function">describe</span>(<span class="code-string">'formatPipelineStatus'</span>, () => {
  <span class="code-function">it</span>(<span class="code-string">'returns passing for success'</span>, () => {
    <span class="code-function">expect</span>(<span class="code-function">formatPipelineStatus</span>({
      build: <span class="code-string">'success'</span>, test: <span class="code-string">'success'</span>, deploy: <span class="code-string">'success'</span>
    })).<span class="code-function">toBe</span>(<span class="code-string">'passing'</span>)
  })
})</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Add test job to workflow</div><div class="code-block"><div class="code-block__label">.github/workflows/ci-cd.yml &mdash; test job</div><pre><code>  <span class="code-keyword">test</span>:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: <span class="code-string">'20'</span>, cache: <span class="code-string">'npm'</span> }
      - run: npm ci
      - uses: actions/download-artifact@v4
        with: { name: build-output, path: dist/ }
      - run: npm run test:ci
      - uses: actions/upload-artifact@v4
        with: { name: coverage-report, path: coverage/ }</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Add integration tests</div><div class="code-block"><div class="code-block__label">Integration test step</div><pre><code>      - name: Integration tests
        run: npm run test:ci -- --project=integration
        env:
          DATABASE_URL: ${{ secrets.TEST_DATABASE_URL }}</code></pre></div></div></li>
        </ol>
        <div class="callout callout--checkpoint"><div class="callout__label">Checkpoint</div><div class="callout__body"><p><strong>You should see</strong> unit and integration tests passing in the Actions tab with coverage reports uploaded.</p></div></div>
        <details class="troubleshoot"><summary>If This Fails: Tests pass locally but fail in CI</summary><div class="troubleshoot__body"><p><strong>Missing env vars:</strong> CI runners start clean. Set all variables in the workflow <code>env</code> section.</p><p><strong>Case sensitivity:</strong> Linux is case-sensitive; macOS is not. Check your imports.</p></div></details>
      </div>
    </details>

    <div class="sparse-sea" role="separator" aria-hidden="true"></div>

    <!-- Essence pullquote — archipelago midpoint -->
    <blockquote class="essence-quote reveal">
      Each task is an island. Complete in itself, connected by intent, separated by the calm of understanding.
    </blockquote>

    <div class="sparse-sea" role="separator" aria-hidden="true"></div>

    <!-- TASK ISLAND 5: Deployment — ADVANCED (Template D: Split/comparison) -->
    <details class="task-island task-island--advanced task-island--featured reveal" id="task-5-configure-deployment">
      <summary>
        <div class="task-island__number">5</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 5 of 6</div>
          <h2 class="task-island__title" id="task-5-title">Configure Deployment</h2>
          <div class="task-island__meta"><span class="task-duration">~20 min</span><span class="task-complexity task-complexity--advanced">Advanced</span></div>
        </div>
        <div class="task-island__toggle" aria-hidden="true"></div>
      </summary>
      <div class="task-island__body">
        <div class="callout callout--prereq"><div class="callout__label">Prerequisites</div><div class="callout__body"><p>Tasks 1&ndash;4 complete. Access to deployment target (Vercel, AWS, Railway) and API token capability.</p></div></div>
        <ol class="task-steps">
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Configure secrets</div><p class="task-step__description">Encrypted environment variables that never appear in logs.</p><div class="code-block"><div class="code-block__label">Terminal</div><pre><code>gh secret set DEPLOY_TOKEN --body <span class="code-string">"your-token"</span>
gh secret set PRODUCTION_URL --body <span class="code-string">"https://app.example.com"</span>
gh secret set STAGING_URL --body <span class="code-string">"https://staging.example.com"</span>
gh secret list</code></pre></div><div class="callout callout--warning"><div class="callout__label">Warning</div><div class="callout__body"><p>Never echo secrets in workflow steps. Logging secrets to files or passing them as arguments can expose them.</p></div></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Set up staging and production deploys</div><div class="code-block"><div class="code-block__label">.github/workflows/ci-cd.yml &mdash; deploy jobs</div><pre><code>  <span class="code-keyword">deploy-staging</span>:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == <span class="code-string">'refs/heads/develop'</span>
    environment: { name: staging, url: ${{ vars.STAGING_URL }} }
    steps:
      - uses: actions/checkout@v4
      - uses: actions/download-artifact@v4
        with: { name: build-output, path: dist/ }
      - run: npx vercel deploy --prebuilt --token=${{ secrets.DEPLOY_TOKEN }}

  <span class="code-keyword">deploy-production</span>:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == <span class="code-string">'refs/heads/main'</span>
    environment: { name: production, url: ${{ vars.PRODUCTION_URL }} }
    steps:
      - uses: actions/checkout@v4
      - uses: actions/download-artifact@v4
        with: { name: build-output, path: dist/ }
      - run: npx vercel deploy --prebuilt --prod --token=${{ secrets.DEPLOY_TOKEN }}</code></pre></div></div></li>
        </ol>
        <div class="callout callout--checkpoint"><div class="callout__label">Checkpoint</div><div class="callout__body"><p><strong>You should see</strong> two environments via <code>gh api repos/{owner}/{repo}/environments</code>: staging and production.</p></div></div>
        <details class="troubleshoot"><summary>If This Fails: Token permissions error</summary><div class="troubleshoot__body"><p>Regenerate the token with correct scope:</p><div class="code-block"><pre><code>gh secret set DEPLOY_TOKEN --body <span class="code-string">"new-token"</span></code></pre></div></div></details>
      </div>
    </details>

    <div class="sparse-sea" role="separator" aria-hidden="true"></div>

    <!-- TASK ISLAND 6: Verify Pipeline — ADVANCED (Template C: Showcase) -->
    <details class="task-island task-island--advanced reveal" id="task-6-verify-pipeline">
      <summary>
        <div class="task-island__number">6</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 6 of 6</div>
          <h2 class="task-island__title" id="task-6-title">Verify Pipeline</h2>
          <div class="task-island__meta"><span class="task-duration">~15 min</span><span class="task-complexity task-complexity--advanced">Advanced</span></div>
        </div>
        <div class="task-island__toggle" aria-hidden="true"></div>
      </summary>
      <div class="task-island__body">
        <div class="callout callout--prereq"><div class="callout__label">Prerequisites</div><div class="callout__body"><p>Tasks 1&ndash;5 complete. Full pipeline configured. This validates the entire chain.</p></div></div>
        <ol class="task-steps">
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Trigger a full pipeline run</div><div class="code-block"><div class="code-block__label">Terminal</div><pre><code><span class="code-keyword">echo</span> <span class="code-string">"# Verified $(date)"</span> >> CHANGELOG.md
git add CHANGELOG.md
git commit -m <span class="code-string">"ci: verify pipeline"</span>
git push origin develop
gh run watch</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Verify each stage</div><div class="code-block"><div class="code-block__label">Terminal</div><pre><code>gh run list --limit <span class="code-number">5</span>
gh run view --log
gh run download --name build-output --dir ./verify-build</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Test rollback</div><div class="code-block"><div class="code-block__label">Terminal</div><pre><code>git revert HEAD --no-edit
git push origin develop
gh run watch</code></pre></div></div></li>
          <li class="task-step"><div class="task-step__marker"></div><div class="task-step__content"><div class="task-step__title">Set up failure notifications</div><div class="code-block"><div class="code-block__label">Notification step</div><pre><code>      - name: Notify on failure
        if: failure()
        uses: slackapi/slack-github-action@v1
        with:
          payload: |
            { <span class="code-string">"text"</span>: <span class="code-string">"Pipeline failed: ${{ github.workflow }}"</span> }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK }}</code></pre></div></div></li>
        </ol>
        <div class="callout callout--checkpoint"><div class="callout__label">Checkpoint</div><div class="callout__body"><p><strong>You should see</strong> green checkmarks across all stages. Rollback triggers its own successful run. Notifications deliver to your channel.</p></div></div>
        <details class="troubleshoot"><summary>If This Fails: Pipeline passes but deployment not live</summary><div class="troubleshoot__body"><p><strong>DNS propagation:</strong> Wait 2&ndash;5 minutes.</p><p><strong>Environment mismatch:</strong> The <code>environment</code> key is case-sensitive.</p></div></details>
      </div>
    </details>

    <div class="sparse-sea--large" role="separator" aria-hidden="true"></div>
    <p class="section-label">Verification</p>
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>

    <!-- BOOKEND BACK — EXT-TASK-017: 3-beat decompression -->
    <section class="bookend-back reveal" aria-labelledby="verification-title">
      <h2 class="bookend-back__title" id="verification-title">Complete Pipeline Verification</h2>

      <!-- Beat 1: Dense — checklist -->
      <ul class="verification-list" aria-label="Pipeline verification checklist">
        <li><span class="verification-list__check" aria-hidden="true">&check;</span><span><strong>Task 1:</strong> Node.js, Docker, GitHub CLI respond with versions</span></li>
        <li><span class="verification-list__check" aria-hidden="true">&check;</span><span><strong>Task 2:</strong> Workflow file passes YAML validation</span></li>
        <li><span class="verification-list__check" aria-hidden="true">&check;</span><span><strong>Task 3:</strong> Build completes, artifacts uploaded</span></li>
        <li><span class="verification-list__check" aria-hidden="true">&check;</span><span><strong>Task 4:</strong> Tests pass, coverage generated</span></li>
        <li><span class="verification-list__check" aria-hidden="true">&check;</span><span><strong>Task 5:</strong> Staging and production deployments configured</span></li>
        <li><span class="verification-list__check" aria-hidden="true">&check;</span><span><strong>Task 6:</strong> End-to-end run, rollback tested, notifications set</span></li>
      </ul>

      <!-- Beat 2: Medium — Essence reflection -->
      <div class="bookend-reflection">
        <div class="bookend-reflection__title">Essence</div>
        <div class="bookend-reflection__body">
          A CI/CD pipeline is not a feature you add and forget. It is a living contract between your team and your users &mdash; a promise that every change is built, tested, and deployed with the same rigor, every time. The six islands you just built are not independent tools; they are a single organism. When any island fails, the whole archipelago responds.
        </div>
      </div>

      <!-- Beat 3: Sparse — next steps -->
      <div class="whats-next">
        <h3 class="whats-next__title">What Comes After</h3>
        <ul class="whats-next__list">
          <li><span class="whats-next__arrow">&rarr;</span><span><strong>Branch protection rules:</strong> Require status checks before merging</span></li>
          <li><span class="whats-next__arrow">&rarr;</span><span><strong>Caching optimization:</strong> Reduce pipeline time by 40&ndash;60%</span></li>
          <li><span class="whats-next__arrow">&rarr;</span><span><strong>Matrix testing:</strong> Multiple Node.js versions and OS simultaneously</span></li>
          <li><span class="whats-next__arrow">&rarr;</span><span><strong>Release automation:</strong> Semantic versioning with changelog generation</span></li>
          <li><span class="whats-next__arrow">&rarr;</span><span><strong>Security scanning:</strong> SAST and dependency vulnerability scanning</span></li>
        </ul>
      </div>
    </section>

    <!-- Pattern Summary -->
    <div class="pattern-summary reveal">
      <div class="pattern-summary__title">Pattern Analysis &mdash; OD-003</div>
      <table>
        <thead><tr><th>Dimension</th><th>Implementation</th><th>Evidence</th></tr></thead>
        <tbody>
          <tr><td>Organization</td><td>Task-Based (6 collapsible islands)</td><td>Self-contained: prereqs, steps, checkpoint, troubleshooting</td></tr>
          <tr><td>Primary Density</td><td>ISLANDS &mdash; dense clusters in sparse sea</td><td>80px+ whitespace; dynamic density via collapse state</td></tr>
          <tr><td>Secondary Density</td><td>BOOKENDS &mdash; dense front, sparse middle, dense back</td><td>Dark header map + orientation / sparse sea / 3-beat decompression</td></tr>
          <tr><td>Compound Pattern</td><td>ISLANDS + CRESCENDO gradient</td><td>Beginner (green) &rarr; Intermediate (red) &rarr; Advanced (purple)</td></tr>
          <tr><td>DD-F-006 Page Scale</td><td>Dark map (dense) &rarr; Sparse sea &rarr; Verification (dense)</td><td>Archipelago map is miniature ISLANDS fractal echo</td></tr>
          <tr><td>DD-F-006 Section Scale</td><td>Prereqs &rarr; Steps &rarr; Checkpoint</td><td>Each island with layout template variation</td></tr>
          <tr><td>DD-F-006 Component Scale</td><td>Label(sparse) &rarr; Body(dense)</td><td>All callouts: monospace label, prose body</td></tr>
          <tr><td>DD-F-006 Character Scale</td><td>Comments(sparse) &rarr; Logic(dense)</td><td>Dark code blocks with colored syntax highlighting</td></tr>
          <tr><td>Soul Compliance</td><td>5/5</td><td>Sharp edges, no shadows, serif wisdom, callout DNA, square markers</td></tr>
        </tbody>
      </table>
    </div>

  </main>
</body>
</html>
