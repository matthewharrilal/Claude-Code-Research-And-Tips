<!-- ═══════════════════════════════════════════════════════════════════════
     OD-003: Task-Based Structure — ISLANDS + BOOKENDS
     Organizational Exploration — Discrete Task Cluster Pattern

     Hypothesis: "What if documentation was organized around discrete tasks —
     self-contained procedural clusters — rather than linear narrative flow?"
     Density Pairing: ISLANDS (primary) + BOOKENDS (secondary)
     DD Sources: DD-003 (ISLANDS, 32/40), DD-006 (FRACTAL — mandatory)
     Research: EXT-TASK-001 through EXT-TASK-012

     Applied Research:
       EXT-TASK-001 (Task-Oriented Design) — Each task = discrete island with 4px red left border
       EXT-TASK-002 (Progressive Disclosure) — Square markers: solid=complete, outline=current, gray=future
       EXT-TASK-003 (Hierarchical Task Breakdown) — Subtasks via vertical connector lines (1px solid)
       EXT-TASK-004 (Negative Space Typography) — 3rem after titles, 6rem between islands
       EXT-TASK-006 (Multi-Step Forms) — Completed steps collapse, current step expanded
       EXT-TASK-009 (WCAG Accessibility) — Semantic HTML, ARIA landmarks, keyboard focus 3px red outline
       EXT-TASK-011 (Verification Checkpoints) — "You should see" prefix in green-bordered callout
       EXT-TASK-012 (Error Recovery Islands) — "If This Fails" in coral-bordered callout
       R1-001 (Density Rhythm) — ISLANDS: dense clusters in sparse sea
       R1-003 (Viewport Principle) — One task island per viewport scroll
       R1-007 (Callout Positioning) — Callouts follow content they reference
       R1-008 (Callout Scarcity) — Max 2 callouts per viewport
       R1-016 (Typography-First Hierarchy) — Size > Weight > Color
       R1-019 (Tech Spec Aesthetic) — Sharp edges, monospace accents
       R3-047 (Density Contrast) — Surrounding calm amplifies island density
       DD-F-003 (ISLANDS pattern) — Isolated clusters in sparse ocean
       DD-F-006 (FRACTAL) — Self-similarity at 4 scales

     Anti-Patterns Avoided:
       DD-F-015 Traffic-light — no green+red adjacent callouts
       DD-F-016 Border inconsistency — standardized 4px borders
       DD-F-017 Uniform density — varied per ISLANDS pattern
       DD-F-018 Fighting the pattern — sparse stays sparse, islands stay dense
       R5-A1 Callout Cacophony — max 2 callouts per section

     DD-F-006 Fractal Compliance:
       PAGE SCALE: Task overview (dense) -> Task islands in sparse sea -> Verification (dense)
       SECTION SCALE: Within each island, prereqs(dense) -> steps(moderate) -> checkpoint(dense)
       COMPONENT SCALE: Callout label(sparse) -> body(dense)
       CHARACTER SCALE: Code comments(sparse) -> code logic(dense)
     ═══════════════════════════════════════════════════════════════════════ -->

<!-- ═══════════════════════════════════════════════════════════════════════
     INLINE THREADING HEADER — OD Execution Phase
     File: docs-spa/app/showcase/explorations/organizational/OD-003-task-based.html
     Tier: B | Stage: 3 (Organization OD) | Generated: 2026-02-07
     ═══════════════════════════════════════════════════════════════════════

1. WHY THIS EXISTS
OD-003-task-based.html is the third organizational exploration, testing the
hypothesis that documentation organized as discrete, self-contained task
clusters (ISLANDS) with dense orientation front and dense verification back
(BOOKENDS) creates superior procedural comprehension. It validates that the
ISLANDS density pattern from DD-003 (32/40) can be elevated through
organizational pairing, and that task-based structure inherently creates
archipelago rhythm.

2. THE QUESTION THIS ANSWERS
"Can a task-based organizational structure — where each procedure is a
self-contained island — create natural ISLANDS density rhythm while
maintaining the DD-F-006 fractal self-similarity constraint at all four
structural scales (page, section, component, character)? Does the BOOKENDS
secondary pattern (dense-sparse-dense) improve orientation and verification?"

3. STATUS
ACTIVE — INCLUDE. Locked as validated OD exploration artifact.
Third in the OD series. Soul compliance 100% (all 5 pieces verified).
DD-F-006 fractal compliance verified at 4 scales.

4. SOUL ALIGNMENT
  Soul Piece                     | Implementation                      | Evidence
  -------------------------------|-------------------------------------|--------
  1. Sharp Edges                 | --border-radius: 0 in :root        | Line ~175
  2. No Shadows                  | --box-shadow: none; solid offset    | Lines ~176, ~280
  3. Serif = Wisdom              | Instrument Serif for titles,        | Throughout
                                 | task headers, essence callouts      |
  4. Callout Family DNA          | 5 callouts, 2-zone (label+body),   | CSS callout section
                                 | 4px left border, 5 color variants  |
  5. Squares Signal System       | Square step markers, task numbers,  | .task-step__marker
                                 | checklist boxes, progress squares   |

5. BUILT ON
  Source                          | Role                              | Key Values Taken                                  | Path
  --------------------------------|-----------------------------------|---------------------------------------------------|-----
  DD-003-islands.html             | ISLANDS density pattern (primary) | Isolated clusters in sparse ocean, offset rhythm  | explorations/density/DD-003-islands.html
  DD-006-fractal.html             | DD-F-006 fractal (mandatory)      | 4-scale self-similarity constraint                | explorations/density/DD-006-fractal.html
  OD-001-conversational.html      | OD series predecessor             | Solid offset depth, scroll animations, callout    | explorations/organizational/OD-001-conversational.html
  OD-002-narrative.html           | OD series predecessor             | CRESCENDO density, act headers, code block style  | explorations/organizational/OD-002-narrative.html
  MASTER-SOUL-SYNTHESIS.md        | Soul authority (T1 LOCKED)        | 5 soul pieces, 6 Universal Rules                  | perceptual-audit-v2/synthesis/MASTER-SOUL-SYNTHESIS.md
  DESIGN-TOKEN-SUMMARY.md         | Locked token source (T1 LOCKED)   | Complete :root block (colors, fonts, geometry)    | perceptual-audit-v2/synthesis/DESIGN-TOKEN-SUMMARY.md

6. MUST HONOR
  Constraint                      | Source                              | Consequence if Violated
  --------------------------------|-------------------------------------|-------------------------------------
  DD-F-006 fractal at 4 scales    | DD-006-fractal.html                 | Exploration INVALID — mandatory for all OD/AD/CD
  ISLANDS density (task clusters)  | R3-047 + DD-003-islands.html        | Core hypothesis fails
  BOOKENDS (dense-sparse-dense)   | Secondary density pattern           | Orientation/verification fails
  border-radius: 0 everywhere     | DESIGN-TOKEN-SUMMARY.md             | Soul violation
  box-shadow: none everywhere     | DESIGN-TOKEN-SUMMARY.md             | Soul violation (solid offset OK)
  Max 2 callouts per section      | R5-T4                               | Callout cacophony anti-pattern
  80px minimum between islands    | ISLANDS sparse sea requirement      | Islands merge, pattern collapses

7. WHAT BREAKS IF THIS CHANGES
BLAST RADIUS: LOW-MEDIUM (third OD artifact, limited downstream consumers yet)
  - OD-CHECKPOINT.md (OD-003 state row)
  - RESEARCH-ACTIVE.md (findings marked APPLIED via this file)
  - Future OD-004 through OD-006 (may reference OD-003 lessons)
  - organizational-patterns.md (will catalog TASK-BASED pattern)
  - OD-SYNTHESIS.md (will synthesize across all OD explorations)

8. CONSUMED BY
  Consumer                                                        | How It Uses This File
  ----------------------------------------------------------------|-------------------------------------
  OD-CHECKPOINT.md                                                | Tracks OD-003 status, score, threading state
  RESEARCH-ACTIVE.md                                              | Findings marked APPLIED via this file
  (Future) organizational-patterns.md                             | Will extract TASK-BASED pattern definition
  (Future) OD-SYNTHESIS.md                                        | Will synthesize OD-003 lessons with OD-001-006

9. RESEARCH DEBT
  RD-1: No quantitative ISLANDS measurement (island density vs sea density ratio).
  RD-2: Content is CI/CD tutorial. No non-tutorial validation yet.
  RD-3: Scroll-driven animations are Chromium-only. Firefox/Safari get static fallback.
  RD-4: Task collapsibility (EXT-TASK-006) implemented via <details> but no JS state tracking.
  RD-5: BOOKENDS density verified visually but not quantitatively measured.

10. DIAGNOSTIC QUESTIONS
  Q1: Does the :root block match DESIGN-TOKEN-SUMMARY.md exactly?
  Q2: Are all 4 fractal scales demonstrated?
  Q3: Are task islands separated by >= 80px of sparse sea?
  Q4: Is the BOOKENDS pattern visible (dense front, sparse middle, dense back)?
  Q5: Do all callouts follow content (R1-007)?
  Q6: Is the 2-callout-per-section limit honored within each island?
  Q7: Are step markers square (not circular)?
  Q8: Does solid offset respect box-shadow: none constraint?

     ═══════════════════════════════════════════════════════════════════════
     END INLINE THREADING HEADER
     ═══════════════════════════════════════════════════════════════════════ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OD-003: Task-Based Structure</title>

  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' fill='%23E83025'/><text x='50%25' y='50%25' dominant-baseline='central' text-anchor='middle' fill='white' font-family='serif' font-size='20'>K</text></svg>">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    /* ═══════════════════════════════════════════════════════════════════════════
       LOCKED DESIGN TOKENS — From DESIGN-TOKEN-SUMMARY.md
       DD-003 Lessons: Isolated clusters in sparse ocean, offset rhythm
       DD-006 Lessons: Fractal self-similarity at all scales
       OD-001 Lessons: Solid offset depth, scroll animations, callout system
       OD-002 Lessons: CRESCENDO density, act headers, code block styling
       ═══════════════════════════════════════════════════════════════════════════ */
    :root {
      /* Colors */
      --color-primary: #E83025;
      --color-background: #FEF9F5;
      --color-text: #1A1A1A;
      --color-text-secondary: #666666;
      --color-border: #E0D5C5;
      --color-border-subtle: #F0EBE3;

      /* Typography */
      --font-display: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

      /* 5-level typographic cascade (~1.5x ratio) */
      --type-page: 2.5rem;
      --type-section: 1.625rem;
      --type-task: 1.375rem;
      --type-body: 1rem;
      --type-code: 0.875rem;
      --type-meta: 0.625rem;

      /* Geometry — LOCKED */
      --border-radius: 0;
      --box-shadow: none;

      /* Spacing scale */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --space-16: 64px;
      --space-20: 80px;
      --space-24: 96px;

      /* Callout Accents */
      --accent-green: #4A9D6B;
      --accent-coral: #C97065;
      --accent-amber: #D97706;
      /* Standardized Border */
      --border-left-width: 4px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-body);
      background: var(--color-background);
      color: var(--color-text);
      line-height: 1.7;
      font-size: var(--type-body);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       SCROLL-DRIVEN REVEAL — EXT-CREATIVE-004 (THE ARRIVING WISDOM)
       Chromium-only with static fallback for Firefox/Safari
       ═══════════════════════════════════════════════════════════════════════════ */
    .reveal {
      animation: arrive 0.5s ease-out both;
      animation-timeline: view();
      animation-range: entry 10% entry 40%;
    }

    @keyframes arrive {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: none; }
    }

    @supports not (animation-timeline: view()) {
      .reveal { opacity: 1; transform: none; }
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       EXPLORATION HEADER
       Applying R1-019 (Tech Spec Aesthetic): monospace ID, sharp edges
       ═══════════════════════════════════════════════════════════════════════════ */
    .exploration-header {
      border-bottom: 3px solid var(--color-primary);
      padding: var(--space-6);
      background: white;
      margin-bottom: 0;
    }

    .exploration-header__inner {
      max-width: 860px;
      margin: 0 auto;
    }

    .exploration-id {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--color-primary);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: var(--space-2);
    }

    .exploration-title {
      font-family: var(--font-display);
      font-size: var(--type-page);
      font-style: italic;
      margin-bottom: var(--space-3);
    }

    .exploration-hypothesis {
      font-size: 14px;
      color: var(--color-text-secondary);
      max-width: 600px;
      line-height: 1.6;
    }

    .exploration-meta {
      display: flex;
      gap: var(--space-6);
      margin-top: var(--space-4);
      font-family: var(--font-mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-text-secondary);
      flex-wrap: wrap;
    }

    .exploration-meta span {
      display: flex;
      align-items: center;
      gap: var(--space-1);
    }

    .exploration-meta__value {
      color: var(--color-primary);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       PAGE CONTAINER — max-width 860px, centered (spec requirement)
       ═══════════════════════════════════════════════════════════════════════════ */
    .page-container {
      max-width: 860px;
      margin: 0 auto;
      padding: 0 var(--space-6);
      padding-bottom: var(--space-24);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       BOOKEND FRONT — Dense orientation zone
       BOOKENDS pattern: dense front → sparse middle → dense back
       Applying EXT-TASK-001: task overview as orientation
       ═══════════════════════════════════════════════════════════════════════════ */
    .bookend-front {
      background: white;
      border-left: var(--border-left-width) solid var(--color-primary);
      padding: var(--space-8);
      margin-top: var(--space-12);
      margin-bottom: var(--space-10);
    }

    .bookend-front__label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-primary);
      margin-bottom: var(--space-5);
    }

    .bookend-front__title {
      font-family: var(--font-display);
      font-style: italic;
      font-size: var(--type-section);
      margin-bottom: var(--space-6);
    }

    .bookend-front__description {
      color: var(--color-text-secondary);
      font-size: 15px;
      line-height: 1.7;
      margin-bottom: var(--space-8);
      max-width: 640px;
    }

    /* Task overview grid — dense information cluster */
    .task-overview {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-6);
      margin-bottom: var(--space-8);
    }

    @media (max-width: 640px) {
      .task-overview { grid-template-columns: 1fr; }
    }

    .task-overview__item {
      display: flex;
      gap: var(--space-3);
      align-items: flex-start;
    }

    .task-overview__marker {
      /* Soul Piece 5: Squares Signal System */
      width: 10px;
      height: 10px;
      min-width: 10px;
      background: var(--color-border);
      margin-top: 6px;
    }

    .task-overview__marker--complete {
      background: var(--accent-green);
    }

    .task-overview__marker--current {
      background: transparent;
      border: 2px solid var(--color-primary);
    }

    .task-overview__marker--future {
      background: var(--color-border);
    }

    .task-overview__text {
      font-size: 14px;
    }

    .task-overview__text strong {
      font-weight: 600;
      display: block;
      margin-bottom: 2px;
    }

    .task-overview__text span {
      color: var(--color-text-secondary);
      font-size: 13px;
    }

    /* Meta info row — time, prereqs, level */
    .bookend-meta {
      display: flex;
      gap: var(--space-8);
      padding-top: var(--space-5);
      border-top: 3px solid var(--color-border);
      flex-wrap: wrap;
    }

    .bookend-meta__item {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .bookend-meta__label {
      font-family: var(--font-mono);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--color-text-secondary);
    }

    .bookend-meta__value {
      font-weight: 600;
      font-size: 14px;
    }

    /* Task map visualization — EXT-TASK-003 Hierarchical Task Breakdown */
    .task-map {
      margin-top: var(--space-8);
      padding: var(--space-6);
      background: var(--color-border-subtle);
      border: 3px solid var(--color-border);
    }

    .task-map__title {
      font-family: var(--font-mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-5);
    }

    .task-map__flow {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      overflow-x: auto;
      padding-bottom: var(--space-2);
    }

    .task-map__node {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--space-1);
      min-width: 80px;
    }

    .task-map__square {
      /* Soul Piece 5: Squares Signal System */
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-mono);
      font-size: 13px;
      font-weight: 600;
      border: 2px solid var(--color-border);
      background: white;
      color: var(--color-text);
    }

    .task-map__square--active {
      border-color: var(--color-primary);
      color: var(--color-primary);
    }

    .task-map__label {
      font-size: 10px;
      color: var(--color-text-secondary);
      text-align: center;
      font-family: var(--font-mono);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .task-map__connector {
      width: 24px;
      height: 2px;
      background: var(--color-border);
      flex-shrink: 0;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       SPARSE SEA — The space between task islands
       Applying R3-047 (Density Contrast): surrounding calm amplifies island density
       Applying DD-F-018: sparse stays sparse, don't fight the pattern
       Minimum 80px vertical whitespace
       ═══════════════════════════════════════════════════════════════════════════ */
    .sparse-sea {
      height: var(--space-20);
      position: relative;
    }

    .sparse-sea--large {
      height: var(--space-24);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       TASK ISLAND — Self-contained procedural cluster
       Applying EXT-TASK-001: each task = discrete island
       Applying DD-F-003: isolated clusters in sparse ocean
       ═══════════════════════════════════════════════════════════════════════════ */
    .task-island {
      background: white;
      border: 3px solid var(--color-border);
      border-left: var(--border-left-width) solid var(--color-primary);
      padding: var(--space-8);
      position: relative;
    }

    /* Solid offset for editorial depth — EXT-CREATIVE-001 (Neobrutalist) */
    .task-island--featured {
      box-shadow: none; /* Soul Piece 4 honored */
      outline: 4px solid var(--color-text);
      outline-offset: 4px;
    }

    /* Task island header */
    .task-island__header {
      display: flex;
      align-items: flex-start;
      gap: var(--space-5);
      margin-bottom: 3rem; /* EXT-TASK-004: 3rem after titles */
    }

    .task-island__number {
      /* Soul Piece 5: Squares Signal System — square task number marker */
      width: 48px;
      height: 48px;
      min-width: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-mono);
      font-size: 20px;
      font-weight: 600;
      border: 2px solid var(--color-primary);
      color: var(--color-primary);
      background: var(--color-background);
    }

    .task-island__title-block {
      flex: 1;
    }

    .task-island__label {
      font-family: var(--font-mono);
      font-size: var(--type-meta);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-1);
    }

    .task-island__title {
      font-family: var(--font-display);
      font-style: italic;
      font-size: var(--type-task);
      line-height: 1.3;
    }

    .task-island__estimate {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--color-text-secondary);
      margin-top: var(--space-2);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       CALLOUT SYSTEM — Soul Piece 4: Family DNA
       2-zone structure (label + body), 4px left border, color differentiation
       5 variants: Essence(red), Tip(green), Warning(amber), Gotcha(coral), Note(tan)
       Applying R1-007: Callouts follow content
       Applying R5-A1: Max 2 callouts per visible section
       ═══════════════════════════════════════════════════════════════════════════ */
    .callout {
      border-left: var(--border-left-width) solid var(--color-border);
      background: var(--color-border-subtle);
      margin: var(--space-6) 0;
    }

    .callout__label {
      /* Zone 1: sparse label */
      font-family: var(--font-mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: var(--space-3) var(--space-5);
      border-bottom: 1px solid var(--color-border);
    }

    .callout__body {
      /* Zone 2: dense body */
      padding: var(--space-4) var(--space-5);
      font-size: 14px;
      line-height: 1.7;
    }

    .callout__body p + p {
      margin-top: var(--space-3);
    }

    .callout__body code {
      font-family: var(--font-mono);
      font-size: var(--type-code);
      background: rgba(0,0,0,0.04);
      padding: 1px 5px;
    }

    /* Callout label — consolidated (Fix #4: single rule for all label colors) */
    .callout .callout__label {
      color: var(--color-text);
      font-weight: 600;
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    /* Callout variants — border-left color differentiation only */
    .callout--essence {
      border-left-color: var(--color-primary);
    }

    .callout--prereq {
      border-left-color: var(--color-primary);
      background: #FEF5F4;
    }

    .callout--tip {
      border-left-color: var(--accent-green);
    }

    .callout--checkpoint {
      border-left-color: var(--accent-green);
      background: #F4FAF6;
    }

    .callout--warning {
      border-left-color: var(--accent-amber);
    }

    .callout--gotcha {
      border-left-color: var(--accent-coral);
    }

    .callout--note {
      border-left-color: var(--color-border);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       TASK STEPS — Numbered procedural steps
       Soul Piece 5: Square markers, not circles
       Applying EXT-TASK-003: Subtasks via vertical connector lines
       ═══════════════════════════════════════════════════════════════════════════ */
    .task-steps {
      list-style: none;
      counter-reset: task-step;
    }

    .task-step {
      display: flex;
      gap: var(--space-5);
      margin-bottom: var(--space-8);
      position: relative;
    }

    /* Vertical connector line between steps — EXT-TASK-003 */
    .task-step:not(:last-child)::after {
      content: '';
      position: absolute;
      left: 15px;
      top: 36px;
      bottom: calc(var(--space-8) * -1 + 4px);
      width: 1px;
      background: var(--color-border);
    }

    .task-step__marker {
      /* Soul Piece 5: Squares Signal System */
      counter-increment: task-step;
      width: 32px;
      height: 32px;
      min-width: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-mono);
      font-size: 13px;
      font-weight: 600;
      border: 2px solid var(--color-border);
      background: white;
      color: var(--color-text-secondary);
      position: relative;
      z-index: 1;
    }

    .task-step__marker::before {
      content: counter(task-step);
    }

    .task-step__content {
      flex: 1;
      padding-top: 4px;
    }

    .task-step__title {
      font-weight: 600;
      font-size: 15px;
      margin-bottom: var(--space-3);
    }

    .task-step__description {
      font-size: 14px;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-4);
      line-height: 1.7;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       CODE BLOCKS — JetBrains Mono, warm gray background
       DD-F-006 CHARACTER SCALE: comments(sparse) -> logic(dense)
       ═══════════════════════════════════════════════════════════════════════════ */
    .code-block {
      background: var(--color-border-subtle);
      border: 3px solid var(--color-border);
      padding: var(--space-5);
      font-family: var(--font-mono);
      font-size: var(--type-code);
      line-height: 1.6;
      overflow-x: auto;
      margin: var(--space-4) 0;
      position: relative;
    }

    .code-block__label {
      font-family: var(--font-mono);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-3);
      padding-bottom: var(--space-2);
      border-bottom: 1px solid var(--color-border);
    }

    .code-block pre {
      white-space: pre;
      overflow-x: auto;
    }

    .code-block code {
      font-family: var(--font-mono);
      font-size: var(--type-code);
    }

    /* Code comment styling — sparse zone within dense code */
    .code-comment {
      color: var(--color-text-secondary);
      font-style: italic;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       TROUBLESHOOTING — EXT-TASK-012 (Error Recovery Islands)
       Collapsed <details> element with coral accent
       ═══════════════════════════════════════════════════════════════════════════ */
    .troubleshoot {
      border: 3px solid var(--accent-coral);
      margin: var(--space-6) 0;
    }

    .troubleshoot summary {
      background: #FEF6F5;
      padding: var(--space-4) var(--space-5);
      cursor: pointer;
      font-family: var(--font-mono);
      font-size: 12px;
      font-weight: 500;
      color: var(--accent-coral);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      list-style: none;
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .troubleshoot summary::-webkit-details-marker {
      display: none;
    }

    .troubleshoot summary::before {
      content: '+';
      font-size: 16px;
      font-weight: 600;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--accent-coral);
      flex-shrink: 0;
    }

    .troubleshoot[open] summary::before {
      content: '-';
    }

    .troubleshoot__body {
      padding: var(--space-5);
      font-size: 14px;
      line-height: 1.7;
      border-top: 1px solid var(--accent-coral);
    }

    .troubleshoot__body p + p {
      margin-top: var(--space-3);
    }

    .troubleshoot__body code {
      font-family: var(--font-mono);
      font-size: var(--type-code);
      background: rgba(0,0,0,0.04);
      padding: 1px 5px;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       BOOKEND BACK — Dense verification zone
       BOOKENDS pattern: dense front → sparse middle → dense back
       ═══════════════════════════════════════════════════════════════════════════ */
    .bookend-back {
      background: white;
      border: 3px solid var(--color-border);
      border-left: var(--border-left-width) solid var(--color-primary);
      padding: var(--space-8);
    }

    .bookend-back__title {
      font-family: var(--font-display);
      font-style: italic;
      font-size: var(--type-section);
      margin-bottom: var(--space-8);
    }

    /* Verification checklist — Soul Piece 5: Square checkboxes */
    .verification-list {
      list-style: none;
      margin: var(--space-6) 0;
    }

    .verification-list li {
      display: flex;
      align-items: flex-start;
      gap: var(--space-4);
      padding: var(--space-3) 0;
      border-bottom: 1px solid var(--color-border-subtle);
      font-size: 14px;
    }

    .verification-list li:last-child {
      border-bottom: none;
    }

    .verification-list__check {
      /* Soul Piece 5: Squares, not circles */
      width: 18px;
      height: 18px;
      min-width: 18px;
      border: 2px solid var(--accent-green);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: var(--accent-green);
      margin-top: 2px;
    }

    /* Pipeline diagram — dense overview */
    .pipeline-diagram {
      margin: var(--space-8) 0;
      padding: var(--space-6);
      background: var(--color-border-subtle);
      border: 3px solid var(--color-border);
    }

    .pipeline-diagram__title {
      font-family: var(--font-mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-5);
    }

    .pipeline-diagram__flow {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 2px;
    }

    @media (max-width: 640px) {
      .pipeline-diagram__flow { grid-template-columns: repeat(3, 1fr); }
    }

    .pipeline-stage {
      text-align: center;
      padding: var(--space-3);
      border: 2px solid var(--color-border);
      background: white;
      font-family: var(--font-mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .pipeline-stage--active {
      border-color: var(--color-primary);
      color: var(--color-primary);
      font-weight: 600;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       SECTION DIVIDER — between major zones
       ═══════════════════════════════════════════════════════════════════════════ */
    .section-label {
      font-family: var(--font-mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      text-align: center;
      padding: var(--space-4) 0;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       INLINE CODE — Fix #13: Global code font baseline
       ═══════════════════════════════════════════════════════════════════════════ */
    code {
      font-family: var(--font-mono);
      font-size: 0.9em;
    }

    p code, li code {
      font-family: var(--font-mono);
      font-size: var(--type-code);
      background: var(--color-border-subtle);
      padding: 1px 5px;
      border: 1px solid var(--color-border);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       ACCESSIBILITY — EXT-TASK-009 (WCAG)
       Keyboard focus with 3px red outline
       ═══════════════════════════════════════════════════════════════════════════ */
    :focus-visible {
      outline: 3px solid var(--color-primary);
      outline-offset: 2px;
    }

    summary:focus-visible {
      outline: 3px solid var(--color-primary);
      outline-offset: 2px;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       WHAT'S NEXT CALLOUT — final navigation
       ═══════════════════════════════════════════════════════════════════════════ */
    .whats-next {
      margin-top: var(--space-8);
      padding: var(--space-6);
      border: 3px solid var(--color-border);
      border-left: var(--border-left-width) solid var(--color-primary);
    }

    .whats-next__title {
      font-family: var(--font-display);
      font-style: italic;
      font-size: var(--type-task);
      margin-bottom: var(--space-5);
    }

    .whats-next__list {
      list-style: none;
    }

    .whats-next__list li {
      display: flex;
      align-items: flex-start;
      gap: var(--space-3);
      padding: var(--space-3) 0;
      font-size: 14px;
      line-height: 1.6;
    }

    .whats-next__arrow {
      font-family: var(--font-mono);
      color: var(--color-primary);
      font-size: 12px;
      margin-top: 3px;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       ESSENCE PULLQUOTE — Instrument Serif, italic
       Soul Piece 3: The Archivist Speaks in Serif
       ═══════════════════════════════════════════════════════════════════════════ */
    .essence-quote {
      font-family: var(--font-display);
      font-style: italic;
      font-size: var(--type-section);
      color: var(--color-text);
      padding: var(--space-8) 0;
      border-top: 3px solid var(--color-primary);
      border-bottom: 3px solid var(--color-primary);
      text-align: center;
      max-width: 640px;
      margin: var(--space-12) auto;
      line-height: 1.5;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       PATTERN SUMMARY — exploration pattern analysis footer
       ═══════════════════════════════════════════════════════════════════════════ */
    .pattern-summary {
      margin-top: var(--space-20);
      padding: var(--space-6);
      background: var(--color-border-subtle);
      border: 3px solid var(--color-border);
      font-size: 13px;
    }

    .pattern-summary__title {
      font-family: var(--font-mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-5);
      padding-bottom: var(--space-3);
      border-bottom: 1px solid var(--color-border);
    }

    .pattern-summary table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    .pattern-summary th,
    .pattern-summary td {
      text-align: left;
      padding: var(--space-2) var(--space-3);
      border-bottom: 1px solid var(--color-border);
    }

    .pattern-summary th {
      font-family: var(--font-mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-text-secondary);
      font-weight: 500;
    }
    /* ═══════════════════════════════════════════════════════════════════════════
       SELECTION — Fix #15
       ═══════════════════════════════════════════════════════════════════════════ */
    ::selection {
      background: var(--color-primary);
      color: var(--color-background);
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       SKIP LINK — Fix #12: Accessibility
       ═══════════════════════════════════════════════════════════════════════════ */
    .skip-link {
      position: absolute;
      top: -100%;
      left: 0;
      background: var(--color-primary);
      color: var(--bg-warm, var(--color-background));
      padding: 8px 16px;
      z-index: 1000;
      font-family: var(--font-body);
      font-size: 14px;
      text-decoration: none;
      border: none;
    }
    .skip-link:focus {
      top: 0;
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       REDUCED MOTION — Fix #10: Accessibility
       ═══════════════════════════════════════════════════════════════════════════ */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
        scroll-behavior: auto !important;
      }
    }

    /* ═══════════════════════════════════════════════════════════════════════════
       PRINT — Fix #16
       ═══════════════════════════════════════════════════════════════════════════ */
    @media print {
      body { background: white; color: black; }
      .skip-link, .scroll-witness, nav { display: none; }
      a[href]::after { content: " (" attr(href) ")"; font-size: 0.8em; }
      * { box-shadow: none !important; }
    }
  </style>
</head>

<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- ═══════════════════════════════════════════════════════════════════════
       EXPLORATION HEADER — Tech spec aesthetic (R1-019)
       ═══════════════════════════════════════════════════════════════════════ -->
  <header class="exploration-header" role="banner">
    <div class="exploration-header__inner">
      <div class="exploration-id">OD-003 / Organizational Exploration</div>
      <h1 class="exploration-title">Task-Based Structure</h1>
      <p class="exploration-hypothesis">
        Hypothesis: "What if documentation was organized around discrete tasks &mdash;
        self-contained procedural clusters &mdash; rather than linear narrative flow?"
      </p>
      <div class="exploration-meta">
        <span>Density: <strong class="exploration-meta__value">Islands + Bookends</strong></span>
        <span>DD Source: <strong class="exploration-meta__value">DD-003 (32/40)</strong></span>
        <span>Stage: <strong class="exploration-meta__value">3 &mdash; Organization</strong></span>
        <span>Soul: <strong class="exploration-meta__value">5/5</strong></span>
      </div>
    </div>
  </header>


  <main id="main-content" class="page-container" role="main">

    <!-- ═══════════════════════════════════════════════════════════════════
         BOOKEND FRONT — Dense orientation zone
         DD-F-006 PAGE SCALE: Task overview (dense)
         ═══════════════════════════════════════════════════════════════════ -->
    <section class="bookend-front reveal" aria-labelledby="orientation-title">
      <div class="bookend-front__label">You Are Here</div>
      <h2 class="bookend-front__title" id="orientation-title">Setting Up a CI/CD Pipeline</h2>
      <p class="bookend-front__description">
        This guide walks you through setting up a complete CI/CD pipeline from scratch.
        Each task is self-contained &mdash; you can complete them in order for a full setup,
        or jump to any individual task if you already have parts configured. The pipeline
        covers installation, configuration, building, testing, deployment, and verification.
      </p>

      <!-- Task overview — all 6 tasks listed with square markers -->
      <div class="task-overview">
        <div class="task-overview__item">
          <div class="task-overview__marker task-overview__marker--future"></div>
          <div class="task-overview__text">
            <strong>1. Install Prerequisites</strong>
            <span>Node.js, Docker, GitHub CLI &mdash; 10 min</span>
          </div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker task-overview__marker--future"></div>
          <div class="task-overview__text">
            <strong>2. Initialize Pipeline Configuration</strong>
            <span>.github/workflows/, YAML structure &mdash; 15 min</span>
          </div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker task-overview__marker--future"></div>
          <div class="task-overview__text">
            <strong>3. Configure Build Stage</strong>
            <span>npm scripts, env variables &mdash; 15 min</span>
          </div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker task-overview__marker--future"></div>
          <div class="task-overview__text">
            <strong>4. Set Up Testing Stage</strong>
            <span>Unit, integration, coverage &mdash; 20 min</span>
          </div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker task-overview__marker--future"></div>
          <div class="task-overview__text">
            <strong>5. Configure Deployment</strong>
            <span>Staging vs production, secrets &mdash; 20 min</span>
          </div>
        </div>
        <div class="task-overview__item">
          <div class="task-overview__marker task-overview__marker--future"></div>
          <div class="task-overview__text">
            <strong>6. Verify Pipeline</strong>
            <span>End-to-end test, monitoring &mdash; 15 min</span>
          </div>
        </div>
      </div>

      <!-- Meta info row -->
      <div class="bookend-meta">
        <div class="bookend-meta__item">
          <span class="bookend-meta__label">Total Time</span>
          <span class="bookend-meta__value">~95 minutes</span>
        </div>
        <div class="bookend-meta__item">
          <span class="bookend-meta__label">Prerequisites</span>
          <span class="bookend-meta__value">macOS / Linux, Terminal, GitHub account</span>
        </div>
        <div class="bookend-meta__item">
          <span class="bookend-meta__label">Confidence Level</span>
          <span class="bookend-meta__value">Production-ready</span>
        </div>
        <div class="bookend-meta__item">
          <span class="bookend-meta__label">Difficulty</span>
          <span class="bookend-meta__value">Intermediate</span>
        </div>
      </div>

      <!-- Task map visualization — EXT-TASK-003 -->
      <div class="task-map">
        <div class="task-map__title">Pipeline Architecture</div>
        <div class="task-map__flow">
          <div class="task-map__node">
            <div class="task-map__square">1</div>
            <div class="task-map__label">Install</div>
          </div>
          <div class="task-map__connector"></div>
          <div class="task-map__node">
            <div class="task-map__square">2</div>
            <div class="task-map__label">Config</div>
          </div>
          <div class="task-map__connector"></div>
          <div class="task-map__node">
            <div class="task-map__square">3</div>
            <div class="task-map__label">Build</div>
          </div>
          <div class="task-map__connector"></div>
          <div class="task-map__node">
            <div class="task-map__square">4</div>
            <div class="task-map__label">Test</div>
          </div>
          <div class="task-map__connector"></div>
          <div class="task-map__node">
            <div class="task-map__square">5</div>
            <div class="task-map__label">Deploy</div>
          </div>
          <div class="task-map__connector"></div>
          <div class="task-map__node">
            <div class="task-map__square">6</div>
            <div class="task-map__label">Verify</div>
          </div>
        </div>
      </div>
    </section>


    <!-- ═══════════════════════════════════════════════════════════════════
         TRANSITION: Dense bookend front → Sparse sea → First island
         This is the BOOKENDS pattern: dense front transitions to sparse
         ═══════════════════════════════════════════════════════════════════ -->
    <div class="sparse-sea--large" role="separator" aria-hidden="true"></div>
    <p class="section-label">Task Islands</p>
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>


    <!-- ═══════════════════════════════════════════════════════════════════
         TASK ISLAND 1: Install Prerequisites
         DD-F-006 SECTION SCALE: prereqs(dense) → steps(moderate) → checkpoint(dense)
         ═══════════════════════════════════════════════════════════════════ -->
    <article class="task-island reveal" aria-labelledby="task-1-title">
      <div class="task-island__header">
        <div class="task-island__number">1</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 1 of 6</div>
          <h2 class="task-island__title" id="task-1-title">Install Prerequisites</h2>
          <div class="task-island__estimate">Estimated: 10 minutes</div>
        </div>
      </div>

      <!-- Prerequisites callout — dense zone (Section Scale) -->
      <div class="callout callout--prereq">
        <div class="callout__label">Prerequisites</div>
        <div class="callout__body">
          <p>Before you begin, ensure you have: a macOS or Linux terminal, administrator privileges for installing packages, and a GitHub account with repository access. Windows users should use WSL2.</p>
        </div>
      </div>

      <!-- Steps — moderate zone (Section Scale) -->
      <ol class="task-steps">
        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Install Node.js via nvm</div>
            <p class="task-step__description">
              Using nvm (Node Version Manager) gives you control over which Node.js version your pipeline uses. This prevents version drift between local development and CI.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># Install nvm</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash

<span class="code-comment"># Restart terminal, then install Node.js LTS</span>
nvm install --lts
nvm use --lts

<span class="code-comment"># Verify installation</span>
node --version   <span class="code-comment"># Should print v20.x.x or later</span>
npm --version    <span class="code-comment"># Should print 10.x.x or later</span></code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Install Docker Desktop</div>
            <p class="task-step__description">
              Docker provides containerized build environments that match your CI runner exactly. This eliminates "works on my machine" issues.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># macOS — install via Homebrew</span>
brew install --cask docker

<span class="code-comment"># Linux — install Docker Engine</span>
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

<span class="code-comment"># Verify Docker is running</span>
docker --version   <span class="code-comment"># Should print Docker version 24.x+</span>
docker run hello-world</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Install GitHub CLI</div>
            <p class="task-step__description">
              The GitHub CLI lets you interact with GitHub Actions, create workflows, and monitor pipeline runs directly from your terminal.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># macOS</span>
brew install gh

<span class="code-comment"># Linux (Debian/Ubuntu)</span>
sudo apt install gh

<span class="code-comment"># Authenticate with GitHub</span>
gh auth login

<span class="code-comment"># Verify</span>
gh --version   <span class="code-comment"># Should print gh version 2.x.x</span></code></pre>
            </div>
          </div>
        </li>
      </ol>

      <!-- Checkpoint verification — dense zone (Section Scale) -->
      <div class="callout callout--checkpoint">
        <div class="callout__label">Checkpoint</div>
        <div class="callout__body">
          <p><strong>You should see</strong> all three tools respond with version numbers when running: <code>node --version && docker --version && gh --version</code>. If any command fails, revisit the corresponding step above.</p>
        </div>
      </div>

      <!-- Troubleshooting — collapsed -->
      <details class="troubleshoot">
        <summary>If This Fails: Node.js not found after installation</summary>
        <div class="troubleshoot__body">
          <p>If <code>node --version</code> returns "command not found" after installing nvm, your shell configuration file was not updated. Add the following to your <code>~/.bashrc</code> or <code>~/.zshrc</code>:</p>
          <div class="code-block">
            <pre><code>export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"</code></pre>
          </div>
          <p>Then restart your terminal or run <code>source ~/.zshrc</code>.</p>
        </div>
      </details>
    </article>


    <!-- SPARSE SEA — 80px+ between islands (DD-F-018) -->
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>


    <!-- ═══════════════════════════════════════════════════════════════════
         TASK ISLAND 2: Initialize Pipeline Configuration
         ═══════════════════════════════════════════════════════════════════ -->
    <article class="task-island reveal" aria-labelledby="task-2-title">
      <div class="task-island__header">
        <div class="task-island__number">2</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 2 of 6</div>
          <h2 class="task-island__title" id="task-2-title">Initialize Pipeline Configuration</h2>
          <div class="task-island__estimate">Estimated: 15 minutes</div>
        </div>
      </div>

      <div class="callout callout--prereq">
        <div class="callout__label">Prerequisites</div>
        <div class="callout__body">
          <p>Task 1 must be complete. You need a GitHub repository (existing or new) and all three tools installed. If you are starting from scratch, run <code>gh repo create my-app --public --clone</code> first.</p>
        </div>
      </div>

      <ol class="task-steps">
        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Create the workflow directory</div>
            <p class="task-step__description">
              GitHub Actions looks for workflow files in a specific directory. This structure is mandatory &mdash; workflows placed elsewhere will be silently ignored.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># Create the required directory structure</span>
mkdir -p .github/workflows

<span class="code-comment"># Verify the path exists</span>
ls -la .github/workflows/</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Create the main workflow file</div>
            <p class="task-step__description">
              The workflow file defines your entire pipeline as code. YAML indentation is significant &mdash; use 2 spaces, never tabs. This skeleton defines triggers, jobs, and the execution environment.
            </p>
            <div class="code-block">
              <div class="code-block__label">.github/workflows/ci-cd.yml</div>
              <pre><code><span class="code-comment"># CI/CD Pipeline — triggers on push and pull request</span>
name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

<span class="code-comment"># Define the sequence of jobs</span>
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

  test:
    needs: build       <span class="code-comment"># Runs after build completes</span>
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

  deploy:
    needs: test        <span class="code-comment"># Runs after test completes</span>
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - uses: actions/checkout@v4</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Validate the YAML syntax</div>
            <p class="task-step__description">
              Before committing, validate the workflow file. A single indentation error will cause the entire pipeline to fail silently.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># Use the GitHub CLI to validate</span>
gh workflow view ci-cd.yml

<span class="code-comment"># Or use a YAML linter</span>
npx yaml-lint .github/workflows/ci-cd.yml</code></pre>
            </div>
          </div>
        </li>
      </ol>

      <div class="callout callout--checkpoint">
        <div class="callout__label">Checkpoint</div>
        <div class="callout__body">
          <p><strong>You should see</strong> a file at <code>.github/workflows/ci-cd.yml</code> that passes YAML validation with no errors. The file should contain three jobs: <code>build</code>, <code>test</code>, and <code>deploy</code> with correct dependency chaining.</p>
        </div>
      </div>

      <details class="troubleshoot">
        <summary>If This Fails: YAML indentation errors</summary>
        <div class="troubleshoot__body">
          <p>YAML is whitespace-sensitive. The most common error is mixing tabs and spaces. Configure your editor to use 2 spaces for YAML files:</p>
          <div class="code-block">
            <pre><code><span class="code-comment"># VS Code settings.json</span>
"[yaml]": {
  "editor.tabSize": 2,
  "editor.insertSpaces": true
}</code></pre>
          </div>
          <p>If you see <code>mapping values are not allowed here</code>, check that nested keys are indented exactly 2 spaces deeper than their parent.</p>
        </div>
      </details>
    </article>


    <!-- SPARSE SEA -->
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>


    <!-- ═══════════════════════════════════════════════════════════════════
         ESSENCE PULLQUOTE — Island break
         Soul Piece 3: The Archivist Speaks in Serif
         ═══════════════════════════════════════════════════════════════════ -->
    <blockquote class="essence-quote reveal">
      Each task is an island. Complete in itself, connected by intent, separated by the calm of understanding.
    </blockquote>


    <!-- SPARSE SEA -->
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>


    <!-- ═══════════════════════════════════════════════════════════════════
         TASK ISLAND 3: Configure Build Stage
         ═══════════════════════════════════════════════════════════════════ -->
    <article class="task-island reveal" aria-labelledby="task-3-title">
      <div class="task-island__header">
        <div class="task-island__number">3</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 3 of 6</div>
          <h2 class="task-island__title" id="task-3-title">Configure Build Stage</h2>
          <div class="task-island__estimate">Estimated: 15 minutes</div>
        </div>
      </div>

      <div class="callout callout--prereq">
        <div class="callout__label">Prerequisites</div>
        <div class="callout__body">
          <p>Tasks 1 and 2 must be complete. Your project should have a <code>package.json</code> with defined scripts. If starting fresh, run <code>npm init -y</code> to generate one.</p>
        </div>
      </div>

      <ol class="task-steps">
        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Define build scripts in package.json</div>
            <p class="task-step__description">
              Your pipeline will call npm scripts for each stage. Defining clear, composable scripts means the CI configuration stays minimal while build logic lives in your project.
            </p>
            <div class="code-block">
              <div class="code-block__label">package.json (scripts section)</div>
              <pre><code>{
  "scripts": {
    <span class="code-comment">// Core build pipeline scripts</span>
    "build": "tsc && vite build",
    "build:ci": "npm run lint && npm run build",

    <span class="code-comment">// Lint and format checks</span>
    "lint": "eslint . --ext .ts,.tsx",
    "lint:fix": "eslint . --ext .ts,.tsx --fix",
    "format:check": "prettier --check .",

    <span class="code-comment">// Type checking</span>
    "typecheck": "tsc --noEmit"
  }
}</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Add build steps to the workflow</div>
            <p class="task-step__description">
              Expand the <code>build</code> job in your workflow file with dependency installation, linting, type checking, and the actual build.
            </p>
            <div class="code-block">
              <div class="code-block__label">.github/workflows/ci-cd.yml — build job</div>
              <pre><code>  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      <span class="code-comment"># Install dependencies with exact versions</span>
      - name: Install dependencies
        run: npm ci

      <span class="code-comment"># Run linting and type checks first</span>
      - name: Lint
        run: npm run lint

      - name: Type check
        run: npm run typecheck

      <span class="code-comment"># Build the project</span>
      - name: Build
        run: npm run build

      <span class="code-comment"># Upload build artifacts for the test/deploy jobs</span>
      - name: Upload build artifacts
        uses: actions/upload-artifact@v4
        with:
          name: build-output
          path: dist/
          retention-days: 1</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Configure environment variables</div>
            <p class="task-step__description">
              Environment variables control build behavior without hardcoding values. Use the <code>env</code> key at the job level for variables shared across steps.
            </p>
            <div class="code-block">
              <div class="code-block__label">.github/workflows/ci-cd.yml — env section</div>
              <pre><code>  build:
    runs-on: ubuntu-latest
    <span class="code-comment"># Environment variables for the build</span>
    env:
      NODE_ENV: production
      CI: true
      VITE_API_URL: ${{ vars.API_URL }}
    steps:
      <span class="code-comment"># ... steps from above</span></code></pre>
            </div>

            <div class="callout callout--warning">
              <div class="callout__label">Warning</div>
              <div class="callout__body">
                <p>Never hardcode secrets (API keys, tokens, passwords) in your workflow file. Use <code>${{ secrets.SECRET_NAME }}</code> for sensitive values. We will configure secrets properly in Task 5.</p>
              </div>
            </div>
          </div>
        </li>
      </ol>

      <div class="callout callout--checkpoint">
        <div class="callout__label">Checkpoint</div>
        <div class="callout__body">
          <p><strong>You should see</strong> your build job complete successfully when you push to your repository. Run <code>gh run list</code> to check the status. The <code>dist/</code> directory should be uploaded as an artifact.</p>
        </div>
      </div>

      <details class="troubleshoot">
        <summary>If This Fails: npm ci fails with lockfile mismatch</summary>
        <div class="troubleshoot__body">
          <p><code>npm ci</code> requires an exact match between <code>package.json</code> and <code>package-lock.json</code>. If they are out of sync:</p>
          <div class="code-block">
            <pre><code><span class="code-comment"># Regenerate the lockfile</span>
rm package-lock.json
npm install

<span class="code-comment"># Commit the updated lockfile</span>
git add package-lock.json
git commit -m "fix: regenerate lockfile"</code></pre>
          </div>
          <p>Always commit <code>package-lock.json</code> to your repository. It ensures deterministic installations.</p>
        </div>
      </details>
    </article>


    <!-- SPARSE SEA -->
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>


    <!-- ═══════════════════════════════════════════════════════════════════
         TASK ISLAND 4: Set Up Testing Stage
         ═══════════════════════════════════════════════════════════════════ -->
    <article class="task-island reveal" aria-labelledby="task-4-title">
      <div class="task-island__header">
        <div class="task-island__number">4</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 4 of 6</div>
          <h2 class="task-island__title" id="task-4-title">Set Up Testing Stage</h2>
          <div class="task-island__estimate">Estimated: 20 minutes</div>
        </div>
      </div>

      <div class="callout callout--prereq">
        <div class="callout__label">Prerequisites</div>
        <div class="callout__body">
          <p>Tasks 1 through 3 must be complete. Your build job should be passing. You need a test framework installed &mdash; this guide uses Vitest, but the workflow steps work with Jest or Mocha as well.</p>
        </div>
      </div>

      <ol class="task-steps">
        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Install and configure Vitest</div>
            <p class="task-step__description">
              Vitest provides fast, Vite-native testing with built-in coverage reporting. It is a drop-in replacement for Jest with better TypeScript support.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># Install Vitest and coverage reporter</span>
npm install -D vitest @vitest/coverage-v8

<span class="code-comment"># Add test scripts to package.json</span></code></pre>
            </div>
            <div class="code-block">
              <div class="code-block__label">package.json (add to scripts)</div>
              <pre><code>{
  "scripts": {
    "test": "vitest run",
    "test:watch": "vitest",
    "test:coverage": "vitest run --coverage",
    "test:ci": "vitest run --coverage --reporter=junit"
  }
}</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Write a sample unit test</div>
            <p class="task-step__description">
              Before configuring the CI step, verify that tests run locally. Start with a simple test that exercises real logic.
            </p>
            <div class="code-block">
              <div class="code-block__label">src/__tests__/utils.test.ts</div>
              <pre><code>import { describe, it, expect } from 'vitest'
import { formatPipelineStatus } from '../utils'

describe('formatPipelineStatus', () => {
  <span class="code-comment">// Unit test: single function, no external deps</span>
  it('returns "passing" for successful builds', () => {
    const result = formatPipelineStatus({
      build: 'success',
      test: 'success',
      deploy: 'success'
    })
    expect(result).toBe('passing')
  })

  it('returns "failing" if any stage fails', () => {
    const result = formatPipelineStatus({
      build: 'success',
      test: 'failure',
      deploy: 'skipped'
    })
    expect(result).toBe('failing')
  })
})</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Add test steps to the workflow</div>
            <p class="task-step__description">
              The test job downloads build artifacts from the build stage, runs the full test suite with coverage, and uploads coverage reports.
            </p>
            <div class="code-block">
              <div class="code-block__label">.github/workflows/ci-cd.yml — test job</div>
              <pre><code>  test:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      <span class="code-comment"># Download build artifacts from the build job</span>
      - name: Download build artifacts
        uses: actions/download-artifact@v4
        with:
          name: build-output
          path: dist/

      <span class="code-comment"># Run unit tests with coverage</span>
      - name: Run unit tests
        run: npm run test:ci

      <span class="code-comment"># Upload coverage report</span>
      - name: Upload coverage
        uses: actions/upload-artifact@v4
        with:
          name: coverage-report
          path: coverage/</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Add integration test step</div>
            <p class="task-step__description">
              Integration tests verify that components work together. Run them as a separate step after unit tests to isolate failures.
            </p>
            <div class="code-block">
              <div class="code-block__label">.github/workflows/ci-cd.yml — integration test step</div>
              <pre><code>      <span class="code-comment"># Run integration tests (separate from unit tests)</span>
      - name: Run integration tests
        run: npm run test:ci -- --project=integration
        env:
          DATABASE_URL: ${{ secrets.TEST_DATABASE_URL }}
          API_KEY: ${{ secrets.TEST_API_KEY }}</code></pre>
            </div>
          </div>
        </li>
      </ol>

      <div class="callout callout--checkpoint">
        <div class="callout__label">Checkpoint</div>
        <div class="callout__body">
          <p><strong>You should see</strong> both unit and integration tests passing in the Actions tab. Coverage reports should be uploaded as artifacts. Run <code>gh run view --log</code> to inspect the test output directly.</p>
        </div>
      </div>

      <details class="troubleshoot">
        <summary>If This Fails: Tests pass locally but fail in CI</summary>
        <div class="troubleshoot__body">
          <p>The most common cause is environment differences. Check these:</p>
          <p><strong>Missing environment variables:</strong> CI runners start with a clean environment. Any variables your tests depend on must be explicitly set in the workflow <code>env</code> section.</p>
          <p><strong>File path differences:</strong> macOS is case-insensitive by default, but Linux CI runners are case-sensitive. Check for <code>import from './Component'</code> when the file is actually <code>component.ts</code>.</p>
          <p><strong>Timezone differences:</strong> CI runners default to UTC. If your tests depend on local time, set <code>TZ: America/New_York</code> in the env section.</p>
        </div>
      </details>
    </article>


    <!-- SPARSE SEA -->
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>


    <!-- ═══════════════════════════════════════════════════════════════════
         TASK ISLAND 5: Configure Deployment
         ═══════════════════════════════════════════════════════════════════ -->
    <article class="task-island task-island--featured reveal" aria-labelledby="task-5-title">
      <div class="task-island__header">
        <div class="task-island__number">5</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 5 of 6</div>
          <h2 class="task-island__title" id="task-5-title">Configure Deployment</h2>
          <div class="task-island__estimate">Estimated: 20 minutes</div>
        </div>
      </div>

      <div class="callout callout--prereq">
        <div class="callout__label">Prerequisites</div>
        <div class="callout__body">
          <p>Tasks 1 through 4 must be complete. Your build and test jobs should pass on every push. You need access to your deployment target (Vercel, AWS, Railway, etc.) and the ability to create API tokens.</p>
        </div>
      </div>

      <ol class="task-steps">
        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Configure secrets in GitHub</div>
            <p class="task-step__description">
              Secrets are encrypted environment variables that never appear in logs. They are the only safe way to store credentials for deployment.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># Set deployment secrets via GitHub CLI</span>
gh secret set DEPLOY_TOKEN --body "your-deploy-token-here"
gh secret set PRODUCTION_URL --body "https://app.example.com"
gh secret set STAGING_URL --body "https://staging.example.com"

<span class="code-comment"># Verify secrets are set (values are hidden)</span>
gh secret list</code></pre>
            </div>

            <div class="callout callout--warning">
              <div class="callout__label">Warning</div>
              <div class="callout__body">
                <p>Never echo secrets in workflow steps. Even <code>echo ${{ secrets.TOKEN }}</code> will be masked, but logging secrets to files or passing them as command arguments can expose them in artifact uploads.</p>
              </div>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Set up staging deployment</div>
            <p class="task-step__description">
              Deploy to staging on every push to the <code>develop</code> branch. This gives your team a preview environment for testing changes before they reach production.
            </p>
            <div class="code-block">
              <div class="code-block__label">.github/workflows/ci-cd.yml — deploy-staging job</div>
              <pre><code>  deploy-staging:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/develop'
    environment:
      name: staging
      url: ${{ vars.STAGING_URL }}
    steps:
      - uses: actions/checkout@v4

      <span class="code-comment"># Download the tested build artifacts</span>
      - name: Download build artifacts
        uses: actions/download-artifact@v4
        with:
          name: build-output
          path: dist/

      <span class="code-comment"># Deploy to staging</span>
      - name: Deploy to staging
        run: |
          npx vercel deploy --prebuilt \
            --token=${{ secrets.DEPLOY_TOKEN }} \
            --env=staging</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Set up production deployment</div>
            <p class="task-step__description">
              Production deploys trigger only on the <code>main</code> branch and require an approval step. This prevents accidental deployments.
            </p>
            <div class="code-block">
              <div class="code-block__label">.github/workflows/ci-cd.yml — deploy-production job</div>
              <pre><code>  deploy-production:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    environment:
      name: production
      url: ${{ vars.PRODUCTION_URL }}
    steps:
      - uses: actions/checkout@v4

      - name: Download build artifacts
        uses: actions/download-artifact@v4
        with:
          name: build-output
          path: dist/

      <span class="code-comment"># Deploy to production with promotion</span>
      - name: Deploy to production
        run: |
          npx vercel deploy --prebuilt --prod \
            --token=${{ secrets.DEPLOY_TOKEN }}

      <span class="code-comment"># Notify team of deployment</span>
      - name: Notify deployment
        if: success()
        run: |
          echo "Deployed to production: ${{ vars.PRODUCTION_URL }}"</code></pre>
            </div>
          </div>
        </li>
      </ol>

      <div class="callout callout--checkpoint">
        <div class="callout__label">Checkpoint</div>
        <div class="callout__body">
          <p><strong>You should see</strong> two deployment environments listed when you run <code>gh api repos/{owner}/{repo}/environments</code>: <code>staging</code> and <code>production</code>. Pushing to <code>develop</code> should trigger a staging deploy; merging to <code>main</code> should trigger production.</p>
        </div>
      </div>

      <details class="troubleshoot">
        <summary>If This Fails: Deployment token permissions error</summary>
        <div class="troubleshoot__body">
          <p>The deployment token needs specific permissions. For Vercel, create a token at <code>vercel.com/account/tokens</code> with "Full Access" scope. For AWS, ensure your IAM role has the required deployment permissions.</p>
          <p>If the deployment step shows <code>Error: Not authorized</code>, regenerate the token and update the secret:</p>
          <div class="code-block">
            <pre><code><span class="code-comment"># Update the secret with a new token</span>
gh secret set DEPLOY_TOKEN --body "new-token-value"</code></pre>
          </div>
        </div>
      </details>
    </article>


    <!-- SPARSE SEA -->
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>


    <!-- ═══════════════════════════════════════════════════════════════════
         TASK ISLAND 6: Verify Pipeline
         ═══════════════════════════════════════════════════════════════════ -->
    <article class="task-island reveal" aria-labelledby="task-6-title">
      <div class="task-island__header">
        <div class="task-island__number">6</div>
        <div class="task-island__title-block">
          <div class="task-island__label">Task Island 6 of 6</div>
          <h2 class="task-island__title" id="task-6-title">Verify Pipeline</h2>
          <div class="task-island__estimate">Estimated: 15 minutes</div>
        </div>
      </div>

      <div class="callout callout--prereq">
        <div class="callout__label">Prerequisites</div>
        <div class="callout__body">
          <p>Tasks 1 through 5 must be complete. Your full pipeline &mdash; build, test, deploy &mdash; should be configured. This final task validates the entire chain end-to-end.</p>
        </div>
      </div>

      <ol class="task-steps">
        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Trigger a full pipeline run</div>
            <p class="task-step__description">
              Push a small change to the <code>develop</code> branch to trigger the complete pipeline. Watch each stage execute in sequence.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># Make a small change to trigger the pipeline</span>
echo "# Pipeline verified $(date)" >> CHANGELOG.md
git add CHANGELOG.md
git commit -m "ci: verify pipeline end-to-end"
git push origin develop

<span class="code-comment"># Watch the pipeline execute in real-time</span>
gh run watch</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Verify each stage completed</div>
            <p class="task-step__description">
              Check that every stage passed and artifacts were generated correctly. A successful pipeline should show green checkmarks across all stages.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># List recent runs and their status</span>
gh run list --limit 5

<span class="code-comment"># View detailed logs for the latest run</span>
gh run view --log

<span class="code-comment"># Download artifacts to verify</span>
gh run download --name build-output --dir ./verify-build
gh run download --name coverage-report --dir ./verify-coverage</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Test rollback capability</div>
            <p class="task-step__description">
              A pipeline is only as good as its rollback strategy. Verify that you can quickly revert a failed deployment.
            </p>
            <div class="code-block">
              <div class="code-block__label">Terminal</div>
              <pre><code><span class="code-comment"># Revert the last commit (simulating a bad deploy)</span>
git revert HEAD --no-edit
git push origin develop

<span class="code-comment"># Verify rollback pipeline triggers</span>
gh run watch

<span class="code-comment"># For Vercel: instant rollback to previous deployment</span>
npx vercel rollback --token=$DEPLOY_TOKEN</code></pre>
            </div>
          </div>
        </li>

        <li class="task-step">
          <div class="task-step__marker"></div>
          <div class="task-step__content">
            <div class="task-step__title">Set up monitoring and notifications</div>
            <p class="task-step__description">
              Configure notifications so the team is alerted when the pipeline fails. This closes the feedback loop &mdash; you should never discover a broken pipeline by accident.
            </p>
            <div class="code-block">
              <div class="code-block__label">.github/workflows/ci-cd.yml — notification step (add to deploy jobs)</div>
              <pre><code>      <span class="code-comment"># Send Slack notification on failure</span>
      - name: Notify on failure
        if: failure()
        uses: slackapi/slack-github-action@v1
        with:
          payload: |
            {
              "text": "Pipeline failed: ${{ github.workflow }}",
              "blocks": [{
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*${{ github.workflow }}* failed on `${{ github.ref_name }}`\n<${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|View run>"
                }
              }]
            }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK }}</code></pre>
            </div>
          </div>
        </li>
      </ol>

      <div class="callout callout--checkpoint">
        <div class="callout__label">Checkpoint</div>
        <div class="callout__body">
          <p><strong>You should see</strong> a complete pipeline run with green checkmarks for build, test, and deploy stages. The rollback commit should trigger its own successful pipeline run. Notification tests should deliver to your configured channel.</p>
        </div>
      </div>

      <details class="troubleshoot">
        <summary>If This Fails: Pipeline passes but deployment is not live</summary>
        <div class="troubleshoot__body">
          <p>Check the deployment step logs carefully. Common issues include:</p>
          <p><strong>DNS propagation:</strong> New deployments may take 2-5 minutes to propagate. Wait and check again before investigating further.</p>
          <p><strong>Cached deployment:</strong> Some platforms cache previous deployments. Try a cache-busting deploy with <code>--force</code> flag.</p>
          <p><strong>Environment mismatch:</strong> Verify the <code>environment</code> key in your workflow matches the GitHub environment name exactly (case-sensitive).</p>
        </div>
      </details>
    </article>


    <!-- ═══════════════════════════════════════════════════════════════════
         TRANSITION: Sparse sea → Dense bookend back
         BOOKENDS pattern: sparse middle transitions to dense back
         ═══════════════════════════════════════════════════════════════════ -->
    <div class="sparse-sea--large" role="separator" aria-hidden="true"></div>
    <p class="section-label">Verification</p>
    <div class="sparse-sea" role="separator" aria-hidden="true"></div>


    <!-- ═══════════════════════════════════════════════════════════════════
         BOOKEND BACK — Dense verification zone
         DD-F-006 PAGE SCALE: Verification (dense)
         ═══════════════════════════════════════════════════════════════════ -->
    <section class="bookend-back reveal" aria-labelledby="verification-title">
      <h2 class="bookend-back__title" id="verification-title">Complete Pipeline Verification</h2>

      <!-- Pipeline diagram — dense overview of all stages -->
      <div class="pipeline-diagram">
        <div class="pipeline-diagram__title">Full Pipeline Architecture</div>
        <div class="pipeline-diagram__flow">
          <div class="pipeline-stage pipeline-stage--active">
            <div>1</div>
            <div>Install</div>
          </div>
          <div class="pipeline-stage pipeline-stage--active">
            <div>2</div>
            <div>Config</div>
          </div>
          <div class="pipeline-stage pipeline-stage--active">
            <div>3</div>
            <div>Build</div>
          </div>
          <div class="pipeline-stage pipeline-stage--active">
            <div>4</div>
            <div>Test</div>
          </div>
          <div class="pipeline-stage pipeline-stage--active">
            <div>5</div>
            <div>Deploy</div>
          </div>
          <div class="pipeline-stage pipeline-stage--active">
            <div>6</div>
            <div>Verify</div>
          </div>
        </div>
      </div>

      <!-- Verification checklist — all 6 tasks -->
      <ul class="verification-list" aria-label="Pipeline verification checklist">
        <li>
          <span class="verification-list__check" aria-hidden="true">&check;</span>
          <span><strong>Task 1 &mdash; Prerequisites:</strong> Node.js, Docker, and GitHub CLI all respond with version numbers</span>
        </li>
        <li>
          <span class="verification-list__check" aria-hidden="true">&check;</span>
          <span><strong>Task 2 &mdash; Configuration:</strong> Workflow file at <code>.github/workflows/ci-cd.yml</code> passes YAML validation</span>
        </li>
        <li>
          <span class="verification-list__check" aria-hidden="true">&check;</span>
          <span><strong>Task 3 &mdash; Build:</strong> Build job completes, artifacts uploaded, lint and typecheck pass</span>
        </li>
        <li>
          <span class="verification-list__check" aria-hidden="true">&check;</span>
          <span><strong>Task 4 &mdash; Testing:</strong> Unit and integration tests pass, coverage reports generated</span>
        </li>
        <li>
          <span class="verification-list__check" aria-hidden="true">&check;</span>
          <span><strong>Task 5 &mdash; Deployment:</strong> Staging deploys on develop, production deploys on main, secrets configured</span>
        </li>
        <li>
          <span class="verification-list__check" aria-hidden="true">&check;</span>
          <span><strong>Task 6 &mdash; Verification:</strong> Full pipeline runs end-to-end, rollback tested, notifications configured</span>
        </li>
      </ul>

      <!-- What's Next callout -->
      <div class="whats-next">
        <h3 class="whats-next__title">What Comes After</h3>
        <ul class="whats-next__list">
          <li>
            <span class="whats-next__arrow">-></span>
            <span><strong>Branch protection rules:</strong> Require status checks to pass before merging to main</span>
          </li>
          <li>
            <span class="whats-next__arrow">-></span>
            <span><strong>Caching optimization:</strong> Add dependency caching to reduce pipeline execution time by 40-60%</span>
          </li>
          <li>
            <span class="whats-next__arrow">-></span>
            <span><strong>Matrix testing:</strong> Test against multiple Node.js versions and operating systems simultaneously</span>
          </li>
          <li>
            <span class="whats-next__arrow">-></span>
            <span><strong>Release automation:</strong> Semantic versioning with automatic changelog generation</span>
          </li>
          <li>
            <span class="whats-next__arrow">-></span>
            <span><strong>Security scanning:</strong> Add SAST and dependency vulnerability scanning to the pipeline</span>
          </li>
        </ul>
      </div>
    </section>


    <!-- ═══════════════════════════════════════════════════════════════════
         PATTERN SUMMARY — Exploration analysis
         ═══════════════════════════════════════════════════════════════════ -->
    <div class="pattern-summary reveal">
      <div class="pattern-summary__title">Pattern Analysis &mdash; OD-003</div>
      <table>
        <thead>
          <tr>
            <th>Dimension</th>
            <th>Implementation</th>
            <th>Evidence</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Organization</td>
            <td>Task-Based (6 discrete islands)</td>
            <td>Each task is self-contained with prereqs, steps, checkpoint, troubleshooting</td>
          </tr>
          <tr>
            <td>Primary Density</td>
            <td>ISLANDS &mdash; dense clusters in sparse sea</td>
            <td>80px+ whitespace between task islands, dense content within</td>
          </tr>
          <tr>
            <td>Secondary Density</td>
            <td>BOOKENDS &mdash; dense front, sparse middle, dense back</td>
            <td>Dense orientation (task map) / sparse sea / dense verification (checklist)</td>
          </tr>
          <tr>
            <td>DD-F-006 Page Scale</td>
            <td>Dense overview &rarr; Sparse sea &rarr; Dense verification</td>
            <td>Bookend front, 6 islands with sea gaps, bookend back</td>
          </tr>
          <tr>
            <td>DD-F-006 Section Scale</td>
            <td>Prereqs(dense) &rarr; Steps(moderate) &rarr; Checkpoint(dense)</td>
            <td>Each task island follows this internal rhythm</td>
          </tr>
          <tr>
            <td>DD-F-006 Component Scale</td>
            <td>Label(sparse) &rarr; Body(dense)</td>
            <td>All callouts: monospace label zone, prose body zone</td>
          </tr>
          <tr>
            <td>DD-F-006 Character Scale</td>
            <td>Comments(sparse) &rarr; Logic(dense)</td>
            <td>Code blocks: italic gray comments, dense code logic</td>
          </tr>
          <tr>
            <td>Soul Compliance</td>
            <td>5/5 pieces honored</td>
            <td>Sharp edges, no shadows, serif wisdom, callout DNA, square markers</td>
          </tr>
        </tbody>
      </table>
    </div>

  </main>

</body>
</html>
