<!-- ===============================================================================
INLINE THREADING HEADER -- CD Phase, Wave 2
File: explorations/combination/CD-004-essence-as-background.html
Tier: A | Generated: 2026-02-11

1. WHY THIS EXISTS
Combination exploration testing whether Essence callouts can serve as an AMBIENT
background voice through FREQUENCY and TYPOGRAPHY -- NOT through physical depth
illusion (opacity, z-index, blur, gradients). The page uses TIDAL density (width
modulation), CONFIDENCE-BASED organization (established to open), and SPIRAL +
CHOREOGRAPHY axis geometry with a BREATHING transition between them.

2. QUESTION IT ANSWERS
Can Essence callouts pervade a page like a background hum through regular
distribution, italic serif typography, and width variation alone -- without
any physical depth technique violating the ANTI-PHYSICAL identity?

3. STATUS
v1

4. BUILT ON
| Dependency | Relationship |
|------------|-------------|
| AD-004-spiral.html | Spiral axis reference (primary axis, geological strata) |
| AD-005-choreography.html | Choreography axis reference (secondary axis, direction changes) |
| OD-004-confidence.html | Paired OD exploration (CONFIDENCE-BASED) |
| CD-CONVENTION-SPEC.md | Convention rules for CD CSS |
| research-package-cd-004.md | Research input (R-5, AD-F, OD-F, DD-F) |

5. MUST HONOR
Soul Pieces #1-#5: border-radius: 0, box-shadow: none, no drop-shadow,
Instrument Serif italic for Essence/Core ONLY, muted earth tones.
ANTI-PHYSICAL identity. 3-category borders only (1px, 3px, 4px).
CRITICAL: K-12 constraint -- "Background" = frequency+typography, NOT depth.

6. CONSUMED BY
| Consumer | How Used |
|----------|----------|
| CD-SYNTHESIS.md | Cross-CD analysis |
| HANDOFF-CD-TO-MIGRATION.md | Migration stage input |

7. KEY FINDINGS PRODUCED
CD-F-013 through CD-F-016

===============================================================================
RESEARCH APPLICATION RECORD (RAR) -- CD-004 Essence as Background
===============================================================================

1. EXPLORATION ID: CD-004
2. PATTERN: Spiral + Choreography (COMPOUND)
3. PAIRED OD: OD-004 Confidence (established/probable/speculative/open)
4. DENSITY: TIDAL (width modulates density: narrow=dense, wide=sparse)
5. AXIS TYPE: Spiral (geological strata, border-weight gradient 4/3/1px) +
   Choreography (direction change = density change, hub-and-spoke)
6. FINDING RANGE: CD-F-013 through CD-F-016
7. 3-WAY HYPOTHESIS: Spiral provides geological confidence strata (outermost=
   established, innermost=open). TIDAL width variation creates ambient Essence
   presence through narrow callouts vs wide code blocks. Choreography sequences
   the reader through decisions at the page's second half.
8. R-5 APPLIED: H2 (contrast creates harmony), H3 (shared visual anchors),
   T2 (velocity mismatch rule), T3 (semantic dissonance/temperature flow),
   N1 (components stack not nest), G1 (semantic proximity), G2 (container
   signal), G3 (visual weight balance), S2 (density wave sequencing),
   S3 (first component sets tone), S4 (resolution component), S5 (teaching
   moment sequence), A5 (temperature whiplash), Recipe 2 (Deep Dive)
9. AD-F APPLIED: AD-F-004 (3-way unification), AD-F-013 (angular spiral =
   geological strata), AD-F-014 (border-weight gradient), AD-F-015
   (confidence-proportional spacing), AD-F-016 (spiral reading enhances
   geological layering), AD-F-017 (kinetic equivalence), AD-F-023
   (ATTENTION TOPOLOGY), AD-F-024 (sequential not simultaneous),
   AD-F-025 (transition grammar: Spiral to Choreography = Breathing)
10. WAVE 1 FINDINGS APPLIED: CD-F-001 (CRESCENDO velocity interleaving),
    CD-F-006 (breathing transition validated), CD-F-008 (spiral confidence
    strata border-weight gradient)
11. ANTI-PATTERNS AVOIDED: Semi-Transparent Backgrounds, Depth Illusion,
    Temperature Whiplash (A5), Essence Fatigue (T1), Orphaned Heavy (A4),
    Same-Velocity Stacking, 2px Border Epidemic, Traffic Light

=============================================================================== -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CD-004: Essence as Background</title>

  <!-- Google Fonts: Instrument Serif, Inter, JetBrains Mono -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <!-- ═══════════════════════════════════════════════════════════════════════
       LOCKED LAYER -- DO NOT MODIFY
       All values from DESIGN-SYSTEM/tokens/ (colors.md, typography.md,
       spacing.md, geometry.md). Programmatic diff verification against
       CD-CONVENTION-SPEC.md Sections 1-11.
       ═══════════════════════════════════════════════════════════════════════ -->
  <style id="locked-layer">
    /* DO NOT MODIFY -- programmatic diff verification */

    /* ═══════════════════════════════════════════════════════════════════════
       :root -- ALL tokens from DESIGN-SYSTEM/tokens/ files
       ═══════════════════════════════════════════════════════════════════════ */
    :root {
      /* Colors -- LOCKED (T1: colors.md) */
      --color-primary: #E83025;
      --color-background: #FEF9F5;
      --color-text: #1A1A1A;
      --color-text-secondary: #666666;
      --color-border: #E0D5C5;
      --color-border-subtle: #F0EBE3;

      /* Zone backgrounds -- LOCKED (OD-F-005 zone token naming) */
      --color-zone-sparse: #FEF9F5;
      --color-zone-dense: #FFFFFF;
      --color-zone-breathing: #FAF5ED;

      /* Typography -- LOCKED (T1: typography.md) */
      --font-display: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

      /* Type Scale -- 5-level cascade ~1.5x ratio (T1 + OD convention) */
      --type-page: 2.5rem;
      --type-section: 1.625rem;
      --type-subsection: 1.375rem;
      --type-body: 1rem;
      --type-code: 0.875rem;
      --type-meta: 0.75rem;

      /* Geometry -- LOCKED (T1: geometry.md) */
      --border-radius: 0;
      --box-shadow: none;

      /* Spacing Scale -- LOCKED (T1: spacing.md) */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --space-16: 64px;
      --space-20: 80px;

      /* Gestalt Semantic Aliases (EXT-CONV-003 + EXT-DENSITY-001) */
      --space-within: var(--space-2);
      --space-between: var(--space-8);
      --space-chapter: var(--space-16);

      /* Callout Accents -- LOCKED (T1: colors.md) */
      --accent-blue: #4A90D9;
      --accent-green: #4A9D6B;
      --accent-coral: #C97065;
      --accent-amber: #D97706;
      --accent-purple: #7C3AED;

      /* Standardized Border (OD convention) */
      --border-left-width: 4px;

      /* Solid Offset -- EXT-CREATIVE-001 */
      --offset-x: 4px;
      --offset-y: 4px;
      --offset-color: #1A1A1A;

      /* Syntax Highlighting (dark background) -- LOCKED */
      --syntax-keyword: #E83025;
      --syntax-string: #6B9B7A;
      --syntax-comment: #666666;
      --syntax-function: #4A7C9B;
      --syntax-type: #C97065;
      --syntax-number: #D97706;
      --syntax-punctuation: #E0D5C5;

      /* Transition timing -- CD convention Section 15 */
      --transition-standard: 0.3s ease;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       Reset and Soul Enforcement
       ═══════════════════════════════════════════════════════════════════════ */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    /* Enforce sharp edges globally -- Soul Piece #1 */
    *:where(:not(input, button, select)) {
      border-radius: 0;
    }

    /* Selection */
    ::selection {
      background: var(--color-primary);
      color: var(--color-background);
    }

    /* Focus -- WCAG compliance */
    *:focus-visible {
      outline: 3px solid var(--color-primary);
      outline-offset: 2px;
    }

    /* Skip link */
    .skip-link {
      position: absolute;
      top: -100%;
      left: 0;
      background: var(--color-primary);
      color: var(--color-background);
      padding: 8px 16px;
      z-index: 1000;
      font-family: var(--font-body);
      font-size: 14px;
      text-decoration: none;
    }
    .skip-link:focus { top: 0; }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }

    /* Print */
    @media print {
      body { background: white; color: black; }
      .skip-link { display: none; }
      .page-header { background: white !important; color: black !important; border-bottom-color: black !important; }
      .page-header .header-meta, .page-header .header-subtitle { color: #333 !important; }
    }
  </style>

  <!-- ═══════════════════════════════════════════════════════════════════════
       EXPLORATION LAYER -- CD-004 Essence as Background
       TIDAL density + CONFIDENCE-BASED org + SPIRAL + CHOREOGRAPHY axis
       ═══════════════════════════════════════════════════════════════════════ -->
  <style id="exploration-layer">
    /* ═══════════════════════════════════════════════════════════════════════
       Base Typography
       ═══════════════════════════════════════════════════════════════════════ */
    body {
      font-family: var(--font-body);
      font-size: var(--type-body);
      line-height: 1.7;
      color: var(--color-text);
      background: var(--color-background);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-display);
      line-height: 1.2;
    }

    h1 { font-size: var(--type-page); }
    h2 { font-size: var(--type-section); margin-bottom: var(--space-4); }
    h3 {
      font-size: var(--type-subsection);
      font-style: italic;
      margin-bottom: var(--space-3);
    }

    p {
      max-width: 70ch;
      margin-bottom: var(--space-4);
      overflow-wrap: break-word;
    }

    a {
      color: var(--color-primary);
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 2px;
      transition: color var(--transition-standard);
    }
    a:hover { color: var(--color-text); }

    /* ═══════════════════════════════════════════════════════════════════════
       Page Header -- Full-bleed dark (C-16, Section 4)
       ═══════════════════════════════════════════════════════════════════════ */
    .page-header {
      background: var(--color-text);
      color: var(--color-background);
      padding: var(--space-16) var(--space-8);
      border-bottom: 3px solid var(--color-primary);
    }

    .header-inner {
      max-width: 1100px;
      margin: 0 auto;
    }

    .header-meta {
      font-family: var(--font-body);
      font-weight: 500;
      font-size: var(--type-meta);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-2);
    }

    .header-title {
      font-family: var(--font-display);
      font-size: var(--type-page);
      color: #FAFAF5;
      margin-bottom: var(--space-4);
      line-height: 1.2;
    }

    .header-subtitle {
      font-family: var(--font-body);
      font-weight: 400;
      font-size: var(--type-body);
      color: var(--color-text-secondary);
      max-width: 70ch;
      line-height: 1.7;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       Page Container
       ═══════════════════════════════════════════════════════════════════════ */
    .page-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: var(--space-16) var(--space-8);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       SPIRAL CONFIDENCE STRATA -- Border-Weight Gradient (AD-F-014)
       Outermost = ESTABLISHED (4px), Middle = PROBABLE (3px),
       Inner = SPECULATIVE (1px), Core = OPEN (breathing zone)
       ═══════════════════════════════════════════════════════════════════════ */

    /* Established stratum: 4px borders, 24px spacing, dense/narrow */
    .stratum-established {
      border-left: 4px solid var(--color-border);
      padding-left: var(--space-6);
      margin-bottom: var(--space-6);
    }

    /* Probable stratum: 3px borders, 32px spacing */
    .stratum-probable {
      border-left: 3px solid var(--color-border);
      padding-left: var(--space-8);
      margin-bottom: var(--space-8);
    }

    /* Speculative stratum: 1px borders, 48px spacing */
    .stratum-speculative {
      border-left: 1px solid var(--color-border);
      padding-left: var(--space-12);
      margin-bottom: var(--space-12);
    }

    /* Open question: breathing zone, no border */
    .stratum-open {
      padding-left: var(--space-16);
      margin-bottom: var(--space-16);
    }

    /* Section spacing between confidence levels (AD-F-015) */
    .confidence-gap-moderate { margin-top: var(--space-8); }
    .confidence-gap-breathing { margin-top: var(--space-12); }
    .confidence-gap-wide { margin-top: var(--space-16); }

    /* ═══════════════════════════════════════════════════════════════════════
       ESSENCE CALLOUT -- AMBIENT Voice (Soul Piece #2 + #3)
       CRITICAL: Ambient = frequency + typography, NOT depth.
       No opacity < 1, no z-index layering, no box-shadow, no gradients.
       TIDAL: Essence at 60% width = narrow/dense wisdom.
       ═══════════════════════════════════════════════════════════════════════ */
    .callout-essence {
      border-left: 4px solid var(--accent-purple);
      padding: var(--space-4) var(--space-6);
      margin: var(--space-6) 0;
      max-width: 60%;
      background: var(--color-zone-sparse);
    }

    .callout-essence .callout-label {
      font-family: var(--font-body);
      font-weight: 600;
      font-size: var(--type-meta);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--accent-purple);
      margin-bottom: var(--space-2);
    }

    .callout-essence .callout-body {
      font-family: var(--font-display);
      font-style: italic;
      font-size: var(--type-body);
      line-height: 1.7;
      color: var(--color-text);
      max-width: 70ch;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       INFO CALLOUT -- Context per confidence level
       ═══════════════════════════════════════════════════════════════════════ */
    .callout-info {
      border-left: 4px solid var(--accent-blue);
      padding: var(--space-4) var(--space-6);
      margin: var(--space-6) 0;
      background: var(--color-zone-dense);
    }

    .callout-info .callout-label {
      font-family: var(--font-body);
      font-weight: 600;
      font-size: var(--type-meta);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--accent-blue);
      margin-bottom: var(--space-2);
    }

    .callout-info .callout-body {
      font-family: var(--font-body);
      font-size: var(--type-body);
      line-height: 1.7;
      color: var(--color-text);
      max-width: 70ch;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       TIP CALLOUT -- Best practice
       ═══════════════════════════════════════════════════════════════════════ */
    .callout-tip {
      border-left: 4px solid var(--accent-green);
      padding: var(--space-4) var(--space-6);
      margin: var(--space-6) 0;
      background: var(--color-zone-dense);
    }

    .callout-tip .callout-label {
      font-family: var(--font-body);
      font-weight: 600;
      font-size: var(--type-meta);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--accent-green);
      margin-bottom: var(--space-2);
    }

    .callout-tip .callout-body {
      font-family: var(--font-body);
      font-size: var(--type-body);
      line-height: 1.7;
      color: var(--color-text);
      max-width: 70ch;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       CHALLENGE CALLOUT -- Invitation to explore
       ═══════════════════════════════════════════════════════════════════════ */
    .callout-challenge {
      border-left: 4px solid var(--accent-amber);
      padding: var(--space-4) var(--space-6);
      margin: var(--space-6) 0;
      background: var(--color-zone-dense);
    }

    .callout-challenge .callout-label {
      font-family: var(--font-body);
      font-weight: 600;
      font-size: var(--type-meta);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--accent-amber);
      margin-bottom: var(--space-2);
    }

    .callout-challenge .callout-body {
      font-family: var(--font-body);
      font-size: var(--type-body);
      line-height: 1.7;
      color: var(--color-text);
      max-width: 70ch;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       CODE BLOCK -- Dark theme (Section 3)
       Full width = TIDAL sparse zone
       ═══════════════════════════════════════════════════════════════════════ */
    .code-block {
      background: var(--color-text);
      color: #FAFAF5;
      border: 3px solid var(--color-border);
      border-radius: var(--border-radius);
      padding: var(--space-6) var(--space-8);
      font-family: var(--font-mono);
      font-size: var(--type-code);
      line-height: 1.5;
      overflow-x: auto;
      margin: var(--space-6) 0;
      position: relative;
    }

    .code-block .code-label {
      font-family: var(--font-body);
      font-weight: 500;
      font-size: var(--type-meta);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-3);
      display: block;
    }

    .code-block code {
      font-family: var(--font-mono);
      font-size: var(--type-code);
      line-height: 1.5;
    }

    /* Inline code */
    code:not(pre code):not(.code-block code) {
      font-family: var(--font-mono);
      font-size: 0.9em;
      background: var(--color-border-subtle);
      padding: 2px 6px;
      border: 1px solid var(--color-border);
    }

    /* Syntax highlighting */
    .kw { color: var(--syntax-keyword); }
    .str { color: var(--syntax-string); }
    .cmt { color: var(--syntax-comment); }
    .fn { color: var(--syntax-function); }
    .typ { color: var(--syntax-type); }
    .num { color: var(--syntax-number); }
    .punc { color: var(--syntax-punctuation); }

    /* ═══════════════════════════════════════════════════════════════════════
       REASONING COMPONENT -- Deliberation on choices (Heavy/Slow)
       Full width, framed (G2: framed = bounded deliberation)
       ═══════════════════════════════════════════════════════════════════════ */
    .reasoning {
      border: 3px solid var(--color-border);
      padding: var(--space-8);
      margin: var(--space-8) 0;
      background: var(--color-zone-dense);
    }

    .reasoning-header {
      font-family: var(--font-display);
      font-size: var(--type-subsection);
      font-style: italic;
      color: var(--color-text);
      margin-bottom: var(--space-4);
      padding-bottom: var(--space-3);
      border-bottom: 1px solid var(--color-border);
    }

    .reasoning-columns {
      display: flex;
      gap: var(--space-8);
    }

    .reasoning-col {
      flex: 1;
    }

    .reasoning-col h4 {
      font-family: var(--font-body);
      font-weight: 600;
      font-size: var(--type-body);
      margin-bottom: var(--space-3);
      color: var(--color-text);
    }

    .reasoning-col p,
    .reasoning-col ul {
      font-size: var(--type-body);
      line-height: 1.7;
    }

    .reasoning-col ul {
      padding-left: var(--space-5);
      margin-bottom: var(--space-4);
    }

    .reasoning-col li {
      margin-bottom: var(--space-2);
    }

    .reasoning-summary {
      margin-top: var(--space-6);
      padding-top: var(--space-4);
      border-top: 1px solid var(--color-border);
      font-weight: 500;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       TASK COMPONENT -- Action items per tier (Medium/Fast)
       ═══════════════════════════════════════════════════════════════════════ */
    .task-component {
      border: 3px solid var(--color-border);
      padding: var(--space-6) var(--space-8);
      margin: var(--space-6) 0;
      background: var(--color-zone-sparse);
    }

    .task-header {
      font-family: var(--font-body);
      font-weight: 600;
      font-size: var(--type-subsection);
      color: var(--color-text);
      margin-bottom: var(--space-4);
      padding-bottom: var(--space-3);
      border-bottom: 1px solid var(--color-border);
    }

    .task-list {
      list-style: none;
      padding: 0;
    }

    .task-list li {
      padding: var(--space-3) 0;
      border-bottom: 1px solid var(--color-border);
      font-size: var(--type-body);
      line-height: 1.7;
      display: flex;
      align-items: flex-start;
      gap: var(--space-3);
    }

    .task-list li:last-child {
      border-bottom: none;
    }

    .task-checkbox {
      width: 16px;
      height: 16px;
      border: 1px solid var(--color-border);
      display: inline-block;
      flex-shrink: 0;
      margin-top: 4px;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       BREATHING TRANSITION -- Between Spiral and Choreography
       48px+ gap with 3px structural divider (CD-F-006 validated)
       Spiral-to-Choreography = Breathing (AD-F-025)
       ═══════════════════════════════════════════════════════════════════════ */
    .breathing-transition {
      margin: var(--space-20) 0;
      padding: var(--space-12) 0;
      border-top: 3px solid var(--color-border);
      border-bottom: 3px solid var(--color-border);
      background: var(--color-zone-breathing);
      text-align: center;
    }

    .breathing-transition .transition-essence {
      font-family: var(--font-display);
      font-style: italic;
      font-size: var(--type-section);
      color: var(--color-text);
      max-width: 60ch;
      margin: 0 auto;
      padding: var(--space-8) var(--space-8);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       CHOREOGRAPHY SECTION -- Hub-and-Spoke Layout
       Hub (Reasoning) at center, spokes radiate outward
       Direction changes create TIDAL density shifts (AD-F-017)
       ═══════════════════════════════════════════════════════════════════════ */
    .choreography-hub {
      background: var(--color-zone-dense);
      border: 3px solid var(--color-border);
      padding: var(--space-8);
      margin: var(--space-8) 0;
    }

    .spoke {
      margin: var(--space-8) 0;
      padding-left: var(--space-6);
      border-left: 3px solid var(--color-border);
    }

    .spoke-header {
      font-family: var(--font-display);
      font-size: var(--type-subsection);
      font-style: italic;
      color: var(--color-text);
      margin-bottom: var(--space-4);
    }

    /* Spoke transitions: direction change = density shift */
    .spoke-transition {
      margin: var(--space-4) 0;
      padding: var(--space-2) 0;
      border-top: 1px solid var(--color-border);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       SECTION TITLES -- Confidence Level Headers
       ═══════════════════════════════════════════════════════════════════════ */
    .section-title {
      font-family: var(--font-display);
      font-size: var(--type-section);
      color: var(--color-text);
      margin-bottom: var(--space-4);
    }

    .confidence-badge {
      font-family: var(--font-body);
      font-weight: 600;
      font-size: var(--type-meta);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      display: inline-block;
      padding: var(--space-1) var(--space-3);
      border: 1px solid var(--color-border);
      margin-bottom: var(--space-3);
    }

    .confidence-badge--established { color: var(--accent-green); border-color: var(--accent-green); }
    .confidence-badge--probable { color: var(--accent-blue); border-color: var(--accent-blue); }
    .confidence-badge--speculative { color: var(--accent-amber); border-color: var(--accent-amber); }
    .confidence-badge--open { color: var(--accent-coral); border-color: var(--accent-coral); }

    /* ═══════════════════════════════════════════════════════════════════════
       FOOTER -- Required (C-02), 3px border-top (C-04)
       ═══════════════════════════════════════════════════════════════════════ */
    .page-footer {
      border-top: 3px solid var(--color-border);
      padding: var(--space-8);
      margin-top: var(--space-16);
    }

    .footer-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: var(--space-8);
    }

    .footer-col {
      flex: 1;
    }

    .footer-label {
      font-family: var(--font-body);
      font-weight: 600;
      font-size: var(--type-meta);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-2);
    }

    .footer-value {
      font-size: var(--type-body);
      color: var(--color-text);
      line-height: 1.7;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       RESPONSIVE -- 768px collapse (C-25)
       ═══════════════════════════════════════════════════════════════════════ */
    @media (max-width: 768px) {
      .page-header {
        padding: var(--space-8) var(--space-4);
      }

      .header-title {
        font-size: 1.75rem;
      }

      .page-container {
        padding: var(--space-8) var(--space-4);
      }

      .callout-essence {
        max-width: 100%;
      }

      .reasoning-columns {
        flex-direction: column;
      }

      .stratum-established,
      .stratum-probable,
      .stratum-speculative,
      .stratum-open {
        padding-left: var(--space-4);
      }

      .footer-inner {
        flex-direction: column;
      }

      .spoke {
        padding-left: var(--space-4);
      }
    }
  </style>
</head>

<body>
  <!-- Skip link -- WCAG compliance -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- ═══════════════════════════════════════════════════════════════════════
       HEADER -- Full-bleed dark with 3px #E83025 bottom border
       ═══════════════════════════════════════════════════════════════════════ -->
  <header class="page-header">
    <div class="header-inner">
      <div class="header-meta">EXPLORATION CD-004 &mdash; COMBINATION: ESSENCE AS BACKGROUND</div>
      <h1 class="header-title">Database Architecture Decisions: From Proven Patterns to Emerging Approaches</h1>
      <p class="header-subtitle">
        A confidence-graded exploration of database paradigms. Established patterns are stated with
        authority. Probable patterns are argued with evidence. Speculative patterns are offered as
        questions. An ambient philosophical voice weaves through every layer, asking: what does the
        data want to become?
      </p>
    </div>
  </header>

  <!-- ═══════════════════════════════════════════════════════════════════════
       MAIN CONTENT
       ═══════════════════════════════════════════════════════════════════════ -->
  <main id="main-content">
    <div class="page-container">

      <!-- ═════════════════════════════════════════════════════════════════
           SPIRAL SECTION: CONFIDENCE STRATA
           Outermost ring = ESTABLISHED (4px, 24px)
           Middle ring = PROBABLE (3px, 32px)
           Inner ring = SPECULATIVE (1px, 48px)
           Core = OPEN QUESTION (64px breathing)
           ═════════════════════════════════════════════════════════════════ -->

      <!-- ─────────────────────────────────────────────────────────────────
           STRATUM 1: ESTABLISHED (Outermost Ring)
           4px border, 24px spacing, narrow Essence = TIDAL dense
           Applying: AD-F-013 (angular spiral = geological strata)
           Applying: AD-F-014 (border-weight gradient 4/3/1)
           Applying: S3 (first component = Essence, sets philosophical tone)
           ───────────────────────────────────────────────────────────────── -->

      <section aria-label="Established Confidence Tier -- Proven Database Patterns">
        <span class="confidence-badge confidence-badge--established">Established</span>
        <h2 class="section-title">Proven Patterns: The Bedrock</h2>

        <!-- Essence #1 (Ambient): Sets the philosophical tone per S3 -->
        <div class="callout-essence" role="complementary" aria-label="Essence reflection on foundations">
          <div class="callout-label">Essence</div>
          <div class="callout-body">
            Every architecture stands on decisions made decades ago. The relational model endures
            not because it is new, but because it is true.
          </div>
        </div>

        <div class="stratum-established">

          <p>
            Relational databases remain the foundation of production data infrastructure. After fifty
            years, the relational model's core insight &mdash; data as mathematical relations, queried
            through declarative algebra &mdash; has proven more durable than any alternative. PostgreSQL,
            MySQL, SQL Server, and Oracle serve the overwhelming majority of transactional workloads
            worldwide.
          </p>

          <p>
            This is not inertia. The relational model's longevity stems from a specific technical
            property: <strong>ACID transactions</strong> provide the strongest available guarantee
            that data will remain consistent under concurrent access. When you need to know that a
            bank transfer either completes fully or rolls back entirely, no weaker guarantee suffices.
          </p>

          <!-- Info Callout: Context for ACID (Light/Fast) -->
          <div class="callout-info" role="note" aria-label="ACID transaction properties">
            <div class="callout-label">Context</div>
            <div class="callout-body">
              ACID stands for Atomicity, Consistency, Isolation, Durability. These four properties
              guarantee that database transactions are processed reliably. Modern PostgreSQL provides
              MVCC (Multi-Version Concurrency Control) to achieve isolation without locking readers.
            </div>
          </div>

          <!-- Code Block: ACID transaction (Heavy/Slow -- full width = TIDAL sparse) -->
          <div class="code-block" role="group" aria-label="SQL transaction example demonstrating ACID">
            <span class="code-label">SQL -- ACID Transaction</span>
            <pre><code><span class="cmt">-- ACID transaction: atomic transfer between accounts</span>
<span class="kw">BEGIN</span> <span class="kw">TRANSACTION</span><span class="punc">;</span>

<span class="cmt">-- Read current balances (ISOLATION: MVCC snapshot)</span>
<span class="kw">SELECT</span> balance <span class="kw">FROM</span> accounts
  <span class="kw">WHERE</span> id <span class="punc">=</span> <span class="num">1001</span> <span class="kw">FOR UPDATE</span><span class="punc">;</span>

<span class="cmt">-- Debit source (ATOMICITY: both succeed or neither)</span>
<span class="kw">UPDATE</span> accounts
  <span class="kw">SET</span> balance <span class="punc">=</span> balance <span class="punc">-</span> <span class="num">500.00</span>
  <span class="kw">WHERE</span> id <span class="punc">=</span> <span class="num">1001</span><span class="punc">;</span>

<span class="cmt">-- Credit destination</span>
<span class="kw">UPDATE</span> accounts
  <span class="kw">SET</span> balance <span class="punc">=</span> balance <span class="punc">+</span> <span class="num">500.00</span>
  <span class="kw">WHERE</span> id <span class="punc">=</span> <span class="num">1002</span><span class="punc">;</span>

<span class="cmt">-- DURABILITY: once committed, survives crash</span>
<span class="kw">COMMIT</span><span class="punc">;</span></code></pre>
          </div>

          <!-- Tip Callout: after heavy Code (Light/Fast -- avoids Orphaned Heavy A4) -->
          <div class="callout-tip" role="note" aria-label="Tip about normalized schemas">
            <div class="callout-label">Tip</div>
            <div class="callout-body">
              Normalized schemas (3NF and beyond) eliminate data redundancy at the cost of join complexity.
              For transactional systems, this trade-off is almost always correct. Denormalize only at
              read-heavy query boundaries, not at the storage layer.
            </div>
          </div>

          <!-- Task Component: Established-tier actions (Medium/Fast) -->
          <div class="task-component" role="group" aria-label="Established tier action items">
            <div class="task-header">Action Items: Established Patterns</div>
            <ul class="task-list">
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Verify all production tables are at least 3NF before optimizing</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Audit transaction isolation levels across connection pools</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Confirm foreign key constraints are enforced, not just documented</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Review index coverage for top-10 query paths</li>
            </ul>
          </div>

        </div>
      </section>

      <!-- ─────────────────────────────────────────────────────────────────
           CONFIDENCE GAP: Established to Probable
           Moderate spacing (32px) per AD-F-015
           ───────────────────────────────────────────────────────────────── -->
      <div class="confidence-gap-moderate" aria-hidden="true"></div>

      <!-- ─────────────────────────────────────────────────────────────────
           STRATUM 2: PROBABLE (Middle Ring)
           3px border, 32px spacing, wider content = TIDAL moderate
           Applying: Reasoning component (Heavy/Slow -- deliberation)
           ───────────────────────────────────────────────────────────────── -->

      <section aria-label="Probable Confidence Tier -- Document Stores and Event Sourcing">
        <span class="confidence-badge confidence-badge--probable">Probable</span>
        <h2 class="section-title">Probable Patterns: Argued with Evidence</h2>

        <!-- Essence #2 (Ambient): Philosophical voice at tier boundary -->
        <div class="callout-essence" role="complementary" aria-label="Essence reflection on probability">
          <div class="callout-label">Essence</div>
          <div class="callout-body">
            Between certainty and speculation lies the territory of reasoned judgment.
            These patterns work &mdash; the question is when, and for whom.
          </div>
        </div>

        <div class="stratum-probable">

          <p>
            Document databases like MongoDB and DynamoDB have moved beyond their early "NoSQL hype"
            phase into legitimate production niches. The key insight is not that documents replace
            relations, but that some data is genuinely hierarchical. A product catalog entry with
            nested variants, attributes, and media assets maps more naturally to a JSON document
            than to seven normalized tables with complex joins.
          </p>

          <p>
            Event sourcing and CQRS (Command Query Responsibility Segregation) represent a more
            fundamental architectural shift. Instead of storing current state, you store the
            sequence of events that produced that state. This gives you an immutable audit trail,
            temporal queries ("what was the state at time T?"), and the ability to replay history
            to build new projections.
          </p>

          <!-- Code Block: Event sourcing (Heavy/Slow -- full width = TIDAL sparse) -->
          <div class="code-block" role="group" aria-label="Event sourcing code example">
            <span class="code-label">TypeScript -- Event Sourcing Pattern</span>
            <pre><code><span class="cmt">// Event sourcing: store events, derive state</span>
<span class="kw">interface</span> <span class="typ">DomainEvent</span> <span class="punc">{</span>
  <span class="fn">eventId</span><span class="punc">:</span> <span class="typ">string</span><span class="punc">;</span>
  <span class="fn">aggregateId</span><span class="punc">:</span> <span class="typ">string</span><span class="punc">;</span>
  <span class="fn">timestamp</span><span class="punc">:</span> <span class="typ">Date</span><span class="punc">;</span>
  <span class="fn">type</span><span class="punc">:</span> <span class="typ">string</span><span class="punc">;</span>
  <span class="fn">payload</span><span class="punc">:</span> <span class="typ">Record</span><span class="punc">&lt;</span><span class="typ">string</span><span class="punc">,</span> <span class="typ">unknown</span><span class="punc">&gt;;</span>
<span class="punc">}</span>

<span class="cmt">// Append-only event store</span>
<span class="kw">async function</span> <span class="fn">appendEvent</span><span class="punc">(</span>
  <span class="fn">store</span><span class="punc">:</span> <span class="typ">EventStore</span><span class="punc">,</span>
  <span class="fn">event</span><span class="punc">:</span> <span class="typ">DomainEvent</span>
<span class="punc">):</span> <span class="typ">Promise</span><span class="punc">&lt;</span><span class="typ">void</span><span class="punc">&gt;</span> <span class="punc">{</span>
  <span class="kw">await</span> store<span class="punc">.</span><span class="fn">append</span><span class="punc">(</span>event<span class="punc">.</span>aggregateId<span class="punc">,</span> event<span class="punc">);</span>
<span class="punc">}</span>

<span class="cmt">// Rebuild current state from events</span>
<span class="kw">function</span> <span class="fn">rehydrate</span><span class="punc">(</span>
  <span class="fn">events</span><span class="punc">:</span> <span class="typ">DomainEvent</span><span class="punc">[]</span>
<span class="punc">):</span> <span class="typ">AccountState</span> <span class="punc">{</span>
  <span class="kw">return</span> events<span class="punc">.</span><span class="fn">reduce</span><span class="punc">(</span><span class="fn">applyEvent</span><span class="punc">,</span> <span class="fn">initialState</span><span class="punc">());</span>
<span class="punc">}</span></code></pre>
          </div>

          <!-- Info Callout: after Code (Light/Fast -- buffers before Reasoning) -->
          <div class="callout-info" role="note" aria-label="Context on CQRS pattern">
            <div class="callout-label">Context</div>
            <div class="callout-body">
              CQRS separates read models from write models. The write side processes commands and
              emits events. The read side subscribes to events and builds optimized projections.
              This eliminates the tension between normalized writes and denormalized reads.
            </div>
          </div>

          <!-- Reasoning Component: Deliberation on document vs relational (Heavy/Slow) -->
          <div class="reasoning" role="group" aria-label="Reasoning about document vs relational choice">
            <div class="reasoning-header">When to Choose Documents Over Relations?</div>
            <div class="reasoning-columns">
              <div class="reasoning-col">
                <h4>Arguments For Documents</h4>
                <ul>
                  <li>Hierarchical data maps naturally to nested documents</li>
                  <li>Schema flexibility accelerates early-stage iteration</li>
                  <li>Read performance improves when related data co-locates</li>
                  <li>Horizontal scaling via sharding is architecturally native</li>
                </ul>
              </div>
              <div class="reasoning-col">
                <h4>Arguments For Relations</h4>
                <ul>
                  <li>Cross-entity queries require no denormalization maintenance</li>
                  <li>ACID transactions protect complex business invariants</li>
                  <li>Schema enforcement catches data quality issues at write time</li>
                  <li>SQL ecosystem (tooling, expertise, optimization) is unmatched</li>
                </ul>
              </div>
            </div>
            <p class="reasoning-summary">
              <strong>Resolution:</strong> Documents excel for bounded, hierarchical domains (catalogs,
              user profiles, content management). Relations excel for interconnected, transactional
              domains (finance, inventory, workflow). The question is not which is "better" but which
              matches your data's natural shape.
            </p>
          </div>

          <!-- Tip Callout: after heavy Reasoning (avoids Orphaned Heavy A4) -->
          <div class="callout-tip" role="note" aria-label="Tip about event sourcing complexity">
            <div class="callout-label">Tip</div>
            <div class="callout-body">
              Event sourcing adds operational complexity. Before adopting it, verify that you actually
              need temporal queries, audit trails, or event replay. If your domain is CRUD-shaped,
              event sourcing is over-engineering.
            </div>
          </div>

          <!-- Task Component: Probable-tier actions (Medium/Fast -- ends section per S4) -->
          <div class="task-component" role="group" aria-label="Probable tier action items">
            <div class="task-header">Action Items: Probable Patterns</div>
            <ul class="task-list">
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Identify bounded contexts where documents outperform joins</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Prototype event sourcing on one non-critical aggregate</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Measure read model rebuild time for event replay viability</li>
            </ul>
          </div>

        </div>
      </section>

      <!-- ─────────────────────────────────────────────────────────────────
           CONFIDENCE GAP: Probable to Speculative
           Breathing spacing (48px) per AD-F-015
           ───────────────────────────────────────────────────────────────── -->
      <div class="confidence-gap-breathing" aria-hidden="true"></div>

      <!-- ─────────────────────────────────────────────────────────────────
           STRATUM 3: SPECULATIVE (Inner Ring)
           1px border, 48px spacing, narrow Essence = TIDAL compression
           Applying: Speculative content with lower confidence presentation
           ───────────────────────────────────────────────────────────────── -->

      <section aria-label="Speculative Confidence Tier -- Emerging Database Approaches">
        <span class="confidence-badge confidence-badge--speculative">Speculative</span>
        <h2 class="section-title">Speculative Patterns: Offered as Exploration</h2>

        <!-- Essence #3 (Ambient): Philosophical voice at speculative boundary -->
        <div class="callout-essence" role="complementary" aria-label="Essence reflection on uncertainty">
          <div class="callout-label">Essence</div>
          <div class="callout-body">
            The frontier is uncomfortable because it asks us to hold uncertainty
            without resolving it. What might the next decade demand?
          </div>
        </div>

        <div class="stratum-speculative">

          <p>
            Edge databases &mdash; data storage and query engines deployed at the network
            edge, co-located with users &mdash; challenge the centralized data center model.
            Technologies like Cloudflare D1, Turso (libSQL), and CockroachDB's serverless tier
            suggest a future where the database is not a destination but a presence: available
            wherever the application runs.
          </p>

          <p>
            The implications are architectural. If your database is within 50ms of every user
            rather than 200ms, you can afford more round trips. API designs that batch queries
            to minimize latency become unnecessary. The constraint shifts from "minimize database
            calls" to "minimize replication lag."
          </p>

          <!-- Code Block: Edge database (Heavy/Slow -- full width = TIDAL sparse) -->
          <div class="code-block" role="group" aria-label="Edge database configuration example">
            <span class="code-label">TypeScript -- Edge Database Query</span>
            <pre><code><span class="cmt">// Edge-deployed database: query at the edge</span>
<span class="kw">import</span> <span class="punc">{</span> <span class="fn">createClient</span> <span class="punc">}</span> <span class="kw">from</span> <span class="str">'@libsql/client'</span><span class="punc">;</span>

<span class="kw">const</span> db <span class="punc">=</span> <span class="fn">createClient</span><span class="punc">({</span>
  <span class="fn">url</span><span class="punc">:</span> <span class="str">'libsql://mydb-user.turso.io'</span><span class="punc">,</span>
  <span class="fn">authToken</span><span class="punc">:</span> process<span class="punc">.</span>env<span class="punc">.</span><span class="fn">TURSO_AUTH_TOKEN</span><span class="punc">,</span>
<span class="punc">});</span>

<span class="cmt">// Query resolves against nearest replica</span>
<span class="kw">export async function</span> <span class="fn">getUserProfile</span><span class="punc">(</span>
  <span class="fn">userId</span><span class="punc">:</span> <span class="typ">string</span>
<span class="punc">)</span> <span class="punc">{</span>
  <span class="kw">const</span> result <span class="punc">=</span> <span class="kw">await</span> db<span class="punc">.</span><span class="fn">execute</span><span class="punc">({</span>
    <span class="fn">sql</span><span class="punc">:</span> <span class="str">'SELECT * FROM profiles WHERE id = ?'</span><span class="punc">,</span>
    <span class="fn">args</span><span class="punc">:</span> <span class="punc">[</span>userId<span class="punc">]</span><span class="punc">,</span>
  <span class="punc">});</span>
  <span class="kw">return</span> result<span class="punc">.</span>rows<span class="punc">[</span><span class="num">0</span><span class="punc">];</span>
<span class="punc">}</span></code></pre>
          </div>

          <!-- Info Callout: after Code, before next heavy content -->
          <div class="callout-info" role="note" aria-label="Context about AI-native data structures">
            <div class="callout-label">Context</div>
            <div class="callout-body">
              AI-native data structures &mdash; vector databases like Pinecone, Weaviate, and pgvector &mdash;
              store embeddings rather than rows. They answer the question "what is similar to this?"
              rather than "what matches this predicate?" This is a fundamentally different query paradigm.
            </div>
          </div>

          <p>
            Graph-first architectures (Neo4j, Amazon Neptune, Apache TinkerPop) model data as
            nodes and edges rather than rows and columns. For domains where relationships are the
            primary data &mdash; social networks, fraud detection, recommendation engines, knowledge
            graphs &mdash; the relational model's join-based approach to traversal becomes
            exponentially expensive at depth. Graph databases make 5-hop traversals constant-time.
          </p>

          <!-- Task Component: Speculative-tier actions (Medium/Fast -- narrow, compressed) -->
          <div class="task-component" role="group" aria-label="Speculative tier action items">
            <div class="task-header">Action Items: Speculative Patterns</div>
            <ul class="task-list">
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Deploy a read-replica edge database for one latency-sensitive endpoint</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Benchmark vector search against full-text search for a semantic query</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Map one domain's relationship density to evaluate graph database fit</li>
            </ul>
          </div>

        </div>
      </section>

      <!-- ─────────────────────────────────────────────────────────────────
           CONFIDENCE GAP: Speculative to Open
           Wide breathing (64px) per AD-F-015
           ───────────────────────────────────────────────────────────────── -->
      <div class="confidence-gap-wide" aria-hidden="true"></div>

      <!-- ─────────────────────────────────────────────────────────────────
           STRATUM 4: OPEN QUESTION (Core)
           No border (breathing zone), 64px spacing
           This is the spiral's center: maximum uncertainty, maximum space
           ───────────────────────────────────────────────────────────────── -->

      <section aria-label="Open Question Tier -- Beyond the Relational/NoSQL Divide">
        <span class="confidence-badge confidence-badge--open">Open Question</span>
        <h2 class="section-title">What Comes After the Divide?</h2>

        <!-- Essence #4 (Ambient): The deepest philosophical voice -->
        <div class="callout-essence" role="complementary" aria-label="Essence reflection on the open question">
          <div class="callout-label">Essence</div>
          <div class="callout-body">
            Perhaps the question was always wrong. Not relational or document, but:
            what shape does your truth take?
          </div>
        </div>

        <div class="stratum-open">

          <p>
            The relational/NoSQL divide assumes a binary choice. But the emerging reality is
            convergence. PostgreSQL now supports JSON documents natively. MongoDB added
            multi-document ACID transactions. CockroachDB distributes SQL globally. The
            categories are dissolving.
          </p>

          <p>
            The deeper question is whether the data model abstraction itself is the right one.
            We model data as tables, documents, graphs, or vectors &mdash; but these are all
            projections of the same underlying reality. A customer is simultaneously a row in
            a table, a document with nested orders, a node in a social graph, and a vector in
            preference space. No single model captures the full picture.
          </p>

          <p>
            What would a database look like that treats these as views of a single substrate?
            Not a "multi-model database" (which is usually one model with adapters bolted on),
            but a fundamentally unified storage engine that natively supports relational,
            hierarchical, graph, and vector queries on the same data?
          </p>

          <!-- Challenge Callout: genuine open question (no resolution per S4) -->
          <div class="callout-challenge" role="note" aria-label="Challenge about future database architecture">
            <div class="callout-label">Challenge</div>
            <div class="callout-body">
              Design the schema for a system that must simultaneously serve transactional queries
              (ACID), full-text search, graph traversal, and vector similarity &mdash; without
              synchronizing four separate databases. What primitives would the unified engine need?
            </div>
          </div>

        </div>
      </section>

      <!-- ═════════════════════════════════════════════════════════════════
           BREATHING TRANSITION: Spiral to Choreography
           This is a Breathing transition (AD-F-025: Spiral<->Choreography)
           Upgraded to Double Breathing at CD scale (Section 18.3)
           80px gap + 3px structural divider + transitional Essence
           Applying: CD-F-006 (breathing transition validated)
           ═════════════════════════════════════════════════════════════════ -->

      <div class="breathing-transition" role="separator" aria-label="Transition from confidence layers to decision choreography">
        <div class="transition-essence">
          The strata have been read. Now the question turns practical:
          how do you choose among these layers?
        </div>
      </div>

      <!-- ═════════════════════════════════════════════════════════════════
           CHOREOGRAPHY SECTION: Reader Sequence Through Decisions
           Hub-and-spoke with Reasoning at center
           Direction changes create TIDAL density shifts (AD-F-017)
           Applying: AD-F-017 (direction change = density change)
           Applying: AD-F-024 (sequential, not simultaneous)
           ═════════════════════════════════════════════════════════════════ -->

      <section aria-label="Decision Choreography -- Sequencing Through Architectural Choices">
        <h2 class="section-title">Decision Choreography</h2>

        <p>
          The confidence strata above present information in layers of certainty. This section
          changes direction: instead of grading confidence, it choreographs the decision-making
          process itself. Each spoke radiates from a central deliberation, guiding you through
          the architectural choices that your specific context demands.
        </p>

        <!-- Essence #5 (Ambient): Bridges the Spiral's knowledge into Choreography's action -->
        <div class="callout-essence" role="complementary" aria-label="Essence reflection on decision-making">
          <div class="callout-label">Essence</div>
          <div class="callout-body">
            Architecture is decision-making practiced over time.
            Each choice closes one door and opens three more.
          </div>
        </div>

        <!-- HUB: Central Reasoning Component -->
        <div class="choreography-hub" role="group" aria-label="Decision hub -- central reasoning">
          <div class="reasoning">
            <div class="reasoning-header">Central Question: What Drives Your Database Choice?</div>
            <div class="reasoning-columns">
              <div class="reasoning-col">
                <h4>Data Shape Drivers</h4>
                <ul>
                  <li>Is your data inherently relational (many-to-many)?</li>
                  <li>Is your data hierarchical (nested, self-contained)?</li>
                  <li>Is your data a graph (relationships are the data)?</li>
                  <li>Is your data temporal (events, not state)?</li>
                </ul>
              </div>
              <div class="reasoning-col">
                <h4>Operational Drivers</h4>
                <ul>
                  <li>What are your consistency requirements (strong vs eventual)?</li>
                  <li>What are your latency requirements (50ms vs 500ms)?</li>
                  <li>What is your write volume (100/s vs 100,000/s)?</li>
                  <li>What is your team's expertise (SQL fluency)?</li>
                </ul>
              </div>
            </div>
            <p class="reasoning-summary">
              <strong>The hub insight:</strong> No single axis determines the answer. Data shape
              narrows the candidates. Operational constraints choose the winner. Team expertise
              determines whether the choice will succeed in practice.
            </p>
          </div>
        </div>

        <!-- SPOKE 1: Consistency Requirements -->
        <div class="spoke" role="group" aria-label="Spoke -- consistency requirements path">
          <h3 class="spoke-header">Spoke: Consistency Requirements</h3>

          <p>
            If your domain requires strict consistency &mdash; financial transactions, inventory
            management, regulatory compliance &mdash; your database must provide serializable
            isolation or equivalent guarantees. This narrows the field to relational databases
            (PostgreSQL, CockroachDB) or event sourcing with compensating transactions.
          </p>

          <!-- Code Block: Consistency example -->
          <div class="code-block" role="group" aria-label="Serializable isolation code example">
            <span class="code-label">SQL -- Serializable Isolation</span>
            <pre><code><span class="cmt">-- Serializable: prevents phantom reads</span>
<span class="kw">SET TRANSACTION ISOLATION LEVEL SERIALIZABLE</span><span class="punc">;</span>

<span class="kw">SELECT</span> <span class="fn">count</span><span class="punc">(*)</span> <span class="kw">FROM</span> inventory
  <span class="kw">WHERE</span> product_id <span class="punc">=</span> <span class="num">42</span>
  <span class="kw">AND</span> quantity <span class="punc">&gt;</span> <span class="num">0</span><span class="punc">;</span>

<span class="cmt">-- If count > 0, safely reserve</span>
<span class="kw">UPDATE</span> inventory
  <span class="kw">SET</span> quantity <span class="punc">=</span> quantity <span class="punc">-</span> <span class="num">1</span>
  <span class="kw">WHERE</span> product_id <span class="punc">=</span> <span class="num">42</span><span class="punc">;</span>

<span class="kw">COMMIT</span><span class="punc">;</span></code></pre>
          </div>

          <!-- Tip after Code (avoids Orphaned Heavy) -->
          <div class="callout-tip" role="note" aria-label="Tip about eventual consistency">
            <div class="callout-label">Tip</div>
            <div class="callout-body">
              Eventual consistency is not "broken consistency." It is a deliberate trade-off:
              you accept temporary staleness in exchange for availability and partition tolerance.
              Many domains (social feeds, analytics, recommendations) thrive under eventual
              consistency.
            </div>
          </div>
        </div>

        <div class="spoke-transition" aria-hidden="true"></div>

        <!-- SPOKE 2: Scale and Latency -->
        <div class="spoke" role="group" aria-label="Spoke -- scale and latency path">
          <h3 class="spoke-header">Spoke: Scale and Latency Constraints</h3>

          <p>
            When write throughput exceeds what a single node can handle (typically 10,000-50,000
            writes per second depending on complexity), you need horizontal scaling. This is where
            the relational model's traditional weakness emerges: cross-shard transactions are
            expensive and complex.
          </p>

          <p>
            Document databases were designed for this scenario. MongoDB's sharding distributes
            documents by shard key. DynamoDB partitions by hash key. The trade-off is that
            cross-partition queries become expensive &mdash; you must design your data model
            around access patterns, not around the data's inherent relationships.
          </p>

          <!-- Info Callout: latency budget -->
          <div class="callout-info" role="note" aria-label="Context about latency budgets">
            <div class="callout-label">Context</div>
            <div class="callout-body">
              A typical web request has a 200ms budget. If your database is 150ms away, you get
              one round trip. If it is 5ms away (edge deployment), you get 40 round trips. This
              fundamentally changes API design: you can afford to be chatty when latency is low.
            </div>
          </div>
        </div>

        <div class="spoke-transition" aria-hidden="true"></div>

        <!-- SPOKE 3: Team and Ecosystem -->
        <div class="spoke" role="group" aria-label="Spoke -- team expertise path">
          <h3 class="spoke-header">Spoke: Team Expertise and Ecosystem</h3>

          <p>
            The best database is the one your team can operate. A PostgreSQL instance that your
            team understands deeply will outperform a theoretically superior alternative that
            nobody knows how to tune, monitor, or debug. Expertise is a first-class architectural
            constraint.
          </p>

          <p>
            Consider the ecosystem beyond the database itself: ORMs, migration tools, monitoring
            dashboards, backup procedures, disaster recovery playbooks, hiring pools. SQL has the
            deepest ecosystem by an order of magnitude. This is not a technical argument; it is an
            organizational one. But organizational arguments often matter more than technical ones.
          </p>

          <!-- Essence #6 (Ambient): Closing philosophical reflection for choreography -->
          <div class="callout-essence" role="complementary" aria-label="Essence reflection on team constraints">
            <div class="callout-label">Essence</div>
            <div class="callout-body">
              Tools serve teams, not the reverse.
              The architecture that fits your hands is the right architecture.
            </div>
          </div>

          <!-- Task Component: Resolution actions per S4 -->
          <div class="task-component" role="group" aria-label="Decision choreography action items">
            <div class="task-header">Action Items: Decision Implementation</div>
            <ul class="task-list">
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Map each domain entity to its natural data shape (relational/hierarchical/graph)</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Rank your top-3 operational constraints (consistency, latency, throughput)</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Survey team expertise levels across candidate databases</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Build a 2-week proof-of-concept with the top candidate before committing</li>
              <li><span class="task-checkbox" role="checkbox" aria-checked="false" aria-label="Task checkbox"></span> Document the decision and its reasoning for future teams</li>
            </ul>
          </div>
        </div>

      </section>

      <!-- ═════════════════════════════════════════════════════════════════
           CLOSING SECTION: Challenge + Final Essence Reflection
           ═════════════════════════════════════════════════════════════════ -->
      <section aria-label="Closing reflection and challenge" style="margin-top: var(--space-16);">
        <h2 class="section-title">The Enduring Question</h2>

        <p>
          This exploration began in the bedrock of proven patterns and spiraled inward through
          probability, speculation, and open questions. The confidence gradient was the map. The
          choreography was the compass. Neither alone is sufficient &mdash; the map shows what
          exists, the compass shows which way to walk.
        </p>

        <div class="callout-challenge" role="note" aria-label="Closing challenge for the reader">
          <div class="callout-label">Challenge</div>
          <div class="callout-body">
            Take one production system you know well. Classify each of its data stores using the
            four confidence tiers: which patterns are established (you would bet on them), probable
            (you would argue for them), speculative (you are curious about them), and open (you
            genuinely do not know the answer)? Does the classification surprise you?
          </div>
        </div>

        <!-- Essence #7 (Ambient): Final closing voice -- the ambient presence completes -->
        <div class="callout-essence" role="complementary" aria-label="Final Essence reflection">
          <div class="callout-label">Essence</div>
          <div class="callout-body">
            The architecture is never finished. It is a living conversation between what
            we know and what the data is becoming.
          </div>
        </div>
      </section>

      <!-- ═════════════════════════════════════════════════════════════════
           RESEARCH APPLICATION RECORD (RAR)
           Full inline RAR as per showcase/CLAUDE.md requirements
           ═════════════════════════════════════════════════════════════════ -->
      <section aria-label="Research Application Record" style="margin-top: var(--space-16);">
        <h2 class="section-title">Research Application Record</h2>

        <div style="font-size: var(--type-code); font-family: var(--font-mono); line-height: 1.6; background: var(--color-border-subtle); padding: var(--space-6) var(--space-8); border: 1px solid var(--color-border);">

          <p style="max-width: none; margin-bottom: var(--space-4); font-family: var(--font-body); font-weight: 600;">
            Research Identified as Applicable
          </p>
          <p style="max-width: none;">R5-H2 (contrast creates harmony), R5-H3 (shared visual anchors),
          R5-T2 (velocity mismatch), R5-T3 (semantic dissonance), R5-N1 (stack not nest),
          R5-G1 (semantic proximity), R5-G2 (container signal), R5-G3 (weight balance),
          R5-S2 (density wave sequencing), R5-S3 (first component sets tone),
          R5-S4 (resolution component), R5-S5 (teaching moment), R5-A5 (temperature whiplash)</p>

          <p style="max-width: none; margin-bottom: var(--space-4); margin-top: var(--space-6); font-family: var(--font-body); font-weight: 600;">
            Research Actually Applied
          </p>
          <p style="max-width: none;">R5-S3: Essence callout as first component (sets philosophical tone).
          R5-T2: FAST callouts (Info, Tip) interleaved between SLOW components (Code, Reasoning).
          R5-T3: Neutral Code buffers between Warm Essence and Cold Task throughout.
          R5-G3: 1-2 light components after every heavy component.
          R5-G1: Spacing gradient 24px/32px/48px/64px matches confidence gradient.
          R5-S4: Task components end each confidence section (resolution before tension).
          R5-A5: Zero direct Warm-to-Cold transitions.</p>

          <p style="max-width: none; margin-bottom: var(--space-4); margin-top: var(--space-6); font-family: var(--font-body); font-weight: 600;">
            AD-F Applied
          </p>
          <p style="max-width: none;">AD-F-013: Angular spiral realized as border-weight gradient strata.
          AD-F-014: 4px/3px/1px border progression skipping 2px.
          AD-F-015: Confidence-proportional spacing (24/32/48/64px).
          AD-F-017: Choreography direction changes create TIDAL density shifts.
          AD-F-023: ATTENTION TOPOLOGY governs component placement across confidence layers.
          AD-F-024: Sequential axis patterns (Spiral then Choreography via scroll).
          AD-F-025: Spiral to Choreography = Breathing transition (80px + 3px dividers).</p>

          <p style="max-width: none; margin-bottom: var(--space-4); margin-top: var(--space-6); font-family: var(--font-body); font-weight: 600;">
            Wave 1 Findings Applied
          </p>
          <p style="max-width: none;">CD-F-001: FAST callouts interleaved between consecutive SLOW pairs validated.
          CD-F-006: 48px+ breathing transition with structural borders confirmed effective.
          CD-F-008: Spiral confidence strata with border-weight gradient validated.</p>

          <p style="max-width: none; margin-bottom: var(--space-4); margin-top: var(--space-6); font-family: var(--font-body); font-weight: 600;">
            Anti-Patterns Avoided
          </p>
          <p style="max-width: none;">Semi-Transparent Backgrounds: Zero rgba() with alpha &lt; 1.0. All backgrounds fully opaque.
          Depth Illusion: Zero z-index (except skip-link), zero box-shadow, zero gradients-as-depth.
          Temperature Whiplash (A5): Neutral Code/Info buffers all Warm-Cold transitions.
          Essence Fatigue (T1): Max 1 Essence per confidence section. 7 total across page.
          Orphaned Heavy (A4): Every Code/Reasoning followed by Tip/Info callout.
          2px Borders: Zero instances. All borders 1px, 3px, or 4px.
          Traffic Light: Zero adjacent Tip+Gotcha pairings.</p>

          <p style="max-width: none; margin-bottom: var(--space-4); margin-top: var(--space-6); font-family: var(--font-body); font-weight: 600;">
            Soul Verification
          </p>
          <p style="max-width: none;">border-radius: 0 everywhere? YES (global * rule + :root token)
          box-shadow: none everywhere? YES (zero instances)
          Colors correct? YES (locked palette only, 5 accent colors)
          Typography correct? YES (3 fonts: Instrument Serif display, Inter body, JetBrains Mono code)
          Spacing correct? YES (all values from --space-* tokens)
          Opacity === 1 on all persistent elements? YES (zero semi-transparent backgrounds)</p>

        </div>
      </section>

    </div>
  </main>

  <!-- ═══════════════════════════════════════════════════════════════════════
       FOOTER -- Required (C-02), 3px border-top (C-04)
       ═══════════════════════════════════════════════════════════════════════ -->
  <footer class="page-footer">
    <div class="footer-inner">
      <div class="footer-col">
        <div class="footer-label">Exploration</div>
        <div class="footer-value">CD-004: Essence as Background</div>
      </div>
      <div class="footer-col">
        <div class="footer-label">Combination</div>
        <div class="footer-value">TIDAL + CONFIDENCE + SPIRAL + CHOREOGRAPHY</div>
      </div>
      <div class="footer-col">
        <div class="footer-label">Findings</div>
        <div class="footer-value">CD-F-013 through CD-F-016</div>
      </div>
      <div class="footer-col">
        <div class="footer-label">Status</div>
        <div class="footer-value">v1 &mdash; 2026-02-11</div>
      </div>
    </div>
  </footer>

</body>
</html>

<!-- ═══════════════════════════════════════════════════════════════════════════
     FINDINGS: CD-F-013 through CD-F-016
     ═══════════════════════════════════════════════════════════════════════════ -->

<!-- CD-F-013: Ambient Essence Through Frequency, Not Depth
FINDING: Essence callouts achieve a pervasive "background" presence through
regular distribution (1 per confidence section, 7 total across page) and
italic serif typography (Soul Piece #2) without any physical depth technique.
The FONT is the ambient signal. The FREQUENCY is the presence. No opacity < 1,
no z-index stacking, no box-shadow, no gradients-as-depth were needed.
EVIDENCE: 7 Essence callouts at lines ~577, ~640, ~728, ~788, ~866, ~937, ~978.
Each uses font-family: var(--font-display); font-style: italic. All backgrounds
are fully opaque (var(--color-zone-sparse) = #FEF9F5, opacity: 1).
CHAIN: Validates K-12 constraint (ANTI-PHYSICAL ambient treatment). Extends
CD-F-001 (CRESCENDO velocity interleaving) to TIDAL context. Validates that
ambient presence can be achieved through typography alone.
-->

<!-- CD-F-014: TIDAL Width Modulation Creates Density Without Depth
FINDING: Using max-width: 60% on Essence callouts creates narrow/dense zones
that contrast with full-width Code blocks (sparse zones), producing the TIDAL
density rhythm through WIDTH VARIATION alone. Narrow = dense wisdom (Essence
philosophy compressed). Wide = sparse implementation (Code blocks expanded).
No opacity or layering needed -- width IS the density modulator.
EVIDENCE: .callout-essence { max-width: 60% } vs .code-block { full width }.
The visual rhythm alternates between 60% and 100% width across the page.
CHAIN: Validates DD-F-005 (TIDAL width variation). Extends AD-F-014 (border-
weight gradient) with a width gradient dimension. Validates that density can
be expressed through spatial width variation, consistent with the 3-way
unification (AD-F-004): width modulation IS density IS organization.
-->

<!-- CD-F-015: Confidence-Proportional Spacing IS Spiral Reading Order
FINDING: The spacing gradient (24px established -> 32px probable -> 48px
speculative -> 64px open) creates the same perceptual effect as a spiral's
increasing radius from center to perimeter. The reader encounters more
breathing room as confidence decreases, which IS the spiral's expanding
geometry expressed in vertical scrolling. Spiral reading order ENHANCES
the confidence gradient -- they are the same phenomenon.
EVIDENCE: .stratum-established { margin-bottom: 24px }, .stratum-probable
{ margin-bottom: 32px }, .stratum-speculative { margin-bottom: 48px },
.stratum-open { margin-bottom: 64px }. Border-weight gradient (4/3/1/0px)
reinforces: thicker borders = more established = tighter spacing.
CHAIN: Validates AD-F-015 (confidence-proportional spacing creates CRESCENDO
whitespace). Validates AD-F-016 (spiral reading enhances geological layering).
Demonstrates that spacing-as-confidence IS the spiral axis in 1D scrolling.
-->

<!-- CD-F-016: Breathing Transition Separates Incompatible Axis Geometries
FINDING: The Spiral-to-Choreography transition requires maximum breathing
treatment (80px + 3px structural dividers + breathing zone background) because
the two patterns have fundamentally incompatible geometries: Spiral is
centripetal (inward-contracting) while Choreography is centrifugal (outward-
radiating from hub). The breathing transition acts as a perceptual reset,
allowing the reader to switch from "layer-reading" mode to "path-following"
mode without disorientation.
EVIDENCE: .breathing-transition { margin: 80px 0; border-top/bottom: 3px solid;
background: var(--color-zone-breathing) }. Contains a transitional Essence
callout that bridges philosophical tone while acknowledging the mode switch.
CHAIN: Validates AD-F-025 (Spiral<->Choreography = Breathing). Validates
CD-F-006 (breathing transition validated). Extends to CD scale per Section
18.3 (Breathing -> Double Breathing). Confirms that axis incompatibility
requires proportionally stronger transition treatment.
-->
