/*
LIGHT SECTION — Phase 2D
Part Of: card-system/css/experiments — CSS texture experiments
Contributed To: Texture research; informed soul piece on flat design
Full Context: perceptual-audit-v2/synthesis/
*/

/**
 * Halftone Mask Treatment
 * ========================
 *
 * Creates visible halftone dots by masking the image
 * The dots should be countable at arm's length
 *
 * This is the "Visible Process" approach - you can SEE the mechanism
 */

/* ============================================================================
   Halftone Container
   ============================================================================ */

.halftone {
  position: relative;
  display: block;
  overflow: hidden;
  line-height: 0;
}

.halftone img {
  display: block;
  width: 100%;
  height: auto;
  /* Convert to grayscale first */
  filter: grayscale(100%) contrast(1.2);
}

/* ============================================================================
   Coarse Halftone (Newspaper-density)
   - Dots visible and countable
   ============================================================================ */

.halftone--coarse {
  /* Apply duotone color via background showing through mask */
  background-color: var(--halftone-shadow, #C25C4E);
}

.halftone--coarse img {
  /* The mask makes the image act like a stencil */
  mask-image: url('../../assets/patterns/halftone-dots.svg');
  mask-size: 8px 8px;
  mask-repeat: repeat;
  -webkit-mask-image: url('../../assets/patterns/halftone-dots.svg');
  -webkit-mask-size: 8px 8px;
  -webkit-mask-repeat: repeat;
}

/* ============================================================================
   Fine Halftone (Magazine-density)
   - Dots smaller, more refined
   ============================================================================ */

.halftone--fine {
  background-color: var(--halftone-shadow, #C25C4E);
}

.halftone--fine img {
  mask-image: url('../../assets/patterns/halftone-fine.svg');
  mask-size: 4px 4px;
  mask-repeat: repeat;
  -webkit-mask-image: url('../../assets/patterns/halftone-fine.svg');
  -webkit-mask-size: 4px 4px;
  -webkit-mask-repeat: repeat;
}

/* ============================================================================
   Duotone + Halftone Combined
   - Keeps color treatment AND adds visible dots
   ============================================================================ */

.halftone-duotone {
  position: relative;
  display: block;
  overflow: hidden;
  line-height: 0;
  isolation: isolate;
}

.halftone-duotone img {
  display: block;
  width: 100%;
  height: auto;
  filter: grayscale(100%) contrast(1.1) brightness(1.05);
  /* Apply halftone mask */
  mask-image: url('../../assets/patterns/halftone-dots.svg');
  mask-size: 6px 6px;
  mask-repeat: repeat;
  -webkit-mask-image: url('../../assets/patterns/halftone-dots.svg');
  -webkit-mask-size: 6px 6px;
  -webkit-mask-repeat: repeat;
}

/* Duotone color layers */
.halftone-duotone::before {
  content: "";
  position: absolute;
  inset: 0;
  background-color: #C25C4E;
  mix-blend-mode: darken;
  pointer-events: none;
  z-index: 1;
}

.halftone-duotone::after {
  content: "";
  position: absolute;
  inset: 0;
  background-color: #F5F0E8;
  mix-blend-mode: lighten;
  pointer-events: none;
  z-index: 2;
}

/* ============================================================================
   Color Variants
   ============================================================================ */

.halftone--blue {
  --halftone-shadow: #4A6FA5;
}

.halftone--green {
  --halftone-shadow: #5A7A4A;
}

.halftone--red {
  --halftone-shadow: #C25C4E;
}

.halftone--black {
  --halftone-shadow: #2A2A2A;
}

/* ============================================================================
   CSS-only Halftone (No SVG mask required)
   Uses radial-gradient for dot pattern
   ============================================================================ */

.halftone-css {
  position: relative;
  display: block;
  overflow: hidden;
  line-height: 0;
}

.halftone-css img {
  display: block;
  width: 100%;
  height: auto;
  filter: grayscale(100%) contrast(1.3);
}

.halftone-css::after {
  content: "";
  position: absolute;
  inset: 0;
  /* Radial gradient creates dots */
  background-image: radial-gradient(
    circle,
    #C25C4E 30%,
    transparent 30%
  );
  background-size: 6px 6px;
  mix-blend-mode: multiply;
  pointer-events: none;
}
