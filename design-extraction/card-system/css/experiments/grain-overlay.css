/**
 * Grain/Noise Overlay Treatment
 * ==============================
 *
 * Film grain or noise texture over duotone image
 * Creates analog/photographic warmth
 *
 * NOTE: This is NOT "visible process" in the print sense
 * Grain is more about TEXTURE than MECHANISM
 */

/* ============================================================================
   Base Grain Container
   ============================================================================ */

.grain {
  position: relative;
  display: block;
  overflow: hidden;
  line-height: 0;
  isolation: isolate;
}

.grain img {
  display: block;
  width: 100%;
  height: auto;
  filter: grayscale(100%) contrast(1.1) brightness(1.05);
}

/* Duotone layers */
.grain::before {
  content: "";
  position: absolute;
  inset: 0;
  background-color: #C25C4E;
  mix-blend-mode: darken;
  pointer-events: none;
  z-index: 1;
}

.grain::after {
  content: "";
  position: absolute;
  inset: 0;
  background-color: #F5F0E8;
  mix-blend-mode: lighten;
  pointer-events: none;
  z-index: 2;
}

/* ============================================================================
   Grain Overlay (SVG Noise)
   ============================================================================ */

.grain-overlay {
  position: relative;
  display: block;
  overflow: hidden;
  line-height: 0;
}

.grain-overlay img {
  display: block;
  width: 100%;
  height: auto;
  filter: grayscale(100%) contrast(1.1) brightness(1.05);
}

/* Noise layer using inline SVG filter */
.grain-overlay::before {
  content: "";
  position: absolute;
  inset: 0;
  background-color: #C25C4E;
  mix-blend-mode: darken;
  pointer-events: none;
  z-index: 1;
}

.grain-overlay::after {
  content: "";
  position: absolute;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.15;
  mix-blend-mode: overlay;
  pointer-events: none;
  z-index: 3;
}

/* ============================================================================
   Intensity Variants
   ============================================================================ */

/* Subtle grain - barely perceptible */
.grain--subtle::after {
  opacity: 0.05;
}

/* Medium grain - noticeable texture */
.grain--medium::after {
  opacity: 0.15;
}

/* Heavy grain - pronounced film look */
.grain--heavy::after {
  opacity: 0.30;
}

/* ============================================================================
   Coarse Grain (Larger particles)
   ============================================================================ */

.grain--coarse::after {
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.3' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.20;
}

/* ============================================================================
   Color Grain Variants
   ============================================================================ */

.grain--warm::before {
  background-color: #D4A574;
}

.grain--cool::before {
  background-color: #6B8BA4;
}
