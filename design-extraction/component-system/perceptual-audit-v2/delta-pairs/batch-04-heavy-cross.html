<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Delta Batch 04: Heavy Component Cross-Pairs</title>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --font-title: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-code: 'JetBrains Mono', 'SF Mono', monospace;
      --weight-semibold: 600;
      --size-xs: 10px;
      --size-sm: 12px;
      --size-base: 14px;
      --text-primary: #1a1a1a;
      --text-secondary: #3d3d3d;
      --text-tertiary: #666666;
      --text-muted: #888888;
      --bg-page: #FEFCF3;
      --bg-essence: #FEF9F0;
      --accent-red: #E83025;
      --accent-amber: #D97706;
      --space-xl: 24px;
      --space-lg: 20px;
      --space-base: 16px;
      --space-sm: 8px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: var(--font-body); background: var(--bg-page); color: var(--text-primary); padding: 48px; line-height: 1.6; }
    .page-container { max-width: 720px; margin: 0 auto; }
    .batch-header { font-family: var(--font-title); font-style: italic; font-size: var(--size-xs); text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-tertiary); margin-bottom: var(--space-xl); padding-bottom: 12px; border-bottom: 2px solid var(--accent-red); }
    .pair-section { margin-bottom: 64px; padding-bottom: 32px; border-bottom: 1px dashed var(--text-muted); }
    .pair-label { font-size: var(--size-sm); font-weight: var(--weight-semibold); text-transform: uppercase; letter-spacing: 0.1em; color: var(--accent-red); margin-bottom: var(--space-base); }

    .file-tree { background: var(--bg-page); border: 1px solid #E5E5E5; margin: var(--space-xl) 0; }
    .file-tree-header { padding: var(--space-sm) var(--space-base); border-bottom: 1px solid #E5E5E5; }
    .file-tree-title { font-size: var(--size-xs); font-weight: var(--weight-semibold); text-transform: uppercase; letter-spacing: 0.1em; color: var(--accent-red); }
    .file-tree-body { padding: var(--space-base); }
    .file-tree-body pre { font-family: var(--font-code); font-size: var(--size-sm); line-height: 1.8; color: var(--text-secondary); }

    .decision-matrix { margin: var(--space-xl) 0; }
    .matrix-header { padding-bottom: var(--space-sm); border-bottom: 2px solid var(--accent-red); margin-bottom: var(--space-base); }
    .matrix-title { font-size: var(--size-xs); font-weight: var(--weight-semibold); text-transform: uppercase; letter-spacing: 0.1em; color: var(--accent-red); }
    .matrix-table { width: 100%; border-collapse: collapse; font-size: var(--size-sm); }
    .matrix-table th { text-align: left; padding: var(--space-sm); border-bottom: 1px solid #E5E5E5; font-weight: var(--weight-semibold); text-transform: uppercase; font-size: var(--size-xs); color: var(--text-tertiary); }
    .matrix-table td { padding: var(--space-sm); border-bottom: 1px solid #E5E5E5; color: var(--text-secondary); }

    .core-abstraction { border: 1px solid #E5E5E5; margin: var(--space-xl) 0; }
    .abstraction-header { padding: var(--space-base) var(--space-lg); border-bottom: 1px solid #E5E5E5; }
    .abstraction-label { font-size: var(--size-xs); font-weight: var(--weight-semibold); text-transform: uppercase; letter-spacing: 0.1em; color: var(--accent-red); margin-bottom: var(--space-sm); }
    .abstraction-wisdom { font-family: var(--font-title); font-style: italic; font-size: var(--size-base); color: var(--text-secondary); }
    .abstraction-code { background: #1E1E1E; padding: var(--space-base); }
    .abstraction-code pre { font-family: var(--font-code); font-size: var(--size-sm); color: #E8E8E8; }

    .task-component { margin: var(--space-xl) 0; }
    .task-header { display: flex; justify-content: space-between; padding-bottom: var(--space-sm); border-bottom: 2px solid var(--accent-red); margin-bottom: var(--space-base); }
    .task-title { font-size: var(--size-xs); font-weight: var(--weight-semibold); text-transform: uppercase; letter-spacing: 0.1em; color: var(--accent-red); }
    .task-counter { font-family: var(--font-code); font-size: var(--size-xs); color: var(--text-muted); }
    .task-list { list-style: none; }
    .task-item { display: flex; gap: var(--space-sm); padding: var(--space-sm) 0; }
    .task-checkbox { width: 16px; height: 16px; border: 1px solid var(--text-tertiary); flex-shrink: 0; margin-top: 2px; }
    .task-text { font-size: var(--size-sm); color: var(--text-secondary); }

    .reasoning-component { border: 1px solid #E5E5E5; margin: var(--space-xl) 0; }
    .reasoning-header { padding: var(--space-base) var(--space-lg); border-bottom: 1px solid #E5E5E5; }
    .reasoning-question { font-family: var(--font-title); font-style: italic; font-size: var(--size-base); color: var(--text-primary); }
    .reasoning-columns { display: grid; grid-template-columns: 1fr 1fr; }
    .reasoning-column { padding: var(--space-base) var(--space-lg); }
    .reasoning-column:first-child { border-right: 1px solid #E5E5E5; }
    .reasoning-column-title { font-size: var(--size-xs); font-weight: var(--weight-semibold); text-transform: uppercase; letter-spacing: 0.1em; color: var(--accent-red); margin-bottom: var(--space-sm); }
    .reasoning-column-body { font-size: var(--size-sm); line-height: 1.6; color: var(--text-secondary); }
    .reasoning-recommendation { padding: var(--space-base) var(--space-lg); background: var(--bg-essence); border-top: 1px solid #E5E5E5; }
    .reasoning-rec-label { font-size: var(--size-xs); font-weight: var(--weight-semibold); text-transform: uppercase; letter-spacing: 0.1em; color: var(--accent-amber); margin-bottom: 4px; }
    .reasoning-rec-text { font-size: var(--size-sm); color: var(--text-secondary); }
  </style>
</head>
<body>
  <div class="page-container">
    <div class="batch-header">Phase 4-Delta / Batch 04: Heavy Component Cross-Pairs (10 Pairs)</div>

    <!-- G.1: File Tree + Decision Matrix -->
    <section class="pair-section" id="pair-g1">
      <div class="pair-label">G.1: File Tree + Decision Matrix</div>
      <div class="file-tree">
        <div class="file-tree-header"><span class="file-tree-title">Repository Structure</span></div>
        <div class="file-tree-body">
          <pre>packages/
├── core/        ← Stable, rarely changes
├── web/         ← Frequent updates
└── mobile/      ← Independent release</pre>
        </div>
      </div>
      <div class="decision-matrix">
        <div class="matrix-header"><span class="matrix-title">Package Update Strategy</span></div>
        <table class="matrix-table">
          <thead><tr><th>Package</th><th>Update Frequency</th><th>Testing Strategy</th></tr></thead>
          <tbody>
            <tr><td>core</td><td>Monthly</td><td>Full regression</td></tr>
            <tr><td>web</td><td>Weekly</td><td>Integration tests</td></tr>
            <tr><td>mobile</td><td>Bi-weekly</td><td>Device matrix</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- G.2: File Tree + Core Abstraction -->
    <section class="pair-section" id="pair-g2">
      <div class="pair-label">G.2: File Tree + Core Abstraction</div>
      <div class="file-tree">
        <div class="file-tree-header"><span class="file-tree-title">Clean Architecture Layers</span></div>
        <div class="file-tree-body">
          <pre>src/
├── domain/      ← Pure business logic
├── application/ ← Use cases, orchestration
├── infrastructure/ ← Frameworks, databases
└── presentation/   ← UI, controllers</pre>
        </div>
      </div>
      <div class="core-abstraction">
        <div class="abstraction-header">
          <div class="abstraction-label">Dependency Rule</div>
          <div class="abstraction-wisdom">"Dependencies point inward. Inner layers know nothing of outer layers."</div>
        </div>
        <div class="abstraction-code">
          <pre>// domain/ imports NOTHING external
// infrastructure/ imports domain/
// The arrow points toward stability</pre>
        </div>
      </div>
    </section>

    <!-- G.3: File Tree + Task Component -->
    <section class="pair-section" id="pair-g3">
      <div class="pair-label">G.3: File Tree + Task Component</div>
      <div class="file-tree">
        <div class="file-tree-header"><span class="file-tree-title">Migration Target</span></div>
        <div class="file-tree-body">
          <pre>legacy/
├── monolith/    → Extract to services/
├── shared/      → Distribute to domains
└── config/      → Centralize in platform/</pre>
        </div>
      </div>
      <div class="task-component">
        <div class="task-header">
          <span class="task-title">Migration Checklist</span>
          <span class="task-counter">0 of 3 complete</span>
        </div>
        <ul class="task-list">
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Extract monolith to services/</span></li>
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Distribute shared/ to domains</span></li>
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Centralize config/ in platform/</span></li>
        </ul>
      </div>
    </section>

    <!-- G.4: File Tree + Reasoning -->
    <section class="pair-section" id="pair-g4">
      <div class="pair-label">G.4: File Tree + Reasoning Component</div>
      <div class="file-tree">
        <div class="file-tree-header"><span class="file-tree-title">Current State</span></div>
        <div class="file-tree-body">
          <pre>app/
├── components/  (142 files)
├── hooks/       (28 files)
└── utils/       (47 files)</pre>
        </div>
      </div>
      <div class="reasoning-component">
        <div class="reasoning-header"><div class="reasoning-question">Should we reorganize by feature or keep type-based?</div></div>
        <div class="reasoning-columns">
          <div class="reasoning-column">
            <div class="reasoning-column-title">Type-Based (Keep)</div>
            <div class="reasoning-column-body">Familiar to team. Clear where to put new files. But features scattered across folders.</div>
          </div>
          <div class="reasoning-column">
            <div class="reasoning-column-title">Feature-Based (Change)</div>
            <div class="reasoning-column-body">Features are cohesive. Easier to delete features. But migration cost is high.</div>
          </div>
        </div>
        <div class="reasoning-recommendation">
          <div class="reasoning-rec-label">Recommendation</div>
          <div class="reasoning-rec-text">Start hybrid: new features use feature-based. Migrate existing only when touching them.</div>
        </div>
      </div>
    </section>

    <!-- H.1: Decision Matrix + Core Abstraction -->
    <section class="pair-section" id="pair-h1">
      <div class="pair-label">H.1: Decision Matrix + Core Abstraction</div>
      <div class="decision-matrix">
        <div class="matrix-header"><span class="matrix-title">State Management Options</span></div>
        <table class="matrix-table">
          <thead><tr><th>Option</th><th>Complexity</th><th>Best For</th></tr></thead>
          <tbody>
            <tr><td>useState</td><td>Low</td><td>Local component state</td></tr>
            <tr><td>Context</td><td>Medium</td><td>Shared state, small apps</td></tr>
            <tr><td>External store</td><td>High</td><td>Complex state, large apps</td></tr>
          </tbody>
        </table>
      </div>
      <div class="core-abstraction">
        <div class="abstraction-header">
          <div class="abstraction-label">Underlying Principle</div>
          <div class="abstraction-wisdom">"State should live as close to where it's used as possible."</div>
        </div>
        <div class="abstraction-code">
          <pre>// Corollary: If state is used in one place,
// don't lift it to a global store
const [local, setLocal] = useState() // ✓ Correct</pre>
        </div>
      </div>
    </section>

    <!-- H.2: Decision Matrix + Task -->
    <section class="pair-section" id="pair-h2">
      <div class="pair-label">H.2: Decision Matrix + Task Component</div>
      <div class="decision-matrix">
        <div class="matrix-header"><span class="matrix-title">Testing Strategy by Layer</span></div>
        <table class="matrix-table">
          <thead><tr><th>Layer</th><th>Test Type</th><th>Coverage Target</th></tr></thead>
          <tbody>
            <tr><td>Domain</td><td>Unit</td><td>90%+</td></tr>
            <tr><td>Application</td><td>Integration</td><td>70%+</td></tr>
            <tr><td>UI</td><td>E2E</td><td>Critical paths</td></tr>
          </tbody>
        </table>
      </div>
      <div class="task-component">
        <div class="task-header">
          <span class="task-title">Testing Implementation</span>
          <span class="task-counter">0 of 3 complete</span>
        </div>
        <ul class="task-list">
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Add unit tests for domain layer (target: 90%)</span></li>
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Add integration tests for application layer</span></li>
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Add E2E tests for critical user paths</span></li>
        </ul>
      </div>
    </section>

    <!-- H.3: Decision Matrix + Reasoning -->
    <section class="pair-section" id="pair-h3">
      <div class="pair-label">H.3: Decision Matrix + Reasoning Component</div>
      <div class="decision-matrix">
        <div class="matrix-header"><span class="matrix-title">Database Options</span></div>
        <table class="matrix-table">
          <thead><tr><th>Option</th><th>Consistency</th><th>Scalability</th></tr></thead>
          <tbody>
            <tr><td>PostgreSQL</td><td>Strong</td><td>Vertical</td></tr>
            <tr><td>MongoDB</td><td>Eventual</td><td>Horizontal</td></tr>
            <tr><td>CockroachDB</td><td>Strong</td><td>Horizontal</td></tr>
          </tbody>
        </table>
      </div>
      <div class="reasoning-component">
        <div class="reasoning-header"><div class="reasoning-question">Which database fits our needs?</div></div>
        <div class="reasoning-columns">
          <div class="reasoning-column">
            <div class="reasoning-column-title">PostgreSQL</div>
            <div class="reasoning-column-body">Battle-tested. Strong consistency. But vertical scaling has limits.</div>
          </div>
          <div class="reasoning-column">
            <div class="reasoning-column-title">CockroachDB</div>
            <div class="reasoning-column-body">Distributed PostgreSQL. Scales horizontally. But newer, less ecosystem support.</div>
          </div>
        </div>
        <div class="reasoning-recommendation">
          <div class="reasoning-rec-label">Recommendation</div>
          <div class="reasoning-rec-text">Start with PostgreSQL. Migrate to CockroachDB when you actually hit scaling limits.</div>
        </div>
      </div>
    </section>

    <!-- I.1: Core Abstraction + Task -->
    <section class="pair-section" id="pair-i1">
      <div class="pair-label">I.1: Core Abstraction + Task Component</div>
      <div class="core-abstraction">
        <div class="abstraction-header">
          <div class="abstraction-label">Core Principle</div>
          <div class="abstraction-wisdom">"Make illegal states unrepresentable."</div>
        </div>
        <div class="abstraction-code">
          <pre>// Instead of: { status: string, data?: T, error?: E }
// Use discriminated union:
type Result&lt;T, E&gt; =
  | { status: 'success', data: T }
  | { status: 'error', error: E }</pre>
        </div>
      </div>
      <div class="task-component">
        <div class="task-header">
          <span class="task-title">Refactoring Tasks</span>
          <span class="task-counter">0 of 3 complete</span>
        </div>
        <ul class="task-list">
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Replace optional fields with discriminated unions</span></li>
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Add exhaustiveness checking to switches</span></li>
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Remove impossible state combinations</span></li>
        </ul>
      </div>
    </section>

    <!-- I.2: Core Abstraction + Reasoning -->
    <section class="pair-section" id="pair-i2">
      <div class="pair-label">I.2: Core Abstraction + Reasoning Component</div>
      <div class="core-abstraction">
        <div class="abstraction-header">
          <div class="abstraction-label">Core Principle</div>
          <div class="abstraction-wisdom">"Parse, don't validate."</div>
        </div>
        <div class="abstraction-code">
          <pre>// Bad: validate() returns boolean, data unchanged
// Good: parse() returns typed data or throws
function parseEmail(s: string): Email { ... }</pre>
        </div>
      </div>
      <div class="reasoning-component">
        <div class="reasoning-header"><div class="reasoning-question">When should we validate vs. parse?</div></div>
        <div class="reasoning-columns">
          <div class="reasoning-column">
            <div class="reasoning-column-title">Validate</div>
            <div class="reasoning-column-body">Simpler to implement. But leaves data in untyped limbo. Type information lost.</div>
          </div>
          <div class="reasoning-column">
            <div class="reasoning-column-title">Parse</div>
            <div class="reasoning-column-body">Creates new typed value. Type system enforces correctness downstream. More upfront work.</div>
          </div>
        </div>
        <div class="reasoning-recommendation">
          <div class="reasoning-rec-label">Recommendation</div>
          <div class="reasoning-rec-text">Parse at system boundaries. Once data enters your domain, it should be typed.</div>
        </div>
      </div>
    </section>

    <!-- J.1: Task + Reasoning -->
    <section class="pair-section" id="pair-j1">
      <div class="pair-label">J.1: Task Component + Reasoning Component</div>
      <div class="task-component">
        <div class="task-header">
          <span class="task-title">Sprint Planning</span>
          <span class="task-counter">0 of 4 complete</span>
        </div>
        <ul class="task-list">
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Implement user authentication</span></li>
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Add payment integration</span></li>
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Build dashboard UI</span></li>
          <li class="task-item"><div class="task-checkbox"></div><span class="task-text">Write API documentation</span></li>
        </ul>
      </div>
      <div class="reasoning-component">
        <div class="reasoning-header"><div class="reasoning-question">What should we prioritize first?</div></div>
        <div class="reasoning-columns">
          <div class="reasoning-column">
            <div class="reasoning-column-title">Auth First</div>
            <div class="reasoning-column-body">Unlocks all user-specific features. But delays visible progress.</div>
          </div>
          <div class="reasoning-column">
            <div class="reasoning-column-title">Dashboard First</div>
            <div class="reasoning-column-body">Visible progress for stakeholders. But requires mocking user context.</div>
          </div>
        </div>
        <div class="reasoning-recommendation">
          <div class="reasoning-rec-label">Recommendation</div>
          <div class="reasoning-rec-text">Auth first. Technical debt from mocking compounds. Stakeholders can wait one sprint.</div>
        </div>
      </div>
    </section>

  </div>
</body>
</html>
