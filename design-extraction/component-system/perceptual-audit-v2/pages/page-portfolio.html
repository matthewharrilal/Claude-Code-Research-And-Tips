<!--
LIGHT SECTION — Phase 2D
Part Of: perceptual-audit-v2/pages — Page-level audit specimens and soul extractions
Contributed To: Page composition patterns in PRODUCTION-RULES.md
Full Context: perceptual-audit-v2/synthesis/
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio Page — Phase 3 Composition Test</title>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --font-title: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-code: 'JetBrains Mono', 'SF Mono', monospace;

      --weight-regular: 400;
      --weight-medium: 500;

      --size-hero: 32px;
      --size-h2: 20px;
      --size-lg: 18px;
      --size-body: 15px;
      --size-small: 13px;
      --size-xs: 11px;

      --text-primary: #1A1A1A;
      --text-secondary: #444444;
      --text-tertiary: #666666;
      --text-muted: #888888;
      --text-inverse: #E8E8E8;

      --bg-page: #FAFAFA;
      --bg-warm: #FEF9F5;
      --bg-code: #1E1E1E;

      --accent-red: #E83025;
      --accent-amber: #C49052;

      --border-subtle: #E8E2D9;
      --border-light: #F0EBE3;
      --border-heavy: 3px;
      --border-thin: 1px;
      --border-medium: 2px;
      --border-accent: 4px;

      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 12px;
      --space-base: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
      --space-3xl: 64px;

      --syntax-keyword: #C586C0;
      --syntax-string: #CE9178;
      --syntax-comment: #6A9955;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-body);
      font-size: var(--size-body);
      line-height: 1.7;
      color: var(--text-secondary);
      background: var(--bg-page);
    }

    .page {
      max-width: 820px;
      margin: 0 auto;
      padding: var(--space-2xl) var(--space-lg);
    }

    /* HERO */
    .hero {
      margin-bottom: var(--space-3xl);
      padding-bottom: var(--space-xl);
      border-bottom: 2px solid var(--accent-red);
    }

    .hero__label {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xs);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--accent-red);
      margin-bottom: var(--space-sm);
    }

    .hero__title {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-hero);
      font-weight: var(--weight-regular);
      color: var(--text-primary);
      line-height: 1.2;
      margin-bottom: var(--space-base);
    }

    .hero__description {
      font-size: var(--size-body);
      color: var(--text-tertiary);
      max-width: 580px;
    }

    /* SECTION */
    .section {
      margin-bottom: var(--space-3xl);
    }

    .section__title {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-h2);
      font-weight: var(--weight-regular);
      color: var(--text-primary);
      margin-bottom: var(--space-lg);
    }

    /* PROSE */
    .prose p { margin-bottom: var(--space-base); }
    .prose p:last-child { margin-bottom: 0; }
    .prose code {
      font-family: var(--font-code);
      font-size: 0.9em;
      background: var(--bg-warm);
      padding: 2px 6px;
      border-radius: 0;
    }
    .prose strong {
      font-weight: var(--weight-medium);
      color: var(--text-primary);
    }

    /* DECISION MATRIX */
    .decision-matrix {
      margin: var(--space-xl) 0;
      border-left: var(--border-accent) solid var(--accent-red);
      padding-left: var(--space-lg);
    }

    .decision-matrix__label {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xs);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--accent-red);
      margin-bottom: var(--space-lg);
      padding-bottom: var(--space-md);
      border-bottom: var(--border-medium) solid var(--accent-red);
    }

    .decision-matrix__table {
      width: auto;
      border-collapse: collapse;
      font-size: var(--size-body);
      line-height: 1.7;
    }

    .decision-matrix__table th {
      font-family: var(--font-title);
      font-weight: var(--weight-medium);
      text-transform: uppercase;
      font-size: var(--size-xs);
      letter-spacing: 0.04em;
      text-align: left;
      padding: var(--space-base) var(--space-lg) var(--space-md) 0;
      border-bottom: var(--border-thin) solid var(--border-subtle);
      vertical-align: bottom;
      color: var(--text-secondary);
      background: transparent;
    }

    .decision-matrix__table td {
      padding: var(--space-lg) var(--space-lg) var(--space-lg) 0;
      vertical-align: top;
      border-bottom: var(--border-thin) solid var(--border-light);
      color: var(--text-secondary);
    }

    .decision-matrix__table th:last-child,
    .decision-matrix__table td:last-child { padding-right: 0; }

    .decision-matrix__table tr:last-child td { border-bottom: none; }

    .decision-matrix__table td:first-child {
      font-weight: var(--weight-medium);
      color: var(--text-primary);
    }

    .decision-matrix__table code {
      font-family: var(--font-code);
      font-size: 0.9em;
      background: var(--bg-warm);
      padding: 2px 6px;
      border-radius: 0;
    }

    /* CORE ABSTRACTION */
    .core-abstraction {
      border: var(--border-heavy) solid var(--text-primary);
      border-radius: 0;
      margin: var(--space-xl) 0;
      overflow: hidden;
    }

    .core-abstraction__header {
      padding: var(--space-lg) var(--space-lg);
      border-bottom: 1px solid var(--border-subtle);
    }

    .core-abstraction__label {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xs);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--accent-red);
      margin-bottom: var(--space-sm);
      display: block;
    }

    .core-abstraction__principle {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-lg);
      line-height: 1.5;
      color: var(--text-primary);
      margin: 0;
    }

    .core-abstraction__code {
      background: var(--bg-code);
      padding: var(--space-base) var(--space-lg);
    }

    .core-abstraction__code pre {
      margin: 0;
      font-family: var(--font-code);
      font-size: 13px;
      line-height: 1.6;
      color: var(--text-inverse);
    }

    .token-keyword { color: var(--syntax-keyword); }
    .token-string { color: var(--syntax-string); }
    .token-comment { color: var(--syntax-comment); font-style: italic; }
    .token-punctuation { color: var(--text-tertiary); }

    /* REASONING COMPONENT */
    .reasoning {
      border: var(--border-heavy) solid var(--text-primary);
      border-radius: 0;
      margin: var(--space-xl) 0;
      overflow: hidden;
    }

    .reasoning__header {
      padding: var(--space-lg);
      border-bottom: 1px solid var(--border-subtle);
    }

    .reasoning__label {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xs);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--accent-red);
      margin-bottom: var(--space-sm);
      display: block;
    }

    .reasoning__question {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-lg);
      line-height: 1.4;
      color: var(--text-primary);
      margin: 0;
    }

    .reasoning__options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0;
    }

    .reasoning__option {
      padding: var(--space-lg);
      border-right: 1px solid var(--border-subtle);
    }

    .reasoning__option:last-child {
      border-right: none;
    }

    .reasoning__option-label {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xs);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent-red);
      margin-bottom: var(--space-sm);
    }

    .reasoning__option-title {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-body);
      color: var(--text-primary);
      margin-bottom: var(--space-sm);
    }

    .reasoning__option-content {
      font-size: var(--size-small);
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .reasoning__conclusion {
      padding: var(--space-lg);
      border-top: var(--border-accent) solid var(--accent-amber);
      background: var(--bg-warm);
    }

    .reasoning__conclusion-label {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xs);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent-amber);
      margin-bottom: var(--space-sm);
    }

    .reasoning__conclusion-content {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-body);
      color: var(--text-primary);
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <article class="page">

    <!-- HERO -->
    <header class="hero">
      <span class="hero__label">Architecture Reference</span>
      <h1 class="hero__title">Orchestration Pattern Comparison</h1>
      <p class="hero__description">
        A structured comparison of context management strategies, from vanilla sessions to factory-scale autonomous systems. Choose based on your project's state requirements.
      </p>
    </header>

    <!-- SECTION 1: Decision Matrix -->
    <section class="section">
      <h2 class="section__title">Pattern Selection Guide</h2>

      <div class="prose">
        <p>
          Match your orchestration pattern to your state management needs. Higher complexity levels require more infrastructure but provide greater autonomy.
        </p>
      </div>

      <div class="decision-matrix" role="region" aria-label="Orchestration comparison">
        <div class="decision-matrix__label">When to Use Each Pattern</div>
        <table class="decision-matrix__table">
          <thead>
            <tr>
              <th>Pattern</th>
              <th>State File</th>
              <th>Complexity</th>
              <th>Best For</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Vanilla Session</td>
              <td>None</td>
              <td>Level 0-1</td>
              <td>Quick fixes, exploration</td>
            </tr>
            <tr>
              <td>CLAUDE.md Context</td>
              <td><code>CLAUDE.md</code></td>
              <td>Level 2</td>
              <td>Recurring project work</td>
            </tr>
            <tr>
              <td>Ralph Wiggum Loop</td>
              <td><code>PROMPT.md</code></td>
              <td>Level 3-4</td>
              <td>Autonomous refactoring</td>
            </tr>
            <tr>
              <td>Parallel Sub-Agents</td>
              <td><code>PROGRESS.md</code></td>
              <td>Level 5</td>
              <td>Research phases</td>
            </tr>
            <tr>
              <td>Gas Town Factory</td>
              <td>Distributed</td>
              <td>Level 6-7</td>
              <td>Production scale</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- SECTION 2: Core Abstraction -->
    <section class="section">
      <h2 class="section__title">The Foundational Principle</h2>

      <div class="prose">
        <p>
          All effective patterns share one principle. Understanding this principle helps you choose the right pattern and debug when things go wrong.
        </p>
      </div>

      <div class="core-abstraction" role="region" aria-labelledby="principle-title">
        <div class="core-abstraction__header">
          <span class="core-abstraction__label">Core Principle</span>
          <p class="core-abstraction__principle" id="principle-title">External state beats internal memory. Files persist across sessions; Claude's memory does not.</p>
        </div>
        <div class="core-abstraction__code">
          <pre><code><span class="token-comment">// Anti-pattern: trusting context window</span>
<span class="token-keyword">const</span> state = <span class="token-string">"in Claude's memory"</span><span class="token-punctuation">;</span>
<span class="token-comment">// Lost on restart</span>

<span class="token-comment">// Pattern: external persistence</span>
<span class="token-keyword">await</span> writeFile<span class="token-punctuation">(</span><span class="token-string">'PROGRESS.md'</span><span class="token-punctuation">,</span> state<span class="token-punctuation">)</span><span class="token-punctuation">;</span>
<span class="token-comment">// Survives boundaries</span></code></pre>
        </div>
      </div>
    </section>

    <!-- SECTION 3: Reasoning Component -->
    <section class="section">
      <h2 class="section__title">Architecture Decision</h2>

      <div class="prose">
        <p>
          When building a new autonomous system, you must choose between two architectures. Neither is universally better—the right choice depends on your constraints.
        </p>
      </div>

      <div class="reasoning" role="region" aria-label="Architecture comparison">
        <div class="reasoning__header">
          <span class="reasoning__label">Decision</span>
          <h3 class="reasoning__question">Loop-based vs. Graph-based orchestration?</h3>
        </div>
        <div class="reasoning__options">
          <div class="reasoning__option">
            <div class="reasoning__option-label">Option A</div>
            <div class="reasoning__option-title">Loop-Based (Ralph Wiggum)</div>
            <div class="reasoning__option-content">
              Simple iteration cycle. State lives in files. Each iteration is isolated. Errors don't cascade. Easy to debug. Limited coordination between tasks.
            </div>
          </div>
          <div class="reasoning__option">
            <div class="reasoning__option-label">Option B</div>
            <div class="reasoning__option-title">Graph-Based (Gas Town)</div>
            <div class="reasoning__option-content">
              Complex task graph. Distributed state. Parallel execution. Higher coordination overhead. Harder to debug. Better for factory-scale production.
            </div>
          </div>
        </div>
        <div class="reasoning__conclusion">
          <div class="reasoning__conclusion-label">Recommendation</div>
          <div class="reasoning__conclusion-content">
            Start with loop-based. Only move to graph-based when you have proven the need for parallel coordination. Premature complexity is the enemy of shipped software.
          </div>
        </div>
      </div>
    </section>

  </article>
</body>
</html>
