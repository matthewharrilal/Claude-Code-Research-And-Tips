<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Core Abstraction Component — Perceptual Audit v2</title>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* =========================================================================
       DESIGN TOKENS — From CONSISTENCY-REGISTRY.md + KortAI Foundation
       ========================================================================= */
    :root {
      /* Typography */
      --font-title: 'Instrument Serif', Georgia, serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-code: 'JetBrains Mono', 'SF Mono', monospace;

      /* Font Weights */
      --weight-regular: 400;
      --weight-medium: 500;
      --weight-semibold: 600;

      /* Font Sizes */
      --size-xs: 10px;
      --size-sm: 12px;
      --size-base: 14px;
      --size-lg: 16px;
      --size-xl: 20px;
      --size-2xl: 24px;

      /* Text Colors */
      --text-primary: #1a1a1a;
      --text-secondary: #3d3d3d;
      --text-tertiary: #666666;
      --text-muted: #888888;
      --text-inverse: #F5F0EB;

      /* Background Colors */
      --bg-page: #FEFCF3;
      --bg-warm: #FEF9F5;
      --bg-dark: #1a1a1a;

      /* Accent Colors */
      --accent-red: #E83025;

      /* Borders */
      --border-subtle: #E8E2D9;
      --border-light: #F0EBE3;
      --border-heavy: 3px;
      --border-thin: 1px;

      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 12px;
      --space-base: 16px;
      --space-lg: 20px;
      --space-xl: 24px;
      --space-2xl: 32px;
    }

    /* =========================================================================
       PAGE SETUP
       ========================================================================= */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-body);
      background: var(--bg-page);
      color: var(--text-primary);
      padding: 48px;
      line-height: 1.6;
    }

    .page-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .component-label {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xs);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-tertiary);
      margin-bottom: var(--space-base);
    }

    /* =========================================================================
       CORE ABSTRACTION COMPONENT
       Soul: Philosophy + Code relationship — makes the connection PROFOUND
       Stacked layout: philosophy PRECEDES implementation (teaching relationship)
       ========================================================================= */

    .core-abstraction {
      /* Full border frame — signals "this is important" */
      border: var(--border-heavy) solid var(--text-primary);
      border-radius: 0; /* LOCKED: Sharp edges per KortAI */
      margin: var(--space-2xl) 0;
      overflow: hidden;

      /* No shadows, no chrome — flat editorial design */
      background: transparent;
      box-shadow: none;
    }

    /* =========================================================================
       PHILOSOPHY SECTION: Editorial authority through serif italic
       Philosophy PRECEDES implementation — the "why" before the "how"
       ========================================================================= */

    .core-abstraction__philosophy {
      padding: var(--space-xl);
      border-bottom: var(--border-thin) solid var(--border-subtle);
      background: var(--bg-warm);
    }

    .core-abstraction__label {
      display: block;
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xs);
      font-weight: var(--weight-semibold);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--accent-red);
      margin-bottom: var(--space-base);
    }

    .core-abstraction__quote {
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xl);
      line-height: 1.4;
      color: var(--text-primary);
      margin: 0;
      /* No decorative quotes — restraint */
    }

    .core-abstraction__attribution {
      display: block;
      font-family: var(--font-body);
      font-size: var(--size-sm);
      font-style: normal;
      color: var(--text-muted);
      margin-top: var(--space-md);
    }

    .core-abstraction__attribution::before {
      content: '— ';
    }

    /* =========================================================================
       CODE SECTION: Dark background creates contrast, monospace for code
       Implementation FOLLOWS philosophy — proves the principle
       ========================================================================= */

    .core-abstraction__code {
      padding: var(--space-lg);
      background: var(--bg-dark);
    }

    .core-abstraction__code-label {
      display: block;
      font-family: var(--font-title);
      font-style: italic;
      font-size: var(--size-xs);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--text-muted);
      margin-bottom: var(--space-md);
    }

    .core-abstraction__code pre {
      margin: 0;
      padding: var(--space-base);
      background: transparent;
      overflow-x: auto;
      border-radius: 0; /* LOCKED: Sharp edges */
    }

    .core-abstraction__code code {
      font-family: var(--font-code);
      font-size: var(--size-base);
      line-height: 1.6;
      color: var(--text-inverse);
    }

    /* Minimal syntax highlighting — restraint in color */
    .core-abstraction__code .keyword {
      color: var(--accent-red);
    }

    .core-abstraction__code .string {
      color: #98C379;
    }

    .core-abstraction__code .comment {
      color: #666666;
      font-style: italic;
    }

    .core-abstraction__code .function {
      color: #61AFEF;
    }

    .core-abstraction__code .number {
      color: #D19A66;
    }

    /* =========================================================================
       COMMENTARY: Connects code back to principle
       ========================================================================= */

    .core-abstraction__commentary {
      font-family: var(--font-body);
      font-size: var(--size-sm);
      color: var(--text-muted);
      margin-top: var(--space-base);
      padding-top: var(--space-base);
      border-top: var(--border-thin) solid #333333;
      line-height: 1.7;
    }

    .core-abstraction__commentary em {
      color: var(--accent-red);
      font-style: italic;
    }

    .core-abstraction__commentary strong {
      color: var(--text-inverse);
      font-weight: var(--weight-medium);
    }

    /* =========================================================================
       SPACING BETWEEN EXAMPLES
       ========================================================================= */

    .example-section {
      margin-bottom: 64px;
    }

    .example-section:last-child {
      margin-bottom: 0;
    }

    .prose-context {
      font-family: var(--font-body);
      font-size: var(--size-base);
      line-height: 1.7;
      color: var(--text-secondary);
      margin-bottom: var(--space-lg);
    }
  </style>
</head>
<body>
  <div class="page-container">

    <!-- =====================================================================
         EXAMPLE 1: Basic Core Abstraction
         Philosophy above code — teaching relationship
         ===================================================================== -->
    <section class="example-section">
      <div class="component-label">Core Abstraction — Basic</div>

      <article class="core-abstraction" data-component="core-abstraction" role="figure" aria-labelledby="principle-1">
        <div class="core-abstraction__philosophy">
          <span class="core-abstraction__label" id="principle-1">The Principle</span>
          <blockquote class="core-abstraction__quote">
            The abstraction is not about hiding complexity. It's about revealing the right complexity at the right level.
          </blockquote>
          <cite class="core-abstraction__attribution">
            A Philosophy of Software Design
          </cite>
        </div>

        <div class="core-abstraction__code">
          <span class="core-abstraction__code-label">Implementation</span>
          <pre><code><span class="keyword">const</span> <span class="function">reveal</span> = (level) => {
  <span class="keyword">return</span> complexity.<span class="function">filter</span>(c => c.abstraction === level);
};</code></pre>
        </div>
      </article>
    </section>

    <!-- =====================================================================
         EXAMPLE 2: Core Abstraction with Commentary
         Includes explanation connecting code to principle
         ===================================================================== -->
    <section class="example-section">
      <div class="component-label">Core Abstraction — With Commentary</div>

      <article class="core-abstraction" data-component="core-abstraction" role="figure" aria-labelledby="principle-2">
        <div class="core-abstraction__philosophy">
          <span class="core-abstraction__label" id="principle-2">The Philosophy</span>
          <blockquote class="core-abstraction__quote">
            Context as constraint, not capability. What you exclude matters more than what you include.
          </blockquote>
          <cite class="core-abstraction__attribution">
            Boris Cherny
          </cite>
        </div>

        <div class="core-abstraction__code">
          <span class="core-abstraction__code-label">In Practice</span>
          <pre><code><span class="comment">// CLAUDE.md — Minimal, focused context</span>
<span class="keyword">export</span> <span class="keyword">const</span> context = {
  purpose: <span class="string">"Build type-safe API client"</span>,
  constraints: [<span class="string">"TypeScript only"</span>, <span class="string">"No runtime deps"</span>],
  <span class="comment">// Explicitly exclude: framework preferences,</span>
  <span class="comment">// deployment details, unrelated patterns</span>
};</code></pre>
          <p class="core-abstraction__commentary">
            Notice how the context defines what's <em>excluded</em> as much as what's included.
            The constraints shape behavior more than the purpose statement.
            <strong>Focused context produces focused output.</strong>
          </p>
        </div>
      </article>
    </section>

    <!-- =====================================================================
         EXAMPLE 3: Pattern-to-Code Mapping
         Shows how a named pattern translates to implementation
         ===================================================================== -->
    <section class="example-section">
      <div class="component-label">Core Abstraction — Pattern Mapping</div>

      <article class="core-abstraction" data-component="core-abstraction" role="figure" aria-labelledby="principle-3">
        <div class="core-abstraction__philosophy">
          <span class="core-abstraction__label" id="principle-3">Ralph Wiggum Pattern</span>
          <blockquote class="core-abstraction__quote">
            Continuous autonomous iteration. Let the agent run until the work is done, restarting with fresh context each loop.
          </blockquote>
          <cite class="core-abstraction__attribution">
            Matt Pocock
          </cite>
        </div>

        <div class="core-abstraction__code">
          <span class="core-abstraction__code-label">The Loop</span>
          <pre><code><span class="comment"># Run forever, restart on each completion</span>
<span class="keyword">while</span> :; <span class="keyword">do</span>
  cat PROMPT.md | claude-code
<span class="keyword">done</span>

<span class="comment"># PROMPT.md contains:</span>
<span class="comment"># - Current objective</span>
<span class="comment"># - Progress markers (read from PROGRESS.md)</span>
<span class="comment"># - Termination condition</span></code></pre>
          <p class="core-abstraction__commentary">
            Fresh context per iteration prevents hallucination accumulation. External files
            (<strong>PROMPT.md</strong>, <strong>PROGRESS.md</strong>) maintain state across the
            context boundary. The loop is the architecture; files are the memory.
          </p>
        </div>
      </article>
    </section>

    <!-- =====================================================================
         EXAMPLE 4: Technical Principle
         Software design principle with TypeScript implementation
         ===================================================================== -->
    <section class="example-section">
      <div class="component-label">Core Abstraction — Technical Principle</div>

      <p class="prose-context">
        When designing APIs, the types themselves should prevent invalid usage.
        This principle from functional programming applies directly to TypeScript.
      </p>

      <article class="core-abstraction" data-component="core-abstraction" role="figure" aria-labelledby="principle-4">
        <div class="core-abstraction__philosophy">
          <span class="core-abstraction__label" id="principle-4">Parse, Don't Validate</span>
          <blockquote class="core-abstraction__quote">
            Make illegal states unrepresentable by parsing data into types that can only represent valid states.
          </blockquote>
          <cite class="core-abstraction__attribution">
            Alexis King
          </cite>
        </div>

        <div class="core-abstraction__code">
          <span class="core-abstraction__code-label">TypeScript Implementation</span>
          <pre><code><span class="comment">// Bad: validate returns boolean, caller must remember to check</span>
<span class="keyword">function</span> <span class="function">validate</span>(email: <span class="string">string</span>): <span class="keyword">boolean</span>;

<span class="comment">// Good: parse returns valid type or fails</span>
<span class="keyword">function</span> <span class="function">parseEmail</span>(input: <span class="string">string</span>): Email | <span class="keyword">null</span>;

<span class="comment">// The type system ENFORCES the principle</span>
<span class="keyword">type</span> LoadingState&lt;T&gt; =
  | { status: <span class="string">'idle'</span> }
  | { status: <span class="string">'loading'</span> }
  | { status: <span class="string">'success'</span>, data: T }
  | { status: <span class="string">'error'</span>, error: Error };</code></pre>
          <p class="core-abstraction__commentary">
            You <em>cannot</em> have 'success' without data. You <em>cannot</em> have 'error'
            without an Error. The type system makes invalid states impossible to construct.
          </p>
        </div>
      </article>
    </section>

  </div>
</body>
</html>
