/* ===============================================================================
   CODE BLOCK — Editorial Typography for Code
   Phase 3.5 Component System

   Soul Question: "How do we make code feel like magazine typography, not VS Code?"

   Editorial code blocks feature:
   - Warm cream background, not IDE dark
   - Left border accent, not all-around
   - Minimal syntax highlighting (2-3 colors max)
   - Serif italic label, not header bar
   - NO line numbers, NO traffic light dots, NO always-visible copy button

   Reference: SOUL-DEFINITION.md Section 3.2
   =============================================================================== */

/* ─────────────────────────────────────────────────────────────────────────────
   BASE CODE BLOCK COMPONENT

   Soul Impact: Warm background integrates with page vs "enter the IDE". Left
   border accent creates pull-quote style, not boxed container. Sharp edges
   signal editorial precision.
   ───────────────────────────────────────────────────────────────────────────── */

.code-block {
  /* Background — warm, integrates with page */
  background: var(--color-background);

  /* Border — left accent, editorial pull-quote style */
  border-left: var(--border-accent) solid var(--color-primary);
  border-radius: 0;                   /* LOCKED */

  /* Shadow — NONE */
  box-shadow: none;                   /* LOCKED */

  /* Spacing */
  padding: var(--space-6);
  margin: var(--space-6) 0;

  /* Position for label and copy button */
  position: relative;

  /* Overflow handling */
  overflow-x: auto;
}

/* Playwright test attribute */
.code-block[data-component="code-block"] {
  /* Test marker */
}

/* ─────────────────────────────────────────────────────────────────────────────
   CODE BLOCK LABEL

   Typography treatment matches editorial system: serif italic uppercase.
   ───────────────────────────────────────────────────────────────────────────── */

.code-block__label {
  /* Typography — matches editorial system */
  font-family: var(--font-display);
  font-style: italic;
  font-size: var(--text-xs);
  font-weight: 400;

  /* Text treatment */
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);

  /* Color */
  color: var(--color-primary);

  /* Spacing */
  margin-bottom: var(--space-3);
  padding-bottom: var(--space-2);

  /* Separator */
  border-bottom: var(--border-thin) solid var(--color-border);

  display: block;
}

/* ─────────────────────────────────────────────────────────────────────────────
   CODE CONTENT
   ───────────────────────────────────────────────────────────────────────────── */

.code-block__pre {
  margin: 0;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: 0;
}

.code-block__code {
  /* Font */
  font-family: var(--font-mono);
  font-size: 14px;
  line-height: var(--leading-relaxed);

  /* Color */
  color: var(--color-text);

  /* Background — transparent to inherit */
  background: transparent;

  /* Whitespace */
  white-space: pre;
  tab-size: 2;
}

/* ─────────────────────────────────────────────────────────────────────────────
   MINIMAL SYNTAX HIGHLIGHTING — 2-3 colors only

   Soul Impact: Calm vs cognitive overload. Rainbow highlighting makes nothing
   stand out. With only 2-3 colors, keywords actually POP.
   ───────────────────────────────────────────────────────────────────────────── */

.code-block__code .keyword {
  color: var(--color-primary);        /* Red for keywords */
}

.code-block__code .string,
.code-block__code .number {
  color: var(--color-text-secondary); /* Muted for values */
}

.code-block__code .comment {
  color: var(--color-text-secondary);
  opacity: 0.7;
  font-style: italic;
}

/* Everything else: inherit (no highlighting) */
.code-block__code .function,
.code-block__code .variable,
.code-block__code .operator,
.code-block__code .punctuation,
.code-block__code .property,
.code-block__code .class-name,
.code-block__code .tag,
.code-block__code .attribute {
  color: inherit;
}

/* ─────────────────────────────────────────────────────────────────────────────
   COPY BUTTON — Hover reveal only

   Soul Impact: Content first, utility second. The copy button serves the
   content, not the other way around.
   ───────────────────────────────────────────────────────────────────────────── */

.code-block__copy {
  position: absolute;
  top: var(--space-6);
  right: var(--space-6);
  opacity: 0;
  transition: opacity 0.2s ease;

  /* Styling */
  background: transparent;
  border: var(--border-thin) solid var(--color-border);
  border-radius: 0;                   /* LOCKED */
  padding: var(--space-1) var(--space-2);

  /* Typography */
  font-family: var(--font-display);
  font-size: 10px;
  font-style: italic;
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);

  color: var(--color-text-secondary);
  cursor: pointer;
}

.code-block__copy:hover {
  color: var(--color-primary);
  border-color: var(--color-primary);
}

.code-block:hover .code-block__copy {
  opacity: 1;
}

/* ─────────────────────────────────────────────────────────────────────────────
   CAPTION
   ───────────────────────────────────────────────────────────────────────────── */

.code-block__caption {
  font-family: var(--font-body);
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  margin-top: var(--space-4);
  padding-top: var(--space-3);
  border-top: var(--border-thin) solid var(--color-border-subtle);
  line-height: var(--leading-normal);
}

/* ─────────────────────────────────────────────────────────────────────────────
   INLINE CODE VARIANT
   ───────────────────────────────────────────────────────────────────────────── */

code:not(.code-block__code) {
  font-family: var(--font-mono);
  font-size: 0.9em;
  background: var(--color-background);
  padding: 2px 6px;
  border-radius: 0;                   /* LOCKED */
  color: var(--color-text);
}

/* ─────────────────────────────────────────────────────────────────────────────
   VARIATIONS
   ───────────────────────────────────────────────────────────────────────────── */

/* Subtle: Bottom border only, more transparent */
.code-block--subtle {
  border-left: none;
  border-bottom: var(--border-medium) solid var(--color-primary);
  background: transparent;
  padding: var(--space-4) 0;
}

/* Heavy: Full border (brutalist emphasis) */
.code-block--heavy {
  border: var(--border-accent) solid var(--color-primary);
  border-left-width: var(--border-accent);
}

/* Terminal: Dark background for shell commands */
.code-block--terminal {
  background: var(--color-text);
}

.code-block--terminal .code-block__code {
  color: var(--color-background);
}

.code-block--terminal .code-block__label {
  color: var(--color-background);
  border-bottom-color: var(--color-text-secondary);
}

.code-block--terminal .code-block__code .keyword {
  color: var(--color-primary);
}

.code-block--terminal .code-block__code .comment {
  color: var(--color-text-secondary);
}
