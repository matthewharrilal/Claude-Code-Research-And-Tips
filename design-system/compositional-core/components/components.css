/* ============================================
   MERGED COMPONENT CSS
   Soul compliance: border-radius: 0, box-shadow: none
   CD-ONLY and TENSION-TEST-ONLY markers applied
   ============================================ */


/* ============================================================================
   UNIVERSAL COMPONENTS (present across all stages)
   ============================================================================ */

/* --- CALLOUT FAMILY: Sparse label + dense body + 4px left border --- */

.callout {
  border-left: var(--border-left-width, 4px) solid var(--callout-border-color, var(--accent-color));
  background: var(--callout-bg-color, var(--color-zone-sparse));
  padding: var(--space-6, 24px) var(--space-5, 20px);
  margin-bottom: var(--space-6, 24px);
}

.callout__label {
  font-family: var(--font-body);
  font-size: var(--type-meta, 10px);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--callout-label-color, var(--accent-color));
  margin-bottom: var(--space-3, 12px);
}

.callout__content,
.callout__body {
  font-size: var(--type-body, 14px);
  line-height: 1.7;
  color: var(--color-text);
}

/* Essence variant: serif italic for wisdom content */
.callout--essence .callout__content,
.callout--essence .callout__body {
  font-family: var(--font-display);
  font-size: 18px;
  font-style: italic;
}

/* Semantic color variants (all share 2-zone DNA) */
.callout--essence {
  --callout-border-color: var(--accent-amber, #D97706);
  --callout-bg-color: rgba(217, 119, 6, 0.05);
  --callout-label-color: var(--accent-amber, #D97706);
  --accent-color: var(--accent-amber, #D97706);
}

.callout--tip {
  --callout-border-color: var(--accent-green, #4A9D6B);
  --callout-bg-color: rgba(74, 157, 107, 0.05);
  --callout-label-color: var(--accent-green, #4A9D6B);
  --accent-color: var(--accent-green, #4A9D6B);
}

.callout--info,
.callout--note {
  --callout-border-color: var(--accent-blue, #4A90D9);
  --callout-bg-color: rgba(74, 144, 217, 0.05);
  --callout-label-color: var(--accent-blue, #4A90D9);
  --accent-color: var(--accent-blue, #4A90D9);
}

.callout--gotcha,
.callout--warning {
  --callout-border-color: var(--color-primary, #E83025);
  --callout-bg-color: rgba(232, 48, 37, 0.05);
  --callout-label-color: var(--color-primary, #E83025);
  --accent-color: var(--color-primary, #E83025);
}

.callout--challenge,
.callout--caution {
  --callout-border-color: var(--accent-purple, #7C3AED);
  --callout-bg-color: rgba(124, 58, 237, 0.05);
  --callout-label-color: var(--accent-purple, #7C3AED);
  --accent-color: var(--accent-purple, #7C3AED);
}


/* --- CODE BLOCKS: Dark background + syntax highlighting, 3px border --- */

pre {
  background: var(--color-text, #1A1A1A);
  color: var(--color-background, #FAFAF5);
  border: 3px solid var(--color-border, #E0D5C5);
  padding: var(--space-6, 24px) var(--space-8, 32px);
  font-family: var(--font-mono);
  font-size: var(--type-code, 14px);
  line-height: 1.5;
  overflow-x: auto;
  margin-bottom: var(--space-8, 32px);
  border-radius: var(--border-radius, 0);
}

pre code {
  background: none;
  border: none;
  padding: 0;
  font-size: inherit;
}

code {
  font-family: var(--font-mono);
  font-size: var(--type-code, 14px);
  line-height: 1.5;
}

/* Inline code within paragraphs */
p code,
li code {
  background: var(--color-border-subtle, #F0EBE3);
  padding: 2px 6px;
  font-size: var(--type-code, 14px);
  border: 1px solid var(--color-border, #E0D5C5);
  border-radius: var(--border-radius, 0);
}

/* Code snippet component with header (DD/OD specific structure) */
.code-snippet {
  background: #1A1A1A;
  margin-bottom: var(--space-6, 24px);
  border-radius: var(--border-radius, 0);
}

.code-snippet__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2, 8px) var(--space-4, 16px);
  background: #1A1A1A;
  border-bottom: 1px solid var(--color-border, #E0D5C5);
}

.code-snippet__filename {
  font-family: var(--font-mono);
  font-size: var(--type-meta, 11px);
  color: var(--color-text-secondary, #666666);
}

.code-snippet__copy {
  font-family: var(--font-body);
  font-size: 11px;
  color: var(--color-primary, #E83025);
  padding: var(--space-1, 4px) var(--space-2, 8px);
  border: 1px solid var(--color-primary, #E83025);
  background: transparent;
  cursor: pointer;
  border-radius: var(--border-radius, 0);
}

.code-snippet__content {
  padding: var(--space-4, 16px);
  font-family: var(--font-mono);
  font-size: var(--type-code, 14px);
  line-height: 1.5;
  color: #FAFAF5;
  overflow-x: auto;
  white-space: pre;
}

/* Syntax highlighting tokens (locked palette) */
.code-snippet__content .comment { color: #666666; }
.code-snippet__content .keyword { color: #E83025; }
.code-snippet__content .string { color: #6B9B7A; }
.code-snippet__content .function { color: #4A7C9B; }
.code-snippet__content .variable { color: #C97065; }


/* --- PAGE HEADER: ID, title, subtitle --- */

.exploration-header,
.page-header {
  border-bottom: 3px solid var(--color-primary, #E83025);
  padding: var(--space-6, 24px);
  background: white;
  margin-bottom: var(--space-12, 48px);
}

.exploration-id,
.page-header__id {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--color-primary, #E83025);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: var(--space-2, 8px);
}

.exploration-title,
.page-header__title {
  font-family: var(--font-display);
  font-size: 32px;
  font-style: italic;
  margin-bottom: var(--space-3, 12px);
}

.exploration-hypothesis,
.page-header__subtitle {
  font-size: 14px;
  color: var(--color-text-secondary, #666666);
  max-width: 600px;
}


/* --- PAGE FOOTER: Metadata + navigation --- */

.page-footer {
  border-top: 3px solid var(--color-primary, #E83025);
  padding: var(--space-6, 24px);
  margin-top: var(--space-16, 64px);
  font-size: var(--type-meta, 12px);
  color: var(--color-text-secondary, #666666);
}

.page-footer__section {
  margin-bottom: var(--space-4, 16px);
}

.page-footer__label {
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: var(--space-2, 8px);
}


/* --- TABLES: 3px header border, uppercase mono headers --- */

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: var(--space-8, 32px);
  display: block;
  overflow-x: auto;
}

th {
  font-family: var(--font-body);
  font-size: var(--type-meta, 12px);
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  text-align: left;
  padding: var(--space-3, 12px) var(--space-4, 16px);
  border-bottom: 3px solid var(--color-border, #E0D5C5);
  color: var(--color-text-secondary, #666666);
}

td {
  padding: var(--space-3, 12px) var(--space-4, 16px);
  border-bottom: 1px solid var(--color-border, #E0D5C5);
  font-size: var(--type-body, 14px);
  line-height: 1.6;
  vertical-align: top;
}

tr:last-child td {
  border-bottom: none;
}


/* --- SKIP LINK: Keyboard navigation skip-to-content --- */

.skip-link {
  position: absolute;
  top: -100%;
  left: 0;
  background: var(--color-primary, #E83025);
  color: var(--color-background, #FEF9F5);
  padding: 8px 16px;
  z-index: 1000;
  font-family: var(--font-body);
  font-size: 14px;
  text-decoration: none;
  border: none;
  border-radius: var(--border-radius, 0);
}

.skip-link:focus {
  top: 0;
}


/* --- FOCUS-VISIBLE: Keyboard navigation outline --- */

*:focus-visible {
  outline: 3px solid var(--color-primary, #E83025);
  outline-offset: 2px;
}


/* --- SELECTION STYLING: Text selection highlight --- */

::selection {
  background: var(--color-primary, #E83025);
  color: var(--color-background, #FEF9F5);
}


/* --- STATS BAR / METADATA GRID: Horizontal flex layout, label-value pairs --- */

.stats-bar {
  display: flex;
  gap: var(--space-6, 24px);
  flex-wrap: wrap;
  margin-bottom: var(--space-6, 24px);
}

/* DD/OD pattern: flex segments */
.stats-bar__segment {
  flex: 1;
  padding: var(--space-2, 8px);
  text-align: center;
  border: 1px solid var(--color-border, #E0D5C5);
}

.stats-bar__label {
  font-size: var(--type-meta, 10px);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-secondary, #666666);
  margin-bottom: var(--space-1, 4px);
}

.stats-bar__value {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text, #1A1A1A);
}

/* CD pattern: vertical stat items */
.stat-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-1, 4px);
}

.stat-label {
  font-family: var(--font-mono);
  font-size: var(--type-meta, 10px);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--color-text-secondary, #666666);
}

.stat-value {
  font-family: var(--font-body);
  font-size: var(--type-body, 16px);
  font-weight: 600;
  color: var(--color-text, #1A1A1A);
}


/* --- SECTION INDICATOR / META LINE: Mono uppercase secondary color --- */

.section-indicator {
  font-family: var(--font-mono);
  font-size: var(--type-meta, 10px);
  font-weight: 500;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--color-text-secondary, #666666);
  margin-bottom: var(--space-4, 16px);
  padding-bottom: var(--space-2, 8px);
  border-bottom: 1px solid var(--color-border-subtle, #F0EBE3);
}

.meta-line {
  font-family: var(--font-body);
  font-size: var(--type-meta, 10px);
  font-weight: 500;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--color-text-secondary, #666666);
  margin-bottom: var(--space-2, 8px);
  display: flex;
  align-items: center;
  gap: var(--space-4, 16px);
  flex-wrap: wrap;
}


/* --- FILE TREE: Monospace directory structure --- */

.file-tree {
  background: var(--color-background, #FEF9F5);
  border: 1px solid var(--color-border-subtle, #F0EBE3);
  border-left: 4px solid var(--accent-blue, #4A90D9);
  padding: var(--space-4, 16px);
  margin-bottom: var(--space-6, 24px);
}

.file-tree__label {
  font-family: var(--font-body);
  font-size: var(--type-meta, 10px);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--accent-blue, #4A90D9);
  margin-bottom: var(--space-3, 12px);
}

.file-tree__content {
  font-family: var(--font-mono);
  font-size: 13px;
  line-height: 1.7;
  white-space: pre;
}

.file-tree__content .folder { color: var(--accent-blue, #4A90D9); }
.file-tree__content .file { color: var(--color-text, #1A1A1A); }
.file-tree__content .comment { color: var(--color-text-secondary, #666666); }


/* --- DECISION MATRIX: Structured comparison grid --- */

.decision-matrix {
  border-left: 4px solid var(--color-primary, #E83025);
  margin-bottom: var(--space-6, 24px);
  overflow-x: auto;
}

.decision-matrix__header {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 1fr;
  gap: var(--space-4, 16px);
  padding: var(--space-3, 12px) var(--space-4, 16px);
  background: rgba(232, 48, 37, 0.05);
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.decision-matrix__row {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 1fr;
  gap: var(--space-4, 16px);
  padding: var(--space-3, 12px) var(--space-4, 16px);
  border-bottom: 1px solid var(--color-border-subtle, #F0EBE3);
  font-size: 14px;
}

.decision-matrix__row:last-child {
  border-bottom: none;
}


/* --- DENSITY INDICATOR: Visual density level marker --- */

.density-indicator {
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--color-border, #E0D5C5);
  text-transform: uppercase;
  letter-spacing: 0.2em;
  margin-bottom: var(--space-4, 16px);
  display: flex;
  align-items: center;
  gap: var(--space-2, 8px);
}

.density-bar {
  height: 4px;
  background: var(--color-border, #E0D5C5);
}

.density-bar--sparse { width: 20px; }
.density-bar--medium { width: 40px; }
.density-bar--dense { width: 80px; }


/* --- Q&A PAIR: Question-answer structure with offset positioning --- */

.question {
  max-width: 60%;
  margin-left: var(--space-8, 32px);
  margin-bottom: var(--space-4, 16px);
}

.question__marker {
  width: 8px;
  height: 8px;
  background: var(--color-primary, #E83025);
  display: inline-block;
  margin-right: var(--space-2, 8px);
  border-radius: var(--border-radius, 0);
}

.question__text {
  font-family: var(--font-display);
  font-size: var(--type-subsection, 22px);
  font-style: italic;
  line-height: 1.4;
}

.answer {
  padding: var(--space-6, 24px);
  margin-bottom: var(--space-8, 32px);
  background: var(--color-zone-dense, #FFFFFF);
}

.answer__lead {
  font-size: var(--type-body, 16px);
  line-height: 1.7;
  margin-bottom: var(--space-4, 16px);
}

/* Editorial drop cap on opening paragraphs */
.answer__lead--dropcap::first-letter {
  font-family: var(--font-display);
  font-size: 3.5em;
  line-height: 0.85;
  float: left;
  margin: 0 0.1em 0 0;
  font-weight: normal;
}


/* --- BREADCRUMB NAVIGATION: Hierarchical page location --- */

.breadcrumb {
  font-size: var(--type-meta, 12px);
  color: var(--color-text-secondary, #666666);
  margin-bottom: var(--space-4, 16px);
}

.breadcrumb__link {
  color: var(--color-text-secondary, #666666);
  text-decoration: none;
}

.breadcrumb__link:hover {
  color: var(--color-primary, #E83025);
}

.breadcrumb__separator {
  margin: 0 var(--space-2, 8px);
  color: var(--color-border, #E0D5C5);
}


/* ============================================================================
   CD-SPECIFIC COMPONENTS
   ============================================================================ */

/* --- REASONING COMPONENT (CD-ONLY): Framed deliberation container --- */

/* CD-ONLY */
.reasoning {
  border: 3px solid var(--color-border, #E0D5C5);
  padding: var(--space-8, 32px);
  margin: var(--space-8, 32px) 0;
  background: var(--color-zone-sparse);
}

.reasoning__header {
  display: flex;
  align-items: center;
  gap: var(--space-3, 12px);
  margin-bottom: var(--space-6, 24px);
  padding-bottom: var(--space-4, 16px);
  border-bottom: 1px solid var(--color-border, #E0D5C5);
}

.reasoning__icon {
  font-family: var(--font-mono);
  font-size: var(--type-meta, 10px);
  font-weight: 600;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--accent-amber, #D97706);
  border: 1px solid var(--accent-amber, #D97706);
  padding: var(--space-1, 4px) var(--space-3, 12px);
}

.reasoning__title {
  font-family: var(--font-display);
  font-size: var(--type-subsection, 22px);
  font-style: italic;
  color: var(--color-text);
}

.reasoning__body p {
  margin-bottom: var(--space-4, 16px);
}

.reasoning__body p:last-child {
  margin-bottom: 0;
}


/* --- CORE ABSTRACTION (CD-ONLY): Essence quote above, code proof below --- */

/* CD-ONLY */
.core-abstraction {
  border: 3px solid var(--color-primary, #E83025);
  margin: var(--space-8, 32px) 0;
  background: var(--color-zone-dense);
}

.core-abstraction__essence {
  padding: var(--space-8, 32px);
  border-bottom: 3px solid var(--color-primary, #E83025);
  background: var(--color-zone-sparse);
}

.core-abstraction__label {
  font-family: var(--font-mono);
  font-size: var(--type-meta, 10px);
  font-weight: 600;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--accent-purple, #7C3AED);
  margin-bottom: var(--space-3, 12px);
}

.core-abstraction__quote {
  font-family: var(--font-display);
  font-style: italic;
  font-size: var(--type-section, 26px);
  line-height: 1.4;
  color: var(--color-text);
  max-width: 55ch;
}

.core-abstraction__proof {
  padding: 0;
}

.core-abstraction__proof pre {
  border: none;
  margin-bottom: 0;
}


/* --- BENTO GRID (CD-ONLY): 2-column grid for high-density containment --- */

/* CD-ONLY */
.bento-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-6, 24px);
  margin: var(--space-8, 32px) 0;
}

.bento-cell {
  border: 3px solid var(--color-border, #E0D5C5);
  padding: var(--space-6, 24px);
  background: var(--color-zone-dense);
}

.bento-cell--primary {
  grid-column: 1 / -1;
}

.bento-cell__label {
  font-family: var(--font-mono);
  font-size: var(--type-meta, 10px);
  font-weight: 600;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--color-text-secondary, #666666);
  margin-bottom: var(--space-4, 16px);
  padding-bottom: var(--space-2, 8px);
  border-bottom: 1px solid var(--color-border-subtle, #F0EBE3);
}

.bento-cell pre {
  margin-bottom: 0;
}


/* --- ESSENCE PULLQUOTE (CD-ONLY): Bridge transition element --- */

/* CD-ONLY */
.essence-pullquote {
  border-left: 4px solid var(--accent-purple, #7C3AED);
  padding: var(--space-8, 32px) var(--space-6, 24px);
  margin: var(--space-between, 40px) 0;
  background: var(--color-zone-sparse);
}

.essence-pullquote p {
  font-family: var(--font-display);
  font-style: italic;
  font-size: var(--type-section, 26px);
  line-height: 1.4;
  color: var(--color-text);
  max-width: 55ch;
}

.essence-pullquote cite {
  display: block;
  font-family: var(--font-mono);
  font-size: var(--type-meta, 10px);
  font-style: normal;
  color: var(--color-text-secondary, #666666);
  margin-top: var(--space-3, 12px);
  letter-spacing: 0.05em;
  text-transform: uppercase;
}


/* --- DENSITY METER (CD-ONLY): 5-segment density visualization bar --- */

/* CD-ONLY */
.density-meter {
  display: flex;
  gap: var(--space-1, 4px);
  margin-bottom: var(--space-6, 24px);
}

.density-meter__segment {
  height: var(--space-2, 8px);
  flex: 1;
  background: var(--color-border-subtle, #F0EBE3);
  border: 1px solid var(--color-border, #E0D5C5);
}

.density-meter__segment--filled {
  background: var(--color-primary, #E83025);
  border-color: var(--color-primary, #E83025);
}

.density-meter__label {
  font-family: var(--font-mono);
  font-size: var(--type-meta, 10px);
  color: var(--color-text-secondary, #666666);
  letter-spacing: 0.05em;
  text-transform: uppercase;
  margin-bottom: var(--space-1, 4px);
}


/* --- VERSION BADGE (CD-ONLY): Header metadata badge --- */

/* CD-ONLY */
.version-badge {
  display: inline-block;
  font-family: var(--font-mono);
  font-size: var(--type-meta, 10px);
  font-weight: 500;
  letter-spacing: 0.05em;
  padding: 2px 8px;
  border: 1px solid var(--color-text-secondary, #666666);
  color: var(--color-text-secondary, #666666);
}


/* --- SECTION ZONES (CD-ONLY): Density progression containers (values are examples, not mandates) --- */

/* CD-ONLY */
.section-zone {
  padding: var(--space-12, 48px) var(--space-6, 24px);
  max-width: 1100px;
  margin: 0 auto;
  width: 100%;
}

/* Density progression examples (available, not mandated) */
.section-zone--opening {
  background: var(--color-zone-sparse);
  padding-top: var(--space-16, 64px);
  padding-bottom: var(--space-16, 64px);
}

.section-zone--rising {
  background: var(--color-zone-dense);
  padding-top: var(--space-12, 48px);
  padding-bottom: var(--space-12, 48px);
}

.section-zone--building {
  background: var(--color-zone-dense);
  padding-top: var(--space-8, 32px);
  padding-bottom: var(--space-8, 32px);
}

.section-zone--peak {
  background: var(--color-zone-dense);
  padding-top: var(--space-6, 24px);
  padding-bottom: var(--space-8, 32px);
}

.section-zone--resolution {
  background: var(--color-zone-sparse);
  padding-top: var(--space-16, 64px);
  padding-bottom: var(--space-16, 64px);
}


/* --- BREATHING ZONES (CD-ONLY): Between-section decompression --- */

/* CD-ONLY */
.breathing-zone {
  background: var(--color-zone-breathing);
  padding: var(--space-12, 48px) var(--space-6, 24px);
  border-top: 3px solid var(--color-border, #E0D5C5);
  border-bottom: 3px solid var(--color-border, #E0D5C5);
}

.breathing-zone__inner {
  max-width: 1100px;
  margin: 0 auto;
}

.breathing-zone--tight {
  padding: var(--space-6, 24px) var(--space-6, 24px);
}

.breathing-zone--release {
  padding: var(--space-16, 64px) var(--space-6, 24px);
}


/* ============================================================================
   TENSION-TEST-ONLY COMPONENTS (lower confidence — metaphor-specific)
   ============================================================================ */

/* --- LAYER BOUNDARIES (TENSION-TEST-ONLY): Horizontal separators --- */

/* TENSION-TEST-ONLY — lower confidence */
.stratum,
.layer {
  position: relative;
  transition: none;
}

.stratum-boundary,
.layer-boundary {
  height: 3px;
  background: var(--color-border, #E0D5C5);
  position: relative;
}

.stratum-boundary--major,
.layer-boundary--major {
  height: 4px;
  background: var(--color-text-secondary, #666666);
}


/* --- BUILDING FLOOR STRUCTURE (TENSION-TEST-ONLY): Hierarchical nesting --- */

/* TENSION-TEST-ONLY — lower confidence */
.floor {
  background: var(--color-background);
  border: 4px solid var(--color-text);
  padding: 0;
  margin-bottom: 24px;
}

.floor-label {
  background: var(--color-text);
  color: var(--color-background);
  padding: 12px 32px;
  font-family: var(--font-mono);
  font-size: var(--type-meta);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.room {
  border: 3px solid var(--color-text);
  padding: 24px;
  margin-bottom: 16px;
}


/* --- COMPRESSION GRID (TENSION-TEST-ONLY): 2-column compact grid --- */

/* TENSION-TEST-ONLY — lower confidence */
.compression-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1px;
  background: var(--color-border, #E0D5C5);
  margin: 24px 0;
}

.compression-cell {
  background: var(--color-zone-sparse);
  padding: 16px 20px;
}


/* ============================================================================
   RESPONSIVE UTILITIES
   ============================================================================ */

@media (max-width: 768px) {
  .exploration-title,
  .page-header__title {
    font-size: 26px;
  }

  .question {
    max-width: 100%;
    margin-left: 0;
  }

  .answer {
    padding: var(--space-4, 16px);
  }

  .code-snippet__content {
    font-size: 12px;
  }

  .decision-matrix__header,
  .decision-matrix__row {
    grid-template-columns: 1fr;
  }

  .bento-grid {
    grid-template-columns: 1fr;
  }
}


/* ============================================================================
   REDUCED MOTION (Accessibility)
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}


